{
  "version": 3,
  "sources": ["game.js"],
  "sourcesContent": ["(function (root, factory) {\r\n\tif (typeof module === \"object\" && module.exports) {\r\n\t\tmodule.exports = factory()\r\n\t} else {\r\n\t\troot.game = {\r\n\t\t\tconfig: factory(),\r\n\t\t}\r\n\t}\r\n})(typeof self !== \"undefined\" ? self : this, function () {\r\n\treturn {\r\n\t\tbuild_time: \"09.02.2021 15:02:23\",\n\t\tbuild_version: 680,\r\n\t\tchannel: \"poki\",\r\n\t\tgame_title: \"Bouncy Woods\",\r\n\t\tgame_title_short: \"Bouncy Woods\",\r\n\t\tgame_slug: \"bouncy-woods\",\r\n\t}\r\n})\r\n;\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar game;\r\n(function (game) {\r\n    var Config = /** @class */ (function () {\r\n        function Config() {\r\n        }\r\n        Config.GAME_TITLE = \"Bouncy_Woods\";\r\n        Config.SERVER_URL = \"https://robowhale.com/html5/bouncy-woods-levels/\";\r\n        Config.SOURCE_GAME_WIDTH = 750;\r\n        Config.SOURCE_GAME_HEIGHT = 1334;\r\n        Config.IS_LANDSCAPE = Config.SOURCE_GAME_WIDTH > Config.SOURCE_GAME_HEIGHT;\r\n        Config.IS_PORTRAIT = Config.SOURCE_GAME_HEIGHT > Config.SOURCE_GAME_WIDTH;\r\n        Config.GAME_WIDTH = Config.SOURCE_GAME_WIDTH;\r\n        Config.GAME_HEIGHT = Config.SOURCE_GAME_HEIGHT;\r\n        Config.HALF_GAME_WIDTH = Config.GAME_WIDTH * 0.5;\r\n        Config.HALF_GAME_HEIGHT = Config.GAME_HEIGHT * 0.5;\r\n        Config.ASPECT_RATIO = Config.SOURCE_GAME_WIDTH / Config.SOURCE_GAME_HEIGHT;\r\n        Config.ZOOM = 1;\r\n        Config.ASSETS_SCALE = 1;\r\n        return Config;\r\n    }());\r\n    game.Config = Config;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game_1) {\r\n    var WebGLRenderer = Phaser.Renderer.WebGL.WebGLRenderer;\r\n    var CanvasRenderer = Phaser.Renderer.Canvas.CanvasRenderer;\r\n    var GameConfigCreator = /** @class */ (function () {\r\n        function GameConfigCreator() {\r\n        }\r\n        GameConfigCreator.create = function () {\r\n            return {\r\n                type: this.getRenderType(),\r\n                scale: this.createScaleConfig(),\r\n                audio: this.createAudioConfig(),\r\n                parent: \"canvas-container\",\r\n                input: {\r\n                    windowEvents: true,\r\n                    smoothFactor: 0.5,\r\n                },\r\n                render: {\r\n                    clearBeforeRender: false,\r\n                    transparent: false,\r\n                    failIfMajorPerformanceCaveat: true,\r\n                    powerPreference: \"high-performance\",\r\n                    antialias: this.disableAntialias() === false,\r\n                },\r\n                banner: {\r\n                    background: [\"rgba(0,0,255,0.4)\"],\r\n                },\r\n                plugins: {\r\n                    global: [\r\n                        {\r\n                            key: \"gacha\",\r\n                            plugin: rexgashaponplugin,\r\n                            start: true,\r\n                        },\r\n                        {\r\n                            key: \"rexWebfontLoader\",\r\n                            plugin: rexwebfontloaderplugin,\r\n                            start: true,\r\n                        },\r\n                        {\r\n                            key: \"rexawaitloaderplugin\",\r\n                            plugin: rexawaitloaderplugin,\r\n                            start: true,\r\n                        },\r\n                    ],\r\n                },\r\n                callbacks: {\r\n                    preBoot: this.preBootCallback.bind(this),\r\n                    postBoot: this.postBootCallback.bind(this),\r\n                },\r\n            };\r\n        };\r\n        GameConfigCreator.getRenderType = function () {\r\n            var canvas = utils.NetUtil.getParam(\"forceCanvas\");\r\n            if (canvas === \"1\") {\r\n                return Phaser.CANVAS;\r\n            }\r\n            return Phaser.AUTO;\r\n        };\r\n        GameConfigCreator.createScaleConfig = function () {\r\n            return utils.DeviceUtil.isDesktop()\r\n                ? this.createDesktopScaleConfig()\r\n                : this.createMobileScaleConfig();\r\n        };\r\n        GameConfigCreator.createDesktopScaleConfig = function () {\r\n            game_1.Config.SOURCE_GAME_HEIGHT = 960;\r\n            game_1.Config.GAME_HEIGHT = game_1.Config.SOURCE_GAME_HEIGHT;\r\n            game_1.Config.HALF_GAME_HEIGHT = game_1.Config.GAME_HEIGHT / 2;\r\n            game_1.Config.ASPECT_RATIO = game_1.Config.SOURCE_GAME_WIDTH / game_1.Config.SOURCE_GAME_HEIGHT;\r\n            var config = {\r\n                width: game_1.Config.SOURCE_GAME_WIDTH,\r\n                height: game_1.Config.SOURCE_GAME_HEIGHT,\r\n                autoCenter: Phaser.Scale.CENTER_VERTICALLY,\r\n                mode: Phaser.Scale.FIT,\r\n            };\r\n            var originalSize = utils.NetUtil.getParamBool(\"originalSize\");\r\n            if (originalSize) {\r\n                config.max = {\r\n                    width: game_1.Config.SOURCE_GAME_WIDTH,\r\n                    height: game_1.Config.SOURCE_GAME_HEIGHT,\r\n                };\r\n            }\r\n            return config;\r\n        };\r\n        GameConfigCreator.createMobileScaleConfig = function () {\r\n            return {\r\n                width: game_1.Config.SOURCE_GAME_WIDTH,\r\n                height: game_1.Config.SOURCE_GAME_HEIGHT,\r\n                mode: Phaser.Scale.NONE,\r\n            };\r\n        };\r\n        GameConfigCreator.createAudioConfig = function () {\r\n            var _a;\r\n            var AudioContext = (_a = window[\"AudioContext\"]) !== null && _a !== void 0 ? _a : window[\"webkitAudioContext\"];\r\n            var isAudioContextAvailable = typeof AudioContext !== \"undefined\";\r\n            if (isAudioContextAvailable === false) {\r\n                return {\r\n                    disableWebAudio: true,\r\n                };\r\n            }\r\n            var context = this.createAudioContext(AudioContext);\r\n            if (typeof context.resume === \"undefined\" || typeof context.suspend === \"undefined\") {\r\n                return {\r\n                    disableWebAudio: true,\r\n                };\r\n            }\r\n            var noWebAudio = utils.NetUtil.getParamBool(\"noWebAudio\");\r\n            return {\r\n                disableWebAudio: noWebAudio,\r\n                context: context,\r\n            };\r\n        };\r\n        GameConfigCreator.createAudioContext = function (AudioContext) {\r\n            var options = {\r\n                sampleRate: 44100,\r\n                latencyHint: \"playback\",\r\n            };\r\n            var context;\r\n            try {\r\n                context = new AudioContext(options);\r\n            }\r\n            catch (e) {\r\n                context = new AudioContext();\r\n            }\r\n            return context;\r\n        };\r\n        GameConfigCreator.disableAntialias = function () {\r\n            return utils.NetUtil.getParamBool(\"noaa\");\r\n        };\r\n        GameConfigCreator.preBootCallback = function (game) {\r\n        };\r\n        GameConfigCreator.postBootCallback = function (game) {\r\n            game.audioType = game_1.GameAudio.getAudioType(game.sound);\r\n            game.rendererType = this.getRendererType(game.renderer);\r\n            game.raven = new game_1.RavenWrapper(game);\r\n            game.raven.setContextsOnStart();\r\n        };\r\n        GameConfigCreator.getRendererType = function (renderer) {\r\n            if (renderer instanceof WebGLRenderer) {\r\n                return game_1.RendererType.WEBGL;\r\n            }\r\n            else if (renderer instanceof CanvasRenderer) {\r\n                return game_1.RendererType.CANVAS;\r\n            }\r\n            return game_1.RendererType.HEADLESS;\r\n        };\r\n        return GameConfigCreator;\r\n    }());\r\n    game_1.GameConfigCreator = GameConfigCreator;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game_2) {\r\n    var RavenWrapper = /** @class */ (function () {\r\n        function RavenWrapper(game) {\r\n            this._enabled = false;\r\n            this.game = game;\r\n            this._enabled = typeof Raven !== \"undefined\" && Raven.isSetup();\r\n        }\r\n        Object.defineProperty(RavenWrapper.prototype, \"enabled\", {\r\n            get: function () {\r\n                return this._enabled;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        RavenWrapper.prototype.captureBreadcrumb = function (crumb) {\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            Raven.captureBreadcrumb(crumb);\r\n        };\r\n        RavenWrapper.prototype.addTagsContext = function (tags) {\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            Raven.setTagsContext(tags);\r\n        };\r\n        RavenWrapper.prototype.addExtraContext = function (context) {\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            Raven.setExtraContext(context);\r\n        };\r\n        RavenWrapper.prototype.setContextsOnStart = function () {\r\n            var _a;\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            Raven.setTagsContext({\r\n                renderer: this.game.rendererType,\r\n                audio: this.game.audioType,\r\n                browserLanguage: navigator.language,\r\n                audioSampleRate: (_a = this.game.sound[\"context\"]) === null || _a === void 0 ? void 0 : _a.sampleRate,\r\n            });\r\n            var device = this.game.device;\r\n            Raven.setExtraContext({\r\n                gameplayLoaded: false,\r\n                levelsMapLoaded: false,\r\n                device: {\r\n                    fullscreen: device.fullscreen.available,\r\n                    vibration: device.features.vibration,\r\n                    canvas: device.features.canvas,\r\n                    webgl: device.features.webGL,\r\n                    audio: {\r\n                        mp3: device.audio.mp3,\r\n                        m4a: device.audio.m4a,\r\n                        wav: device.audio.wav,\r\n                    },\r\n                },\r\n            });\r\n        };\r\n        RavenWrapper.prototype.trackSceneChanges = function (transition) {\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            transition.on(game_2.SceneTransitionEvent.COMPLETE, this.onSceneTransitionComplete, this);\r\n        };\r\n        RavenWrapper.prototype.onSceneTransitionComplete = function (transition, oldSceneKey, newSceneKey, newSceneData) {\r\n            Raven.setExtraContext({\r\n                lastScene: oldSceneKey,\r\n                currentScene: newSceneKey,\r\n                currentSceneData: newSceneData,\r\n            });\r\n            this.trackSceneInput(newSceneKey);\r\n        };\r\n        RavenWrapper.prototype.trackSceneInput = function (sceneKey) {\r\n            var _a;\r\n            if (this._enabled === false) {\r\n                return;\r\n            }\r\n            var scene = this.game.scene.getScene(sceneKey);\r\n            if (scene) {\r\n                scene.events.once(Phaser.Scenes.Events.SHUTDOWN, this.removePointerDownListener.bind(this, scene));\r\n                (_a = scene.input) === null || _a === void 0 ? void 0 : _a.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            }\r\n        };\r\n        RavenWrapper.prototype.removePointerDownListener = function (scene) {\r\n            var _a;\r\n            (_a = scene.input) === null || _a === void 0 ? void 0 : _a.off(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n        };\r\n        RavenWrapper.prototype.onPointerDown = function (pointer, objects) {\r\n            var clicked = objects.map(function (obj) {\r\n                var _a, _b;\r\n                return obj.name || ((_a = obj[\"frame\"]) === null || _a === void 0 ? void 0 : _a.name) || ((_b = obj[\"texture\"]) === null || _b === void 0 ? void 0 : _b.key);\r\n            });\r\n            if (clicked.length === 0) {\r\n                return;\r\n            }\r\n            Raven.setExtraContext({\r\n                lastClick: clicked.join(),\r\n            });\r\n        };\r\n        RavenWrapper.prototype.captureMessage = function (message, level) {\r\n            if (level === void 0) { level = \"info\"; }\r\n            if (this._enabled) {\r\n                Raven.captureMessage(message, { level: level });\r\n            }\r\n        };\r\n        RavenWrapper.prototype.captureException = function (exception, options) {\r\n            if (this._enabled) {\r\n                Raven.captureException(exception, options);\r\n            }\r\n        };\r\n        return RavenWrapper;\r\n    }());\r\n    game_2.RavenWrapper = RavenWrapper;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FontWeight;\r\n    (function (FontWeight) {\r\n        FontWeight[\"BOLD\"] = \"700\";\r\n        FontWeight[\"BLACK\"] = \"900\";\r\n    })(FontWeight = game.FontWeight || (game.FontWeight = {}));\r\n    var GameFontsEvent;\r\n    (function (GameFontsEvent) {\r\n        GameFontsEvent[\"WEBFONT_ACTIVE\"] = \"webfontactive\";\r\n        GameFontsEvent[\"WEBFONT_INACTIVE\"] = \"webfontinactive\";\r\n    })(GameFontsEvent = game.GameFontsEvent || (game.GameFontsEvent = {}));\r\n    var GameFont;\r\n    (function (GameFont) {\r\n        GameFont[\"SOUSES\"] = \"Souses\";\r\n        GameFont[\"DEFAULT\"] = \"Souses\";\r\n    })(GameFont = game.GameFont || (game.GameFont = {}));\r\n    var BitmapGameFont;\r\n    (function (BitmapGameFont) {\r\n        BitmapGameFont[\"GAMEPLAY_BOOSTERS\"] = \"GAMEPLAY_BOOSTERS\";\r\n        BitmapGameFont[\"GAMEPLAY_GUI_BOOSTERS\"] = \"GAMEPLAY_GUI_BOOSTERS\";\r\n        BitmapGameFont[\"BLOCKS_LABEL_COMPLETE\"] = \"BLOCKS_LABEL_COMPLETE\";\r\n        BitmapGameFont[\"BLOCKS_LABEL\"] = \"BLOCKS_LABEL\";\r\n        BitmapGameFont[\"INGAME_GUI_DIGITS\"] = \"ingame_gui_digits\";\r\n        BitmapGameFont[\"EDITOR_BLOCK_LIVES\"] = \"editor_block_lives\";\r\n        BitmapGameFont[\"EDITOR_ROW_NUMBERS\"] = \"editor_row_numbers\";\r\n        BitmapGameFont[\"LEVELS_MAP_NUMBERS_COMPLETE\"] = \"LEVELS_MAP_NUMBERS_COMPLETE\";\r\n        BitmapGameFont[\"LEVELS_MAP_NUMBERS_UNLOCKED\"] = \"LEVELS_MAP_NUMBERS_UNLOCKED\";\r\n        BitmapGameFont[\"BLOCK_DAMAGE_FX\"] = \"BLOCK_DAMAGE_FX\";\r\n        BitmapGameFont[\"BLOCK_LIVES\"] = \"BLOCK_LIVES\";\r\n    })(BitmapGameFont = game.BitmapGameFont || (game.BitmapGameFont = {}));\r\n    var GameFonts = /** @class */ (function (_super) {\r\n        __extends(GameFonts, _super);\r\n        function GameFonts(_game) {\r\n            var _this = _super.call(this) || this;\r\n            _this.game = _game;\r\n            return _this;\r\n        }\r\n        return GameFonts;\r\n    }(Phaser.Events.EventEmitter));\r\n    game.GameFonts = GameFonts;\r\n})(game || (game = {}));\r\n///<reference path=\"ITexts.ts\"/>\r\nvar game;\r\n(function (game) {\r\n    var EventEmitter = Phaser.Events.EventEmitter;\r\n    game.LANGUAGES_MAP = {\r\n        \"ru\": \"\u0420\u0443\u0441\u0441\u043A\u0438\u0439\",\r\n        \"en\": \"English\",\r\n        \"fr\": \"Fran\u00E7ais\",\r\n        \"it\": \"Italiano\",\r\n        \"de\": \"Deutsch\",\r\n        \"es\": \"Espa\u00F1ol\",\r\n        \"nl\": \"Nederlands\",\r\n        \"no\": \"Norsk\",\r\n        \"fi\": \"Suomi\",\r\n        \"br\": \"Brasileiro\",\r\n        \"pt\": \"Portugu\u00EAs\",\r\n    };\r\n    function getLanguageTitle(shortCode) {\r\n        return game.LANGUAGES_MAP[shortCode];\r\n    }\r\n    game.getLanguageTitle = getLanguageTitle;\r\n    var GameTextsEvent;\r\n    (function (GameTextsEvent) {\r\n        GameTextsEvent[\"LANGUAGE_CHANGE\"] = \"GameTexts_LANGUAGE_CHANGE\";\r\n    })(GameTextsEvent = game.GameTextsEvent || (game.GameTextsEvent = {}));\r\n    var GameTexts = /** @class */ (function (_super) {\r\n        __extends(GameTexts, _super);\r\n        function GameTexts(_game) {\r\n            var _this = _super.call(this) || this;\r\n            _this.game = _game;\r\n            _this.allTexts = _this.game.cache.json.get(\"texts\");\r\n            _this.allLanguages = Object.keys(_this.allTexts);\r\n            _this._language = _this.detectLanguage();\r\n            _this.texts = _this.allTexts[_this._language];\r\n            _this.game.raven.addTagsContext({ gameLanguage: _this._language });\r\n            console.info(\"Language: \" + _this._language);\r\n            return _this;\r\n            // console.groupCollapsed(\"Texts\")\r\n            // console.log(this.texts)\r\n            // console.groupEnd()\r\n        }\r\n        Object.defineProperty(GameTexts.prototype, \"language\", {\r\n            get: function () {\r\n                return this._language;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        GameTexts.prototype.detectLanguage = function () {\r\n            return (this.getLanguageFromUrlParam() ||\r\n                this.getSavedLanguage() ||\r\n                this.getLanguageFromBrowser() ||\r\n                \"en\");\r\n        };\r\n        GameTexts.prototype.getLanguageFromUrlParam = function () {\r\n            var language = utils.NetUtil.getParam(\"lang\") || utils.NetUtil.getParam(\"language\");\r\n            if (language && typeof language === \"string\" && this.isLanguageSupported(language)) {\r\n                return language;\r\n            }\r\n            return null;\r\n        };\r\n        GameTexts.prototype.getSavedLanguage = function () {\r\n            return this.game.store.getValue(game.GameStoreKey.LANGUAGE);\r\n        };\r\n        GameTexts.prototype.getLanguageFromBrowser = function () {\r\n            var langugage = navigator.language.split(\"-\")[0].toLowerCase();\r\n            if (langugage && this.isLanguageSupported(langugage)) {\r\n                return langugage;\r\n            }\r\n            return;\r\n        };\r\n        GameTexts.prototype.isLanguageSupported = function (language) {\r\n            return this.allLanguages.includes(language);\r\n        };\r\n        GameTexts.prototype.injectTextsIntoScenes = function () {\r\n            var _this = this;\r\n            this.game.scene.getScenes(false).forEach(function (scene) {\r\n                scene[\"texts\"] = _this.texts;\r\n            });\r\n        };\r\n        GameTexts.prototype.setLanguage = function (language) {\r\n            if (!this.isLanguageSupported(language)) {\r\n                console.warn(\"Language \" + language + \" is not supported!\");\r\n                return false;\r\n            }\r\n            this._language = language;\r\n            this.texts = this.allTexts[language];\r\n            this.game.raven.addTagsContext({ gameLanguage: this._language });\r\n            this.injectTextsIntoScenes();\r\n            this.emit(GameTextsEvent.LANGUAGE_CHANGE, language);\r\n            return true;\r\n        };\r\n        return GameTexts;\r\n    }(EventEmitter));\r\n    game.GameTexts = GameTexts;\r\n})(game || (game = {}));\r\n///<reference path=\"IStorage.ts\"/>\r\nvar game;\r\n(function (game) {\r\n    var RuntimeStorage /*implements IStorage*/ = /** @class */ (function () {\r\n        function RuntimeStorage() {\r\n            this.name = \"Runtime Storage\";\r\n            this.storage = {};\r\n        }\r\n        Object.defineProperty(RuntimeStorage.prototype, \"namespace\", {\r\n            get: function () {\r\n                return this._namespace;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        RuntimeStorage.prototype.init = function () { };\r\n        RuntimeStorage.prototype.setNamespace = function (namespace) {\r\n            this._namespace = namespace;\r\n        };\r\n        RuntimeStorage.prototype.saveValue = function (key, value) {\r\n            this.storage[this.getSaveKey(key)] = value;\r\n        };\r\n        RuntimeStorage.prototype.getValue = function (key) {\r\n            return this.storage[this.getSaveKey(key)];\r\n        };\r\n        RuntimeStorage.prototype.getNumber = function (key) {\r\n            return this.getValue(key) || 0;\r\n        };\r\n        RuntimeStorage.prototype.getBoolean = function (key) {\r\n            return this.getValue(key) || false;\r\n        };\r\n        RuntimeStorage.prototype.getString = function (key) {\r\n            return this.getValue(key) || \"\";\r\n        };\r\n        RuntimeStorage.prototype.getObject = function (key) {\r\n            return this.getValue(key) || {};\r\n        };\r\n        RuntimeStorage.prototype.getContent = function (ignoreNamespace) {\r\n            var _this = this;\r\n            if (ignoreNamespace === void 0) { ignoreNamespace = false; }\r\n            if (ignoreNamespace) {\r\n                return this.storage;\r\n            }\r\n            else {\r\n                var keys = Object.keys(this.storage).filter(function (key) {\r\n                    return key.indexOf(_this._namespace) > -1;\r\n                });\r\n                var content_1 = {};\r\n                keys.forEach(function (key) {\r\n                    content_1[key] = _this.storage[key];\r\n                });\r\n                return content_1;\r\n            }\r\n        };\r\n        RuntimeStorage.prototype.clear = function (ignoreNamespace) {\r\n            var _this = this;\r\n            if (ignoreNamespace === void 0) { ignoreNamespace = false; }\r\n            if (ignoreNamespace) {\r\n                this.storage = {};\r\n            }\r\n            else {\r\n                var keysToDelete = Object.keys(this.storage).filter(function (key) {\r\n                    return key.indexOf(_this._namespace) > -1;\r\n                });\r\n                keysToDelete.forEach(function (key) {\r\n                    delete _this.storage[key];\r\n                });\r\n            }\r\n        };\r\n        RuntimeStorage.prototype.getSaveKey = function (key) {\r\n            return this._namespace + \"__\" + key;\r\n        };\r\n        return RuntimeStorage;\r\n    }());\r\n    game.RuntimeStorage = RuntimeStorage;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LocalForageWrapper = /** @class */ (function () {\r\n        function LocalForageWrapper(storeName) {\r\n            this.type = \"Local Forage\";\r\n            this.storeName = storeName;\r\n        }\r\n        LocalForageWrapper.prototype.init = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var testKey, results, error_1;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            _a.trys.push([0, 2, , 3]);\r\n                            this.instance = localforage.createInstance({\r\n                                driver: [localforage.LOCALSTORAGE, localforage.INDEXEDDB],\r\n                                storeName: this.storeName,\r\n                                name: \"robowhale\",\r\n                            });\r\n                            testKey = \"testKey\";\r\n                            return [4 /*yield*/, Promise.all([\r\n                                    this.instance.setItem(testKey, testKey),\r\n                                    this.instance.getItem(testKey),\r\n                                    this.instance.removeItem(testKey),\r\n                                ])];\r\n                        case 1:\r\n                            results = _a.sent();\r\n                            return [2 /*return*/, Promise.resolve()];\r\n                        case 2:\r\n                            error_1 = _a.sent();\r\n                            this.instance = null;\r\n                            return [2 /*return*/, Promise.reject(error_1)];\r\n                        case 3: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalForageWrapper.prototype.saveValue = function (key, value) {\r\n            var _a;\r\n            var dataToSave = typeof value === \"string\"\r\n                ? value\r\n                : JSON.stringify(value);\r\n            return (_a = this.instance) === null || _a === void 0 ? void 0 : _a.setItem(this.getStorageKey(key), dataToSave);\r\n        };\r\n        LocalForageWrapper.prototype.getStorageKey = function (key) {\r\n            return \"__\" + key;\r\n        };\r\n        LocalForageWrapper.prototype.getValue = function (key) {\r\n            var _a;\r\n            return Promise.resolve((_a = this.instance) === null || _a === void 0 ? void 0 : _a.getItem(this.getStorageKey(key)));\r\n        };\r\n        LocalForageWrapper.prototype.getNumber = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, num;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(0)];\r\n                            }\r\n                            else {\r\n                                num = parseFloat(value) || 0;\r\n                                return [2 /*return*/, Promise.resolve(num)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalForageWrapper.prototype.getBoolean = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, bool;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(false)];\r\n                            }\r\n                            else {\r\n                                bool = value === \"true\";\r\n                                return [2 /*return*/, Promise.resolve(bool)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalForageWrapper.prototype.getString = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(\"\")];\r\n                            }\r\n                            else {\r\n                                return [2 /*return*/, Promise.resolve(value)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalForageWrapper.prototype.getObject = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, obj;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            obj = null;\r\n                            try {\r\n                                obj = JSON.parse(value);\r\n                            }\r\n                            catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                            return [2 /*return*/, Promise.resolve(obj)];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalForageWrapper.prototype.remove = function (key) {\r\n            var _a;\r\n            (_a = this.instance) === null || _a === void 0 ? void 0 : _a.removeItem(this.getStorageKey(key));\r\n        };\r\n        LocalForageWrapper.prototype.clear = function () {\r\n            var _this = this;\r\n            Object.keys(this.instance)\r\n                .filter(function (key) { return key.includes(_this.storeName); })\r\n                .forEach(function (key) {\r\n                var _a;\r\n                (_a = _this.instance) === null || _a === void 0 ? void 0 : _a.removeItem(key);\r\n            });\r\n            return Promise.resolve();\r\n        };\r\n        LocalForageWrapper.prototype.getDriverType = function () {\r\n            if (!this.instance) {\r\n                return \"none\";\r\n            }\r\n            switch (this.instance[\"_driver\"]) {\r\n                case localforage.LOCALSTORAGE:\r\n                    return \"localStorage\";\r\n                case localforage.INDEXEDDB:\r\n                    return \"indexed db\";\r\n                case localforage.WEBSQL:\r\n                    return \"websql\";\r\n                default:\r\n                    return \"none\";\r\n            }\r\n        };\r\n        return LocalForageWrapper;\r\n    }());\r\n    game.LocalForageWrapper = LocalForageWrapper;\r\n})(game || (game = {}));\r\n///<reference path=\"robowhale/storage/IStorage.ts\"/>\r\n///<reference path=\"robowhale/storage/RuntimeStorage.ts\"/>\r\n///<reference path=\"robowhale/storage/LocalForageWrapper.ts\"/>\r\nvar game;\r\n(function (game_3) {\r\n    var EventEmitter = Phaser.Events.EventEmitter;\r\n    var GameStoreKey;\r\n    (function (GameStoreKey) {\r\n        GameStoreKey[\"LEVEL_GIFTS\"] = \"level_gifts\";\r\n        GameStoreKey[\"INGAME_BOOSTERS\"] = \"ingame_boosters\";\r\n        GameStoreKey[\"LEVELS\"] = \"levels\";\r\n        GameStoreKey[\"LANGUAGE\"] = \"language\";\r\n        GameStoreKey[\"SOUND_MUTED\"] = \"sound_muted\";\r\n        GameStoreKey[\"EDITOR_ZOOM\"] = \"editor_zoom\";\r\n        GameStoreKey[\"FAST_FORWARD_WAS_USED\"] = \"fast_forward_was_used\";\r\n        GameStoreKey[\"LOSE_TUTORIAL_COMPLETE\"] = \"lose_tutorial_complete\";\r\n    })(GameStoreKey = game_3.GameStoreKey || (game_3.GameStoreKey = {}));\r\n    var GameStoreEvent;\r\n    (function (GameStoreEvent) {\r\n        GameStoreEvent[\"CLEAR\"] = \"GameStore_CLEAR\";\r\n    })(GameStoreEvent = game_3.GameStoreEvent || (game_3.GameStoreEvent = {}));\r\n    var GameStore = /** @class */ (function (_super) {\r\n        __extends(GameStore, _super);\r\n        function GameStore(game, storeName) {\r\n            var _this = _super.call(this) || this;\r\n            _this.game = game;\r\n            _this.storeName = storeName;\r\n            _this.initRuntimeStorage();\r\n            return _this;\r\n        }\r\n        GameStore.prototype.initRuntimeStorage = function () {\r\n            this._runtimeStorage = new game_3.RuntimeStorage();\r\n            this._runtimeStorage.setNamespace(game.Config.GAME_TITLE);\r\n        };\r\n        GameStore.prototype.initActualStorage = function () {\r\n            return this.useLocalForage();\r\n        };\r\n        GameStore.prototype.useLocalForage = function () {\r\n            var _this = this;\r\n            var forage = new game_3.LocalForageWrapper(this.storeName);\r\n            return new Promise(function (resolve, reject) {\r\n                forage.init()\r\n                    .then(function () {\r\n                    _this.setStorage(forage);\r\n                    resolve();\r\n                })\r\n                    .catch(function (error) {\r\n                    reject(error);\r\n                })\r\n                    .finally(function () {\r\n                    var _a, _b;\r\n                    var storageType = forage.getDriverType();\r\n                    (_a = _this.game.raven) === null || _a === void 0 ? void 0 : _a.addTagsContext({ storage: storageType });\r\n                    (_b = _this.game.analytics) === null || _b === void 0 ? void 0 : _b.sendDesignEvent(\"Storage:\" + storageType);\r\n                });\r\n            });\r\n        };\r\n        GameStore.prototype.setStorage = function (storage) {\r\n            this._storage = storage;\r\n        };\r\n        GameStore.prototype.getValue = function (key) {\r\n            return this._runtimeStorage.getValue(key);\r\n        };\r\n        GameStore.prototype.getBoolean = function (key) {\r\n            return this._runtimeStorage.getBoolean(key);\r\n        };\r\n        GameStore.prototype.getNumber = function (key) {\r\n            return this._runtimeStorage.getNumber(key);\r\n        };\r\n        GameStore.prototype.getObject = function (key) {\r\n            return this._runtimeStorage.getObject(key);\r\n        };\r\n        GameStore.prototype.saveValue = function (key, value) {\r\n            var _a;\r\n            (_a = this._storage) === null || _a === void 0 ? void 0 : _a.saveValue(key, value);\r\n            this._runtimeStorage.saveValue(key, value);\r\n        };\r\n        GameStore.prototype.changeNumber = function (key, delta, min, max) {\r\n            if (min === void 0) { min = Number.MIN_SAFE_INTEGER; }\r\n            if (max === void 0) { max = Number.MAX_SAFE_INTEGER; }\r\n            var oldValue = this.getNumber(key);\r\n            var newValue = oldValue + delta;\r\n            newValue = Phaser.Math.Clamp(newValue, min, max);\r\n            this.saveValue(key, newValue);\r\n            return newValue;\r\n        };\r\n        GameStore.prototype.getLevelResult = function (levelNumber) {\r\n            var allData = this.getObject(GameStoreKey.LEVELS);\r\n            return allData[levelNumber];\r\n        };\r\n        GameStore.prototype.saveLevelResult = function (levelNumber, data) {\r\n            var _a;\r\n            var allData = this.getObject(GameStoreKey.LEVELS);\r\n            var newData = __assign(__assign({}, allData), (_a = {}, _a[levelNumber] = data, _a));\r\n            this.saveValue(GameStoreKey.LEVELS, newData);\r\n        };\r\n        GameStore.prototype.loadInitialValues = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, Promise.all([\r\n                                this.loadValue(GameStoreKey.LANGUAGE, \"\"),\r\n                                this.loadValue(GameStoreKey.SOUND_MUTED, false),\r\n                                this.loadValue(GameStoreKey.LEVELS, {}),\r\n                                this.loadValue(GameStoreKey.LEVEL_GIFTS, {}),\r\n                                this.loadValue(GameStoreKey.INGAME_BOOSTERS, {}),\r\n                                this.loadValue(GameStoreKey.EDITOR_ZOOM, 1),\r\n                                this.loadValue(GameStoreKey.FAST_FORWARD_WAS_USED, false),\r\n                                this.loadValue(GameStoreKey.LOSE_TUTORIAL_COMPLETE, false),\r\n                            ])];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GameStore.prototype.loadValue = function (key, defaultValue, callback, callbackContext) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var cb, cbContext, value;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!this._storage) {\r\n                                this._runtimeStorage.saveValue(key, defaultValue);\r\n                                return [2 /*return*/];\r\n                            }\r\n                            cb = callback || this.getLoadCallbackByValueType(defaultValue);\r\n                            cbContext = callbackContext || this._storage;\r\n                            return [4 /*yield*/, cb.call(cbContext, key)];\r\n                        case 1:\r\n                            value = (_a.sent()) || defaultValue;\r\n                            this._runtimeStorage.saveValue(key, value);\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GameStore.prototype.getLoadCallbackByValueType = function (value) {\r\n            var valueType = typeof value;\r\n            switch (valueType) {\r\n                case \"number\":\r\n                    return this._storage.getNumber;\r\n                case \"string\":\r\n                    return this._storage.getValue;\r\n                case \"boolean\":\r\n                    return this._storage.getBoolean;\r\n                case \"object\":\r\n                    return this._storage.getObject;\r\n                default:\r\n                    return this._storage.getValue;\r\n            }\r\n        };\r\n        GameStore.prototype.checkLoadedValues = function () {\r\n            var keys = Object.keys(GameStoreKey).map(function (key) {\r\n                return GameStoreKey[key];\r\n            });\r\n            var loadedKeys = Object.keys(this._runtimeStorage.getContent()).map(function (key) {\r\n                return key.split(\"__\")[1];\r\n            });\r\n            var diff = _.xor(keys, loadedKeys);\r\n            if (diff.length > 0) {\r\n                console.warn(\"Not all saved values were loaded!\", diff);\r\n            }\r\n        };\r\n        GameStore.prototype.clear = function () {\r\n            this.saveValue(GameStoreKey.LEVELS, {});\r\n            this.saveValue(GameStoreKey.LEVEL_GIFTS, {});\r\n            this.saveValue(GameStoreKey.INGAME_BOOSTERS, {});\r\n            this.saveValue(GameStoreKey.EDITOR_ZOOM, 1);\r\n            this.saveValue(GameStoreKey.FAST_FORWARD_WAS_USED, false);\r\n            this.saveValue(GameStoreKey.LOSE_TUTORIAL_COMPLETE, false);\r\n            this.emit(GameStoreEvent.CLEAR, this);\r\n        };\r\n        GameStore.prototype.migrateSaveData = function () {\r\n            var _a;\r\n            var _this = this;\r\n            try {\r\n                var transformValueMap_1 = (_a = {},\r\n                    _a[GameStoreKey.INGAME_BOOSTERS] = function (value) { return JSON.parse(value); },\r\n                    _a[GameStoreKey.LEVEL_GIFTS] = function (value) { return JSON.parse(value); },\r\n                    _a[GameStoreKey.LEVELS] = function (value) { return JSON.parse(value); },\r\n                    _a[GameStoreKey.LANGUAGE] = function (value) { return value; },\r\n                    _a[GameStoreKey.EDITOR_ZOOM] = function (value) { return parseFloat(value); },\r\n                    _a[GameStoreKey.SOUND_MUTED] = function (value) { return value === \"true\"; },\r\n                    _a[GameStoreKey.FAST_FORWARD_WAS_USED] = function (value) { return value === \"true\"; },\r\n                    _a[GameStoreKey.LOSE_TUTORIAL_COMPLETE] = function (value) { return value === \"true\"; },\r\n                    _a);\r\n                Object.keys(localStorage)\r\n                    .filter(function (key) { return key.includes(\"Bouncy_Woods\"); })\r\n                    .forEach(function (key) {\r\n                    var newKey = key.split(\"__\")[1];\r\n                    var transformValueCallback = transformValueMap_1[newKey];\r\n                    if (transformValueCallback) {\r\n                        var oldValue = localStorage.getItem(key);\r\n                        var newValue = transformValueCallback(oldValue);\r\n                        _this.saveValue(newKey, newValue);\r\n                        localStorage.removeItem(key);\r\n                    }\r\n                });\r\n            }\r\n            catch (error) {\r\n            }\r\n        };\r\n        return GameStore;\r\n    }(EventEmitter));\r\n    game_3.GameStore = GameStore;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameSoundKey;\r\n    (function (GameSoundKey) {\r\n        GameSoundKey[\"MENU_LOOP\"] = \"menu_loop\";\r\n        GameSoundKey[\"GAMEPLAY_LOOP\"] = \"forest_sounds\";\r\n        //\r\n        GameSoundKey[\"TAP\"] = \"tap\";\r\n        GameSoundKey[\"FANCY_TAP\"] = \"fancy_tap\";\r\n        GameSoundKey[\"GIFT_REVEAL\"] = \"gift_reveal\";\r\n        GameSoundKey[\"GIFT_CHARGE\"] = \"gift_charge_1\";\r\n        GameSoundKey[\"GIFT_EXPLODE\"] = \"gift_explode\";\r\n        GameSoundKey[\"CATCH_YOU_SHOUT\"] = \"catch_you_shout\";\r\n        GameSoundKey[\"STOP_SHOUT\"] = \"stop_shout\";\r\n        GameSoundKey[\"BOOSTER_STOP_ACTIVE\"] = \"booster_stop_active\";\r\n        GameSoundKey[\"BOOSTER_BOMB_IGNITE\"] = \"booster_bomb_ignite\";\r\n        GameSoundKey[\"BOOSTER_CRACKER\"] = \"booster_cracker\";\r\n        GameSoundKey[\"BOOSTER_CRACKER_PUNCH\"] = \"booster_cracker_punch\";\r\n        GameSoundKey[\"AIM_1\"] = \"aim_1_1\";\r\n        GameSoundKey[\"AIM_2\"] = \"aim_1_2\";\r\n        GameSoundKey[\"AIM_3\"] = \"aim_1_8\";\r\n        GameSoundKey[\"BALL_THROW\"] = \"ball_throw_2\";\r\n        GameSoundKey[\"BALL_HIT_1\"] = \"ball_hit_1\";\r\n        GameSoundKey[\"BALL_HIT_2\"] = \"ball_hit_2\";\r\n        GameSoundKey[\"BALL_HIT_3\"] = \"ball_hit_3\";\r\n        GameSoundKey[\"BLOCK_HIT\"] = \"block_hit\";\r\n        GameSoundKey[\"BLOCK_ZAPPED\"] = \"block_zapped_1\";\r\n        GameSoundKey[\"BLOCK_COLLECTED_WHOOSH\"] = \"block_collected_whoosh\";\r\n        GameSoundKey[\"BLOCK_COLLECTED\"] = \"block_collected\";\r\n        GameSoundKey[\"PINATA\"] = \"block_pinata\";\r\n        GameSoundKey[\"EXPLOSION\"] = \"explosion1\";\r\n        GameSoundKey[\"SPINNER\"] = \"spinner\";\r\n        GameSoundKey[\"LIGHTNING\"] = \"lightning_1\";\r\n        GameSoundKey[\"NEW_BALL_HIT\"] = \"new_ball_hit_2\";\r\n        GameSoundKey[\"NEW_BALL_LANDED\"] = \"new_ball_landed_3\";\r\n        GameSoundKey[\"MOVE_ITEMS_UP\"] = \"move_items_up\";\r\n        GameSoundKey[\"MOVE_ITEMS_DOWN\"] = \"move_items_down\";\r\n        GameSoundKey[\"CLEAR_FIELD_MOVE_COMPLETE\"] = \"clear_field_move_complete\";\r\n        GameSoundKey[\"CLEAR_FIELD\"] = \"clear_field\";\r\n        GameSoundKey[\"TURN_COMPLETE_TEXT\"] = \"turn_complete_text\";\r\n        GameSoundKey[\"WINNING_BALL_WHOOSH\"] = \"winning_ball_whoosh\";\r\n        GameSoundKey[\"POP_1\"] = \"pop_1\";\r\n        GameSoundKey[\"LEVEL_COMPLETE_TEXT\"] = \"level_complete_text\";\r\n        GameSoundKey[\"LEVEL_COMPLETE\"] = \"level_complete\";\r\n        GameSoundKey[\"LEVEL_COMPLETE_STAR_SHOW_1\"] = \"level_complete_star_show1\";\r\n        GameSoundKey[\"LEVEL_COMPLETE_STAR_SHOW_2\"] = \"level_complete_star_show2\";\r\n        GameSoundKey[\"LEVEL_COMPLETE_STAR_SHOW_3\"] = \"level_complete_star_show3\";\r\n        GameSoundKey[\"FOX_OOH\"] = \"fox_ooh\";\r\n        GameSoundKey[\"FOX_UH_OH_1\"] = \"fox_uh_oh_1\";\r\n        GameSoundKey[\"FOX_UH_OH_2\"] = \"fox_uh_oh_2\";\r\n        GameSoundKey[\"BLOCK_STOMP_WHOOSH\"] = \"block_stomp_whoosh\";\r\n        GameSoundKey[\"BLOCK_STOMP_HIT\"] = \"block_stomp_hit_1\";\r\n        GameSoundKey[\"DUCK_SCREAM\"] = \"duck_scream_2\";\r\n        GameSoundKey[\"LEVEL_FAILED\"] = \"level_failed_2\";\r\n        GameSoundKey[\"FAST_FORWARD\"] = \"fast_forward\";\r\n        GameSoundKey[\"DROP_BALLS_DOWN\"] = \"drop_balls_down_3\";\r\n        GameSoundKey[\"STAR_TWINKLE_1\"] = \"star_twinkle_2\";\r\n        GameSoundKey[\"STAR_TWINKLE_2\"] = \"star_twinkle_3\";\r\n    })(GameSoundKey = game.GameSoundKey || (game.GameSoundKey = {}));\r\n})(game || (game = {}));\r\n///<reference path='GameSoundKey.ts' />\r\nvar game;\r\n(function (game) {\r\n    var WebAudioSoundManager = Phaser.Sound.WebAudioSoundManager;\r\n    var HTML5AudioSoundManager = Phaser.Sound.HTML5AudioSoundManager;\r\n    var SoundManagerType;\r\n    (function (SoundManagerType) {\r\n        SoundManagerType[\"NO_AUDIO\"] = \"no_audio\";\r\n        SoundManagerType[\"HTML5_AUDIO\"] = \"html5_audio\";\r\n        SoundManagerType[\"WEB_AUDIO\"] = \"web_audio\";\r\n    })(SoundManagerType = game.SoundManagerType || (game.SoundManagerType = {}));\r\n    var GameAudio = /** @class */ (function () {\r\n        function GameAudio(scene) {\r\n            this.scene = scene;\r\n            this.sound = this.scene.sound;\r\n            this.wasMuted = this.sound.mute;\r\n            this.sound.pauseOnBlur = false;\r\n            this.iOS = this.scene.game.device.os.iOS;\r\n            this.onFocusThrottled = _.throttle(this.onFocus.bind(this), 100); // on iOS focus event fires twice sometimes\r\n            this.startTrackingVisibility();\r\n        }\r\n        GameAudio.getAudioType = function (sound) {\r\n            if (sound instanceof WebAudioSoundManager) {\r\n                return SoundManagerType.WEB_AUDIO;\r\n            }\r\n            else if (sound instanceof HTML5AudioSoundManager) {\r\n                return SoundManagerType.HTML5_AUDIO;\r\n            }\r\n            return SoundManagerType.NO_AUDIO;\r\n        };\r\n        GameAudio.prototype.startTrackingVisibility = function () {\r\n            this.scene.game.events.on(Phaser.Core.Events.BLUR, this.onBlur, this);\r\n            this.scene.game.events.on(Phaser.Core.Events.FOCUS, this.onFocusThrottled);\r\n        };\r\n        GameAudio.prototype.stopTrackingVisibility = function () {\r\n            this.scene.game.events.off(Phaser.Core.Events.BLUR, this.onBlur, this);\r\n            this.scene.game.events.off(Phaser.Core.Events.FOCUS, this.onFocusThrottled);\r\n        };\r\n        GameAudio.prototype.onBlur = function () {\r\n            this.wasMuted = this.sound.mute;\r\n            this.sound.mute = true;\r\n        };\r\n        GameAudio.prototype.onFocus = function () {\r\n            this.sound.mute = this.wasMuted;\r\n        };\r\n        GameAudio.prototype.suspendAudioContext = function () {\r\n            var _a;\r\n            if (((_a = this.sound.context) === null || _a === void 0 ? void 0 : _a.state) === \"running\") {\r\n                return this.sound.context.suspend();\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        GameAudio.prototype.resumeAudioContext = function () {\r\n            var _a;\r\n            if (((_a = this.sound.context) === null || _a === void 0 ? void 0 : _a.state) === \"suspended\") {\r\n                return this.sound.context.resume();\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        GameAudio.prototype.listenToScenesChange = function (sceneTransition) {\r\n            sceneTransition.on(game.SceneTransitionEvent.START, this.onSceneChangeStart, this);\r\n        };\r\n        GameAudio.prototype.onSceneChangeStart = function (transition, currentScene, newScene) {\r\n            if (newScene === game.SceneKey.LEVELS_MAP) {\r\n                this.switchToMainLoop();\r\n                return;\r\n            }\r\n            if (newScene === game.SceneKey.GAMEPLAY_ROOT) {\r\n                this.switchToGameplayLoop();\r\n                return;\r\n            }\r\n        };\r\n        GameAudio.prototype.switchToMainLoop = function () {\r\n            this.stopLoop(this.gameplayLoop);\r\n            this.playLoop(this.menuLoop, 0.5);\r\n        };\r\n        GameAudio.prototype.switchToGameplayLoop = function () {\r\n            this.stopLoop(this.menuLoop);\r\n            this.playLoop(this.gameplayLoop, 1);\r\n        };\r\n        GameAudio.prototype.loadMute = function () {\r\n            this.sound.mute = this.scene.game.store.getBoolean(game.GameStoreKey.SOUND_MUTED);\r\n        };\r\n        GameAudio.prototype.addMenuLoop = function () {\r\n            this.menuLoop = this.addLoop(game.GameSoundKey.MENU_LOOP);\r\n        };\r\n        GameAudio.prototype.addGameplayLoop = function () {\r\n            this.gameplayLoop = this.addLoop(game.GameSoundKey.GAMEPLAY_LOOP);\r\n        };\r\n        GameAudio.prototype.onGameplayLoopLoaded = function () {\r\n            this.addGameplayLoop();\r\n            if (this.isGameplayActive()) {\r\n                this.playLoop(this.gameplayLoop, 1);\r\n            }\r\n        };\r\n        GameAudio.prototype.isGameplayActive = function () {\r\n            return this.scene.game.scene.getScenes(true).some(function (scene) { return scene.scene.key === game.SceneKey.GAMEPLAY_ROOT; });\r\n        };\r\n        GameAudio.prototype.addLoop = function (key) {\r\n            var isSoundAvailable = this.scene.cache.audio.has(key);\r\n            if (isSoundAvailable === false) {\r\n                return null;\r\n            }\r\n            return this.sound.add(key, { loop: true });\r\n        };\r\n        GameAudio.prototype.playLoop = function (loop, volume) {\r\n            if (!loop || loop.isPlaying) {\r\n                return;\r\n            }\r\n            loop.volume = 0;\r\n            loop.play();\r\n            this.scene.tweens.killTweensOf(loop);\r\n            this.scene.tweens.add({\r\n                targets: loop,\r\n                duration: 1300,\r\n                ease: Phaser.Math.Easing.Cubic.In,\r\n                volume: volume,\r\n            });\r\n        };\r\n        GameAudio.prototype.stopLoop = function (loop) {\r\n            if (!loop) {\r\n                return;\r\n            }\r\n            this.scene.tweens.killTweensOf(loop);\r\n            this.scene.tweens.add({\r\n                targets: loop,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                volume: 0,\r\n                onComplete: function () {\r\n                    loop.stop();\r\n                },\r\n            });\r\n        };\r\n        GameAudio.prototype.playClickSound = function (volume) {\r\n            if (volume === void 0) { volume = 1; }\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.TAP)) {\r\n                this.sound.play(game.GameSoundKey.TAP, { volume: volume });\r\n            }\r\n        };\r\n        return GameAudio;\r\n    }());\r\n    game.GameAudio = GameAudio;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Toast = /** @class */ (function (_super) {\r\n        __extends(Toast, _super);\r\n        function Toast(scene, options) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"toast\";\r\n            _this.options = options;\r\n            _this.addBack();\r\n            _this.addText(options.message);\r\n            _this.setInteractive(new Phaser.Geom.Rectangle(-_this.back.width / 2, -_this.back.height / 2, _this.back.width, _this.back.height), Phaser.Geom.Rectangle.Contains);\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.dismiss, _this);\r\n            _this.input.cursor = \"pointer\";\r\n            return _this;\r\n        }\r\n        Toast.prototype.addBack = function () {\r\n            this.back = this.scene.add.graphics({\r\n                fillStyle: {\r\n                    color: 0xE3E3E3,\r\n                    alpha: 1,\r\n                },\r\n                lineStyle: {\r\n                    width: 0,\r\n                },\r\n            });\r\n            var width = game.Config.SOURCE_GAME_WIDTH * 0.7;\r\n            var height = 100;\r\n            this.back.fillRoundedRect(-width / 2, -height / 2, width, height, { tl: 20, bl: 0, br: 0, tr: 20 });\r\n            this.back.width = width;\r\n            this.back.height = height;\r\n            this.add(this.back);\r\n        };\r\n        Toast.prototype.addText = function (textContent) {\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"30px\",\r\n                color: \"#205466\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, textContent, style);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.setLineSpacing(-4);\r\n            this.text.setWordWrapWidth(this.back.width * 0.9);\r\n            this.add(this.text);\r\n            this.adjustTextSize();\r\n        };\r\n        Toast.prototype.adjustTextSize = function () {\r\n            var maxHeight = this.back.height * 0.8;\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n        };\r\n        Toast.prototype.show = function (lifespan) {\r\n            var deltaY = 20;\r\n            this.alpha = 0;\r\n            this.y += deltaY;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n                y: this.y - deltaY,\r\n                onComplete: this.onShowCompelete.bind(this, lifespan),\r\n            });\r\n        };\r\n        Toast.prototype.onShowCompelete = function (lifespan) {\r\n            var _this = this;\r\n            this.dismissTimerEvent = this.scene.time.delayedCall(lifespan, function () {\r\n                _this.dismiss();\r\n            });\r\n        };\r\n        Toast.prototype.dismiss = function () {\r\n            if (this.dismissTimerEvent) {\r\n                this.dismissTimerEvent.remove();\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                y: \"+=15\",\r\n                onComplete: this.destroy.bind(this),\r\n            });\r\n        };\r\n        Toast.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        Toast.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        Toast.prototype.preDestroy = function () {\r\n            if (this.dismissTimerEvent) {\r\n                this.dismissTimerEvent.remove();\r\n            }\r\n            this.scene.tweens.killTweensOf(this);\r\n        };\r\n        return Toast;\r\n    }(Phaser.GameObjects.Container));\r\n    game.Toast = Toast;\r\n})(game || (game = {}));\r\n///<reference path='Toast.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ToastsManager = /** @class */ (function (_super) {\r\n        __extends(ToastsManager, _super);\r\n        function ToastsManager(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"toasts_container\";\r\n            _this.toasts = [];\r\n            _this.setSize(game.Config.SOURCE_GAME_WIDTH, game.Config.SOURCE_GAME_HEIGHT);\r\n            return _this;\r\n        }\r\n        ToastsManager.prototype.onToastDestroy = function (toast) {\r\n            var index = this.toasts.indexOf(toast);\r\n            if (index > -1) {\r\n                this.toasts.splice(index, 1);\r\n            }\r\n        };\r\n        ToastsManager.prototype.dismissAll = function () {\r\n            this.toasts.forEach(function (toast) { return toast.dismiss(); });\r\n        };\r\n        ToastsManager.prototype.getGameHeight = function () {\r\n            return game.Config.GAME_HEIGHT / this.scale;\r\n        };\r\n        ToastsManager.prototype.resize = function () {\r\n        };\r\n        ToastsManager.prototype.show = function (options) {\r\n            this.dismissAll();\r\n            var margin = 0;\r\n            var toast = new game.Toast(this.scene, options);\r\n            // toast.x = this.width / 2 - toast.getWidth() / 2 - margin\r\n            toast.y = this.getGameHeight() / 2 - toast.getHeight() / 2 - margin;\r\n            toast.once(Phaser.GameObjects.Events.DESTROY, this.onToastDestroy, this);\r\n            toast.show(options.lifespan);\r\n            this.toasts.push(toast);\r\n            this.add(toast);\r\n        };\r\n        ToastsManager.prototype.showNoRewardedAdsWarning = function () {\r\n            this.show({\r\n                message: this.scene.texts.ads.adblock_video_ads,\r\n                lifespan: 2500,\r\n            });\r\n        };\r\n        ToastsManager.prototype.showRewardedAdsDontSkipWarning = function () {\r\n            this.show({\r\n                message: this.scene.texts.ads.dont_skip,\r\n                lifespan: 2500,\r\n            });\r\n        };\r\n        return ToastsManager;\r\n    }(Phaser.GameObjects.Container));\r\n    game.ToastsManager = ToastsManager;\r\n})(game || (game = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var GameObjects;\r\n    (function (GameObjects) {\r\n        var Screen = /** @class */ (function (_super) {\r\n            __extends(Screen, _super);\r\n            function Screen(scene, options) {\r\n                var _this = _super.call(this, scene) || this;\r\n                _this.name = \"screen\";\r\n                _this.options = __assign({ backgroundAlpha: 0.8 }, options);\r\n                _this.addBackground();\r\n                return _this;\r\n            }\r\n            Screen.prototype.addBackground = function () {\r\n                this.background = this.scene.add.image(0, 0, this.options.backgroundKey, this.options.backgroundFrame);\r\n                this.background.alpha = this.options.backgroundAlpha;\r\n                this.background.displayWidth = game.Config.SOURCE_GAME_WIDTH;\r\n                this.background.displayHeight = game.Config.SOURCE_GAME_HEIGHT;\r\n                this.add(this.background);\r\n            };\r\n            Screen.prototype.resize = function (gameplay) {\r\n            };\r\n            return Screen;\r\n        }(Phaser.GameObjects.Container));\r\n        GameObjects.Screen = Screen;\r\n    })(GameObjects = Phaser.GameObjects || (Phaser.GameObjects = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var GameObjects;\r\n    (function (GameObjects) {\r\n        var ButtonEvent;\r\n        (function (ButtonEvent) {\r\n            ButtonEvent[\"PRESS\"] = \"button_press\";\r\n            ButtonEvent[\"RELEASE\"] = \"button_release\";\r\n        })(ButtonEvent = GameObjects.ButtonEvent || (GameObjects.ButtonEvent = {}));\r\n        var Button = /** @class */ (function (_super) {\r\n            __extends(Button, _super);\r\n            function Button(scene, texture, frame, parent) {\r\n                var _this = _super.call(this, scene, 0, 0, texture, frame) || this;\r\n                _this._enabled = true;\r\n                _this.originalScale = 1;\r\n                _this.areTweensEnabled = true;\r\n                _this.checkIfOver = true;\r\n                _this.soundKey = \"tap\";\r\n                _this.soundVolume = 1;\r\n                if (parent) {\r\n                    parent.add(_this);\r\n                }\r\n                else {\r\n                    _this.scene.add.existing(_this);\r\n                }\r\n                _this.setInteractive();\r\n                _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.onPointerDown, _this);\r\n                _this.scene.input.on(Phaser.Input.Events.POINTER_UP, _this.onScenePointerUp, _this);\r\n                _this.input.cursor = \"pointer\";\r\n                return _this;\r\n            }\r\n            Object.defineProperty(Button.prototype, \"enabled\", {\r\n                get: function () {\r\n                    return this._enabled;\r\n                },\r\n                set: function (value) {\r\n                    this._enabled = value;\r\n                    this._enabled ? this.setInteractive() : this.disableInteractive();\r\n                },\r\n                enumerable: false,\r\n                configurable: true\r\n            });\r\n            Button.prototype.onPointerDown = function (pointer) {\r\n                if (this.scene.cache.audio.has(this.soundKey)) {\r\n                    this.scene.sound.play(this.soundKey);\r\n                }\r\n                this.playPressedTween();\r\n                this.playSound();\r\n                this.emit(ButtonEvent.PRESS, this, pointer);\r\n                this.currentPointer = pointer;\r\n            };\r\n            Button.prototype.playPressedTween = function () {\r\n                if (!this.areTweensEnabled) {\r\n                    return;\r\n                }\r\n                this.originalScale = this.scale;\r\n                this.scene.tweens.add({\r\n                    targets: this,\r\n                    scale: this.scale * 0.9,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    duration: 50,\r\n                });\r\n            };\r\n            Button.prototype.playSound = function () {\r\n                if (this.scene.cache.audio.has(this.soundKey)) {\r\n                    this.scene.sound.play(this.soundKey, { volume: this.soundVolume });\r\n                }\r\n            };\r\n            Button.prototype.onScenePointerUp = function (pointer, objects) {\r\n                if (this.currentPointer && this.currentPointer === pointer) {\r\n                    this.currentPointer = null;\r\n                    var isPointerOverButton = objects.includes(this);\r\n                    if (this.checkIfOver === false || isPointerOverButton) {\r\n                        this.onPointerUp();\r\n                        this.emit(ButtonEvent.RELEASE, this, pointer);\r\n                    }\r\n                    this.playReleasedTween();\r\n                }\r\n            };\r\n            Button.prototype.playReleasedTween = function () {\r\n                // button could be destroyed during up callback so we have to check for this.scene\r\n                if (!this.scene) {\r\n                    return;\r\n                }\r\n                if (!this.areTweensEnabled) {\r\n                    return;\r\n                }\r\n                this.scene.tweens.add({\r\n                    targets: this,\r\n                    scale: this.originalScale,\r\n                    ease: Phaser.Math.Easing.Back.Out,\r\n                    duration: 300,\r\n                });\r\n            };\r\n            Button.prototype.onPointerUp = function () {\r\n            };\r\n            Button.prototype.destroy = function (fromScene) {\r\n                if (this.scene) {\r\n                    this.scene.input.off(Phaser.Input.Events.POINTER_UP, this.onScenePointerUp, this);\r\n                }\r\n                _super.prototype.destroy.call(this, fromScene);\r\n            };\r\n            return Button;\r\n        }(Phaser.GameObjects.Image));\r\n        GameObjects.Button = Button;\r\n    })(GameObjects = Phaser.GameObjects || (Phaser.GameObjects = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var GameObjects;\r\n    (function (GameObjects) {\r\n        var ToggleButtonState;\r\n        (function (ToggleButtonState) {\r\n            ToggleButtonState[ToggleButtonState[\"STATE_1\"] = 0] = \"STATE_1\";\r\n            ToggleButtonState[ToggleButtonState[\"STATE_2\"] = 1] = \"STATE_2\";\r\n        })(ToggleButtonState = GameObjects.ToggleButtonState || (GameObjects.ToggleButtonState = {}));\r\n        var ToggleButton = /** @class */ (function (_super) {\r\n            __extends(ToggleButton, _super);\r\n            function ToggleButton(scene, texture, frame_1, frame_2, parent) {\r\n                var _this = _super.call(this, scene, texture, frame_1, parent) || this;\r\n                _this.frame_1 = frame_1;\r\n                _this.frame_2 = frame_2;\r\n                _this._buttonState = ToggleButtonState.STATE_1;\r\n                return _this;\r\n            }\r\n            ToggleButton.prototype.onPointerUp = function () {\r\n                _super.prototype.onPointerUp.call(this);\r\n                this.switchTextures();\r\n            };\r\n            ToggleButton.prototype.switchTextures = function () {\r\n                this.buttonState = this._buttonState === ToggleButtonState.STATE_1 ? ToggleButtonState.STATE_2 : ToggleButtonState.STATE_1;\r\n            };\r\n            Object.defineProperty(ToggleButton.prototype, \"buttonState\", {\r\n                get: function () {\r\n                    return this._buttonState;\r\n                },\r\n                set: function (value) {\r\n                    this._buttonState = value;\r\n                    this._buttonState === ToggleButtonState.STATE_1\r\n                        ? this.setFrame(this.frame_1)\r\n                        : this.setFrame(this.frame_2);\r\n                },\r\n                enumerable: false,\r\n                configurable: true\r\n            });\r\n            return ToggleButton;\r\n        }(Phaser.GameObjects.Button));\r\n        GameObjects.ToggleButton = ToggleButton;\r\n    })(GameObjects = Phaser.GameObjects || (Phaser.GameObjects = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var GameObjects;\r\n    (function (GameObjects) {\r\n        var GameStoreKey = game.GameStoreKey;\r\n        var SoundButton = /** @class */ (function (_super) {\r\n            __extends(SoundButton, _super);\r\n            function SoundButton(scene, texture, frame_1, frame_2, parent) {\r\n                var _this = _super.call(this, scene, texture, frame_1, parent) || this;\r\n                _this.frame_1 = frame_1;\r\n                _this.frame_2 = frame_2;\r\n                _this.store = _this.scene.game.store;\r\n                _this.soundManager = _this.scene.sound;\r\n                _this.soundManager.on(Phaser.Sound.Events.GLOBAL_MUTE, _this.onMuteChange, _this);\r\n                _this.updateFrame(_this.soundManager.mute);\r\n                return _this;\r\n            }\r\n            SoundButton.prototype.onMuteChange = function (sound, mute) {\r\n                this.updateFrame(mute);\r\n            };\r\n            SoundButton.prototype.updateFrame = function (mute) {\r\n                this.setFrame(mute ? this.frame_2 : this.frame_1);\r\n            };\r\n            SoundButton.prototype.onPointerUp = function () {\r\n                _super.prototype.onPointerUp.call(this);\r\n                this.soundManager.mute = !this.soundManager.mute;\r\n                this.store.saveValue(GameStoreKey.SOUND_MUTED, !this.soundManager.mute);\r\n            };\r\n            SoundButton.prototype.destroy = function (fromScene) {\r\n                this.soundManager.off(Phaser.Sound.Events.GLOBAL_MUTE, this.onMuteChange, this);\r\n                _super.prototype.destroy.call(this, fromScene);\r\n            };\r\n            return SoundButton;\r\n        }(Phaser.GameObjects.Button));\r\n        GameObjects.SoundButton = SoundButton;\r\n    })(GameObjects = Phaser.GameObjects || (Phaser.GameObjects = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var GameObjects;\r\n    (function (GameObjects) {\r\n        var ComplexButton = /** @class */ (function (_super) {\r\n            __extends(ComplexButton, _super);\r\n            function ComplexButton(scene, atlas, frame) {\r\n                var _this = _super.call(this, scene) || this;\r\n                _this.soundKey = \"tap\";\r\n                _this.tweensEnabled = true;\r\n                _this.checkIfOver = true;\r\n                _this.name = \"button\";\r\n                _this.addBack(atlas, frame);\r\n                return _this;\r\n            }\r\n            ComplexButton.prototype.enableInput = function () {\r\n                this.back.setInteractive();\r\n            };\r\n            ComplexButton.prototype.disableInput = function () {\r\n                this.back.disableInteractive();\r\n            };\r\n            ComplexButton.prototype.addBack = function (atlas, frame) {\r\n                this.back = this.scene.add.image(0, 0, atlas, frame);\r\n                this.back.setInteractive();\r\n                this.back.input.cursor = \"pointer\";\r\n                this.back.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this.onPointerDown, this);\r\n                this.scene.input.on(Phaser.Input.Events.POINTER_UP, this.onScenePointerUp, this);\r\n                this.add(this.back);\r\n            };\r\n            ComplexButton.prototype.onPointerDown = function (pointer) {\r\n                if (this.scene.cache.audio.has(this.soundKey)) {\r\n                    this.scene.sound.play(this.soundKey);\r\n                }\r\n                if (this.tweensEnabled) {\r\n                    this.scene.tweens.add({\r\n                        targets: this,\r\n                        scale: 0.9,\r\n                        ease: Phaser.Math.Easing.Cubic.Out,\r\n                        duration: 50,\r\n                    });\r\n                }\r\n                this.emit(GameObjects.ButtonEvent.PRESS, this, pointer);\r\n                this.currentPointer = pointer;\r\n            };\r\n            ComplexButton.prototype.onScenePointerUp = function (pointer, objects) {\r\n                if (this.currentPointer && this.currentPointer === pointer) {\r\n                    this.currentPointer = null;\r\n                    var isPointerOverButton = objects.includes(this.back);\r\n                    if (this.checkIfOver === false || isPointerOverButton) {\r\n                        this.onPointerUp();\r\n                        this.emit(Phaser.GameObjects.ButtonEvent.RELEASE, this, pointer);\r\n                    }\r\n                    if (this.tweensEnabled && this.scene) {\r\n                        this.scene.tweens.add({\r\n                            targets: this,\r\n                            scale: 1,\r\n                            ease: Phaser.Math.Easing.Back.Out,\r\n                            duration: 300,\r\n                        });\r\n                    }\r\n                }\r\n            };\r\n            ComplexButton.prototype.onPointerUp = function () {\r\n            };\r\n            ComplexButton.prototype.addBitmapText = function (content, font, fontSize, offsetX, offsetY) {\r\n                if (offsetX === void 0) { offsetX = 0; }\r\n                if (offsetY === void 0) { offsetY = 0; }\r\n                this.bitmapText = this.scene.add.bitmapText(0, 0, font, content, fontSize);\r\n                this.bitmapText.align = Phaser.Display.Align.CENTER;\r\n                this.bitmapText.setOrigin(0.5, 0.5);\r\n                this.bitmapText.x = this.back.x + offsetX;\r\n                this.bitmapText.y = this.back.y + offsetY;\r\n                this.add(this.bitmapText);\r\n                return this.bitmapText;\r\n            };\r\n            ComplexButton.prototype.addText = function (content, style, offsetX, offsetY) {\r\n                if (offsetX === void 0) { offsetX = 0; }\r\n                if (offsetY === void 0) { offsetY = 0; }\r\n                this.text = this.scene.make.text({\r\n                    text: content,\r\n                    style: style,\r\n                });\r\n                this.text.setOrigin(0.5, 0.5);\r\n                this.text.x = this.back.x + offsetX;\r\n                this.text.y = this.back.y + offsetY;\r\n                this.add(this.text);\r\n                return this.text;\r\n            };\r\n            return ComplexButton;\r\n        }(Phaser.GameObjects.Container));\r\n        GameObjects.ComplexButton = ComplexButton;\r\n    })(GameObjects = Phaser.GameObjects || (Phaser.GameObjects = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar game;\r\n(function (game) {\r\n    var KineticScroll = /** @class */ (function () {\r\n        function KineticScroll(scene, settings) {\r\n            this.thresholdOfTapTime = 100;\r\n            this.thresholdOfTapDistance = 10;\r\n            this.moveTimestamp = 0;\r\n            this.scene = scene;\r\n            var defaultSettings = {\r\n                camera: this.scene.cameras.main,\r\n                kineticMovement: true,\r\n                timeConstantScroll: 325,\r\n                horizontalScroll: true,\r\n                verticalScroll: true,\r\n                horizontalWheel: false,\r\n                verticalWheel: false,\r\n                wheelDeceleration: 0.95,\r\n                onUpdate: null,\r\n                scrollMultiplier: 1,\r\n            };\r\n            this.settings = __assign(__assign({}, defaultSettings), settings);\r\n            this.tempCameraBounds = new Phaser.Geom.Rectangle();\r\n        }\r\n        KineticScroll.prototype.addPointerListeners = function () {\r\n            this.scene.input.on(\"pointerdown\", this.beginMove, this);\r\n            this.scene.input.on(\"pointerup\", this.endMove, this);\r\n            this.scene.input.on(\"pointermove\", this.move, this);\r\n        };\r\n        KineticScroll.prototype.removePointerListeners = function () {\r\n            this.scene.input.off(\"pointerdown\", this.beginMove, this);\r\n            this.scene.input.off(\"pointerup\", this.endMove, this);\r\n            this.scene.input.off(\"pointermove\", this.move, this);\r\n        };\r\n        KineticScroll.prototype.beginMove = function (pointer) {\r\n            this.pointerId = pointer.id;\r\n            this.startX = this.scene.input.x;\r\n            this.startY = this.scene.input.y;\r\n            this.screenX = pointer.screenX;\r\n            this.screenY = pointer.screenY;\r\n            this.pressedDown = true;\r\n            // the time of press down\r\n            this.timestamp = this.getNow();\r\n            this.beginTime = this.timestamp;\r\n            this.velocityY = this.amplitudeY = this.velocityX = this.amplitudeX = 0;\r\n        };\r\n        KineticScroll.prototype.canCameraMoveY = function () {\r\n            var camera = this.settings.camera;\r\n            camera.getBounds(this.tempCameraBounds);\r\n            return camera.scrollY > 0 && camera.scrollY + camera.height < this.tempCameraBounds.height;\r\n        };\r\n        KineticScroll.prototype.canCameraMoveX = function () {\r\n            var camera = this.settings.camera;\r\n            camera.getBounds(this.tempCameraBounds);\r\n            return camera.scrollX > 0 && camera.scrollX + camera.width < this.tempCameraBounds.right;\r\n        };\r\n        KineticScroll.prototype.move = function (pointer) {\r\n            var x = pointer.x;\r\n            var y = pointer.y;\r\n            if (!this.pressedDown) {\r\n                return;\r\n            }\r\n            if (this.pointerId !== pointer.id) {\r\n                return;\r\n            }\r\n            this.now = this.getNow();\r\n            var elapsed = this.now - this.timestamp;\r\n            this.timestamp = this.now;\r\n            var deltaX = 0;\r\n            var deltaY = 0;\r\n            if (this.isTap(pointer)) {\r\n                return;\r\n            }\r\n            var cam = this.settings.camera;\r\n            if (this.settings.horizontalScroll) {\r\n                deltaX = x - this.startX;\r\n                if (deltaX !== 0) {\r\n                    this.dragging = true;\r\n                }\r\n                this.startX = x;\r\n                this.velocityX = 0.8 * ((1000 * deltaX) / (1 + elapsed)) + 0.2 * this.velocityX;\r\n                cam.setScroll(cam.scrollX - deltaX, cam.scrollY);\r\n            }\r\n            if (this.settings.verticalScroll) {\r\n                deltaY = (y - this.startY) * this.settings.scrollMultiplier;\r\n                if (deltaY !== 0) {\r\n                    this.dragging = true;\r\n                }\r\n                this.startY = y;\r\n                this.velocityY = 0.8 * ((1000 * deltaY) / (1 + elapsed)) + 0.2 * this.velocityY;\r\n                cam.setScroll(cam.scrollX, cam.scrollY - deltaY);\r\n            }\r\n            this.callCustomUpdate(deltaX, deltaY);\r\n            this.moveTimestamp = this.getNow();\r\n        };\r\n        KineticScroll.prototype.callCustomUpdate = function (deltaX, deltaY) {\r\n            if (typeof this.settings.onUpdate !== \"function\") {\r\n                return;\r\n            }\r\n            var updateX = this.canCameraMoveX() ? deltaX : 0;\r\n            var updateY = this.canCameraMoveY() ? deltaY : 0;\r\n            this.settings.onUpdate(updateX, updateY);\r\n        };\r\n        KineticScroll.prototype.isTap = function (pointer) {\r\n            return (this.now - this.beginTime < this.thresholdOfTapTime &&\r\n                Math.abs(pointer.screenY - this.screenY) < this.thresholdOfTapDistance &&\r\n                Math.abs(pointer.screenX - this.screenX) < this.thresholdOfTapDistance);\r\n        };\r\n        KineticScroll.prototype.endMove = function () {\r\n            this.pointerId = null;\r\n            this.pressedDown = false;\r\n            this.autoScrollX = false;\r\n            this.autoScrollY = false;\r\n            if (!this.settings.kineticMovement) {\r\n                return;\r\n            }\r\n            this.now = this.getNow();\r\n            var cam = this.settings.camera;\r\n            if (this.withinGame()) {\r\n                if (this.velocityX > 10 || this.velocityX < -10) {\r\n                    this.amplitudeX = 0.8 * this.velocityX;\r\n                    this.targetX = Math.round(cam.scrollX - this.amplitudeX);\r\n                    this.autoScrollX = true;\r\n                }\r\n                if (this.velocityY > 10 || this.velocityY < -10) {\r\n                    this.amplitudeY = 0.8 * this.velocityY;\r\n                    this.targetY = Math.round(cam.scrollY - this.amplitudeY);\r\n                    this.autoScrollY = true;\r\n                }\r\n            }\r\n            if (!this.withinGame()) {\r\n                this.velocityWheelXAbs = Math.abs(this.velocityWheelX);\r\n                this.velocityWheelYAbs = Math.abs(this.velocityWheelY);\r\n                if (this.settings.horizontalScroll && (this.velocityWheelXAbs < 0.1 || !this.withinGame())) {\r\n                    this.autoScrollX = true;\r\n                }\r\n                if (this.settings.verticalScroll && (this.velocityWheelYAbs < 0.1 || !this.withinGame())) {\r\n                    this.autoScrollY = true;\r\n                }\r\n            }\r\n        };\r\n        KineticScroll.prototype.update = function () {\r\n            var timeSinceMove = this.getNow() - this.moveTimestamp;\r\n            if (timeSinceMove > 20) {\r\n                this.velocityX = 0;\r\n                this.velocityY = 0;\r\n            }\r\n            this.elapsed = this.getNow() - this.timestamp;\r\n            this.velocityWheelXAbs = Math.abs(this.velocityWheelX);\r\n            this.velocityWheelYAbs = Math.abs(this.velocityWheelY);\r\n            var delta = 0;\r\n            var cam = this.settings.camera;\r\n            if (this.autoScrollX && this.amplitudeX !== 0) {\r\n                delta = -this.amplitudeX * Math.exp(-this.elapsed / this.settings.timeConstantScroll);\r\n                if (this.canCameraMoveX() && (delta > 0.5 || delta < -0.5)) {\r\n                    cam.setScroll(this.targetX - delta, cam.scrollY);\r\n                }\r\n                else {\r\n                    this.autoScrollX = false;\r\n                    cam.setScroll(this.targetX, cam.scrollY);\r\n                }\r\n            }\r\n            if (this.autoScrollY && this.amplitudeY !== 0) {\r\n                delta = -this.amplitudeY * Math.exp(-this.elapsed / this.settings.timeConstantScroll);\r\n                if (this.canCameraMoveY() && (delta > 0.5 || delta < -0.5)) {\r\n                    cam.setScroll(cam.scrollX, this.targetY - delta);\r\n                }\r\n                else {\r\n                    this.autoScrollY = false;\r\n                    cam.setScroll(cam.scrollX, this.targetY);\r\n                }\r\n            }\r\n            if (!this.autoScrollX && !this.autoScrollY) {\r\n                this.dragging = false;\r\n            }\r\n            if (this.settings.horizontalWheel && this.velocityWheelXAbs > 0.1) {\r\n                this.dragging = true;\r\n                this.amplitudeX = 0;\r\n                this.autoScrollX = false;\r\n                cam.setScroll(cam.scrollX - this.velocityWheelX, cam.scrollY);\r\n                this.velocityWheelX *= this.settings.wheelDeceleration;\r\n            }\r\n            if (this.settings.verticalWheel && this.velocityWheelYAbs > 0.1) {\r\n                this.dragging = true;\r\n                this.autoScrollY = false;\r\n                cam.setScroll(cam.scrollX, cam.scrollY - this.velocityWheelY);\r\n                this.velocityWheelY *= this.settings.wheelDeceleration;\r\n            }\r\n        };\r\n        KineticScroll.prototype.getNow = function () {\r\n            if (performance && performance.now) {\r\n                return performance.now();\r\n            }\r\n            return Date.now();\r\n        };\r\n        KineticScroll.prototype.withinGame = function () {\r\n            return true;\r\n        };\r\n        KineticScroll.prototype.resetScroll = function () {\r\n            this.autoScrollX = false;\r\n            this.autoScrollY = false;\r\n            this.velocityWheelX = 0;\r\n            this.velocityWheelY = 0;\r\n        };\r\n        return KineticScroll;\r\n    }());\r\n    game.KineticScroll = KineticScroll;\r\n})(game || (game = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var ParticleUtil = /** @class */ (function () {\r\n        function ParticleUtil() {\r\n        }\r\n        ParticleUtil.getTextureEmitZone = function (scene, image) {\r\n            var origin = image.getTopLeft();\r\n            var getRandomPoint = function (vec) {\r\n                do {\r\n                    var x = Phaser.Math.Between(0, image.width);\r\n                    var y = Phaser.Math.Between(0, image.height);\r\n                    var pixel = scene.textures.getPixel(x, y, image.texture.key);\r\n                } while (pixel.alpha < 255);\r\n                return vec.setTo(x + origin.x, y + origin.y);\r\n            };\r\n            return {\r\n                getRandomPoint: getRandomPoint,\r\n            };\r\n        };\r\n        ParticleUtil.getCircleEdgeEmitZone = function (radius, quantity, randomize) {\r\n            if (quantity === void 0) { quantity = 360; }\r\n            if (randomize === void 0) { randomize = true; }\r\n            var circle = new Phaser.Geom.Circle(0, 0, radius);\r\n            var emitZone = { source: circle, type: \"edge\", quantity: quantity };\r\n            var getRotation = function (particle) {\r\n                var emitter = particle.emitter;\r\n                var emitterX = emitter.follow ? emitter.follow.x : emitter.x.propertyValue;\r\n                var emitterY = emitter.follow ? emitter.follow.y : emitter.y.propertyValue;\r\n                return Math.atan2(particle.y - emitterY, particle.x - emitterX);\r\n            };\r\n            var randomizeProperties = randomize\r\n                ? {\r\n                    emitCallback: function (particle, emitter) {\r\n                        var emitZone = emitter.emitZone;\r\n                        emitZone.counter = Phaser.Math.RND.between(0, emitZone.points.length);\r\n                    },\r\n                }\r\n                : {};\r\n            return __assign(__assign({}, randomizeProperties), { emitZone: emitZone, angle: {\r\n                    onEmit: function (particle) {\r\n                        return getRotation(particle) * Phaser.Math.RAD_TO_DEG;\r\n                    },\r\n                }, rotate: {\r\n                    onEmit: function (particle) {\r\n                        return (getRotation(particle) + Math.PI / 2) * Phaser.Math.RAD_TO_DEG;\r\n                    },\r\n                } });\r\n        };\r\n        return ParticleUtil;\r\n    }());\r\n    utils.ParticleUtil = ParticleUtil;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var AnimationsPool = /** @class */ (function () {\r\n        function AnimationsPool(scene, options) {\r\n            this.counter = 0;\r\n            this.scene = scene;\r\n            this.options = options;\r\n            this.pool = this.createAnimations(this.options.initialNum);\r\n        }\r\n        AnimationsPool.prototype.createAnimations = function (num) {\r\n            var _this = this;\r\n            var filterBooleans = function (value) {\r\n                return typeof value !== \"boolean\";\r\n            };\r\n            return Array(num)\r\n                .fill(0)\r\n                .map(function () { return _this.createAnimation(); })\r\n                .filter(filterBooleans)\r\n                .map(function (animation) {\r\n                animation.active = false;\r\n                return animation;\r\n            });\r\n        };\r\n        AnimationsPool.prototype.createAnimation = function () {\r\n            this.counter++;\r\n            return this.scene.anims.create(__assign(__assign({}, this.options.animationConfig), { key: this.options.prefix + \"_\" + this.counter.toString(), frames: this.scene.anims.getFrameNames(this.options.atlas, this.options.prefix) }));\r\n        };\r\n        AnimationsPool.prototype.getInactive = function () {\r\n            var anim = this.pool.find(function (item) { return item.active === false; });\r\n            if (!anim) {\r\n                anim = this.createAnimation();\r\n                this.pool.push(anim);\r\n                console.warn(\"Enlarge \" + this.options.name + \" animations pool! New size is \" + this.pool.length + \".\");\r\n            }\r\n            anim.active = true;\r\n            return anim;\r\n        };\r\n        AnimationsPool.prototype.recycleActive = function (anim) {\r\n            anim.active = false;\r\n        };\r\n        AnimationsPool.prototype.recycleAll = function () {\r\n            this.pool.forEach(function (anim) { return (anim.active = false); });\r\n        };\r\n        AnimationsPool.prototype.getState = function () {\r\n            var activeNum = this.pool.filter(function (item) { return item.active; }).length;\r\n            var inactiveNum = this.pool.length - activeNum;\r\n            var itemsStr = this.pool\r\n                .map(function (item) {\r\n                return item.key + \": \" + item.active.toString();\r\n            })\r\n                .join(\"\\n\");\r\n            return \"\\n\\t\\t\\tActive: \" + activeNum + \"\\n\\t\\t\\tInactive: \" + inactiveNum + \"\\n\\t\\t\\tTotal: \" + this.pool.length + \"\\n\\t\\t\\t=============================\\n\\t\\t\\t\" + itemsStr + \"\\n\\t\\t\\t\";\r\n        };\r\n        AnimationsPool.prototype.destroy = function () {\r\n            this.pool.forEach(function (item) { return item.destroy(); });\r\n            this.pool = null;\r\n        };\r\n        return AnimationsPool;\r\n    }());\r\n    utils.AnimationsPool = AnimationsPool;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var NetUtil = /** @class */ (function () {\r\n        function NetUtil() {\r\n        }\r\n        NetUtil.getCurrentHost = function () {\r\n            if (location && location.hostname) {\r\n                return location.hostname;\r\n            }\r\n            return null;\r\n        };\r\n        NetUtil.isLocalhost = function () {\r\n            var localhostAliases = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                localhostAliases[_i] = arguments[_i];\r\n            }\r\n            return NetUtil.isHostAllowed(__spreadArrays(localhostAliases, [\"localhost\"]));\r\n        };\r\n        NetUtil.isHostAllowed = function (allowedHosts) {\r\n            var currentHost = NetUtil.getCurrentHost();\r\n            if (currentHost) {\r\n                return allowedHosts.some(function (host) {\r\n                    return currentHost.includes(host);\r\n                });\r\n            }\r\n            return false;\r\n        };\r\n        NetUtil.inIFrame = function () {\r\n            try {\r\n                return window.self !== window.top;\r\n            }\r\n            catch (e) {\r\n                return true;\r\n            }\r\n        };\r\n        NetUtil.getParam = function (name) {\r\n            var normalizedName = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n            var regex = new RegExp(\"[\\\\?&]\" + normalizedName + \"=([^&#]*)\");\r\n            var results = regex.exec(location.search);\r\n            return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n        };\r\n        NetUtil.getParamInt = function (name, _default) {\r\n            if (_default === void 0) { _default = 0; }\r\n            var value = this.getParam(name);\r\n            if (value) {\r\n                var num = parseInt(value);\r\n                return isNaN(num) ? _default : num;\r\n            }\r\n            return _default;\r\n        };\r\n        NetUtil.getParamFloat = function (name, _default) {\r\n            if (_default === void 0) { _default = 0; }\r\n            var value = this.getParam(name);\r\n            if (value) {\r\n                var num = parseFloat(value);\r\n                return isNaN(num) ? _default : num;\r\n            }\r\n            return _default;\r\n        };\r\n        NetUtil.getParamBool = function (name, expectedValue) {\r\n            if (expectedValue === void 0) { expectedValue = \"1\"; }\r\n            var value = NetUtil.getParam(name);\r\n            return !!(value && value === expectedValue);\r\n        };\r\n        return NetUtil;\r\n    }());\r\n    utils.NetUtil = NetUtil;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var Polyfills = /** @class */ (function () {\r\n        function Polyfills() {\r\n        }\r\n        Polyfills.polyfill = function () {\r\n            var extendMethods = Object.keys(Polyfills);\r\n            extendMethods.forEach(function (methodName) {\r\n                if (methodName === \"polyfill\") {\r\n                    return;\r\n                }\r\n                if (methodName.startsWith(\"_\")) {\r\n                    return;\r\n                }\r\n                Polyfills[methodName]();\r\n            });\r\n        };\r\n        Polyfills.nodeRemove = function () {\r\n            var arr = [Element, CharacterData, DocumentType];\r\n            var args = [];\r\n            arr.forEach(function (item) {\r\n                if (item) {\r\n                    args.push(item.prototype);\r\n                }\r\n            });\r\n            // from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\r\n            (function (arr) {\r\n                arr.forEach(function (item) {\r\n                    if (item.hasOwnProperty(\"remove\")) {\r\n                        return;\r\n                    }\r\n                    Object.defineProperty(item, \"remove\", {\r\n                        configurable: true,\r\n                        enumerable: true,\r\n                        writable: true,\r\n                        value: function remove() {\r\n                            this.parentNode.removeChild(this);\r\n                        },\r\n                    });\r\n                });\r\n            })(args);\r\n        };\r\n        return Polyfills;\r\n    }());\r\n    utils.Polyfills = Polyfills;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var Phaser3Extensions = /** @class */ (function () {\r\n        function Phaser3Extensions() {\r\n        }\r\n        Phaser3Extensions.extend = function () {\r\n            var extendMethods = Object.keys(Phaser3Extensions);\r\n            extendMethods.forEach(function (method) {\r\n                if (method !== \"extend\") {\r\n                    Phaser3Extensions[method]();\r\n                }\r\n            });\r\n        };\r\n        Phaser3Extensions.addGetGlobalPosition = function () {\r\n            var getWorldPosition = function (out) {\r\n                var worldMatrix = this.getWorldTransformMatrix();\r\n                out = out !== null && out !== void 0 ? out : { x: 0, y: 0 };\r\n                out.x = worldMatrix.tx;\r\n                out.y = worldMatrix.ty;\r\n                return out;\r\n            };\r\n            // noinspection JSUnusedLocalSymbols\r\n            var classes = [\r\n                Phaser.GameObjects.Container,\r\n                Phaser.GameObjects.Image,\r\n                Phaser.GameObjects.Sprite,\r\n                Phaser.GameObjects.Graphics,\r\n                Phaser.GameObjects.Shape,\r\n            ].forEach(function (clazz) {\r\n                clazz.prototype.getWorldPosition = getWorldPosition;\r\n            });\r\n        };\r\n        Phaser3Extensions.addKillRevive = function () {\r\n            var kill = function () {\r\n                this.visible = false;\r\n                this.active = false;\r\n            };\r\n            var revive = function () {\r\n                this.visible = true;\r\n                this.active = true;\r\n            };\r\n            // noinspection JSUnusedLocalSymbols\r\n            var classes = [\r\n                Phaser.GameObjects.Container,\r\n                Phaser.GameObjects.Image,\r\n                Phaser.GameObjects.Sprite,\r\n                Phaser.GameObjects.Graphics,\r\n                Phaser.GameObjects.Shape,\r\n                Phaser.GameObjects.Text,\r\n                Phaser.GameObjects.BitmapText,\r\n                Phaser.GameObjects.TileSprite,\r\n            ].forEach(function (clazz) {\r\n                clazz.prototype.kill = kill;\r\n                clazz.prototype.revive = revive;\r\n            });\r\n        };\r\n        Phaser3Extensions.extendContainer = function () {\r\n            Phaser.GameObjects.Container.prototype.gridAlign = function (options, startIndex, endIndex) {\r\n                if (typeof startIndex === \"undefined\") {\r\n                    startIndex = 0;\r\n                }\r\n                if (typeof endIndex === \"undefined\") {\r\n                    endIndex = this.length;\r\n                }\r\n                var items = this.list.slice(startIndex, endIndex);\r\n                Phaser.Actions.GridAlign(items, options);\r\n                return this;\r\n            };\r\n        };\r\n        Phaser3Extensions.extendAnimationManager = function () {\r\n            var sortByFrameNumbers = function (frame_1, frame_2) {\r\n                var index_1 = getFrameNumber(frame_1);\r\n                var index_2 = getFrameNumber(frame_2);\r\n                return index_1 - index_2;\r\n            };\r\n            var getFrameNumber = function (frameName, zeroPad) {\r\n                if (zeroPad === void 0) { zeroPad = 4; }\r\n                return parseInt(frameName.slice(-zeroPad));\r\n            };\r\n            Phaser.Animations.AnimationManager.prototype.getFrameNames = function (atlasKey, prefix) {\r\n                var allFrames = this.game.textures.get(atlasKey).getFrameNames();\r\n                var animationFrameNames = allFrames.filter(function (frameName) { return frameName.includes(prefix); }).sort(sortByFrameNumbers);\r\n                return animationFrameNames.map(function (frameName) {\r\n                    return {\r\n                        key: atlasKey,\r\n                        frame: frameName,\r\n                    };\r\n                });\r\n            };\r\n        };\r\n        Phaser3Extensions.extendMath = function () {\r\n            Phaser.Math.Sign = function (value) {\r\n                return value >= 0 ? 1 : -1;\r\n            };\r\n            Phaser.Math.MapLinear = function (x, a1, a2, b1, b2) {\r\n                return b1 + ((x - a1) * (b2 - b1)) / (a2 - a1);\r\n            };\r\n        };\r\n        Phaser3Extensions.extendRandomDataGenerator = function () {\r\n            Phaser.Math.RandomDataGenerator.prototype.bool = function () {\r\n                return this.frac() > 0.5;\r\n            };\r\n            Phaser.Math.RandomDataGenerator.prototype.pickExcept = function (array, exception, safetyCounter) {\r\n                if (safetyCounter === void 0) { safetyCounter = 100; }\r\n                var item;\r\n                do {\r\n                    item = this.pick(array);\r\n                } while (exception === item && --safetyCounter > 0);\r\n                return item;\r\n            };\r\n            Phaser.Math.RandomDataGenerator.prototype.pickExceptMultiple = function (array, exceptions, safetyCounter) {\r\n                if (safetyCounter === void 0) { safetyCounter = 100; }\r\n                var item;\r\n                do {\r\n                    item = this.pick(array);\r\n                } while (exceptions.includes(item) && --safetyCounter > 0);\r\n                return item;\r\n            };\r\n        };\r\n        Phaser3Extensions.extendFactory = function () {\r\n            var factory = Phaser.GameObjects.GameObjectFactory.prototype;\r\n            factory.existingMultiple = function (children) {\r\n                var _this = this;\r\n                return children.map(function (child) { return _this.existing(child); });\r\n            };\r\n            factory.button = function (texture, frame, parent) {\r\n                return new Phaser.GameObjects.Button(this.scene, texture, frame, parent);\r\n            };\r\n            factory.toggleButton = function (texture, frame_1, frame_2, parent) {\r\n                return new Phaser.GameObjects.ToggleButton(this.scene, texture, frame_1, frame_2, parent);\r\n            };\r\n            factory.soundButton = function (texture, frame_1, frame_2, parent) {\r\n                return new Phaser.GameObjects.SoundButton(this.scene, texture, frame_1, frame_2, parent);\r\n            };\r\n        };\r\n        Phaser3Extensions.addScaleMethods = function () {\r\n            var hasScale = function (object) {\r\n                return typeof object.setScale !== \"undefined\";\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.fitWidth = function (width) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                this.setScale(1);\r\n                this.setScale(width / this.width);\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.fitHeight = function (maxHeight) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                this.setScale(Math.min(1, maxHeight / this.height));\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.fitIn = function (maxWidth, maxHeight) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                var scaleX = maxWidth / this.width;\r\n                var scaleY = maxHeight / this.height;\r\n                this.scale = Math.min(1, scaleX, scaleY);\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.fillWidth = function (maxWidth) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                this.setScale(Math.max(1, maxWidth / this.width));\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.fillHeight = function (maxHeight) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                this.setScale(Math.max(1, maxHeight / this.height));\r\n            };\r\n            Phaser.GameObjects.GameObject.prototype.envelop = function (maxWidth, maxHeight) {\r\n                if (hasScale(this) === false) {\r\n                    return;\r\n                }\r\n                var scaleX = maxWidth / this.width;\r\n                var scaleY = maxHeight / this.height;\r\n                this.scale = Math.max(scaleX, scaleY);\r\n            };\r\n        };\r\n        Phaser3Extensions.addAlighMethods = function () {\r\n            Object.defineProperty(Phaser.GameObjects.GameObject.prototype, \"top\", {\r\n                get: function () {\r\n                    return Phaser.Display.Bounds.GetTop(this);\r\n                },\r\n                set: function (value) {\r\n                    return Phaser.Display.Bounds.SetTop(this, value);\r\n                },\r\n            });\r\n            Object.defineProperty(Phaser.GameObjects.GameObject.prototype, \"right\", {\r\n                get: function () {\r\n                    return Phaser.Display.Bounds.GetRight(this);\r\n                },\r\n                set: function (value) {\r\n                    return Phaser.Display.Bounds.SetRight(this, value);\r\n                },\r\n            });\r\n            Object.defineProperty(Phaser.GameObjects.GameObject.prototype, \"bottom\", {\r\n                get: function () {\r\n                    return Phaser.Display.Bounds.GetBottom(this);\r\n                },\r\n                set: function (value) {\r\n                    return Phaser.Display.Bounds.SetBottom(this, value);\r\n                },\r\n            });\r\n            Object.defineProperty(Phaser.GameObjects.GameObject.prototype, \"left\", {\r\n                get: function () {\r\n                    return Phaser.Display.Bounds.GetLeft(this);\r\n                },\r\n                set: function (value) {\r\n                    return Phaser.Display.Bounds.SetLeft(this, value);\r\n                },\r\n            });\r\n        };\r\n        Phaser3Extensions.extendLoader = function () {\r\n            Phaser.Loader.LoaderPlugin.prototype.bitmapFontFromAtlas = function (fontKey, atlasKey, atlasFrame, dataURL, xSpacing, ySpacing) {\r\n                var _this = this;\r\n                var xmlKey = fontKey + \"_data\";\r\n                this.xml(xmlKey, dataURL);\r\n                this.once(Phaser.Loader.Events.COMPLETE, function () {\r\n                    var wasParsed = Phaser.GameObjects.BitmapText.ParseFromAtlas(_this.scene, fontKey, atlasKey, atlasFrame, xmlKey, xSpacing, ySpacing);\r\n                    if (wasParsed === false) {\r\n                        console.warn(\"Can't add bitmap font \" + fontKey);\r\n                    }\r\n                });\r\n                return this;\r\n            };\r\n        };\r\n        return Phaser3Extensions;\r\n    }());\r\n    utils.Phaser3Extensions = Phaser3Extensions;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var MatterExtensions = /** @class */ (function () {\r\n        function MatterExtensions() {\r\n        }\r\n        MatterExtensions.extend = function () {\r\n            var extendMethods = Object.keys(MatterExtensions);\r\n            extendMethods.forEach(function (method) {\r\n                if (method !== \"extend\") {\r\n                    MatterExtensions[method]();\r\n                }\r\n            });\r\n        };\r\n        MatterExtensions.addIgnoreCollisionCategory = function () {\r\n            var ignoreCollisionCategory = function (value) {\r\n                this.body.collisionFilter.mask &= ~value;\r\n                return this;\r\n            };\r\n            Phaser.Physics.Matter.Image.prototype.ignoreCollisionCategory = ignoreCollisionCategory;\r\n            Phaser.Physics.Matter.Sprite.prototype.ignoreCollisionCategory = ignoreCollisionCategory;\r\n        };\r\n        MatterExtensions.addGetContactPoint = function () {\r\n            Phaser.Physics.Matter.World.prototype.getContactPoint = function (pair, out) {\r\n                var contact = pair.activeContacts[0];\r\n                var x = contact.vertex.x - pair.collision.penetration.x;\r\n                var y = contact.vertex.y - pair.collision.penetration.y;\r\n                out = out !== null && out !== void 0 ? out : (out || { x: x, y: y });\r\n                return out;\r\n            };\r\n        };\r\n        return MatterExtensions;\r\n    }());\r\n    utils.MatterExtensions = MatterExtensions;\r\n})(utils || (utils = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var DeviceUtil = /** @class */ (function () {\r\n        function DeviceUtil() {\r\n        }\r\n        DeviceUtil.webP = function () {\r\n            var match = navigator.userAgent.match(/(Edge|Firefox)\\/(\\d+)\\./);\r\n            if (match) {\r\n                return (match[1] === \"Firefox\" && +match[2] >= 65)\r\n                    || (match[1] === \"Edge\" && +match[2] >= 18);\r\n            }\r\n            // Use canvas hack for webkit-based browsers\r\n            // Kudos to Rui Marques: https://stackoverflow.com/a/27232658/7897049\r\n            var e = document.createElement(\"canvas\");\r\n            return e.toDataURL\r\n                ? e.toDataURL(\"image/webp\").indexOf(\"data:image/webp\") == 0\r\n                : false;\r\n        };\r\n        DeviceUtil.getDeviceInfo = function () {\r\n            var ua = navigator.userAgent;\r\n            var OS = {\r\n                android: false,\r\n                chromeOS: false,\r\n                cordova: false,\r\n                crosswalk: false,\r\n                desktop: false,\r\n                ejecta: false,\r\n                electron: false,\r\n                iOS: false,\r\n                iOSVersion: 0,\r\n                iPad: false,\r\n                iPhone: false,\r\n                kindle: false,\r\n                linux: false,\r\n                macOS: false,\r\n                node: false,\r\n                nodeWebkit: false,\r\n                pixelRatio: 1,\r\n                webApp: false,\r\n                windows: false,\r\n                windowsPhone: false,\r\n            };\r\n            if (/Windows/.test(ua)) {\r\n                OS.windows = true;\r\n            }\r\n            else if (/Mac OS/.test(ua) && !/like Mac OS/.test(ua)) {\r\n                OS.macOS = true;\r\n            }\r\n            else if (/Android/.test(ua)) {\r\n                OS.android = true;\r\n            }\r\n            else if (/Linux/.test(ua)) {\r\n                OS.linux = true;\r\n            }\r\n            else if (/iP[ao]d|iPhone/i.test(ua)) {\r\n                OS.iOS = true;\r\n                navigator.appVersion.match(/OS (\\d+)/);\r\n                OS.iOSVersion = parseInt(RegExp.$1, 10);\r\n                OS.iPhone = ua.toLowerCase().indexOf(\"iphone\") !== -1;\r\n                OS.iPad = ua.toLowerCase().indexOf(\"ipad\") !== -1;\r\n            }\r\n            else if (/Kindle/.test(ua) || /\\bKF[A-Z][A-Z]+/.test(ua) || /Silk.*Mobile Safari/.test(ua)) {\r\n                OS.kindle = true;\r\n                // This will NOT detect early generations of Kindle Fire, I think there is no reliable way...\r\n                // E.g. \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us; Silk/1.1.0-80) AppleWebKit/533.16 (KHTML, like Gecko) Version/5.0 Safari/533.16 Silk-Accelerated=true\"\r\n            }\r\n            else if (/CrOS/.test(ua)) {\r\n                OS.chromeOS = true;\r\n            }\r\n            if (/Windows Phone/i.test(ua) || /IEMobile/i.test(ua)) {\r\n                OS.android = false;\r\n                OS.iOS = false;\r\n                OS.macOS = false;\r\n                OS.windows = true;\r\n                OS.windowsPhone = true;\r\n            }\r\n            var silk = /Silk/.test(ua);\r\n            if (OS.windows || OS.macOS || (OS.linux && !silk) || OS.chromeOS) {\r\n                OS.desktop = true;\r\n            }\r\n            //  Windows Phone / Table reset\r\n            if (OS.windowsPhone || (/Windows NT/i.test(ua) && /Touch/i.test(ua))) {\r\n                OS.desktop = false;\r\n            }\r\n            return OS;\r\n        };\r\n        DeviceUtil.isIpad = function (device) {\r\n            device = device !== null && device !== void 0 ? device : this.getDeviceInfo();\r\n            return device.macOS && navigator.maxTouchPoints && navigator.maxTouchPoints > 2;\r\n        };\r\n        DeviceUtil.isDesktop = function () {\r\n            return this.getDeviceInfo().desktop;\r\n        };\r\n        return DeviceUtil;\r\n    }());\r\n    utils.DeviceUtil = DeviceUtil;\r\n})(utils || (utils = {}));\r\nvar Phaser;\r\n(function (Phaser) {\r\n    var Math;\r\n    (function (Math) {\r\n        var EasingString;\r\n        (function (EasingString) {\r\n            EasingString[\"Power0\"] = \"Linear\";\r\n            EasingString[\"Power1\"] = \"Quadratic.Out\";\r\n            EasingString[\"Power2\"] = \"Cubic.Out\";\r\n            EasingString[\"Power3\"] = \"Quartic.Out\";\r\n            EasingString[\"Power4\"] = \"Quintic.Out\";\r\n            EasingString[\"Linear\"] = \"Linear\";\r\n            EasingString[\"Quad\"] = \"Quadratic.Out\";\r\n            EasingString[\"Cubic\"] = \"Cubic.Out\";\r\n            EasingString[\"Quart\"] = \"Quartic.Out\";\r\n            EasingString[\"Quint\"] = \"Quintic.Out\";\r\n            EasingString[\"Sine\"] = \"Sine.Out\";\r\n            EasingString[\"Expo\"] = \"Expo.Out\";\r\n            EasingString[\"Circ\"] = \"Circular.Out\";\r\n            EasingString[\"Elastic\"] = \"Elastic.Out\";\r\n            EasingString[\"Back\"] = \"Back.Out\";\r\n            EasingString[\"Bounce\"] = \"Bounce.Out\";\r\n            EasingString[\"Stepped\"] = \"Stepped\";\r\n            EasingString[\"QuadEaseIn\"] = \"Quadratic.In\";\r\n            EasingString[\"CubicEaseIn\"] = \"Cubic.In\";\r\n            EasingString[\"QuartEaseIn\"] = \"Quartic.In\";\r\n            EasingString[\"QuintEaseIn\"] = \"Quintic.In\";\r\n            EasingString[\"SineEaseIn\"] = \"Sine.In\";\r\n            EasingString[\"ExpoEaseIn\"] = \"Expo.In\";\r\n            EasingString[\"CircEaseIn\"] = \"Circular.In\";\r\n            EasingString[\"ElasticEaseIn\"] = \"Elastic.In\";\r\n            EasingString[\"BackEaseIn\"] = \"Back.In\";\r\n            EasingString[\"BounceEaseIn\"] = \"Bounce.In\";\r\n            EasingString[\"QuadEaseOut\"] = \"Quadratic.Out\";\r\n            EasingString[\"CubicEaseOut\"] = \"Cubic.Out\";\r\n            EasingString[\"QuartEaseOut\"] = \"Quartic.Out\";\r\n            EasingString[\"QuintEaseOut\"] = \"Quintic.Out\";\r\n            EasingString[\"SineEaseOut\"] = \"Sine.Out\";\r\n            EasingString[\"ExpoEaseOut\"] = \"Expo.Out\";\r\n            EasingString[\"CircEaseOut\"] = \"Circular.Out\";\r\n            EasingString[\"ElasticEaseOut\"] = \"Elastic.Out\";\r\n            EasingString[\"BackEaseOut\"] = \"Back.Out\";\r\n            EasingString[\"BounceEaseOut\"] = \"Bounce.Out\";\r\n            EasingString[\"QuadEaseInOut\"] = \"Quadratic.InOut\";\r\n            EasingString[\"CubicEaseInOut\"] = \"Cubic.InOut\";\r\n            EasingString[\"QuartEaseInOut\"] = \"Quartic.InOut\";\r\n            EasingString[\"QuintEaseInOut\"] = \"Quintic.InOut\";\r\n            EasingString[\"SineEaseInOut\"] = \"Sine.InOut\";\r\n            EasingString[\"ExpoEaseInOut\"] = \"Expo.InOut\";\r\n            EasingString[\"CircEaseInOut\"] = \"Circular.InOut\";\r\n            EasingString[\"ElasticEaseInOut\"] = \"Elastic.InOut\";\r\n            EasingString[\"BackEaseInOut\"] = \"Back.InOut\";\r\n            EasingString[\"BounceEaseInOut\"] = \"Bounce.InOut\";\r\n        })(EasingString = Math.EasingString || (Math.EasingString = {}));\r\n    })(Math = Phaser.Math || (Phaser.Math = {}));\r\n})(Phaser || (Phaser = {}));\r\nvar game;\r\n(function (game) {\r\n    var BaseScene = /** @class */ (function (_super) {\r\n        __extends(BaseScene, _super);\r\n        function BaseScene() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(BaseScene.prototype, \"keyboard\", {\r\n            get: function () {\r\n                return this.input.keyboard;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(BaseScene.prototype, \"activePointer\", {\r\n            get: function () {\r\n                return this.input.activePointer;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        BaseScene.prototype.init = function (data) {\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n        };\r\n        BaseScene.prototype.create = function () {\r\n        };\r\n        BaseScene.prototype.resize = function () {\r\n        };\r\n        BaseScene.prototype.restart = function (data) {\r\n            this.game.restartScene(this.scene.key, data);\r\n        };\r\n        BaseScene.prototype.onKeyDown = function (key, callback, context) {\r\n            this.keyboard.on(\"keydown-\" + key, callback, context);\r\n        };\r\n        BaseScene.prototype.onceKeyDown = function (key, callback, context) {\r\n            this.keyboard.once(\"keydown-\" + key, callback, context);\r\n        };\r\n        BaseScene.prototype.shutdown = function () {\r\n        };\r\n        return BaseScene;\r\n    }(Phaser.Scene));\r\n    game.BaseScene = BaseScene;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var SceneKey;\r\n    (function (SceneKey) {\r\n        SceneKey[\"TEST_EMITTERS\"] = \"TEST_EMITTERS\";\r\n        SceneKey[\"TEST_TRAIL\"] = \"TEST_TRAIL\";\r\n        SceneKey[\"TEST_LINE\"] = \"TEST_LINE\";\r\n        SceneKey[\"TEST_LIGHTNING\"] = \"TEST_LIGHTNING\";\r\n        SceneKey[\"TEST_ANIMATIONS\"] = \"TEST_ANIMATIONS\";\r\n        SceneKey[\"GLOBAL\"] = \"GLOBAL\";\r\n        SceneKey[\"BOOT\"] = \"BOOT\";\r\n        SceneKey[\"PRELOADER\"] = \"PRELOADER\";\r\n        SceneKey[\"LEVELS_MAP\"] = \"LEVELS_MAP\";\r\n        SceneKey[\"LEVELS_MAP_DEV\"] = \"LEVELS_MAP_DEV\";\r\n        SceneKey[\"GAMEPLAY_ROOT\"] = \"GAMEPLAY_ROOT\";\r\n        SceneKey[\"GAMEPLAY\"] = \"GAMEPLAY\";\r\n        SceneKey[\"GAMEPLAY_COPY\"] = \"GAMEPLAY_COPY\";\r\n        SceneKey[\"GAMEPLAY_GUI\"] = \"GAMEPLAY_GUI\";\r\n        SceneKey[\"TUTORIAL_EDITOR\"] = \"TUTORIAL_EDITOR\";\r\n        SceneKey[\"LEVELS_MAP_EDITOR\"] = \"LEVELS_MAP_EDITOR\";\r\n        SceneKey[\"LEVEL_EDITOR_ROOT\"] = \"LEVEL_EDITOR_ROOT\";\r\n        SceneKey[\"LEVEL_EDITOR\"] = \"LEVEL_EDITOR\";\r\n        SceneKey[\"LEVEL_EDITOR_GUI\"] = \"LEVEL_EDITOR_GUI\";\r\n    })(SceneKey = game.SceneKey || (game.SceneKey = {}));\r\n})(game || (game = {}));\r\nvar utils;\r\n(function (utils) {\r\n    var RenderStatsDOM = /** @class */ (function () {\r\n        function RenderStatsDOM(scene) {\r\n            this.timer = 0;\r\n            this.updateInterval = 100;\r\n            this.drawCallsNum = 0;\r\n            this.scene = scene;\r\n            this.gameLoop = this.scene.game.loop;\r\n            this.span = document.createElement(\"span\");\r\n            this.span.id = \"stats\";\r\n            this.span.addEventListener(\"click\", this.toggleVisibility.bind(this));\r\n            document.body.appendChild(this.span);\r\n            this.scene.scale.on(Phaser.Scale.Events.RESIZE, this.onResize, this);\r\n            this.onResize();\r\n            this.hookToWebGL();\r\n        }\r\n        RenderStatsDOM.prototype.toggleVisibility = function () {\r\n            if (this.span.style.opacity === \"0\") {\r\n                this.span.style.opacity = \"1\";\r\n            }\r\n            else {\r\n                this.span.style.opacity = \"0\";\r\n            }\r\n        };\r\n        RenderStatsDOM.prototype.onResize = function () {\r\n            this.span.style.left = this.scene.scale.canvasBounds.left + \"px\";\r\n        };\r\n        RenderStatsDOM.prototype.hookToWebGL = function () {\r\n            var _this = this;\r\n            var renderer = this.scene.sys.renderer;\r\n            if (renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer) {\r\n                this.scene.game.events.on(Phaser.Core.Events.POST_STEP, function () {\r\n                    _this.drawCallsNum = 0;\r\n                });\r\n                var gl = WebGLRenderingContext.prototype;\r\n                gl.incrementDrawCalls = function () {\r\n                    _this.drawCallsNum++;\r\n                };\r\n                gl.realDrawArrays = WebGLRenderingContext.prototype.drawArrays;\r\n                gl.drawArrays = function (mode, first, count) {\r\n                    this.incrementDrawCalls();\r\n                    this.realDrawArrays(mode, first, count);\r\n                };\r\n            }\r\n        };\r\n        RenderStatsDOM.prototype.update = function (delta) {\r\n            this.timer += delta;\r\n            if (this.timer >= this.updateInterval) {\r\n                this.timer -= this.updateInterval;\r\n                this.updateStats();\r\n            }\r\n        };\r\n        RenderStatsDOM.prototype.updateStats = function () {\r\n            var fps = \"FPS: \" + Math.round(this.gameLoop.actualFps);\r\n            var drawCalls = \"DC: \" + this.drawCallsNum;\r\n            var result = fps + \" | \" + drawCalls;\r\n            this.span.innerText = result;\r\n        };\r\n        return RenderStatsDOM;\r\n    }());\r\n    utils.RenderStatsDOM = RenderStatsDOM;\r\n})(utils || (utils = {}));\r\nvar game;\r\n(function (game) {\r\n    var SceneTransitionEvent;\r\n    (function (SceneTransitionEvent) {\r\n        SceneTransitionEvent[\"START\"] = \"start\";\r\n        SceneTransitionEvent[\"COMPLETE\"] = \"complete\";\r\n    })(SceneTransitionEvent = game.SceneTransitionEvent || (game.SceneTransitionEvent = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var SceneTransition = /** @class */ (function (_super) {\r\n        __extends(SceneTransition, _super);\r\n        function SceneTransition(scene, config) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.instantChange = false;\r\n            _this.name = \"scene_transition\";\r\n            _this.sceneManager = _this.scene.game.scene;\r\n            _this.addMask(config);\r\n            _this.addBackground(config);\r\n            _this.resize();\r\n            return _this;\r\n        }\r\n        SceneTransition.prototype.changeScene = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            if (this.instantChange) {\r\n                this.emit(game.SceneTransitionEvent.START, this, currentSceneKey, newSceneKey, newSceneData);\r\n                this.emit(game.SceneTransitionEvent.COMPLETE, this, currentSceneKey, newSceneKey, newSceneData);\r\n                var currenScene = this.sceneManager.getScene(currentSceneKey);\r\n                currenScene.scene.start(newSceneKey, newSceneData);\r\n                return;\r\n            }\r\n            this.revive();\r\n            this.emit(game.SceneTransitionEvent.START, this, currentSceneKey, newSceneKey, newSceneData);\r\n            this.resize();\r\n            this.reApplyMask();\r\n            this.fadeIn();\r\n            this.hideScreen(currentSceneKey, newSceneKey, newSceneData);\r\n        };\r\n        SceneTransition.prototype.resize = function () {\r\n            this.background.displayWidth = game.Config.GAME_WIDTH + 4;\r\n            this.background.displayHeight = game.Config.GAME_HEIGHT + 4;\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n            this.maskImage.x = game.Config.HALF_GAME_WIDTH;\r\n            this.maskImage.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        SceneTransition.prototype.addMask = function (config) {\r\n            this.maskImage = this.scene.make.image({ add: false, key: config.textureKey, frame: config.maskFrameName });\r\n        };\r\n        SceneTransition.prototype.addBackground = function (config) {\r\n            this.background = this.scene.add.image(0, 0, config.textureKey, config.backgroundFrameName);\r\n            this.background.setTint(config.fillColor);\r\n            this.add(this.background);\r\n        };\r\n        SceneTransition.prototype.reApplyMask = function () {\r\n            if (this.background.mask) {\r\n                this.background.mask.destroy();\r\n            }\r\n            this.background.mask = this.maskImage.createBitmapMask();\r\n            this.background.mask.invertAlpha = true;\r\n        };\r\n        SceneTransition.prototype.fadeIn = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                alpha: 1,\r\n                duration: 270,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n            });\r\n        };\r\n        SceneTransition.prototype.hideScreen = function (currentScene, newScene, newSceneData) {\r\n            var _this = this;\r\n            this.maskImage.scale = this.getMaskScale(this.maskImage);\r\n            this.scene.tweens.add({\r\n                targets: this.maskImage,\r\n                scale: 0,\r\n                duration: 270,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                onComplete: function () {\r\n                    _this.doChangeScenes(currentScene, newScene, newSceneData);\r\n                },\r\n            });\r\n        };\r\n        SceneTransition.prototype.doChangeScenes = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            var currentScene = this.sceneManager.getScene(currentSceneKey);\r\n            currentScene.events.once(Phaser.Scenes.Events.SHUTDOWN, this.revealScreen.bind(this, currentSceneKey, newSceneKey, newSceneData));\r\n            currentScene.scene.start(newSceneKey, newSceneData);\r\n        };\r\n        SceneTransition.prototype.revealScreen = function (prevSceneKey, newSceneKey) {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                alpha: 0,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                    _this.emit(game.SceneTransitionEvent.COMPLETE, _this, prevSceneKey, newSceneKey);\r\n                },\r\n            });\r\n        };\r\n        SceneTransition.prototype.getMaskScale = function (mask) {\r\n            var scaleX = game.Config.GAME_WIDTH / mask.width;\r\n            var scaleY = game.Config.GAME_HEIGHT / mask.height;\r\n            var scale = Math.max(scaleX, scaleY);\r\n            return scale;\r\n        };\r\n        return SceneTransition;\r\n    }(Phaser.GameObjects.Container));\r\n    game.SceneTransition = SceneTransition;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var CanvasSceneTransition = /** @class */ (function (_super) {\r\n        __extends(CanvasSceneTransition, _super);\r\n        function CanvasSceneTransition(scene, key, frame) {\r\n            var _this = _super.call(this, scene, 0, 0, key, frame) || this;\r\n            _this.sceneManager = _this.scene.game.scene;\r\n            return _this;\r\n        }\r\n        CanvasSceneTransition.prototype.changeScene = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            if (this.instantChange) {\r\n                this.emit(game.SceneTransitionEvent.START, this, currentSceneKey, newSceneKey);\r\n                this.emit(game.SceneTransitionEvent.COMPLETE, this, currentSceneKey, newSceneKey);\r\n                var currenScene = this.sceneManager.getScene(currentSceneKey);\r\n                currenScene.scene.start(newSceneKey, newSceneData);\r\n                return;\r\n            }\r\n            this.emit(game.SceneTransitionEvent.START, this, currentSceneKey, newSceneKey);\r\n            this.resize();\r\n            this.fadeIn(currentSceneKey, newSceneKey, newSceneData);\r\n        };\r\n        CanvasSceneTransition.prototype.fadeIn = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            var _this = this;\r\n            this.revive();\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Quadratic.In,\r\n                alpha: 1,\r\n                onComplete: function () {\r\n                    _this.doChangeScenes(currentSceneKey, newSceneKey, newSceneData);\r\n                },\r\n            });\r\n        };\r\n        CanvasSceneTransition.prototype.doChangeScenes = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            var currentScene = this.sceneManager.getScene(currentSceneKey);\r\n            currentScene.events.once(Phaser.Scenes.Events.SHUTDOWN, this.fadeOut.bind(this, currentSceneKey, newSceneKey));\r\n            currentScene.scene.start(newSceneKey, newSceneData);\r\n        };\r\n        CanvasSceneTransition.prototype.fadeOut = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Quadratic.In,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                },\r\n            });\r\n        };\r\n        CanvasSceneTransition.prototype.resize = function () {\r\n            this.setDisplaySize(game.Config.GAME_WIDTH + 4, game.Config.GAME_HEIGHT + 4);\r\n            this.x = game.Config.HALF_GAME_WIDTH;\r\n            this.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        CanvasSceneTransition.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return CanvasSceneTransition;\r\n    }(Phaser.GameObjects.Image));\r\n    game.CanvasSceneTransition = CanvasSceneTransition;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var DelayedLoaderEvent;\r\n    (function (DelayedLoaderEvent) {\r\n        DelayedLoaderEvent[\"GAMEPLAY_ASSETS_READY\"] = \"__GAMEPLAY_ASSETS_READY\";\r\n    })(DelayedLoaderEvent = game.DelayedLoaderEvent || (game.DelayedLoaderEvent = {}));\r\n    var DelayedLoader = /** @class */ (function (_super) {\r\n        __extends(DelayedLoader, _super);\r\n        function DelayedLoader(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.areGameplayAssetsLoaded = false;\r\n            return _this;\r\n        }\r\n        DelayedLoader.prototype.startLoading = function () {\r\n            this.json(\"physics\", \"assets/configs/physics_shapes.json\");\r\n            this.loadGameplayGraphics();\r\n            this.loadGameplayFonts();\r\n            this.loadGameplayAudio();\r\n            this.once(Phaser.Loader.Events.COMPLETE, this.onGameplayAssetsLoadComplete, this);\r\n            this.start();\r\n        };\r\n        DelayedLoader.prototype.loadGameplayGraphics = function () {\r\n            this.atlas(\"backgrounds\", \"assets/graphics/backgrounds.png\", \"assets/graphics/backgrounds.json\");\r\n            this.atlas(\"gameplay\", \"assets/graphics/gameplay.png\", \"assets/graphics/gameplay.json\");\r\n            this.atlas(\"gameplay_gui\", \"assets/graphics/gameplay_gui.png\", \"assets/graphics/gameplay_gui.json\");\r\n        };\r\n        DelayedLoader.prototype.loadGameplayFonts = function () {\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.GAMEPLAY_GUI_BOOSTERS, \"gameplay_gui\", \"boosters_label\", \"assets/fonts/bitmap/boosters_label.fnt\", -1);\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.GAMEPLAY_BOOSTERS, \"gameplay\", \"boosters_label\", \"assets/fonts/bitmap/boosters_label.fnt\", -1);\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.BLOCK_LIVES, \"gameplay\", \"block_lives\", \"assets/fonts/bitmap/block_lives.fnt\", -1);\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.BLOCK_DAMAGE_FX, \"gameplay\", \"block_lives_fx\", \"assets/fonts/bitmap/block_lives_fx.fnt\", -1);\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.INGAME_GUI_DIGITS, \"gameplay_gui\", \"ingame_gui_digits\", \"assets/fonts/bitmap/ingame_gui_digits.fnt\");\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.BLOCKS_LABEL, \"gameplay_gui\", \"blocks_label\", \"assets/fonts/bitmap/blocks_label.fnt\", 1);\r\n            this.bitmapFontFromAtlas(game.BitmapGameFont.BLOCKS_LABEL_COMPLETE, \"gameplay_gui\", \"blocks_label_complete\", \"assets/fonts/bitmap/blocks_label_complete.fnt\");\r\n        };\r\n        DelayedLoader.prototype.loadGameplayAudio = function () {\r\n            this.loadSound(game.GameSoundKey.BALL_HIT_1);\r\n            this.loadSound(game.GameSoundKey.BALL_HIT_2);\r\n            this.loadSound(game.GameSoundKey.BALL_HIT_3);\r\n            this.loadSound(game.GameSoundKey.AIM_1);\r\n            this.loadSound(game.GameSoundKey.AIM_2);\r\n            this.loadSound(game.GameSoundKey.AIM_3);\r\n        };\r\n        DelayedLoader.prototype.loadSound = function (key, fileFormat) {\r\n            if (fileFormat === void 0) { fileFormat = \"mp3\"; }\r\n            this.audio(key, \"assets/audio/\" + key + \".\" + fileFormat);\r\n        };\r\n        DelayedLoader.prototype.onGameplayAssetsLoadComplete = function () {\r\n            this.areGameplayAssetsLoaded = true;\r\n            this.emit(DelayedLoaderEvent.GAMEPLAY_ASSETS_READY, this);\r\n            this.loadRemainingAudio();\r\n            this.on(Phaser.Loader.Events.FILE_COMPLETE, this.onSoundLoadComplete, this);\r\n            this.start();\r\n        };\r\n        DelayedLoader.prototype.loadRemainingAudio = function () {\r\n            if (this.scene.game.audioType === game.SoundManagerType.HTML5_AUDIO) {\r\n                this.loadGameplayLoop();\r\n                return;\r\n            }\r\n            this.loadGameplayLoop();\r\n            this.loadSound(game.GameSoundKey.FANCY_TAP);\r\n            this.loadSound(game.GameSoundKey.GIFT_EXPLODE);\r\n            this.loadSound(game.GameSoundKey.GIFT_CHARGE);\r\n            this.loadSound(game.GameSoundKey.GIFT_REVEAL);\r\n            this.loadSound(game.GameSoundKey.STOP_SHOUT);\r\n            this.loadSound(game.GameSoundKey.CATCH_YOU_SHOUT);\r\n            this.loadSound(game.GameSoundKey.BOOSTER_BOMB_IGNITE);\r\n            this.loadSound(game.GameSoundKey.BOOSTER_STOP_ACTIVE);\r\n            this.loadSound(game.GameSoundKey.BOOSTER_CRACKER);\r\n            this.loadSound(game.GameSoundKey.BOOSTER_CRACKER_PUNCH);\r\n            this.loadSound(game.GameSoundKey.POP_1, \"wav\");\r\n            this.loadSound(game.GameSoundKey.BALL_THROW, \"wav\");\r\n            this.loadSound(game.GameSoundKey.BLOCK_HIT);\r\n            this.loadSound(game.GameSoundKey.BLOCK_ZAPPED);\r\n            this.loadSound(game.GameSoundKey.BLOCK_COLLECTED);\r\n            this.loadSound(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH);\r\n            this.loadSound(game.GameSoundKey.PINATA);\r\n            this.loadSound(game.GameSoundKey.EXPLOSION);\r\n            this.loadSound(game.GameSoundKey.NEW_BALL_HIT);\r\n            this.loadSound(game.GameSoundKey.NEW_BALL_LANDED);\r\n            this.loadSound(game.GameSoundKey.SPINNER);\r\n            this.loadSound(game.GameSoundKey.LIGHTNING);\r\n            this.loadSound(game.GameSoundKey.MOVE_ITEMS_UP);\r\n            this.loadSound(game.GameSoundKey.MOVE_ITEMS_DOWN);\r\n            this.loadSound(game.GameSoundKey.TURN_COMPLETE_TEXT);\r\n            this.loadSound(game.GameSoundKey.CLEAR_FIELD);\r\n            this.loadSound(game.GameSoundKey.CLEAR_FIELD_MOVE_COMPLETE, \"wav\");\r\n            this.loadSound(game.GameSoundKey.WINNING_BALL_WHOOSH);\r\n            this.loadSound(game.GameSoundKey.LEVEL_COMPLETE_TEXT);\r\n            this.loadSound(game.GameSoundKey.FOX_OOH);\r\n            this.loadSound(game.GameSoundKey.FOX_UH_OH_1);\r\n            this.loadSound(game.GameSoundKey.FOX_UH_OH_2);\r\n            this.loadSound(game.GameSoundKey.BLOCK_STOMP_HIT);\r\n            this.loadSound(game.GameSoundKey.BLOCK_STOMP_WHOOSH);\r\n            this.loadSound(game.GameSoundKey.DUCK_SCREAM);\r\n            this.loadSound(game.GameSoundKey.LEVEL_FAILED);\r\n            this.loadSound(game.GameSoundKey.LEVEL_COMPLETE);\r\n            this.loadSound(game.GameSoundKey.LEVEL_COMPLETE_STAR_SHOW_1);\r\n            this.loadSound(game.GameSoundKey.LEVEL_COMPLETE_STAR_SHOW_2);\r\n            this.loadSound(game.GameSoundKey.LEVEL_COMPLETE_STAR_SHOW_3);\r\n            this.loadSound(game.GameSoundKey.DROP_BALLS_DOWN);\r\n            this.loadSound(game.GameSoundKey.FAST_FORWARD);\r\n            this.loadSound(game.GameSoundKey.STAR_TWINKLE_1);\r\n            this.loadSound(game.GameSoundKey.STAR_TWINKLE_2);\r\n        };\r\n        DelayedLoader.prototype.loadGameplayLoop = function () {\r\n            this.audio(game.GameSoundKey.GAMEPLAY_LOOP, \"assets/audio/forest_sounds.mp3\");\r\n        };\r\n        DelayedLoader.prototype.onSoundLoadComplete = function (key) {\r\n            if (key === game.GameSoundKey.GAMEPLAY_LOOP) {\r\n                this.scene.game.audio.onGameplayLoopLoaded();\r\n            }\r\n        };\r\n        return DelayedLoader;\r\n    }(Phaser.Loader.LoaderPlugin));\r\n    game.DelayedLoader = DelayedLoader;\r\n})(game || (game = {}));\r\n///<reference path='../../robowhale/phaser3/RenderStatsDOM.ts' />\r\n///<reference path='../../sceneTransition/ISceneTransition.ts' />\r\n///<reference path='../../sceneTransition/SceneTransition.ts' />\r\n///<reference path='../../sceneTransition/CanvasSceneTransition.ts' />\r\n///<reference path='DelayedLoader.ts' />\r\nvar game;\r\n(function (game) {\r\n    var GlobalScene = /** @class */ (function (_super) {\r\n        __extends(GlobalScene, _super);\r\n        function GlobalScene() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GlobalScene.prototype.init = function () {\r\n        };\r\n        GlobalScene.prototype.create = function () {\r\n            var showRenderStats = utils.NetUtil.getParamBool(\"stats\");\r\n            if (showRenderStats) {\r\n                this.addRenderStats();\r\n            }\r\n        };\r\n        GlobalScene.prototype.addRenderStats = function () {\r\n            this.renderStats = new utils.RenderStatsDOM(this);\r\n        };\r\n        GlobalScene.prototype.addIngamePreloader = function () {\r\n            this.preloader = new game.IngamePreloader(this);\r\n            this.preloader.kill();\r\n            this.add.existing(this.preloader);\r\n        };\r\n        GlobalScene.prototype.addSceneTranstion = function (transition) {\r\n            this.sceneTransition = transition;\r\n            this.sceneTransition.visible = false;\r\n            this.sceneTransition.active = false;\r\n            this.add.existing(this.sceneTransition);\r\n        };\r\n        GlobalScene.prototype.addToasts = function () {\r\n            this.toasts = new game.ToastsManager(this);\r\n            this.add.existing(this.toasts);\r\n            this.resize();\r\n            return this.toasts;\r\n        };\r\n        GlobalScene.prototype.addDelayedLoader = function () {\r\n            this.delayedLoader = new game.DelayedLoader(this);\r\n        };\r\n        GlobalScene.prototype.update = function (time, delta) {\r\n            if (this.renderStats) {\r\n                this.renderStats.update(delta);\r\n            }\r\n        };\r\n        GlobalScene.prototype.resize = function () {\r\n            if (this.toasts) {\r\n                this.toasts.scale = game.Config.GAME_WIDTH / game.Config.SOURCE_GAME_WIDTH;\r\n                this.toasts.x = game.Config.HALF_GAME_WIDTH;\r\n                this.toasts.y = game.Config.HALF_GAME_HEIGHT;\r\n                this.toasts.resize();\r\n            }\r\n        };\r\n        return GlobalScene;\r\n    }(Phaser.Scene));\r\n    game.GlobalScene = GlobalScene;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    function isLocalStorageAvailable() {\r\n        try {\r\n            var key = \"__storage_test__\";\r\n            localStorage.setItem(key, key);\r\n            localStorage.removeItem(key);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    game.isLocalStorageAvailable = isLocalStorageAvailable;\r\n    var LocalStorageWrapper = /** @class */ (function () {\r\n        function LocalStorageWrapper(storeName) {\r\n            this.type = \"Local Storage\";\r\n            this.prefix = storeName;\r\n        }\r\n        LocalStorageWrapper.prototype.init = function () {\r\n            return Promise.resolve();\r\n        };\r\n        LocalStorageWrapper.prototype.saveValue = function (key, value) {\r\n            if (typeof value === \"string\") {\r\n                localStorage.setItem(this.getStorageKey(key), value);\r\n            }\r\n            else {\r\n                var dataToSave = JSON.stringify(value);\r\n                localStorage.setItem(this.getStorageKey(key), dataToSave);\r\n            }\r\n            return Promise.resolve();\r\n        };\r\n        LocalStorageWrapper.prototype.getStorageKey = function (key) {\r\n            return this.prefix + \"__\" + key;\r\n        };\r\n        LocalStorageWrapper.prototype.getValue = function (key) {\r\n            // returns null if key is not present\r\n            return Promise.resolve(localStorage.getItem(this.getStorageKey(key)));\r\n        };\r\n        LocalStorageWrapper.prototype.getNumber = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, num;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(0)];\r\n                            }\r\n                            else {\r\n                                num = parseFloat(value) || 0;\r\n                                return [2 /*return*/, Promise.resolve(num)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalStorageWrapper.prototype.getBoolean = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, bool;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(false)];\r\n                            }\r\n                            else {\r\n                                bool = value === \"true\";\r\n                                return [2 /*return*/, Promise.resolve(bool)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalStorageWrapper.prototype.getString = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            if (value === null) {\r\n                                return [2 /*return*/, Promise.resolve(\"\")];\r\n                            }\r\n                            else {\r\n                                return [2 /*return*/, Promise.resolve(value)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalStorageWrapper.prototype.getObject = function (key) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var value, obj;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getValue(key)];\r\n                        case 1:\r\n                            value = _a.sent();\r\n                            obj = null;\r\n                            try {\r\n                                obj = JSON.parse(value);\r\n                            }\r\n                            catch (e) {\r\n                                console.error(e);\r\n                            }\r\n                            return [2 /*return*/, Promise.resolve(obj)];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        LocalStorageWrapper.prototype.remove = function (key) {\r\n            localStorage.removeItem(this.getStorageKey(key));\r\n        };\r\n        LocalStorageWrapper.prototype.clear = function () {\r\n            var _this = this;\r\n            Object.keys(localStorage)\r\n                .filter(function (key) { return key.includes(_this.prefix); })\r\n                .forEach(function (key) {\r\n                localStorage.removeItem(key);\r\n            });\r\n            return Promise.resolve();\r\n        };\r\n        return LocalStorageWrapper;\r\n    }());\r\n    game.LocalStorageWrapper = LocalStorageWrapper;\r\n})(game || (game = {}));\r\n///<reference path='./global/GlobalScene.ts' />\r\n///<reference path='../robowhale/storage/LocalStorageWrapper.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ImageFile = Phaser.Loader.FileTypes.ImageFile;\r\n    var AudioFile = Phaser.Loader.FileTypes.AudioFile;\r\n    var Boot = /** @class */ (function (_super) {\r\n        __extends(Boot, _super);\r\n        function Boot() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.wasPaused = false;\r\n            _this.wasIncorrectOrientation = false;\r\n            return _this;\r\n        }\r\n        Boot.prototype.init = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var localStorage, _a;\r\n                return __generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            localStorage = game.isLocalStorageAvailable() ? window.localStorage : null;\r\n                            _a = this.game;\r\n                            return [4 /*yield*/, this.checkAvifSupport(localStorage)];\r\n                        case 1:\r\n                            _a.avif = _b.sent();\r\n                            this.game.webp = this.checkWebpSupport(localStorage);\r\n                            if (this.game.avif || this.game.webp) {\r\n                                this.patchImageLoader();\r\n                            }\r\n                            this.setPageBackground();\r\n                            this.patchAudioFileLoading();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Boot.prototype.checkAvifSupport = function (localStorage) {\r\n            var disableAvif = utils.NetUtil.getParamBool(\"noAvif\");\r\n            if (disableAvif) {\r\n                return Promise.resolve(false);\r\n            }\r\n            var isDevelop = window.environment === GameEnvironment.DEVELOP;\r\n            if (isDevelop) {\r\n                return Promise.resolve(false);\r\n            }\r\n            var localStorageKey = \"robowhale__avif\";\r\n            if ((localStorage === null || localStorage === void 0 ? void 0 : localStorage.getItem(localStorageKey)) === \"true\") {\r\n                return Promise.resolve(true);\r\n            }\r\n            return new Promise(function (resolve) {\r\n                var callback = function () {\r\n                    if (image.height === 2) {\r\n                        localStorage === null || localStorage === void 0 ? void 0 : localStorage.setItem(localStorageKey, \"true\");\r\n                        resolve(true);\r\n                    }\r\n                    else {\r\n                        resolve(false);\r\n                    }\r\n                };\r\n                var image = new Image();\r\n                image.onload = callback;\r\n                image.onerror = callback;\r\n                image.src = \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\";\r\n            });\r\n        };\r\n        Boot.prototype.checkWebpSupport = function (localStorage) {\r\n            var disableWebP = utils.NetUtil.getParamBool(\"noWebp\");\r\n            if (disableWebP) {\r\n                return false;\r\n            }\r\n            var isDevelop = window.environment === GameEnvironment.DEVELOP;\r\n            if (isDevelop) {\r\n                return false;\r\n            }\r\n            var localStorageKey = \"robowhale__webp\";\r\n            if ((localStorage === null || localStorage === void 0 ? void 0 : localStorage.getItem(localStorageKey)) === \"true\") {\r\n                return true;\r\n            }\r\n            var isSupported = this.doCheckWebP();\r\n            if (isSupported) {\r\n                localStorage === null || localStorage === void 0 ? void 0 : localStorage.setItem(localStorageKey, \"true\");\r\n            }\r\n            return isSupported;\r\n        };\r\n        Boot.prototype.doCheckWebP = function () {\r\n            var match = navigator.userAgent.match(/(Edge|Firefox)\\/(\\d+)\\.(\\d*)/);\r\n            if (match && match[1] === \"Firefox\" && +match[2] >= 65) {\r\n                return true;\r\n            }\r\n            // https://web.archive.org/web/20190626051700/https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/19618851/\r\n            if (match && match[1] === \"Edge\" && +match[2] === 18 && +match[3] === 17763) {\r\n                return false;\r\n            }\r\n            var canvas = Phaser.Display.Canvas.CanvasPool.create(document);\r\n            var supported = canvas.toDataURL\r\n                ? canvas.toDataURL(\"image/webp\").indexOf(\"data:image/webp\") == 0\r\n                : false;\r\n            Phaser.Display.Canvas.CanvasPool.remove(canvas);\r\n            return supported;\r\n        };\r\n        Boot.prototype.patchImageLoader = function () {\r\n            var newFormat = this.getDefaultImageFormat(\".png\");\r\n            var formats = [\".png\", \".jpg\"];\r\n            var replaceUrl = function (file) {\r\n                if (file instanceof ImageFile) {\r\n                    var fileUrl_1 = file.url;\r\n                    var format = formats.find(function (format) { return fileUrl_1.includes(format); });\r\n                    if (format) {\r\n                        file.url = file.url.replace(format, newFormat);\r\n                    }\r\n                }\r\n            };\r\n            Phaser.Loader.LoaderPlugin.prototype[\"addFileOld\"] = Phaser.Loader.LoaderPlugin.prototype.addFile;\r\n            Phaser.Loader.LoaderPlugin.prototype.addFile = function (files) {\r\n                if (Array.isArray(files)) {\r\n                    files.forEach(function (file) { return replaceUrl(file); });\r\n                }\r\n                else {\r\n                    replaceUrl(files);\r\n                }\r\n                return this[\"addFileOld\"](files);\r\n            };\r\n        };\r\n        Boot.prototype.getDefaultImageFormat = function (defaultFormat) {\r\n            if (this.game.avif) {\r\n                return \".avif\";\r\n            }\r\n            else if (this.game.webp) {\r\n                return \".webp\";\r\n            }\r\n            else {\r\n                return defaultFormat;\r\n            }\r\n        };\r\n        Boot.prototype.setPageBackground = function () {\r\n            this.game.canvas.parentElement.style.backgroundImage = \"url('assets/graphics/page_background\" + this.getDefaultImageFormat(\".jpg\") + \"')\";\r\n        };\r\n        Boot.prototype.patchAudioFileLoading = function () {\r\n            AudioFile.prototype[\"onProcessOld\"] = AudioFile.prototype.onProcess;\r\n            AudioFile.prototype.onProcess = function () {\r\n                var _a, _b, _c;\r\n                try {\r\n                    this[\"onProcessOld\"]();\r\n                }\r\n                catch (e) {\r\n                    (_c = (_b = (_a = this.loader) === null || _a === void 0 ? void 0 : _a.scene) === null || _b === void 0 ? void 0 : _b.raven) === null || _c === void 0 ? void 0 : _c.captureException(\"Error processing audio \" + this.key + \" - \" + e);\r\n                }\r\n            };\r\n        };\r\n        Boot.prototype.preload = function () {\r\n            this.load.atlas(\"preloader\", \"assets/graphics/preloader.png\", \"assets/graphics/preloader.json\");\r\n            this.loadWebFonts();\r\n        };\r\n        Boot.prototype.loadWebFonts = function () {\r\n            // this.load.on(GameFontsEvent.WEBFONT_ACTIVE, this.onWebFontActive, this)\r\n            this.load.on(game.GameFontsEvent.WEBFONT_INACTIVE, this.onWebFontInactive, this);\r\n            this.load.rexWebFont({\r\n                custom: {\r\n                    families: [\"Souses:n7,n9\"],\r\n                    urls: [\"css/fonts.css\"],\r\n                },\r\n            });\r\n        };\r\n        Boot.prototype.onWebFontActive = function () {\r\n            // console.log(\"Boot.onWebFontActive\", arguments)\r\n        };\r\n        Boot.prototype.onWebFontInactive = function (loader, fontFamily, fontStyle) {\r\n            var message = \"Can't load webfont \" + fontFamily + \":\" + fontStyle;\r\n            console.warn(message);\r\n        };\r\n        Boot.prototype.create = function () {\r\n            var _this = this;\r\n            this.game.raven.addTagsContext({\r\n                avif: this.game.avif,\r\n                webP: this.game.webp,\r\n            });\r\n            this.game.injectIntoScenes(this.game.raven, \"raven\");\r\n            this.addThrottling();\r\n            this.disableScrollBySpacebar();\r\n            this.setupAnalytics();\r\n            this.setupScale();\r\n            this.setupPoki()\r\n                .finally(function () {\r\n                _this.launchGlobalScene();\r\n            });\r\n        };\r\n        Boot.prototype.addThrottling = function () {\r\n            var throttle = utils.NetUtil.getParamInt(\"throttle\");\r\n            if (throttle > 0) {\r\n                this.events.on(Phaser.Scenes.Events.PRE_UPDATE, function () {\r\n                    var i = throttle * 1000000;\r\n                    var a = 0;\r\n                    while (--i) {\r\n                        a += Math.sqrt(i);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        Boot.prototype.disableScrollBySpacebar = function () {\r\n            if (this.game.device.os.desktop) {\r\n                return;\r\n            }\r\n            this.game.input.keyboard.addCapture(32);\r\n        };\r\n        Boot.prototype.setupAnalytics = function () {\r\n            this.game.analytics = new game.GameAnalyticsWrapper(this.game);\r\n            this.game.injectIntoScenes(this.game.analytics, \"analytics\");\r\n        };\r\n        Boot.prototype.launchGlobalScene = function () {\r\n            var globalScene = this.scene.get(game.SceneKey.GLOBAL);\r\n            globalScene.events.once(Phaser.Scenes.Events.READY, this.onGlobalSceneReady.bind(this, globalScene));\r\n            globalScene.scene.start(game.SceneKey.GLOBAL);\r\n        };\r\n        Boot.prototype.onGlobalSceneReady = function (globalScene) {\r\n            this.game.globalScene = globalScene;\r\n            globalScene.scene.launch(game.SceneKey.PRELOADER);\r\n            globalScene.scene.bringToTop();\r\n        };\r\n        Boot.prototype.setupScale = function () {\r\n            if (this.game.config.scaleMode === Phaser.Scale.NONE) {\r\n                this.scaleForMobile();\r\n                this.updateScreenConstants();\r\n            }\r\n        };\r\n        Boot.prototype.scaleForMobile = function () {\r\n            var scale = this.game.scale;\r\n            scale.orientation = Phaser.Scale.Orientation.PORTRAIT;\r\n            this.wasIncorrectOrientation = true;\r\n            window.addEventListener(\"resize\", this.onWindowResize.bind(this));\r\n            this.onWindowResize();\r\n        };\r\n        Boot.prototype.onWindowResize = function () {\r\n            var _a;\r\n            var width = window.innerWidth;\r\n            var height = window.innerHeight;\r\n            var dpr = Math.min(window.devicePixelRatio, 1.5);\r\n            this.game.raven.captureBreadcrumb({\r\n                category: \"game\",\r\n                message: \"resize\",\r\n                data: {\r\n                    width: width,\r\n                    height: height,\r\n                    dpr: window.devicePixelRatio,\r\n                    orientation: (_a = screen.orientation) === null || _a === void 0 ? void 0 : _a.type,\r\n                },\r\n            });\r\n            this.scale.zoom = 1 / dpr;\r\n            this.scale.resize(width * dpr, height * dpr);\r\n            var isCorrectOrientation = this.isCorrectOrientation();\r\n            if (isCorrectOrientation) {\r\n                this.updateScreenConstants();\r\n                this.resizeActiveScenes();\r\n                this.hideRotateIcon();\r\n                if (this.wasPaused) {\r\n                    this.game.loop.resume();\r\n                    this.wasPaused = false;\r\n                }\r\n            }\r\n            else {\r\n                this.showRotateIcon();\r\n                this.game.loop.pause();\r\n                this.wasPaused = true;\r\n            }\r\n            var isSameOrientation = !this.wasIncorrectOrientation && isCorrectOrientation;\r\n            if (isSameOrientation) {\r\n                this.handleScroll();\r\n            }\r\n            var enterCorrectOrientation = this.wasIncorrectOrientation && isCorrectOrientation;\r\n            if (enterCorrectOrientation) {\r\n                this.fillViewport();\r\n            }\r\n            this.wasIncorrectOrientation = !isCorrectOrientation;\r\n        };\r\n        Boot.prototype.handleScroll = function () {\r\n            if (typeof this.scrollTimeout == \"undefined\") {\r\n                clearTimeout(this.scrollTimeout);\r\n            }\r\n            this.scrollTimeout = setTimeout(function () {\r\n                window.scrollTo(0, -window.innerHeight);\r\n            }, 500);\r\n        };\r\n        Boot.prototype.fillViewport = function () {\r\n            if (typeof this.resizeTimeout !== \"undefined\") {\r\n                clearTimeout(this.resizeTimeout);\r\n            }\r\n            this.resizeTimeout = setTimeout(function () {\r\n                document.body.style.width = \"100vw\";\r\n                document.body.style.height = \"100vh\";\r\n            }, 500);\r\n        };\r\n        Boot.prototype.isCorrectOrientation = function () {\r\n            var correctPortrait = game.Config.IS_PORTRAIT && this.isPortrait();\r\n            var correctLandscape = game.Config.IS_LANDSCAPE && this.isLandscape();\r\n            return correctPortrait || correctLandscape;\r\n        };\r\n        Boot.prototype.resizeActiveScenes = function () {\r\n            this.game.scene.getScenes(true).forEach(function (scene) {\r\n                if (scene.resize) {\r\n                    scene.resize();\r\n                }\r\n            });\r\n        };\r\n        Boot.prototype.setupPoki = function () {\r\n            this.game.poki = new game.PokiSdkWrapper(this.game);\r\n            this.game.poki.injectIntoScenes();\r\n            return this.game.poki.init();\r\n        };\r\n        Boot.prototype.updateScreenConstants = function () {\r\n            game.Config.GAME_WIDTH = this.game.scale.width;\r\n            game.Config.GAME_HEIGHT = this.game.scale.height;\r\n            game.Config.HALF_GAME_WIDTH = game.Config.GAME_WIDTH * 0.5;\r\n            game.Config.HALF_GAME_HEIGHT = game.Config.GAME_HEIGHT * 0.5;\r\n            game.Config.ASPECT_RATIO = game.Config.GAME_WIDTH / game.Config.GAME_HEIGHT;\r\n            game.Config.ZOOM = this.game.scale.zoom;\r\n            game.Config.ASSETS_SCALE = game.Config.IS_PORTRAIT\r\n                ? game.Config.GAME_WIDTH / game.Config.SOURCE_GAME_WIDTH\r\n                : game.Config.GAME_HEIGHT / game.Config.SOURCE_GAME_HEIGHT;\r\n        };\r\n        Boot.prototype.showRotateIcon = function () {\r\n            this.getRotateElement().style.display = \"flex\";\r\n        };\r\n        Boot.prototype.hideRotateIcon = function () {\r\n            this.getRotateElement().style.display = \"none\";\r\n        };\r\n        Boot.prototype.getRotateElement = function () {\r\n            return document.getElementById(\"rotate\");\r\n        };\r\n        Boot.prototype.isLandscape = function () {\r\n            return window.innerWidth > window.innerHeight;\r\n        };\r\n        Boot.prototype.isPortrait = function () {\r\n            return window.innerHeight > window.innerWidth;\r\n        };\r\n        return Boot;\r\n    }(Phaser.Scene));\r\n    game.Boot = Boot;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LoadingLogo = /** @class */ (function (_super) {\r\n        __extends(LoadingLogo, _super);\r\n        function LoadingLogo(scene, atlasKey) {\r\n            if (atlasKey === void 0) { atlasKey = \"preloader\"; }\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"loading_logo\";\r\n            _this.atlasKey = atlasKey;\r\n            _this.addLogo();\r\n            _this.addLogoCrop();\r\n            return _this;\r\n        }\r\n        LoadingLogo.prototype.addLogo = function () {\r\n            this.logoShadow = this.scene.add.image(0, 0, this.atlasKey, \"fox_head_black\");\r\n            this.logoShadow.y = 10;\r\n            this.logoShadow.alpha = 0.15;\r\n            this.logoBack = this.scene.add.image(0, 0, this.atlasKey, \"fox_head_beige\");\r\n            this.logo = this.scene.add.image(0, 0, this.atlasKey, \"fox_head\");\r\n            this.add([this.logoShadow, this.logoBack, this.logo]);\r\n        };\r\n        LoadingLogo.prototype.addLogoCrop = function () {\r\n            var initialHeight = 1;\r\n            this.logoCrop = new Phaser.Geom.Rectangle(0, this.logo.height - initialHeight, this.logo.width, initialHeight);\r\n            this.logo.setCrop(this.logoCrop);\r\n        };\r\n        LoadingLogo.prototype.setProgressInstant = function (progress) {\r\n            this.scene.tweens.killTweensOf(this.logoCrop);\r\n            var crop = this.getLogoCropParams(progress);\r\n            this.logoCrop.height = crop.height;\r\n            this.logoCrop.y = crop.y;\r\n            this.logo.setCrop(this.logoCrop);\r\n        };\r\n        LoadingLogo.prototype.setProgress = function (progress) {\r\n            var _this = this;\r\n            var crop = this.getLogoCropParams(progress);\r\n            this.scene.tweens.killTweensOf(this.logoCrop);\r\n            this.scene.tweens.add({\r\n                targets: this.logoCrop,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                y: crop.y,\r\n                height: crop.height,\r\n                onUpdate: function () {\r\n                    _this.logo.setCrop(_this.logoCrop);\r\n                },\r\n            });\r\n        };\r\n        LoadingLogo.prototype.getLogoCropParams = function (loadProgress) {\r\n            var originalHeight = this.logo.height;\r\n            var height = originalHeight * Math.max(0.001, loadProgress); // because canvas renderer fails when cropHeight is zero\r\n            return {\r\n                height: height,\r\n                y: originalHeight - height,\r\n            };\r\n        };\r\n        LoadingLogo.prototype.getWidth = function () {\r\n            return this.logoBack.width;\r\n        };\r\n        return LoadingLogo;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LoadingLogo = LoadingLogo;\r\n})(game || (game = {}));\r\n///<reference path='LoadingLogo.ts' />\r\nvar game;\r\n(function (game) {\r\n    var NetUtil = utils.NetUtil;\r\n    var Preloader = /** @class */ (function (_super) {\r\n        __extends(Preloader, _super);\r\n        function Preloader() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Preloader.prototype.init = function () {\r\n            this.events.on(\"shutdown\", this.shutdown, this);\r\n            this.addBackground();\r\n            this.addLogo();\r\n            this.addCopyright();\r\n            this.events.on(Phaser.Scenes.Events.UPDATE, this.scrollBackground, this);\r\n            this.resize();\r\n        };\r\n        Preloader.prototype.addBackground = function () {\r\n            this.background = this.add.tileSprite(0, 0, 0, 0, \"preloader\", \"bg\");\r\n        };\r\n        Preloader.prototype.addLogo = function () {\r\n            this.logo = new game.LoadingLogo(this);\r\n            this.add.existing(this.logo);\r\n        };\r\n        Preloader.prototype.addCopyright = function () {\r\n            var content = this.getCopyrightContent();\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"28px\",\r\n                color: \"#FDF2E7\",\r\n                align: \"center\",\r\n            };\r\n            this.copyright = this.add.text(0, 0, content, style);\r\n            this.copyright.setOrigin(0.5, 1);\r\n            this.copyright.setShadow(0, 2, \"rgba(0,0,0,0.2)\");\r\n            this.copyright.visible = utils.NetUtil.isHostAllowed([\"192.168\", \"localhost\", \"robowhale.com\"]);\r\n            this.copyright.kill();\r\n        };\r\n        Preloader.prototype.getCopyrightContent = function () {\r\n            var developmentYear = 2020;\r\n            var currentYear = new Date().getUTCFullYear();\r\n            var years = currentYear === developmentYear ? currentYear.toString() : developmentYear + \"-\" + currentYear;\r\n            return \"Developed by RoboWhale, \" + years + \"\\nUse with permission\";\r\n        };\r\n        Preloader.prototype.preload = function () {\r\n            this.analytics.sendLoadingEvent(\"main\", \"start\");\r\n            this.poki.sdk.gameLoadingStart();\r\n            this.game.loadingOverlay.fadeOut();\r\n            this.load.maxParallelDownloads = this.game.device.os.android ? 6 : 32;\r\n            this.load.cacheBuster = window.game.config.build_version;\r\n            this.load.on(Phaser.Loader.Events.PROGRESS, this.onLoadProgress, this);\r\n            this.load.on(Phaser.Loader.Events.COMPLETE, this.onLoadComplete, this);\r\n            this.loadOtherAssets();\r\n            this.loadFonts();\r\n            this.loadAudio();\r\n            this.loadGraphics();\r\n            this.loadEditor();\r\n            this.loadSaveData();\r\n        };\r\n        Preloader.prototype.onLoadProgress = function () {\r\n            this.logo.setProgress(this.load.progress);\r\n        };\r\n        Preloader.prototype.onLoadComplete = function () {\r\n            this.load.off(Phaser.Loader.Events.FILE_COMPLETE, this.onLoadProgress, this);\r\n        };\r\n        Preloader.prototype.loadOtherAssets = function () {\r\n            this.load.json(\"texts\", \"assets/texts.json\");\r\n            this.loadLevelConfigs();\r\n            this.loadLevelsMapConfig();\r\n        };\r\n        Preloader.prototype.loadLevelConfigs = function () {\r\n            var _a;\r\n            var loadRemote = utils.NetUtil.getParamBool(\"loadRemote\");\r\n            var filename = (_a = utils.NetUtil.getParam(\"levelsFile\")) !== null && _a !== void 0 ? _a : \"levels\";\r\n            var fullFilename = filename + \".json\";\r\n            var url = loadRemote ? game.Config.SERVER_URL + fullFilename : \"assets/configs/\" + fullFilename;\r\n            this.load.json(\"levels\", url);\r\n        };\r\n        Preloader.prototype.loadLevelsMapConfig = function () {\r\n            var loadRemote = utils.NetUtil.getParamBool(\"loadRemote\");\r\n            var url = loadRemote\r\n                ? game.Config.SERVER_URL + \"levels_map.json\"\r\n                : \"assets/configs/levels_map_config.json\";\r\n            this.load.json(game.LevelsMap.CONFIG_KEY, url);\r\n        };\r\n        Preloader.prototype.loadFonts = function () {\r\n            this.load.bitmapFontFromAtlas(game.BitmapGameFont.LEVELS_MAP_NUMBERS_COMPLETE, \"levels_map\", \"level_icons_font_complete\", \"assets/fonts/bitmap/level_icons_font_complete.fnt\");\r\n            this.load.bitmapFontFromAtlas(game.BitmapGameFont.LEVELS_MAP_NUMBERS_UNLOCKED, \"levels_map\", \"level_icons_font_unlocked\", \"assets/fonts/bitmap/level_icons_font_unlocked.fnt\");\r\n        };\r\n        Preloader.prototype.loadAudio = function () {\r\n            this.load.audio(game.GameSoundKey.MENU_LOOP, \"assets/audio/menu_loop.mp3\");\r\n            if (this.game.audioType === game.SoundManagerType.WEB_AUDIO) {\r\n                this.load.audio(game.GameSoundKey.TAP, \"assets/audio/tap.mp3\");\r\n            }\r\n        };\r\n        Preloader.prototype.loadGraphics = function () {\r\n            this.load.image(\"levels_map_bg_1\", \"assets/graphics/levels_map_bg_1.jpg\");\r\n            this.load.image(\"levels_map_bg_2\", \"assets/graphics/levels_map_bg_2.jpg\");\r\n            this.load.image(\"levels_map_bg_3\", \"assets/graphics/levels_map_bg_3.jpg\");\r\n            this.load.atlas(\"levels_map\", \"assets/graphics/levels_map.png\", \"assets/graphics/levels_map.json\");\r\n        };\r\n        Preloader.prototype.loadEditor = function () {\r\n            if (game.Main.editorEnabled === false) {\r\n                return;\r\n            }\r\n            this.load.script(\"tweakpane\", \"js/tweakpane.min.js\");\r\n            this.load.atlas(\"editor\", \"assets/graphics/editor.png\", \"assets/graphics/editor.json\");\r\n            this.load.bitmapFontFromAtlas(game.BitmapGameFont.EDITOR_BLOCK_LIVES, \"editor\", \"block_lives\", \"assets/fonts/bitmap/block_lives.fnt\", -1);\r\n            this.load.bitmapFontFromAtlas(game.BitmapGameFont.EDITOR_ROW_NUMBERS, \"editor\", \"row_numbers\", \"assets/fonts/bitmap/row_numbers.fnt\", -1);\r\n        };\r\n        Preloader.prototype.loadSaveData = function () {\r\n            var _this = this;\r\n            this.load.rexAwait(\"init_game_store\", {\r\n                callback: function (onSuccess) {\r\n                    _this.game.store.initActualStorage()\r\n                        .catch(function (error) {\r\n                        _this.sendStorageErrorToAnalytics(error);\r\n                    })\r\n                        .finally(function () { return __awaiter(_this, void 0, void 0, function () {\r\n                        return __generator(this, function (_a) {\r\n                            switch (_a.label) {\r\n                                case 0: return [4 /*yield*/, this.game.store.loadInitialValues()];\r\n                                case 1:\r\n                                    _a.sent();\r\n                                    return [4 /*yield*/, this.game.store.migrateSaveData()];\r\n                                case 2:\r\n                                    _a.sent();\r\n                                    onSuccess();\r\n                                    return [2 /*return*/];\r\n                            }\r\n                        });\r\n                    }); });\r\n                },\r\n            });\r\n        };\r\n        Preloader.prototype.sendStorageErrorToAnalytics = function (error) {\r\n            var _a;\r\n            var errorText = error instanceof DOMException\r\n                ? error.message\r\n                : error.toString();\r\n            (_a = this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendError(\"LocalStorage:\" + errorText);\r\n        };\r\n        Preloader.prototype.create = function () {\r\n            this.addSidebards();\r\n            this.initTexts();\r\n            this.initBoosters();\r\n            this.initLevelConfigs();\r\n            this.addIngamePreloader();\r\n            this.addScenesTransition();\r\n            this.addToasts();\r\n            this.initAudio(); // audio should be init only after scene transition is ready\r\n            this.initDelayedLoader();\r\n            this.poki.sdk.gameLoadingFinished();\r\n            this.analytics.sendLoadingEvent(\"main\", \"complete\");\r\n            this.startGame();\r\n        };\r\n        Preloader.prototype.addSidebards = function () {\r\n            this.setSidebackground(\"left-sidebar\", \"page_left_sidebar\");\r\n            this.setSidebackground(\"right-sidebar\", \"page_right_sidebar\");\r\n        };\r\n        Preloader.prototype.setSidebackground = function (sidebarId, imageKey) {\r\n            var sidebar = document.getElementById(sidebarId);\r\n            if (!sidebar) {\r\n                return;\r\n            }\r\n            var format = this.game.getDefaultImageFormat(\"png\");\r\n            var file = imageKey + \".\" + format;\r\n            sidebar.style.backgroundImage = \"url('assets/graphics/\" + file + \"')\";\r\n        };\r\n        Preloader.prototype.initTexts = function () {\r\n            this.game.texts = new game.GameTexts(this.game);\r\n            this.game.texts.injectTextsIntoScenes();\r\n        };\r\n        Preloader.prototype.initBoosters = function () {\r\n            this.game.boosters = new game.BoostersManager(this.game);\r\n            var cheatBoosters = utils.NetUtil.getParamBool(\"boosters\");\r\n            if (cheatBoosters) {\r\n                this.game.boosters.boosters.forEach(function (booster) {\r\n                    booster.num = 99;\r\n                });\r\n            }\r\n        };\r\n        Preloader.prototype.initLevelConfigs = function () {\r\n            var configs = this.cache.json.get(\"levels\");\r\n            this.game.levelConfigs = new game.LevelConfigsManager(configs);\r\n        };\r\n        Preloader.prototype.initAudio = function () {\r\n            var audio = new game.GameAudio(this.game.globalScene);\r\n            audio.loadMute();\r\n            audio.addMenuLoop();\r\n            audio.listenToScenesChange(this.game.globalScene.sceneTransition);\r\n            this.game.audio = audio;\r\n        };\r\n        Preloader.prototype.initDelayedLoader = function () {\r\n            this.game.globalScene.addDelayedLoader();\r\n            this.game.globalScene.delayedLoader.startLoading();\r\n        };\r\n        Preloader.prototype.addIngamePreloader = function () {\r\n            this.game.globalScene.addIngamePreloader();\r\n        };\r\n        Preloader.prototype.addScenesTransition = function () {\r\n            var transition = new game.CanvasSceneTransition(this.game.globalScene, \"preloader\", \"black_rect\");\r\n            this.game.globalScene.addSceneTranstion(transition);\r\n            this.game.globalScene.sceneTransition.instantChange = utils.NetUtil.getParamBool(\"instantSceneChange\");\r\n            this.game.raven.trackSceneChanges(transition);\r\n        };\r\n        Preloader.prototype.addToasts = function () {\r\n            this.game.toasts = this.game.globalScene.addToasts();\r\n        };\r\n        Preloader.prototype.startGame = function () {\r\n            if (window.environment === GameEnvironment.DEVELOP) {\r\n                this.startGameOnDev();\r\n            }\r\n            else {\r\n                this.startGameOnDeploy();\r\n            }\r\n        };\r\n        Preloader.prototype.startGameOnDev = function () {\r\n            var level = NetUtil.getParamInt(\"level\");\r\n            if (level > 0 && this.game.levelConfigs.check(level)) {\r\n                this.startScene(game.SceneKey.GAMEPLAY_ROOT, { levelNumber: level });\r\n                return;\r\n            }\r\n            var levelEditor = NetUtil.getParamInt(\"levelEditor\");\r\n            if (levelEditor > 0 && this.game.levelConfigs.check(levelEditor)) {\r\n                this.startScene(game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: levelEditor });\r\n                return;\r\n            }\r\n            this.startScene(game.SceneKey.LEVELS_MAP);\r\n            // this.startScene(SceneKey.LEVELS_MAP_DEV)\r\n            // this.startScene(SceneKey.GAMEPLAY_ROOT, { levelNumber: this.getLevelFromUrl() || 41 })\r\n            // this.startScene(SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: this.getLevelFromUrl() || 45 })\r\n            // this.startScene(SceneKey.TUTORIAL_EDITOR, { levelNumber: 5 })\r\n            // this.startScene(SceneKey.LEVELS_MAP_EDITOR)\r\n        };\r\n        Preloader.prototype.startGameOnDeploy = function () {\r\n            if (game.Main.editorEnabled) {\r\n                this.startScene(game.SceneKey.LEVELS_MAP_DEV);\r\n                return;\r\n            }\r\n            var levelNumber = this.getLevelFromUrl();\r\n            if (levelNumber) {\r\n                this.startScene(game.SceneKey.GAMEPLAY_ROOT, { levelNumber: levelNumber });\r\n            }\r\n            else {\r\n                this.startScene(game.SceneKey.LEVELS_MAP);\r\n            }\r\n        };\r\n        Preloader.prototype.getLevelFromUrl = function () {\r\n            var levelNumber = utils.NetUtil.getParam(\"level\");\r\n            if (levelNumber === null) {\r\n                return null;\r\n            }\r\n            return parseInt(levelNumber);\r\n        };\r\n        Preloader.prototype.startScene = function (scene, data) {\r\n            var isEditorScene = [game.SceneKey.LEVELS_MAP_DEV, game.SceneKey.LEVEL_EDITOR_ROOT, game.SceneKey.LEVELS_MAP_EDITOR, game.SceneKey.TUTORIAL_EDITOR].includes(scene);\r\n            if (isEditorScene && game.Main.editorEnabled === false) {\r\n                console.warn(\"Can't start \" + scene + \" scene. Add editor=1 to enable editor!\");\r\n                return;\r\n            }\r\n            this.game.changeScene(this.scene.key, scene, data);\r\n        };\r\n        Preloader.prototype.scrollBackground = function (time, delta) {\r\n            this.background.tilePositionY += 0.066 * delta;\r\n        };\r\n        Preloader.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.alignLogo();\r\n            this.alignCopyright();\r\n        };\r\n        Preloader.prototype.resizeBackground = function () {\r\n            this.background.envelop(game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        Preloader.prototype.alignLogo = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.45;\r\n            this.logo.scale = Math.min(1, maxWidth / this.logo.getWidth());\r\n            this.logo.x = game.Config.HALF_GAME_WIDTH;\r\n            this.logo.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        Preloader.prototype.alignCopyright = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.66;\r\n            this.copyright.scale = 1;\r\n            this.copyright.scale = Math.min(1, maxWidth / this.copyright.width);\r\n            this.copyright.x = game.Config.HALF_GAME_WIDTH;\r\n            this.copyright.y = game.Config.GAME_HEIGHT - 20;\r\n        };\r\n        Preloader.prototype.shutdown = function () {\r\n            this.events.off(Phaser.Scenes.Events.UPDATE, this.scrollBackground, this);\r\n        };\r\n        return Preloader;\r\n    }(Phaser.Scene));\r\n    game.Preloader = Preloader;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorCell = /** @class */ (function (_super) {\r\n        __extends(EditorCell, _super);\r\n        function EditorCell(scene, texture, frame, column, row) {\r\n            var _this = _super.call(this, scene, 0, 0, texture, frame) || this;\r\n            _this.originalAlpha = 1;\r\n            _this._isSelected = false;\r\n            _this._column = column;\r\n            _this._row = row;\r\n            _this.name = \"cell\";\r\n            _this.setInteractive();\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER, _this.onPointerOver, _this);\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT, _this.onPointerOut, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(EditorCell.prototype, \"isSelected\", {\r\n            get: function () {\r\n                return this._isSelected;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EditorCell.prototype, \"row\", {\r\n            get: function () {\r\n                return this._row;\r\n            },\r\n            set: function (value) {\r\n                this._row = value;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EditorCell.prototype, \"column\", {\r\n            get: function () {\r\n                return this._column;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        EditorCell.prototype.onPointerOver = function () {\r\n            this.scale = 1.2;\r\n        };\r\n        EditorCell.prototype.onPointerOut = function () {\r\n            this.scale = 1;\r\n        };\r\n        EditorCell.prototype.getSelectedAlpha = function () {\r\n            return this.originalAlpha * 3;\r\n        };\r\n        EditorCell.prototype.setSelected = function (value) {\r\n            if (this._isSelected === value) {\r\n                return;\r\n            }\r\n            this._isSelected = value;\r\n            if (this._isSelected) {\r\n                this.setFrame(\"cell_with_plus\");\r\n                this.alpha = this.getSelectedAlpha();\r\n            }\r\n            else {\r\n                this.setFrame(\"cell\");\r\n                this.alpha = this.originalAlpha;\r\n            }\r\n        };\r\n        EditorCell.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return EditorCell;\r\n    }(Phaser.GameObjects.Image));\r\n    game.EditorCell = EditorCell;\r\n})(game || (game = {}));\r\n///<reference path='EditorCell.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EditorGridEvent;\r\n    (function (EditorGridEvent) {\r\n        EditorGridEvent[\"ADD_ROW\"] = \"add_row\";\r\n        EditorGridEvent[\"REMOVE_ROW\"] = \"remove_row\";\r\n    })(EditorGridEvent = game.EditorGridEvent || (game.EditorGridEvent = {}));\r\n    var EditorGrid = /** @class */ (function (_super) {\r\n        __extends(EditorGrid, _super);\r\n        function EditorGrid(scene, columns, rows) {\r\n            var _this = _super.call(this, scene) || this;\r\n            scene.add.existing(_this);\r\n            _this.editor = _this.scene;\r\n            _this.selectedCells = [];\r\n            _this.rowLabels = [];\r\n            _this.removeRowButtons = [];\r\n            _this.name = \"grid\";\r\n            _this.initialColumns = columns;\r\n            _this.initialRows = rows;\r\n            _this._columns = columns;\r\n            _this._rows = 0;\r\n            _this.addInitialRows();\r\n            _this.addVisibleRowsSeparator();\r\n            _this.addColumnLabels();\r\n            _this.addAddRowButton();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(EditorGrid.prototype, \"columns\", {\r\n            get: function () {\r\n                return this._columns;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(EditorGrid.prototype, \"rows\", {\r\n            get: function () {\r\n                return this._rows;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        EditorGrid.prototype.addSelectedCell = function (cell) {\r\n            cell.setSelected(true);\r\n            this.lastSelectedCell = cell;\r\n            this.selectedCells.push(cell);\r\n        };\r\n        EditorGrid.prototype.removeSelectedCell = function (cell) {\r\n            cell.setSelected(false);\r\n            _.pull(this.selectedCells, cell);\r\n            if (this.lastSelectedCell === cell) {\r\n                this.lastSelectedCell = null;\r\n            }\r\n        };\r\n        EditorGrid.prototype.resetSelectedCells = function () {\r\n            this.selectedCells.forEach(function (cell) {\r\n                cell.setSelected(false);\r\n            });\r\n            this.lastSelectedCell = null;\r\n            this.selectedCells.length = 0;\r\n        };\r\n        EditorGrid.prototype.addInitialRows = function () {\r\n            this.cells = [];\r\n            _.times(this.initialRows, this.addRow.bind(this));\r\n        };\r\n        EditorGrid.prototype.addRow = function () {\r\n            this.addRowOfCells(this._rows);\r\n            this.addRowLabel(this._rows);\r\n            this.addRemoveRowButton(this._rows);\r\n            this._rows++;\r\n            this.emit(EditorGridEvent.ADD_ROW, this, this._rows);\r\n        };\r\n        EditorGrid.prototype.addRowOfCells = function (rowNumber) {\r\n            var _this = this;\r\n            _.times(this._columns, function (index) {\r\n                _this.addCell(index, rowNumber);\r\n            });\r\n        };\r\n        EditorGrid.prototype.addCell = function (column, row) {\r\n            var cell = new game.EditorCell(this.scene, \"editor\", \"cell\", column, row);\r\n            cell.x = EditorGrid.CELL_SIZE / 2 + column * EditorGrid.CELL_SIZE;\r\n            cell.y = -EditorGrid.CELL_SIZE / 2 - row * EditorGrid.CELL_SIZE;\r\n            cell.alpha = 0.2;\r\n            cell.originalAlpha = cell.alpha;\r\n            this.cells.push(cell);\r\n            this.add(cell);\r\n            return cell;\r\n        };\r\n        EditorGrid.prototype.addVisibleRowsSeparator = function () {\r\n            var y = -game.GameGrid.ROWS * game.GameGrid.CELL_SIZE;\r\n            var line = this.scene.add.line(this.getWidth() / 2, 0, 0, y, this.getWidth(), y, 0xffffff);\r\n            line.setLineWidth(6);\r\n            this.addAt(line, 0);\r\n        };\r\n        EditorGrid.prototype.addColumnLabels = function () {\r\n            var _this = this;\r\n            _.times(this._columns, function (column) {\r\n                var content = column.toString();\r\n                var label = _this.scene.add.bitmapText(0, 0, game.BitmapGameFont.EDITOR_ROW_NUMBERS, content, 28, Phaser.RIGHT);\r\n                label.x = column * EditorGrid.CELL_SIZE + EditorGrid.CELL_SIZE / 2;\r\n                label.y = 20;\r\n                label.setData(\"column\", column);\r\n                _this.add(label);\r\n                label.setInteractive();\r\n                label.input.cursor = \"pointer\";\r\n                label.setData(\"type\", \"column_label\");\r\n                return label;\r\n            });\r\n        };\r\n        EditorGrid.prototype.addRowLabel = function (rowNumber) {\r\n            var content = rowNumber.toString();\r\n            var label = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.EDITOR_ROW_NUMBERS, content, 28, Phaser.RIGHT);\r\n            label.setOrigin(1, 0.5);\r\n            label.x = -16;\r\n            label.y = -rowNumber * EditorGrid.CELL_SIZE - EditorGrid.CELL_SIZE / 2 + 4;\r\n            label.setData(\"row\", rowNumber);\r\n            this.add(label);\r\n            this.rowLabels.push(label);\r\n            label.setInteractive();\r\n            label.input.cursor = \"pointer\";\r\n            label.setData(\"type\", \"row_label\");\r\n            return label;\r\n        };\r\n        EditorGrid.prototype.addRemoveRowButton = function (rowNumber) {\r\n            var button = this.scene.add.button(\"editor\", \"remove_row_button\", this);\r\n            button.on(Phaser.GameObjects.ButtonEvent.RELEASE, this.onRemoveRowButtonClick, this);\r\n            button.setData(\"row\", rowNumber);\r\n            button.x = this.getWidth() + button.displayWidth / 2 + 10;\r\n            button.y = -rowNumber * EditorGrid.CELL_SIZE - EditorGrid.CELL_SIZE / 2;\r\n            this.removeRowButtons.push(button);\r\n        };\r\n        EditorGrid.prototype.onRemoveRowButtonClick = function (button) {\r\n            if (this._rows <= game.GameGrid.ROWS) {\r\n                console.warn(\"Should be at least \" + game.GameGrid.ROWS + \" rows!\");\r\n                return;\r\n            }\r\n            var rowNumber = button.getData(\"row\");\r\n            this.removeRow(rowNumber);\r\n        };\r\n        EditorGrid.prototype.removeRow = function (rowNumber) {\r\n            this.removeCellsByRow(rowNumber);\r\n            this.removeRowLabel(rowNumber);\r\n            this.removeRemoveRowButton(rowNumber);\r\n            this.updateRowsAbove(rowNumber);\r\n            this._rows--;\r\n            this.alignAddRowButton();\r\n            this.emit(EditorGridEvent.REMOVE_ROW, rowNumber);\r\n        };\r\n        EditorGrid.prototype.removeCellsByRow = function (rowNumber) {\r\n            var cellsToRemove = this.cells.filter(function (cell) { return cell.row === rowNumber; });\r\n            cellsToRemove.forEach(function (cell) { return cell.destroy(); });\r\n            _.pull.apply(_, __spreadArrays([this.cells], cellsToRemove));\r\n        };\r\n        EditorGrid.prototype.removeRowLabel = function (rowNumber) {\r\n            var indexToRemove = this.rowLabels.findIndex(function (label) { return label.getData(\"row\") === rowNumber; });\r\n            if (indexToRemove === -1) {\r\n                return;\r\n            }\r\n            this.rowLabels[indexToRemove].destroy();\r\n            this.rowLabels.splice(indexToRemove, 1);\r\n        };\r\n        EditorGrid.prototype.removeRemoveRowButton = function (rowNumber) {\r\n            var indexToRemove = this.removeRowButtons.findIndex(function (button) { return button.getData(\"row\") === rowNumber; });\r\n            if (indexToRemove === -1) {\r\n                return;\r\n            }\r\n            this.removeRowButtons[indexToRemove].destroy();\r\n            this.removeRowButtons.splice(indexToRemove, 1);\r\n        };\r\n        EditorGrid.prototype.addAddRowButton = function () {\r\n            this.addRowButton = this.scene.add.button(\"editor\", \"add_row_button\", this);\r\n            this.addRowButton.on(Phaser.GameObjects.ButtonEvent.RELEASE, this.onAddRowClick, this);\r\n            this.alignAddRowButton();\r\n        };\r\n        EditorGrid.prototype.alignAddRowButton = function () {\r\n            this.addRowButton.x = this.getWidth() / 2;\r\n            this.addRowButton.y = -EditorGrid.CELL_SIZE / 2 - this._rows * EditorGrid.CELL_SIZE;\r\n        };\r\n        EditorGrid.prototype.onAddRowClick = function () {\r\n            var rowsToAdd = this.editor.shiftKey.isDown ? 5 : 1;\r\n            for (var i = 0; i < rowsToAdd; i++) {\r\n                this.addRow();\r\n                this.alignAddRowButton();\r\n            }\r\n        };\r\n        EditorGrid.prototype.getWidth = function () {\r\n            return this._columns * EditorGrid.CELL_SIZE;\r\n        };\r\n        EditorGrid.prototype.getHeight = function () {\r\n            return this._rows * EditorGrid.CELL_SIZE;\r\n        };\r\n        EditorGrid.prototype.getDisplayWidth = function () {\r\n            return this.initialColumns * EditorGrid.CELL_SIZE;\r\n        };\r\n        EditorGrid.prototype.getCellAt = function (row, column) {\r\n            return this.cells.find(function (cell) { return cell.row === row && cell.column === column; });\r\n        };\r\n        EditorGrid.prototype.getCellAtXY = function (x, y) {\r\n            var row = Math.floor(y / EditorGrid.CELL_SIZE);\r\n            var column = Math.floor(x / EditorGrid.CELL_SIZE);\r\n            return this.getCellAt(row, column);\r\n        };\r\n        EditorGrid.prototype.getRandomColumns = function (num) {\r\n            var allColumns = _.times(this._columns);\r\n            return Phaser.Math.RND.shuffle(allColumns).slice(0, num);\r\n        };\r\n        EditorGrid.prototype.updateRowsAbove = function (rowNumber) {\r\n            var _this = this;\r\n            this.cells\r\n                .filter(function (cell) { return cell.row > rowNumber; })\r\n                .forEach(function (cell) {\r\n                cell.row--;\r\n                cell.y = _this.getYByRow(cell.row);\r\n            });\r\n            this.rowLabels\r\n                .filter(function (label) { return label.getData(\"row\") > rowNumber; })\r\n                .forEach(function (label) {\r\n                var newRow = label.getData(\"row\") - 1;\r\n                label.setData(\"row\", newRow);\r\n                label.y = _this.getYByRow(newRow);\r\n                label.text = newRow.toString();\r\n            });\r\n            this.removeRowButtons\r\n                .filter(function (button) { return button.getData(\"row\") > rowNumber; })\r\n                .forEach(function (button) {\r\n                var newRow = button.getData(\"row\") - 1;\r\n                button.setData(\"row\", newRow);\r\n                button.y = _this.getYByRow(newRow);\r\n            });\r\n        };\r\n        EditorGrid.prototype.getYByRow = function (row) {\r\n            return -EditorGrid.CELL_SIZE / 2 - row * EditorGrid.CELL_SIZE;\r\n        };\r\n        EditorGrid.prototype.addSelectedRow = function (rowNumber) {\r\n            var _this = this;\r\n            this.cells.filter(function (cell) { return cell.row === rowNumber; }).forEach(function (cell) { return _this.addSelectedCell(cell); });\r\n        };\r\n        EditorGrid.prototype.hasRow = function (rowNumber) {\r\n            return this.cells.some(function (cell) { return cell.row === rowNumber; });\r\n        };\r\n        EditorGrid.CELL_SIZE = 100;\r\n        return EditorGrid;\r\n    }(Phaser.GameObjects.Container));\r\n    game.EditorGrid = EditorGrid;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ItemIconsGrid = /** @class */ (function (_super) {\r\n        __extends(ItemIconsGrid, _super);\r\n        function ItemIconsGrid(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.itemTypes = game.ItemTypeUtil.getAllTypes();\r\n            _this.cellSize = 120;\r\n            _this.name = \"item_icons\";\r\n            _this.addIcons();\r\n            _this.alignIcons();\r\n            return _this;\r\n        }\r\n        ItemIconsGrid.prototype.addIcons = function () {\r\n            var _this = this;\r\n            this.icons = this.itemTypes.map(function (itemType) {\r\n                var frame = game.ItemTypeUtil.getFrameName(itemType);\r\n                var icon = _this.scene.add.image(0, 0, \"editor\", frame);\r\n                icon.setData(\"type\", \"add_item_icon\");\r\n                icon.setData(game.ITEM_TYPE, itemType);\r\n                icon.setInteractive();\r\n                icon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER, _this.onPointerOver.bind(_this, icon));\r\n                icon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT, _this.onPointerOut.bind(_this, icon));\r\n                icon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.onPointerDown.bind(_this, icon));\r\n                return icon;\r\n            });\r\n            this.add(this.icons);\r\n        };\r\n        ItemIconsGrid.prototype.alignIcons = function () {\r\n            Phaser.Actions.GridAlign(this.icons, {\r\n                width: 5,\r\n                position: Phaser.Display.Align.CENTER,\r\n                cellWidth: this.cellSize,\r\n                cellHeight: this.cellSize,\r\n                x: this.cellSize / 2,\r\n                y: this.cellSize / 2,\r\n            });\r\n        };\r\n        ItemIconsGrid.prototype.onPointerOver = function (icon) {\r\n            icon.scale = 1.1;\r\n        };\r\n        ItemIconsGrid.prototype.onPointerOut = function (icon) {\r\n            icon.scale = 1;\r\n        };\r\n        ItemIconsGrid.prototype.onPointerDown = function (icon) { };\r\n        ItemIconsGrid.prototype.updateEnabledItems = function (allowedTypes) {\r\n            this.icons.forEach(function (icon) {\r\n                var isTypeAllowed = allowedTypes.includes(icon.getData(game.ITEM_TYPE));\r\n                icon.visible = isTypeAllowed;\r\n            });\r\n            this.icons = Phaser.Utils.Array.StableSort(this.icons, this.sortByVisible.bind(this));\r\n            this.alignIcons();\r\n            this.emit(\"resize\");\r\n        };\r\n        ItemIconsGrid.prototype.sortByVisible = function (a, b) {\r\n            var an = a.visible ? 1 : 0;\r\n            var bn = b.visible ? 1 : 0;\r\n            return bn - an;\r\n        };\r\n        ItemIconsGrid.prototype.getRealBounds = function () {\r\n            var visibleIcons = this.icons.filter(function (icon) { return icon.visible; });\r\n            if (visibleIcons.length === 0) {\r\n                return { width: 0, height: 0 };\r\n            }\r\n            var leftIcon = _.minBy(visibleIcons, \"x\");\r\n            var rightIcon = _.maxBy(visibleIcons, \"x\");\r\n            var topIcon = _.minBy(visibleIcons, \"y\");\r\n            var bottomIcon = _.maxBy(visibleIcons, \"y\");\r\n            var left = leftIcon.x - this.cellSize / 2;\r\n            var right = rightIcon.x + this.cellSize / 2;\r\n            var top = topIcon.y - this.cellSize / 2;\r\n            var bottom = bottomIcon.y + this.cellSize / 2;\r\n            return {\r\n                width: right - left,\r\n                height: bottom - top,\r\n            };\r\n        };\r\n        return ItemIconsGrid;\r\n    }(Phaser.GameObjects.Container));\r\n    game.ItemIconsGrid = ItemIconsGrid;\r\n})(game || (game = {}));\r\n///<reference path='ItemIconsGrid.ts' />\r\nvar game;\r\n(function (game) {\r\n    var AddItemPanel = /** @class */ (function (_super) {\r\n        __extends(AddItemPanel, _super);\r\n        function AddItemPanel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"add_block_panel\";\r\n            _this.addBack();\r\n            _this.addIcons();\r\n            _this.alignIcons();\r\n            return _this;\r\n        }\r\n        AddItemPanel.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"editor\", \"add_block_back\");\r\n            this.back.setOrigin(0.5, 1);\r\n            this.add(this.back);\r\n        };\r\n        AddItemPanel.prototype.addIcons = function () {\r\n            this.icons = new game.ItemIconsGrid(this.scene);\r\n            this.icons.on(\"resize\", this.alignIcons, this);\r\n            this.add(this.icons);\r\n        };\r\n        AddItemPanel.prototype.alignIcons = function () {\r\n            this.icons.setScale(1);\r\n            var iconsBounds = this.icons.getRealBounds();\r\n            var iconsWidth = iconsBounds.width;\r\n            var iconsHeight = iconsBounds.height;\r\n            var backHeigth = 270;\r\n            var maxWidth = this.back.width * 0.9;\r\n            var maxHeight = backHeigth * 0.9;\r\n            var scaleX = maxWidth / iconsWidth;\r\n            var scaleY = maxHeight / iconsHeight;\r\n            this.icons.scale = Math.min(1, scaleX, scaleY);\r\n            var topLeft = this.back.getTopLeft();\r\n            this.icons.x = topLeft.x + (this.back.width - iconsWidth * this.icons.scale) / 2;\r\n            this.icons.y = topLeft.y + (backHeigth - iconsHeight * this.icons.scale) / 2;\r\n        };\r\n        AddItemPanel.prototype.revive = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n        };\r\n        AddItemPanel.prototype.kill = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        AddItemPanel.prototype.show = function () {\r\n            this.revive();\r\n            this.alpha = 0;\r\n            this.scale = 0.75;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scale: 1,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        AddItemPanel.prototype.hide = function () {\r\n            this.kill();\r\n        };\r\n        AddItemPanel.prototype.updateIcons = function (allowedTypes) {\r\n            this.icons.updateEnabledItems(allowedTypes);\r\n        };\r\n        return AddItemPanel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.AddItemPanel = AddItemPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorItemParam;\r\n    (function (EditorItemParam) {\r\n        EditorItemParam[\"HEALTH\"] = \"health\";\r\n        EditorItemParam[\"FRAME\"] = \"frame\";\r\n    })(EditorItemParam = game.EditorItemParam || (game.EditorItemParam = {}));\r\n    var EditorItemEvent;\r\n    (function (EditorItemEvent) {\r\n        EditorItemEvent[\"SELECTED\"] = \"selected\";\r\n        EditorItemEvent[\"DESELECTED\"] = \"deselected\";\r\n        EditorItemEvent[\"PARAMS_CHANGED\"] = \"params_changed\";\r\n    })(EditorItemEvent = game.EditorItemEvent || (game.EditorItemEvent = {}));\r\n    var EditorItem = /** @class */ (function (_super) {\r\n        __extends(EditorItem, _super);\r\n        function EditorItem(scene, atlas, itemType) {\r\n            var _this = _super.call(this, scene, 0, 0, atlas, game.ItemTypeUtil.getFrameName(itemType)) || this;\r\n            _this._isSelected = false;\r\n            _this.manuallyAdded = false;\r\n            _this.params = {};\r\n            _this.itemType = itemType;\r\n            _this.setData(\"type\", \"item\");\r\n            _this.setInteractive();\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER, _this.onPointerOver, _this);\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT, _this.onPointerOut, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(EditorItem.prototype, \"isSelected\", {\r\n            get: function () {\r\n                return this._isSelected;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        EditorItem.prototype.loadParams = function (params) {\r\n            var _this = this;\r\n            Object.keys(params).forEach(function (key) {\r\n                _this.updateParams(key, params[key]);\r\n            });\r\n        };\r\n        EditorItem.prototype.updateParams = function (key, value) {\r\n            this.params[key] = value;\r\n            if (key === EditorItemParam.FRAME) {\r\n                this.setFrame(value);\r\n            }\r\n            this.emit(EditorItemEvent.PARAMS_CHANGED, this, key, value);\r\n        };\r\n        EditorItem.prototype.onPointerOver = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scale: 1.2,\r\n            });\r\n            this.parentContainer.bringToTop(this);\r\n        };\r\n        EditorItem.prototype.onPointerOut = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scale: 1,\r\n            });\r\n        };\r\n        EditorItem.prototype.setSelected = function (value) {\r\n            if (this._isSelected === value) {\r\n                return;\r\n            }\r\n            this._isSelected = value;\r\n            if (this._isSelected) {\r\n                this.emit(EditorItemEvent.SELECTED, this);\r\n            }\r\n            else {\r\n                this.emit(EditorItemEvent.DESELECTED, this);\r\n            }\r\n        };\r\n        EditorItem.prototype.getConfig = function () {\r\n            var params = __assign(__assign({}, this.params), (this.itemType === game.ItemType.TRIANGLE && { frame: this.frame.name }));\r\n            return __assign(__assign({}, (this.manuallyAdded && { manuallyAdded: true })), { column: this.column, row: this.row, type: this.itemType, params: params });\r\n        };\r\n        EditorItem.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return EditorItem;\r\n    }(Phaser.GameObjects.Image));\r\n    game.EditorItem = EditorItem;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorItemLivesCounter = /** @class */ (function (_super) {\r\n        __extends(EditorItemLivesCounter, _super);\r\n        function EditorItemLivesCounter(scene, item, blockOffset) {\r\n            var _this = _super.call(this, scene, 0, 0, game.BitmapGameFont.EDITOR_BLOCK_LIVES, item.params[game.EditorItemParam.HEALTH] || \"0\", 28) || this;\r\n            _this.setOrigin(0.5, 0.5);\r\n            _this.blockOffset = blockOffset;\r\n            _this.block = item;\r\n            _this.block.on(game.EditorItemEvent.PARAMS_CHANGED, _this.onItemParamsChanged, _this);\r\n            _this.block.on(Phaser.GameObjects.Events.DESTROY, _this.onBlockDestroy, _this);\r\n            _this.scene.events.on(\"postupdate\", _this.followBlock, _this);\r\n            return _this;\r\n        }\r\n        EditorItemLivesCounter.prototype.onItemParamsChanged = function (item, key, value) {\r\n            if (key === game.EditorItemParam.HEALTH) {\r\n                this.setText(value.toString());\r\n            }\r\n        };\r\n        EditorItemLivesCounter.prototype.onBlockDestroy = function () {\r\n            this.destroy();\r\n        };\r\n        EditorItemLivesCounter.prototype.followBlock = function () {\r\n            if (this.visible === false) {\r\n                return;\r\n            }\r\n            this.x = this.block.x + this.blockOffset.x;\r\n            this.y = this.block.y + this.blockOffset.y;\r\n        };\r\n        EditorItemLivesCounter.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.on(\"postupdate\", this.followBlock, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return EditorItemLivesCounter;\r\n    }(Phaser.GameObjects.BitmapText));\r\n    game.EditorItemLivesCounter = EditorItemLivesCounter;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorItemCopy = /** @class */ (function (_super) {\r\n        __extends(EditorItemCopy, _super);\r\n        function EditorItemCopy(scene, originalItem) {\r\n            var _this = _super.call(this, scene, 0, 0, originalItem.texture.key, originalItem.frame.name) || this;\r\n            _this.setTintFill(0xffffff);\r\n            _this.setAlpha(0.5);\r\n            _this.hide();\r\n            _this.originalItem = originalItem;\r\n            _this.originalItem.on(game.EditorItemEvent.SELECTED, _this.show, _this);\r\n            _this.originalItem.on(game.EditorItemEvent.DESELECTED, _this.hide, _this);\r\n            _this.originalItem.on(game.EditorItemEvent.PARAMS_CHANGED, _this.onItemParamChanged, _this);\r\n            _this.originalItem.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER, _this.onOriginalItemPointerOver, _this);\r\n            _this.originalItem.on(Phaser.GameObjects.Events.DESTROY, function () {\r\n                _this.destroy(false);\r\n            });\r\n            _this.scene.events.on(\"postupdate\", _this.followOriginalItem, _this);\r\n            return _this;\r\n        }\r\n        EditorItemCopy.prototype.onItemParamChanged = function (item, param, value) {\r\n            if (param === game.EditorItemParam.FRAME) {\r\n                this.setFrame(value);\r\n            }\r\n        };\r\n        EditorItemCopy.prototype.show = function () {\r\n            this.visible = true;\r\n            this.alpha = 0;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0.5,\r\n            });\r\n        };\r\n        EditorItemCopy.prototype.hide = function () {\r\n            this.visible = false;\r\n        };\r\n        EditorItemCopy.prototype.onOriginalItemPointerOver = function () {\r\n            this.parentContainer.bringToTop(this);\r\n        };\r\n        EditorItemCopy.prototype.followOriginalItem = function () {\r\n            if (this.visible === false) {\r\n                return;\r\n            }\r\n            this.x = this.originalItem.x;\r\n            this.y = this.originalItem.y;\r\n            this.scale = this.originalItem.scale;\r\n        };\r\n        EditorItemCopy.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.off(\"postupdate\", this.followOriginalItem, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return EditorItemCopy;\r\n    }(Phaser.GameObjects.Image));\r\n    game.EditorItemCopy = EditorItemCopy;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorPanel = /** @class */ (function () {\r\n        function EditorPanel(scene, title) {\r\n            this.scene = scene;\r\n            this.events = new Phaser.Events.EventEmitter();\r\n            this.panel = new Tweakpane({ title: title, container: document.getElementById(\"editor-panels\") });\r\n        }\r\n        EditorPanel.prototype.disableInput = function () {\r\n            this.panel.containerElem_.classList.add(\"disable-panel-input\");\r\n        };\r\n        EditorPanel.prototype.enableInput = function () {\r\n            this.panel.containerElem_.classList.remove(\"disable-panel-input\");\r\n        };\r\n        EditorPanel.prototype.refresh = function () {\r\n            this.panel.refresh();\r\n        };\r\n        EditorPanel.prototype.destroy = function () {\r\n            this.panel.dispose();\r\n        };\r\n        return EditorPanel;\r\n    }());\r\n    game.EditorPanel = EditorPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelConfigPanelEvent;\r\n    (function (LevelConfigPanelEvent) {\r\n        LevelConfigPanelEvent[\"AUTO_THROW_CHANGE\"] = \"AUTO_THROW_CHANGE\";\r\n    })(LevelConfigPanelEvent = game.LevelConfigPanelEvent || (game.LevelConfigPanelEvent = {}));\r\n    var LevelConfigPanel = /** @class */ (function (_super) {\r\n        __extends(LevelConfigPanel, _super);\r\n        function LevelConfigPanel(scene, levelConfig) {\r\n            var _this = _super.call(this, scene, \"Level \" + levelConfig.levelNumber) || this;\r\n            _this.levelConfig = levelConfig;\r\n            _this.panel.addInput(_this.levelConfig, \"balls\", { step: 1 });\r\n            _this.bgInput = _this.panel.addInput(_this.levelConfig, \"background\", { options: _this.getBackgrounds() });\r\n            _this.addAutoThrowFolder();\r\n            _this.addGiftsFolder();\r\n            _this.addButtons();\r\n            return _this;\r\n        }\r\n        LevelConfigPanel.prototype.getBackgrounds = function () {\r\n            return [\r\n                { text: \"green\", value: \"background_1\" },\r\n                { text: \"pink\", value: \"background_2\" },\r\n                { text: \"night\", value: \"background_3\" },\r\n            ];\r\n        };\r\n        LevelConfigPanel.prototype.addAutoThrowFolder = function () {\r\n            var autoThrowFolder = this.panel.addFolder({\r\n                title: \"Auto throw\",\r\n            });\r\n            autoThrowFolder.addInput(this.levelConfig.autoThrow, \"enabled\").on(\"change\", this.onAutoThrowChange.bind(this));\r\n            autoThrowFolder.addInput(this.levelConfig.autoThrow, \"fastForward\");\r\n            autoThrowFolder.addInput(this.levelConfig.autoThrow, \"snapping\");\r\n            autoThrowFolder.addInput(this.levelConfig.autoThrow, \"delay\", { min: 0, max: 1000, step: 50 });\r\n        };\r\n        LevelConfigPanel.prototype.onAutoThrowChange = function (value) {\r\n            this.events.emit(LevelConfigPanelEvent.AUTO_THROW_CHANGE, value);\r\n        };\r\n        LevelConfigPanel.prototype.addGiftsFolder = function () {\r\n            var giftsFolder = this.panel.addFolder({\r\n                title: \"Gifts\",\r\n            });\r\n            if (!this.levelConfig.gift) {\r\n                this.levelConfig.gift = this.createDefaultGiftConfig();\r\n            }\r\n            var giftConfig = this.levelConfig.gift;\r\n            Object.keys(giftConfig).forEach(function (boosterType) {\r\n                giftsFolder.addInput(giftConfig, boosterType, { min: 0, max: 10, step: 1 });\r\n            });\r\n        };\r\n        LevelConfigPanel.prototype.createDefaultGiftConfig = function () {\r\n            var _a;\r\n            return _a = {},\r\n                _a[game.BoosterType.BOMB] = 0,\r\n                _a[game.BoosterType.CRACKER] = 0,\r\n                _a[game.BoosterType.STOP] = 0,\r\n                _a;\r\n        };\r\n        LevelConfigPanel.prototype.addButtons = function () {\r\n            this.tutorialButton = this.panel.addButton({ title: \"Tutorial\" });\r\n            this.removeButton = this.panel.addButton({ title: \"Remove\" });\r\n            this.playButton = this.panel.addButton({ title: \"Play\" });\r\n        };\r\n        return LevelConfigPanel;\r\n    }(game.EditorPanel));\r\n    game.LevelConfigPanel = LevelConfigPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelGeneratorPanelEvent;\r\n    (function (LevelGeneratorPanelEvent) {\r\n        LevelGeneratorPanelEvent[\"ITEM_TYPE_CHANGE\"] = \"item_type_change\";\r\n        LevelGeneratorPanelEvent[\"CLEAR\"] = \"clear\";\r\n        LevelGeneratorPanelEvent[\"GENERATE\"] = \"generate\";\r\n    })(LevelGeneratorPanelEvent = game.LevelGeneratorPanelEvent || (game.LevelGeneratorPanelEvent = {}));\r\n    var LevelGeneratorPanel = /** @class */ (function (_super) {\r\n        __extends(LevelGeneratorPanel, _super);\r\n        function LevelGeneratorPanel(scene, generatorConfig) {\r\n            var _this = _super.call(this, scene, \"Generator\") || this;\r\n            _this.generator = generatorConfig;\r\n            _this.panel.addInput(_this.generator, \"general\", { step: 1, min: 1, max: 100 });\r\n            _this.panel.addInput(_this.generator, \"sides\", { step: 1, min: 0, max: 100 });\r\n            _this.panel.addInput(_this.generator, \"startRow\", { step: 1, min: 2, max: 20 });\r\n            _this.panel.addInput(_this.generator, \"targetItemType\", { options: _this.getTargetItemTypes() }).on(\"change\", _this.onTargetItemTypeChanged.bind(_this));\r\n            _this.panel.addInput(_this.generator, \"targetItemsNum\", { step: 1 });\r\n            _this.addSeedControls();\r\n            _this.addHealthFolder();\r\n            _this.addItemTypesFolder();\r\n            _this.addWeightsFolder();\r\n            _this.addButtons();\r\n            return _this;\r\n        }\r\n        LevelGeneratorPanel.prototype.addHealthFolder = function () {\r\n            var healthFolder = this.panel.addFolder({\r\n                title: \"Health\",\r\n                expanded: true,\r\n            });\r\n            healthFolder.addInput(this.generator, \"minHealth\", { step: 1, label: \"min\" }).on(\"change\", this.onMinHealthChange.bind(this));\r\n            healthFolder.addInput(this.generator, \"maxHealth\", { step: 1, label: \"max\" }).on(\"change\", this.onMaxHealthChange.bind(this));\r\n            healthFolder.addInput(this.generator, \"incrementHealth\", { step: 0.05, min: 0.1, max: 1, label: \"increment\" });\r\n            healthFolder.addInput(this.generator, \"deltaHealth\", { step: 1, min: 0, max: 10, label: \"delta\" });\r\n        };\r\n        LevelGeneratorPanel.prototype.onMinHealthChange = function (newValue) {\r\n            this.generator.minHealth = Math.min(newValue, this.generator.maxHealth);\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.onMaxHealthChange = function (newValue) {\r\n            this.generator.maxHealth = Math.max(newValue, this.generator.minHealth);\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.onTargetItemTypeChanged = function (itemType) {\r\n            this.generator.itemTypes[itemType] = true;\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.addSeedControls = function () {\r\n            this.panel.addInput(this.generator, \"seed\");\r\n            this.panel.addButton({ title: \"New seed\" }).on(\"click\", this.onSeedButtonClick.bind(this));\r\n        };\r\n        LevelGeneratorPanel.prototype.onSeedButtonClick = function () {\r\n            this.generator.seed = this.getNewSeed();\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.getNewSeed = function () {\r\n            return _.shuffle(Date.now().toString().split(\"\")).join(\"\");\r\n        };\r\n        LevelGeneratorPanel.prototype.getTargetItemTypes = function () {\r\n            var typesToRemove = [game.ItemType.SHATTER_BLOCK_PIECE];\r\n            var blockTypes = game.ItemTypeUtil.getBlockTypes();\r\n            var keys = _.without.apply(_, __spreadArrays([blockTypes], typesToRemove));\r\n            var values = __spreadArrays(keys);\r\n            return _.zipObject(keys, values);\r\n        };\r\n        LevelGeneratorPanel.prototype.addItemTypesFolder = function () {\r\n            var _this = this;\r\n            var itemsFolder = this.panel.addFolder({\r\n                title: \"Item types\",\r\n                expanded: true,\r\n            });\r\n            Object.keys(this.generator.itemTypes)\r\n                .sort(this.sortItemTypes.bind(this))\r\n                .forEach(function (key) {\r\n                itemsFolder.addInput(_this.generator.itemTypes, key).on(\"change\", _this.onItemTypeChange.bind(_this, key));\r\n            });\r\n            this.selectAllButton = itemsFolder.addButton({ title: \"Select all\" });\r\n            this.selectAllButton.on(\"click\", this.onSelectAllButtonClick.bind(this));\r\n            this.deselectAllButton = itemsFolder.addButton({ title: \"Deselect all\" });\r\n            this.deselectAllButton.on(\"click\", this.onDeselectAllButtonClick.bind(this));\r\n        };\r\n        LevelGeneratorPanel.prototype.sortItemTypes = function (type_1, type_2) {\r\n            var block_1 = game.ItemTypeUtil.isBlockType(type_1);\r\n            var block_2 = game.ItemTypeUtil.isBlockType(type_2);\r\n            if (block_1 && block_2 === false) {\r\n                return -1;\r\n            }\r\n            if (block_1 === false && block_2) {\r\n                return 1;\r\n            }\r\n            if (block_1 && block_2) {\r\n                return type_1.toString().charCodeAt(0) - type_2.toString().charCodeAt(0);\r\n            }\r\n            return 0;\r\n        };\r\n        LevelGeneratorPanel.prototype.onSelectAllButtonClick = function () {\r\n            this.updateAllItemTypesInConfig(true);\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.onDeselectAllButtonClick = function () {\r\n            this.updateAllItemTypesInConfig(false);\r\n            // this.generator.itemTypes[this.generator.targetItemType] = true\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.updateAllItemTypesInConfig = function (value) {\r\n            var _this = this;\r\n            Object.keys(this.generator.itemTypes).forEach(function (key) {\r\n                _this.generator.itemTypes[key] = value;\r\n            });\r\n        };\r\n        LevelGeneratorPanel.prototype.onItemTypeChange = function (key, value) {\r\n            this.events.emit(LevelGeneratorPanelEvent.ITEM_TYPE_CHANGE, key, value);\r\n            this.updateWeightsFolder();\r\n        };\r\n        LevelGeneratorPanel.prototype.updateWeightsFolder = function () {\r\n            this.weightsFolder.dispose();\r\n            this.clearButton.dispose();\r\n            this.generateButton.dispose();\r\n            this.addWeightsFolder();\r\n            this.addButtons();\r\n        };\r\n        LevelGeneratorPanel.prototype.addWeightsFolder = function () {\r\n            var _this = this;\r\n            this.weightsFolder = this.panel.addFolder({\r\n                title: \"Weights\",\r\n            });\r\n            this.getAllowedItemTypes().forEach(function (key) {\r\n                _this.weightsFolder.addInput(_this.generator.weights, key, { step: 1, min: 0, max: 200 });\r\n            });\r\n            this.weightsFolder.addButton({ title: \"Reset\" }).on(\"click\", this.onResetWeightsClick.bind(this));\r\n        };\r\n        LevelGeneratorPanel.prototype.getAllowedItemTypes = function () {\r\n            var _this = this;\r\n            return Object.keys(this.generator.itemTypes).filter(function (itemType) { return _this.generator.itemTypes[itemType] === true; });\r\n        };\r\n        LevelGeneratorPanel.prototype.onResetWeightsClick = function () {\r\n            var _this = this;\r\n            Object.keys(this.generator.weights).forEach(function (key) {\r\n                _this.generator.weights[key] = 100;\r\n            });\r\n            this.panel.refresh();\r\n        };\r\n        LevelGeneratorPanel.prototype.addButtons = function () {\r\n            var _this = this;\r\n            this.clearButton = this.panel.addButton({ title: \"Clear\" });\r\n            this.clearButton.on(\"click\", function () {\r\n                _this.events.emit(LevelGeneratorPanelEvent.CLEAR);\r\n            });\r\n            this.generateButton = this.panel.addButton({ title: \"Generate\" });\r\n            this.generateButton.on(\"click\", function () {\r\n                _this.events.emit(LevelGeneratorPanelEvent.GENERATE);\r\n            });\r\n        };\r\n        return LevelGeneratorPanel;\r\n    }(game.EditorPanel));\r\n    game.LevelGeneratorPanel = LevelGeneratorPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ItemsGenerator = /** @class */ (function () {\r\n        function ItemsGenerator(scene, levelConfig) {\r\n            this.scene = scene;\r\n            this.levelConfig = levelConfig;\r\n            this.rnd = new Phaser.Math.RandomDataGenerator([levelConfig.generator.seed]);\r\n            this.gacha = this.createGacha(this.levelConfig.generator.itemTypes, this.levelConfig.generator.weights, this.rnd);\r\n        }\r\n        ItemsGenerator.prototype.createGacha = function (itemTypes, weights, rnd) {\r\n            var plugin = this.scene.plugins.get(\"gacha\");\r\n            var allowedItemTypes = Object.keys(itemTypes).filter(function (itemType) { return itemTypes[itemType] === true; });\r\n            var allowedWeights = allowedItemTypes.reduce(function (acc, itemType) {\r\n                return (acc[itemType] = weights[itemType]), acc;\r\n            }, {});\r\n            return plugin.add({\r\n                mode: \"shuffle\",\r\n                rnd: rnd,\r\n                items: __assign({}, allowedWeights),\r\n            });\r\n        };\r\n        ItemsGenerator.prototype.canGenerateItem = function () {\r\n            return this.rnd.between(0, 100) < this.levelConfig.generator.general;\r\n        };\r\n        ItemsGenerator.prototype.canGenerateItemOnSide = function () {\r\n            return this.rnd.between(0, 100) < this.levelConfig.generator.sides;\r\n        };\r\n        ItemsGenerator.prototype.getItemType = function () {\r\n            return this.gacha.next();\r\n        };\r\n        ItemsGenerator.prototype.getItemTypeForPinata = function () {\r\n            var itemType = game.ItemType.PINATA_BLOCK;\r\n            while (itemType === game.ItemType.PINATA_BLOCK) {\r\n                itemType = this.gacha.next();\r\n            }\r\n            return itemType;\r\n        };\r\n        ItemsGenerator.prototype.getItemParams = function (itemType, startRow, currentRow) {\r\n            var params = {};\r\n            var isBlock = game.ItemTypeUtil.isBlockType(itemType);\r\n            if (isBlock) {\r\n                params[game.EditorItemParam.HEALTH] = ItemsGenerator.getBlockHealth(currentRow, startRow, this.rnd, this.levelConfig.generator);\r\n            }\r\n            var isTriangle = itemType === game.ItemType.TRIANGLE;\r\n            if (isTriangle) {\r\n                var frames_1 = [1, 2, 3, 4].map(function (num) { return game.TriangleBlock.getFrame(num); });\r\n                var frame = this.rnd.pick(frames_1);\r\n                params[game.EditorItemParam.FRAME] = frame;\r\n            }\r\n            return params;\r\n        };\r\n        ItemsGenerator.getBlockHealth = function (currentRow, startRow, rnd, generator) {\r\n            var minHealth = generator.minHealth;\r\n            var maxHealth = generator.maxHealth;\r\n            var increment = generator.incrementHealth;\r\n            var baseHealth = minHealth + Math.floor((currentRow - startRow) * increment);\r\n            var delta = generator.deltaHealth * rnd.sign();\r\n            return Phaser.Math.Clamp(baseHealth + delta, minHealth, maxHealth);\r\n        };\r\n        return ItemsGenerator;\r\n    }());\r\n    game.ItemsGenerator = ItemsGenerator;\r\n})(game || (game = {}));\r\n///<reference path='grid/EditorGrid.ts' />\r\n///<reference path='ILevelConfig.ts' />\r\n///<reference path='gui/AddItemPanel.ts' />\r\n///<reference path='items/EditorItem.ts' />\r\n///<reference path='items/EditorItemLivesCounter.ts' />\r\n///<reference path='items/EditorItemCopy.ts' />\r\n///<reference path='panels/EditorPanel.ts' />\r\n///<reference path='panels/LevelConfigPanel.ts' />\r\n///<reference path='panels/LevelGeneratorPanel.ts' />\r\n///<reference path='ItemsGenerator.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EditorEvent;\r\n    (function (EditorEvent) {\r\n        EditorEvent[\"GOTO_TUTORIAL_EDITOR\"] = \"goto_tutorial_editor\";\r\n        EditorEvent[\"BACKGROUND_CHANGE\"] = \"background_change\";\r\n        EditorEvent[\"CONFIG_REMOVE\"] = \"config_remove\";\r\n        EditorEvent[\"TEST_LEVEL\"] = \"test_level\";\r\n        EditorEvent[\"CHANGE_LEVEL\"] = \"change_level\";\r\n    })(EditorEvent = game.EditorEvent || (game.EditorEvent = {}));\r\n    var Editor = /** @class */ (function (_super) {\r\n        __extends(Editor, _super);\r\n        function Editor() {\r\n            return _super.call(this, {}) || this;\r\n        }\r\n        Editor.prototype.init = function (data) {\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            this.levelConfig = data;\r\n            this.levelNumber = data.levelNumber;\r\n            this.configPanel = null;\r\n            this.generatorPanel = null;\r\n            this.items = [];\r\n        };\r\n        Editor.prototype.create = function () {\r\n            this.addEditorPanels();\r\n            this.addGrid();\r\n            this.addItemsContainer();\r\n            this.addFox();\r\n            this.addLivesCounterLayer();\r\n            this.addCrosshair();\r\n            this.addAddBlockPanel();\r\n            this.onBackgroundChange(this.levelConfig.background);\r\n            this.loadItems();\r\n            this.addPointerCallbacks();\r\n            this.addKeyboardCallbacks();\r\n        };\r\n        Editor.prototype.addEditorPanels = function () {\r\n            this.addConfigPanel();\r\n            this.addGeneratorPanel();\r\n            var zoom = this.game.store.getNumber(game.GameStoreKey.EDITOR_ZOOM);\r\n            this.panelsContainer = document.getElementById(\"editor-panels\");\r\n            this.panelsContainer.style.visibility = \"visible\";\r\n            this.panelsContainer.style.zoom = zoom.toString();\r\n        };\r\n        Editor.prototype.enablePanels = function () {\r\n            this.configPanel.enableInput();\r\n            this.generatorPanel.enableInput();\r\n        };\r\n        Editor.prototype.disablePanels = function () {\r\n            this.configPanel.disableInput();\r\n            this.generatorPanel.disableInput();\r\n        };\r\n        Editor.prototype.addConfigPanel = function () {\r\n            this.configPanel = new game.LevelConfigPanel(this, this.levelConfig);\r\n            this.configPanel.events.on(game.LevelConfigPanelEvent.AUTO_THROW_CHANGE, this.onAutoThrowChange, this);\r\n            this.configPanel.bgInput.on(\"change\", this.onBackgroundChange.bind(this));\r\n            this.configPanel.tutorialButton.on(\"click\", this.gotoTutorialEditor.bind(this));\r\n            this.configPanel.removeButton.on(\"click\", this.onRemoveButtonClick.bind(this));\r\n            this.configPanel.playButton.on(\"click\", this.testLevel.bind(this));\r\n        };\r\n        Editor.prototype.gotoTutorialEditor = function () {\r\n            this.events.emit(EditorEvent.GOTO_TUTORIAL_EDITOR);\r\n        };\r\n        Editor.prototype.onAutoThrowChange = function (value) {\r\n            this.crosshairContainer.visible = value;\r\n        };\r\n        Editor.prototype.testLevel = function () {\r\n            this.updateLevelConfig();\r\n            this.events.emit(EditorEvent.TEST_LEVEL, {\r\n                levelNumber: this.levelNumber,\r\n                fromEditor: true,\r\n            });\r\n        };\r\n        Editor.prototype.onBackgroundChange = function (newBackground) {\r\n            this.events.emit(EditorEvent.BACKGROUND_CHANGE, newBackground);\r\n        };\r\n        Editor.prototype.onRemoveButtonClick = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var isConfirmed;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    isConfirmed = window.confirm(\"Do you want to remove level \" + this.levelNumber + \" config?\");\r\n                    if (isConfirmed === false) {\r\n                        return [2 /*return*/];\r\n                    }\r\n                    this.disablePanels();\r\n                    this.game.levelConfigs.remove(this.levelNumber);\r\n                    this.game.levelConfigs.saveLocally();\r\n                    this.game.levelConfigs\r\n                        .saveRemotely()\r\n                        .then(function () {\r\n                        console.info(\"Level \" + _this.levelNumber + \" config was succesfully removed! \\u2714\");\r\n                        _this.events.emit(EditorEvent.CONFIG_REMOVE);\r\n                    })\r\n                        .catch(function (xhr) {\r\n                        console.warn(\"Can't remove level \" + _this.levelNumber + \" config. Please try again!\");\r\n                    })\r\n                        .finally(function () {\r\n                        _this.enablePanels();\r\n                    });\r\n                    return [2 /*return*/];\r\n                });\r\n            });\r\n        };\r\n        Editor.prototype.saveLevelConfigAs = function () {\r\n            var _this = this;\r\n            var existingLevelNumbers = this.game.levelConfigs.getLevelNumbers();\r\n            var suggestedLevelNumber = Math.max.apply(Math, existingLevelNumbers) + 1 || 1;\r\n            var levelNumberStr = prompt(\"Enter level number\", suggestedLevelNumber.toString());\r\n            if (!levelNumberStr) {\r\n                console.warn(\"Please enter valid level number!\", levelNumberStr);\r\n                return;\r\n            }\r\n            var levelNumber = parseInt(levelNumberStr);\r\n            if (!levelNumber) {\r\n                console.warn(\"Please enter valid level number!\", levelNumber);\r\n                return;\r\n            }\r\n            var isLevelExist = existingLevelNumbers.includes(levelNumber);\r\n            if (isLevelExist) {\r\n                console.warn(\"Level \" + levelNumber + \" config exists already, please enter another number!\");\r\n                return;\r\n            }\r\n            this.gui.saveButton.alpha = 0.5;\r\n            this.gui.saveButton.enabled = false;\r\n            this.disablePanels();\r\n            var newLevelConfig = __assign(__assign({}, this.levelConfig), { levelNumber: levelNumber });\r\n            this.game.levelConfigs.add(newLevelConfig);\r\n            this.game.levelConfigs.saveLocally();\r\n            this.game.levelConfigs\r\n                .saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Level \" + levelNumber + \" config was successfully saved!\");\r\n                _this.events.emit(EditorEvent.CHANGE_LEVEL, levelNumber);\r\n            })\r\n                .catch(function () {\r\n                console.warn(\"Can't save level \" + levelNumber + \" config!\");\r\n            });\r\n        };\r\n        Editor.prototype.saveLevelConfig = function () {\r\n            var _this = this;\r\n            var targetBlocksType = this.levelConfig.generator.targetItemType;\r\n            var targetBlocksNum = this.levelConfig.generator.targetItemsNum;\r\n            var actualBlocksNum = this.items.filter(function (item) { return item.itemType === targetBlocksType; }).length;\r\n            if (actualBlocksNum > targetBlocksNum) {\r\n                console.warn(\"Can't export level! [\" + targetBlocksType + \": \" + actualBlocksNum + \"/\" + targetBlocksNum + \"]\");\r\n                console.warn(\"Please remove \" + (actualBlocksNum - targetBlocksNum) + \" \" + targetBlocksType.toUpperCase() + \"(S).\");\r\n                return;\r\n            }\r\n            else if (actualBlocksNum < targetBlocksNum) {\r\n                console.warn(\"targetBlocksNum was set to \" + targetBlocksNum + \", but actually there were only \" + actualBlocksNum + \" of \" + targetBlocksType.toUpperCase() + \"S\");\r\n                console.warn(\"But don't you worry - I've fixed targetBlocksNum for you. You are welcome.\");\r\n                this.levelConfig.generator.targetItemsNum = actualBlocksNum;\r\n                this.generatorPanel.refresh();\r\n            }\r\n            this.gui.saveButton.alpha = 0.5;\r\n            this.gui.saveButton.enabled = false;\r\n            this.disablePanels();\r\n            this.updateLevelConfig();\r\n            console.log(\"Uploading level \" + this.levelNumber + \" config...\", _.omit(this.levelConfig, \"items\"));\r\n            this.game.levelConfigs\r\n                .saveLocally()\r\n                .then(function (success) {\r\n                if (success) {\r\n                    console.log(\"Local save complete! \u2714\");\r\n                }\r\n                else {\r\n                    console.log(\"Local save is not available!\");\r\n                }\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Local save failed!\");\r\n            });\r\n            this.game.levelConfigs\r\n                .saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Upload complete! \u2714\");\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Upload failed!\");\r\n            })\r\n                .finally(function () {\r\n                _this.gui.saveButton.alpha = 1;\r\n                _this.gui.saveButton.enabled = true;\r\n                _this.enablePanels();\r\n            });\r\n        };\r\n        Editor.prototype.updateLevelConfig = function () {\r\n            this.levelConfig.autoThrow.x = Phaser.Math.RoundTo(this.crosshair.x, -2);\r\n            this.levelConfig.autoThrow.y = Phaser.Math.RoundTo(this.crosshair.y, -2);\r\n            this.levelConfig.items = this.items.map(function (item) { return item.getConfig(); });\r\n            this.levelConfig.stars = Editor.createStarsConfig(this.levelConfig.levelNumber, this.levelConfig.items);\r\n        };\r\n        Editor.createStarsConfig = function (levelNumber, items) {\r\n            var totalHealth = items.reduce(function (sum, item) {\r\n                var hasHealth = typeof item.params[\"health\"] !== \"undefined\";\r\n                return hasHealth\r\n                    ? sum + item.params[\"health\"]\r\n                    : sum;\r\n            }, 0);\r\n            if (levelNumber === 1) {\r\n                return Editor.getFirstLevelStars(totalHealth);\r\n            }\r\n            var oneStar = Math.round(totalHealth * 0.7);\r\n            var twoStars = Math.round(totalHealth * 1);\r\n            var threeStars = Math.round(totalHealth * 1.3);\r\n            return [oneStar, twoStars, threeStars];\r\n        };\r\n        Editor.getFirstLevelStars = function (totalHealthPoints) {\r\n            var oneStar = Math.round(totalHealthPoints * 0.33);\r\n            var twoStars = Math.round(totalHealthPoints * 0.66);\r\n            var threeStars = totalHealthPoints;\r\n            return [oneStar, twoStars, threeStars];\r\n        };\r\n        Editor.prototype.addGeneratorPanel = function () {\r\n            this.generatorPanel = new game.LevelGeneratorPanel(this, this.levelConfig.generator);\r\n            this.generatorPanel.events.on(game.LevelGeneratorPanelEvent.ITEM_TYPE_CHANGE, this.onItemTypesChange, this);\r\n            this.generatorPanel.events.on(game.LevelGeneratorPanelEvent.CLEAR, this.clearGeneratedItems, this);\r\n            this.generatorPanel.events.on(game.LevelGeneratorPanelEvent.GENERATE, this.onGenerateButtonClick, this);\r\n        };\r\n        Editor.prototype.clearGeneratedItems = function () {\r\n            this.getItemsToClear().forEach(function (item) { return item.destroy(); });\r\n            this.clearTopEmptyRows();\r\n            this.scrollToHome();\r\n        };\r\n        Editor.prototype.getItemsToClear = function () {\r\n            var clearAll = this.shiftKey.isDown;\r\n            return clearAll\r\n                ? this.items.slice()\r\n                : this.items.filter(function (item) { return !item.manuallyAdded; });\r\n        };\r\n        Editor.prototype.onGenerateButtonClick = function () {\r\n            var areItemTypesSet = Object.values(this.levelConfig.generator.itemTypes).some(function (value) { return value === true; });\r\n            if (areItemTypesSet === false) {\r\n                console.warn(\"Select some item types!\");\r\n                return;\r\n            }\r\n            this.clearGeneratedItems();\r\n            this.generateItems();\r\n        };\r\n        Editor.prototype.clearTopEmptyRows = function () {\r\n            var maxTopRow = game.GameGrid.ROWS - 1;\r\n            var topItem = _.maxBy(this.items, \"row\");\r\n            var topRow = Math.max(topItem === null || topItem === void 0 ? void 0 : topItem.row, maxTopRow) || maxTopRow;\r\n            var totalRows = this.grid.rows;\r\n            for (var row = totalRows - 1; row > topRow; row--) {\r\n                this.grid.removeRow(row);\r\n            }\r\n        };\r\n        Editor.prototype.generateItems = function () {\r\n            var generatorConfig = this.levelConfig.generator;\r\n            var itemsGenerator = new game.ItemsGenerator(this, this.levelConfig);\r\n            var targetBlocksGenerated = this.items.filter(function (item) { return item.itemType === generatorConfig.targetItemType; }).length;\r\n            if (targetBlocksGenerated === generatorConfig.targetItemsNum) {\r\n                return;\r\n            }\r\n            for (var row = generatorConfig.startRow; row < 1000; row++) {\r\n                var isRowExist = !!this.grid.getCellAt(row, 0);\r\n                if (isRowExist === false) {\r\n                    this.grid.addRow();\r\n                    this.grid.alignAddRowButton();\r\n                }\r\n                for (var column = 0; column < this.grid.columns; column++) {\r\n                    if (this.isCellFree(column, row) === false) {\r\n                        continue;\r\n                    }\r\n                    var generateItem = itemsGenerator.canGenerateItem();\r\n                    if (generateItem === false) {\r\n                        continue;\r\n                    }\r\n                    var itemType = itemsGenerator.getItemType();\r\n                    var isBlock = game.ItemTypeUtil.isBlockType(itemType);\r\n                    var isSideColumn = column === 0 || column === game.GameGrid.COLUMNS - 1;\r\n                    if (isBlock && isSideColumn) {\r\n                        var canGenerateOnSide = itemsGenerator.canGenerateItemOnSide();\r\n                        if (canGenerateOnSide === false) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    var cell = this.grid.getCellAt(row, column);\r\n                    var params = itemsGenerator.getItemParams(itemType, generatorConfig.startRow, row);\r\n                    this.addItem(itemType, cell, params, true);\r\n                    if (itemType === generatorConfig.targetItemType) {\r\n                        if (++targetBlocksGenerated === generatorConfig.targetItemsNum) {\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Editor.prototype.onItemTypesChange = function () {\r\n            var allowedTypes = this.getAllowedItemTypes();\r\n            this.addBlockPanel.updateIcons(allowedTypes);\r\n        };\r\n        Editor.prototype.getAllowedItemTypes = function () {\r\n            var _this = this;\r\n            return Object.keys(this.levelConfig.generator.itemTypes).filter(function (key) { return _this.levelConfig.generator.itemTypes[key] === true; });\r\n        };\r\n        Editor.prototype.addGrid = function () {\r\n            var rows = this.getGridRowsFromLevelConfig();\r\n            this.grid = new game.EditorGrid(this, game.GameGrid.COLUMNS, rows);\r\n            this.grid.alpha = 0.66;\r\n            this.grid.on(game.EditorGridEvent.ADD_ROW, this.onAddRow, this);\r\n            this.grid.on(game.EditorGridEvent.REMOVE_ROW, this.onRemoveRow, this);\r\n        };\r\n        Editor.prototype.getGridRowsFromLevelConfig = function () {\r\n            var rows = this.levelConfig.items.map(function (item) { return item.row; });\r\n            var topRow = Math.max.apply(Math, rows);\r\n            return Math.max(game.GameGrid.ROWS, topRow + 1);\r\n        };\r\n        Editor.prototype.onAddRow = function (grid) {\r\n        };\r\n        Editor.prototype.onRemoveRow = function (row) {\r\n            var _this = this;\r\n            var itemsToRemove = this.items.filter(function (item) { return item.row === row; });\r\n            itemsToRemove.forEach(function (item) {\r\n                item.destroy();\r\n                _.pull(_this.items, item);\r\n            });\r\n            var itemsToUpdate = this.items.filter(function (item) { return item.row > row; });\r\n            itemsToUpdate.forEach(function (item) {\r\n                item.row--;\r\n                item.y += game.EditorGrid.CELL_SIZE;\r\n            });\r\n        };\r\n        Editor.prototype.addFox = function () {\r\n            this.fox = this.add.image(0, 0, \"editor\", \"FOX_IDLE0001\");\r\n            this.fox.setOrigin(0.45, 0.8);\r\n            this.fox.x = this.grid.getWidth() / 2;\r\n            this.itemsContainer.add(this.fox);\r\n        };\r\n        Editor.prototype.getFoxHandPosition = function () {\r\n            return {\r\n                x: this.fox.x,\r\n                y: this.fox.y - this.fox.height * 0.28,\r\n            };\r\n        };\r\n        Editor.prototype.addItemsContainer = function () {\r\n            this.itemsContainer = this.add.container(0, 0);\r\n            this.itemsContainer.name = \"items\";\r\n        };\r\n        Editor.prototype.addLivesCounterLayer = function () {\r\n            this.liveCountersContainer = this.add.container(0, 0);\r\n            this.liveCountersContainer.name = \"live_counters\";\r\n        };\r\n        Editor.prototype.addCrosshair = function () {\r\n            this.crosshairLine = this.add.line(0, 0);\r\n            this.crosshairLine.setStrokeStyle(3, 0xffffff);\r\n            this.crosshairLine.setOrigin(0, 0);\r\n            this.crosshair = this.add.image(0, 0, \"editor\", \"crosshair\");\r\n            this.crosshair.name = \"crosshair\";\r\n            this.crosshair.setInteractive();\r\n            this.crosshair.input.cursor = \"pointer\";\r\n            this.crosshair.on(Phaser.Input.Events.DRAG_END, this.onCrosshairDragEnd, this);\r\n            this.crosshair.on(Phaser.Input.Events.DRAG, this.onCrosshairDrag, this);\r\n            this.input.setDraggable(this.crosshair);\r\n            var autoThrowConfig = this.levelConfig.autoThrow;\r\n            if (autoThrowConfig.x === 0 && autoThrowConfig.y === 0) {\r\n                this.crosshair.x = this.grid.getWidth() / 2;\r\n                this.crosshair.y = -game.EditorGrid.CELL_SIZE * 2.5;\r\n            }\r\n            else {\r\n                this.crosshair.x = autoThrowConfig.x;\r\n                this.crosshair.y = autoThrowConfig.y;\r\n            }\r\n            this.crosshairContainer = this.add.container(0, 0);\r\n            this.crosshairContainer.name = \"crosshair_container\";\r\n            this.crosshairContainer.visible = autoThrowConfig.enabled;\r\n            this.crosshairContainer.add(this.crosshairLine);\r\n            this.crosshairContainer.add(this.crosshair);\r\n            this.redrawCrosshairLine();\r\n        };\r\n        Editor.prototype.onCrosshairDrag = function (pointer, dragX, dragY) {\r\n            this.crosshair.x = Phaser.Math.Clamp(dragX, 0, this.grid.getWidth());\r\n            this.crosshair.y = Phaser.Math.Clamp(dragY, -this.grid.getHeight(), this.getFoxHandPosition().y);\r\n            this.redrawCrosshairLine();\r\n        };\r\n        Editor.prototype.redrawCrosshairLine = function () {\r\n            var _a = this.getFoxHandPosition(), startX = _a.x, startY = _a.y;\r\n            this.crosshairLine.setTo(startX, startY, this.crosshair.x, this.crosshair.y);\r\n        };\r\n        Editor.prototype.onCrosshairDragEnd = function () {\r\n            if (this.levelConfig.autoThrow.snapping === false) {\r\n                return;\r\n            }\r\n            var gap = game.EditorGrid.CELL_SIZE / 2;\r\n            this.crosshair.x = Phaser.Math.Snap.To(this.crosshair.x, gap);\r\n            this.crosshair.y = Phaser.Math.Snap.To(this.crosshair.y, gap);\r\n            this.redrawCrosshairLine();\r\n        };\r\n        Editor.prototype.addAddBlockPanel = function () {\r\n            this.addBlockPanel = new game.AddItemPanel(this);\r\n            this.addBlockPanel.x = 300;\r\n            this.addBlockPanel.y = 300;\r\n            this.addBlockPanel.kill();\r\n            this.addBlockPanel.updateIcons(this.getAllowedItemTypes());\r\n            this.add.existing(this.addBlockPanel);\r\n        };\r\n        Editor.prototype.loadItems = function () {\r\n            var _this = this;\r\n            this.levelConfig.items.forEach(function (itemConfig) {\r\n                var cell = _this.grid.getCellAt(itemConfig.row, itemConfig.column);\r\n                var item = _this.addItem(itemConfig.type, cell, itemConfig.params, true);\r\n                item.manuallyAdded = itemConfig.manuallyAdded;\r\n            });\r\n        };\r\n        Editor.prototype.addPointerCallbacks = function () {\r\n            this.input.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.input.on(Phaser.Input.Events.POINTER_WHEEL, this.onPointerWheel, this);\r\n        };\r\n        Editor.prototype.onPointerDown = function (pointer, objects) {\r\n            var cell = objects.find(function (object) { return object.name === \"cell\"; });\r\n            if (cell) {\r\n                this.onCellClick(cell);\r\n                return;\r\n            }\r\n            var rowLabel = objects.find(function (obj) { return obj.getData(\"type\") === \"row_label\"; });\r\n            if (rowLabel) {\r\n                this.onRowLabelClick(rowLabel);\r\n                return;\r\n            }\r\n            var itemIcon = objects.find(function (object) { return object.getData(\"type\") === \"add_item_icon\"; });\r\n            if (itemIcon) {\r\n                this.addItems(itemIcon);\r\n                this.grid.resetSelectedCells();\r\n                this.addBlockPanel.hide();\r\n                return;\r\n            }\r\n            var item = objects.find(function (object) { return object.getData(\"type\") === \"item\"; });\r\n            if (item) {\r\n                this.onItemClick(item);\r\n                return;\r\n            }\r\n            this.resetSelectedItems();\r\n            this.grid.resetSelectedCells();\r\n            this.addBlockPanel.hide();\r\n        };\r\n        Editor.prototype.onItemClick = function (item) {\r\n            if (item.isSelected) {\r\n                item.setSelected(false);\r\n            }\r\n            else {\r\n                if (this.shiftKey.isDown === false) {\r\n                    this.resetSelectedItems();\r\n                }\r\n                item.setSelected(true);\r\n            }\r\n        };\r\n        Editor.prototype.onRowLabelClick = function (rowLabel) {\r\n            var rowNumber = rowLabel.getData(\"row\");\r\n            if (this.shiftKey.isDown) {\r\n                this.grid.addSelectedRow(rowNumber);\r\n            }\r\n            else {\r\n                this.grid.resetSelectedCells();\r\n                this.grid.addSelectedRow(rowNumber);\r\n            }\r\n        };\r\n        Editor.prototype.onCellClick = function (cell) {\r\n            if (cell.isSelected) {\r\n                this.grid.removeSelectedCell(cell);\r\n                this.addBlockPanel.hide();\r\n            }\r\n            else {\r\n                if (this.shiftKey.isDown === false) {\r\n                    this.grid.resetSelectedCells();\r\n                }\r\n                this.grid.addSelectedCell(cell);\r\n                this.showAddItemPanel(cell);\r\n            }\r\n        };\r\n        Editor.prototype.showAddItemPanel = function (cell) {\r\n            var _a = cell.getWorldPosition(), x = _a.x, y = _a.y;\r\n            this.addBlockPanel.x = x;\r\n            this.addBlockPanel.y = y;\r\n            this.addBlockPanel.show();\r\n        };\r\n        Editor.prototype.resetSelectedItems = function () {\r\n            this.getSelectedItems().forEach(function (item) { return item.setSelected(false); });\r\n        };\r\n        Editor.prototype.addItems = function (itemIcon) {\r\n            var _this = this;\r\n            var newItemType = itemIcon.getData(game.ITEM_TYPE);\r\n            var newItems = this.grid.selectedCells.map(function (cell) {\r\n                var itemParams = _this.createItemParams(newItemType, cell.row);\r\n                var item = _this.addItem(newItemType, cell, itemParams);\r\n                item.manuallyAdded = true;\r\n                return item;\r\n            });\r\n            if (newItemType === this.levelConfig.generator.targetItemType) {\r\n                this.levelConfig.generator.targetItemsNum += newItems.length;\r\n                this.generatorPanel.refresh();\r\n            }\r\n        };\r\n        Editor.prototype.createItemParams = function (itemType, row) {\r\n            var params = {};\r\n            var isBlock = game.ItemTypeUtil.isBlockType(itemType);\r\n            if (isBlock) {\r\n                params[game.EditorItemParam.HEALTH] = game.ItemsGenerator.getBlockHealth(row, this.levelConfig.generator.startRow, Phaser.Math.RND, this.levelConfig.generator);\r\n            }\r\n            return params;\r\n        };\r\n        Editor.prototype.addItem = function (itemType, cell, params, instant) {\r\n            if (params === void 0) { params = {}; }\r\n            if (instant === void 0) { instant = false; }\r\n            if (cell.row < 2) {\r\n                console.warn(\"First 2 rows should be empty!\");\r\n                return;\r\n            }\r\n            var isCellBusy = !!this.getItemAtCell(cell.column, cell.row);\r\n            if (isCellBusy) {\r\n                console.warn(\"Can't add item at {x: \" + cell.column + \", y: \" + cell.row + \"}. Cell is busy by another item.\");\r\n                return;\r\n            }\r\n            var item = new game.EditorItem(this, \"editor\", itemType);\r\n            item.x = cell.x;\r\n            item.y = cell.y;\r\n            item.column = cell.column;\r\n            item.row = cell.row;\r\n            item.loadParams(params);\r\n            item.on(Phaser.GameObjects.Events.DESTROY, this.onItemDestroy, this);\r\n            this.itemsContainer.add(item);\r\n            this.items.push(item);\r\n            this.addItemCopy(item);\r\n            this.addLiveCounter(item);\r\n            if (instant === false) {\r\n                this.tweens.add({\r\n                    targets: item,\r\n                    duration: 200,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    scale: { from: 0.75, to: 1 },\r\n                    alpha: { from: 0, to: 1 },\r\n                });\r\n            }\r\n            return item;\r\n        };\r\n        Editor.prototype.isCellFree = function (column, row) {\r\n            return !this.getItemAtCell(column, row);\r\n        };\r\n        Editor.prototype.getItemAtCell = function (column, row) {\r\n            return this.items.find(function (item) {\r\n                return item.column === column && item.row === row;\r\n            });\r\n        };\r\n        Editor.prototype.onItemDestroy = function (item) {\r\n            _.pull(this.items, item);\r\n        };\r\n        Editor.prototype.addItemCopy = function (item) {\r\n            var copy = new game.EditorItemCopy(this, item);\r\n            this.itemsContainer.add(copy);\r\n        };\r\n        Editor.prototype.addLiveCounter = function (item) {\r\n            var blocks = game.ItemTypeUtil.getBlockTypes();\r\n            var isBlock = blocks.includes(item.itemType);\r\n            if (isBlock === false) {\r\n                return;\r\n            }\r\n            var offset = { x: -3, y: -item.displayHeight / 2 + 16 };\r\n            var liveCounter = new game.EditorItemLivesCounter(this, item, offset);\r\n            this.liveCountersContainer.add(liveCounter);\r\n        };\r\n        Editor.prototype.onPointerWheel = function (pointer, objects, dx, dy) {\r\n            var block = this.getBlock(objects);\r\n            if (block && block.isSelected) {\r\n                var health = block.params[game.EditorItemParam.HEALTH];\r\n                var deltaHealth = dy > 0 ? -1 : 1;\r\n                var newHealth = Math.max(1, health + deltaHealth);\r\n                block.updateParams(game.EditorItemParam.HEALTH, newHealth);\r\n                return;\r\n            }\r\n            var sign = dy >= 0 ? 1 : -1;\r\n            this.cameras.main.scrollY += game.EditorGrid.CELL_SIZE * sign;\r\n        };\r\n        Editor.prototype.getBlock = function (objects) {\r\n            var item = objects.find(function (object) { return object.getData(\"type\") === \"item\"; });\r\n            if (!item) {\r\n                return null;\r\n            }\r\n            var isBlock = game.ItemTypeUtil.getBlockTypes().includes(item.itemType);\r\n            if (isBlock === false) {\r\n                return null;\r\n            }\r\n            return item;\r\n        };\r\n        Editor.prototype.addKeyboardCallbacks = function () {\r\n            this.shiftKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SHIFT);\r\n            this.input.keyboard.on(\"keydown-S\", this.onKeyDownS, this);\r\n            this.input.keyboard.on(\"keydown-ENTER\", this.testLevel, this);\r\n            this.input.keyboard.on(\"keydown-HOME\", this.scrollToHome, this);\r\n            this.input.keyboard.on(\"keydown-END\", this.scrollToEnd, this);\r\n            this.input.keyboard.on(\"keydown-DELETE\", this.removeItems, this);\r\n            this.input.keyboard.on(\"keydown-UP\", this.moveSelectedItems.bind(this, 0, -1));\r\n            this.input.keyboard.on(\"keydown-RIGHT\", this.moveSelectedItems.bind(this, 1, 0));\r\n            this.input.keyboard.on(\"keydown-DOWN\", this.moveSelectedItems.bind(this, 0, 1));\r\n            this.input.keyboard.on(\"keydown-LEFT\", this.moveSelectedItems.bind(this, -1, 0));\r\n            this.input.keyboard.on(\"keydown-PLUS\", this.changeEditorPanelsZoom.bind(this, 1));\r\n            this.input.keyboard.on(\"keydown-MINUS\", this.changeEditorPanelsZoom.bind(this, -1));\r\n            this.input.keyboard.on(\"keydown-ZERO\", this.resetEditorPanelsZoom, this);\r\n            this.input.keyboard.on(\"keydown-OPEN_BRACKET\", this.changeCanvasMargin.bind(this, -1));\r\n            this.input.keyboard.on(\"keydown-CLOSED_BRACKET\", this.changeCanvasMargin.bind(this, 1));\r\n            this.input.keyboard.on(\"keydown-BACK_SLASH\", this.resetCanvasMargin, this);\r\n            this.input.keyboard.on(\"keydown-ONE\", this.updateSelectedItemsFrame.bind(this, 1));\r\n            this.input.keyboard.on(\"keydown-TWO\", this.updateSelectedItemsFrame.bind(this, 2));\r\n            this.input.keyboard.on(\"keydown-THREE\", this.updateSelectedItemsFrame.bind(this, 3));\r\n            this.input.keyboard.on(\"keydown-FOUR\", this.updateSelectedItemsFrame.bind(this, 4));\r\n        };\r\n        Editor.prototype.onKeyDownS = function () {\r\n            if (this.shiftKey.isDown) {\r\n                this.saveLevelConfigAs();\r\n            }\r\n            else {\r\n                this.saveLevelConfig();\r\n            }\r\n        };\r\n        Editor.prototype.updateSelectedItemsFrame = function (frame) {\r\n            this.setSelectedTrianglesFrame(frame);\r\n            this.setSelectedShatterPiecesFrame(frame);\r\n        };\r\n        Editor.prototype.setSelectedTrianglesFrame = function (frameNumber) {\r\n            this.getSelectedTriangles().forEach(function (triangle) {\r\n                var newFrameName = game.TriangleBlock.getFrame(frameNumber);\r\n                triangle.updateParams(game.EditorItemParam.FRAME, newFrameName);\r\n            });\r\n        };\r\n        Editor.prototype.setSelectedShatterPiecesFrame = function (frameNumber) {\r\n            var frame = game.ShatterBlockPiece.getFrame(frameNumber);\r\n            this.getSelectedShatterPieces().forEach(function (piece) { return piece.updateParams(game.EditorItemParam.FRAME, frame); });\r\n        };\r\n        Editor.prototype.getSelectedShatterPieces = function () {\r\n            return this.getSelectedItems().filter(function (item) { return item.itemType === game.ItemType.SHATTER_BLOCK_PIECE; });\r\n        };\r\n        Editor.prototype.getSelectedTriangles = function () {\r\n            return this.getSelectedItems().filter(function (item) { return item.itemType === game.ItemType.TRIANGLE; });\r\n        };\r\n        Editor.prototype.moveSelectedItems = function (deltaColumns, deltaRows) {\r\n            var _this = this;\r\n            var selectedItems = this.getSelectedItems();\r\n            var currentCells = selectedItems.map(function (item) { return _this.grid.getCellAt(item.row, item.column); });\r\n            var newCells = selectedItems.map(function (item) {\r\n                return _this.grid.getCellAt(item.row - deltaRows, item.column + deltaColumns);\r\n            });\r\n            var cellsToCheck = _.without.apply(_, __spreadArrays([newCells], currentCells));\r\n            var cellsAreFree = cellsToCheck.every(function (cell) {\r\n                if (!cell) {\r\n                    return false;\r\n                }\r\n                if (cell.row < 2) {\r\n                    return false;\r\n                }\r\n                var itemInCell = _this.getItemAtCell(cell.column, cell.row);\r\n                return !itemInCell;\r\n            });\r\n            if (cellsAreFree) {\r\n                this.moveItems(selectedItems, deltaColumns, deltaRows);\r\n            }\r\n        };\r\n        Editor.prototype.moveItems = function (items, deltaColumns, deltaRows) {\r\n            items.forEach(function (item) {\r\n                item.row -= deltaRows;\r\n                item.column += deltaColumns;\r\n                item.x += game.EditorGrid.CELL_SIZE * deltaColumns;\r\n                item.y += game.EditorGrid.CELL_SIZE * deltaRows;\r\n            });\r\n        };\r\n        Editor.prototype.removeItems = function () {\r\n            var _this = this;\r\n            var targetItemType = this.levelConfig.generator.targetItemType;\r\n            this.getSelectedItems().forEach(function (item) {\r\n                if (item.itemType === targetItemType) {\r\n                    _this.levelConfig.generator.targetItemsNum--;\r\n                }\r\n                item.destroy();\r\n            });\r\n            this.generatorPanel.refresh();\r\n        };\r\n        Editor.prototype.getSelectedItems = function () {\r\n            return this.items.filter(function (item) { return item.isSelected; });\r\n        };\r\n        Editor.prototype.changeEditorPanelsZoom = function (sign) {\r\n            if (sign === void 0) { sign = 1; }\r\n            var zoom = parseFloat(this.panelsContainer.style.zoom) || 1;\r\n            var newZoom = zoom + Phaser.Math.Sign(sign) * 0.1;\r\n            newZoom = Math.max(0.2, newZoom);\r\n            this.panelsContainer.style.zoom = newZoom.toString();\r\n            this.game.store.saveValue(game.GameStoreKey.EDITOR_ZOOM, newZoom);\r\n        };\r\n        Editor.prototype.resetEditorPanelsZoom = function () {\r\n            var zoom = 1;\r\n            this.panelsContainer.style.zoom = zoom.toString();\r\n            this.game.store.saveValue(game.GameStoreKey.EDITOR_ZOOM, zoom);\r\n        };\r\n        Editor.prototype.changeCanvasMargin = function (sign) {\r\n            var canvasStyle = this.game.canvas.style;\r\n            var marginStr = canvasStyle.marginLeft.slice(0, -2);\r\n            var margin = parseFloat(marginStr);\r\n            var newMargin = margin + 50 * sign;\r\n            canvasStyle.marginLeft = newMargin + \"px\";\r\n        };\r\n        Editor.prototype.resetCanvasMargin = function () {\r\n            this.scale.updateCenter();\r\n        };\r\n        Editor.prototype.scrollToHome = function () {\r\n            this.cameras.main.scrollY = 0;\r\n        };\r\n        Editor.prototype.scrollToEnd = function () {\r\n            // this.cameras.main.scrollY = -this.grid.getHeight() * this.grid.scale\r\n        };\r\n        Editor.prototype.toggleMatterAutoUpdate = function () {\r\n            this.matter.world.autoUpdate = !this.matter.world.autoUpdate;\r\n            console.log(\"Matter AutoUpdate is \" + (this.matter.world.autoUpdate ? \"OFF\" : \"ON\"));\r\n        };\r\n        Editor.prototype.onAnyKeyDown = function () {\r\n            console.log(\"onAnyKeyDown\", arguments);\r\n        };\r\n        Editor.prototype.togglePhysicsDebug = function () {\r\n            if (this.matter.config.debug === false) {\r\n                return;\r\n            }\r\n            this.matter.world.drawDebug = !this.matter.world.drawDebug;\r\n            if (this.matter.world.drawDebug === false) {\r\n                this.matter.world.debugGraphic.clear();\r\n            }\r\n        };\r\n        Editor.prototype.doResize = function () {\r\n            this.alignGrid();\r\n            this.alignItems();\r\n            this.alignLiveCounters();\r\n            this.alignCrosshairContainer();\r\n            this.resizeCamera();\r\n        };\r\n        Editor.prototype.alignGrid = function () {\r\n            var gridDisplayWidth = this.grid.getDisplayWidth();\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.66;\r\n            var scale = maxWidth / gridDisplayWidth;\r\n            this.grid.scale = scale;\r\n            this.grid.x = (game.Config.GAME_WIDTH - this.grid.getDisplayWidth() * scale) / 2;\r\n            this.grid.y = game.Config.GAME_HEIGHT - 80;\r\n        };\r\n        Editor.prototype.alignItems = function () {\r\n            this.itemsContainer.scale = this.grid.scale;\r\n            this.itemsContainer.x = this.grid.x;\r\n            this.itemsContainer.y = this.grid.y;\r\n        };\r\n        Editor.prototype.alignLiveCounters = function () {\r\n            this.liveCountersContainer.scale = this.grid.scale;\r\n            this.liveCountersContainer.x = this.grid.x;\r\n            this.liveCountersContainer.y = this.grid.y;\r\n        };\r\n        Editor.prototype.alignCrosshairContainer = function () {\r\n            this.crosshairContainer.scale = this.grid.scale;\r\n            this.crosshairContainer.x = this.grid.x;\r\n            this.crosshairContainer.y = this.grid.y;\r\n        };\r\n        Editor.prototype.resizeCamera = function () {\r\n            var camera = this.cameras.main;\r\n            camera.setViewport(0, 0, game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n        };\r\n        Editor.prototype.onGuiCreated = function () {\r\n        };\r\n        Editor.prototype.update = function (time, delta) {\r\n        };\r\n        Editor.prototype.shutdown = function () {\r\n            this.destroyPanels();\r\n        };\r\n        Editor.prototype.destroyPanels = function () {\r\n            this.panelsContainer.style.visibility = \"hidden\";\r\n            this.panelsContainer = null;\r\n            if (this.configPanel) {\r\n                this.configPanel.destroy();\r\n            }\r\n            if (this.generatorPanel) {\r\n                this.generatorPanel.destroy();\r\n            }\r\n        };\r\n        return Editor;\r\n    }(Phaser.Scene));\r\n    game.Editor = Editor;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorLevelLabel = /** @class */ (function (_super) {\r\n        __extends(EditorLevelLabel, _super);\r\n        function EditorLevelLabel(scene, levelNumber) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.buttonsMargin = 12;\r\n            _this.name = \"level_label\";\r\n            _this.addLabelBack();\r\n            _this.addLabel(levelNumber);\r\n            _this.addPrevLevelButton();\r\n            _this.addNextLevelButton();\r\n            return _this;\r\n        }\r\n        EditorLevelLabel.prototype.addLabelBack = function () {\r\n            this.labelBack = this.scene.add.image(0, 0, \"editor\", \"level_label_back\");\r\n            this.add(this.labelBack);\r\n        };\r\n        EditorLevelLabel.prototype.addLabel = function (levelNumber) {\r\n            var content = \"LEVEL \" + levelNumber;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"36px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            this.label = this.scene.add.text(0, 0, content, style);\r\n            this.label.setOrigin(0.5, 0.5);\r\n            this.add(this.label);\r\n        };\r\n        EditorLevelLabel.prototype.addPrevLevelButton = function () {\r\n            this.prevLevelButton = this.scene.add.button(\"editor\", \"prev_level_button\", this);\r\n            this.prevLevelButton.x = this.labelBack.left - this.prevLevelButton.displayWidth / 2 - this.buttonsMargin;\r\n        };\r\n        EditorLevelLabel.prototype.addNextLevelButton = function () {\r\n            this.nextLevelButton = this.scene.add.button(\"editor\", \"next_level_button\", this);\r\n            this.nextLevelButton.x = this.labelBack.right + this.nextLevelButton.displayWidth / 2 + this.buttonsMargin;\r\n        };\r\n        return EditorLevelLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.EditorLevelLabel = EditorLevelLabel;\r\n})(game || (game = {}));\r\n///<reference path='EditorLevelLabel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EditorGui = /** @class */ (function (_super) {\r\n        __extends(EditorGui, _super);\r\n        function EditorGui() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        EditorGui.prototype.init = function (data) {\r\n            this.levelConfig = data.levelConfig;\r\n        };\r\n        EditorGui.prototype.create = function () {\r\n            this.addLevelLabel();\r\n            this.addSaveButton();\r\n        };\r\n        EditorGui.prototype.addLevelLabel = function () {\r\n            this.levelLabel = new game.EditorLevelLabel(this, this.levelConfig.levelNumber);\r\n            this.add.existing(this.levelLabel);\r\n        };\r\n        EditorGui.prototype.addSaveButton = function () {\r\n            this.saveButton = this.add.button(\"editor\", \"save_button\");\r\n        };\r\n        EditorGui.prototype.doResize = function () {\r\n            this.alignLevelLabel();\r\n            this.alignSaveButton();\r\n        };\r\n        EditorGui.prototype.alignLevelLabel = function () {\r\n            this.levelLabel.scale = 0.66;\r\n            this.levelLabel.x = game.Config.HALF_GAME_WIDTH;\r\n            this.levelLabel.y = this.levelLabel.getBounds().height / 2 + 20;\r\n        };\r\n        EditorGui.prototype.alignSaveButton = function () {\r\n            var margin = 50;\r\n            this.saveButton.x = game.Config.GAME_WIDTH - margin;\r\n            this.saveButton.y = game.Config.GAME_HEIGHT - margin + 4;\r\n        };\r\n        EditorGui.prototype.shutdown = function () {\r\n        };\r\n        return EditorGui;\r\n    }(Phaser.Scene));\r\n    game.EditorGui = EditorGui;\r\n})(game || (game = {}));\r\n///<reference path='Editor.ts' />\r\n///<reference path='gui/EditorGui.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var EditorRoot = /** @class */ (function (_super) {\r\n        __extends(EditorRoot, _super);\r\n        function EditorRoot() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        EditorRoot.prototype.init = function (data) {\r\n            this.levelNumber = data ? data.levelNumber : 1;\r\n            this.levelConfig = this.getLevelConfig(this.levelNumber);\r\n            console.group(\"Level Editor - Level \" + this.levelNumber);\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            this.editor = null;\r\n            this.editorGui = null;\r\n        };\r\n        EditorRoot.prototype.getLevelConfig = function (levelNumber) {\r\n            var isConfigExist = this.game.levelConfigs.check(levelNumber);\r\n            if (isConfigExist) {\r\n                return this.game.levelConfigs.get(levelNumber);\r\n            }\r\n            return this.game.levelConfigs.create(levelNumber);\r\n        };\r\n        EditorRoot.prototype.create = function () {\r\n            this.addBackground();\r\n            this.addKeyboardCallbacks();\r\n            this.launchEditorScene();\r\n        };\r\n        EditorRoot.prototype.addBackground = function () {\r\n            this.background = this.add.image(0, 0, \"editor\", this.levelConfig.background);\r\n            this.background.setOrigin(0.5, 1);\r\n        };\r\n        EditorRoot.prototype.addKeyboardCallbacks = function () {\r\n            this.input.keyboard.once(\"keydown-R\", this.restart, this);\r\n            this.input.keyboard.once(\"keydown-T\", this.gotoTutorialEditor, this);\r\n            this.input.keyboard.once(\"keydown-ESC\", this.gotoLevelsMapDev, this);\r\n        };\r\n        EditorRoot.prototype.gotoTutorialEditor = function () {\r\n            this.scene.start(game.SceneKey.TUTORIAL_EDITOR, { levelNumber: this.levelNumber });\r\n        };\r\n        EditorRoot.prototype.restart = function () {\r\n            this.game.changeScene(game.SceneKey.LEVEL_EDITOR_ROOT, game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: this.levelNumber });\r\n        };\r\n        EditorRoot.prototype.gotoPrevLevel = function () {\r\n            this.gotoLevel(this.levelNumber - 1);\r\n        };\r\n        EditorRoot.prototype.gotoNextLevel = function () {\r\n            this.gotoLevel(this.levelNumber + 1);\r\n        };\r\n        EditorRoot.prototype.gotoLevel = function (levelNumber) {\r\n            var isLevelExist = this.game.levelConfigs.check(levelNumber);\r\n            if (isLevelExist === false) {\r\n                console.warn(\"Level \" + levelNumber + \" doesn't exist!\");\r\n                return;\r\n            }\r\n            this.scene.start(game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: levelNumber });\r\n        };\r\n        EditorRoot.prototype.gotoLevelsMapDev = function () {\r\n            this.scene.start(game.SceneKey.LEVELS_MAP_DEV);\r\n        };\r\n        EditorRoot.prototype.launchEditorScene = function () {\r\n            this.editor = this.launchScene(game.SceneKey.LEVEL_EDITOR, this.levelConfig);\r\n            this.editor.events.on(Phaser.Scenes.Events.CREATE, this.launchEditorGuiScene, this);\r\n            this.editor.events.on(game.EditorEvent.BACKGROUND_CHANGE, this.onBackgroundChange, this);\r\n            this.editor.events.on(game.EditorEvent.CONFIG_REMOVE, this.gotoLevelsMapDev, this);\r\n            this.editor.events.once(game.EditorEvent.TEST_LEVEL, this.testLevelConfig, this);\r\n            this.editor.events.once(game.EditorEvent.CHANGE_LEVEL, this.gotoLevel, this);\r\n            this.editor.events.once(game.EditorEvent.GOTO_TUTORIAL_EDITOR, this.gotoTutorialEditor, this);\r\n        };\r\n        EditorRoot.prototype.launchEditorGuiScene = function () {\r\n            this.editorGui = this.launchScene(game.SceneKey.LEVEL_EDITOR_GUI, { levelConfig: this.levelConfig });\r\n            this.editorGui.events.on(Phaser.Scenes.Events.CREATE, this.onGuiCreated, this);\r\n        };\r\n        EditorRoot.prototype.onGuiCreated = function () {\r\n            this.editor.gui = this.editorGui;\r\n            this.editor.onGuiCreated();\r\n            this.editorGui.saveButton.on(ButtonEvent.RELEASE, this.onSaveButtonClick, this);\r\n            this.editorGui.levelLabel.nextLevelButton.once(ButtonEvent.PRESS, this.gotoNextLevel, this);\r\n            this.editorGui.levelLabel.prevLevelButton.once(ButtonEvent.PRESS, this.gotoPrevLevel, this);\r\n            this.resize();\r\n        };\r\n        EditorRoot.prototype.onSaveButtonClick = function (button, pointer) {\r\n            if (pointer.event.shiftKey) {\r\n                this.editor.saveLevelConfigAs();\r\n            }\r\n            else {\r\n                this.editor.saveLevelConfig();\r\n            }\r\n        };\r\n        EditorRoot.prototype.onBackgroundChange = function (backgroundFrame) {\r\n            this.background.setFrame(backgroundFrame);\r\n            this.background.setOrigin(0.5, 1);\r\n        };\r\n        EditorRoot.prototype.testLevelConfig = function (data) {\r\n            this.scene.start(game.SceneKey.GAMEPLAY_ROOT, data);\r\n        };\r\n        EditorRoot.prototype.launchScene = function (key, data) {\r\n            return this.scene.launch(key, data).get(key);\r\n        };\r\n        EditorRoot.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.editorGui.doResize();\r\n            this.editor.doResize();\r\n        };\r\n        EditorRoot.prototype.resizeBackground = function () {\r\n            this.background.envelop(game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.GAME_HEIGHT;\r\n        };\r\n        EditorRoot.prototype.shutdown = function () {\r\n            console.groupEnd();\r\n            if (this.editor) {\r\n                this.scene.stop(this.editor.scene.key);\r\n                this.editor.events.off(Phaser.Scenes.Events.CREATE, this.launchEditorGuiScene, this);\r\n                this.editor.events.off(game.EditorEvent.BACKGROUND_CHANGE, this.onBackgroundChange, this);\r\n                this.editor.events.off(game.EditorEvent.CONFIG_REMOVE, this.gotoLevelsMapDev, this);\r\n                this.editor.events.off(game.EditorEvent.TEST_LEVEL, this.testLevelConfig, this);\r\n                this.editor.events.off(game.EditorEvent.CHANGE_LEVEL, this.gotoLevel, this);\r\n                this.editor.events.off(game.EditorEvent.GOTO_TUTORIAL_EDITOR, this.gotoTutorialEditor, this);\r\n            }\r\n            if (this.editorGui) {\r\n                this.scene.stop(this.editorGui.scene.key);\r\n                this.editorGui.events.off(Phaser.Scenes.Events.CREATE, this.onGuiCreated, this);\r\n            }\r\n        };\r\n        return EditorRoot;\r\n    }(Phaser.Scene));\r\n    game.EditorRoot = EditorRoot;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var MapEditorPanelEvent;\r\n    (function (MapEditorPanelEvent) {\r\n    })(MapEditorPanelEvent = game.MapEditorPanelEvent || (game.MapEditorPanelEvent = {}));\r\n    var MapEditorPanel = /** @class */ (function (_super) {\r\n        __extends(MapEditorPanel, _super);\r\n        function MapEditorPanel(scene, levelConfig) {\r\n            var _this = _super.call(this, scene, \"Levels Map Config\") || this;\r\n            _this.config = levelConfig;\r\n            _this.addButtons();\r\n            return _this;\r\n        }\r\n        MapEditorPanel.prototype.addButtons = function () {\r\n            this.saveButton = this.panel.addButton({ title: \"Save\" });\r\n            this.testButton = this.panel.addButton({ title: \"Test\" });\r\n        };\r\n        return MapEditorPanel;\r\n    }(game.EditorPanel));\r\n    game.MapEditorPanel = MapEditorPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelsMapEditorLevelIcon = /** @class */ (function (_super) {\r\n        __extends(LevelsMapEditorLevelIcon, _super);\r\n        function LevelsMapEditorLevelIcon(scene, levelNumber) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this._levelNumber = 0;\r\n            _this._isSelected = false;\r\n            _this._levelNumber = levelNumber;\r\n            _this.addBack();\r\n            _this.addText();\r\n            _this.setSize(_this.back.width, _this.back.height);\r\n            _this.setInteractive();\r\n            _this.input.cursor = \"pointer\";\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_WHEEL, _this.onPointerWheel, _this);\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.onPointerDown, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(LevelsMapEditorLevelIcon.prototype, \"isSelected\", {\r\n            get: function () {\r\n                return this._isSelected;\r\n            },\r\n            set: function (value) {\r\n                this._isSelected = value;\r\n                this._isSelected ? this.back.setFrame(\"LevelMapButtonButtonRed\") : this.back.setFrame(\"LevelMapButtonButtonBlue\");\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(LevelsMapEditorLevelIcon.prototype, \"levelNumber\", {\r\n            get: function () {\r\n                return this._levelNumber;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        LevelsMapEditorLevelIcon.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"LevelMapButtonButtonBlue\");\r\n            this.add(this.back);\r\n        };\r\n        LevelsMapEditorLevelIcon.prototype.onPointerWheel = function (pointer, dx, dy) {\r\n            var newLevelNumber = this._levelNumber - Phaser.Math.Sign(dy);\r\n            this._levelNumber = Phaser.Math.Clamp(newLevelNumber, 1, 40);\r\n            this.setLevelNumber(this._levelNumber);\r\n        };\r\n        LevelsMapEditorLevelIcon.prototype.onPointerDown = function () {\r\n            this.isSelected = !this.isSelected;\r\n        };\r\n        LevelsMapEditorLevelIcon.prototype.addText = function () {\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.LEVELS_MAP_NUMBERS_COMPLETE, this._levelNumber.toString(), 34);\r\n            this.text.align = Phaser.Display.Align.CENTER;\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.x = this.back.x;\r\n            this.text.y = this.back.y - 3;\r\n            this.add(this.text);\r\n        };\r\n        LevelsMapEditorLevelIcon.prototype.setLevelNumber = function (levelNumber) {\r\n            this._levelNumber = levelNumber;\r\n            this.text.setText(this._levelNumber.toString());\r\n        };\r\n        return LevelsMapEditorLevelIcon;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelsMapEditorLevelIcon = LevelsMapEditorLevelIcon;\r\n})(game || (game = {}));\r\n///<reference path='panels/MapEditorPanel.ts' />\r\n///<reference path='ILevelsMapConfig.ts' />\r\n///<reference path='LevelsMapEditorLevelIcon.ts' />\r\nvar game;\r\n(function (game) {\r\n    var FixedKeyControl = Phaser.Cameras.Controls.FixedKeyControl;\r\n    var LevelsMapEditor = /** @class */ (function (_super) {\r\n        __extends(LevelsMapEditor, _super);\r\n        function LevelsMapEditor() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.lastTapTime = 0;\r\n            return _this;\r\n        }\r\n        LevelsMapEditor.prototype.init = function () {\r\n            this.config = this.cache.json.get(\"levels_map_config\");\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            console.group(\"Levels Map Editor\");\r\n            console.log(\"Config\", this.config);\r\n        };\r\n        LevelsMapEditor.prototype.create = function () {\r\n            this.addEditorPanel();\r\n            this.addMainContainer();\r\n            this.addBackgrounds();\r\n            this.addLevelIcons();\r\n            this.addClouds();\r\n            this.setupCamera();\r\n            this.addCameraKeyboardControls();\r\n            this.addCameraScroll();\r\n            this.addPointerCallbacks();\r\n            this.addKeyboardCallbacks();\r\n            this.resize();\r\n        };\r\n        LevelsMapEditor.prototype.addEditorPanel = function () {\r\n            this.mapEditorPanel = new game.MapEditorPanel(this, this.config);\r\n            this.mapEditorPanel.saveButton.on(\"click\", this.onSaveButtonClick.bind(this));\r\n            this.mapEditorPanel.testButton.on(\"click\", this.onTestButtonClick.bind(this));\r\n            this.panelsContainer = document.getElementById(\"editor-panels\");\r\n            this.panelsContainer.style.visibility = \"visible\";\r\n        };\r\n        LevelsMapEditor.prototype.onSaveButtonClick = function () {\r\n            var _this = this;\r\n            var config = this.createLevelsMapConfig();\r\n            if (!config) {\r\n                return;\r\n            }\r\n            this.cache.json.remove(\"levels_map_config\");\r\n            this.cache.json.add(\"levels_map_config\", config);\r\n            this.config = config;\r\n            console.log(\"Saving levels map config...\", this.config);\r\n            this.mapEditorPanel.disableInput();\r\n            this.uploadConfig(config)\r\n                .then(function (data) {\r\n                console.log(\"Levels map config was successfully saved!\", data.responseText);\r\n            })\r\n                .catch(function (error) {\r\n                console.warn(\"Can't save levels map config!\", error);\r\n            })\r\n                .finally(function () {\r\n                _this.mapEditorPanel.enableInput();\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.onTestButtonClick = function () {\r\n            var config = this.createLevelsMapConfig();\r\n            if (!config) {\r\n                return;\r\n            }\r\n            this.cache.json.remove(\"levels_map_config\");\r\n            this.cache.json.add(\"levels_map_config\", config);\r\n            this.game.changeScene(game.SceneKey.LEVELS_MAP_EDITOR, game.SceneKey.LEVELS_MAP);\r\n        };\r\n        LevelsMapEditor.prototype.createLevelsMapConfig = function () {\r\n            var levelIconsConfig = this.createLevelIconsConfig();\r\n            var validationResult = this.validateLevelIconConfig(levelIconsConfig);\r\n            if (validationResult.success === false) {\r\n                console.warn(\"Invalid level_icons config!\", validationResult.errors);\r\n                return null;\r\n            }\r\n            // prettier-ignore\r\n            return {\r\n                backgrounds: __spreadArrays(this.config.backgrounds),\r\n                level_icons: levelIconsConfig,\r\n                decor: __spreadArrays([\r\n                    this.config.decor.find(function (item) { return item.type === game.LevelsMapDecor.FOX_IN_HOLE; }),\r\n                    this.config.decor.find(function (item) { return item.type === game.LevelsMapDecor.FOX; }),\r\n                    this.config.decor.find(function (item) { return item.type === game.LevelsMapDecor.FIRE; })\r\n                ], this.getCloudsConfigs()),\r\n            };\r\n        };\r\n        LevelsMapEditor.prototype.createLevelIconsConfig = function () {\r\n            var getIconConfig = function (icon) {\r\n                return {\r\n                    level_number: icon.levelNumber,\r\n                    x: Phaser.Math.RoundTo(icon.x, -2),\r\n                    y: Phaser.Math.RoundTo(icon.y, -2),\r\n                };\r\n            };\r\n            var configs = this.levelIcons.map(function (icon) { return getIconConfig(icon); });\r\n            configs = _.sortBy(configs, \"level_number\");\r\n            return configs;\r\n        };\r\n        LevelsMapEditor.prototype.getCloudsConfigs = function () {\r\n            return this.clouds.map(function (cloud) {\r\n                return {\r\n                    type: game.LevelsMapDecor.CLOUD,\r\n                    frame: cloud.frame.name,\r\n                    x: cloud.x,\r\n                    y: cloud.y,\r\n                };\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.validateLevelIconConfig = function (config) {\r\n            var result = { success: true, errors: [] };\r\n            var count = _.countBy(config, \"level_number\");\r\n            for (var levelNumber in count) {\r\n                if (count.hasOwnProperty(levelNumber) === false) {\r\n                    continue;\r\n                }\r\n                var num = count[levelNumber];\r\n                if (num > 1) {\r\n                    result.success = false;\r\n                    result.errors.push(\"Check level number = \" + levelNumber + \". There are \" + num + \" instances of it.\");\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n        LevelsMapEditor.prototype.uploadConfig = function (config) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var data = {\r\n                    filename: \"levels_map.json\",\r\n                    content: JSON.stringify(config),\r\n                };\r\n                var uploadURL = game.Config.SERVER_URL + \"upload.php\";\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.open(\"POST\", uploadURL, true);\r\n                xhr.onload = function () {\r\n                    resolve(xhr);\r\n                };\r\n                xhr.onerror = function () {\r\n                    reject(xhr);\r\n                };\r\n                xhr.send(_this.convertObjectToURLSearchParams(data));\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.convertObjectToURLSearchParams = function (obj) {\r\n            return new URLSearchParams(obj);\r\n        };\r\n        LevelsMapEditor.prototype.addMainContainer = function () {\r\n            this.mainContainer = this.add.container(0, 0);\r\n            this.mainContainer.name = \"main_container\";\r\n        };\r\n        LevelsMapEditor.prototype.addBackgrounds = function () {\r\n            var _this = this;\r\n            this.backgrounds = this.config.backgrounds.map(function (frame, index) {\r\n                var bg = _this.add.image(0, 0, frame);\r\n                bg.setOrigin(0, 0);\r\n                bg.y = bg.height * index;\r\n                _this.mainContainer.add(bg);\r\n                return bg;\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.addLevelIcons = function () {\r\n            var _this = this;\r\n            this.levelIcons = [];\r\n            this.config.level_icons.forEach(function (config) {\r\n                _this.doAddLevelIcon(config.level_number, config.x, config.y);\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.addClouds = function () {\r\n            var _this = this;\r\n            this.clouds = [];\r\n            this.config.decor\r\n                .filter(function (item) { return item.type === game.LevelsMapDecor.CLOUD; })\r\n                .forEach(function (cloudConfig) {\r\n                _this.doAddCloud(cloudConfig.x, cloudConfig.y, cloudConfig.frame);\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.setupCamera = function () {\r\n            this.camera = this.cameras.main;\r\n        };\r\n        LevelsMapEditor.prototype.addCameraKeyboardControls = function () {\r\n            var cursors = this.input.keyboard.createCursorKeys();\r\n            this.cameraControl = new FixedKeyControl({\r\n                camera: this.camera,\r\n                left: cursors.left,\r\n                right: cursors.right,\r\n                up: cursors.up,\r\n                down: cursors.down,\r\n                speed: 4,\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.addCameraScroll = function () {\r\n            var _this = this;\r\n            this.cameraScroll = new game.KineticScroll(this, {\r\n                kineticMovement: true,\r\n                timeConstantScroll: 300,\r\n                horizontalScroll: false,\r\n                verticalScroll: true,\r\n            });\r\n            this.input.on(\"pointerup\", function () {\r\n                _this.cameraScroll.endMove();\r\n            });\r\n            this.input.on(\"pointermove\", function (pointer) {\r\n                _this.cameraScroll.move(pointer);\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.addPointerCallbacks = function () {\r\n            this.input.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.input.on(\"drag\", function (pointer, gameObject, dragX, dragY) {\r\n                gameObject.x = dragX;\r\n                gameObject.y = dragY;\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.onPointerDown = function (pointer, objects) {\r\n            var now = Date.now();\r\n            if (objects.length > 0) {\r\n                this.lastTapTime = now;\r\n                return;\r\n            }\r\n            this.cameraScroll.beginMove(pointer);\r\n            var deltaTapTime = now - this.lastTapTime;\r\n            if (deltaTapTime < 300) {\r\n                this.addLevelIcon();\r\n            }\r\n            this.lastTapTime = now;\r\n        };\r\n        LevelsMapEditor.prototype.addKeyboardCallbacks = function () {\r\n            this.input.keyboard.on(\"keydown-PLUS\", this.addLevelIcon, this);\r\n            this.input.keyboard.on(\"keydown-DELETE\", this.onDeleteKeyPress, this);\r\n            this.input.keyboard.on(\"keydown-HOME\", this.scrollToTop, this);\r\n            this.input.keyboard.on(\"keydown-END\", this.scrollToBottom, this);\r\n            this.input.keyboard.on(\"keydown-F\", this.addFire, this);\r\n            this.input.keyboard.on(\"keydown-C\", this.addCloudByKey, this);\r\n        };\r\n        LevelsMapEditor.prototype.addCloudByKey = function () {\r\n            var positionToCamera = this.input.activePointer.positionToCamera(this.camera);\r\n            this.doAddCloud(positionToCamera.x, positionToCamera.y);\r\n        };\r\n        LevelsMapEditor.prototype.doAddCloud = function (x, y, frame) {\r\n            var cloud = this.add.image(0, 0, \"levels_map\", frame || LevelsMapEditor.CLOUD_FRAMES[0]);\r\n            cloud.x = x;\r\n            cloud.y = y;\r\n            cloud.setInteractive();\r\n            cloud.on(Phaser.Input.Events.GAMEOBJECT_POINTER_WHEEL, this.onCloudPointerWheel.bind(this, cloud));\r\n            this.input.setDraggable(cloud);\r\n            this.mainContainer.add(cloud);\r\n            this.clouds.push(cloud);\r\n            return cloud;\r\n        };\r\n        LevelsMapEditor.prototype.onCloudPointerWheel = function (cloud, pointer, dx, dy) {\r\n            var currentFrame = cloud.frame.name;\r\n            var currentIndex = LevelsMapEditor.CLOUD_FRAMES.indexOf(currentFrame);\r\n            var newIndex = currentIndex + Phaser.Math.Sign(dy);\r\n            newIndex = Phaser.Math.Wrap(newIndex, 0, LevelsMapEditor.CLOUD_FRAMES.length);\r\n            cloud.setFrame(LevelsMapEditor.CLOUD_FRAMES[newIndex]);\r\n        };\r\n        LevelsMapEditor.prototype.addFire = function () { };\r\n        LevelsMapEditor.prototype.addLevelIcon = function () {\r\n            var pointerWorldPosition = { x: this.input.activePointer.worldX, y: this.input.activePointer.worldY };\r\n            var containerPosition = this.mainContainer.pointToContainer(pointerWorldPosition);\r\n            var levelNumber = Math.max.apply(Math, __spreadArrays(this.levelIcons.map(function (icon) { return icon.levelNumber; }), [0])) + 1;\r\n            this.doAddLevelIcon(levelNumber, containerPosition.x, containerPosition.y);\r\n        };\r\n        LevelsMapEditor.prototype.doAddLevelIcon = function (levelNumber, x, y) {\r\n            var icon = new game.LevelsMapEditorLevelIcon(this, levelNumber);\r\n            icon.x = x;\r\n            icon.y = y;\r\n            this.input.setDraggable(icon);\r\n            this.mainContainer.add(icon);\r\n            this.levelIcons.push(icon);\r\n            return icon;\r\n        };\r\n        LevelsMapEditor.prototype.onDeleteKeyPress = function () {\r\n            var _this = this;\r\n            this.getSelectedLevelIcons().forEach(function (icon) {\r\n                icon.destroy();\r\n                _.pull(_this.levelIcons, icon);\r\n            });\r\n        };\r\n        LevelsMapEditor.prototype.getSelectedLevelIcons = function () {\r\n            return this.levelIcons.filter(function (icon) { return icon.isSelected; });\r\n        };\r\n        LevelsMapEditor.prototype.scrollToTop = function () {\r\n            this.camera.scrollY = 0;\r\n        };\r\n        LevelsMapEditor.prototype.scrollToBottom = function () {\r\n            this.camera.scrollY = this.camera.getBounds().height;\r\n        };\r\n        LevelsMapEditor.prototype.update = function (time, delta) {\r\n            this.cameraScroll.update();\r\n            this.cameraControl.update(delta);\r\n        };\r\n        LevelsMapEditor.prototype.resize = function () {\r\n            this.resizeMainContainer();\r\n            this.updateCameraBounds();\r\n        };\r\n        LevelsMapEditor.prototype.resizeMainContainer = function () {\r\n            this.mainContainer.scale = game.Config.GAME_WIDTH / this.backgrounds[0].width;\r\n        };\r\n        LevelsMapEditor.prototype.updateCameraBounds = function () {\r\n            var top = Phaser.Display.Bounds.GetTop(this.backgrounds[0]);\r\n            var bottom = Phaser.Display.Bounds.GetBottom(this.backgrounds[this.backgrounds.length - 1]);\r\n            var totalHeight = bottom - top;\r\n            this.camera.setBounds(0, 0, game.Config.GAME_WIDTH, totalHeight * this.mainContainer.scale);\r\n        };\r\n        LevelsMapEditor.prototype.shutdown = function () {\r\n            console.groupEnd();\r\n            this.destroyPanels();\r\n        };\r\n        LevelsMapEditor.prototype.destroyPanels = function () {\r\n            this.panelsContainer.style.visibility = \"hidden\";\r\n            this.panelsContainer = null;\r\n            if (this.mapEditorPanel) {\r\n                this.mapEditorPanel.destroy();\r\n            }\r\n        };\r\n        LevelsMapEditor.CLOUD_FRAMES = [\r\n            \"decor/Clouds/cloud_1_01\",\r\n            \"decor/Clouds/cloud_1_02\",\r\n            \"decor/Clouds/cloud_1_03\",\r\n            \"decor/Clouds/cloud_2_01\",\r\n            \"decor/Clouds/cloud_2_02\",\r\n            \"decor/Clouds/cloud_2_03\",\r\n            \"decor/Clouds/cloud_3_01\",\r\n            \"decor/Clouds/cloud_3_02\",\r\n            \"decor/Clouds/cloud_3_03\",\r\n        ];\r\n        return LevelsMapEditor;\r\n    }(Phaser.Scene));\r\n    game.LevelsMapEditor = LevelsMapEditor;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelIconDev = /** @class */ (function (_super) {\r\n        __extends(LevelIconDev, _super);\r\n        function LevelIconDev(scene, levelNumber) {\r\n            var _this = _super.call(this, scene, \"editor\", \"level_icon_back\") || this;\r\n            _this.name = \"level_icon\";\r\n            _this.levelNumber = levelNumber;\r\n            _this.addBitmapText(levelNumber.toString(), game.BitmapGameFont.EDITOR_ROW_NUMBERS, 32, -1, -4);\r\n            _this.addTutorialIcon();\r\n            return _this;\r\n        }\r\n        LevelIconDev.prototype.addTutorialIcon = function () {\r\n            var levelConfig = this.scene.game.levelConfigs.get(this.levelNumber);\r\n            var tutorialConfig = levelConfig.tutorial;\r\n            if (!tutorialConfig) {\r\n                return;\r\n            }\r\n            var icon = this.scene.add.image(0, 0, \"editor\", \"tutorial_icon\");\r\n            this.add(icon);\r\n            Phaser.Display.Align.In.BottomRight(icon, this.back, -15, -15);\r\n        };\r\n        LevelIconDev.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        LevelIconDev.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        return LevelIconDev;\r\n    }(Phaser.GameObjects.ComplexButton));\r\n    game.LevelIconDev = LevelIconDev;\r\n})(game || (game = {}));\r\n///<reference path='LevelIconDev.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelsMapDev = /** @class */ (function (_super) {\r\n        __extends(LevelsMapDev, _super);\r\n        function LevelsMapDev() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        LevelsMapDev.prototype.init = function () {\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n        };\r\n        LevelsMapDev.prototype.create = function () {\r\n            this.addBackground();\r\n            this.addBackButton();\r\n            this.addLevelIcons();\r\n            this.addNewLevelButton();\r\n            this.addPointerCallbacks();\r\n            this.addKeyboardCallbacks();\r\n            this.resize();\r\n        };\r\n        LevelsMapDev.prototype.addBackground = function () {\r\n            this.background = this.add.image(0, 0, \"editor\", \"background_1\");\r\n            this.background.setScrollFactor(0, 0);\r\n        };\r\n        LevelsMapDev.prototype.addBackButton = function () {\r\n            this.backButton = this.add.button(\"editor\", \"button_close\");\r\n            this.backButton.once(Phaser.GameObjects.ButtonEvent.PRESS, this.gotoLevelsMap, this);\r\n            this.backButton.setScrollFactor(0, 0);\r\n        };\r\n        LevelsMapDev.prototype.gotoLevelsMap = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.LEVELS_MAP);\r\n        };\r\n        LevelsMapDev.prototype.addLevelIcons = function () {\r\n            var levelNumbers = this.game.levelConfigs.getLevelNumbers();\r\n            this.levelIcons = this.createLevelIcons(levelNumbers);\r\n            this.levelIconsContainer = this.add.container(0, 0, this.levelIcons);\r\n        };\r\n        LevelsMapDev.prototype.createLevelIcons = function (levelNumbers) {\r\n            var _this = this;\r\n            return levelNumbers.map(function (levelNumber) {\r\n                var icon = new game.LevelIconDev(_this, levelNumber);\r\n                icon.once(Phaser.GameObjects.ButtonEvent.PRESS, _this.onLevelIconClick, _this);\r\n                return icon;\r\n            });\r\n        };\r\n        LevelsMapDev.prototype.onLevelIconClick = function (levelIcon) {\r\n            var levelNumber = levelIcon.levelNumber;\r\n            if (this.shiftKey.isDown) {\r\n                this.tryToRemoveLevelConfig(levelNumber);\r\n            }\r\n            else if (this.tKey.isDown) {\r\n                this.gotoTutorialEditor(levelNumber);\r\n            }\r\n            else {\r\n                this.editLevel(levelNumber);\r\n            }\r\n        };\r\n        LevelsMapDev.prototype.gotoTutorialEditor = function (levelNumber) {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.TUTORIAL_EDITOR, { levelNumber: levelNumber });\r\n        };\r\n        LevelsMapDev.prototype.tryToRemoveLevelConfig = function (levelNumber) {\r\n            var confirmed = window.confirm(\"Do you want to delete level \" + levelNumber + \" config?\");\r\n            if (confirmed) {\r\n                this.shiftKey.reset();\r\n                this.removeLevelConfig(levelNumber);\r\n            }\r\n        };\r\n        LevelsMapDev.prototype.removeLevelConfig = function (levelNumber) {\r\n            var _this = this;\r\n            this.levelIconsContainer.alpha = 0.66;\r\n            this.levelIcons.forEach(function (icon) { return icon.disableInput(); });\r\n            this.game.levelConfigs.remove(levelNumber);\r\n            this.game.levelConfigs.saveLocally();\r\n            this.game.levelConfigs.saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Level \" + levelNumber + \" config was succesfully removed!\");\r\n                _this.onConfigRemoved(levelNumber);\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Can't remove level \" + levelNumber + \" config. Please try again!\");\r\n            })\r\n                .finally(function () {\r\n                _this.levelIconsContainer.alpha = 1;\r\n                _this.levelIcons.forEach(function (icon) { return icon.enableInput(); });\r\n            });\r\n        };\r\n        LevelsMapDev.prototype.onConfigRemoved = function (levelNumber) {\r\n            var indexToRemove = this.levelIcons.findIndex(function (icon) { return icon.levelNumber === levelNumber; });\r\n            if (indexToRemove > -1) {\r\n                this.levelIcons[indexToRemove].destroy();\r\n                this.levelIcons.splice(indexToRemove, 1);\r\n                this.alignIcons();\r\n                this.alignNewLevelButton();\r\n            }\r\n        };\r\n        LevelsMapDev.prototype.editLevel = function (levelNumber) {\r\n            this.scene.start(game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: levelNumber });\r\n        };\r\n        LevelsMapDev.prototype.addNewLevelButton = function () {\r\n            this.newLevelButton = this.add.button(\"editor\", \"add_level_button\");\r\n            this.newLevelButton.on(Phaser.GameObjects.ButtonEvent.RELEASE, this.onNewLevelClick, this);\r\n        };\r\n        LevelsMapDev.prototype.onNewLevelClick = function () {\r\n            var _default = Math.max.apply(Math, __spreadArrays(this.game.levelConfigs.getLevelNumbers(), [0])) + 1;\r\n            var levelNumberStr = window.prompt(\"Enter new level number\", _default.toString());\r\n            if (!levelNumberStr) {\r\n                return;\r\n            }\r\n            var levelNumber = parseInt(levelNumberStr);\r\n            if (!levelNumber) {\r\n                console.warn(\"Please enter valid number!\", levelNumberStr);\r\n                return;\r\n            }\r\n            var isLevelExist = this.game.levelConfigs.check(levelNumber);\r\n            if (isLevelExist) {\r\n                console.warn(\"Level \" + levelNumberStr + \" exists already!\");\r\n                return;\r\n            }\r\n            this.editLevel(levelNumber);\r\n        };\r\n        LevelsMapDev.prototype.addPointerCallbacks = function () {\r\n            this.input.on(Phaser.Input.Events.POINTER_WHEEL, this.onPointerWheel, this);\r\n        };\r\n        LevelsMapDev.prototype.onPointerWheel = function (pointer, objects, dx, dy) {\r\n            this.cameras.main.scrollY += dy;\r\n        };\r\n        LevelsMapDev.prototype.addKeyboardCallbacks = function () {\r\n            this.input.keyboard.on(\"keydown-R\", this.restart, this);\r\n            this.input.keyboard.on(\"keydown-PLUS\", this.onNewLevelClick, this);\r\n            this.input.keyboard.on(\"keydown-M\", this.gotoLevelsMap, this);\r\n            this.input.keyboard.on(\"keydown-SPACE\", this.gotoLastExistingLevel, this);\r\n            this.shiftKey = this.input.keyboard.addKey(\"shift\");\r\n            this.tKey = this.input.keyboard.addKey(\"T\");\r\n        };\r\n        LevelsMapDev.prototype.restart = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.LEVELS_MAP_DEV);\r\n        };\r\n        LevelsMapDev.prototype.gotoLastExistingLevel = function () {\r\n            var lastLevel = Math.max.apply(Math, this.game.levelConfigs.getLevelNumbers());\r\n            this.editLevel(lastLevel);\r\n        };\r\n        LevelsMapDev.prototype.resize = function () {\r\n            this.alignBackground();\r\n            this.alignBackButton();\r\n            this.alignIcons();\r\n            this.alignNewLevelButton();\r\n        };\r\n        LevelsMapDev.prototype.alignBackground = function () {\r\n            this.background.envelop(game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        LevelsMapDev.prototype.alignBackButton = function () {\r\n            var margin = 50;\r\n            this.backButton.x = game.Config.GAME_WIDTH - margin;\r\n            this.backButton.y = margin;\r\n        };\r\n        LevelsMapDev.prototype.alignIcons = function () {\r\n            this.gridAlignIcons();\r\n            this.scaleIcons();\r\n        };\r\n        LevelsMapDev.prototype.gridAlignIcons = function () {\r\n            if (this.levelIcons.length === 0) {\r\n                return;\r\n            }\r\n            this.levelIconsContainer.gridAlign({\r\n                cellWidth: 120,\r\n                width: 5,\r\n                position: Phaser.Display.Align.CENTER,\r\n                x: this.levelIcons[0].getWidth() / 2,\r\n                y: this.levelIcons[0].getHeight() / 2,\r\n            });\r\n        };\r\n        LevelsMapDev.prototype.scaleIcons = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.8;\r\n            var width = this.levelIconsContainer.getBounds().width;\r\n            var scale = Math.min(1, maxWidth / width);\r\n            this.levelIconsContainer.scale = scale;\r\n            this.levelIconsContainer.x = (game.Config.GAME_WIDTH - this.levelIconsContainer.getBounds().width) / 2;\r\n            this.levelIconsContainer.y = 70;\r\n        };\r\n        LevelsMapDev.prototype.alignNewLevelButton = function () {\r\n            var iconsBottom = this.levelIconsContainer.y + this.levelIconsContainer.getBounds().height;\r\n            this.newLevelButton.scale = this.levelIconsContainer.scale;\r\n            this.newLevelButton.x = game.Config.HALF_GAME_WIDTH;\r\n            this.newLevelButton.y = iconsBottom + this.newLevelButton.displayHeight / 2 + 20 * this.newLevelButton.scale;\r\n        };\r\n        LevelsMapDev.prototype.shutdown = function () {\r\n        };\r\n        return LevelsMapDev;\r\n    }(Phaser.Scene));\r\n    game.LevelsMapDev = LevelsMapDev;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GridAlign = Phaser.Actions.GridAlign;\r\n    var LevelIconStars = /** @class */ (function (_super) {\r\n        __extends(LevelIconStars, _super);\r\n        function LevelIconStars(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"stars\";\r\n            _this.addStars();\r\n            _this.alignStars();\r\n            _this.finetuneAligment();\r\n            return _this;\r\n        }\r\n        LevelIconStars.prototype.addStars = function () {\r\n            var _this = this;\r\n            this.stars = _.times(3, function (index) {\r\n                return _this.scene.add.image(0, 0, \"levels_map\", \"small_star\");\r\n            });\r\n            this.add(this.stars);\r\n        };\r\n        LevelIconStars.prototype.alignStars = function () {\r\n            var cellWidth = 41;\r\n            GridAlign(this.stars, {\r\n                height: 1,\r\n                width: this.stars.length,\r\n                position: Phaser.Display.Align.TOP_CENTER,\r\n                cellWidth: cellWidth,\r\n                x: -(this.stars.length * cellWidth) / 2 + this.stars[0].width / 2,\r\n            });\r\n        };\r\n        LevelIconStars.prototype.finetuneAligment = function () {\r\n            var sideAngle = 30;\r\n            this.stars[0].angle = -sideAngle;\r\n            this.stars[2].angle = sideAngle;\r\n            this.stars[1].y -= 11.2;\r\n        };\r\n        LevelIconStars.prototype.setActiveNum = function (num) {\r\n            this.stars.forEach(function (star, index) {\r\n                var frame = index < num ? \"small_star\" : \"small_star_inactive\";\r\n                var alpha = index < num ? 1 : 0.66;\r\n                star.setFrame(frame);\r\n                star.alpha = alpha;\r\n            });\r\n        };\r\n        return LevelIconStars;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelIconStars = LevelIconStars;\r\n})(game || (game = {}));\r\n///<reference path='LevelIconStars.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelIconState;\r\n    (function (LevelIconState) {\r\n        LevelIconState[\"LOCKED\"] = \"LOCKED\";\r\n        LevelIconState[\"UNLOCKED\"] = \"UNLOCKED\";\r\n        LevelIconState[\"COMPLETE\"] = \"COMPLETE\";\r\n    })(LevelIconState = game.LevelIconState || (game.LevelIconState = {}));\r\n    var LevelIcon = /** @class */ (function (_super) {\r\n        __extends(LevelIcon, _super);\r\n        function LevelIcon(scene, data) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.iconData = data;\r\n            _this.name = \"level_icon_\" + _this.iconData.levelNumber.toString();\r\n            _this._levelNumber = _this.iconData.levelNumber;\r\n            _this.addBack();\r\n            _this.addUnlockedText();\r\n            _this.addCompleteText();\r\n            _this.addStars();\r\n            _this.setSize(_this.back.width, _this.back.height);\r\n            _this.setInitialState();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(LevelIcon.prototype, \"levelNumber\", {\r\n            get: function () {\r\n                return this._levelNumber;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(LevelIcon.prototype, \"iconState\", {\r\n            get: function () {\r\n                return this._iconState;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        LevelIcon.prototype.setInitialState = function () {\r\n            if (this.iconData.locked) {\r\n                this.setLocked();\r\n            }\r\n            else {\r\n                if (this.iconData.complete) {\r\n                    this.setComplete();\r\n                }\r\n                else {\r\n                    this.setUnlocked();\r\n                }\r\n            }\r\n        };\r\n        LevelIcon.prototype.setLocked = function () {\r\n            this._iconState = LevelIconState.LOCKED;\r\n            this.back.setFrame(\"LevelMapButtonButtonLocked\");\r\n            this.completeText.visible = false;\r\n            this.unlockedText.visible = false;\r\n            this.stars.visible = false;\r\n            this.removeInteractive();\r\n        };\r\n        LevelIcon.prototype.setUnlocked = function () {\r\n            this._iconState = LevelIconState.UNLOCKED;\r\n            this.back.setFrame(\"LevelMapButtonButtonRed\");\r\n            this.stars.visible = false;\r\n            this.completeText.visible = false;\r\n            this.unlockedText.visible = true;\r\n            this.setInteractive();\r\n            this.input.cursor = \"pointer\";\r\n        };\r\n        LevelIcon.prototype.setComplete = function () {\r\n            this._iconState = LevelIconState.COMPLETE;\r\n            this.back.setFrame(\"LevelMapButtonButtonBlue\");\r\n            this.stars.visible = true;\r\n            this.unlockedText.visible = false;\r\n            this.completeText.visible = true;\r\n            this.setInteractive();\r\n            this.input.cursor = \"pointer\";\r\n        };\r\n        LevelIcon.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"LevelMapButtonButtonBlue\");\r\n            this.add(this.back);\r\n        };\r\n        LevelIcon.prototype.addUnlockedText = function () {\r\n            this.unlockedText = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.LEVELS_MAP_NUMBERS_UNLOCKED, this._levelNumber.toString(), 32);\r\n            this.unlockedText.setOrigin(0.5, 0.5);\r\n            this.unlockedText.x = this.back.x;\r\n            this.unlockedText.y = this.back.y - 4;\r\n            this.add(this.unlockedText);\r\n        };\r\n        LevelIcon.prototype.addCompleteText = function () {\r\n            this.completeText = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.LEVELS_MAP_NUMBERS_COMPLETE, this._levelNumber.toString(), 32);\r\n            this.completeText.setOrigin(0.5, 0.5);\r\n            this.completeText.x = this.unlockedText.x;\r\n            this.completeText.y = this.unlockedText.y;\r\n            this.add(this.completeText);\r\n        };\r\n        LevelIcon.prototype.addStars = function () {\r\n            this.stars = new game.LevelIconStars(this.scene);\r\n            this.stars.x = 1;\r\n            this.stars.y = this.back.y - this.back.height / 2 - 11;\r\n            this.stars.setActiveNum(this.iconData.stars);\r\n            this.add(this.stars);\r\n        };\r\n        return LevelIcon;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelIcon = LevelIcon;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteStarEvent;\r\n    (function (LevelCompleteStarEvent) {\r\n        LevelCompleteStarEvent[\"EXPLODE\"] = \"explode\";\r\n    })(LevelCompleteStarEvent = game.LevelCompleteStarEvent || (game.LevelCompleteStarEvent = {}));\r\n    var LevelCompleteStar = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteStar, _super);\r\n        function LevelCompleteStar(scene, atlas, activeStarFrame, inactiveStarFrame, whiteStarFrame) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this._isActive = true;\r\n            _this.isTwinklingEnabled = true;\r\n            _this.name = \"star\";\r\n            _this.inactiveStar = _this.scene.add.image(0, 0, atlas, inactiveStarFrame);\r\n            _this.activeStar = _this.scene.add.image(0, 0, atlas, activeStarFrame);\r\n            _this.whiteStar = _this.scene.add.image(0, 0, atlas, whiteStarFrame).setVisible(false);\r\n            _this.hideActiveStar();\r\n            _this.add(_this.inactiveStar);\r\n            _this.add(_this.activeStar);\r\n            _this.add(_this.whiteStar);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(LevelCompleteStar.prototype, \"isActive\", {\r\n            get: function () {\r\n                return this._isActive;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        LevelCompleteStar.prototype.showActiveStar = function () {\r\n            this.activeStar.visible = true;\r\n            this.activeStar.active = true;\r\n            this._isActive = true;\r\n        };\r\n        LevelCompleteStar.prototype.hideActiveStar = function () {\r\n            this.activeStar.visible = false;\r\n            this.activeStar.active = false;\r\n            this._isActive = false;\r\n        };\r\n        LevelCompleteStar.prototype.tweenActiveStar = function (delay) {\r\n            var _this = this;\r\n            this.activeStar.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.activeStar,\r\n                delay: delay,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.activeStar.scale = 2.5;\r\n            this.scene.tweens.add({\r\n                targets: this.activeStar,\r\n                delay: delay,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scale: 1,\r\n                onStart: function () {\r\n                    _this.parentContainer.bringToTop(_this);\r\n                },\r\n                onComplete: function () {\r\n                    _this.inactiveStar.visible = false;\r\n                },\r\n            });\r\n            this.scene.time.delayedCall(delay + 300, function () {\r\n                _this.emit(LevelCompleteStarEvent.EXPLODE, _this);\r\n                _this.showWhiteStar();\r\n            });\r\n        };\r\n        LevelCompleteStar.prototype.showWhiteStar = function () {\r\n            var _this = this;\r\n            this.whiteStar.visible = true;\r\n            this.whiteStar.alpha = 0.4;\r\n            this.scene.tweens.add({\r\n                targets: this.whiteStar,\r\n                scale: { value: 1.55, duration: 400, ease: Phaser.Math.Easing.Linear.Linear },\r\n                alpha: { value: 0, duration: 400, ease: Phaser.Math.Easing.Cubic.Out },\r\n                onComplete: function () {\r\n                    _this.whiteStar.visible = false;\r\n                    _this.whiteStar.scale = 1;\r\n                    _this.twinkle();\r\n                },\r\n            });\r\n        };\r\n        LevelCompleteStar.prototype.twinkle = function () {\r\n            if (!this.isTwinklingEnabled) {\r\n                return;\r\n            }\r\n            this.scene.time.addEvent({\r\n                delay: 3000,\r\n                startAt: 2300,\r\n                loop: true,\r\n                callback: this.doTwinkle,\r\n                callbackScope: this,\r\n            });\r\n        };\r\n        LevelCompleteStar.prototype.doTwinkle = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: this.scale * 1.17,\r\n                yoyo: true,\r\n            });\r\n            this.twinkleWhiteStar();\r\n        };\r\n        LevelCompleteStar.prototype.twinkleWhiteStar = function () {\r\n            var _this = this;\r\n            this.whiteStar.visible = true;\r\n            this.whiteStar.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.whiteStar,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0.33,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.whiteStar,\r\n                        duration: 400,\r\n                        ease: Phaser.Math.Easing.Cubic.In,\r\n                        alpha: 0,\r\n                        onComplete: function () {\r\n                            _this.whiteStar.visible = false;\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        return LevelCompleteStar;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteStar = LevelCompleteStar;\r\n})(game || (game = {}));\r\n///<reference path='LevelCompleteStar.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteStarsEvent;\r\n    (function (LevelCompleteStarsEvent) {\r\n        LevelCompleteStarsEvent[\"ANIMATION_COMPLETE\"] = \"animation_complete\";\r\n    })(LevelCompleteStarsEvent = game.LevelCompleteStarsEvent || (game.LevelCompleteStarsEvent = {}));\r\n    var LevelCompleteStars = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteStars, _super);\r\n        function LevelCompleteStars(scene, props) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.SIDE_STAR_ANGLE = 15;\r\n            _this.SIDE_STAR_SCALE = 0.8;\r\n            _this.SIDE_STAR_X_OFFSET = 140;\r\n            _this.SIDE_STAR_Y = 26;\r\n            _this.activeStarsNum = 0;\r\n            _this.starsExploded = 0;\r\n            _this.name = \"stars\";\r\n            _this.props = props;\r\n            _this.addStars();\r\n            return _this;\r\n        }\r\n        LevelCompleteStars.prototype.addStars = function () {\r\n            this.leftStar = new game.LevelCompleteStar(this.scene, this.props.atlas, this.props.activeStarFrame, this.props.inactiveStarFrame, this.props.whiteStarFrame);\r\n            this.leftStar.angle = -this.SIDE_STAR_ANGLE;\r\n            this.leftStar.scale = this.SIDE_STAR_SCALE;\r\n            this.leftStar.x = -this.SIDE_STAR_X_OFFSET;\r\n            this.leftStar.y = this.SIDE_STAR_Y;\r\n            this.centralStar = new game.LevelCompleteStar(this.scene, this.props.atlas, this.props.activeStarFrame, this.props.inactiveStarFrame, this.props.whiteStarFrame);\r\n            this.rightStar = new game.LevelCompleteStar(this.scene, this.props.atlas, this.props.activeStarFrame, this.props.inactiveStarFrame, this.props.whiteStarFrame);\r\n            this.rightStar.angle = this.SIDE_STAR_ANGLE;\r\n            this.rightStar.scale = this.SIDE_STAR_SCALE;\r\n            this.rightStar.x = this.SIDE_STAR_X_OFFSET;\r\n            this.rightStar.y = this.SIDE_STAR_Y;\r\n            this.allStars = [this.leftStar, this.centralStar, this.rightStar];\r\n            this.add(this.allStars);\r\n            this.bringToTop(this.centralStar);\r\n        };\r\n        LevelCompleteStars.prototype.updateData = function (starsNum) {\r\n            this.activeStarsNum = starsNum;\r\n        };\r\n        LevelCompleteStars.prototype.showActiveStarsInstant = function () {\r\n            var _this = this;\r\n            this.allStars.forEach(function (star, index) {\r\n                if (index < _this.activeStarsNum) {\r\n                    star.showActiveStar();\r\n                }\r\n                else {\r\n                    star.hideActiveStar();\r\n                }\r\n            });\r\n        };\r\n        LevelCompleteStars.prototype.showActiveStars = function (initialDelay) {\r\n            var _this = this;\r\n            if (this.activeStarsNum === 0) {\r\n                this.emit(LevelCompleteStarsEvent.ANIMATION_COMPLETE, this);\r\n            }\r\n            this.allStars.forEach(function (star, index) {\r\n                if (index < _this.activeStarsNum) {\r\n                    var delay = initialDelay + index * 300;\r\n                    _this.playStarSound(index, delay);\r\n                    star.on(game.LevelCompleteStarEvent.EXPLODE, _this.onStarExplode, _this);\r\n                    star.showActiveStar();\r\n                    star.tweenActiveStar(delay);\r\n                }\r\n            });\r\n        };\r\n        LevelCompleteStars.prototype.playStarSound = function (index, initialDelay) {\r\n            var key = \"level_complete_star_show\" + (index + 1);\r\n            var delay = (initialDelay + 300) / 1000;\r\n            if (this.scene.cache.audio.has(key)) {\r\n                this.scene.sound.play(key, {\r\n                    volume: 1,\r\n                    delay: delay,\r\n                });\r\n            }\r\n        };\r\n        LevelCompleteStars.prototype.onStarExplode = function (star) {\r\n            if (this.explodeEmitter) {\r\n                var worldMatrix = star.getWorldTransformMatrix();\r\n                this.explodeEmitter.explode(16, worldMatrix.tx, worldMatrix.ty);\r\n            }\r\n            if (++this.starsExploded === this.activeStarsNum) {\r\n                this.emit(LevelCompleteStarsEvent.ANIMATION_COMPLETE, this);\r\n            }\r\n        };\r\n        LevelCompleteStars.prototype.addEmitter = function (atlas, particleFrame, depth) {\r\n            this.manager = this.scene.add.particles(atlas);\r\n            this.manager.setDepth(depth);\r\n            this.explodeEmitter = this.manager.createEmitter({\r\n                emitZone: {\r\n                    source: new Phaser.Geom.Circle(0, 0, 60),\r\n                    type: \"random\",\r\n                },\r\n                frame: particleFrame,\r\n                speed: 25,\r\n                scale: { start: 0.75, end: 0.15, ease: Phaser.Math.EasingString.Cubic },\r\n                alpha: { start: 0.75, end: 0, ease: Phaser.Math.EasingString.Cubic },\r\n                lifespan: 2000,\r\n                on: false,\r\n            });\r\n        };\r\n        LevelCompleteStars.prototype.startFloating = function () {\r\n            var _this = this;\r\n            this.allStars.forEach(function (star, index) {\r\n                _this.scene.tweens.add({\r\n                    targets: star,\r\n                    duration: 800,\r\n                    delay: index * 200,\r\n                    ease: Phaser.Math.Easing.Sine.InOut,\r\n                    y: \"-=14\",\r\n                    yoyo: true,\r\n                    repeat: -1,\r\n                });\r\n            });\r\n        };\r\n        return LevelCompleteStars;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteStars = LevelCompleteStars;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var _a;\r\n    game.ITEM_TYPE = \"item_type\";\r\n    var ItemType;\r\n    (function (ItemType) {\r\n        ItemType[\"TRIANGLE\"] = \"triangle\";\r\n        ItemType[\"BASIC_BLOCK\"] = \"basic_block\";\r\n        ItemType[\"DYNAMITE_BLOCK\"] = \"dynamite_block\";\r\n        ItemType[\"ICE_BLOCK\"] = \"ice_block\";\r\n        ItemType[\"ICE_RHOMB\"] = \"ice_rhomb\";\r\n        ItemType[\"ICE_OCTAGON\"] = \"ice_octagon\";\r\n        ItemType[\"PINATA_BLOCK\"] = \"pinata_block\";\r\n        ItemType[\"SHATTER_BLOCK\"] = \"shatter_block\";\r\n        ItemType[\"SHATTER_BLOCK_PIECE\"] = \"shatter_block_piece\";\r\n        ItemType[\"LIGHTNING\"] = \"lightning\";\r\n        ItemType[\"COLLECTABLE_BALL\"] = \"collectable_ball\";\r\n        ItemType[\"SPINNER\"] = \"spinner\";\r\n    })(ItemType = game.ItemType || (game.ItemType = {}));\r\n    var ItemTypeUtil = /** @class */ (function () {\r\n        function ItemTypeUtil() {\r\n        }\r\n        ItemTypeUtil.getAllTypes = function () {\r\n            return Object.values(ItemType);\r\n        };\r\n        ItemTypeUtil.isBlockType = function (type) {\r\n            return ItemTypeUtil.getBlockTypes().includes(type);\r\n        };\r\n        ItemTypeUtil.getBlockTypes = function () {\r\n            return ItemTypeUtil.BLOCK_TYPES;\r\n        };\r\n        ItemTypeUtil.getFrameName = function (itemType) {\r\n            return ItemTypeUtil.FRAMES_MAP[itemType];\r\n        };\r\n        ItemTypeUtil.isBlock = function (item) {\r\n            return ItemTypeUtil.isBlockType(item.itemType);\r\n        };\r\n        ItemTypeUtil.BLOCK_TYPES = [\r\n            ItemType.BASIC_BLOCK,\r\n            ItemType.TRIANGLE,\r\n            ItemType.DYNAMITE_BLOCK,\r\n            ItemType.ICE_BLOCK,\r\n            ItemType.ICE_RHOMB,\r\n            ItemType.ICE_OCTAGON,\r\n            ItemType.PINATA_BLOCK,\r\n            ItemType.SHATTER_BLOCK,\r\n            ItemType.SHATTER_BLOCK_PIECE,\r\n        ];\r\n        ItemTypeUtil.FRAMES_MAP = (_a = {},\r\n            _a[ItemType.BASIC_BLOCK] = \"blocks/basic_block_01\",\r\n            _a[ItemType.SHATTER_BLOCK] = \"blocks/shatter_block_02\",\r\n            _a[ItemType.SHATTER_BLOCK_PIECE] = \"blocks/shatter_block_02_left\",\r\n            _a[ItemType.TRIANGLE] = \"blocks/triangle_01\",\r\n            _a[ItemType.ICE_BLOCK] = \"blocks/ice_block\",\r\n            _a[ItemType.ICE_RHOMB] = \"blocks/ice_romb\",\r\n            _a[ItemType.ICE_OCTAGON] = \"blocks/ice_octagon\",\r\n            _a[ItemType.PINATA_BLOCK] = \"blocks/pinata_block\",\r\n            _a[ItemType.DYNAMITE_BLOCK] = \"blocks/dynamite_block\",\r\n            _a[ItemType.SPINNER] = \"spinner/spinner0001\",\r\n            _a[ItemType.LIGHTNING] = \"lightning/lightning0001\",\r\n            _a[ItemType.COLLECTABLE_BALL] = \"ball_collectable\",\r\n            _a);\r\n        return ItemTypeUtil;\r\n    }());\r\n    game.ItemTypeUtil = ItemTypeUtil;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var StartLevelPopupBlocksLabel = /** @class */ (function (_super) {\r\n        __extends(StartLevelPopupBlocksLabel, _super);\r\n        function StartLevelPopupBlocksLabel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"blocks_label\";\r\n            _this.addBack();\r\n            _this.addBlock();\r\n            _this.addText();\r\n            _this.align();\r\n            return _this;\r\n        }\r\n        StartLevelPopupBlocksLabel.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"popup/label_back\");\r\n            this.add(this.back);\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.addBlock = function () {\r\n            this.block = this.scene.add.image(0, 0, \"levels_map\", \"popup/blocks/basic_block_01\");\r\n            this.add(this.block);\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.addText = function () {\r\n            var content = this.getTextContent(0);\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"36px\",\r\n                color: \"#B72C35\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.add(this.text);\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.getTextContent = function (blocksNum) {\r\n            return this.scene.texts.start_level_popup.task.replace(\"#\", blocksNum.toString());\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.align = function () {\r\n            this.block.x = this.back.left + this.block.width / 2 + 20;\r\n            this.block.y = this.back.getCenter().y;\r\n            this.alignText();\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.alignText = function () {\r\n            var left = this.block.right;\r\n            var right = this.back.right;\r\n            var width = right - left;\r\n            this.text.setWordWrapWidth(width * 0.75);\r\n            this.text.x = left + width / 2;\r\n            this.text.y = this.back.getCenter().y;\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.updateData = function (blockType, blocksNum) {\r\n            this.block.setFrame(this.getBlockFrame(blockType));\r\n            this.text.text = this.getTextContent(blocksNum);\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.getBlockFrame = function (blocksType) {\r\n            var _a;\r\n            var prefix = \"popup/blocks/\";\r\n            var map = (_a = {},\r\n                _a[game.ItemType.BASIC_BLOCK] = prefix + \"basic_block_01\",\r\n                _a[game.ItemType.TRIANGLE] = prefix + \"triangle_01\",\r\n                _a[game.ItemType.ICE_BLOCK] = prefix + \"ice_block\",\r\n                _a[game.ItemType.PINATA_BLOCK] = prefix + \"pinata_block\",\r\n                _a[game.ItemType.DYNAMITE_BLOCK] = prefix + \"dynamite_block_3\",\r\n                _a);\r\n            return map[blocksType] || map[game.ItemType.BASIC_BLOCK];\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        StartLevelPopupBlocksLabel.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        return StartLevelPopupBlocksLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.StartLevelPopupBlocksLabel = StartLevelPopupBlocksLabel;\r\n})(game || (game = {}));\r\n///<reference path='StartLevelPopupBlocksLabel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var StartLevelPopup = /** @class */ (function (_super) {\r\n        __extends(StartLevelPopup, _super);\r\n        function StartLevelPopup(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"popup\";\r\n            _this.addBack();\r\n            _this.addBanner();\r\n            _this.addFoxBody();\r\n            _this.addBlocksLabel();\r\n            _this.addFoxPaws();\r\n            _this.addTick();\r\n            _this.addHighscore();\r\n            _this.addCloseButton();\r\n            _this.addFirefly();\r\n            _this.align();\r\n            _this.bringToTop(_this.highscore);\r\n            _this.bringToTop(_this.banner);\r\n            return _this;\r\n        }\r\n        StartLevelPopup.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"popup/popup_back\");\r\n            this.add(this.back);\r\n        };\r\n        StartLevelPopup.prototype.addBanner = function () {\r\n            var bannerBack = this.scene.make.image({\r\n                key: \"levels_map\",\r\n                frame: \"popup/banner\",\r\n                add: false,\r\n            });\r\n            var maxWidth = 360;\r\n            this.bannerText = this.createBannerText();\r\n            this.bannerText.setOrigin(0.5, 0.5);\r\n            this.bannerText.scale = Math.min(1, maxWidth / this.bannerText.width);\r\n            this.bannerText.y = -34;\r\n            this.bannerText.name = \"title\";\r\n            this.banner = this.scene.add.container(0, 0, [bannerBack, this.bannerText]);\r\n            this.add(this.banner);\r\n        };\r\n        StartLevelPopup.prototype.createBannerText = function () {\r\n            var text = this.scene.make.text({\r\n                add: false,\r\n                text: this.getBannerContent(1),\r\n                style: {\r\n                    fontFamily: game.GameFont.SOUSES,\r\n                    fontStyle: game.FontWeight.BLACK,\r\n                    fontSize: \"52px\",\r\n                    color: \"#FAD353\",\r\n                    align: \"center\",\r\n                },\r\n            });\r\n            text.setShadow(0, 4, \"rgba(0,0,0,0.15)\");\r\n            return text;\r\n        };\r\n        StartLevelPopup.prototype.getBannerContent = function (levelNumber) {\r\n            var template = this.scene.texts.start_level_popup.title;\r\n            return template.replace(\"#\", levelNumber.toString());\r\n        };\r\n        StartLevelPopup.prototype.addFoxBody = function () {\r\n            this.foxBody = this.scene.add.image(0, 0, \"levels_map\", \"popup/Fox\");\r\n            this.add(this.foxBody);\r\n        };\r\n        StartLevelPopup.prototype.addBlocksLabel = function () {\r\n            this.blocksLabel = new game.StartLevelPopupBlocksLabel(this.scene);\r\n            this.add(this.blocksLabel);\r\n        };\r\n        StartLevelPopup.prototype.addFoxPaws = function () {\r\n            this.foxPaws = this.scene.add.image(0, 0, \"levels_map\", \"popup/FoxPaws\");\r\n            this.add(this.foxPaws);\r\n        };\r\n        StartLevelPopup.prototype.addTick = function () {\r\n            this.tick = this.scene.add.image(0, 0, \"levels_map\", \"popup/tick\");\r\n            this.add(this.tick);\r\n        };\r\n        StartLevelPopup.prototype.addHighscore = function () {\r\n            this.highscoreBack = this.scene.add.image(0, 0, \"levels_map\", \"popup/highscore_label_back\");\r\n            this.add(this.highscoreBack);\r\n            var content = this.getHighscoreContent(0);\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"33px\",\r\n                color: \"#ECD397\",\r\n                align: \"center\",\r\n            };\r\n            this.highscore = this.scene.add.text(0, 0, content, style);\r\n            this.highscore.setOrigin(0.5, 0.5);\r\n            this.add(this.highscore);\r\n        };\r\n        StartLevelPopup.prototype.getHighscoreContent = function (value) {\r\n            var template = this.scene.texts.start_level_popup.highscore;\r\n            return template.replace(\"#\", value.toLocaleString());\r\n        };\r\n        StartLevelPopup.prototype.addCloseButton = function () {\r\n            this.closeButton = this.scene.add.button(\"levels_map\", \"popup/button_close\", this);\r\n            this.closeButton.setScrollFactor(0, 0);\r\n        };\r\n        StartLevelPopup.prototype.addFirefly = function () {\r\n            this.scene.anims.create({\r\n                key: \"firefly\",\r\n                repeat: -1,\r\n                frames: this.scene.anims.getFrameNames(\"levels_map\", \"decor/firefly/firefly\"),\r\n                frameRate: 24,\r\n            });\r\n            this.firefly = this.scene.add.sprite(0, 0, \"levels_map\", \"decor/firefly/firefly0002\");\r\n            this.firefly.play(\"firefly\");\r\n            this.firefly.scale = 0.66;\r\n            this.add(this.firefly);\r\n            this.scene.tweens.add({\r\n                targets: this.firefly,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"+=8\",\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.firefly,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                x: \"+=8\",\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        StartLevelPopup.prototype.align = function () {\r\n            this.alignBanner();\r\n            this.alignBlocksLabel();\r\n            this.alignTick();\r\n            this.alignFox();\r\n            this.alignHighscore();\r\n            this.alignCloseButton();\r\n            this.alignFirefly();\r\n        };\r\n        StartLevelPopup.prototype.alignFirefly = function () {\r\n            var Align = Phaser.Display.Align;\r\n            var margin = 45;\r\n            var align = Phaser.Math.RND.bool() ? Align.TOP_LEFT : Align.TOP_RIGHT;\r\n            Phaser.Display.Align.In.QuickSet(this.firefly, this.back, align, -margin, -margin);\r\n        };\r\n        StartLevelPopup.prototype.alignBanner = function () {\r\n            this.banner.y = this.back.top - 6;\r\n        };\r\n        StartLevelPopup.prototype.alignBlocksLabel = function () {\r\n            Phaser.Display.Align.In.Center(this.blocksLabel, this.back, 0, 16);\r\n        };\r\n        StartLevelPopup.prototype.alignTick = function () {\r\n            this.tick.x = this.blocksLabel.x + this.blocksLabel.getWidth() / 2 - 7;\r\n            this.tick.y = this.blocksLabel.y + this.blocksLabel.getHeight() / 2 - 14;\r\n        };\r\n        StartLevelPopup.prototype.alignFox = function () {\r\n            Phaser.Display.Align.To.TopCenter(this.foxBody, this.blocksLabel);\r\n            this.foxBody.x = this.blocksLabel.x;\r\n            this.foxPaws.x = this.foxBody.x - 1;\r\n            this.foxPaws.y = this.foxBody.y;\r\n        };\r\n        StartLevelPopup.prototype.alignHighscore = function () {\r\n            Phaser.Display.Align.In.BottomCenter(this.highscoreBack, this.back, 0, -57);\r\n            Phaser.Display.Align.In.Center(this.highscore, this.highscoreBack, 0, 0);\r\n        };\r\n        StartLevelPopup.prototype.alignCloseButton = function () {\r\n            var offset = this.closeButton.width / 2 - 6;\r\n            Phaser.Display.Align.In.TopRight(this.closeButton, this.back, offset, offset);\r\n        };\r\n        StartLevelPopup.prototype.updateData = function (data) {\r\n            this.bannerText.text = this.getBannerContent(data.levelNumber);\r\n            this.blocksLabel.updateData(data.blocksType, data.blocksNum);\r\n            this.tick.visible = data.levelComplete;\r\n            this.highscore.text = data.levelComplete ? this.getHighscoreContent(data.highscore) : this.getHighscoreContent(0);\r\n        };\r\n        StartLevelPopup.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        StartLevelPopup.prototype.getHeight = function () {\r\n            return this.back.displayHeight;\r\n        };\r\n        return StartLevelPopup;\r\n    }(Phaser.GameObjects.Container));\r\n    game.StartLevelPopup = StartLevelPopup;\r\n})(game || (game = {}));\r\n///<reference path='../../gameplay/gui/levelComplete/stars/LevelCompleteStars.ts' />\r\n///<reference path='../../gameplay/items/ItemType.ts' />\r\n///<reference path='StartLevelPopup.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var StartLevelScreenEvent;\r\n    (function (StartLevelScreenEvent) {\r\n        StartLevelScreenEvent[\"SHOW\"] = \"show\";\r\n        StartLevelScreenEvent[\"HIDE\"] = \"hide\";\r\n    })(StartLevelScreenEvent = game.StartLevelScreenEvent || (game.StartLevelScreenEvent = {}));\r\n    var StartLevelScreen = /** @class */ (function (_super) {\r\n        __extends(StartLevelScreen, _super);\r\n        function StartLevelScreen(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.backgroundAlpha = 0.75;\r\n            _this.levelNumber = 1;\r\n            _this.name = \"start_level_screen\";\r\n            _this.addBack();\r\n            _this.addStars();\r\n            _this.addPopup();\r\n            _this.addPlayButton();\r\n            _this.bringToTop(_this.popup);\r\n            return _this;\r\n        }\r\n        StartLevelScreen.prototype.addBack = function () {\r\n            this.background = this.scene.add.image(0, 0, \"levels_map\", \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.add(this.background);\r\n        };\r\n        StartLevelScreen.prototype.addStars = function () {\r\n            var props = {\r\n                atlas: \"levels_map\",\r\n                activeStarFrame: \"popup/star_with_glow\",\r\n                inactiveStarFrame: \"popup/star_inactive\",\r\n                whiteStarFrame: \"popup/star_white\",\r\n            };\r\n            this.stars = new game.LevelCompleteStars(this.scene, props);\r\n            this.stars.startFloating();\r\n            this.add(this.stars);\r\n        };\r\n        StartLevelScreen.prototype.addPopup = function () {\r\n            this.popup = new game.StartLevelPopup(this.scene);\r\n            this.popup.closeButton.on(ButtonEvent.RELEASE, this.hide, this);\r\n            this.add(this.popup);\r\n        };\r\n        StartLevelScreen.prototype.addPlayButton = function () {\r\n            this.playButton = this.scene.add.button(\"levels_map\", \"popup/button_play\", this);\r\n            this.playButton.setScrollFactor(0, 0);\r\n        };\r\n        StartLevelScreen.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.alignPopup();\r\n            this.alignStars();\r\n            this.alignPlayButton();\r\n        };\r\n        StartLevelScreen.prototype.resizeBackground = function () {\r\n            this.background.setDisplaySize(game.Config.GAME_WIDTH + 4, game.Config.GAME_HEIGHT + 4);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        StartLevelScreen.prototype.alignPopup = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.8;\r\n            var maxHeight = game.Config.GAME_HEIGHT * 0.42;\r\n            var scaleX = maxWidth / this.popup.getWidth();\r\n            var scaleY = maxHeight / this.popup.getHeight();\r\n            this.popup.scale = Math.min(scaleX, scaleY);\r\n            this.popup.x = game.Config.HALF_GAME_WIDTH;\r\n            this.popup.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        StartLevelScreen.prototype.alignStars = function () {\r\n            var popupTop = this.popup.y - (this.popup.getHeight() * this.popup.scale) / 2;\r\n            this.stars.scale = this.popup.scale;\r\n            this.stars.x = game.Config.HALF_GAME_WIDTH;\r\n            this.stars.y = popupTop - 200 * this.popup.scale;\r\n        };\r\n        StartLevelScreen.prototype.alignPlayButton = function () {\r\n            var popupBottom = this.popup.y + (this.popup.getHeight() * this.popup.scale) / 2;\r\n            this.playButton.scale = this.popup.scale;\r\n            this.playButton.x = game.Config.HALF_GAME_WIDTH;\r\n            this.playButton.y = popupBottom + this.playButton.displayHeight / 2 + 50 * this.playButton.scale;\r\n        };\r\n        StartLevelScreen.prototype.updateData = function (data) {\r\n            this.levelNumber = data.levelNumber;\r\n            this.stars.updateData(data.stars);\r\n            this.stars.showActiveStarsInstant();\r\n            this.popup.updateData(data);\r\n        };\r\n        StartLevelScreen.prototype.kill = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        StartLevelScreen.prototype.revive = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n        };\r\n        StartLevelScreen.prototype.show = function () {\r\n            this.emit(StartLevelScreenEvent.SHOW, this);\r\n            this.alpha = 1;\r\n            this.revive();\r\n            this.resize();\r\n            this.showBackground();\r\n            this.showItems(0);\r\n        };\r\n        StartLevelScreen.prototype.showBackground = function () {\r\n            this.background.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: this.backgroundAlpha,\r\n            });\r\n        };\r\n        StartLevelScreen.prototype.showItems = function (staggerDelay) {\r\n            var _this = this;\r\n            if (staggerDelay === void 0) { staggerDelay = 0; }\r\n            ;\r\n            [this.stars, this.popup, this.playButton].forEach(function (item, index) {\r\n                var delay = index * staggerDelay;\r\n                item.alpha = 0;\r\n                _this.scene.tweens.add({\r\n                    delay: delay,\r\n                    targets: item,\r\n                    alpha: { value: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 200 },\r\n                });\r\n                var originalScale = item.scale;\r\n                item.scale = originalScale * 0.85;\r\n                _this.scene.tweens.add({\r\n                    delay: delay,\r\n                    targets: item,\r\n                    duration: 1000,\r\n                    ease: Phaser.Math.Easing.Elastic.Out,\r\n                    easeParams: [0.1, 0.45],\r\n                    scale: originalScale,\r\n                });\r\n            });\r\n        };\r\n        StartLevelScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                    _this.emit(StartLevelScreenEvent.HIDE, _this);\r\n                },\r\n            });\r\n        };\r\n        StartLevelScreen.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return StartLevelScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.StartLevelScreen = StartLevelScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelsMapFire = /** @class */ (function (_super) {\r\n        __extends(LevelsMapFire, _super);\r\n        function LevelsMapFire(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.originalX = 0;\r\n            _this.originalY = 0;\r\n            _this.name = \"fire\";\r\n            _this.base = _this.scene.add.image(0, 0, \"levels_map\", \"decor/fire_base\");\r\n            _this.flame = _this.scene.add.image(0, 0, \"levels_map\", \"decor/fire_flame\");\r\n            _this.add([_this.base, _this.flame]);\r\n            _this.animateFlame();\r\n            return _this;\r\n        }\r\n        LevelsMapFire.prototype.animateFlame = function () {\r\n            this.flame.angle = -4;\r\n            this.scene.tweens.add({\r\n                targets: this.flame,\r\n                duration: 900,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                angle: Math.abs(this.flame.angle),\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.flame,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.02,\r\n                scaleY: 0.87,\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        return LevelsMapFire;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelsMapFire = LevelsMapFire;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelMapCloud = /** @class */ (function (_super) {\r\n        __extends(LevelMapCloud, _super);\r\n        function LevelMapCloud(scene, frame, worldWidth) {\r\n            var _this = _super.call(this, scene, 0, 0, \"levels_map\", frame) || this;\r\n            _this.velocity = 0;\r\n            _this.worldWidth = worldWidth;\r\n            _this.velocity = Phaser.Math.RND.realInRange(0.05, 0.1);\r\n            return _this;\r\n        }\r\n        LevelMapCloud.prototype.preUpdate = function (time, delta) {\r\n            this.x += this.velocity * delta;\r\n            if (this.x > this.worldWidth + this.width / 2) {\r\n                this.x = -this.width / 2;\r\n            }\r\n        };\r\n        LevelMapCloud.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return LevelMapCloud;\r\n    }(Phaser.GameObjects.Image));\r\n    game.LevelMapCloud = LevelMapCloud;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Scrollbar = /** @class */ (function (_super) {\r\n        __extends(Scrollbar, _super);\r\n        function Scrollbar(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, \"levels_map\", \"scrollbar\") || this;\r\n            _this.isDragged = false;\r\n            _this.scrollTop = 0;\r\n            _this.scrollBottom = 0;\r\n            _this.scrollHeight = 0;\r\n            _this.setInteractive();\r\n            _this.input.cursor = \"pointer\";\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_DRAG_START, _this.onScrollbarDragStart, _this);\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_DRAG_END, _this.onScrollbarDragEnd, _this);\r\n            return _this;\r\n        }\r\n        Scrollbar.prototype.onScrollbarDragStart = function (pointer) {\r\n            this.isDragged = true;\r\n        };\r\n        Scrollbar.prototype.onScrollbarDragEnd = function () {\r\n            this.isDragged = false;\r\n        };\r\n        Scrollbar.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        Scrollbar.prototype.onResize = function () {\r\n            var scrollOffset = this.displayHeight / 2 + 6 * this.scaleY;\r\n            this.scrollTop = scrollOffset;\r\n            this.scrollBottom = game.Config.GAME_HEIGHT - scrollOffset;\r\n            this.scrollHeight = this.scrollBottom - this.scrollTop;\r\n        };\r\n        return Scrollbar;\r\n    }(Phaser.GameObjects.Image));\r\n    game.Scrollbar = Scrollbar;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Avatar = /** @class */ (function (_super) {\r\n        __extends(Avatar, _super);\r\n        function Avatar(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.originalScale = 1;\r\n            _this.wasInCamera = false;\r\n            _this.name = \"fox_avatar\";\r\n            _this.addFox();\r\n            _this.addBack();\r\n            _this.setInteractive(_this.back.getBounds(), Phaser.Geom.Rectangle.Contains);\r\n            _this.input.cursor = \"pointer\";\r\n            return _this;\r\n        }\r\n        Avatar.prototype.enableInput = function () {\r\n            this.input.enabled = true;\r\n        };\r\n        Avatar.prototype.disableInput = function () {\r\n            this.input.enabled = false;\r\n        };\r\n        Avatar.prototype.addFox = function () {\r\n            this.fox = this.scene.add.image(0, 0, \"levels_map\", \"avatar_fox\");\r\n            this.add(this.fox);\r\n        };\r\n        Avatar.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"avatar_back\");\r\n            this.add(this.back);\r\n        };\r\n        Avatar.prototype.lookUp = function () {\r\n            this.back.angle = -180;\r\n        };\r\n        Avatar.prototype.lookBottom = function () {\r\n            this.back.angle = 0;\r\n        };\r\n        Avatar.prototype.getDisplayHeight = function () {\r\n            return (this.fox.height + 50) * this.scaleY;\r\n        };\r\n        Avatar.prototype.scaleTo = function (scaleK) {\r\n            if (this.scaleTween) {\r\n                this.scaleTween.remove();\r\n                this.scaleTween = null;\r\n            }\r\n            this.scaleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                scale: this.originalScale * scaleK,\r\n            });\r\n            return this.scaleTween;\r\n        };\r\n        Avatar.prototype.startWiggle = function () {\r\n            this.wiggleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: this.originalScale * 0.9,\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        Avatar.prototype.stopWiggle = function () {\r\n            if (this.wiggleTween) {\r\n                this.wiggleTween.remove();\r\n                this.wiggleTween = null;\r\n            }\r\n        };\r\n        return Avatar;\r\n    }(Phaser.GameObjects.Container));\r\n    game.Avatar = Avatar;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LanguagesButton = /** @class */ (function (_super) {\r\n        __extends(LanguagesButton, _super);\r\n        function LanguagesButton(scene, parent) {\r\n            var _this = _super.call(this, scene) || this;\r\n            if (parent) {\r\n                parent.add(_this);\r\n            }\r\n            else {\r\n                _this.scene.add.existing(_this);\r\n            }\r\n            _this.addBack();\r\n            _this.addArrows();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        LanguagesButton.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"levels_map\", \"settings_screen/button_large_base\");\r\n            this.add(this.back);\r\n        };\r\n        LanguagesButton.prototype.addArrows = function () {\r\n            var dx = 160;\r\n            var y = -6;\r\n            this.leftArrow = this.scene.add.button(\"levels_map\", \"settings_screen/arrow_left\", this);\r\n            this.leftArrow.x = -dx;\r\n            this.rightArrow = this.scene.add.button(\"levels_map\", \"settings_screen/arrow_right\", this);\r\n            this.rightArrow.x = dx;\r\n            var arrows = [this.leftArrow, this.rightArrow];\r\n            arrows.forEach(function (arrow) {\r\n                arrow.setScrollFactor(0);\r\n                arrow.y = y;\r\n            });\r\n        };\r\n        LanguagesButton.prototype.addText = function () {\r\n            this.text = this.scene.add.text(0, 0, \"Language\", this.getTextStyle());\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.x = 6;\r\n            this.text.y = -12;\r\n            this.add(this.text);\r\n        };\r\n        LanguagesButton.prototype.getTextStyle = function () {\r\n            return {\r\n                color: \"#FFFFFF\",\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"45px\",\r\n                align: \"center\",\r\n                padding: {\r\n                    x: 2,\r\n                    y: 6,\r\n                },\r\n                shadow: {\r\n                    fill: true,\r\n                    blur: 0,\r\n                    offsetY: 3,\r\n                    color: \"rgba(0,0,0,0.2)\",\r\n                },\r\n            };\r\n        };\r\n        LanguagesButton.prototype.updateText = function (content) {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this.text);\r\n            this.scene.tweens.add({\r\n                targets: this.text,\r\n                duration: 66,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.text.setText(content);\r\n                    _this.adjustTextSize();\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.text,\r\n                        duration: 150,\r\n                        ease: Phaser.Math.Easing.Cubic.Out,\r\n                        alpha: 1,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        LanguagesButton.prototype.adjustTextSize = function () {\r\n            var left = this.leftArrow.right;\r\n            var right = this.rightArrow.left;\r\n            var width = right - left;\r\n            var maxWidth = width * 0.9;\r\n            this.text.scale = Math.min(1, maxWidth / this.text.width);\r\n        };\r\n        return LanguagesButton;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LanguagesButton = LanguagesButton;\r\n})(game || (game = {}));\r\n///<reference path='LanguagesButton.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ToggleButtonState = Phaser.GameObjects.ToggleButtonState;\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var SettingsScreenContent = /** @class */ (function (_super) {\r\n        __extends(SettingsScreenContent, _super);\r\n        function SettingsScreenContent(scene, atlasKey) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.atlasKey = atlasKey;\r\n            _this.name = \"buttons_container\";\r\n            _this.addBackground();\r\n            _this.addButtons();\r\n            _this.addRoboWhaleInfo();\r\n            _this.alignItems();\r\n            _this.settingsContent = [_this.soundButton, _this.deleteButton, _this.fullscreenButton, _this.languagesButton];\r\n            _this.settingsContent.forEach(function (button) {\r\n                button.setScrollFactor(0);\r\n            });\r\n            _this.creditsContent = [_this.robowhaleInfo];\r\n            _this.settingsButton.buttonState = ToggleButtonState.STATE_2;\r\n            _this.showSettingsContent();\r\n            return _this;\r\n        }\r\n        SettingsScreenContent.prototype.showContent = function (content) {\r\n            content.forEach(function (item) { return (item.visible = true); });\r\n            this.scene.tweens.add({\r\n                targets: content,\r\n                alpha: { from: 0, to: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 200 },\r\n                scale: { from: 0.75, to: 1, ease: Phaser.Math.Easing.Back.Out, duration: 400 },\r\n            });\r\n        };\r\n        SettingsScreenContent.prototype.hideContent = function (content) {\r\n            content.forEach(function (item) { return (item.visible = false); });\r\n        };\r\n        SettingsScreenContent.prototype.showSettingsContent = function () {\r\n            this.showContent(this.settingsContent);\r\n            this.hideContent(this.creditsContent);\r\n            this.settingsButton.disableInteractive();\r\n            this.creditsButton.buttonState = ToggleButtonState.STATE_1;\r\n            this.creditsButton.setInteractive();\r\n        };\r\n        SettingsScreenContent.prototype.showCreditsContent = function () {\r\n            this.showContent(this.creditsContent);\r\n            this.hideContent(this.settingsContent);\r\n            this.creditsButton.disableInteractive();\r\n            this.settingsButton.buttonState = ToggleButtonState.STATE_1;\r\n            this.settingsButton.setInteractive();\r\n        };\r\n        SettingsScreenContent.prototype.sendCreditsCheckEvent = function () {\r\n            this.scene.analytics.sendDesignEvent(\"Credits\");\r\n        };\r\n        SettingsScreenContent.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, this.atlasKey, \"white_rect\");\r\n            this.background.displayWidth = 465;\r\n            this.background.displayHeight = 485;\r\n            this.background.alpha = 0;\r\n            this.add(this.background);\r\n        };\r\n        SettingsScreenContent.prototype.addButtons = function () {\r\n            this.settingsButton = this.scene.add.toggleButton(this.atlasKey, \"settings_screen/button_settings\", \"settings_screen/button_settings_inactive\", this);\r\n            this.settingsButton.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP, this.showSettingsContent, this);\r\n            this.settingsButton.setScrollFactor(0);\r\n            this.creditsButton = this.scene.add.toggleButton(this.atlasKey, \"settings_screen/button_credits\", \"settings_screen/button_credits_inactive\", this);\r\n            this.creditsButton.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP, this.showCreditsContent, this);\r\n            this.creditsButton.once(Phaser.Input.Events.GAMEOBJECT_POINTER_UP, this.sendCreditsCheckEvent, this);\r\n            this.creditsButton.setScrollFactor(0);\r\n            this.soundButton = this.scene.add.soundButton(this.atlasKey, \"settings_screen/button_sound_on\", \"settings_screen/button_sound_off\", this);\r\n            this.deleteButton = this.scene.add.button(this.atlasKey, \"settings_screen/button_delete\", this);\r\n            this.deleteButton.on(ButtonEvent.RELEASE, this.onDeleteDataButtonClick, this);\r\n            this.fullscreenButton = this.scene.add.toggleButton(this.atlasKey, \"settings_screen/button_fullscreen_on\", \"settings_screen/button_fullscreen_off\", this);\r\n            this.disableFullscreenButton();\r\n            this.addLanguageButton();\r\n        };\r\n        SettingsScreenContent.prototype.addLanguageButton = function () {\r\n            var content = game.getLanguageTitle(this.scene.game.texts.language);\r\n            this.languagesButton = new game.LanguagesButton(this.scene, this);\r\n            this.languagesButton.leftArrow.on(ButtonEvent.PRESS, this.updateLanguage.bind(this, -1));\r\n            this.languagesButton.rightArrow.on(ButtonEvent.PRESS, this.updateLanguage.bind(this, 1));\r\n            this.languagesButton.updateText(content);\r\n        };\r\n        SettingsScreenContent.prototype.updateLanguage = function (direction) {\r\n            var texts = this.scene.game.texts;\r\n            var currentLanguage = texts.language;\r\n            var languages = texts.allLanguages;\r\n            var currentIndex = languages.indexOf(currentLanguage);\r\n            var newIndex = Phaser.Math.Wrap(currentIndex + direction, 0, languages.length);\r\n            var newLanguage = languages[newIndex];\r\n            this.scene.game.store.saveValue(game.GameStoreKey.LANGUAGE, newLanguage);\r\n            this.scene.game.texts.setLanguage(newLanguage);\r\n            this.languagesButton.updateText(game.getLanguageTitle(newLanguage));\r\n        };\r\n        SettingsScreenContent.prototype.onDeleteDataButtonClick = function () {\r\n            var _this = this;\r\n            if (this.scene.game.device.os.iOS === false) {\r\n                this.clearSavedData();\r\n                return;\r\n            }\r\n            this.scene.game.audio.suspendAudioContext()\r\n                .finally(function () {\r\n                _this.clearSavedData();\r\n                _this.scene.game.audio.resumeAudioContext();\r\n            });\r\n        };\r\n        SettingsScreenContent.prototype.clearSavedData = function () {\r\n            var title = this.scene.texts.clear_save;\r\n            var subtitle = this.scene.texts.progress_lost_warinig;\r\n            var doClear = typeof window.confirm !== \"undefined\" ? window.confirm(title + \"\\n\" + subtitle) : true;\r\n            if (doClear) {\r\n                this.scene.game.store.clear();\r\n                this.scene.game.restartScene(this.scene.scene.key);\r\n            }\r\n        };\r\n        SettingsScreenContent.prototype.addRoboWhaleInfo = function () {\r\n            this.robowhaleInfo = this.scene.add.image(0, 0, this.atlasKey, \"settings_screen/robowhale_info\");\r\n            // this.robowhaleInfo.setInteractive()\r\n            // this.robowhaleInfo.input.cursor = \"pointer\"\r\n            // this.robowhaleInfo.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this.onRobowhaleClick, this)\r\n            this.add(this.robowhaleInfo);\r\n        };\r\n        SettingsScreenContent.prototype.onRobowhaleClick = function () {\r\n            window.open(\"https://robowhale.com/?utm_source=Bouncy_Woods\");\r\n        };\r\n        SettingsScreenContent.prototype.alignItems = function () {\r\n            var bounds = this.background.getBounds();\r\n            var xOffset = 86;\r\n            var topButtonsY = bounds.top + this.settingsButton.displayHeight / 2;\r\n            this.settingsButton.x = bounds.centerX - xOffset;\r\n            this.settingsButton.y = topButtonsY;\r\n            this.creditsButton.x = bounds.centerX + xOffset;\r\n            this.creditsButton.y = topButtonsY;\r\n            var middleButtonsY = bounds.centerY;\r\n            this.soundButton.x = bounds.left + this.soundButton.displayWidth / 2;\r\n            this.soundButton.y = middleButtonsY;\r\n            this.deleteButton.x = bounds.centerX;\r\n            this.deleteButton.y = middleButtonsY;\r\n            this.fullscreenButton.x = bounds.right - this.fullscreenButton.displayWidth / 2;\r\n            this.fullscreenButton.y = middleButtonsY;\r\n            this.languagesButton.y = bounds.bottom - this.languagesButton.getBounds().height / 2;\r\n            this.robowhaleInfo.bottom = bounds.bottom;\r\n        };\r\n        SettingsScreenContent.prototype.disableFullscreenButton = function () {\r\n            this.fullscreenButton.setFrame(\"settings_screen/button_fullscreen_disabled\");\r\n            this.fullscreenButton.removeInteractive();\r\n        };\r\n        SettingsScreenContent.prototype.getWidth = function () {\r\n            return this.background.displayWidth;\r\n        };\r\n        return SettingsScreenContent;\r\n    }(Phaser.GameObjects.Container));\r\n    game.SettingsScreenContent = SettingsScreenContent;\r\n})(game || (game = {}));\r\n///<reference path='SettingsScreenContent.ts' />\r\nvar game;\r\n(function (game) {\r\n    var SettingsScreenEvent;\r\n    (function (SettingsScreenEvent) {\r\n        SettingsScreenEvent[\"SHOW\"] = \"SettingsScreen_show\";\r\n        SettingsScreenEvent[\"HIDE\"] = \"SettingsScreen_hide\";\r\n    })(SettingsScreenEvent = game.SettingsScreenEvent || (game.SettingsScreenEvent = {}));\r\n    var SettingsScreen = /** @class */ (function (_super) {\r\n        __extends(SettingsScreen, _super);\r\n        function SettingsScreen(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.atlasKey = \"levels_map\";\r\n            _this.backgroundAlpha = 0.85;\r\n            _this.name = \"settings_screen\";\r\n            _this.addBackground();\r\n            _this.addCloseButton();\r\n            _this.addContent();\r\n            _this.addBuildInfo();\r\n            return _this;\r\n        }\r\n        SettingsScreen.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, this.atlasKey, \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.add(this.background);\r\n        };\r\n        SettingsScreen.prototype.addCloseButton = function () {\r\n            this.closeButton = this.scene.add.button(this.atlasKey, \"settings_screen/button_small_close\", this);\r\n            this.closeButton.setScrollFactor(0);\r\n        };\r\n        SettingsScreen.prototype.addContent = function () {\r\n            this.content = new game.SettingsScreenContent(this.scene, this.atlasKey);\r\n            this.add(this.content);\r\n        };\r\n        SettingsScreen.prototype.addBuildInfo = function () {\r\n            var buildVersion = window.game.config.build_version;\r\n            var buildDate = window.game.config.build_time;\r\n            var content = \"Build #\" + buildVersion + \" \" + buildDate;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: \"normal\",\r\n                fontSize: \"24px\",\r\n                color: \"#ffffff\",\r\n            };\r\n            var alpha = 0.75;\r\n            this.buildInfo = this.scene.add.text(0, 0, content, style);\r\n            this.buildInfo.setOrigin(0.5, 1);\r\n            this.buildInfo.alpha = alpha;\r\n            this.buildInfo.setData(\"originalAlpha\", alpha);\r\n            this.add(this.buildInfo);\r\n        };\r\n        SettingsScreen.prototype.resize = function (settingsButton) {\r\n            this.resizeBackground();\r\n            this.alignCloseButton(settingsButton);\r\n            this.resizeButtons();\r\n            this.alignBuildInfo();\r\n        };\r\n        SettingsScreen.prototype.resizeBackground = function () {\r\n            this.background.setDisplaySize(game.Config.GAME_WIDTH + 4, game.Config.GAME_HEIGHT + 4);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        SettingsScreen.prototype.alignCloseButton = function (settingsButton) {\r\n            this.closeButton.scale = settingsButton.scale;\r\n            this.closeButton.x = settingsButton.x;\r\n            this.closeButton.y = settingsButton.y;\r\n        };\r\n        SettingsScreen.prototype.resizeButtons = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.6;\r\n            this.content.scale = Math.min(1, maxWidth / this.content.getWidth());\r\n            this.content.x = game.Config.HALF_GAME_WIDTH;\r\n            this.content.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        SettingsScreen.prototype.alignBuildInfo = function () {\r\n            this.buildInfo.scale = this.content.scale;\r\n            this.buildInfo.x = game.Config.HALF_GAME_WIDTH;\r\n            this.buildInfo.y = game.Config.GAME_HEIGHT - 25;\r\n        };\r\n        SettingsScreen.prototype.kill = function () {\r\n            this.active = false;\r\n            this.visible = false;\r\n        };\r\n        SettingsScreen.prototype.revive = function () {\r\n            this.active = true;\r\n            this.visible = true;\r\n        };\r\n        SettingsScreen.prototype.show = function () {\r\n            this.revive();\r\n            this.alpha = 1;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: { from: 0, to: this.backgroundAlpha },\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.buildInfo,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: { from: 0, to: this.buildInfo.getData(\"originalAlpha\") },\r\n            });\r\n            var originalScale = this.content.scale;\r\n            this.scene.tweens.add({\r\n                targets: this.content,\r\n                alpha: { from: 0, to: 1, duration: 200, ease: Phaser.Math.Easing.Cubic.Out },\r\n                scale: {\r\n                    from: originalScale * 0.8,\r\n                    to: originalScale,\r\n                    duration: 400,\r\n                    ease: Phaser.Math.Easing.Back.Out,\r\n                },\r\n            });\r\n            this.emit(SettingsScreenEvent.SHOW, this);\r\n        };\r\n        SettingsScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                    _this.emit(SettingsScreenEvent.HIDE, _this);\r\n                },\r\n            });\r\n        };\r\n        return SettingsScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.SettingsScreen = SettingsScreen;\r\n})(game || (game = {}));\r\n///<reference path='LevelIcon.ts' />\r\n///<reference path='startLevel/StartLevelScreen.ts' />\r\n///<reference path='decor/LevelsMapFire.ts' />\r\n///<reference path='decor/LevelMapCloud.ts' />\r\n///<reference path='Scrollbar.ts' />\r\n///<reference path='Avatar.ts' />\r\n///<reference path='./settings/SettingsScreen.ts' />\r\nvar game;\r\n(function (game) {\r\n    var FixedKeyControl = Phaser.Cameras.Controls.FixedKeyControl;\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var LevelsMapDecor;\r\n    (function (LevelsMapDecor) {\r\n        LevelsMapDecor[\"CLOUD\"] = \"cloud\";\r\n        LevelsMapDecor[\"FIRE\"] = \"fire\";\r\n        LevelsMapDecor[\"FOX\"] = \"fox\";\r\n        LevelsMapDecor[\"FOX_IN_HOLE\"] = \"fox_in_hole\";\r\n    })(LevelsMapDecor = game.LevelsMapDecor || (game.LevelsMapDecor = {}));\r\n    var LevelsMap = /** @class */ (function (_super) {\r\n        __extends(LevelsMap, _super);\r\n        function LevelsMap() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.pointerWasDragged = false;\r\n            return _this;\r\n        }\r\n        LevelsMap.prototype.init = function () {\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            this.config = this.cache.json.get(LevelsMap.CONFIG_KEY);\r\n            this.pointerDownPosition = { x: 0, y: 0 };\r\n            this.pointerWasDragged = false;\r\n            this.cameraScrollTween = null;\r\n            this.wheelListener = null;\r\n        };\r\n        LevelsMap.prototype.create = function () {\r\n            this.addMainContainer();\r\n            this.addBackgrounds();\r\n            this.addFoxInHole();\r\n            this.addLevelIcons();\r\n            this.addFire();\r\n            this.addFireEmitterManager();\r\n            this.addAvatar();\r\n            this.addClouds();\r\n            this.addScrollbar();\r\n            this.addSettingsButton();\r\n            this.addStartLevelPopup();\r\n            this.addSettingsScreen();\r\n            // this.pointAvatarToLastUnlockedLevel()\r\n            this.setupCamera();\r\n            this.addCameraKeyboardControl();\r\n            this.addCameraScroll();\r\n            this.addPointerCallbacks();\r\n            this.addKeyboardCallbacks();\r\n            this.resize();\r\n            this.doInitialCameraScroll();\r\n            // this.scrollToBottom()\r\n            // this.scrollToLevel(31)\r\n            // this.openStartLevelPopup(21)\r\n            if (utils.NetUtil.getParamBool(\"unlockLevels\")) {\r\n                this.unlockAllLevels();\r\n            }\r\n        };\r\n        LevelsMap.prototype.addMainContainer = function () {\r\n            this.mainContainer = this.add.container(0, 0);\r\n            this.mainContainer.name = \"main\";\r\n        };\r\n        LevelsMap.prototype.addBackgrounds = function () {\r\n            var _this = this;\r\n            this.backgrounds = this.config.backgrounds.map(function (frame, index) {\r\n                var bg = _this.add.image(0, 0, frame);\r\n                bg.setOrigin(0, 0);\r\n                bg.y = index * bg.height;\r\n                _this.mainContainer.add(bg);\r\n                return bg;\r\n            });\r\n        };\r\n        LevelsMap.prototype.addFoxInHole = function () {\r\n            var config = this.getDecorConfig(LevelsMapDecor.FOX_IN_HOLE);\r\n            if (!config) {\r\n                return;\r\n            }\r\n            this.anims.create({\r\n                key: LevelsMapDecor.FOX_IN_HOLE,\r\n                repeat: -1,\r\n                repeatDelay: 7000,\r\n                frames: this.anims.getFrameNames(\"levels_map\", \"decor/fox_in_hole/FOX_in_HOLE\"),\r\n                frameRate: 15,\r\n            });\r\n            this.foxInHole = this.add.sprite(0, 0, \"levels_map\", \"decor/fox_in_hole/FOX_in_HOLE0001\");\r\n            this.foxInHole.x = config.x;\r\n            this.foxInHole.y = config.y;\r\n            this.foxInHole.anims.delayedPlay(1500, LevelsMapDecor.FOX_IN_HOLE);\r\n            this.mainContainer.add(this.foxInHole);\r\n            this.sys.updateList.add(this.foxInHole);\r\n        };\r\n        LevelsMap.prototype.addLevelIcons = function () {\r\n            var _this = this;\r\n            this.levelIcons = this.config.level_icons.map(function (config) {\r\n                var data = _this.getLevelIconData(config.level_number);\r\n                var icon = new game.LevelIcon(_this, data);\r\n                icon.x = config.x;\r\n                icon.y = config.y;\r\n                icon.setData(\"type\", \"LevelIcon\");\r\n                _this.mainContainer.add(icon);\r\n                return icon;\r\n            });\r\n            this.lastUnlockedIcon = this.getLastUnlockedLevelIcon();\r\n        };\r\n        LevelsMap.prototype.getLevelIconData = function (levelNumber) {\r\n            var levelResult = this.game.store.getLevelResult(levelNumber);\r\n            if (levelResult) {\r\n                return {\r\n                    levelNumber: levelNumber,\r\n                    complete: true,\r\n                    locked: false,\r\n                    stars: levelResult.stars,\r\n                };\r\n            }\r\n            return {\r\n                levelNumber: levelNumber,\r\n                complete: false,\r\n                locked: this.isLevelLocked(levelNumber),\r\n                stars: 0,\r\n            };\r\n        };\r\n        LevelsMap.prototype.isLevelLocked = function (levelNumber) {\r\n            if (levelNumber === 1) {\r\n                return false;\r\n            }\r\n            var prevLevelNumber = levelNumber - 1;\r\n            var prevLevelResult = this.game.store.getLevelResult(prevLevelNumber);\r\n            return !prevLevelResult;\r\n        };\r\n        LevelsMap.prototype.gotoLevel = function (levelNumber) {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.GAMEPLAY_ROOT, { levelNumber: levelNumber });\r\n        };\r\n        LevelsMap.prototype.addFire = function () {\r\n            var fireConfig = this.getDecorConfig(LevelsMapDecor.FIRE);\r\n            if (!fireConfig) {\r\n                return;\r\n            }\r\n            this.fire = new game.LevelsMapFire(this);\r\n            this.fire.originalX = fireConfig.x;\r\n            this.fire.originalY = fireConfig.y;\r\n            this.add.existing(this.fire);\r\n        };\r\n        LevelsMap.prototype.getDecorConfig = function (decorType) {\r\n            return this.config.decor.find(function (config) { return config.type === decorType; });\r\n        };\r\n        LevelsMap.prototype.addFireEmitterManager = function () {\r\n            this.fireEmitterManager = this.add.particles(\"levels_map\", \"decor/fire_particle\");\r\n        };\r\n        LevelsMap.prototype.addAvatar = function () {\r\n            this.avatar = new game.Avatar(this);\r\n            this.avatar.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP, this.onAvatarClick, this);\r\n            this.add.existing(this.avatar);\r\n        };\r\n        LevelsMap.prototype.onAvatarClick = function () {\r\n            var _this = this;\r\n            if (this.cameraScrollTween) {\r\n                return;\r\n            }\r\n            var levelIcon = this.lastUnlockedIcon;\r\n            if (!levelIcon) {\r\n                return;\r\n            }\r\n            this.game.audio.playClickSound();\r\n            this.cameraScroll.resetScroll();\r\n            var targetY = Phaser.Display.Bounds.GetCenterY(levelIcon) * this.mainContainer.scale - game.Config.GAME_HEIGHT / 2;\r\n            this.cameraScrollTween = this.tweens.add({\r\n                targets: this.camera,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                scrollY: targetY,\r\n                onComplete: function () {\r\n                    _this.cameraScrollTween = null;\r\n                },\r\n            });\r\n        };\r\n        LevelsMap.prototype.addClouds = function () {\r\n            var _this = this;\r\n            this.clouds = this.config.decor\r\n                .filter(function (item) { return item.type === LevelsMapDecor.CLOUD; })\r\n                .map(function (cloudConfig) {\r\n                var cloud = new game.LevelMapCloud(_this, cloudConfig.frame, _this.backgrounds[0].width);\r\n                cloud.x = cloudConfig.x;\r\n                cloud.y = cloudConfig.y;\r\n                _this.mainContainer.add(cloud);\r\n                _this.sys.updateList.add(cloud);\r\n                return cloud;\r\n            });\r\n        };\r\n        LevelsMap.prototype.addScrollbar = function () {\r\n            this.scrollbar = new game.Scrollbar(this);\r\n            this.scrollbar.setScrollFactor(0);\r\n            this.scrollbar.alpha = 0.5;\r\n            this.scrollbar.on(Phaser.Input.Events.GAMEOBJECT_DRAG_START, this.onDragStart, this);\r\n            this.scrollbar.on(Phaser.Input.Events.GAMEOBJECT_DRAG_END, this.onDragEnd, this);\r\n            this.add.existing(this.scrollbar);\r\n            this.input.setDraggable(this.scrollbar);\r\n        };\r\n        LevelsMap.prototype.onDragStart = function () {\r\n            var _this = this;\r\n            document.onpointermove = function (event) {\r\n                _this.setScrollbarY(_this.scale.transformY(event.pageY));\r\n                _this.updateCameraByScrollbar();\r\n            };\r\n        };\r\n        LevelsMap.prototype.onDragEnd = function () {\r\n            document.onpointermove = null;\r\n        };\r\n        LevelsMap.prototype.setScrollbarY = function (value) {\r\n            this.scrollbar.y = Phaser.Math.Clamp(value, this.scrollbar.scrollTop, this.scrollbar.scrollBottom);\r\n        };\r\n        LevelsMap.prototype.updateCameraByScrollbar = function () {\r\n            var percent = (this.scrollbar.y - this.scrollbar.scrollTop) / this.scrollbar.scrollHeight;\r\n            var cameraBounds = this.camera.getBounds();\r\n            var cameraTop = cameraBounds.y;\r\n            var cameraBottom = cameraBounds.bottom - game.Config.GAME_HEIGHT;\r\n            this.camera.scrollY = (cameraBottom - cameraTop) * percent;\r\n        };\r\n        LevelsMap.prototype.addStartLevelPopup = function () {\r\n            this.startLevelPopup = new game.StartLevelScreen(this);\r\n            this.startLevelPopup.playButton.once(ButtonEvent.PRESS, this.onPlayButtonClick, this);\r\n            this.startLevelPopup.setScrollFactor(0, 0);\r\n            this.startLevelPopup.on(game.StartLevelScreenEvent.SHOW, this.onStartLevelPopupShow, this);\r\n            this.startLevelPopup.on(game.StartLevelScreenEvent.HIDE, this.onStartLevelPopupHide, this);\r\n            this.startLevelPopup.kill();\r\n            this.add.existing(this.startLevelPopup);\r\n        };\r\n        LevelsMap.prototype.onPlayButtonClick = function () {\r\n            var _this = this;\r\n            this.poki.commercialBreak(\"LevelMap:PlayButton\")\r\n                .catch(function () { })\r\n                .finally(function () {\r\n                _this.gotoLevel(_this.startLevelPopup.levelNumber);\r\n            });\r\n        };\r\n        LevelsMap.prototype.onStartLevelPopupShow = function () {\r\n            this.settingsButton.enabled = false;\r\n            this.disableScroll();\r\n            this.disableLevelIcons();\r\n        };\r\n        LevelsMap.prototype.disableScroll = function () {\r\n            // this.scrollbar.disableInteractive()\r\n            this.cameraScroll.removePointerListeners();\r\n            this.cameraScroll.settings.verticalWheel = false;\r\n            this.cameraKeyboardControl.active = false;\r\n        };\r\n        LevelsMap.prototype.onStartLevelPopupHide = function () {\r\n            // this.scrollbar.setInteractive()\r\n            this.settingsButton.enabled = true;\r\n            this.enableScroll();\r\n            this.enableLevelIcons();\r\n        };\r\n        LevelsMap.prototype.enableScroll = function () {\r\n            this.cameraScroll.addPointerListeners();\r\n            this.cameraScroll.settings.verticalWheel = true;\r\n            this.cameraKeyboardControl.active = true;\r\n        };\r\n        LevelsMap.prototype.enableLevelIcons = function () {\r\n            this.levelIcons\r\n                .filter(function (icon) { return icon.iconState !== game.LevelIconState.LOCKED; })\r\n                .forEach(function (icon) {\r\n                icon.setInteractive();\r\n            });\r\n        };\r\n        LevelsMap.prototype.disableLevelIcons = function () {\r\n            this.levelIcons\r\n                .filter(function (icon) { return icon.iconState !== game.LevelIconState.LOCKED; })\r\n                .forEach(function (icon) {\r\n                icon.disableInteractive();\r\n            });\r\n        };\r\n        LevelsMap.prototype.addSettingsButton = function () {\r\n            this.settingsButton = this.add.button(\"levels_map\", \"settings_screen/button_small_settings\");\r\n            this.settingsButton.on(ButtonEvent.PRESS, this.showSettings, this);\r\n            this.settingsButton.setScrollFactor(0);\r\n        };\r\n        LevelsMap.prototype.addSettingsScreen = function () {\r\n            this.settingsScreen = new game.SettingsScreen(this);\r\n            this.settingsScreen.closeButton.on(ButtonEvent.PRESS, this.hideSettings, this);\r\n            this.settingsScreen.on(game.SettingsScreenEvent.SHOW, this.onSettingsShow, this);\r\n            this.settingsScreen.on(game.SettingsScreenEvent.HIDE, this.onSettingsHide, this);\r\n            this.settingsScreen.kill();\r\n            this.settingsScreen.setScrollFactor(0);\r\n            this.add.existing(this.settingsScreen);\r\n        };\r\n        LevelsMap.prototype.onSettingsShow = function () {\r\n            this.settingsScreen.closeButton.enabled = true;\r\n            this.settingsButton.enabled = false;\r\n            this.disableScroll();\r\n            this.disableLevelIcons();\r\n        };\r\n        LevelsMap.prototype.onSettingsHide = function () {\r\n            this.settingsScreen.closeButton.enabled = false;\r\n            this.settingsButton.enabled = true;\r\n            this.enableScroll();\r\n            this.enableLevelIcons();\r\n        };\r\n        LevelsMap.prototype.showSettings = function () {\r\n            if (this.settingsScreen.visible === false) {\r\n                this.settingsScreen.show();\r\n            }\r\n        };\r\n        LevelsMap.prototype.hideSettings = function () {\r\n            this.settingsScreen.hide();\r\n        };\r\n        LevelsMap.prototype.addPointerCallbacks = function () {\r\n            this.input.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.input.on(Phaser.Input.Events.POINTER_UP, this.onPointerUp, this);\r\n            this.wheelListener = this.onWheel.bind(this);\r\n            this.game.canvas.parentElement.addEventListener(\"wheel\", this.wheelListener);\r\n        };\r\n        LevelsMap.prototype.onWheel = function (event) {\r\n            event.preventDefault();\r\n            if (this.cameraScroll.settings.verticalWheel === false) {\r\n                return;\r\n            }\r\n            this.cameraScroll.velocityWheelY = -event.deltaY / 2.5;\r\n        };\r\n        LevelsMap.prototype.onPointerDown = function (pointer) {\r\n            this.pointerDownPosition.x = pointer.x;\r\n            this.pointerDownPosition.y = pointer.y;\r\n        };\r\n        LevelsMap.prototype.onPointerUp = function (pointer, items) {\r\n            var distance = Phaser.Math.Distance.Between(this.pointerDownPosition.x, this.pointerDownPosition.y, pointer.x, pointer.y);\r\n            this.pointerWasDragged = distance > 5;\r\n            if (this.pointerWasDragged) {\r\n                return;\r\n            }\r\n            var levelIcon = items.find(function (item) { return item.getData(\"type\") === \"LevelIcon\"; });\r\n            if (levelIcon) {\r\n                this.onLevelIconClick(levelIcon);\r\n            }\r\n        };\r\n        LevelsMap.prototype.onLevelIconClick = function (levelIcon) {\r\n            this.game.audio.playClickSound();\r\n            this.openStartLevelPopup(levelIcon.levelNumber);\r\n        };\r\n        LevelsMap.prototype.openStartLevelPopup = function (levelNumber) {\r\n            var data = this.getStartLevelPopupData(levelNumber);\r\n            if (!data) {\r\n                return;\r\n            }\r\n            this.startLevelPopup.updateData(data);\r\n            this.startLevelPopup.show();\r\n        };\r\n        LevelsMap.prototype.getStartLevelPopupData = function (levelNumber) {\r\n            var levelConfig = this.game.levelConfigs.get(levelNumber);\r\n            if (!levelConfig) {\r\n                console.warn(\"Config for level \" + levelNumber + \" doesn't exist!\");\r\n                return null;\r\n            }\r\n            var levelResult = this.game.store.getLevelResult(levelNumber);\r\n            if (levelResult) {\r\n                return {\r\n                    levelNumber: levelNumber,\r\n                    levelComplete: true,\r\n                    highscore: levelResult.highscore,\r\n                    stars: levelResult.stars,\r\n                    blocksNum: levelConfig.generator.targetItemsNum,\r\n                    blocksType: levelConfig.generator.targetItemType,\r\n                };\r\n            }\r\n            return {\r\n                levelNumber: levelNumber,\r\n                levelComplete: false,\r\n                highscore: 0,\r\n                stars: 0,\r\n                blocksNum: levelConfig.generator.targetItemsNum,\r\n                blocksType: levelConfig.generator.targetItemType,\r\n            };\r\n        };\r\n        LevelsMap.prototype.addKeyboardCallbacks = function () {\r\n            if (game.Main.development) {\r\n                if (game.Main.editorEnabled) {\r\n                    this.input.keyboard.on(\"keydown-E\", this.gotoLevelsMapEditor, this);\r\n                }\r\n                this.input.keyboard.on(\"keydown-D\", this.gotoLevelsMapDev, this);\r\n                this.input.keyboard.on(\"keydown-U\", this.unlockAllLevels, this);\r\n                this.input.keyboard.on(\"keydown-L\", this.lockAllLevels, this);\r\n            }\r\n            this.input.keyboard.on(\"keydown-ESC\", this.onEscPressed, this);\r\n            this.input.keyboard.on(\"keydown-R\", this.restart, this);\r\n            this.input.keyboard.on(\"keydown-SPACE\", this.onSpacePressed, this);\r\n            this.input.keyboard.on(\"keydown-PAGE_DOWN\", this.onScollPageDown, this);\r\n            this.input.keyboard.on(\"keydown-PAGE_UP\", this.onScollPageUp, this);\r\n            this.input.keyboard.on(\"keydown-HOME\", this.scrollToTop, this);\r\n            this.input.keyboard.on(\"keydown-END\", this.scrollToBottom, this);\r\n            this.input.keyboard.on(\"keydown-LEFT\", this.scrollToLastUnlockedLevel, this);\r\n            this.input.keyboard.on(\"keydown-RIGHT\", this.scrollToLastUnlockedLevel, this);\r\n        };\r\n        LevelsMap.prototype.unlockAllLevels = function () {\r\n            this.levelIcons.filter(function (icon) { return icon.iconState === game.LevelIconState.LOCKED; }).forEach(function (icon) { return icon.setUnlocked(); });\r\n            this.lastUnlockedIcon = this.getLastUnlockedLevelIcon();\r\n        };\r\n        LevelsMap.prototype.lockAllLevels = function () {\r\n            this.levelIcons.forEach(function (icon) { return icon.setLocked(); });\r\n        };\r\n        LevelsMap.prototype.gotoLevelsMapDev = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.LEVELS_MAP_DEV);\r\n        };\r\n        LevelsMap.prototype.gotoLevelsMapEditor = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.LEVELS_MAP_EDITOR);\r\n        };\r\n        LevelsMap.prototype.onEscPressed = function () {\r\n            if (this.startLevelPopup.visible) {\r\n                this.startLevelPopup.hide();\r\n                return;\r\n            }\r\n            this.gotoMainMenu();\r\n        };\r\n        LevelsMap.prototype.gotoMainMenu = function () {\r\n            // this.game.changeScene(SceneKey.LEVELS_MAP, SceneKey.MAIN_MENU)\r\n        };\r\n        LevelsMap.prototype.restart = function () {\r\n            this.game.changeScene(this.scene.key, this.scene.key);\r\n        };\r\n        LevelsMap.prototype.onSpacePressed = function () {\r\n            if (this.settingsScreen.visible) {\r\n                return;\r\n            }\r\n            if (this.startLevelPopup.visible) {\r\n                this.gotoLevel(this.startLevelPopup.levelNumber);\r\n                return;\r\n            }\r\n            var levelIcon = this.getLastUnlockedLevelIcon();\r\n            if (levelIcon) {\r\n                this.scrollToLevelIcon(levelIcon);\r\n                this.openStartLevelPopup(levelIcon.levelNumber);\r\n            }\r\n        };\r\n        LevelsMap.prototype.onScollPageDown = function () {\r\n            this.camera.scrollY += game.Config.GAME_HEIGHT;\r\n        };\r\n        LevelsMap.prototype.onScollPageUp = function () {\r\n            this.camera.scrollY -= game.Config.GAME_HEIGHT;\r\n        };\r\n        LevelsMap.prototype.scrollToBottom = function () {\r\n            this.camera.scrollY = this.mainContainer.getBounds().height;\r\n        };\r\n        LevelsMap.prototype.scrollToTop = function () {\r\n            this.camera.scrollY = 0;\r\n        };\r\n        LevelsMap.prototype.scrollToLastUnlockedLevel = function () {\r\n            var levelIcon = this.getLastUnlockedLevelIcon();\r\n            if (levelIcon) {\r\n                this.scrollToLevelIcon(levelIcon);\r\n            }\r\n        };\r\n        LevelsMap.prototype.scrollToLevel = function (levelNumber) {\r\n            var levelIcon = this.levelIcons.find(function (icon) { return icon.levelNumber === levelNumber; });\r\n            if (levelIcon) {\r\n                this.scrollToLevelIcon(levelIcon);\r\n            }\r\n        };\r\n        LevelsMap.prototype.scrollToLevelIcon = function (levelIcon) {\r\n            this.camera.scrollY = Phaser.Display.Bounds.GetCenterY(levelIcon) * this.mainContainer.scale - game.Config.GAME_HEIGHT / 2;\r\n        };\r\n        LevelsMap.prototype.resize = function () {\r\n            this.resizeMainContainer();\r\n            this.resizeAvatar();\r\n            this.updateFirePositionAndScale();\r\n            this.updateFireEmitter();\r\n            this.updateCameraBounds();\r\n            this.alignScrollbar();\r\n            this.alignSettingsButton();\r\n            this.settingsScreen.resize(this.settingsButton);\r\n            this.startLevelPopup.resize();\r\n        };\r\n        LevelsMap.prototype.resizeMainContainer = function () {\r\n            this.mainContainer.scale = game.Config.GAME_WIDTH / this.backgrounds[0].width;\r\n        };\r\n        LevelsMap.prototype.resizeAvatar = function () {\r\n            this.avatar.scale = this.mainContainer.scale;\r\n            this.avatar.originalScale = this.avatar.scale;\r\n        };\r\n        LevelsMap.prototype.updateFirePositionAndScale = function () {\r\n            if (!this.fire) {\r\n                return;\r\n            }\r\n            this.fire.scale = this.mainContainer.scale;\r\n            this.fire.x = this.fire.originalX * this.fire.scale;\r\n            this.fire.y = this.fire.originalY * this.fire.scale;\r\n        };\r\n        LevelsMap.prototype.updateFireEmitter = function () {\r\n            if (this.fireEmitter) {\r\n                this.fireEmitter.killAll();\r\n                this.fireEmitter.remove();\r\n            }\r\n            this.addFireEmitter();\r\n        };\r\n        LevelsMap.prototype.addFireEmitter = function () {\r\n            var position = this.fire.getWorldPosition();\r\n            var scale = this.mainContainer.scale;\r\n            this.fireEmitter = this.fireEmitterManager.createEmitter({\r\n                frame: \"decor/fire_particle\",\r\n                x: position.x,\r\n                y: position.y - 45 * scale,\r\n                emitZone: {\r\n                    type: \"random\",\r\n                    source: this.getFireEmitRect(scale),\r\n                },\r\n                frequency: 200,\r\n                quantity: 1,\r\n                gravityY: -20 * scale,\r\n                speedY: { min: -80 * scale, max: -50 * scale },\r\n                speedX: { min: -30 * scale, max: 30 * scale },\r\n                scale: { start: scale, end: 0, ease: EasingString.Cubic },\r\n                lifespan: 3500,\r\n                on: true,\r\n            });\r\n        };\r\n        LevelsMap.prototype.getFireEmitRect = function (scale) {\r\n            var width = 40 * scale;\r\n            var height = 40 * scale;\r\n            return new Phaser.Geom.Rectangle(-width / 2, -height / 2, width, height);\r\n        };\r\n        LevelsMap.prototype.updateCameraBounds = function () {\r\n            var top = Phaser.Display.Bounds.GetTop(this.backgrounds[0]);\r\n            var bottom = Phaser.Display.Bounds.GetBottom(this.backgrounds[this.backgrounds.length - 1]);\r\n            var totalHeight = bottom - top;\r\n            this.camera.setBounds(0, 0, game.Config.GAME_WIDTH, totalHeight * this.mainContainer.scale);\r\n        };\r\n        LevelsMap.prototype.alignScrollbar = function () {\r\n            var scale = this.mainContainer.scale;\r\n            this.scrollbar.scale = scale;\r\n            this.scrollbar.x = game.Config.GAME_WIDTH - 10 * scale;\r\n            this.scrollbar.onResize();\r\n        };\r\n        LevelsMap.prototype.alignSettingsButton = function () {\r\n            var scale = game.Config.ASSETS_SCALE;\r\n            var margin = 60 * scale;\r\n            this.settingsButton.scale = scale;\r\n            this.settingsButton.x = game.Config.GAME_WIDTH - margin;\r\n            this.settingsButton.y = margin;\r\n        };\r\n        LevelsMap.prototype.setupCamera = function () {\r\n            this.camera = this.cameras.main;\r\n        };\r\n        LevelsMap.prototype.addCameraKeyboardControl = function () {\r\n            var cursors = this.input.keyboard.createCursorKeys();\r\n            this.cameraKeyboardControl = new FixedKeyControl({\r\n                camera: this.camera,\r\n                left: cursors.left,\r\n                right: cursors.right,\r\n                up: cursors.up,\r\n                down: cursors.down,\r\n                speed: 4,\r\n            });\r\n        };\r\n        LevelsMap.prototype.addCameraScroll = function () {\r\n            this.cameraScroll = new game.KineticScroll(this, {\r\n                camera: this.camera,\r\n                kineticMovement: true,\r\n                timeConstantScroll: 300,\r\n                horizontalWheel: false,\r\n                horizontalScroll: false,\r\n                verticalWheel: true,\r\n                verticalScroll: true,\r\n                wheelDeceleration: 0.92,\r\n                scrollMultiplier: 2,\r\n            });\r\n            this.cameraScroll.addPointerListeners();\r\n        };\r\n        LevelsMap.prototype.update = function (time, delta) {\r\n            _super.prototype.update.call(this, time, delta);\r\n            this.cameraKeyboardControl.update(delta);\r\n            this.cameraScroll.update();\r\n            this.updateScrollbar();\r\n            this.updateAvatar();\r\n        };\r\n        LevelsMap.prototype.updateScrollbar = function () {\r\n            if (this.scrollbar.isDragged) {\r\n                return;\r\n            }\r\n            var cameraBounds = this.camera.getBounds();\r\n            var cameraTop = cameraBounds.y;\r\n            var cameraBottom = cameraBounds.bottom - game.Config.GAME_HEIGHT;\r\n            var cameraY = Math.max(0, this.camera.scrollY);\r\n            var percent = Phaser.Math.Clamp(cameraY / (cameraBottom - cameraTop), 0, 1);\r\n            this.scrollbar.y = this.scrollbar.scrollTop + (this.scrollbar.scrollBottom - this.scrollbar.scrollTop) * percent;\r\n        };\r\n        LevelsMap.prototype.updateAvatar = function () {\r\n            var _this = this;\r\n            if (!this.lastUnlockedIcon) {\r\n                return;\r\n            }\r\n            var cameraBounds = this.camera.getBounds();\r\n            var cameraTop = Phaser.Math.Clamp(this.camera.scrollY, 0, cameraBounds.bottom - game.Config.GAME_HEIGHT);\r\n            var cameraBottom = cameraTop + this.camera.height;\r\n            var iconGlobalPosition = this.lastUnlockedIcon.getWorldPosition();\r\n            var iconGlobalY = iconGlobalPosition.y - 32 * this.mainContainer.scale;\r\n            var inCamera = iconGlobalY > cameraTop && iconGlobalY < cameraBottom;\r\n            if (inCamera) {\r\n                this.avatar.y = iconGlobalY - this.avatar.getDisplayHeight() / 2;\r\n                this.avatar.lookBottom();\r\n            }\r\n            else {\r\n                var cameraHeight = cameraBottom - cameraTop;\r\n                var cameraCenterY = cameraTop + cameraHeight / 2;\r\n                if (iconGlobalY > cameraCenterY) {\r\n                    this.avatar.y = cameraBottom - this.avatar.getDisplayHeight() / 2;\r\n                    this.avatar.lookBottom();\r\n                }\r\n                else {\r\n                    this.avatar.y = cameraTop + this.avatar.getDisplayHeight() / 2;\r\n                    this.avatar.lookUp();\r\n                }\r\n            }\r\n            if (this.avatar.wasInCamera && inCamera === false) {\r\n                this.avatar.stopWiggle();\r\n                this.avatar.scaleTo(0.75);\r\n                this.avatar.enableInput();\r\n            }\r\n            else if (this.avatar.wasInCamera === false && inCamera) {\r\n                this.avatar.scaleTo(1).on(Phaser.Tweens.Events.TWEEN_COMPLETE, function () {\r\n                    _this.avatar.startWiggle();\r\n                });\r\n                this.avatar.disableInput();\r\n            }\r\n            this.avatar.x = iconGlobalPosition.x;\r\n            this.avatar.wasInCamera = inCamera;\r\n        };\r\n        LevelsMap.prototype.getLastUnlockedLevelIcon = function () {\r\n            var unlockedLevelNumbers = this.levelIcons\r\n                .filter(function (icon) { return icon.iconState === game.LevelIconState.UNLOCKED; })\r\n                .map(function (icon) { return icon.levelNumber; });\r\n            var last = Math.max.apply(Math, unlockedLevelNumbers);\r\n            return this.levelIcons.find(function (icon) { return icon.levelNumber === last; });\r\n        };\r\n        LevelsMap.prototype.doInitialCameraScroll = function () {\r\n            var lastUnlockedLevel = this.getLastUnlockedLevelIcon();\r\n            if (lastUnlockedLevel) {\r\n                this.scrollToLevelIcon(lastUnlockedLevel);\r\n            }\r\n            else {\r\n                this.scrollToBottom();\r\n            }\r\n        };\r\n        LevelsMap.prototype.shutdown = function () {\r\n            document.onpointermove = null;\r\n            if (this.wheelListener) {\r\n                this.game.canvas.parentElement.removeEventListener(\"wheel\", this.wheelListener);\r\n            }\r\n            this.removeCameraScroll();\r\n        };\r\n        LevelsMap.prototype.removeCameraScroll = function () {\r\n            this.input.off(\"pointerdown\");\r\n            this.input.off(\"pointerup\");\r\n            this.input.off(\"pointermove\");\r\n        };\r\n        LevelsMap.CONFIG_KEY = \"levels_map_config\";\r\n        return LevelsMap;\r\n    }(Phaser.Scene));\r\n    game.LevelsMap = LevelsMap;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Vector2 = Phaser.Math.Vector2;\r\n    var TrailEvent;\r\n    (function (TrailEvent) {\r\n        TrailEvent[\"SHOW\"] = \"trail_show\";\r\n        TrailEvent[\"HIDE\"] = \"trail_hide\";\r\n    })(TrailEvent = game.TrailEvent || (game.TrailEvent = {}));\r\n    var Trail = /** @class */ (function () {\r\n        function Trail(scene, canvas, owner, options) {\r\n            this._active = false;\r\n            this.scene = scene;\r\n            this.canvas = canvas;\r\n            this.options = options;\r\n            this.owner = owner;\r\n            this.owner.on(TrailEvent.SHOW, this.activate, this);\r\n            this.owner.on(TrailEvent.HIDE, this.deactivate, this);\r\n            this.curve = new Phaser.Curves.Spline();\r\n            this.tempCurvePoint = new Vector2();\r\n            this.initTangents();\r\n        }\r\n        Object.defineProperty(Trail.prototype, \"active\", {\r\n            get: function () {\r\n                return this._active;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Trail.prototype.initTangents = function () {\r\n            this.tempTangent = new Vector2();\r\n            this.leftTangents = _.times(this.options.accuracy + 1, function () {\r\n                return new Vector2();\r\n            });\r\n            this.rightTangents = _.times(this.options.accuracy + 1, function () {\r\n                return new Vector2();\r\n            });\r\n        };\r\n        Trail.prototype.activate = function () {\r\n            if (this._active) {\r\n                return;\r\n            }\r\n            this.curve.points.length = 0;\r\n            this._active = true;\r\n        };\r\n        Trail.prototype.deactivate = function () {\r\n            if (!this._active) {\r\n                return;\r\n            }\r\n            this._active = false;\r\n        };\r\n        Trail.prototype.draw = function () {\r\n            if (this._active === false) {\r\n                return;\r\n            }\r\n            this.curve.points.push({ x: this.owner.x, y: this.owner.y });\r\n            var length = this.curve.points.length;\r\n            if (length < 2) {\r\n                return;\r\n            }\r\n            if (length > this.options.length) {\r\n                this.curve.points = this.curve.points.slice(-this.options.length);\r\n            }\r\n            // TODO truncate trails lenght because they are too long during fast forward\r\n            this.truncate();\r\n            this.canvas.fillPoints(this.getDrawingPoints(), true);\r\n        };\r\n        Trail.prototype.truncate = function () {\r\n            /*let maxLength: number = 200\r\n            let length: number = 0\r\n            let index:number\r\n            for (index = this.curve.points.length - 1; index > 0; index--) {\r\n                let point: Vector2Like = this.curve.points[index]\r\n                let nextPoint: Vector2Like = this.curve.points[index - 1]\r\n                let distance: number = Phaser.Math.Distance.BetweenPoints(point, nextPoint)\r\n                length += distance\r\n                if (length > maxLength) {\r\n                    let remainder:number = maxLength - length\r\n                    let x:number =\r\n                }\r\n            }*/\r\n        };\r\n        Trail.prototype.getDrawingPoints = function () {\r\n            for (var t = this.options.accuracy; t >= 0; t--) {\r\n                var realT = t / this.options.accuracy;\r\n                var radius = this.owner.getTrailSize() * realT;\r\n                this.curve.getPoint(realT, this.tempCurvePoint);\r\n                this.curve.getTangentAt(realT, this.tempTangent);\r\n                this.rightTangents[t].copy(this.tempTangent).normalizeRightHand().scale(radius).add(this.tempCurvePoint);\r\n                this.leftTangents[t].copy(this.tempTangent).normalizeRightHand().scale(-radius).add(this.tempCurvePoint);\r\n            }\r\n            return __spreadArrays(this.rightTangents, this.leftTangents.reverse());\r\n        };\r\n        Trail.prototype.destroy = function () {\r\n            this.owner.off(TrailEvent.SHOW, this.activate, this);\r\n            this.owner.off(TrailEvent.HIDE, this.deactivate, this);\r\n            this.owner = null;\r\n            this.curve = null;\r\n        };\r\n        return Trail;\r\n    }());\r\n    game.Trail = Trail;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TrailsCanvas = /** @class */ (function (_super) {\r\n        __extends(TrailsCanvas, _super);\r\n        function TrailsCanvas(scene, defaultOptions) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"ball_trails_canvas\";\r\n            _this.defaultOptions = defaultOptions;\r\n            _this.trails = [];\r\n            _this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, _this.onPostUpdate, _this);\r\n            return _this;\r\n        }\r\n        TrailsCanvas.prototype.addTrail = function (owner, options) {\r\n            var trail = new game.Trail(this.scene, this, owner, __assign(__assign({}, this.defaultOptions), options));\r\n            this.trails.push(trail);\r\n            owner.on(game.TrailEvent.SHOW, this.onTrailShow, this);\r\n            owner.on(game.TrailEvent.HIDE, this.onTrailHide, this);\r\n            owner.once(Phaser.GameObjects.Events.DESTROY, this.onOwnerDestroy.bind(this, trail, owner));\r\n            return trail;\r\n        };\r\n        TrailsCanvas.prototype.onTrailShow = function () {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            if (this.hasActiveTrails()) {\r\n                this.revive();\r\n            }\r\n        };\r\n        TrailsCanvas.prototype.onTrailHide = function () {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            var areAllInactive = this.hasActiveTrails() === false;\r\n            if (areAllInactive) {\r\n                this.clear();\r\n                this.kill();\r\n            }\r\n        };\r\n        TrailsCanvas.prototype.hasActiveTrails = function () {\r\n            return this.trails.some(function (trail) { return trail.active; });\r\n        };\r\n        TrailsCanvas.prototype.onOwnerDestroy = function (trail, owner) {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            var index = this.trails.indexOf(trail);\r\n            if (index > -1) {\r\n                this.trails.splice(index, 1);\r\n                owner.off(game.TrailEvent.SHOW, this.onTrailShow, this);\r\n                owner.off(game.TrailEvent.HIDE, this.onTrailHide, this);\r\n                trail.destroy();\r\n            }\r\n        };\r\n        TrailsCanvas.prototype.onPostUpdate = function (time, delta) {\r\n            var _this = this;\r\n            this.clear();\r\n            this.trails.forEach(function (trail) {\r\n                _this.fillStyle(trail.options.color, trail.options.alpha);\r\n                trail.draw();\r\n            });\r\n        };\r\n        TrailsCanvas.prototype.destroy = function (fromScene) {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            this.trails.forEach(function (trail) { return trail.destroy(); });\r\n            this.trails = null;\r\n            this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE, this.onPostUpdate, this);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return TrailsCanvas;\r\n    }(Phaser.GameObjects.Graphics));\r\n    game.TrailsCanvas = TrailsCanvas;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FoxAnimation;\r\n    (function (FoxAnimation) {\r\n        FoxAnimation[\"IDLE\"] = \"fox_idle\";\r\n        FoxAnimation[\"HAPPY\"] = \"fox_happy\";\r\n        FoxAnimation[\"AIM\"] = \"fox_aim\";\r\n        FoxAnimation[\"SHOT\"] = \"fox_shot\";\r\n    })(FoxAnimation = game.FoxAnimation || (game.FoxAnimation = {}));\r\n    var Fox = /** @class */ (function (_super) {\r\n        __extends(Fox, _super);\r\n        function Fox(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, Fox.ATLAS_KEY, \"FOX_IDLE0001\") || this;\r\n            _this.setOrigin(0.45, 0.8);\r\n            _this.createAnimations();\r\n            _this.resetAnimationOrigins();\r\n            _this.on(\"animationcomplete-\" + FoxAnimation.SHOT, _this.onShotAnimationComplete, _this);\r\n            return _this;\r\n        }\r\n        Fox.prototype.createAnimations = function () {\r\n            this.scene.anims.create({\r\n                key: FoxAnimation.IDLE,\r\n                frames: this.getAnimationFrames(\"FOX_IDLE\"),\r\n                repeat: -1,\r\n            });\r\n            this.scene.anims.create({\r\n                key: FoxAnimation.AIM,\r\n                frames: this.getAnimationFrames(\"FOX_AIM\"),\r\n                repeat: -1,\r\n            });\r\n            this.scene.anims.create({\r\n                key: FoxAnimation.SHOT,\r\n                frames: this.getAnimationFrames(\"FOX_SHOT\"),\r\n                frameRate: 60,\r\n            });\r\n            this.scene.anims.create({\r\n                key: FoxAnimation.HAPPY,\r\n                frames: this.getAnimationFrames(\"FOX_HAPPY\"),\r\n                repeat: -1,\r\n                frameRate: 30,\r\n            });\r\n        };\r\n        Fox.prototype.getAnimationFrames = function (prefix) {\r\n            return this.scene.anims.getFrameNames(Fox.ATLAS_KEY, prefix);\r\n        };\r\n        Fox.prototype.resetAnimationOrigins = function () {\r\n            var _this = this;\r\n            var animationKeys = Object.values(FoxAnimation);\r\n            animationKeys.forEach(function (animKey) {\r\n                _this.scene.anims.get(animKey).frames.forEach(function (frame) {\r\n                    frame.frame.customPivot = false;\r\n                });\r\n            });\r\n        };\r\n        Fox.prototype.onShotAnimationComplete = function () {\r\n            this.play(FoxAnimation.IDLE);\r\n        };\r\n        Fox.prototype.getHandsPosition = function (out) {\r\n            var _out = out || { x: 0, y: 0 };\r\n            _out.x = this.x;\r\n            _out.y = this.y - this.height * 0.28;\r\n            return _out;\r\n        };\r\n        Fox.prototype.moveTo = function (targetX) {\r\n            var duration = Math.abs(targetX - this.x) * 2;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                x: targetX,\r\n                duration: Math.min(400, duration),\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n            });\r\n        };\r\n        Fox.prototype.playIdleAnimation = function () {\r\n            this.play(FoxAnimation.IDLE);\r\n        };\r\n        Fox.prototype.playHappyAnimation = function () {\r\n            this.play(FoxAnimation.HAPPY);\r\n        };\r\n        Fox.prototype.playShotAnimation = function () {\r\n            this.play(FoxAnimation.SHOT);\r\n        };\r\n        Fox.prototype.showLoseFrame = function () {\r\n            this.play(FoxAnimation.AIM);\r\n            this.anims.currentAnim.pause();\r\n        };\r\n        Fox.prototype.showWorriedFrame = function () {\r\n            var _this = this;\r\n            this.play(FoxAnimation.AIM);\r\n            this.anims.currentAnim.pause();\r\n            this.scene.time.delayedCall(1600, function () {\r\n                _this.playIdleAnimation();\r\n            });\r\n        };\r\n        Fox.prototype.destroy = function () {\r\n            _super.prototype.destroy.call(this, true);\r\n        };\r\n        Fox.ATLAS_KEY = \"gameplay\";\r\n        return Fox;\r\n    }(Phaser.GameObjects.Sprite));\r\n    game.Fox = Fox;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FoxTalkBubble = /** @class */ (function (_super) {\r\n        __extends(FoxTalkBubble, _super);\r\n        function FoxTalkBubble(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"fox_talk_bubble\";\r\n            _this.addBubble();\r\n            _this.addContent();\r\n            return _this;\r\n        }\r\n        FoxTalkBubble.prototype.addBubble = function () {\r\n            this.bubble = this.scene.add.image(0, 0, \"gameplay\", \"fox_bubble_talk\");\r\n            this.add(this.bubble);\r\n        };\r\n        FoxTalkBubble.prototype.addContent = function () {\r\n            this.content = this.scene.add.image(0, 0, \"gameplay\", \"fox_bubble_talk_content\");\r\n            this.content.x = this.bubble.x - 46;\r\n            this.content.y = this.bubble.y - 62;\r\n            this.content.originalX = this.content.x;\r\n            this.content.originalY = this.content.y;\r\n            this.add(this.content);\r\n        };\r\n        FoxTalkBubble.prototype.show = function () {\r\n            this.alpha = 0;\r\n            this.scale = 0.75;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 800,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.4],\r\n                scale: 1,\r\n                completeDelay: 900,\r\n                onComplete: this.hide.bind(this),\r\n            });\r\n            this.content.x = this.content.originalX;\r\n            this.scene.tweens.add({\r\n                targets: this.content,\r\n                duration: 66,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                x: \"-=4\",\r\n                yoyo: true,\r\n                repeat: 3,\r\n            });\r\n        };\r\n        FoxTalkBubble.prototype.hide = function () {\r\n            this.scene.tweens.killTweensOf(this.content);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 133,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                scale: 0.5,\r\n                onComplete: this.kill.bind(this),\r\n            });\r\n        };\r\n        return FoxTalkBubble;\r\n    }(Phaser.GameObjects.Container));\r\n    game.FoxTalkBubble = FoxTalkBubble;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ThrownFox = /** @class */ (function (_super) {\r\n        __extends(ThrownFox, _super);\r\n        function ThrownFox(world, frame) {\r\n            return _super.call(this, world, 0, 0, frame.texture.key, frame.name, {\r\n                ignoreGravity: false,\r\n                isSensor: true,\r\n                render: {\r\n                    sprite: {\r\n                        xOffset: frame.pivotX - 0.5,\r\n                        yOffset: frame.pivotY - 0.5,\r\n                    },\r\n                },\r\n            }) || this;\r\n        }\r\n        ThrownFox.prototype.throw = function () {\r\n            var k = 16.66667 / this.scene.game.loop.delta;\r\n            var x = Phaser.Math.RND.sign() * 0.25 * k;\r\n            var y = -5.45 * k;\r\n            this.applyForce({ x: x, y: y });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1.2,\r\n            });\r\n        };\r\n        ThrownFox.prototype.preUpdate = function (time, delta) {\r\n            this.angle += 0.25 * delta * Phaser.Math.Sign(this.body.velocity.x);\r\n        };\r\n        ThrownFox.prototype.destroyAfter = function (delay) {\r\n            this.scene.time.delayedCall(delay, this.destroy, null, this);\r\n        };\r\n        return ThrownFox;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.ThrownFox = ThrownFox;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TrajectorySounds = /** @class */ (function () {\r\n        function TrajectorySounds(scene) {\r\n            this.isEnabled = false;\r\n            this.showTimestamp = 0;\r\n            this.scene = scene;\r\n            this.sound = this.scene.sound;\r\n            this.isEnabled = this.scene.game.audioType === game.SoundManagerType.WEB_AUDIO;\r\n            this.addSounds();\r\n        }\r\n        TrajectorySounds.prototype.addSounds = function () {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            this.allSounds = this.createSounds();\r\n        };\r\n        TrajectorySounds.prototype.createSounds = function () {\r\n            var _this = this;\r\n            var sounds = [\r\n                { key: game.GameSoundKey.AIM_1, volume: 1 },\r\n                { key: game.GameSoundKey.AIM_2, volume: 0.5 },\r\n                { key: game.GameSoundKey.AIM_3, volume: 0.5 },\r\n            ];\r\n            return sounds.map(function (soundOptions) {\r\n                var isSoundAvailable = _this.scene.cache.audio.has(soundOptions.key);\r\n                if (isSoundAvailable) {\r\n                    return _this.sound.add(soundOptions.key, { volume: soundOptions.volume });\r\n                }\r\n            });\r\n        };\r\n        TrajectorySounds.prototype.onShow = function () {\r\n            var _a;\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            this.showTimestamp = Date.now();\r\n            this.scene.input.on(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n            (_a = this.allSounds[0]) === null || _a === void 0 ? void 0 : _a.play();\r\n        };\r\n        TrajectorySounds.prototype.onPointerMove = function () {\r\n            var deltaTime = Date.now() - this.showTimestamp;\r\n            if (deltaTime > 1000) {\r\n                var sound = Phaser.Math.RND.bool() ? this.allSounds[1] : this.allSounds[2];\r\n                if (sound) {\r\n                    sound.play();\r\n                }\r\n                this.scene.input.off(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n            }\r\n        };\r\n        TrajectorySounds.prototype.onHide = function () {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            this.allSounds.forEach(function (sound) { return sound === null || sound === void 0 ? void 0 : sound.stop(); });\r\n            this.scene.input.off(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n        };\r\n        TrajectorySounds.prototype.destroy = function () {\r\n            if (this.allSounds) {\r\n                this.allSounds.forEach(function (sound) { return sound === null || sound === void 0 ? void 0 : sound.destroy(); });\r\n                this.allSounds = null;\r\n            }\r\n            if (this.scene) {\r\n                this.scene.input.off(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n            }\r\n        };\r\n        return TrajectorySounds;\r\n    }());\r\n    game.TrajectorySounds = TrajectorySounds;\r\n})(game || (game = {}));\r\n///<reference path='TrajectorySounds.ts' />\r\nvar game;\r\n(function (game) {\r\n    var Trajectory = /** @class */ (function (_super) {\r\n        __extends(Trajectory, _super);\r\n        function Trajectory(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this._bouncesNum = 1;\r\n            _this.isHidden = false;\r\n            _this.name = \"trajectory\";\r\n            _this.gameplay = _this.scene;\r\n            _this.worldCopy = _this.gameplay.worldCopy;\r\n            _this.trajectoryStart = { x: 0, y: 0 };\r\n            _this.trajectoryEnd = { x: 0, y: 0 };\r\n            _this.cameraPointerPosition = { x: 0, y: 0 };\r\n            _this.sounds = new game.TrajectorySounds(_this.scene);\r\n            _this.addDots();\r\n            _this.addPointer();\r\n            return _this;\r\n        }\r\n        Trajectory.prototype.addDots = function () {\r\n            var _this = this;\r\n            this.dots = _.times(100, function (index) {\r\n                var dot = _this.scene.add.image(0, 0, \"gameplay\", \"trajectory_dot\");\r\n                _this.add(dot);\r\n                return dot;\r\n            });\r\n        };\r\n        Trajectory.prototype.addPointer = function () {\r\n            this.pointer = this.scene.add.image(0, 0, \"gameplay\", \"trajectory_pointer\");\r\n            this.add(this.pointer);\r\n        };\r\n        Trajectory.prototype.setBounces = function (num) {\r\n            this._bouncesNum = Phaser.Math.Clamp(num, 1, 5);\r\n        };\r\n        Trajectory.prototype.show = function () {\r\n            this.revive();\r\n            this.playShowTween();\r\n            this.sounds.onShow();\r\n            this.isHidden = false;\r\n            var hasIceBlocks = this.gameplay.items.some(function (item) { return item.itemType.includes(\"ice\"); });\r\n            if (hasIceBlocks) {\r\n                this.scene.events.on(Phaser.Scenes.Events.UPDATE, this.draw, this);\r\n            }\r\n            else {\r\n                this.draw();\r\n                this.scene.input.on(Phaser.Input.Events.POINTER_MOVE, this.draw, this);\r\n            }\r\n        };\r\n        Trajectory.prototype.playShowTween = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        Trajectory.prototype.hide = function () {\r\n            this.kill();\r\n            this.removeSceneEventListeners();\r\n            this.sounds.onHide();\r\n        };\r\n        Trajectory.prototype.removeSceneEventListeners = function () {\r\n            this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.draw, this);\r\n            this.scene.input.off(Phaser.Input.Events.POINTER_MOVE, this.draw, this);\r\n        };\r\n        Trajectory.prototype.kill = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        Trajectory.prototype.revive = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n        };\r\n        Trajectory.prototype.draw = function () {\r\n            this.trajectoryStart = this.gameplay.fox.getHandsPosition(this.trajectoryStart);\r\n            this.trajectoryEnd = this.getEndPoint();\r\n            this.doDraw(this.trajectoryStart.x, this.trajectoryStart.y, this.trajectoryEnd.x, this.trajectoryEnd.y);\r\n        };\r\n        Trajectory.prototype.getEndPoint = function () {\r\n            this.scene.input.activePointer.positionToCamera(this.scene.cameras.main, this.cameraPointerPosition);\r\n            var t = 1;\r\n            var x = this.trajectoryEnd.x + (this.cameraPointerPosition.x - this.trajectoryEnd.x) * t;\r\n            var y = this.trajectoryEnd.y + (this.cameraPointerPosition.y - this.trajectoryEnd.y) * t;\r\n            return { x: x, y: y };\r\n        };\r\n        Trajectory.prototype.doDraw = function (startX, startY, endX, endY) {\r\n            var rotation = Math.atan2(endY - startY, endX - startX);\r\n            if (rotation > 0) {\r\n                if (this.isHidden === false) {\r\n                    this.isHidden = true;\r\n                    this.sounds.onHide();\r\n                    this.hideDots();\r\n                }\r\n                return;\r\n            }\r\n            var points = this.worldCopy.getTrajectoryPoints(startX, startY, rotation, this._bouncesNum);\r\n            if (points.length > 0) {\r\n                points = __spreadArrays([{ x: startX, y: startY }], points);\r\n                this.showDots(points);\r\n                this.showPointer(points);\r\n                this.isHidden = false;\r\n            }\r\n        };\r\n        Trajectory.prototype.hideDots = function () {\r\n            this.dots.forEach(function (dot) { return dot.visible = false; });\r\n            this.pointer.visible = false;\r\n        };\r\n        Trajectory.prototype.showDots = function (keyPoints) {\r\n            var dotIndex = 0;\r\n            var distance = 0;\r\n            var stepRate = 22;\r\n            for (var i = 0; i < keyPoints.length - 1; i++) {\r\n                var point_1 = keyPoints[i];\r\n                var point_2 = keyPoints[i + 1];\r\n                if (point_2) {\r\n                    var lineLength = Phaser.Math.Distance.BetweenPoints(point_1, point_2);\r\n                    var lineAngle = Phaser.Math.Angle.BetweenPoints(point_1, point_2);\r\n                    var linePointsNum = Math.floor(lineLength / stepRate);\r\n                    for (var j = 0; j <= linePointsNum; j++) {\r\n                        distance = j * stepRate;\r\n                        var dot = this.dots[dotIndex++];\r\n                        if (dot) {\r\n                            dot.visible = true;\r\n                            dot.x = point_1.x + Math.cos(lineAngle) * distance;\r\n                            dot.y = point_1.y + Math.sin(lineAngle) * distance;\r\n                        }\r\n                        else {\r\n                            console.warn(\"Not enough dots\");\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.hideRemainingDots(dotIndex);\r\n        };\r\n        Trajectory.prototype.hideRemainingDots = function (dotIndex) {\r\n            this.dots.forEach(function (dot, index) {\r\n                if (index >= dotIndex) {\r\n                    dot.visible = false;\r\n                }\r\n            });\r\n        };\r\n        Trajectory.prototype.showPointer = function (points) {\r\n            var last = points[points.length - 1];\r\n            var lastButOne = points[points.length - 2];\r\n            var rotation = Phaser.Math.Angle.BetweenPoints(lastButOne, last);\r\n            var distance = game.Ball.RADIUS;\r\n            this.pointer.visible = true;\r\n            this.pointer.x = last.x + Math.cos(rotation) * distance;\r\n            this.pointer.y = last.y + Math.sin(rotation) * distance;\r\n            this.pointer.rotation = rotation + Math.PI / 2;\r\n        };\r\n        Trajectory.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.removeSceneEventListeners();\r\n            }\r\n            this.sounds.destroy();\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return Trajectory;\r\n    }(Phaser.GameObjects.Container));\r\n    game.Trajectory = Trajectory;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BallKeeper = /** @class */ (function () {\r\n        function BallKeeper(scene, ball, worldBounds) {\r\n            this.justReturned = false;\r\n            this.scene = scene;\r\n            this.ball = ball;\r\n            this.ballBody = this.ball.body;\r\n            this.worldBounds = worldBounds;\r\n            this.positions = [];\r\n            this.velocities = [];\r\n        }\r\n        BallKeeper.prototype.saveInitialPositionAndVelocity = function () {\r\n            this.initialPosition = { x: this.ball.x, y: this.ball.y };\r\n            this.initialVelocity = { x: this.ballBody.velocity.x, y: this.ballBody.velocity.y };\r\n            this.positions = [this.initialPosition];\r\n            this.velocities = [this.initialVelocity];\r\n            this.justReturned = false;\r\n        };\r\n        BallKeeper.prototype.keepInsideWorld = function () {\r\n            var inWorld = this.worldBounds.contains(this.ball.x, this.ball.y);\r\n            if (inWorld) {\r\n                if (this.justReturned) {\r\n                    this.justReturned = false;\r\n                    return;\r\n                }\r\n                this.positions.push({ x: this.ball.x, y: this.ball.y });\r\n                this.velocities.push({ x: this.ballBody.velocity.x, y: this.ballBody.velocity.y });\r\n            }\r\n            else {\r\n                if (this.ball.y > this.worldBounds.bottom) {\r\n                    var margin = 10;\r\n                    var x = Phaser.Math.Clamp(this.ball.x, this.worldBounds.left + margin, this.worldBounds.right - margin);\r\n                    this.ball.setPosition(x, this.worldBounds.bottom - margin);\r\n                    this.ball.setVelocity(0, 0);\r\n                    return;\r\n                }\r\n                this.returnToLastValidPosition();\r\n            }\r\n        };\r\n        BallKeeper.prototype.returnToLastValidPosition = function () {\r\n            var position;\r\n            var velocity;\r\n            if (this.positions.length === 0) {\r\n                position = this.initialPosition;\r\n                velocity = this.initialVelocity;\r\n            }\r\n            else {\r\n                position = this.positions.pop();\r\n                velocity = this.velocities.pop();\r\n                var pushbackDistance = game.Ball.RADIUS;\r\n                if (position.y < this.worldBounds.top) {\r\n                    velocity.y *= -1;\r\n                    position.y = this.worldBounds.top + pushbackDistance;\r\n                }\r\n                if (position.x > this.worldBounds.right) {\r\n                    velocity.x *= -1;\r\n                    velocity.y *= -1;\r\n                    position.x = this.worldBounds.right - pushbackDistance;\r\n                }\r\n                if (position.x < this.worldBounds.left) {\r\n                    velocity.x *= -1;\r\n                    velocity.y *= -1;\r\n                    position.x = this.worldBounds.left + pushbackDistance;\r\n                }\r\n            }\r\n            this.ball.setPosition(position.x, position.y);\r\n            this.ball.setVelocity(velocity.x, velocity.y);\r\n            this.justReturned = true;\r\n        };\r\n        BallKeeper.prototype.onBallLanded = function () {\r\n            this.positions.length = 0;\r\n            this.velocities.length = 0;\r\n        };\r\n        return BallKeeper;\r\n    }());\r\n    game.BallKeeper = BallKeeper;\r\n})(game || (game = {}));\r\n///<reference path='BallKeeper.ts' />\r\nvar game;\r\n(function (game) {\r\n    var BallEvent;\r\n    (function (BallEvent) {\r\n        BallEvent[\"CHARGE\"] = \"charge\";\r\n        BallEvent[\"DISCHARGE\"] = \"discharge\";\r\n        BallEvent[\"SPIN\"] = \"spin\";\r\n        BallEvent[\"DROP\"] = \"drop\";\r\n        BallEvent[\"THROW\"] = \"throw\";\r\n        BallEvent[\"LAND\"] = \"land\";\r\n    })(BallEvent = game.BallEvent || (game.BallEvent = {}));\r\n    var BallFrame;\r\n    (function (BallFrame) {\r\n        BallFrame[\"ORIGINAL\"] = \"ball_idle_2\";\r\n        BallFrame[\"SURPRISED\"] = \"ball_surprised\";\r\n        BallFrame[\"CHARGED\"] = \"ball_lightning_3\";\r\n    })(BallFrame = game.BallFrame || (game.BallFrame = {}));\r\n    var Ball = /** @class */ (function (_super) {\r\n        __extends(Ball, _super);\r\n        function Ball(scene, options) {\r\n            var _this = _super.call(this, scene.matter.world, 0, 0, \"gameplay\", BallFrame.ORIGINAL) || this;\r\n            _this._damage = Ball.INITIAL_DAMAGE;\r\n            _this._isCharged = false;\r\n            _this.isDropping = false;\r\n            _this.isThown = false;\r\n            _this.subDepth = 0;\r\n            _this.savedInertia = 0;\r\n            _this.subDepth = options.subDepth;\r\n            _this.setDepth(options.depth);\r\n            _this.setCircle(Ball.RADIUS, Ball.BODY_CONFIG);\r\n            _this.setCollisionGroup(options.collisionGroup);\r\n            _this.setCollisionCategory(options.collisionCategory);\r\n            _this.saveCollisionFilter();\r\n            _this.setFixedRotation();\r\n            _this.setToSleep();\r\n            _this.body.plugin[game.COLLISION_TAG] = game.CollisionTag.BALL;\r\n            _this.keeper = new game.BallKeeper(_this.scene, _this, options.worldBounds);\r\n            _this.createHorizontalMovementTracker();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Ball.prototype, \"isCharged\", {\r\n            get: function () {\r\n                return this._isCharged;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Ball.prototype, \"damage\", {\r\n            get: function () {\r\n                return this._damage;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Ball.prototype.setFixedRotation = function () {\r\n            this.savedInertia = this.body.inertia;\r\n            return _super.prototype.setFixedRotation.call(this);\r\n        };\r\n        Ball.prototype.resetFixedRotation = function () {\r\n            this.scene.matter.body.setInertia(this.body, this.savedInertia);\r\n            return this;\r\n        };\r\n        Ball.prototype.createHorizontalMovementTracker = function () {\r\n            this.movementTracker = {\r\n                positionsY: [],\r\n                timer: 0,\r\n            };\r\n        };\r\n        Ball.prototype.show = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 50,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        Ball.prototype.throw = function (rotation) {\r\n            if (this.isThown) {\r\n                return;\r\n            }\r\n            this.isThown = true;\r\n            this.resetMovementTracker();\r\n            this.setAwake();\r\n            this.setVelocityByRotation(rotation, Ball.THROW_FORCE);\r\n            this.keeper.saveInitialPositionAndVelocity();\r\n            this.emit(BallEvent.THROW, this);\r\n        };\r\n        Ball.prototype.resetMovementTracker = function () {\r\n            this.movementTracker.positionsY.length = 0;\r\n            this.movementTracker.timer = 0;\r\n        };\r\n        Ball.prototype.setVelocityByRotation = function (rotation, force) {\r\n            var x = Math.cos(rotation) * force;\r\n            var y = Math.sin(rotation) * force;\r\n            this.setVelocity(x, y);\r\n        };\r\n        Ball.prototype.preUpdate = function (time, delta) {\r\n            this.checkForHorizontalMovement(delta);\r\n            if (this.isThown) {\r\n                this.keeper.keepInsideWorld();\r\n            }\r\n        };\r\n        Ball.prototype.checkForHorizontalMovement = function (delta) {\r\n            if (this.isThown === false) {\r\n                return;\r\n            }\r\n            if (this.isDropping) {\r\n                return;\r\n            }\r\n            this.movementTracker.positionsY.push(this.y);\r\n            this.movementTracker.timer += delta;\r\n            var checkInterval = 1000;\r\n            if (this.movementTracker.timer > checkInterval) {\r\n                var minY = Math.min.apply(Math, this.movementTracker.positionsY);\r\n                var maxY = Math.max.apply(Math, this.movementTracker.positionsY);\r\n                var dy = Math.abs(maxY - minY);\r\n                if (dy < 15) {\r\n                    this.fixHorizontalMovement();\r\n                }\r\n                this.movementTracker.timer -= checkInterval;\r\n                this.movementTracker.positionsY.length = 0;\r\n            }\r\n        };\r\n        Ball.prototype.fixHorizontalMovement = function () {\r\n            var deltaAngle = 3;\r\n            var deltaRotation = Phaser.Math.DegToRad(deltaAngle);\r\n            var currentRotation = this.getVelocityRotation();\r\n            var newRotation = currentRotation + deltaRotation;\r\n            this.setVelocityByRotation(newRotation, Ball.THROW_FORCE);\r\n        };\r\n        Ball.prototype.maintainConstantFlyingSpeed = function (delta) {\r\n            if (this.isThown === false) {\r\n                return;\r\n            }\r\n            if (this.isDropping) {\r\n                return;\r\n            }\r\n            var rotation = this.getVelocityRotation();\r\n            var force = Ball.THROW_FORCE * (delta / 16.6667);\r\n            this.setVelocityByRotation(rotation, force);\r\n            this.rotation = rotation + Math.PI / 2;\r\n        };\r\n        Ball.prototype.getVelocityRotation = function () {\r\n            var x = this.body.velocity.x;\r\n            var y = this.body.velocity.y;\r\n            return Math.atan2(y, x);\r\n        };\r\n        Ball.prototype.onTouchedTheFloor = function () {\r\n            this.setToSleep();\r\n            this.setIgnoreGravity(true);\r\n            this.setFixedRotation();\r\n            this.restoreCollisionFilter();\r\n            this.resetCharge();\r\n            this.keeper.onBallLanded();\r\n            this.isThown = false;\r\n            this.isDropping = false;\r\n            this.visible = false;\r\n            this.active = false;\r\n            this.emit(game.TrailEvent.HIDE, this);\r\n            this.emit(BallEvent.LAND, this);\r\n        };\r\n        Ball.prototype.setCharge = function () {\r\n            if (this._isCharged) {\r\n                return;\r\n            }\r\n            this._isCharged = true;\r\n            this._damage *= 2;\r\n            this.setFrame(BallFrame.CHARGED);\r\n            this.emit(BallEvent.CHARGE, this);\r\n        };\r\n        Ball.prototype.resetCharge = function () {\r\n            this._isCharged = false;\r\n            this._damage = Ball.INITIAL_DAMAGE;\r\n            this.setFrame(BallFrame.ORIGINAL);\r\n            this.emit(BallEvent.DISCHARGE, this);\r\n        };\r\n        Ball.prototype.spin = function () {\r\n            this.setVelocityByRotation(Phaser.Math.RND.rotation(), Ball.THROW_FORCE);\r\n            this.emit(BallEvent.SPIN, this);\r\n            if (this._isCharged === false) {\r\n                this.setSurprisedFrame();\r\n            }\r\n        };\r\n        Ball.prototype.setSurprisedFrame = function () {\r\n            this.setFrame(BallFrame.SURPRISED);\r\n            this.resetFrame();\r\n        };\r\n        Ball.prototype.resetFrame = function (delay) {\r\n            var _this = this;\r\n            if (delay === void 0) { delay = 300; }\r\n            if (this.resetFrameEvent) {\r\n                this.resetFrameEvent.remove();\r\n                this.resetFrameEvent = null;\r\n            }\r\n            this.resetFrameEvent = this.scene.time.delayedCall(delay, function () {\r\n                if (_this._isCharged) {\r\n                    _this.setFrame(BallFrame.CHARGED);\r\n                }\r\n                else {\r\n                    _this.setFrame(BallFrame.ORIGINAL);\r\n                }\r\n            });\r\n        };\r\n        Ball.prototype.dropToFloor = function (collisionCategories) {\r\n            if (this.isThown === false) {\r\n                return;\r\n            }\r\n            if (this.isDropping) {\r\n                return;\r\n            }\r\n            this.isDropping = true;\r\n            this.setIgnoreGravity(false);\r\n            this.saveCollisionFilter();\r\n            this.setCollidesWith(collisionCategories);\r\n            this.resetFixedRotation();\r\n            var angularVelocity = 0.1 * Phaser.Math.Sign(this.body.velocity.x);\r\n            this.setAngularVelocity(angularVelocity);\r\n            var force = Phaser.Math.RND.realInRange(0, 0.05) * Phaser.Math.RND.sign();\r\n            this.applyForce({ x: force, y: 0 });\r\n            this.emit(game.TrailEvent.SHOW, this);\r\n            this.emit(BallEvent.DROP, this);\r\n        };\r\n        Ball.prototype.saveCollisionFilter = function () {\r\n            this.savedCollisionFilter = __assign({}, this.body.collisionFilter);\r\n        };\r\n        Ball.prototype.restoreCollisionFilter = function () {\r\n            if (this.savedCollisionFilter) {\r\n                this.body.collisionFilter = __assign({}, this.savedCollisionFilter);\r\n            }\r\n        };\r\n        Ball.prototype.getTrailSize = function () {\r\n            return Ball.RADIUS - 1;\r\n        };\r\n        Ball.prototype.destroy = function () {\r\n            this.isThown = false;\r\n            this.isDropping = false;\r\n            _super.prototype.destroy.call(this);\r\n        };\r\n        Ball.INITIAL_DAMAGE = 1;\r\n        Ball.THROW_FORCE = 20;\r\n        Ball.RADIUS = 29;\r\n        Ball.BODY_CONFIG = {\r\n            restitution: 1,\r\n            friction: 0,\r\n            frictionAir: 0,\r\n            frictionStatic: 0,\r\n            isStatic: false,\r\n            ignoreGravity: true,\r\n            circleRadius: Ball.RADIUS,\r\n        };\r\n        return Ball;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.Ball = Ball;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BallChargedEmitter = /** @class */ (function () {\r\n        function BallChargedEmitter(ball, emitter) {\r\n            this.ball = ball;\r\n            this.ball.on(game.BallEvent.CHARGE, this.show, this);\r\n            this.ball.on(game.BallEvent.DISCHARGE, this.hide, this);\r\n            this.emitter = emitter;\r\n        }\r\n        BallChargedEmitter.prototype.show = function () {\r\n            this.emitter.on = true;\r\n        };\r\n        BallChargedEmitter.prototype.hide = function () {\r\n            this.emitter.on = false;\r\n            // this.emitter.killAll()\r\n        };\r\n        return BallChargedEmitter;\r\n    }());\r\n    game.BallChargedEmitter = BallChargedEmitter;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BallSpinnedEmitter = /** @class */ (function () {\r\n        function BallSpinnedEmitter(scene, ball, emitter) {\r\n            this.scene = scene;\r\n            this.ball = ball;\r\n            this.ball.on(game.BallEvent.SPIN, this.show, this);\r\n            this.ball.on(game.BallEvent.LAND, this.onBallLanded, this);\r\n            this.emitter = emitter;\r\n        }\r\n        BallSpinnedEmitter.prototype.show = function () {\r\n            var _this = this;\r\n            this.emitter.on = true;\r\n            this.scene.time.delayedCall(1000, function () {\r\n                _this.hide();\r\n            });\r\n        };\r\n        BallSpinnedEmitter.prototype.onBallLanded = function () {\r\n            this.emitter.killAll();\r\n            this.emitter.on = false;\r\n        };\r\n        BallSpinnedEmitter.prototype.hide = function () {\r\n            this.emitter.on = false;\r\n        };\r\n        return BallSpinnedEmitter;\r\n    }());\r\n    game.BallSpinnedEmitter = BallSpinnedEmitter;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Line = Phaser.Geom.Line;\r\n    var IdleBallsAligner = /** @class */ (function () {\r\n        function IdleBallsAligner(scene) {\r\n            this.scene = scene;\r\n            this.grid = this.scene.grid;\r\n            this.fox = this.scene.fox;\r\n            this.idleBalls = this.scene.idleBalls;\r\n        }\r\n        IdleBallsAligner.prototype.getPoints = function (centerX) {\r\n            var idleBallsNum = this.scene.idleBalls.length;\r\n            var foxOffset = this.fox.displayWidth * 0.33;\r\n            var foxLeft = centerX - foxOffset;\r\n            var foxRight = centerX + foxOffset;\r\n            var gridOffset = game.GameGrid.CELL_SIZE / 2;\r\n            var gridLeft = gridOffset;\r\n            var gridRight = this.grid.getWidth() - gridOffset;\r\n            var leftLineStart = foxLeft < gridLeft ? gridLeft : foxLeft;\r\n            var leftLine = new Phaser.Geom.Line(leftLineStart, 0, gridLeft, 0);\r\n            var leftLineLength = Phaser.Geom.Line.Length(leftLine);\r\n            var rightLineStart = foxRight > gridRight ? gridRight : foxRight;\r\n            var rightLine = new Phaser.Geom.Line(rightLineStart, 0, gridRight, 0);\r\n            var rightLineLength = Phaser.Geom.Line.Length(rightLine);\r\n            var leftBallsNum = Math.round((leftLineLength / (leftLineLength + rightLineLength)) * idleBallsNum);\r\n            var rightBallsNum = idleBallsNum - leftBallsNum;\r\n            var leftPoints = this.getPointsFromLine(leftLine, leftBallsNum);\r\n            var rightPoints = this.getPointsFromLine(rightLine, rightBallsNum);\r\n            var pointsNum = idleBallsNum;\r\n            var points = _.times(pointsNum, function (index) {\r\n                if (index < leftBallsNum) {\r\n                    return leftPoints.shift();\r\n                }\r\n                else {\r\n                    return rightPoints.shift();\r\n                }\r\n            });\r\n            return points;\r\n        };\r\n        IdleBallsAligner.prototype.getPointsFromLine = function (line, ballsNum) {\r\n            if (ballsNum === 0) {\r\n                return [];\r\n            }\r\n            var spacePerBall = 40;\r\n            var spaceRequired = ballsNum * spacePerBall;\r\n            var spaceAvailable = Line.Length(line);\r\n            if (spaceRequired > spaceAvailable) {\r\n                return line.getPoints(ballsNum);\r\n            }\r\n            else {\r\n                return line.getPoints(0, spacePerBall);\r\n            }\r\n        };\r\n        IdleBallsAligner.prototype.placeIdleBallsAround = function (idleBalls, originX) {\r\n            var _this = this;\r\n            Phaser.Math.RND.shuffle(idleBalls);\r\n            this.getPoints(originX).forEach(function (point, index) {\r\n                _this.scene.tweens.add({\r\n                    targets: idleBalls[index],\r\n                    duration: 200,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    x: point.x,\r\n                });\r\n            });\r\n        };\r\n        IdleBallsAligner.prototype.placeIdleBallsAroundInstant = function (idleBalls, originX) {\r\n            Phaser.Math.RND.shuffle(idleBalls);\r\n            this.getPoints(originX).forEach(function (point, index) {\r\n                idleBalls[index].x = point.x;\r\n            });\r\n        };\r\n        return IdleBallsAligner;\r\n    }());\r\n    game.IdleBallsAligner = IdleBallsAligner;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var IdleBallEvent;\r\n    (function (IdleBallEvent) {\r\n        IdleBallEvent[\"SHOW\"] = \"IdleBall_SHOW\";\r\n        IdleBallEvent[\"HIDE\"] = \"IdleBall_HIDE\";\r\n    })(IdleBallEvent = game.IdleBallEvent || (game.IdleBallEvent = {}));\r\n    var IdleBall = /** @class */ (function (_super) {\r\n        __extends(IdleBall, _super);\r\n        function IdleBall(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", game.BallFrame.ORIGINAL) || this;\r\n            _this._baseY = 0;\r\n            _this.isHiding = false;\r\n            _this.scheduledForLaunch = false;\r\n            _this.setOrigin(0.5, 1);\r\n            _this.updateJumpHeight();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(IdleBall.prototype, \"jumpHeight\", {\r\n            get: function () {\r\n                return this._jumpHeight;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(IdleBall.prototype, \"baseY\", {\r\n            get: function () {\r\n                return this._baseY;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        IdleBall.prototype.show = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n            this.alpha = 0;\r\n            this._baseY = this.y;\r\n            this.playShowTween();\r\n            this.updateJumpHeight();\r\n            this.playJumpAnimation();\r\n            this.emit(IdleBallEvent.SHOW, this);\r\n        };\r\n        IdleBall.prototype.playShowTween = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        IdleBall.prototype.updateJumpHeight = function () {\r\n            this._jumpHeight = Phaser.Math.RND.between(35, 45);\r\n            this.jumpDuration = this._jumpHeight * 5.3;\r\n        };\r\n        IdleBall.prototype.playJumpAnimation = function () {\r\n            var _this = this;\r\n            this.scale = 1;\r\n            var deltaScale = 0.15;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: this.jumpDuration * 0.66,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: this.scale + deltaScale,\r\n                scaleY: this.scale - deltaScale,\r\n                yoyo: true,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: this.jumpDuration,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                y: this.y - this._jumpHeight,\r\n                completeDelay: 33,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this,\r\n                        duration: _this.jumpDuration,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        y: _this.y + _this._jumpHeight,\r\n                        onComplete: function () {\r\n                            _this.playJumpAnimation();\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        IdleBall.prototype.hide = function () {\r\n            this.stopJumpAnimation();\r\n            this.playHideTween();\r\n            this.emit(IdleBallEvent.HIDE, this);\r\n        };\r\n        IdleBall.prototype.stopJumpAnimation = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n        };\r\n        IdleBall.prototype.playHideTween = function () {\r\n            var _this = this;\r\n            this.isHiding = true;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.isHiding = false;\r\n                    _this.active = false;\r\n                    _this.visible = false;\r\n                },\r\n            });\r\n        };\r\n        IdleBall.prototype.stopHideTween = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.isHiding = false;\r\n        };\r\n        IdleBall.prototype.kill = function () {\r\n            this.stopJumpAnimation();\r\n            this.emit(IdleBallEvent.HIDE, this);\r\n            _super.prototype.kill.call(this);\r\n        };\r\n        IdleBall.prototype.revive = function () {\r\n            this.y = this._baseY;\r\n            this.playJumpAnimation();\r\n            this.emit(IdleBallEvent.SHOW, this);\r\n            _super.prototype.revive.call(this);\r\n        };\r\n        IdleBall.prototype.slightlyMoveAside = function (originX, grid) {\r\n            var offset = 50;\r\n            var left = offset;\r\n            var right = grid.getWidth() - offset;\r\n            var randomX = originX + Phaser.Math.RND.between(-100, 100);\r\n            var targetX = Phaser.Math.Clamp(randomX, left, right);\r\n            return this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                x: targetX,\r\n            });\r\n        };\r\n        IdleBall.prototype.destroy = function () {\r\n            _super.prototype.destroy.call(this, true);\r\n        };\r\n        return IdleBall;\r\n    }(Phaser.GameObjects.Image));\r\n    game.IdleBall = IdleBall;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var JumpingBallShadow = /** @class */ (function (_super) {\r\n        __extends(JumpingBallShadow, _super);\r\n        function JumpingBallShadow(scene, ball, atlas, frame) {\r\n            if (atlas === void 0) { atlas = \"gameplay\"; }\r\n            if (frame === void 0) { frame = \"ball_idle_shadow\"; }\r\n            var _this = _super.call(this, scene, 0, 0, atlas, frame) || this;\r\n            _this.visible = false;\r\n            _this.active = false;\r\n            _this.ball = ball;\r\n            _this.ball.on(game.IdleBallEvent.SHOW, _this.show, _this);\r\n            _this.ball.on(game.IdleBallEvent.HIDE, _this.hide, _this);\r\n            _this.scene.events.on(\"postupdate\", _this.postUpdate, _this);\r\n            return _this;\r\n        }\r\n        JumpingBallShadow.prototype.show = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n            this.y = this.ball.baseY;\r\n        };\r\n        JumpingBallShadow.prototype.hide = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        JumpingBallShadow.prototype.postUpdate = function () {\r\n            if (!this.visible) {\r\n                return;\r\n            }\r\n            var bottom = this.ball.baseY;\r\n            var top = this.ball.baseY - this.ball.jumpHeight;\r\n            this.x = this.ball.x + 3;\r\n            this.updateScale(bottom, top);\r\n            this.updateAlpha(bottom, top);\r\n        };\r\n        JumpingBallShadow.prototype.updateScale = function (bottom, top) {\r\n            var bottomScale = 1;\r\n            var topScale = 1.5;\r\n            this.scale = Phaser.Math.MapLinear(this.ball.y, bottom, top, bottomScale, topScale);\r\n        };\r\n        JumpingBallShadow.prototype.updateAlpha = function (bottom, top) {\r\n            var bottomAlpha = 0.66;\r\n            var topAlpha = 0.33;\r\n            this.alpha = Phaser.Math.MapLinear(this.ball.y, bottom, top, bottomAlpha, topAlpha);\r\n        };\r\n        JumpingBallShadow.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.removeListener(\"postupdate\", this.postUpdate, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return JumpingBallShadow;\r\n    }(Phaser.GameObjects.Image));\r\n    game.JumpingBallShadow = JumpingBallShadow;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var WinningBallEvent;\r\n    (function (WinningBallEvent) {\r\n        WinningBallEvent[\"LAUNCH\"] = \"launch\";\r\n        WinningBallEvent[\"EXPLODE\"] = \"explode\";\r\n    })(WinningBallEvent = game.WinningBallEvent || (game.WinningBallEvent = {}));\r\n    var WinningBall = /** @class */ (function (_super) {\r\n        __extends(WinningBall, _super);\r\n        function WinningBall(scene) {\r\n            return _super.call(this, scene, 0, 0, \"gameplay\", \"ball_idle\") || this;\r\n        }\r\n        WinningBall.prototype.launch = function (delay, side) {\r\n            var _this = this;\r\n            var sign = side === Phaser.LEFT ? -1 : 1;\r\n            var cellHeight = game.GameGrid.CELL_SIZE;\r\n            var targetX = this.x + Phaser.Math.RND.between(0, 200) * sign;\r\n            var targetY = this.y - Phaser.Math.RND.between(4 * cellHeight, 7 * cellHeight);\r\n            var distance = Phaser.Math.Distance.Between(this.x, this.y, targetX, targetY);\r\n            var duration = distance * 1.2;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this,\r\n                x: targetX,\r\n                y: targetY,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                easeParams: [0.66],\r\n                onStart: function () {\r\n                    _this.emit(WinningBallEvent.LAUNCH);\r\n                },\r\n            });\r\n            this.scene.time.delayedCall(delay + duration * 0.47, function () {\r\n                _this.explode();\r\n            });\r\n        };\r\n        WinningBall.prototype.explode = function (delay) {\r\n            var _this = this;\r\n            if (delay === void 0) { delay = 0; }\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: delay + 250,\r\n                duration: 50,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: delay,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 2,\r\n                onComplete: function () {\r\n                    _this.emit(WinningBallEvent.EXPLODE, _this);\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        return WinningBall;\r\n    }(Phaser.GameObjects.Image));\r\n    game.WinningBall = WinningBall;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LosingBall = /** @class */ (function (_super) {\r\n        __extends(LosingBall, _super);\r\n        function LosingBall(scene, idleBall) {\r\n            var _this = _super.call(this, scene.matter.world, 0, 0, idleBall.texture.key, idleBall.frame.name) || this;\r\n            _this.setCircle(game.Ball.RADIUS, __assign(__assign({}, game.Ball.BODY_CONFIG), { ignoreGravity: false, isSensor: true }));\r\n            return _this;\r\n        }\r\n        LosingBall.prototype.throw = function (side) {\r\n            var forceXSign = side === Phaser.LEFT ? -1 : 1;\r\n            var forceX = Phaser.Math.RND.realInRange(0.022, 0.05) * forceXSign;\r\n            var forceY = Phaser.Math.RND.realInRange(-0.38, -0.22);\r\n            var k = 16.66667 / this.scene.game.loop.delta;\r\n            this.applyForce({ x: forceX * k, y: forceY * k });\r\n            this.setAngularVelocity(0.1 * forceXSign);\r\n            this.playScaleTween();\r\n        };\r\n        LosingBall.prototype.playScaleTween = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1.2,\r\n            });\r\n        };\r\n        LosingBall.prototype.destroyAfter = function (delay) {\r\n            this.scene.time.delayedCall(delay, this.destroy, null, this);\r\n        };\r\n        return LosingBall;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.LosingBall = LosingBall;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Cell = /** @class */ (function (_super) {\r\n        __extends(Cell, _super);\r\n        function Cell(scene, texture, frame, column, row) {\r\n            var _this = _super.call(this, scene, 0, 0, texture, frame) || this;\r\n            _this.originalAlpha = 1;\r\n            _this._column = column;\r\n            _this._row = row;\r\n            _this.setData(\"object_type\", \"game_cell\");\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Cell.prototype, \"row\", {\r\n            get: function () {\r\n                return this._row;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Cell.prototype, \"column\", {\r\n            get: function () {\r\n                return this._column;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Cell.prototype.destroy = function () {\r\n        };\r\n        Cell.prototype.toString = function () {\r\n            return \"[column: \" + this._column + \", row: \" + this._row + \"]\";\r\n        };\r\n        return Cell;\r\n    }(Phaser.GameObjects.Image));\r\n    game.Cell = Cell;\r\n})(game || (game = {}));\r\n///<reference path='Cell.ts' />\r\nvar game;\r\n(function (game) {\r\n    var GridDirection;\r\n    (function (GridDirection) {\r\n        GridDirection[GridDirection[\"TOP\"] = 0] = \"TOP\";\r\n        GridDirection[GridDirection[\"RIGHT\"] = 1] = \"RIGHT\";\r\n        GridDirection[GridDirection[\"BOTTOM\"] = 2] = \"BOTTOM\";\r\n        GridDirection[GridDirection[\"LEFT\"] = 3] = \"LEFT\";\r\n    })(GridDirection = game.GridDirection || (game.GridDirection = {}));\r\n    var GameGrid = /** @class */ (function (_super) {\r\n        __extends(GameGrid, _super);\r\n        function GameGrid(scene, columns, rows) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.debug = false;\r\n            scene.add.existing(_this);\r\n            _this.name = \"grid\";\r\n            _this._columns = columns;\r\n            _this._rows = rows;\r\n            _this.testRect = _this.createTestRect();\r\n            _this.addCells();\r\n            _this.addRowLabels();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(GameGrid.prototype, \"columns\", {\r\n            get: function () {\r\n                return this._columns;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameGrid.prototype, \"rows\", {\r\n            get: function () {\r\n                return this._rows;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        GameGrid.prototype.createTestRect = function () {\r\n            var size = GameGrid.CELL_SIZE * 0.9;\r\n            return new Phaser.Geom.Rectangle(0, 0, size, size);\r\n        };\r\n        GameGrid.prototype.addCells = function () {\r\n            this.cells = [];\r\n            var startAlpha = 0;\r\n            var deltaAlpha = 0.1 / (this._rows - 1);\r\n            for (var row = 0; row < this._rows; row++) {\r\n                for (var column = 0; column < this._columns; column++) {\r\n                    var cell = new game.Cell(this.scene, \"gameplay\", \"cell\", column, row);\r\n                    cell.x = GameGrid.CELL_SIZE / 2 + column * GameGrid.CELL_SIZE;\r\n                    cell.y = this.getRowY(row);\r\n                    cell.alpha = startAlpha + deltaAlpha * row;\r\n                    cell.originalAlpha = cell.alpha;\r\n                    this.cells.push(cell);\r\n                    this.add(cell);\r\n                }\r\n            }\r\n        };\r\n        GameGrid.prototype.addRowLabels = function () {\r\n            var _this = this;\r\n            this.rowLabels = _.times(this._rows, function (rowNumber) {\r\n                var content = rowNumber.toString();\r\n                var label = _this.scene.add.bitmapText(0, 0, game.BitmapGameFont.INGAME_GUI_DIGITS, content, 28, Phaser.RIGHT);\r\n                label.setOrigin(0, 0.5);\r\n                label.setData(\"row\", rowNumber);\r\n                label.visible = _this.debug;\r\n                _this.add(label);\r\n                var cell = _this.getCellAt(rowNumber, 0);\r\n                Phaser.Display.Align.In.BottomLeft(label, cell, -6, 6);\r\n                return label;\r\n            });\r\n        };\r\n        GameGrid.prototype.getRowY = function (row) {\r\n            var reverseRow = this._rows - row - 1;\r\n            return GameGrid.CELL_SIZE / 2 + reverseRow * GameGrid.CELL_SIZE;\r\n        };\r\n        GameGrid.prototype.getRowByY = function (y) {\r\n            var reverseRow = Math.floor(y / GameGrid.CELL_SIZE);\r\n            var row = this._rows - reverseRow - 1;\r\n            return row;\r\n        };\r\n        GameGrid.prototype.getWidth = function () {\r\n            return this._columns * GameGrid.CELL_SIZE;\r\n        };\r\n        GameGrid.prototype.getHeight = function () {\r\n            return this._rows * GameGrid.CELL_SIZE;\r\n        };\r\n        GameGrid.prototype.getCenter = function () {\r\n            return {\r\n                x: this.x + this.getWidth() / 2,\r\n                y: this.y + this.getHeight() / 2,\r\n            };\r\n        };\r\n        GameGrid.prototype.getCellAt = function (row, column) {\r\n            return this.cells.find(function (cell) { return cell.row === row && cell.column === column; });\r\n        };\r\n        GameGrid.prototype.getCellAtXY = function (x, y) {\r\n            var row = this.getRowByY(y);\r\n            var column = Math.floor(x / GameGrid.CELL_SIZE);\r\n            return this.getCellAt(row, column);\r\n        };\r\n        GameGrid.prototype.getCellNeighbour = function (cell, direction) {\r\n            switch (direction) {\r\n                case GridDirection.TOP:\r\n                    return this.getCellAt(cell.row - 1, cell.column);\r\n                case game.GridDirection.RIGHT:\r\n                    return this.getCellAt(cell.row, cell.column + 1);\r\n                case game.GridDirection.BOTTOM:\r\n                    return this.getCellAt(cell.row + 1, cell.column);\r\n                case game.GridDirection.LEFT:\r\n                    return this.getCellAt(cell.row, cell.column - 1);\r\n            }\r\n        };\r\n        GameGrid.prototype.getCellNeighbours = function (cell) {\r\n            return [\r\n                this.getCellNeighbour(cell, GridDirection.TOP),\r\n                this.getCellNeighbour(cell, GridDirection.RIGHT),\r\n                this.getCellNeighbour(cell, GridDirection.BOTTOM),\r\n                this.getCellNeighbour(cell, GridDirection.LEFT),\r\n            ];\r\n        };\r\n        GameGrid.prototype.isCellFree = function (column, row, _bodiesToCheck) {\r\n            var cell = this.getCellAt(row, column);\r\n            if (!cell) {\r\n                return false;\r\n            }\r\n            var size = GameGrid.CELL_SIZE * 0.9;\r\n            this.testRect.x = cell.x - size / 2;\r\n            this.testRect.y = cell.y - size / 2;\r\n            this.testRect.setSize(size);\r\n            var bodiesToCheck = _bodiesToCheck || this.scene.matter.world.getAllBodies().filter(function (body) { return body.isStatic; });\r\n            return this.scene.matter.intersectRect(this.testRect.x, this.testRect.y, this.testRect.width, this.testRect.height, false, bodiesToCheck).length === 0;\r\n        };\r\n        GameGrid.prototype.toggleDebug = function () {\r\n            var _this = this;\r\n            this.debug = !this.debug;\r\n            this.rowLabels.forEach(function (label) { return (label.visible = _this.debug); });\r\n            this.cells.forEach(function (cell) {\r\n                cell.alpha = _this.debug ? 0.33 : cell.originalAlpha;\r\n            });\r\n        };\r\n        GameGrid.prototype.showClearGridFx = function (targetAlpha, initialDelay) {\r\n            var _this = this;\r\n            if (initialDelay === void 0) { initialDelay = 0; }\r\n            var rows = Object.values(_.groupBy(this.cells, \"column\"));\r\n            rows.forEach(function (row, index) {\r\n                var delay = initialDelay + index * 33;\r\n                _this.scene.tweens.add({\r\n                    delay: delay,\r\n                    targets: row,\r\n                    duration: 300,\r\n                    ease: Phaser.Math.Easing.Sine.InOut,\r\n                    alpha: targetAlpha,\r\n                    yoyo: true,\r\n                });\r\n            });\r\n        };\r\n        GameGrid.prototype.highlightRow = function (row, targetAlpha, initialDelay) {\r\n            var _this = this;\r\n            var cells = this.cells.filter(function (cell) { return cell.row === row; });\r\n            cells.forEach(function (cell) {\r\n                _this.scene.tweens.add({\r\n                    delay: initialDelay,\r\n                    targets: cell,\r\n                    duration: 250,\r\n                    ease: Phaser.Math.Easing.Sine.InOut,\r\n                    alpha: targetAlpha,\r\n                    yoyo: true,\r\n                    hold: 100,\r\n                });\r\n            });\r\n        };\r\n        GameGrid.LOSE_ROW = 2;\r\n        GameGrid.CELL_SIZE = 100;\r\n        GameGrid.COLUMNS = 7;\r\n        GameGrid.ROWS = 9;\r\n        return GameGrid;\r\n    }(Phaser.GameObjects.Container));\r\n    game.GameGrid = GameGrid;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GridWalls = /** @class */ (function () {\r\n        function GridWalls(scene, gridWidth, gridHeight) {\r\n            this.scene = scene;\r\n            this.matter = this.scene.matter;\r\n            this.createWalls(gridWidth, gridHeight);\r\n        }\r\n        GridWalls.prototype.createWalls = function (gridWidth, gridHeight) {\r\n            var wallWidth = gridWidth + GridWalls.THICKNESS * 2;\r\n            var wallHeight = gridHeight + GridWalls.THICKNESS * 2;\r\n            var config = {\r\n                restitution: 1,\r\n                isStatic: true,\r\n                friction: 0,\r\n                frictionAir: 0,\r\n                frictionStatic: 0,\r\n                label: game.CollisionTag.WALL,\r\n            };\r\n            this.top = this.matter.add.rectangle(0, 0, wallWidth, GridWalls.THICKNESS, config);\r\n            this.right = this.matter.add.rectangle(0, 0, GridWalls.THICKNESS, wallHeight, config);\r\n            this.bottom = this.matter.add.rectangle(0, 0, wallWidth, GridWalls.THICKNESS, __assign(__assign({}, config), { label: game.CollisionTag.FLOOR }));\r\n            this.left = this.matter.add.rectangle(0, 0, GridWalls.THICKNESS, wallHeight, config);\r\n            this.all = [this.top, this.right, this.bottom, this.left];\r\n            this.all.forEach(function (wall) {\r\n                wall.plugin[game.COLLISION_TAG] = game.CollisionTag.WALL;\r\n            });\r\n            this.bottom.plugin[game.COLLISION_TAG] = game.CollisionTag.FLOOR;\r\n        };\r\n        GridWalls.prototype.align = function (grid) {\r\n            var padding = GridWalls.THICKNESS / 2;\r\n            var gridCenterX = grid.x + grid.getWidth() / 2;\r\n            var gridCenterY = grid.y + grid.getHeight() / 2;\r\n            this.matter.body.setPosition(this.top, { x: gridCenterX, y: grid.y - padding });\r\n            this.matter.body.setPosition(this.right, { x: grid.getWidth() + padding, y: gridCenterY });\r\n            this.matter.body.setPosition(this.bottom, { x: gridCenterX, y: grid.getHeight() + padding });\r\n            this.matter.body.setPosition(this.left, { x: -padding, y: gridCenterY });\r\n        };\r\n        GridWalls.THICKNESS = 160;\r\n        return GridWalls;\r\n    }());\r\n    game.GridWalls = GridWalls;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameItemEvent;\r\n    (function (GameItemEvent) {\r\n        GameItemEvent[\"PRE_DESTROY\"] = \"GameItem_PRE_DESTROY\";\r\n    })(GameItemEvent = game.GameItemEvent || (game.GameItemEvent = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LightningEvent;\r\n    (function (LightningEvent) {\r\n        LightningEvent[\"KILL_START\"] = \"kill_start\";\r\n        LightningEvent[\"ACTIVATE\"] = \"activate\";\r\n    })(LightningEvent = game.LightningEvent || (game.LightningEvent = {}));\r\n    var Lightning = /** @class */ (function (_super) {\r\n        __extends(Lightning, _super);\r\n        function Lightning(world, animation) {\r\n            var _this = _super.call(this, world, 0, 0, animation.frames[0].textureKey, animation.frames[0].frame.name) || this;\r\n            _this._wasActivated = false;\r\n            _this.animation = animation;\r\n            _this.setCircle(30, { isStatic: true, isSensor: true });\r\n            _this.body.plugin[game.COLLISION_TAG] = game.CollisionTag.LIGHTNING;\r\n            _this._itemType = game.ItemType.LIGHTNING;\r\n            _this.name = \"lightning\";\r\n            _this.grid = new game.GridComponent(_this);\r\n            _this.killTweens = new game.KillTweens(_this.scene, _this);\r\n            _this.hideComponent = new game.HideComponent(_this.scene, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Lightning.prototype, \"itemType\", {\r\n            get: function () {\r\n                return this._itemType;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Lightning.prototype, \"wasActivated\", {\r\n            get: function () {\r\n                return this._wasActivated;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Lightning.prototype.startIdleTweensAndAnimation = function () {\r\n            var _this = this;\r\n            var delay = Phaser.Math.RND.between(0, 300);\r\n            this.scene.time.delayedCall(delay, function () {\r\n                _this.play(_this.animation.key);\r\n                _this.playIdleTweens();\r\n            });\r\n        };\r\n        Lightning.prototype.playIdleTweens = function () {\r\n            var _this = this;\r\n            var angle = 4 * Phaser.Math.RND.sign();\r\n            var angleTweenDuration = 600;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: angleTweenDuration / 2,\r\n                ease: Phaser.Math.Easing.Sine.Out,\r\n                angle: angle,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this,\r\n                        duration: angleTweenDuration,\r\n                        ease: Phaser.Math.Easing.Sine.InOut,\r\n                        angle: _this.angle * -1,\r\n                        yoyo: true,\r\n                        repeat: -1,\r\n                    });\r\n                },\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: angleTweenDuration * 1.5,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.12,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        Lightning.prototype.activate = function () {\r\n            if (this._wasActivated === false) {\r\n                this._wasActivated = true;\r\n                this.emit(LightningEvent.ACTIVATE, this);\r\n            }\r\n            if (this.scaleTween && this.scaleTween.isPlaying()) {\r\n                return;\r\n            }\r\n            this.playScaleAndAlphaTween();\r\n        };\r\n        Lightning.prototype.playScaleAndAlphaTween = function () {\r\n            this.scale = 1;\r\n            this.alpha = 1;\r\n            this.scaleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.4,\r\n                alpha: 0.5,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        Lightning.prototype.kill = function () {\r\n            this.emit(LightningEvent.KILL_START, this);\r\n            this.on(game.KillTweensEvent.COMPLETE, this.destroy, this);\r\n            this.killTweens.play();\r\n        };\r\n        Lightning.prototype.hideOnLevelComplete = function (duration) {\r\n            this.hideComponent.hide(duration);\r\n        };\r\n        Lightning.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            this.emit(game.GameItemEvent.PRE_DESTROY, this, fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n            this.grid.destroy();\r\n        };\r\n        return Lightning;\r\n    }(Phaser.Physics.Matter.Sprite));\r\n    game.Lightning = Lightning;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var SpinnerEvent;\r\n    (function (SpinnerEvent) {\r\n        SpinnerEvent[\"KILL_START\"] = \"kill_start\";\r\n        SpinnerEvent[\"ACTIVATE\"] = \"activate\";\r\n    })(SpinnerEvent = game.SpinnerEvent || (game.SpinnerEvent = {}));\r\n    var Spinner = /** @class */ (function (_super) {\r\n        __extends(Spinner, _super);\r\n        function Spinner(world, animation) {\r\n            var _this = _super.call(this, world, 0, 0, animation.frames[0].textureKey, animation.frames[0].frame.name) || this;\r\n            _this.timeScale = 1;\r\n            _this.initialAngularSpeed = 0.1;\r\n            _this.angularSpeed = 0;\r\n            _this.wasActivated = false;\r\n            _this.name = \"spinner\";\r\n            _this.animation = animation;\r\n            _this._itemType = game.ItemType.SPINNER;\r\n            _this.setCircle(30, { isStatic: true, isSensor: true });\r\n            _this.body.plugin[game.COLLISION_TAG] = game.CollisionTag.SPINNER;\r\n            _this.spinnedBalls = [];\r\n            _this.angularSpeed = Phaser.Math.RND.sign() * _this.initialAngularSpeed;\r\n            _this.grid = new game.GridComponent(_this);\r\n            _this.killTweens = new game.KillTweens(_this.scene, _this);\r\n            _this.hideComponent = new game.HideComponent(_this.scene, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Spinner.prototype, \"itemType\", {\r\n            get: function () {\r\n                return this._itemType;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Spinner.prototype.startIdleTweensAndAnimation = function () {\r\n            var _this = this;\r\n            var delay = Phaser.Math.RND.between(0, 500);\r\n            this.scene.time.delayedCall(delay, function () {\r\n                _this.play(_this.animation.key);\r\n                _this.playIdleTween();\r\n            });\r\n        };\r\n        Spinner.prototype.playIdleTween = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 0.9,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        Spinner.prototype.activate = function () {\r\n            if (this.wasActivated === false) {\r\n                this.wasActivated = true;\r\n                this.emit(SpinnerEvent.ACTIVATE, this);\r\n            }\r\n            if (this.scaleTween && this.scaleTween.isPlaying()) {\r\n                return;\r\n            }\r\n            this.playScaleAndAlphaTween();\r\n            this.playAngularSpeedTween();\r\n        };\r\n        Spinner.prototype.playScaleAndAlphaTween = function () {\r\n            this.scale = 1;\r\n            this.alpha = 1;\r\n            this.scaleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.25,\r\n                alpha: 0.5,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        Spinner.prototype.playAngularSpeedTween = function () {\r\n            if (this.angularSpeedTween && this.angularSpeedTween.isPlaying()) {\r\n                return;\r\n            }\r\n            var sign = Phaser.Math.Sign(this.angularSpeed);\r\n            this.angularSpeed = this.initialAngularSpeed * 5 * sign;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: 1000,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                angularSpeed: this.initialAngularSpeed * sign,\r\n            });\r\n        };\r\n        Spinner.prototype.preUpdate = function (time, delta) {\r\n            _super.prototype.preUpdate.call(this, time, delta);\r\n            this.updateSpinnedBalls(time);\r\n            this.angle += this.angularSpeed * delta * this.timeScale;\r\n        };\r\n        Spinner.prototype.updateSpinnedBalls = function (time) {\r\n            if (this.spinnedBalls.length === 0) {\r\n                return;\r\n            }\r\n            this.spinnedBalls = this.spinnedBalls.filter(function (ball) {\r\n                return time - ball.timestamp < 133;\r\n            });\r\n        };\r\n        Spinner.prototype.kill = function () {\r\n            this.emit(SpinnerEvent.KILL_START, this);\r\n            this.once(game.KillTweensEvent.COMPLETE, this.destroy, this);\r\n            this.killTweens.play();\r\n        };\r\n        Spinner.prototype.hideOnLevelComplete = function (duration) {\r\n            this.hideComponent.hide(duration);\r\n        };\r\n        Spinner.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            this.emit(game.GameItemEvent.PRE_DESTROY, this, fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n            this.grid.destroy();\r\n            this.spinnedBalls = null;\r\n        };\r\n        return Spinner;\r\n    }(Phaser.Physics.Matter.Sprite));\r\n    game.Spinner = Spinner;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var SpinnerIdleEmitter = /** @class */ (function () {\r\n        function SpinnerIdleEmitter(scene, spinner, emitter) {\r\n            this.isDestroyed = false;\r\n            this.scene = scene;\r\n            this.emitter = emitter;\r\n            this.emitter.startFollow(spinner);\r\n            this.spinner = spinner;\r\n            this.spinner.on(game.SpinnerEvent.KILL_START, this.destroy, this);\r\n            this.spinner.on(game.HideEvent.START, this.hide, this);\r\n            this.spinner.on(Phaser.GameObjects.Events.DESTROY, this.destroy, this);\r\n        }\r\n        SpinnerIdleEmitter.prototype.hide = function () {\r\n            this.emitter.killAll();\r\n            this.emitter.on = false;\r\n        };\r\n        SpinnerIdleEmitter.prototype.destroy = function () {\r\n            if (this.isDestroyed) {\r\n                return;\r\n            }\r\n            this.isDestroyed = true;\r\n            this.emitter.remove();\r\n        };\r\n        return SpinnerIdleEmitter;\r\n    }());\r\n    game.SpinnerIdleEmitter = SpinnerIdleEmitter;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var StompingEvent;\r\n    (function (StompingEvent) {\r\n        StompingEvent[\"START\"] = \"START\";\r\n        StompingEvent[\"STOP\"] = \"STOP\";\r\n    })(StompingEvent = game.StompingEvent || (game.StompingEvent = {}));\r\n    var StompingComponent = /** @class */ (function () {\r\n        function StompingComponent(scene, owner) {\r\n            this._isStomping = false;\r\n            this.originalY = 0;\r\n            this.scene = scene;\r\n            this.owner = owner;\r\n        }\r\n        StompingComponent.prototype.start = function () {\r\n            if (this._isStomping) {\r\n                return;\r\n            }\r\n            this._isStomping = true;\r\n            this.originalY = this.owner.y;\r\n            this.owner.body[\"isStomping\"] = true;\r\n            this.owner.body[\"originalY\"] = this.originalY;\r\n            this.owner.emit(StompingEvent.START, this.owner);\r\n            this.startStompingTween();\r\n        };\r\n        StompingComponent.prototype.startStompingTween = function () {\r\n            var _this = this;\r\n            var stompingHeight = 16;\r\n            this.stompingTween = this.scene.tweens.add({\r\n                targets: this.owner,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                y: this.originalY - stompingHeight,\r\n                onComplete: function () {\r\n                    _this.stompingTween = _this.scene.tweens.add({\r\n                        targets: _this.owner,\r\n                        duration: 500,\r\n                        ease: Phaser.Math.Easing.Elastic.Out,\r\n                        easeParams: [0.1, 0.2],\r\n                        y: _this.originalY,\r\n                        completeDelay: 100,\r\n                        onComplete: _this.startStompingTween.bind(_this),\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        StompingComponent.prototype.stop = function () {\r\n            if (this._isStomping === false) {\r\n                return;\r\n            }\r\n            this._isStomping = false;\r\n            this.owner.body[\"isStomping\"] = false;\r\n            this.owner.emit(StompingEvent.STOP, this.owner);\r\n            this.stopStompingTween();\r\n        };\r\n        StompingComponent.prototype.stopStompingTween = function () {\r\n            if (this.stompingTween) {\r\n                this.stompingTween.stop();\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this.owner,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                y: this.originalY,\r\n            });\r\n        };\r\n        StompingComponent.prototype.destroy = function () {\r\n            this.owner = null;\r\n        };\r\n        return StompingComponent;\r\n    }());\r\n    game.StompingComponent = StompingComponent;\r\n})(game || (game = {}));\r\n///<reference path='../components/StompingComponent.ts' />\r\nvar game;\r\n(function (game) {\r\n    var BasicBlockEvent;\r\n    (function (BasicBlockEvent) {\r\n        BasicBlockEvent[\"HIDE\"] = \"block_hide\";\r\n        BasicBlockEvent[\"FORCE_KILL\"] = \"force_kill\";\r\n        BasicBlockEvent[\"ZAP\"] = \"zap\";\r\n        BasicBlockEvent[\"HIT_BY_CRACKER\"] = \"hit_by_cracker\";\r\n    })(BasicBlockEvent = game.BasicBlockEvent || (game.BasicBlockEvent = {}));\r\n    var BasicBlock = /** @class */ (function (_super) {\r\n        __extends(BasicBlock, _super);\r\n        function BasicBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, 0, 0, texture, frame, options) || this;\r\n            _this.wasHitByCracker = false;\r\n            _this.isReady = true;\r\n            _this.matterBody = _this.body;\r\n            _this.body.plugin[game.COLLISION_TAG] = game.CollisionTag.BASIC_BLOCK;\r\n            _this._itemType = game.ItemType.BASIC_BLOCK;\r\n            _this.name = \"basic_block\";\r\n            _this.grid = new game.GridComponent(_this);\r\n            _this.health = new game.HealthComponent(_this, lives);\r\n            _this.stomping = new game.StompingComponent(_this.scene, _this);\r\n            _this.hideComponent = new game.HideComponent(_this.scene, _this);\r\n            _this.on(game.HealthEvent.DAMAGE, _this.onHit, _this);\r\n            _this.on(game.HealthEvent.KILL, _this.kill, _this);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(BasicBlock.prototype, \"itemType\", {\r\n            get: function () {\r\n                return this._itemType;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        BasicBlock.prototype.onHit = function () {\r\n            this.playHitTween();\r\n        };\r\n        BasicBlock.prototype.playHitTween = function () {\r\n            if (this.scaleTween && this.scaleTween.isPlaying()) {\r\n                return;\r\n            }\r\n            this.scaleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: { start: 1, from: 1, to: 0.9 },\r\n                yoyo: true,\r\n            });\r\n        };\r\n        BasicBlock.prototype.kill = function () {\r\n            var _this = this;\r\n            this.scene.matter.world.remove(this.matterBody);\r\n            this.scene.tweens.killTweensOf(this);\r\n            var scaleTweenDuration = 270;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: scaleTweenDuration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 0.2,\r\n            });\r\n            var alphaTweenDuration = 30;\r\n            var alphaTweenDelay = scaleTweenDuration - alphaTweenDuration;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: alphaTweenDelay,\r\n                duration: alphaTweenDuration,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: { start: 1, from: 1, to: 0 },\r\n                onComplete: function () {\r\n                    _this.destroy(false);\r\n                },\r\n            });\r\n        };\r\n        BasicBlock.prototype.hideOnLevelComplete = function (duration) {\r\n            this.hideComponent.hide(duration);\r\n        };\r\n        BasicBlock.prototype.forceKill = function () {\r\n            this.emit(BasicBlockEvent.FORCE_KILL, this);\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        BasicBlock.prototype.zap = function () {\r\n            this.emit(BasicBlockEvent.ZAP, this);\r\n        };\r\n        BasicBlock.prototype.hitByCracker = function () {\r\n            this.wasHitByCracker = true;\r\n            this.emit(BasicBlockEvent.HIT_BY_CRACKER, this);\r\n        };\r\n        BasicBlock.prototype.startStomping = function () {\r\n            this.stomping.start();\r\n        };\r\n        BasicBlock.prototype.stopStomping = function () {\r\n            this.stomping.stop();\r\n        };\r\n        BasicBlock.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            this.emit(game.GameItemEvent.PRE_DESTROY, this, fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n            this.stomping.destroy();\r\n            this.health.destroy();\r\n            this.grid.destroy();\r\n        };\r\n        return BasicBlock;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.BasicBlock = BasicBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockShadow = /** @class */ (function (_super) {\r\n        __extends(BlockShadow, _super);\r\n        function BlockShadow(scene, block) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", \"blocks/block_ground_shadow\") || this;\r\n            _this.block = block;\r\n            _this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, _this.followBlock, _this);\r\n            return _this;\r\n        }\r\n        BlockShadow.prototype.followBlock = function () {\r\n            this.x = this.block.x + this.block.displayWidth * (0.5 - this.block.originX);\r\n            this.y = this.block.y + this.block.displayHeight * (1 - this.block.originY);\r\n            this.displayWidth = this.getDisplayWidth();\r\n        };\r\n        BlockShadow.prototype.getDisplayWidth = function () {\r\n            if (this.block.itemType === game.ItemType.ICE_RHOMB) {\r\n                return this.block.displayWidth * 1.1;\r\n            }\r\n            return this.block.displayWidth * 1.35;\r\n        };\r\n        BlockShadow.prototype.show = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        BlockShadow.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE, this.followBlock, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BlockShadow;\r\n    }(Phaser.GameObjects.Image));\r\n    game.BlockShadow = BlockShadow;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockFace = /** @class */ (function (_super) {\r\n        __extends(BlockFace, _super);\r\n        function BlockFace(scene, block) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", block.frame.name + \"_face_idle\") || this;\r\n            _this.offsetX = 0;\r\n            _this.offsetY = 0;\r\n            _this.scaleOffset = 0;\r\n            _this.idleFrame = block.frame.name + \"_face_idle\";\r\n            _this.hitFrame = block.frame.name + \"_face_hit\";\r\n            _this.blinkFrame = block.frame.name + \"_face_blink\";\r\n            _this.block = block;\r\n            _this.block.on(game.HealthEvent.DAMAGE, _this.onBlockDamage, _this);\r\n            _this.block.on(game.HealthEvent.KILL, _this.onBlockKill, _this);\r\n            _this.block.on(game.BasicBlockEvent.FORCE_KILL, _this.destroy.bind(_this, false));\r\n            _this.block.on(game.BasicBlockEvent.HIT_BY_CRACKER, _this.hitByCracker, _this);\r\n            _this.block.on(game.HideEvent.COMPLETE, _this.destroy.bind(_this, false));\r\n            _this.block.on(Phaser.GameObjects.Events.DESTROY, _this.destroy.bind(_this, false));\r\n            _this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, _this.followBlock, _this);\r\n            var blockType = _this.block.itemType;\r\n            var floatingTypes = [game.ItemType.BASIC_BLOCK, game.ItemType.ICE_BLOCK, game.ItemType.PINATA_BLOCK];\r\n            if (floatingTypes.includes(blockType)) {\r\n                _this.playFloatAnimation();\r\n            }\r\n            if (blockType === game.ItemType.DYNAMITE_BLOCK) {\r\n                var delays = _.range(0, 1000, 200);\r\n                var delay = Phaser.Math.RND.pick(delays);\r\n                _this.playExplosiveAnimation(delay);\r\n            }\r\n            if (blockType === game.ItemType.TRIANGLE) {\r\n                var frame = block.frame.name;\r\n                if (frame.includes(\"1\") || frame.includes(\"2\")) {\r\n                    _this.playFloatAnimation();\r\n                }\r\n                else if (frame === \"blocks/triangle_03\") {\r\n                    _this.playFloatAnimation(-3.5, -3.5);\r\n                }\r\n                else {\r\n                    _this.playFloatAnimation(3.5, -3.5);\r\n                }\r\n            }\r\n            return _this;\r\n        }\r\n        BlockFace.getFaceFrames = function (block) {\r\n            return {\r\n                idle: block.frame.name + \"_face_idle\",\r\n                hit: block.frame.name + \"_face_hit\",\r\n                blink: block.frame.name + \"_face_blink\",\r\n            };\r\n        };\r\n        BlockFace.prototype.playExplosiveAnimation = function (delay) {\r\n            var _this = this;\r\n            var _a;\r\n            if (delay === void 0) { delay = 0; }\r\n            (_a = this.scene) === null || _a === void 0 ? void 0 : _a.tweens.add({\r\n                delay: delay,\r\n                targets: this,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scaleOffset: -0.2,\r\n                onComplete: function () {\r\n                    var _a;\r\n                    (_a = _this.scene) === null || _a === void 0 ? void 0 : _a.tweens.add({\r\n                        targets: _this,\r\n                        duration: 1500,\r\n                        ease: Phaser.Math.Easing.Elastic.Out,\r\n                        scaleOffset: 0,\r\n                        onComplete: function () {\r\n                            _this.playExplosiveAnimation(2500);\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        BlockFace.prototype.playFloatAnimation = function (dx, dy) {\r\n            if (dx === void 0) { dx = 0; }\r\n            if (dy === void 0) { dy = -7; }\r\n            var delays = _.range(0, 400, 100);\r\n            var delay = Phaser.Math.RND.pick(delays);\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                offsetX: dx,\r\n                offsetY: dy,\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        BlockFace.prototype.onBlockDamage = function () {\r\n            if (this.block.itemType === game.ItemType.DYNAMITE_BLOCK) {\r\n                return;\r\n            }\r\n            this.setFrame(this.hitFrame);\r\n            this.resetFrameAfter(300);\r\n        };\r\n        BlockFace.prototype.resetFrameAfter = function (delay) {\r\n            var _this = this;\r\n            if (this.resetFrameEvent) {\r\n                this.resetFrameEvent.remove();\r\n                this.resetFrameEvent = null;\r\n            }\r\n            this.resetFrameEvent = this.scene.time.delayedCall(delay, function () {\r\n                _this.setFrame(_this.idleFrame);\r\n            });\r\n        };\r\n        BlockFace.prototype.onBlockKill = function () {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            if (this.block.wasHitByCracker === false) {\r\n                this.setDepth(game.GameplayDepth.DEAD_BLOCK_FACES);\r\n            }\r\n            this.scene.tweens.killTweensOf(this);\r\n        };\r\n        BlockFace.prototype.hitByCracker = function () {\r\n            this.setDepth(game.GameplayDepth.HIT_BY_CRACKER_FACE);\r\n            this.scene.tweens.killTweensOf(this);\r\n        };\r\n        BlockFace.prototype.followBlock = function () {\r\n            this.x = this.block.x + this.offsetX + this.displayWidth * (this.originX - this.block.originX);\r\n            this.y = this.block.y + this.offsetY + this.displayHeight * (this.originY - this.block.originY);\r\n            this.scale = this.block.scale + this.scaleOffset;\r\n        };\r\n        BlockFace.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE, this.followBlock, this);\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BlockFace;\r\n    }(Phaser.GameObjects.Image));\r\n    game.BlockFace = BlockFace;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockWhiteCopy = /** @class */ (function (_super) {\r\n        __extends(BlockWhiteCopy, _super);\r\n        function BlockWhiteCopy(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", \"blocks/white_copies/basic_block_01\") || this;\r\n            _this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, _this.postUpdate, _this);\r\n            return _this;\r\n        }\r\n        BlockWhiteCopy.getFrame = function (originalFrame) {\r\n            return \"blocks/white_copies/\" + originalFrame.split(\"/\")[1];\r\n        };\r\n        BlockWhiteCopy.prototype.postUpdate = function () {\r\n            if (this.visible === false) {\r\n                return;\r\n            }\r\n            if (!this.originalBlock) {\r\n                return;\r\n            }\r\n            this.x = this.originalBlock.x + this.originalBlock.displayWidth * (0.5 - this.originalBlock.originX);\r\n            this.y = this.originalBlock.y + this.originalBlock.displayHeight * (0.5 - this.originalBlock.originY);\r\n            this.scale = this.originalBlock.scale;\r\n            this.angle = this.originalBlock.angle;\r\n        };\r\n        BlockWhiteCopy.prototype.setBlock = function (block) {\r\n            this.active = true;\r\n            this.originalBlock = block;\r\n            this.originalBlock.on(game.BasicBlockEvent.ZAP, this.show, this);\r\n            this.originalBlock.on(game.BasicBlockEvent.FORCE_KILL, this.kill, this);\r\n            this.originalBlock.on(Phaser.GameObjects.Events.DESTROY, this.kill, this);\r\n            this.setFrame(BlockWhiteCopy.getFrame(this.originalBlock.frame.name));\r\n        };\r\n        BlockWhiteCopy.prototype.show = function () {\r\n            var _this = this;\r\n            if (this.visible) {\r\n                return;\r\n            }\r\n            this.visible = true;\r\n            this.alpha = 0;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 66,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0.7,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this,\r\n                        duration: 400,\r\n                        ease: Phaser.Math.Easing.Quartic.In,\r\n                        alpha: 0,\r\n                        onComplete: function () {\r\n                            _this.visible = false;\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        BlockWhiteCopy.prototype.kill = function () {\r\n            this.originalBlock.off(game.BasicBlockEvent.ZAP, this.show, this);\r\n            this.originalBlock.off(game.BasicBlockEvent.FORCE_KILL, this.kill, this);\r\n            this.originalBlock.off(Phaser.GameObjects.Events.DESTROY, this.kill, this);\r\n            _super.prototype.kill.call(this);\r\n        };\r\n        BlockWhiteCopy.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BlockWhiteCopy;\r\n    }(Phaser.GameObjects.Image));\r\n    game.BlockWhiteCopy = BlockWhiteCopy;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockRedCopy = /** @class */ (function (_super) {\r\n        __extends(BlockRedCopy, _super);\r\n        function BlockRedCopy(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", \"blocks/white_copies/basic_block_01\") || this;\r\n            _this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, _this.followBlock, _this);\r\n            return _this;\r\n        }\r\n        BlockRedCopy.getFrame = function (originalFrame) {\r\n            return \"blocks/red_copies/\" + originalFrame.split(\"/\")[1];\r\n        };\r\n        BlockRedCopy.prototype.kill = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        BlockRedCopy.prototype.revive = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n        };\r\n        BlockRedCopy.prototype.setBlock = function (block) {\r\n            this.originalBlock = block;\r\n            this.originalBlock.on(game.StompingEvent.STOP, this.hide, this);\r\n            this.originalBlock.on(Phaser.GameObjects.Events.DESTROY, this.destroy, this);\r\n            this.setFrame(game.BlockWhiteCopy.getFrame(this.originalBlock.frame.name));\r\n            this.setTint(0xFF0000);\r\n        };\r\n        BlockRedCopy.prototype.playFadeTween = function () {\r\n            this.alpha = 0.1;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                alpha: 0.5,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        BlockRedCopy.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                },\r\n            });\r\n        };\r\n        BlockRedCopy.prototype.followBlock = function () {\r\n            if (this.visible === false) {\r\n                return;\r\n            }\r\n            this.x = this.originalBlock.x + this.originalBlock.displayWidth * (0.5 - this.originalBlock.originX);\r\n            this.y = this.originalBlock.y + this.originalBlock.displayHeight * (0.5 - this.originalBlock.originY);\r\n            this.scale = this.originalBlock.scale;\r\n            this.angle = this.originalBlock.angle;\r\n        };\r\n        BlockRedCopy.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BlockRedCopy;\r\n    }(Phaser.GameObjects.Image));\r\n    game.BlockRedCopy = BlockRedCopy;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockHealthCounter = /** @class */ (function (_super) {\r\n        __extends(BlockHealthCounter, _super);\r\n        function BlockHealthCounter(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, game.BitmapGameFont.BLOCK_LIVES, \"0\", 30) || this;\r\n            _this.setOrigin(0.5, 0.5);\r\n            _this.scene.events.on(\"postupdate\", _this.followBlock, _this);\r\n            return _this;\r\n        }\r\n        BlockHealthCounter.prototype.setBlock = function (block) {\r\n            this.blockOffset = this.getBlockOffset(block);\r\n            this.block = block;\r\n            this.block.on(game.HealthEvent.DAMAGE, this.onBlockHit, this);\r\n            this.block.on(game.HealthEvent.KILL, this.hide, this);\r\n            this.block.on(game.HideEvent.START, this.hide, this);\r\n            this.block.on(Phaser.GameObjects.Events.DESTROY, this.hide, this);\r\n            this.updateLives();\r\n        };\r\n        BlockHealthCounter.prototype.getBlockOffset = function (block) {\r\n            return {\r\n                x: block.displayWidth * (0.5 - block.originX) - 3,\r\n                y: -block.displayHeight * block.originY + 4,\r\n            };\r\n        };\r\n        BlockHealthCounter.prototype.updateLives = function () {\r\n            if (this.block) {\r\n                this.setText(this.block.health.value.toString());\r\n            }\r\n        };\r\n        BlockHealthCounter.prototype.onBlockHit = function () {\r\n            this.updateLives();\r\n        };\r\n        BlockHealthCounter.prototype.hide = function () {\r\n            this.block.off(game.HealthEvent.DAMAGE, this.onBlockHit, this);\r\n            this.block.off(game.HealthEvent.KILL, this.hide, this);\r\n            this.block.off(Phaser.GameObjects.Events.DESTROY, this.hide, this);\r\n            this.kill();\r\n        };\r\n        BlockHealthCounter.prototype.followBlock = function () {\r\n            if (!this.visible) {\r\n                return;\r\n            }\r\n            if (!this.block) {\r\n                return;\r\n            }\r\n            this.x = this.block.x + this.blockOffset.x;\r\n            this.y = this.block.y + this.blockOffset.y;\r\n        };\r\n        BlockHealthCounter.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.events.on(\"postupdate\", this.followBlock, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BlockHealthCounter;\r\n    }(Phaser.GameObjects.BitmapText));\r\n    game.BlockHealthCounter = BlockHealthCounter;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TriangleBlock = /** @class */ (function (_super) {\r\n        __extends(TriangleBlock, _super);\r\n        function TriangleBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this._itemType = game.ItemType.TRIANGLE;\r\n            return _this;\r\n        }\r\n        TriangleBlock.getFrame = function (num) {\r\n            return \"blocks/triangle_0\" + num;\r\n        };\r\n        TriangleBlock.TOP_LEFT_FRAME = \"blocks/triangle_03\";\r\n        TriangleBlock.TOP_RIGHT_FRAME = \"blocks/triangle_04\";\r\n        TriangleBlock.BOTTOM_RIGHT_FRAME = \"blocks/triangle_02\";\r\n        TriangleBlock.BOTTOM_LEFT_FRAME = \"blocks/triangle_01\";\r\n        TriangleBlock.ALL_FRAMES = [TriangleBlock.TOP_LEFT_FRAME, TriangleBlock.TOP_RIGHT_FRAME, TriangleBlock.BOTTOM_RIGHT_FRAME, TriangleBlock.BOTTOM_LEFT_FRAME];\r\n        return TriangleBlock;\r\n    }(game.BasicBlock));\r\n    game.TriangleBlock = TriangleBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Direction;\r\n    (function (Direction) {\r\n        Direction[Direction[\"RIGHT\"] = 1] = \"RIGHT\";\r\n        Direction[Direction[\"LEFT\"] = -1] = \"LEFT\";\r\n        Direction[Direction[\"NONE\"] = 0] = \"NONE\";\r\n    })(Direction = game.Direction || (game.Direction = {}));\r\n    var IceBlock = /** @class */ (function (_super) {\r\n        __extends(IceBlock, _super);\r\n        function IceBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this.timeScale = 1;\r\n            _this.isMoving = false;\r\n            _this.velocityK = 1;\r\n            _this.lastDirection = Direction.NONE;\r\n            _this.direction = Direction.NONE;\r\n            _this.updateDirectionTimer = 0;\r\n            _this.gameplay = _this.scene;\r\n            _this.name = \"ice_block\";\r\n            _this.position = { x: 0, y: 0 };\r\n            _this.velocity = { x: 0, y: 0 };\r\n            _this._itemType = game.ItemType.ICE_BLOCK;\r\n            _this.matterBody.plugin.isMoving = true;\r\n            _this.collisionPoints = [\r\n                { x: 0, y: 0 },\r\n                { x: 0, y: 0 },\r\n                { x: 0, y: 0 },\r\n            ];\r\n            return _this;\r\n        }\r\n        IceBlock.prototype.startMoving = function () {\r\n            this.isMoving = true;\r\n        };\r\n        IceBlock.prototype.preUpdate = function (time, delta) {\r\n            if (this.isMoving) {\r\n                this.updateMovement(time, delta);\r\n            }\r\n        };\r\n        IceBlock.prototype.updateMovement = function (time, delta) {\r\n            this.lastDirection = this.direction;\r\n            this.updateDirection(delta);\r\n            this.updateVelocityAndPosition(delta);\r\n            if (this.direction !== this.lastDirection) {\r\n                this.velocityK = 0;\r\n                this.scene.tweens.add({\r\n                    targets: this,\r\n                    duration: 100,\r\n                    ease: Phaser.Math.Easing.Linear.Linear,\r\n                    velocityK: 1,\r\n                });\r\n            }\r\n        };\r\n        IceBlock.prototype.updateDirection = function (delta) {\r\n            this.updateDirectionTimer += delta;\r\n            if (this.updateDirectionTimer > 60) {\r\n                this.direction = this.getNewDirection(this.direction);\r\n                this.updateDirectionTimer -= 60;\r\n            }\r\n        };\r\n        IceBlock.prototype.updateVelocityAndPosition = function (delta) {\r\n            this.velocity.x = IceBlock.MOVING_SPEED * this.direction * this.timeScale * this.velocityK * delta;\r\n            this.position.x = this.x + this.velocity.x;\r\n            this.position.y = this.y;\r\n            this.scene.matter.body.setPosition(this.matterBody, this.position);\r\n            this.scene.matter.body.setVelocity(this.matterBody, this.velocity);\r\n        };\r\n        IceBlock.prototype.getNewDirection = function (currentDirection) {\r\n            var newDirection = currentDirection;\r\n            if (currentDirection === Direction.NONE) {\r\n                var directions = Phaser.Math.RND.shuffle([Direction.LEFT, Direction.RIGHT]);\r\n                var firstDirection = directions[0];\r\n                var isFirstDirectionFree = this.isDirectionFree(firstDirection);\r\n                if (isFirstDirectionFree) {\r\n                    newDirection = firstDirection;\r\n                }\r\n                else {\r\n                    var secondDirection = directions[1];\r\n                    var isSecondDirectionFree = this.isDirectionFree(secondDirection);\r\n                    if (isSecondDirectionFree) {\r\n                        newDirection = secondDirection;\r\n                    }\r\n                }\r\n                return newDirection;\r\n            }\r\n            var canMoveInSameDirection = this.isDirectionFree(currentDirection);\r\n            if (canMoveInSameDirection === false) {\r\n                var oppositeDirection = this.negateDirection(currentDirection);\r\n                var canChangeDirection = this.isDirectionFree(oppositeDirection);\r\n                if (canChangeDirection) {\r\n                    newDirection = oppositeDirection;\r\n                }\r\n                else {\r\n                    newDirection = Direction.NONE;\r\n                }\r\n            }\r\n            return newDirection;\r\n        };\r\n        IceBlock.prototype.isDirectionFree = function (direction) {\r\n            var _this = this;\r\n            var offsetX = this.width / 2 + 1;\r\n            var pointX = direction === Direction.LEFT ? this.x - offsetX : this.x + offsetX;\r\n            var top = this.y - game.GameGrid.CELL_SIZE / 2 + 5;\r\n            var middle = this.y;\r\n            var bottom = this.y + game.GameGrid.CELL_SIZE / 2 - 5;\r\n            this.collisionPoints[0].x = pointX;\r\n            this.collisionPoints[0].y = top;\r\n            this.collisionPoints[1].x = pointX;\r\n            this.collisionPoints[1].y = middle;\r\n            this.collisionPoints[2].x = pointX;\r\n            this.collisionPoints[2].y = bottom;\r\n            var bodiesToCheck = this.getBodiesToCheck();\r\n            return this.collisionPoints.every(function (point) {\r\n                return _this.scene.matter.intersectPoint(point.x, point.y, bodiesToCheck).length === 0;\r\n            });\r\n        };\r\n        IceBlock.prototype.negateDirection = function (direction) {\r\n            if (direction === Direction.NONE) {\r\n                return Direction.NONE;\r\n            }\r\n            return direction === Direction.LEFT ? Direction.RIGHT : Direction.LEFT;\r\n        };\r\n        IceBlock.prototype.getBodiesToCheck = function () {\r\n            var _this = this;\r\n            var row = this.grid.getRow();\r\n            return this.scene.matter.world.getAllBodies().filter(function (body) {\r\n                var notThisBody = body !== _this.matterBody;\r\n                return notThisBody && body.isStatic && _this.areInSameRow(row, body);\r\n            });\r\n        };\r\n        IceBlock.prototype.areInSameRow = function (currentRow, body) {\r\n            var bodyRow = this.getGridRow(body);\r\n            if (bodyRow === -1) {\r\n                return true;\r\n            }\r\n            return bodyRow === currentRow;\r\n        };\r\n        IceBlock.prototype.getGridRow = function (body) {\r\n            var gameObject = body.gameObject;\r\n            if (!gameObject) {\r\n                return -1;\r\n            }\r\n            var hasGrid = typeof gameObject.grid !== \"undefined\";\r\n            if (hasGrid === false) {\r\n                return -1;\r\n            }\r\n            return gameObject.grid.getRow();\r\n        };\r\n        IceBlock.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        IceBlock.MOVING_SPEED = 0.075;\r\n        return IceBlock;\r\n    }(game.BasicBlock));\r\n    game.IceBlock = IceBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var RotatingIceBlock = /** @class */ (function (_super) {\r\n        __extends(RotatingIceBlock, _super);\r\n        function RotatingIceBlock(world, itemType, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this.angularSpeed = 0.06;\r\n            _this.name = \"rotating_ice_block\";\r\n            _this.matterBody.plugin.isRotating = true;\r\n            _this._itemType = itemType;\r\n            return _this;\r\n        }\r\n        RotatingIceBlock.prototype.preUpdate = function (time, delta) {\r\n            _super.prototype.preUpdate.call(this, time, delta);\r\n            if (this.isMoving) {\r\n                this.updateRotation(delta);\r\n            }\r\n        };\r\n        RotatingIceBlock.prototype.updateRotation = function (delta) {\r\n            this.angle += this.angularSpeed * this.direction * this.timeScale * this.velocityK * delta;\r\n        };\r\n        return RotatingIceBlock;\r\n    }(game.IceBlock));\r\n    game.RotatingIceBlock = RotatingIceBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var DynamiteBlockEvent;\r\n    (function (DynamiteBlockEvent) {\r\n        DynamiteBlockEvent[\"EXPLODE\"] = \"explode\";\r\n    })(DynamiteBlockEvent = game.DynamiteBlockEvent || (game.DynamiteBlockEvent = {}));\r\n    var DynamiteBlock = /** @class */ (function (_super) {\r\n        __extends(DynamiteBlock, _super);\r\n        function DynamiteBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this._explosionRadius = game.GameGrid.CELL_SIZE * 1.5;\r\n            _this._explosionDamage = 5;\r\n            _this._itemType = game.ItemType.DYNAMITE_BLOCK;\r\n            return _this;\r\n        }\r\n        Object.defineProperty(DynamiteBlock.prototype, \"explosionDamage\", {\r\n            get: function () {\r\n                return this._explosionDamage;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DynamiteBlock.prototype, \"explosionRadius\", {\r\n            get: function () {\r\n                return this._explosionRadius;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        DynamiteBlock.prototype.kill = function () {\r\n            var _this = this;\r\n            this.scene.matter.world.remove(this.matterBody);\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 350,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 0,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 50,\r\n                delay: 300,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.emit(DynamiteBlockEvent.EXPLODE, _this);\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        DynamiteBlock.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return DynamiteBlock;\r\n    }(game.BasicBlock));\r\n    game.DynamiteBlock = DynamiteBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var PinataEvent;\r\n    (function (PinataEvent) {\r\n        PinataEvent[\"DESTROY\"] = \"pinata_destroy\";\r\n    })(PinataEvent = game.PinataEvent || (game.PinataEvent = {}));\r\n    var PinataBlock = /** @class */ (function (_super) {\r\n        __extends(PinataBlock, _super);\r\n        function PinataBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this.name = \"pinata_block\";\r\n            _this._itemType = game.ItemType.PINATA_BLOCK;\r\n            return _this;\r\n        }\r\n        PinataBlock.prototype.kill = function () {\r\n            var _this = this;\r\n            this.scene.matter.world.remove(this.matterBody);\r\n            this.scene.tweens.killTweensOf(this);\r\n            var scaleTweenDuration = 300;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: scaleTweenDuration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 1.75,\r\n                onComplete: function () {\r\n                    _this.destroy(false);\r\n                }\r\n            });\r\n        };\r\n        PinataBlock.prototype.destroy = function (fromScene) {\r\n            if (fromScene === false) {\r\n                this.emit(PinataEvent.DESTROY, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return PinataBlock;\r\n    }(game.BasicBlock));\r\n    game.PinataBlock = PinataBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ShatterBlockEvent;\r\n    (function (ShatterBlockEvent) {\r\n        ShatterBlockEvent[\"SHATTER\"] = \"shatter\";\r\n    })(ShatterBlockEvent = game.ShatterBlockEvent || (game.ShatterBlockEvent = {}));\r\n    var ShatterBlock = /** @class */ (function (_super) {\r\n        __extends(ShatterBlock, _super);\r\n        function ShatterBlock(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this._itemType = game.ItemType.SHATTER_BLOCK;\r\n            return _this;\r\n        }\r\n        ShatterBlock.prototype.kill = function () {\r\n            var _this = this;\r\n            this.emit(ShatterBlockEvent.SHATTER, this);\r\n            this.scene.matter.world.remove(this.matterBody);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 66,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        ShatterBlock.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return ShatterBlock;\r\n    }(game.BasicBlock));\r\n    game.ShatterBlock = ShatterBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ShatterBlockPiece = /** @class */ (function (_super) {\r\n        __extends(ShatterBlockPiece, _super);\r\n        function ShatterBlockPiece(world, texture, frame, lives, options) {\r\n            var _this = _super.call(this, world, texture, frame, lives, options) || this;\r\n            _this._itemType = game.ItemType.SHATTER_BLOCK_PIECE;\r\n            return _this;\r\n        }\r\n        ShatterBlockPiece.getFrame = function (frameNumber) {\r\n            if (frameNumber === 1) {\r\n                return ShatterBlockPiece.UP_FRAME;\r\n            }\r\n            else if (frameNumber === 2) {\r\n                return ShatterBlockPiece.RIGHT_FRAME;\r\n            }\r\n            else if (frameNumber === 3) {\r\n                return ShatterBlockPiece.DOWN_FRAME;\r\n            }\r\n            else if (frameNumber === 4) {\r\n                return ShatterBlockPiece.LEFT_FRAME;\r\n            }\r\n            return ShatterBlockPiece.UP_FRAME;\r\n        };\r\n        ShatterBlockPiece.UP_FRAME = \"blocks/shatter_block_02_up\";\r\n        ShatterBlockPiece.RIGHT_FRAME = \"blocks/shatter_block_02_right\";\r\n        ShatterBlockPiece.DOWN_FRAME = \"blocks/shatter_block_02_down\";\r\n        ShatterBlockPiece.LEFT_FRAME = \"blocks/shatter_block_02_left\";\r\n        ShatterBlockPiece.ALL_FRAMES = [ShatterBlockPiece.UP_FRAME, ShatterBlockPiece.RIGHT_FRAME, ShatterBlockPiece.DOWN_FRAME, ShatterBlockPiece.LEFT_FRAME];\r\n        return ShatterBlockPiece;\r\n    }(game.BasicBlock));\r\n    game.ShatterBlockPiece = ShatterBlockPiece;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var CollectableBallEvent;\r\n    (function (CollectableBallEvent) {\r\n        CollectableBallEvent[\"START_FALL\"] = \"start_fall\";\r\n        CollectableBallEvent[\"ACTIVATE\"] = \"activate\";\r\n    })(CollectableBallEvent = game.CollectableBallEvent || (game.CollectableBallEvent = {}));\r\n    var CollectableBall = /** @class */ (function (_super) {\r\n        __extends(CollectableBall, _super);\r\n        function CollectableBall(world, worldBounds) {\r\n            var _a;\r\n            var _this = _super.call(this, world, 0, 0, \"gameplay\", CollectableBall.ORIGINAL_FRAME) || this;\r\n            _this.isFalling = false;\r\n            _this._isDestroyed = false;\r\n            _this.setCircle(CollectableBall.RADIUS, {\r\n                isStatic: true,\r\n                isSensor: true,\r\n                ignoreGravity: true,\r\n                plugin: (_a = {},\r\n                    _a[game.COLLISION_TAG] = game.CollisionTag.COLLECTABLE_BALL,\r\n                    _a),\r\n            });\r\n            _this._itemType = game.ItemType.COLLECTABLE_BALL;\r\n            _this.name = \"collectable_ball\";\r\n            _this.grid = new game.GridComponent(_this);\r\n            _this.killTweens = new game.KillTweens(_this.scene, _this);\r\n            _this.hideComponent = new game.HideComponent(_this.scene, _this);\r\n            _this.keeper = new game.BallKeeper(_this.scene, _this, worldBounds);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(CollectableBall.prototype, \"itemType\", {\r\n            get: function () {\r\n                return this._itemType;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(CollectableBall.prototype, \"isDestroyed\", {\r\n            get: function () {\r\n                return this._isDestroyed;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        CollectableBall.prototype.startIdleTweens = function () {\r\n            var _this = this;\r\n            var delay = Phaser.Math.RND.between(0, 300);\r\n            this.state = \"activated\";\r\n            this.scene.time.delayedCall(delay, function () {\r\n                _this.emit(CollectableBallEvent.ACTIVATE, _this);\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.1,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n            var targetAngle = Phaser.Math.RND.sign() * 6;\r\n            var duration = 900;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this,\r\n                duration: duration / 2,\r\n                ease: Phaser.Math.Easing.Sine.Out,\r\n                angle: targetAngle,\r\n                onComplete: function () {\r\n                    _this.angleTween = _this.scene.tweens.add({\r\n                        duration: duration,\r\n                        targets: _this,\r\n                        ease: Phaser.Math.Easing.Sine.InOut,\r\n                        angle: _this.angle * -1,\r\n                        yoyo: true,\r\n                        repeat: -1,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        CollectableBall.prototype.startFalling = function () {\r\n            if (this.isFalling) {\r\n                return;\r\n            }\r\n            this.isFalling = true;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.keeper.saveInitialPositionAndVelocity();\r\n            this.playCollectTween();\r\n            this.setSurprisedFrame();\r\n            this.setSensor(false);\r\n            this.setStatic(false);\r\n            this.setIgnoreGravity(false);\r\n            this.setAngularVelocity(0.15 * Phaser.Math.RND.sign());\r\n            this.setVelocityY(-22 * (this.scene.game.loop.delta / 16.6666667));\r\n            this.setAwake();\r\n            this.emit(CollectableBallEvent.START_FALL, this);\r\n        };\r\n        CollectableBall.prototype.preUpdate = function (time, delta) {\r\n            if (this.isFalling) {\r\n                this.keeper.keepInsideWorld();\r\n            }\r\n        };\r\n        CollectableBall.prototype.playCollectTween = function () {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                angle: 0,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: this.scale * 1.3,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this,\r\n                        duration: 150,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        scale: 1,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        CollectableBall.prototype.kill = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.once(game.KillTweensEvent.COMPLETE, this.destroy, this);\r\n            this.killTweens.play();\r\n        };\r\n        CollectableBall.prototype.setSurprisedFrame = function () {\r\n            this.setFrame(CollectableBall.SURPRISED_FRAME);\r\n            this.resetFrame(400);\r\n        };\r\n        CollectableBall.prototype.resetFrame = function (delay) {\r\n            var _this = this;\r\n            if (this.resetFrameEvent) {\r\n                this.resetFrameEvent.remove();\r\n                this.resetFrameEvent = null;\r\n            }\r\n            this.resetFrameEvent = this.scene.time.delayedCall(delay, function () {\r\n                _this.setFrame(CollectableBall.ORIGINAL_FRAME);\r\n            });\r\n        };\r\n        CollectableBall.prototype.hideOnLevelComplete = function (duration) {\r\n            this.hideComponent.hide(duration);\r\n        };\r\n        CollectableBall.prototype.preDestroy = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            if (this.angleTween) {\r\n                this.angleTween.remove();\r\n            }\r\n        };\r\n        CollectableBall.prototype.destroy = function (fromScene) {\r\n            this.emit(game.GameItemEvent.PRE_DESTROY, this, fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n            this.grid.destroy();\r\n            this._isDestroyed = true;\r\n        };\r\n        CollectableBall.RADIUS = 37;\r\n        CollectableBall.ORIGINAL_FRAME = \"ball_collectable\";\r\n        CollectableBall.SURPRISED_FRAME = \"ball_collectable_surprised\";\r\n        return CollectableBall;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.CollectableBall = CollectableBall;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GridComponent = /** @class */ (function () {\r\n        function GridComponent(owner) {\r\n            this.owner = owner;\r\n        }\r\n        GridComponent.prototype.alignToCell = function (cell) {\r\n            this.owner.x = cell.x;\r\n            this.owner.y = cell.y;\r\n        };\r\n        GridComponent.prototype.getGridPosition = function () {\r\n            return { x: this.getColumn(), y: this.getRow() };\r\n        };\r\n        GridComponent.prototype.getColumn = function () {\r\n            return Math.floor(this.owner.x / game.GameGrid.CELL_SIZE);\r\n        };\r\n        GridComponent.prototype.getRow = function () {\r\n            var row = Math.floor(this.owner.y / game.GameGrid.CELL_SIZE);\r\n            var reverseRow = game.GameGrid.ROWS - row - 1;\r\n            return reverseRow;\r\n        };\r\n        GridComponent.prototype.destroy = function () {\r\n            this.owner = null;\r\n        };\r\n        return GridComponent;\r\n    }());\r\n    game.GridComponent = GridComponent;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var HealthEvent;\r\n    (function (HealthEvent) {\r\n        HealthEvent[\"DAMAGE\"] = \"damage\";\r\n        HealthEvent[\"KILL\"] = \"kill\";\r\n    })(HealthEvent = game.HealthEvent || (game.HealthEvent = {}));\r\n    var HealthComponent = /** @class */ (function () {\r\n        function HealthComponent(owner, health) {\r\n            this.invincible = false;\r\n            this.owner = owner;\r\n            this._value = health;\r\n        }\r\n        Object.defineProperty(HealthComponent.prototype, \"value\", {\r\n            get: function () {\r\n                return this._value;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        HealthComponent.prototype.kill = function () {\r\n            if (this.invincible) {\r\n                return;\r\n            }\r\n            this.damage(this.value);\r\n        };\r\n        HealthComponent.prototype.damage = function (damageValue) {\r\n            if (this.invincible) {\r\n                return;\r\n            }\r\n            if (this.isAlive() === false) {\r\n                return;\r\n            }\r\n            this._value = Phaser.Math.MinSub(this._value, damageValue, 0);\r\n            this.owner.emit(HealthEvent.DAMAGE, this.owner, damageValue);\r\n            if (this._value === 0) {\r\n                this.owner.emit(HealthEvent.KILL, this.owner, damageValue);\r\n            }\r\n        };\r\n        HealthComponent.prototype.isAlive = function () {\r\n            return this._value > 0;\r\n        };\r\n        HealthComponent.prototype.destroy = function () {\r\n            this.owner = null;\r\n        };\r\n        return HealthComponent;\r\n    }());\r\n    game.HealthComponent = HealthComponent;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var KillTweensEvent;\r\n    (function (KillTweensEvent) {\r\n        KillTweensEvent[\"START\"] = \"start\";\r\n        KillTweensEvent[\"COMPLETE\"] = \"complete\";\r\n    })(KillTweensEvent = game.KillTweensEvent || (game.KillTweensEvent = {}));\r\n    var KillTweens = /** @class */ (function () {\r\n        function KillTweens(scene, owner) {\r\n            this.scene = scene;\r\n            this.owner = owner;\r\n        }\r\n        KillTweens.prototype.play = function () {\r\n            var _this = this;\r\n            this.owner.emit(KillTweensEvent.START, this.owner);\r\n            var scaleTweenDuration = 270;\r\n            this.scene.tweens.add({\r\n                targets: this.owner,\r\n                duration: scaleTweenDuration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 0.33,\r\n            });\r\n            var alphaTweenDuration = 30;\r\n            var alphaTweenDelay = scaleTweenDuration - alphaTweenDuration;\r\n            this.scene.tweens.add({\r\n                targets: this.owner,\r\n                delay: alphaTweenDelay,\r\n                duration: alphaTweenDuration,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.owner.emit(KillTweensEvent.COMPLETE, _this.owner);\r\n                },\r\n            });\r\n        };\r\n        KillTweens.prototype.destroy = function () { };\r\n        return KillTweens;\r\n    }());\r\n    game.KillTweens = KillTweens;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var HideEvent;\r\n    (function (HideEvent) {\r\n        HideEvent[\"START\"] = \"hide_start\";\r\n        HideEvent[\"COMPLETE\"] = \"hide_complete\";\r\n    })(HideEvent = game.HideEvent || (game.HideEvent = {}));\r\n    var HideComponent = /** @class */ (function () {\r\n        function HideComponent(scene, owner) {\r\n            this.scene = scene;\r\n            this.owner = owner;\r\n        }\r\n        HideComponent.prototype.hide = function (duration) {\r\n            var _this = this;\r\n            this.owner.emit(HideEvent.START, this.owner);\r\n            this.scene.matter.world.remove(this.owner.body);\r\n            this.scene.tweens.killTweensOf(this.owner);\r\n            this.scene.tweens.add({\r\n                targets: this.owner,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 0,\r\n                onComplete: function () {\r\n                    _this.owner.active = false;\r\n                    _this.owner.visible = false;\r\n                    _this.owner.emit(HideEvent.COMPLETE, _this.owner);\r\n                },\r\n            });\r\n        };\r\n        HideComponent.prototype.destroy = function () {\r\n        };\r\n        return HideComponent;\r\n    }());\r\n    game.HideComponent = HideComponent;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    game.COLLISION_TAG = \"collision_tag\";\r\n    var CollisionTag;\r\n    (function (CollisionTag) {\r\n        CollisionTag[\"CRACKER\"] = \"cracker\";\r\n        CollisionTag[\"BOMB\"] = \"bomb\";\r\n        CollisionTag[\"SPINNER\"] = \"spinner\";\r\n        CollisionTag[\"LIGHTNING\"] = \"lightning\";\r\n        CollisionTag[\"BASIC_BLOCK\"] = \"basic_block\";\r\n        CollisionTag[\"BALL\"] = \"ball\";\r\n        CollisionTag[\"WINNING_BALL\"] = \"winning_ball\";\r\n        CollisionTag[\"COLLECTABLE_BALL\"] = \"collectable_ball\";\r\n        CollisionTag[\"WALL\"] = \"wall\";\r\n        CollisionTag[\"FLOOR\"] = \"floor\";\r\n    })(CollisionTag = game.CollisionTag || (game.CollisionTag = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayDepth;\r\n    (function (GameplayDepth) {\r\n        GameplayDepth[GameplayDepth[\"GRID\"] = 0] = \"GRID\";\r\n        GameplayDepth[GameplayDepth[\"BALL_TRAILS\"] = 1] = \"BALL_TRAILS\";\r\n        GameplayDepth[GameplayDepth[\"IDLE_BALLS_SHADOWS\"] = 2] = \"IDLE_BALLS_SHADOWS\";\r\n        GameplayDepth[GameplayDepth[\"IDLE_BALLS\"] = 3] = \"IDLE_BALLS\";\r\n        GameplayDepth[GameplayDepth[\"DEAD_BLOCKS\"] = 4] = \"DEAD_BLOCKS\";\r\n        GameplayDepth[GameplayDepth[\"DEAD_BLOCK_FACES\"] = 5] = \"DEAD_BLOCK_FACES\";\r\n        GameplayDepth[GameplayDepth[\"ICE_BLOCK_PARTICLES\"] = 6] = \"ICE_BLOCK_PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"SPINNERS\"] = 7] = \"SPINNERS\";\r\n        GameplayDepth[GameplayDepth[\"LIGHTNINGS\"] = 8] = \"LIGHTNINGS\";\r\n        GameplayDepth[GameplayDepth[\"BALLS_LIGHTNING_PARTICLES\"] = 9] = \"BALLS_LIGHTNING_PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"BALLS\"] = 10] = \"BALLS\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_HINT\"] = 11] = \"BLOCK_HINT\";\r\n        GameplayDepth[GameplayDepth[\"ITEMS\"] = 12] = \"ITEMS\";\r\n        GameplayDepth[GameplayDepth[\"STOMPING_BLOCKS\"] = 13] = \"STOMPING_BLOCKS\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_FACES\"] = 14] = \"BLOCK_FACES\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_WHITE_COPIES\"] = 15] = \"BLOCK_WHITE_COPIES\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_RED_COPIES\"] = 16] = \"BLOCK_RED_COPIES\";\r\n        GameplayDepth[GameplayDepth[\"NUDGED_ITEMS\"] = 17] = \"NUDGED_ITEMS\";\r\n        GameplayDepth[GameplayDepth[\"DROPPED_COLLECTABLE_BALLS\"] = 18] = \"DROPPED_COLLECTABLE_BALLS\";\r\n        GameplayDepth[GameplayDepth[\"TRAJECTORY\"] = 19] = \"TRAJECTORY\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_HEALTH_COUNTER\"] = 20] = \"BLOCK_HEALTH_COUNTER\";\r\n        GameplayDepth[GameplayDepth[\"BLOCK_DAMAGE_FX\"] = 21] = \"BLOCK_DAMAGE_FX\";\r\n        GameplayDepth[GameplayDepth[\"HIT_BY_CRACKER\"] = 22] = \"HIT_BY_CRACKER\";\r\n        GameplayDepth[GameplayDepth[\"HIT_BY_CRACKER_FACE\"] = 23] = \"HIT_BY_CRACKER_FACE\";\r\n        GameplayDepth[GameplayDepth[\"LOSE_TUTORIAL\"] = 24] = \"LOSE_TUTORIAL\";\r\n        GameplayDepth[GameplayDepth[\"BOOSTER_BELOW_PARTICLES\"] = 25] = \"BOOSTER_BELOW_PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"BOOSTER\"] = 26] = \"BOOSTER\";\r\n        GameplayDepth[GameplayDepth[\"BOOSTER_ABOVE_PARTICLES\"] = 27] = \"BOOSTER_ABOVE_PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"WINNING_BALLS\"] = 28] = \"WINNING_BALLS\";\r\n        GameplayDepth[GameplayDepth[\"PLUS_DUCK_FX\"] = 29] = \"PLUS_DUCK_FX\";\r\n        GameplayDepth[GameplayDepth[\"TURN_POINTS_FX\"] = 30] = \"TURN_POINTS_FX\";\r\n        GameplayDepth[GameplayDepth[\"PARTICLES\"] = 31] = \"PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"JUMP_ON_FOX_BLOCK\"] = 32] = \"JUMP_ON_FOX_BLOCK\";\r\n        GameplayDepth[GameplayDepth[\"JUMP_ON_FOX_BLOCK_DUST\"] = 33] = \"JUMP_ON_FOX_BLOCK_DUST\";\r\n        GameplayDepth[GameplayDepth[\"FOX_THROWN\"] = 34] = \"FOX_THROWN\";\r\n        GameplayDepth[GameplayDepth[\"LOSING_BALLS\"] = 35] = \"LOSING_BALLS\";\r\n        GameplayDepth[GameplayDepth[\"LEVEL_COMPLETE_FX_PARTICLES\"] = 36] = \"LEVEL_COMPLETE_FX_PARTICLES\";\r\n        GameplayDepth[GameplayDepth[\"LEVEL_COMPLETE_FX\"] = 37] = \"LEVEL_COMPLETE_FX\";\r\n        GameplayDepth[GameplayDepth[\"EXPLOSION\"] = 38] = \"EXPLOSION\";\r\n    })(GameplayDepth = game.GameplayDepth || (game.GameplayDepth = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BallCharged = /** @class */ (function (_super) {\r\n        __extends(BallCharged, _super);\r\n        function BallCharged(scene, ball) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", \"ball_lightning_3\") || this;\r\n            _this.subDepth = 0;\r\n            _this.ball = ball;\r\n            // this.ball.on(BallEvent.CHARGE, this.show, this)\r\n            // this.ball.on(BallEvent.DISCHARGE, this.kill, this)\r\n            // this.scene.events.on(\"postupdate\", this.followBall, this)\r\n            _this.kill();\r\n            return _this;\r\n        }\r\n        BallCharged.prototype.show = function () {\r\n            this.revive();\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0.75,\r\n            });\r\n        };\r\n        BallCharged.prototype.kill = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.visible = false;\r\n            this.active = false;\r\n        };\r\n        BallCharged.prototype.revive = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n        };\r\n        BallCharged.prototype.followBall = function () {\r\n            if (!this.visible) {\r\n                return;\r\n            }\r\n            this.x = this.ball.x;\r\n            this.y = this.ball.y;\r\n            this.angle = this.ball.angle;\r\n            this.scale = this.ball.scale;\r\n        };\r\n        BallCharged.prototype.destroy = function (fromScene) {\r\n            this.ball = null;\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n                this.scene.events.off(\"postupdate\", this.followBall, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BallCharged;\r\n    }(Phaser.GameObjects.Image));\r\n    game.BallCharged = BallCharged;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelGenerator = /** @class */ (function () {\r\n        function LevelGenerator(scene, levelConfig) {\r\n            this.rowPointer = 0;\r\n            this.scene = scene;\r\n            this.levelConfig = levelConfig;\r\n            this.generatorConfig = levelConfig.generator;\r\n            this.itemsGenerator = new game.ItemsGenerator(scene, this.levelConfig);\r\n            var predefinedItems = this.createPredefinedItems(levelConfig.items);\r\n            // let generatedItems = this.createGeneratedItems(levelConfig.items)\r\n            var generatedItems = [];\r\n            this.items = __spreadArrays(predefinedItems, generatedItems);\r\n            this.items = this.items.sort(this.sortByGridPosition.bind(this));\r\n        }\r\n        LevelGenerator.prototype.sortByGridPosition = function (a, b) {\r\n            if (a.row === b.row) {\r\n                return a.column - b.column;\r\n            }\r\n            return a.row - b.row;\r\n        };\r\n        LevelGenerator.prototype.createPredefinedItems = function (predefinedItems) {\r\n            return predefinedItems.map(function (itemConfig) {\r\n                return {\r\n                    type: itemConfig.type,\r\n                    column: itemConfig.column,\r\n                    row: itemConfig.row,\r\n                    config: __assign({}, itemConfig.params),\r\n                };\r\n            });\r\n        };\r\n        LevelGenerator.prototype.getInitialItems = function (rowsNum) {\r\n            this.rowPointer += rowsNum;\r\n            return this.items.filter(function (item) { return item.row < rowsNum; });\r\n        };\r\n        LevelGenerator.prototype.getNextRows = function (rowsNum) {\r\n            var bottomRow = this.rowPointer;\r\n            var topRow = this.rowPointer + rowsNum;\r\n            var items = this.items.filter(function (item) { return item.row >= bottomRow && item.row < topRow; });\r\n            this.rowPointer += rowsNum;\r\n            return items;\r\n        };\r\n        LevelGenerator.prototype.moveRowPointer = function (delta) {\r\n            this.rowPointer += delta;\r\n        };\r\n        return LevelGenerator;\r\n    }());\r\n    game.LevelGenerator = LevelGenerator;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Explosion = /** @class */ (function (_super) {\r\n        __extends(Explosion, _super);\r\n        function Explosion(scene, animation) {\r\n            var _this = _super.call(this, scene, 0, 0, animation.frames[0].textureKey, animation.frames[0].frame.name) || this;\r\n            _this.on(\"animationcomplete-\" + animation.key, _this.destroy, _this);\r\n            _this.play(animation.key);\r\n            return _this;\r\n        }\r\n        Explosion.prototype.playScaleTween = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: this.scale * 1.5,\r\n            });\r\n        };\r\n        Explosion.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return Explosion;\r\n    }(Phaser.GameObjects.Sprite));\r\n    game.Explosion = Explosion;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockDamageFx = /** @class */ (function (_super) {\r\n        __extends(BlockDamageFx, _super);\r\n        function BlockDamageFx(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, game.BitmapGameFont.BLOCK_DAMAGE_FX, \"0\", 30) || this;\r\n            _this.setOrigin(0.5, 0.5);\r\n            return _this;\r\n        }\r\n        BlockDamageFx.prototype.reset = function () {\r\n            this.active = true;\r\n            this.visible = true;\r\n            this.scene.tweens.killTweensOf(this);\r\n        };\r\n        BlockDamageFx.prototype.show = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n                completeDelay: 700,\r\n                onComplete: this.hide.bind(this),\r\n            });\r\n            this.scale = 0.66;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                scale: { value: 1, duration: 600, ease: Phaser.Math.Easing.Back.Out },\r\n                x: { value: this.getTargetX(), duration: 500, ease: Phaser.Math.Easing.Back.Out },\r\n                y: { value: \"-=20\", duration: 1200, ease: Phaser.Math.Easing.Linear.Linear },\r\n            });\r\n        };\r\n        BlockDamageFx.prototype.getTargetX = function () {\r\n            return this.x + Phaser.Math.RND.sign() * Phaser.Math.RND.between(7, 14);\r\n        };\r\n        BlockDamageFx.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.visible = false;\r\n                    _this.active = false;\r\n                },\r\n            });\r\n        };\r\n        return BlockDamageFx;\r\n    }(Phaser.GameObjects.BitmapText));\r\n    game.BlockDamageFx = BlockDamageFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var PlusBallFx = /** @class */ (function (_super) {\r\n        __extends(PlusBallFx, _super);\r\n        function PlusBallFx(scene, text) {\r\n            var _this = _super.call(this, scene, 0, 0, text, PlusBallFx.getTextStyle()) || this;\r\n            _this.setOrigin(0.5, 0.5);\r\n            return _this;\r\n        }\r\n        PlusBallFx.getTextStyle = function () {\r\n            return {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"29px\",\r\n                color: \"#C62324\",\r\n                strokeThickness: 8,\r\n                stroke: \"#EED898\",\r\n                shadow: {\r\n                    blur: 0,\r\n                    offsetY: 4,\r\n                    color: \"rgba(0,0,0,0.2)\",\r\n                    stroke: true,\r\n                    fill: false,\r\n                },\r\n            };\r\n        };\r\n        PlusBallFx.prototype.show = function () {\r\n            var _this = this;\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                alpha: { value: 1, duration: 150, ease: Phaser.Math.Easing.Cubic.Out },\r\n                completeDelay: 800,\r\n                onComplete: function () {\r\n                    _this.hide();\r\n                },\r\n            });\r\n            this.scale = 0.66;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.33],\r\n                scale: 1,\r\n            });\r\n            this.angle = Phaser.Math.RND.sign() * 5;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                angle: this.angle * -1,\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        PlusBallFx.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                scale: 1.2,\r\n                onComplete: function () {\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        PlusBallFx.prototype.preUpdate = function (time, delta) {\r\n            this.y -= delta * 0.035;\r\n        };\r\n        return PlusBallFx;\r\n    }(Phaser.GameObjects.Text));\r\n    game.PlusBallFx = PlusBallFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteText = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteText, _super);\r\n        function LevelCompleteText(scene, text) {\r\n            var _this = _super.call(this, scene, 0, 0, text, LevelCompleteText.getTextStyle()) || this;\r\n            _this.setLineSpacing(-25);\r\n            _this.setOrigin(0.5, 0.5);\r\n            return _this;\r\n        }\r\n        LevelCompleteText.getTextStyle = function () {\r\n            return {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"80px\",\r\n                color: \"#C62324\",\r\n                strokeThickness: 14,\r\n                stroke: \"#EED898\",\r\n                align: \"center\",\r\n                shadow: {\r\n                    blur: 0,\r\n                    offsetY: 10,\r\n                    color: \"rgba(0,0,0,0.2)\",\r\n                    stroke: true,\r\n                    fill: false,\r\n                },\r\n            };\r\n        };\r\n        LevelCompleteText.prototype.show = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                alpha: { value: 1, duration: 200, ease: Phaser.Math.Easing.Quintic.In },\r\n            });\r\n            var deltaY = 80;\r\n            this.y += deltaY;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 1500,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.5],\r\n                y: this.y - deltaY,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: { from: 2.5, to: 1 },\r\n            });\r\n        };\r\n        return LevelCompleteText;\r\n    }(Phaser.GameObjects.Text));\r\n    game.LevelCompleteText = LevelCompleteText;\r\n})(game || (game = {}));\r\n///<reference path='LevelCompleteText.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var LevelCompleteFx = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteFx, _super);\r\n        function LevelCompleteFx(scene, isLastLevel) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.emitterParticlesNum = 40;\r\n            _this.name = \"level_complete\";\r\n            _this.addCircleFx();\r\n            _this.addText(isLastLevel);\r\n            _this.addEmitter();\r\n            return _this;\r\n        }\r\n        LevelCompleteFx.prototype.addCircleFx = function () {\r\n            this.circleFx = this.scene.add.image(0, 0, \"gameplay\", \"circle_fx_beige\");\r\n            this.circleFx.scale = 0.5;\r\n            this.circleFx.alpha = 0;\r\n            this.add(this.circleFx);\r\n        };\r\n        LevelCompleteFx.prototype.addText = function (isLastLevel) {\r\n            var content = isLastLevel\r\n                ? this.scene.texts.game_complete\r\n                : this.scene.texts.level_complete;\r\n            this.text = new game.LevelCompleteText(this.scene, content);\r\n            this.add(this.text);\r\n        };\r\n        LevelCompleteFx.prototype.addEmitter = function () {\r\n            if (this.scene.game.rendererType === game.RendererType.CANVAS) {\r\n                return;\r\n            }\r\n            var manager = this.scene.add.particles(\"gameplay\").setDepth(game.GameplayDepth.LEVEL_COMPLETE_FX_PARTICLES);\r\n            this.emitter = manager.createEmitter({\r\n                emitZone: this.getEmitZone(),\r\n                frame: \"particles_spark_3\",\r\n                lifespan: 900,\r\n                radial: true,\r\n                angle: { start: 0, end: 360, steps: this.emitterParticlesNum },\r\n                scale: { start: 0.5, end: 0, ease: EasingString.ExpoEaseIn },\r\n                alpha: { start: 0.8, end: 0 },\r\n                speed: { min: 150, max: 400 },\r\n                on: false,\r\n            });\r\n        };\r\n        LevelCompleteFx.prototype.getEmitZone = function () {\r\n            return {\r\n                source: new Phaser.Geom.Circle(0, 0, 40),\r\n                quantity: this.emitterParticlesNum,\r\n                type: \"edge\",\r\n            };\r\n        };\r\n        LevelCompleteFx.prototype.show = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                delay: 400,\r\n                targets: this,\r\n                duration: 900,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"-=30\",\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: 300,\r\n                targets: this,\r\n                duration: 266,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.2,\r\n                yoyo: true,\r\n                onComplete: this.playWiggleTween.bind(this),\r\n            });\r\n            this.text.show();\r\n            this.scene.time.delayedCall(170, function () {\r\n                _this.showCircle();\r\n            });\r\n            this.scene.time.delayedCall(200, function () {\r\n                _this.playCameraZoomTween();\r\n            });\r\n            this.scene.time.delayedCall(200, function () {\r\n                if (_this.emitter) {\r\n                    _this.emitter.explode(_this.emitterParticlesNum, _this.x, _this.y);\r\n                }\r\n            });\r\n        };\r\n        LevelCompleteFx.prototype.playWiggleTween = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.04,\r\n                scaleY: 0.955,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        LevelCompleteFx.prototype.showCircle = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this.circleFx,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Expo.In,\r\n                alpha: 1,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        delay: 150,\r\n                        targets: _this.circleFx,\r\n                        duration: 350,\r\n                        ease: Phaser.Math.Easing.Cubic.Out,\r\n                        alpha: 0,\r\n                    });\r\n                },\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.circleFx,\r\n                duration: 650,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                scale: 2.1,\r\n            });\r\n        };\r\n        LevelCompleteFx.prototype.playCameraZoomTween = function () {\r\n            var mainCamera = this.scene.cameras.main;\r\n            this.cameraFilter = mainCamera.id;\r\n            var camera = this.createCustomCamera(mainCamera);\r\n            var targetZoom = camera.zoom * 1.3;\r\n            this.scene.tweens.add({\r\n                targets: camera,\r\n                duration: 366,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                zoom: targetZoom,\r\n                scrollY: camera.scrollY - 70 * targetZoom,\r\n                yoyo: true,\r\n                onComplete: this.onCameraTweenZoomComplete.bind(this, camera),\r\n            });\r\n        };\r\n        LevelCompleteFx.prototype.createCustomCamera = function (mainCamera) {\r\n            var _this = this;\r\n            var camera = this.scene.cameras.add();\r\n            camera.setZoom(mainCamera.zoom);\r\n            camera.setScroll(mainCamera.scrollX, mainCamera.scrollY);\r\n            camera.ignore(this.scene.sys.displayList.list.filter(function (item) { return item !== _this; }));\r\n            return camera;\r\n        };\r\n        LevelCompleteFx.prototype.onCameraTweenZoomComplete = function (camera) {\r\n            this.scene.cameras.remove(camera);\r\n            this.cameraFilter = 0;\r\n        };\r\n        return LevelCompleteFx;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteFx = LevelCompleteFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var DustCloud = /** @class */ (function (_super) {\r\n        __extends(DustCloud, _super);\r\n        function DustCloud(scene) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay\", \"dust_cloud0001\") || this;\r\n            _this.animationKey = \"dust\";\r\n            _this.createAnimation();\r\n            _this.play(_this.animationKey);\r\n            _this.on(\"animationcomplete-\" + _this.animationKey, _this.destroy, _this);\r\n            return _this;\r\n        }\r\n        DustCloud.prototype.createAnimation = function () {\r\n            this.scene.anims.create({\r\n                key: this.animationKey,\r\n                frames: this.scene.anims.getFrameNames(\"gameplay\", \"dust_cloud\"),\r\n                frameRate: 20,\r\n            });\r\n        };\r\n        DustCloud.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return DustCloud;\r\n    }(Phaser.GameObjects.Sprite));\r\n    game.DustCloud = DustCloud;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ClearFieldFx = /** @class */ (function (_super) {\r\n        __extends(ClearFieldFx, _super);\r\n        function ClearFieldFx(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"clear_field_fx\";\r\n            _this.textStyle = _this.createTextStyle();\r\n            _this.addTitle();\r\n            _this.addSubtitle();\r\n            return _this;\r\n        }\r\n        ClearFieldFx.prototype.createTextStyle = function () {\r\n            return {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"22px\",\r\n                color: \"#FFFFD7\",\r\n                align: \"center\",\r\n                shadow: {\r\n                    blur: 0,\r\n                    offsetY: 4,\r\n                    color: \"rgba(0,0,0,0.2)\",\r\n                    stroke: false,\r\n                    fill: true,\r\n                },\r\n            };\r\n        };\r\n        ClearFieldFx.prototype.addTitle = function () {\r\n            var content = this.scene.texts.clear_field;\r\n            var style = __assign(__assign({}, this.textStyle), { fontSize: \"50px\" });\r\n            this.title = this.scene.add.text(0, 0, content, style);\r\n            this.title.setOrigin(0.5, 0.5);\r\n            this.title.y -= 30;\r\n            this.add(this.title);\r\n        };\r\n        ClearFieldFx.prototype.addSubtitle = function () {\r\n            var content = \"x2\";\r\n            var style = __assign(__assign({}, this.textStyle), { fontSize: \"90px\" });\r\n            this.subtitle = this.scene.add.text(0, 0, content, style);\r\n            this.subtitle.setOrigin(0.5, 0.5);\r\n            this.subtitle.y += 35;\r\n            this.add(this.subtitle);\r\n        };\r\n        return ClearFieldFx;\r\n    }(Phaser.GameObjects.Container));\r\n    game.ClearFieldFx = ClearFieldFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TurnCompleteFxEvent;\r\n    (function (TurnCompleteFxEvent) {\r\n        TurnCompleteFxEvent[\"CLEAR_BONUS_SHOW\"] = \"TurnCompleteFx_CLEAR_BONUS_SHOW\";\r\n    })(TurnCompleteFxEvent = game.TurnCompleteFxEvent || (game.TurnCompleteFxEvent = {}));\r\n    var TurnCompleteFx = /** @class */ (function (_super) {\r\n        __extends(TurnCompleteFx, _super);\r\n        function TurnCompleteFx(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"turn_complete_fx\";\r\n            _this.textStyle = _this.createTextStyle();\r\n            _this.addCheer();\r\n            _this.addPoints();\r\n            _this.addClearBonus();\r\n            return _this;\r\n        }\r\n        TurnCompleteFx.prototype.createTextStyle = function () {\r\n            return {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: \"62px\",\r\n                color: \"#C62324\",\r\n                strokeThickness: 14,\r\n                stroke: \"#EED898\",\r\n                align: \"center\",\r\n                shadow: {\r\n                    blur: 0,\r\n                    offsetY: 4,\r\n                    color: \"rgba(0,0,0,0.2)\",\r\n                    stroke: true,\r\n                    fill: false,\r\n                },\r\n            };\r\n        };\r\n        TurnCompleteFx.prototype.addCheer = function () {\r\n            var content = this.scene.texts.cheers[0];\r\n            this.cheer = this.scene.add.text(0, 0, content, this.textStyle);\r\n            this.cheer.setOrigin(0.5, 0.5);\r\n            this.add(this.cheer);\r\n        };\r\n        TurnCompleteFx.prototype.addPoints = function () {\r\n            var content = \"+0\";\r\n            var style = __assign(__assign({}, this.textStyle), { strokeThickness: 12 });\r\n            this.points = this.scene.add.text(0, 0, content, style);\r\n            this.points.setOrigin(0.5, 0.5);\r\n            this.points.y = this.cheer.y + 75;\r\n            this.add(this.points);\r\n        };\r\n        TurnCompleteFx.prototype.addClearBonus = function () {\r\n            this.clearBonus = new game.ClearFieldFx(this.scene);\r\n            this.clearBonus.y = this.points.y + 150;\r\n            this.add(this.clearBonus);\r\n        };\r\n        TurnCompleteFx.prototype.reset = function () {\r\n            this.alpha = 1;\r\n            this.cheer.x = 0;\r\n            this.points.x = -12; // -12 because of \"+\" sign\r\n            this.clearBonus.x = 0;\r\n            this.clearBonus.y = this.points.y + 150;\r\n            this.clearBonus.scale = 1;\r\n            this.clearBonus.alpha = 1;\r\n        };\r\n        TurnCompleteFx.prototype.updateData = function (blocksKilled, points, hasClearBonus) {\r\n            this.updateCheerText(blocksKilled);\r\n            this.updatePoints(points);\r\n            this.clearBonus.visible = hasClearBonus;\r\n        };\r\n        TurnCompleteFx.prototype.updateCheerText = function (blocksKilled) {\r\n            var content = this.getCompleteCheerContent(blocksKilled);\r\n            this.cheer.setText(content);\r\n            this.cheer.visible = blocksKilled >= 3;\r\n        };\r\n        TurnCompleteFx.prototype.getCompleteCheerContent = function (blocksKilled) {\r\n            var cheers = this.scene.texts.cheers;\r\n            var index = Phaser.Math.Clamp(blocksKilled - 3, 0, cheers.length - 1);\r\n            return cheers[index];\r\n        };\r\n        TurnCompleteFx.prototype.updatePoints = function (points) {\r\n            var content = \"+\" + points.toString();\r\n            this.points.setText(content);\r\n            this.points.visible = points > 0;\r\n        };\r\n        TurnCompleteFx.prototype.show = function () {\r\n            var deltaX = 40;\r\n            this.showText(this.cheer, -deltaX);\r\n            this.showText(this.points, deltaX);\r\n            if (this.clearBonus.visible) {\r\n                this.showClearBonus();\r\n                this.bumpPointsAndCheer(900);\r\n                this.scene.poki.sdk.happyTime(0.33);\r\n            }\r\n            else {\r\n                this.scene.time.delayedCall(1400, this.hide, null, this);\r\n            }\r\n        };\r\n        TurnCompleteFx.prototype.showText = function (text, dx) {\r\n            text.x -= dx;\r\n            this.scene.tweens.add({\r\n                targets: text,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.4],\r\n                x: text.x + dx,\r\n            });\r\n            text.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: text,\r\n                alpha: { value: 1, duration: 300, ease: Phaser.Math.Easing.Cubic.Out },\r\n            });\r\n        };\r\n        TurnCompleteFx.prototype.hideText = function (text, dx) {\r\n            this.scene.tweens.add({\r\n                targets: text,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                x: {\r\n                    value: text.x + 50 * Phaser.Math.Sign(dx),\r\n                    ease: Phaser.Math.Easing.Cubic.In,\r\n                },\r\n            });\r\n        };\r\n        TurnCompleteFx.prototype.showClearBonus = function () {\r\n            var _this = this;\r\n            var initialDelay = 400;\r\n            this.scene.time.delayedCall(initialDelay, function () {\r\n                _this.emit(TurnCompleteFxEvent.CLEAR_BONUS_SHOW, _this);\r\n            });\r\n            this.clearBonus.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.clearBonus,\r\n                delay: initialDelay,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.clearBonus.scale = 0.8;\r\n            this.scene.tweens.add({\r\n                targets: this.clearBonus,\r\n                delay: initialDelay,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                easeParams: [0.1, 0.4],\r\n                scale: 1,\r\n            });\r\n        };\r\n        TurnCompleteFx.prototype.bumpPointsAndCheer = function (delay) {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.points,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"-=35\",\r\n                scale: 1.33,\r\n                yoyo: true,\r\n                onStart: function () {\r\n                    var currentPointsStr = _this.points.text.slice(1);\r\n                    var currentPoints = parseInt(currentPointsStr);\r\n                    _this.points.setText(\"+\" + (currentPoints * 2));\r\n                },\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.cheer,\r\n                duration: 350,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"-=30\",\r\n                yoyo: true,\r\n                onComplete: function () {\r\n                    _this.hide();\r\n                },\r\n            });\r\n        };\r\n        TurnCompleteFx.prototype.hide = function () {\r\n            this.hideText(this.cheer, 50);\r\n            this.hideText(this.points, -50);\r\n            this.hideClearBonus();\r\n            this.scene.time.delayedCall(200, this.kill, null, this);\r\n        };\r\n        TurnCompleteFx.prototype.hideClearBonus = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.clearBonus,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                scale: 0.8,\r\n                alpha: 0,\r\n            });\r\n        };\r\n        TurnCompleteFx.prototype.preUpdate = function (time, delta) {\r\n            if (this.visible === false) {\r\n                return;\r\n            }\r\n            this.y -= delta * 0.035;\r\n        };\r\n        return TurnCompleteFx;\r\n    }(Phaser.GameObjects.Container));\r\n    game.TurnCompleteFx = TurnCompleteFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LightningIdleEmitter = /** @class */ (function () {\r\n        function LightningIdleEmitter(scene, lightning, emitter) {\r\n            this.isDestroyed = false;\r\n            this.scene = scene;\r\n            this.emitter = emitter;\r\n            this.emitter.startFollow(lightning);\r\n            this.lightning = lightning;\r\n            this.lightning.on(game.LightningEvent.KILL_START, this.destroy, this);\r\n            this.lightning.on(game.HideEvent.START, this.hide, this);\r\n            this.lightning.on(Phaser.GameObjects.Events.DESTROY, this.destroy, this);\r\n        }\r\n        LightningIdleEmitter.prototype.hide = function () {\r\n            this.emitter.killAll();\r\n            this.emitter.on = false;\r\n        };\r\n        LightningIdleEmitter.prototype.destroy = function () {\r\n            if (this.isDestroyed) {\r\n                return;\r\n            }\r\n            this.isDestroyed = true;\r\n            this.emitter.remove();\r\n        };\r\n        return LightningIdleEmitter;\r\n    }());\r\n    game.LightningIdleEmitter = LightningIdleEmitter;\r\n})(game || (game = {}));\r\n///<reference path='../items/lightning/LightningIdleEmitter.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var GameplayEmitters = /** @class */ (function () {\r\n        function GameplayEmitters(gameplay) {\r\n            this.scene = gameplay;\r\n            this.isCanvasRenderer = this.scene.game.rendererType === game.RendererType.CANVAS;\r\n            this.allManagers = [];\r\n            this.mainManager = this.createManager();\r\n            this.ballEmittersManager = this.createManager(\"gameplay\", game.GameplayDepth.BALLS_LIGHTNING_PARTICLES);\r\n            this.belowBlocksManager = this.createManager(\"gameplay\", game.GameplayDepth.ICE_BLOCK_PARTICLES);\r\n            if (this.isCanvasRenderer) {\r\n                this.createDummyEmitters();\r\n            }\r\n            else {\r\n                this.createEmitters();\r\n            }\r\n        }\r\n        GameplayEmitters.prototype.createManager = function (texture, depth) {\r\n            if (texture === void 0) { texture = \"gameplay\"; }\r\n            if (depth === void 0) { depth = game.GameplayDepth.PARTICLES; }\r\n            var manager = this.scene.add.particles(texture);\r\n            manager.setDepth(depth);\r\n            this.allManagers.push(manager);\r\n            return manager;\r\n        };\r\n        GameplayEmitters.prototype.createEmitters = function () {\r\n            this.feathers = this.mainManager.createEmitter({\r\n                gravityY: 100,\r\n                frame: [\"particle_feather_1\", \"particle_feather_2\"],\r\n                lifespan: { min: 300, max: 500 },\r\n                radial: true,\r\n                angle: { min: 0, max: 360 },\r\n                rotate: { min: 0, max: 180 },\r\n                scale: { min: 0.1, max: 1 },\r\n                alpha: { start: 1, end: 0, ease: \"Power5\" },\r\n                speed: { min: 50, max: 100 },\r\n                on: false,\r\n            });\r\n            this.zappedBlock = this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(40, 360)), { frame: \"particle_lightning\", speed: 200, scale: { start: 0.75, end: 0.2 }, lifespan: 300, alpha: { start: 1, end: 0 }, on: false }));\r\n            this.collectableBallFeathers = this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(40, 360)), { frame: [\"particle_feather_1\", \"particle_feather_2\"], scale: { start: 0.25, end: 1.33, random: true }, speed: { start: 120, end: 240, random: true }, lifespan: { start: 250, end: 500, random: true }, alpha: { start: 1, end: 0 }, on: false }));\r\n            this.lightning = this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(40, 360)), { frame: \"particle_lightning\", speed: 200, scale: { start: 0.4, end: 0.1 }, lifespan: 300, alpha: { start: 1, end: 0 }, on: false }));\r\n            this.spinner = this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(40, 360)), { frame: \"particle_spark\", speed: 200, scale: { start: 0.33, end: 0.1 }, lifespan: 300, alpha: { start: 1, end: 0 }, on: false }));\r\n            this.pinata = this.mainManager.createEmitter({\r\n                frame: \"circle_fx\",\r\n                lifespan: 400,\r\n                scale: { start: 0.66, end: 3.5, ease: EasingString.QuintEaseOut },\r\n                alpha: { start: 0.85, end: 0, ease: EasingString.QuadEaseOut },\r\n                on: false,\r\n            });\r\n            this.pinataConfetti = this.createPinataConfettiEmitter();\r\n            this.newPinataItem = this.mainManager.createEmitter({\r\n                emitZone: {\r\n                    source: new Phaser.Geom.Circle(0, 0, game.GameGrid.CELL_SIZE / 2),\r\n                    type: \"random\",\r\n                },\r\n                speed: 66,\r\n                frame: \"particle_star_01\",\r\n                lifespan: { min: 500, max: 900 },\r\n                scale: { start: 1, end: 0.5 },\r\n                alpha: { start: 1, end: 0 },\r\n                on: false,\r\n            });\r\n            this.blockKill = this.belowBlocksManager.createEmitter({\r\n                frame: \"circle_fx_2\",\r\n                lifespan: 200,\r\n                scale: { start: 0.5, end: 1.5, ease: Phaser.Math.EasingString.Cubic },\r\n                alpha: { start: 0.5, end: 0 },\r\n                on: false,\r\n            });\r\n            this.blockKillParticles = this.belowBlocksManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(23, 8, false)), { frame: \"particle_circle\", speed: 240, lifespan: 300, scale: { start: 0.7, end: 0.15, ease: Phaser.Math.EasingString.Cubic }, alpha: { start: 0.5, end: 0 }, on: false }));\r\n        };\r\n        GameplayEmitters.prototype.createPinataConfettiEmitter = function () {\r\n            var onUpdateScaleY = function (particle, key, t, value) {\r\n                if (isNaN(particle.scaleY)) {\r\n                    value = 1;\r\n                    particle.deltaScale = Phaser.Math.RND.sign() * 0.12;\r\n                }\r\n                value += particle.deltaScale;\r\n                if (value < -1) {\r\n                    value = -1;\r\n                    particle.deltaScale *= -1;\r\n                }\r\n                else if (value > 1) {\r\n                    value = 1;\r\n                    particle.deltaScale *= -1;\r\n                }\r\n                return value;\r\n            };\r\n            var emitZone = {\r\n                source: new Phaser.Geom.Circle(0, 0, game.GameGrid.CELL_SIZE * 0.5),\r\n                type: \"random\",\r\n            };\r\n            return this.mainManager.createEmitter({\r\n                frame: [\"red\", \"blue\", \"yellow\", \"green\"].map(function (color) { return \"confetti_\" + color; }),\r\n                lifespan: { min: 600, max: 900 },\r\n                speedX: { min: -350, max: 350 },\r\n                speedY: { min: -600, max: 100 },\r\n                rotate: { min: 0, max: 360 },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseIn },\r\n                gravityY: 1000,\r\n                scaleY: { onUpdate: onUpdateScaleY },\r\n                emitZone: emitZone,\r\n                on: false,\r\n            });\r\n        };\r\n        GameplayEmitters.prototype.createDummyEmitters = function () {\r\n            this.feathers = this.createDummyEmitter();\r\n            this.zappedBlock = this.createDummyEmitter();\r\n            this.collectableBallFeathers = this.createDummyEmitter();\r\n            this.lightning = this.createDummyEmitter();\r\n            this.spinner = this.createDummyEmitter();\r\n            this.pinata = this.createDummyEmitter();\r\n            this.newPinataItem = this.createDummyEmitter();\r\n            this.pinata = this.createDummyEmitter();\r\n            this.pinataConfetti = this.createDummyEmitter();\r\n            this.blockKill = this.createDummyEmitter();\r\n            this.blockKillParticles = this.createDummyEmitter();\r\n        };\r\n        GameplayEmitters.prototype.createLightningIdleEmitter = function () {\r\n            if (this.isCanvasRenderer) {\r\n                return this.createDummyEmitter();\r\n            }\r\n            return this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(26)), { frame: \"particle_lightning\", speed: 55, scale: { start: 0.3, end: 0.1 }, lifespan: 550, alpha: { start: 1, end: 0 }, frequency: 166, quantity: 1, on: true }));\r\n        };\r\n        GameplayEmitters.prototype.createSpinnerIdleEmitter = function (spinner) {\r\n            if (this.isCanvasRenderer) {\r\n                return this.createDummyEmitter();\r\n            }\r\n            return this.mainManager.createEmitter(__assign(__assign({}, utils.ParticleUtil.getCircleEdgeEmitZone(26)), { frame: \"particle_spark\", speed: 55, scale: { start: 0.24, end: 0.1 }, lifespan: 550, alpha: { start: 1, end: 0 }, frequency: 166, quantity: 1, on: true }));\r\n        };\r\n        GameplayEmitters.prototype.createBallChargedEmitter = function (ball) {\r\n            if (this.isCanvasRenderer) {\r\n                return this.createDummyEmitter();\r\n            }\r\n            return this.ballEmittersManager.createEmitter({\r\n                frame: \"particle_circle\",\r\n                speed: 300,\r\n                emitZone: { source: new Phaser.Geom.Circle(0, 0, game.Ball.RADIUS * 0.9), type: \"random\" },\r\n                scale: 0.8,\r\n                alpha: { start: 1, end: 0 },\r\n                lifespan: { min: 150, max: 300 },\r\n                frequency: 33,\r\n                quantity: 1,\r\n                follow: ball,\r\n                on: false,\r\n            });\r\n        };\r\n        GameplayEmitters.prototype.createIceBlockEmitter = function (iceBlock) {\r\n            if (this.isCanvasRenderer) {\r\n                return this.createDummyEmitter();\r\n            }\r\n            var frames = _.range(1, 4).map(function (num) { return \"particle_snowflake_0\" + num; });\r\n            return this.belowBlocksManager.createEmitter({\r\n                frame: frames,\r\n                speedX: {\r\n                    onEmit: function (particle) {\r\n                        return Phaser.Math.Sign(iceBlock.matterBody.velocity.x) * -10;\r\n                    },\r\n                },\r\n                speedY: { min: -10, max: 10 },\r\n                rotate: { start: 0, end: 90 * Phaser.Math.RND.sign() },\r\n                emitZone: { source: new Phaser.Geom.Circle(0, 0, 40), type: \"random\" },\r\n                scale: { start: 0.75, end: 0.3, ease: Phaser.Math.EasingString.Cubic },\r\n                lifespan: { min: 1400, max: 1800 },\r\n                alpha: { start: 1, end: 0 },\r\n                frequency: 100,\r\n                quantity: 1,\r\n                follow: iceBlock,\r\n            });\r\n        };\r\n        GameplayEmitters.prototype.createCollectableBallEmitter = function (ball) {\r\n            if (this.isCanvasRenderer) {\r\n                return this.createDummyEmitter();\r\n            }\r\n            return this.belowBlocksManager.createEmitter({\r\n                emitZone: {\r\n                    source: new Phaser.Geom.Circle(0, 0, game.CollectableBall.RADIUS),\r\n                    type: \"random\",\r\n                },\r\n                frame: \"particle_star_01\",\r\n                lifespan: 1000,\r\n                scale: { start: 1.5, end: 0.1 },\r\n                alpha: { start: 0, end: 1, ease: EasingString.ExpoEaseOut },\r\n                rotate: {\r\n                    onEmit: function () {\r\n                        return Phaser.Math.RND.between(0, 360);\r\n                    },\r\n                    onUpdate: function (particle, key, t, value) {\r\n                        return value += 1;\r\n                    },\r\n                },\r\n                follow: ball,\r\n                frequency: 600,\r\n                on: false,\r\n            });\r\n        };\r\n        GameplayEmitters.prototype.setTimescale = function (timescale) {\r\n            this.allManagers.forEach(function (manager) { return (manager.timeScale = timescale); });\r\n        };\r\n        GameplayEmitters.prototype.createDummyEmitter = function () {\r\n            return this.mainManager.createEmitter({\r\n                maxParticles: 0,\r\n                on: false,\r\n                active: false,\r\n                visible: false,\r\n            });\r\n        };\r\n        GameplayEmitters.prototype.destroy = function () {\r\n        };\r\n        return GameplayEmitters;\r\n    }());\r\n    game.GameplayEmitters = GameplayEmitters;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayPhysics = /** @class */ (function () {\r\n        function GameplayPhysics(scene) {\r\n            this.scene = scene;\r\n            this.matter = this.scene.matter;\r\n            this.world = this.scene.matter.world;\r\n            this.world.drawDebug = false;\r\n            this.world.autoUpdate = false;\r\n            this.world.resetCollisionIDs();\r\n            this.initCollisionGroups();\r\n            this.initCollisionCategories();\r\n            this.initCollisionPairs();\r\n            this.addWorldEventListeners();\r\n        }\r\n        GameplayPhysics.prototype.initCollisionGroups = function () {\r\n            this.collisionGroups = {\r\n                balls: this.world.nextGroup(true),\r\n                collectableBalls: this.world.nextGroup(true),\r\n            };\r\n        };\r\n        GameplayPhysics.prototype.initCollisionCategories = function () {\r\n            this.collisionCategories = {\r\n                ceiling: this.world.nextCategory(),\r\n                floor: this.world.nextCategory(),\r\n                walls: this.world.nextCategory(),\r\n                balls: this.world.nextCategory(),\r\n                boosterBomb: this.world.nextCategory(),\r\n                boosterCracker: this.world.nextCategory(),\r\n            };\r\n        };\r\n        GameplayPhysics.prototype.initCollisionPairs = function () {\r\n            this.collisionPairs = [\r\n                {\r\n                    tagA: game.CollisionTag.BALL,\r\n                    tagB: game.CollisionTag.SPINNER,\r\n                    callback: this.scene.onBallSpinnerTouched,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.BALL,\r\n                    tagB: game.CollisionTag.LIGHTNING,\r\n                    callback: this.scene.onBallLightningTouched,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.BALL,\r\n                    tagB: game.CollisionTag.FLOOR,\r\n                    callback: this.scene.onBallFloorCollide,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.BALL,\r\n                    tagB: game.CollisionTag.WALL,\r\n                    callback: this.scene.onBallWallsCollide,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.BALL,\r\n                    tagB: game.CollisionTag.BASIC_BLOCK,\r\n                    callback: this.scene.onBallBlocksCollide,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.COLLECTABLE_BALL,\r\n                    tagB: game.CollisionTag.BALL,\r\n                    callback: this.scene.onCollectableBallHit,\r\n                    callbackContext: this.scene,\r\n                },\r\n                {\r\n                    tagA: game.CollisionTag.COLLECTABLE_BALL,\r\n                    tagB: game.CollisionTag.FLOOR,\r\n                    callback: this.scene.onCollectableBallLand,\r\n                    callbackContext: this.scene,\r\n                },\r\n            ];\r\n        };\r\n        GameplayPhysics.prototype.addWorldEventListeners = function () {\r\n            this.world.on(\"afterupdate\", this.onWorldAfterUpdate, this);\r\n            this.world.on(\"beforeadd\", this.onBeforeBodyAdd, this);\r\n            this.world.on(\"beforeremove\", this.onBeforeBodyRemove, this);\r\n            this.world.on(\"collisionstart\", this.onCollisionStart, this);\r\n        };\r\n        GameplayPhysics.prototype.onWorldAfterUpdate = function () {\r\n            var _this = this;\r\n            this.scene.balls.forEach(function (ball) { return ball.maintainConstantFlyingSpeed(_this.scene.game.loop.delta); });\r\n        };\r\n        GameplayPhysics.prototype.onBeforeBodyAdd = function (event) {\r\n            this.scene.worldCopy.addBody(event.object);\r\n        };\r\n        GameplayPhysics.prototype.onBeforeBodyRemove = function (event) {\r\n            this.scene.worldCopy.removeBody(event.object);\r\n        };\r\n        GameplayPhysics.prototype.onCollisionStart = function (event) {\r\n            var _this = this;\r\n            event.pairs.forEach(function (eventPair) {\r\n                var bodyA = eventPair.bodyA;\r\n                var bodyB = eventPair.bodyB;\r\n                var tagA = bodyA.plugin[game.COLLISION_TAG];\r\n                var tagB = bodyB.plugin[game.COLLISION_TAG];\r\n                _this.collisionPairs.some(function (pair) {\r\n                    if (pair.tagA == tagA && pair.tagB === tagB) {\r\n                        _this.executeCollisionCallback(pair, bodyA, bodyB, eventPair, event);\r\n                    }\r\n                    else if (pair.tagB === tagA && pair.tagA === tagB) {\r\n                        _this.executeCollisionCallback(pair, bodyB, bodyA, eventPair, event);\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        GameplayPhysics.prototype.executeCollisionCallback = function (pair, bodyA, bodyB, eventPair, event) {\r\n            var _a, _b;\r\n            var objA = (_a = bodyA[\"gameObject\"]) !== null && _a !== void 0 ? _a : bodyA;\r\n            var objB = (_b = bodyB[\"gameObject\"]) !== null && _b !== void 0 ? _b : bodyB;\r\n            return pair.callback.call(pair.callbackContext, objA, objB, eventPair, event);\r\n        };\r\n        GameplayPhysics.prototype.toggleDebug = function () {\r\n            if (this.matter.config.debug === false) {\r\n                return;\r\n            }\r\n            this.world.drawDebug = !this.world.drawDebug;\r\n            if (this.world.drawDebug === false) {\r\n                this.world.debugGraphic.clear();\r\n            }\r\n        };\r\n        GameplayPhysics.prototype.update = function (delta) {\r\n            for (var i = 0; i < this.scene.fastForward.timeScale; i++) {\r\n                this.world.step(delta);\r\n            }\r\n        };\r\n        return GameplayPhysics;\r\n    }());\r\n    game.GameplayPhysics = GameplayPhysics;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var AnimationsPool = utils.AnimationsPool;\r\n    var GameplayAnimationPools = /** @class */ (function () {\r\n        function GameplayAnimationPools(scene) {\r\n            this.scene = scene;\r\n            this.lightnings = this.createLightningAnimations();\r\n            this.spinners = this.createSpinnerAnimations();\r\n            this.explosions = this.createExplosionAnimations();\r\n        }\r\n        GameplayAnimationPools.prototype.createLightningAnimations = function () {\r\n            return new AnimationsPool(this.scene, {\r\n                name: \"lightnings\",\r\n                initialNum: 10,\r\n                atlas: \"gameplay\",\r\n                prefix: \"lightning/lightning\",\r\n                animationConfig: {\r\n                    repeat: -1,\r\n                    repeatDelay: 2000,\r\n                    frameRate: 10,\r\n                },\r\n            });\r\n        };\r\n        GameplayAnimationPools.prototype.createSpinnerAnimations = function () {\r\n            return new AnimationsPool(this.scene, {\r\n                name: \"spinners\",\r\n                initialNum: 10,\r\n                atlas: \"gameplay\",\r\n                prefix: \"spinner/spinner\",\r\n                animationConfig: {\r\n                    repeat: -1,\r\n                    repeatDelay: 2000,\r\n                    frameRate: 10,\r\n                },\r\n            });\r\n        };\r\n        GameplayAnimationPools.prototype.createExplosionAnimations = function () {\r\n            return new AnimationsPool(this.scene, {\r\n                name: \"explosions\",\r\n                initialNum: 10,\r\n                atlas: \"gameplay\",\r\n                prefix: \"BOOM\",\r\n                animationConfig: {\r\n                    frameRate: 30,\r\n                },\r\n            });\r\n        };\r\n        GameplayAnimationPools.prototype.recycle = function () {\r\n            this.spinners.recycleAll();\r\n            this.lightnings.recycleAll();\r\n            this.explosions.recycleAll();\r\n        };\r\n        return GameplayAnimationPools;\r\n    }());\r\n    game.GameplayAnimationPools = GameplayAnimationPools;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayPools = /** @class */ (function () {\r\n        function GameplayPools(scene) {\r\n            this.scene = scene;\r\n            this.levelConfig = this.scene.levelConfig;\r\n            this.createIdleBalls();\r\n            this.createIdleBallsShadows();\r\n            this.createBlockWhiteCopies();\r\n            this.createBlockRedCopies();\r\n            this.createBlockHealthCounters();\r\n            this.createBlockDamageFx();\r\n        }\r\n        GameplayPools.prototype.createIdleBalls = function () {\r\n            var _this = this;\r\n            var initial = this.levelConfig.balls;\r\n            var future = this.levelConfig.items.filter(function (item) { return item.type === game.ItemType.COLLECTABLE_BALL; }).length;\r\n            var total = initial + future;\r\n            this.idleBalls = _.times(total, function () {\r\n                return _this.createNewIdleBall();\r\n            });\r\n        };\r\n        GameplayPools.prototype.createNewIdleBall = function () {\r\n            var idleBall = new game.IdleBall(this.scene);\r\n            idleBall.setDepth(game.GameplayDepth.IDLE_BALLS);\r\n            idleBall.visible = false;\r\n            idleBall.active = false;\r\n            this.scene.add.existing(idleBall);\r\n            return idleBall;\r\n        };\r\n        GameplayPools.prototype.createIdleBallsShadows = function () {\r\n            var _this = this;\r\n            this.idleBallsShadows = _.times(this.idleBalls.length, function (index) {\r\n                var idleBall = _this.idleBalls[index];\r\n                return _this.createNewIdleBallShadow(idleBall);\r\n            });\r\n        };\r\n        GameplayPools.prototype.createNewIdleBallShadow = function (idleBall) {\r\n            var shadow = new game.JumpingBallShadow(this.scene, idleBall);\r\n            shadow.setDepth(game.GameplayDepth.IDLE_BALLS_SHADOWS);\r\n            shadow.visible = false;\r\n            shadow.active = false;\r\n            this.scene.add.existing(shadow);\r\n            return shadow;\r\n        };\r\n        GameplayPools.prototype.createBlockWhiteCopies = function () {\r\n            this.blockWhiteCopies = this.scene.add.group({\r\n                name: \"block_white_copies\",\r\n                classType: game.BlockWhiteCopy,\r\n                createCallback: function (item) {\r\n                    item.setDepth(game.GameplayDepth.BLOCK_WHITE_COPIES);\r\n                    item.visible = false;\r\n                    item.active = false;\r\n                },\r\n            });\r\n            var num = game.GameGrid.COLUMNS * (game.GameGrid.ROWS - 2);\r\n            var preciseNum = Math.round(num * 0.66);\r\n            for (var i = 0; i < preciseNum; i++) {\r\n                this.blockWhiteCopies.create();\r\n            }\r\n        };\r\n        GameplayPools.prototype.createBlockRedCopies = function () {\r\n            this.blockRedCopies = this.scene.add.group({\r\n                name: \"block_red_copies\",\r\n                classType: game.BlockRedCopy,\r\n                createCallback: function (item) {\r\n                    item.setDepth(game.GameplayDepth.BLOCK_RED_COPIES);\r\n                    item.kill();\r\n                },\r\n            });\r\n            var total = game.GameGrid.COLUMNS;\r\n            for (var i = 0; i < total; i++) {\r\n                this.blockRedCopies.create();\r\n            }\r\n        };\r\n        GameplayPools.prototype.createBlockHealthCounters = function () {\r\n            this.blockHealthCounters = this.scene.add.group({\r\n                name: \"block_health_counters\",\r\n                classType: game.BlockHealthCounter,\r\n                createCallback: function (item) {\r\n                    item.setDepth(game.GameplayDepth.BLOCK_HEALTH_COUNTER);\r\n                    item.visible = false;\r\n                    item.active = false;\r\n                },\r\n            });\r\n            var num = game.GameGrid.COLUMNS * (game.GameGrid.ROWS - 2);\r\n            var preciseNum = Math.round(num * 0.66);\r\n            for (var i = 0; i < preciseNum; i++) {\r\n                this.blockHealthCounters.create();\r\n            }\r\n        };\r\n        GameplayPools.prototype.createBlockDamageFx = function () {\r\n            this.blockDamageFXs = this.scene.add.group({\r\n                name: \"block_damage_fxs\",\r\n                classType: game.BlockDamageFx,\r\n                createCallback: function (item) {\r\n                    item.setDepth(game.GameplayDepth.BLOCK_DAMAGE_FX);\r\n                    item.visible = false;\r\n                    item.active = false;\r\n                },\r\n            });\r\n            var initialBalls = this.scene.balls.length;\r\n            var futureBalls = this.levelConfig.items.filter(function (item) { return item.type === game.ItemType.COLLECTABLE_BALL; }).length;\r\n            var total = (initialBalls + futureBalls) * 2;\r\n            for (var i = 0; i < total; i++) {\r\n                this.blockDamageFXs.create();\r\n            }\r\n        };\r\n        return GameplayPools;\r\n    }());\r\n    game.GameplayPools = GameplayPools;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayItemsFactory = /** @class */ (function () {\r\n        function GameplayItemsFactory(scene) {\r\n            this.scene = scene;\r\n        }\r\n        GameplayItemsFactory.prototype.create = function (options) {\r\n            _.defaults(options, {\r\n                texture: \"gameplay\",\r\n                frame: this.getDefaultItemFrame(options.itemType),\r\n            });\r\n            var item = this.createItemByType(options);\r\n            this.setupItem(item, options);\r\n            this.scene.add.existing(item);\r\n            this.scene.addItem(item);\r\n            this.alignItemToGrid(item, options.column, options.row);\r\n            return item;\r\n        };\r\n        GameplayItemsFactory.prototype.getDefaultItemFrame = function (itemType) {\r\n            var frame = game.ItemTypeUtil.getFrameName(itemType);\r\n            if (!frame) {\r\n                console.warn(\"Can't find frame for this item type!\", itemType);\r\n            }\r\n            return frame;\r\n        };\r\n        GameplayItemsFactory.prototype.alignItemToGrid = function (item, column, row) {\r\n            var cell = this.scene.grid.getCellAt(row, column);\r\n            var align = this.getAlignPosition(item);\r\n            Phaser.Display.Align.In.QuickSet(item, cell, align);\r\n        };\r\n        GameplayItemsFactory.prototype.getAlignPosition = function (item) {\r\n            var itemType = item.itemType;\r\n            var frame = item.frame.name;\r\n            if (itemType === game.ItemType.TRIANGLE) {\r\n                return this.getTriangleAlign(frame);\r\n            }\r\n            if (itemType === game.ItemType.SHATTER_BLOCK_PIECE) {\r\n                return this.getShatterPieceAlign(frame);\r\n            }\r\n            return Phaser.Display.Align.CENTER;\r\n        };\r\n        GameplayItemsFactory.prototype.getTriangleAlign = function (frame) {\r\n            var _a;\r\n            var Align = Phaser.Display.Align;\r\n            var map = (_a = {},\r\n                _a[game.TriangleBlock.BOTTOM_LEFT_FRAME] = Align.BOTTOM_LEFT,\r\n                _a[game.TriangleBlock.BOTTOM_RIGHT_FRAME] = Align.BOTTOM_RIGHT,\r\n                _a[game.TriangleBlock.TOP_LEFT_FRAME] = Align.TOP_LEFT,\r\n                _a[game.TriangleBlock.TOP_RIGHT_FRAME] = Align.TOP_RIGHT,\r\n                _a);\r\n            return map[frame] || Align.CENTER;\r\n        };\r\n        GameplayItemsFactory.prototype.getShatterPieceAlign = function (frame) {\r\n            var _a;\r\n            var Align = Phaser.Display.Align;\r\n            var map = (_a = {},\r\n                _a[game.ShatterBlockPiece.UP_FRAME] = Align.LEFT_TOP,\r\n                _a[game.ShatterBlockPiece.RIGHT_FRAME] = Align.RIGHT_CENTER,\r\n                _a[game.ShatterBlockPiece.DOWN_FRAME] = Align.BOTTOM_CENTER,\r\n                _a[game.ShatterBlockPiece.LEFT_FRAME] = Align.LEFT_CENTER,\r\n                _a);\r\n            return map[frame] || Align.CENTER;\r\n        };\r\n        GameplayItemsFactory.prototype.createItemByType = function (options) {\r\n            switch (options.itemType) {\r\n                case game.ItemType.BASIC_BLOCK:\r\n                case game.ItemType.TRIANGLE:\r\n                case game.ItemType.DYNAMITE_BLOCK:\r\n                case game.ItemType.ICE_BLOCK:\r\n                case game.ItemType.ICE_RHOMB:\r\n                case game.ItemType.ICE_OCTAGON:\r\n                case game.ItemType.PINATA_BLOCK:\r\n                case game.ItemType.SHATTER_BLOCK:\r\n                case game.ItemType.SHATTER_BLOCK_PIECE:\r\n                    return this.createBlock(options);\r\n                case game.ItemType.COLLECTABLE_BALL:\r\n                    return new game.CollectableBall(this.scene.matter.world, this.scene.getWorldBounds());\r\n                case game.ItemType.LIGHTNING:\r\n                    return new game.Lightning(this.scene.matter.world, this.scene.animsPools.lightnings.getInactive());\r\n                case game.ItemType.SPINNER:\r\n                    return new game.Spinner(this.scene.matter.world, this.scene.animsPools.spinners.getInactive());\r\n                default:\r\n                    console.warn(\"Unknown item type!\", options);\r\n                    return null;\r\n            }\r\n        };\r\n        GameplayItemsFactory.prototype.createBlock = function (options) {\r\n            var defaultBodyConfig = {\r\n                isStatic: true,\r\n                restitution: 1,\r\n                friction: 0,\r\n                frictionAir: 0,\r\n                frictionStatic: 0,\r\n            };\r\n            _.defaults(options, {\r\n                health: Phaser.Math.RND.between(1, 10),\r\n                bodyConfig: __assign({}, defaultBodyConfig),\r\n            });\r\n            var peShape = this.scene.physicsShapes[options.frame];\r\n            if (peShape) {\r\n                var shape = this.convertToPhaserTracer(peShape);\r\n                var spriteOffset = this.getSpriteOffset(shape, options.texture, options.frame);\r\n                options.bodyConfig.shape = __assign({}, shape);\r\n                options.bodyConfig.render = {\r\n                    visible: true,\r\n                    opacity: 1,\r\n                    sprite: {\r\n                        xOffset: spriteOffset.x,\r\n                        yOffset: spriteOffset.y,\r\n                    },\r\n                };\r\n            }\r\n            switch (options.itemType) {\r\n                case game.ItemType.BASIC_BLOCK:\r\n                    return new game.BasicBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.TRIANGLE:\r\n                    return new game.TriangleBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.SHATTER_BLOCK:\r\n                    return new game.ShatterBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.SHATTER_BLOCK_PIECE:\r\n                    return new game.ShatterBlockPiece(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.ICE_BLOCK:\r\n                    return new game.IceBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.ICE_RHOMB:\r\n                case game.ItemType.ICE_OCTAGON:\r\n                    return new game.RotatingIceBlock(this.scene.matter.world, options.itemType, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.DYNAMITE_BLOCK:\r\n                    return new game.DynamiteBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                case game.ItemType.PINATA_BLOCK:\r\n                    return new game.PinataBlock(this.scene.matter.world, options.texture, options.frame, options.health, options.bodyConfig);\r\n                default:\r\n                    console.warn(\"Unknown block type!\", options);\r\n                    return null;\r\n            }\r\n        };\r\n        GameplayItemsFactory.prototype.convertToPhaserTracer = function (item) {\r\n            var vertices = item.fixtures.flatMap(function (fixture) { return fixture.vertices; });\r\n            return {\r\n                type: \"fromPhysicsTracer\",\r\n                label: item.label,\r\n                vertices: vertices,\r\n            };\r\n        };\r\n        GameplayItemsFactory.prototype.getSpriteOffset = function (shape, texture, frame) {\r\n            var vertices = shape.vertices.flat();\r\n            var left = _.minBy(vertices, \"x\").x;\r\n            var top = _.minBy(vertices, \"y\").y;\r\n            var frameData = this.scene.textures.getFrame(texture, frame);\r\n            return { x: left / frameData.width * frameData.pivotX, y: top / frameData.height * frameData.pivotY };\r\n        };\r\n        GameplayItemsFactory.prototype.setupItem = function (item, options) {\r\n            switch (options.itemType) {\r\n                case game.ItemType.BASIC_BLOCK:\r\n                case game.ItemType.TRIANGLE:\r\n                case game.ItemType.SHATTER_BLOCK_PIECE:\r\n                    this.setupBlock(item, options);\r\n                    break;\r\n                case game.ItemType.ICE_BLOCK:\r\n                case game.ItemType.ICE_RHOMB:\r\n                case game.ItemType.ICE_OCTAGON:\r\n                    this.setupBlock(item, options);\r\n                    this.setupIceBlock(item, options);\r\n                    break;\r\n                case game.ItemType.PINATA_BLOCK:\r\n                    this.setupBlock(item, options);\r\n                    this.setupPinataBlock(item, options);\r\n                    break;\r\n                case game.ItemType.DYNAMITE_BLOCK:\r\n                    this.setupBlock(item, options);\r\n                    this.setupDynamiteBlock(item, options);\r\n                    break;\r\n                case game.ItemType.SHATTER_BLOCK:\r\n                    this.setupBlock(item, options);\r\n                    this.setupShatterBlock(item);\r\n                    return;\r\n                case game.ItemType.SPINNER:\r\n                    this.setupSpinner(item, options);\r\n                    break;\r\n                case game.ItemType.LIGHTNING:\r\n                    this.setupLightning(item, options);\r\n                    break;\r\n                case game.ItemType.COLLECTABLE_BALL:\r\n                    this.setupCollectableBall(item, options);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            return item;\r\n        };\r\n        GameplayItemsFactory.prototype.setupBlock = function (block, options) {\r\n            block.on(game.BasicBlockEvent.ZAP, this.scene.onBlockZap, this.scene);\r\n            block.on(game.StompingEvent.START, this.scene.onBlockStartStomping, this.scene);\r\n            block.on(game.StompingEvent.STOP, this.scene.onBlockStopStomping, this.scene);\r\n            block.on(game.HealthEvent.DAMAGE, this.scene.onBlockDamage, this.scene);\r\n            block.on(game.HealthEvent.KILL, this.scene.onBlockKill, this.scene);\r\n            block.setDepth(game.GameplayDepth.ITEMS);\r\n            // block.ignoreCollisionCategory(this.scene._physics.collisionCategories.balls)\r\n            this.scene.addBlockWhiteCopy(block);\r\n            this.scene.addBlockHealthCounter(block);\r\n            this.scene.addBlockFace(block);\r\n            return block;\r\n        };\r\n        GameplayItemsFactory.prototype.setupIceBlock = function (iceBlock, options) {\r\n            // iceBlock.startMoving()\r\n            iceBlock.once(Phaser.GameObjects.Events.DESTROY, this.scene.fastForward.removeItem, this.scene.fastForward);\r\n            this.scene.addIceBlockEmitter(iceBlock);\r\n            this.scene.fastForward.addItem(iceBlock);\r\n        };\r\n        GameplayItemsFactory.prototype.setupPinataBlock = function (pinata, options) {\r\n            pinata.on(game.PinataEvent.DESTROY, this.scene.onPinataDestroyed, this.scene);\r\n        };\r\n        GameplayItemsFactory.prototype.setupDynamiteBlock = function (dynamite, options) {\r\n            dynamite.on(game.DynamiteBlockEvent.EXPLODE, this.scene.onDynamiteBlockExplode, this.scene);\r\n        };\r\n        GameplayItemsFactory.prototype.setupShatterBlock = function (shatterBlock) {\r\n            shatterBlock.on(game.ShatterBlockEvent.SHATTER, this.scene.onShatterBlockShatter, this.scene);\r\n        };\r\n        GameplayItemsFactory.prototype.setupSpinner = function (spinner, options) {\r\n            spinner.setDepth(game.GameplayDepth.SPINNERS);\r\n            spinner.once(Phaser.GameObjects.Events.DESTROY, this.scene.fastForward.removeItem, this.scene.fastForward);\r\n            spinner.once(Phaser.GameObjects.Events.DESTROY, this.recycleSpinnerAnimation, this);\r\n            this.scene.addSpinnerIdleEmitter(spinner);\r\n            this.scene.fastForward.addItem(spinner);\r\n        };\r\n        GameplayItemsFactory.prototype.recycleSpinnerAnimation = function (spinner) {\r\n            this.scene.animsPools.spinners.recycleActive(spinner.animation);\r\n        };\r\n        GameplayItemsFactory.prototype.setupLightning = function (lightning, options) {\r\n            lightning.setDepth(game.GameplayDepth.LIGHTNINGS);\r\n            lightning.once(Phaser.GameObjects.Events.DESTROY, this.scene.onLightningDestroy, this.scene);\r\n            this.scene.addLightningIdleEmitter(lightning);\r\n        };\r\n        GameplayItemsFactory.prototype.setupCollectableBall = function (ball, options) {\r\n            // so they won't collide with each other during the fall\r\n            ball.setCollisionGroup(this.scene._physics.collisionGroups.collectableBalls);\r\n            this.scene.addCollectableBallEmitter(ball);\r\n        };\r\n        GameplayItemsFactory.prototype.postCreationCallback = function (item) {\r\n            var itemType = item.itemType;\r\n            if (typeof itemType === \"undefined\") {\r\n                console.warn(\"Set ITEM_TYPE for this item!\", item);\r\n                return;\r\n            }\r\n            switch (itemType) {\r\n                case game.ItemType.ICE_BLOCK:\r\n                case game.ItemType.ICE_RHOMB:\r\n                case game.ItemType.ICE_OCTAGON:\r\n                    ;\r\n                    item.startMoving();\r\n                    break;\r\n                case game.ItemType.LIGHTNING:\r\n                    ;\r\n                    item.startIdleTweensAndAnimation();\r\n                    break;\r\n                case game.ItemType.SPINNER:\r\n                    ;\r\n                    item.startIdleTweensAndAnimation();\r\n                    break;\r\n                case game.ItemType.COLLECTABLE_BALL:\r\n                    ;\r\n                    item.startIdleTweens();\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n        return GameplayItemsFactory;\r\n    }());\r\n    game.GameplayItemsFactory = GameplayItemsFactory;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayCamera = /** @class */ (function () {\r\n        function GameplayCamera(scene) {\r\n            this.scene = scene;\r\n            this.camera = this.scene.cameras.main;\r\n        }\r\n        GameplayCamera.prototype.resize = function () {\r\n            var scale = this.calculateScale();\r\n            var cameraWidth = this.scene.getFieldWidth();\r\n            var cameraHeight = this.scene.getFieldHeight();\r\n            this.camera.setViewport(0, 0, game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n            this.camera.setZoom(scale);\r\n            this.camera.scrollX = -(game.Config.GAME_WIDTH - cameraWidth) / 2;\r\n            this.camera.scrollY = -(game.Config.GAME_HEIGHT - cameraHeight) / 2;\r\n        };\r\n        GameplayCamera.prototype.calculateScale = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.9;\r\n            var maxHeight = this.getGameplayMaxHeight();\r\n            var scaleX = maxWidth / this.scene.getFieldWidth();\r\n            var scaleY = maxHeight / this.scene.getFieldHeight();\r\n            return Math.min(scaleX, scaleY);\r\n        };\r\n        GameplayCamera.prototype.getGameplayMaxHeight = function () {\r\n            var top = this.scene.gui.topPanel.getDisplayHeight();\r\n            var bottom = game.Config.GAME_HEIGHT - top;\r\n            var height = bottom - top;\r\n            return height * 0.96;\r\n        };\r\n        Object.defineProperty(GameplayCamera.prototype, \"zoom\", {\r\n            get: function () {\r\n                return this.camera.zoom;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayCamera.prototype, \"x\", {\r\n            get: function () {\r\n                return this.camera.x;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayCamera.prototype, \"y\", {\r\n            get: function () {\r\n                return this.camera.y;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayCamera.prototype, \"height\", {\r\n            get: function () {\r\n                return this.camera.height;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        GameplayCamera.prototype.getPadding = function () {\r\n            var x = ((game.Config.GAME_WIDTH - this.scene.getFieldWidth() * this.zoom) / 2);\r\n            var y = ((game.Config.GAME_HEIGHT - this.scene.getFieldHeight() * this.zoom) / 2);\r\n            return { x: x, y: y };\r\n        };\r\n        return GameplayCamera;\r\n    }());\r\n    game.GameplayCamera = GameplayCamera;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var MatterLib = Phaser.Physics.Matter.Matter;\r\n    var Body = MatterLib.Body;\r\n    var Bodies = MatterLib.Bodies;\r\n    var Resolver = MatterLib.Resolver;\r\n    var Plugin = MatterLib.Plugin;\r\n    var Events = MatterLib.Events;\r\n    var Sleeping = MatterLib.Sleeping;\r\n    var GameplayWorldCopy = /** @class */ (function () {\r\n        function GameplayWorldCopy(scene) {\r\n            this.ballSpeed = game.Ball.THROW_FORCE / 5;\r\n            this.scene = scene;\r\n            this.enableCollisionEventsPlugin();\r\n            this.setupResolver();\r\n            this.addWorld();\r\n            this.removeUpdateEventListeners();\r\n            this.addBall();\r\n            this.bodies = [];\r\n            this.ballCollisionPoints = [];\r\n        }\r\n        GameplayWorldCopy.prototype.enableCollisionEventsPlugin = function () {\r\n            var collisionEventsPlugin = MatterLib.uses[0];\r\n            Plugin.register(collisionEventsPlugin);\r\n            Plugin.use(MatterLib, collisionEventsPlugin);\r\n        };\r\n        GameplayWorldCopy.prototype.setupResolver = function () {\r\n            Resolver._restingThresh = 0;\r\n            Resolver._restingThreshTangent = 0;\r\n        };\r\n        GameplayWorldCopy.prototype.addWorld = function () {\r\n            var config = __assign(__assign({}, game.GameplayRoot.getPhysicsConfig().matter), { positionIterations: 2, velocityIterations: 2 });\r\n            this.world = new Phaser.Physics.Matter.World(this.scene, config);\r\n            this.world.autoUpdate = false;\r\n            this.world.drawDebug = false;\r\n            this.scene.events.on(Phaser.Scenes.Events.UPDATE, this.world.update, this.world);\r\n            this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE, this.world[\"postUpdate\"], this.world);\r\n        };\r\n        GameplayWorldCopy.prototype.removeUpdateEventListeners = function () {\r\n            // we don't need this events so we turn them off\r\n            Events.off(this.world.engine, \"beforeUpdate\");\r\n            Events.off(this.world.engine, \"afterUpdate\");\r\n            Events.off(this.world.engine, \"collisionActive\");\r\n            Events.off(this.world.engine, \"collisionEnd\");\r\n        };\r\n        GameplayWorldCopy.prototype.addBall = function () {\r\n            this.ball = Bodies.circle(0, 0, game.Ball.RADIUS, game.Ball.BODY_CONFIG);\r\n            this.ball.onCollideCallback = this.onBallCollide.bind(this);\r\n            this.world.add(this.ball);\r\n            Body.setInertia(this.ball, Infinity); // the same as setFixedRotation\r\n            this.ballSpeed = game.Ball.THROW_FORCE * 0.1;\r\n            this.ballVelocity = { x: 0, y: 0 };\r\n        };\r\n        GameplayWorldCopy.prototype.onBallCollide = function (pair) {\r\n            if (this.ballCollidedNum++ > 0) {\r\n                return;\r\n            }\r\n            this.ballCollisionPoints.push({ x: this.ball.position.x, y: this.ball.position.y });\r\n            var labelA = pair.bodyA.label;\r\n            var labelB = pair.bodyB.label;\r\n            if (labelA === game.CollisionTag.FLOOR || labelB === game.CollisionTag.FLOOR) {\r\n                this.endSimulation = true;\r\n                return;\r\n            }\r\n            if (labelA !== game.CollisionTag.WALL && labelB !== game.CollisionTag.WALL) {\r\n                this.endSimulation = true;\r\n                return;\r\n            }\r\n        };\r\n        GameplayWorldCopy.prototype.addBody = function (body) {\r\n            if (body.isStatic === false || body.isSensor) {\r\n                return;\r\n            }\r\n            var newBody = Bodies.fromVertices(body.position.x, body.position.y, body.vertices, {\r\n                restitution: body.restitution,\r\n                isStatic: body.isStatic,\r\n                friction: body.friction,\r\n                frictionAir: body.frictionAir,\r\n                frictionStatic: body.frictionStatic,\r\n                circleRadius: body.circleRadius,\r\n                scale: body.scale,\r\n                chamfer: body.chamfer,\r\n                label: body.label,\r\n            });\r\n            newBody.originalBody = body;\r\n            this.world.add(newBody);\r\n            this.bodies.push(newBody);\r\n        };\r\n        GameplayWorldCopy.prototype.removeBody = function (originalBody) {\r\n            var index = this.bodies.findIndex(function (body) { return body.originalBody === originalBody; });\r\n            if (index > -1) {\r\n                this.world.remove(this.bodies[index]);\r\n                this.bodies[index].originalBody = null;\r\n                this.bodies.splice(index, 1);\r\n            }\r\n        };\r\n        GameplayWorldCopy.prototype.getTrajectoryPoints = function (startX, startY, rotation, bounces) {\r\n            Body.setPosition(this.ball, { x: startX, y: startY });\r\n            Body.setVelocity(this.ball, { x: Math.cos(rotation) * this.ballSpeed, y: Math.sin(rotation) * this.ballSpeed });\r\n            this.endSimulation = false;\r\n            this.ballCollisionPoints.length = 0;\r\n            this.sync();\r\n            this.wakeBodies();\r\n            var safeCounter = 10000;\r\n            while (--safeCounter > 0) {\r\n                this.ballCollidedNum = 0; // don't allow ball collide more than one time during the step\r\n                this.world.step();\r\n                // this.maintainBallVelocity()\r\n                if (this.endSimulation) {\r\n                    break;\r\n                }\r\n                if (this.ballCollisionPoints.length >= bounces) {\r\n                    break;\r\n                }\r\n            }\r\n            return this.ballCollisionPoints;\r\n        };\r\n        GameplayWorldCopy.prototype.sync = function () {\r\n            var _this = this;\r\n            this.bodies.forEach(function (body) {\r\n                var originalBody = body.originalBody;\r\n                var hasPositionChanged = _this.areVectorsEqual(originalBody.position, body.position) === false;\r\n                if (hasPositionChanged) {\r\n                    if (originalBody[\"isStomping\"]) {\r\n                        Body.setPosition(body, { x: originalBody.position.x, y: originalBody[\"originalY\"] });\r\n                    }\r\n                    else {\r\n                        Body.setPosition(body, originalBody.position);\r\n                    }\r\n                }\r\n                if (originalBody.plugin.isMoving) {\r\n                    Body.setVelocity(body, originalBody.velocity);\r\n                }\r\n                if (originalBody.plugin.isRotating) {\r\n                    Body.setAngle(body, originalBody.angle);\r\n                }\r\n            });\r\n        };\r\n        GameplayWorldCopy.prototype.areVectorsEqual = function (a, b) {\r\n            return Phaser.Math.Fuzzy.Equal(a.x, b.x) && Phaser.Math.Fuzzy.Equal(a.y, b.y);\r\n        };\r\n        GameplayWorldCopy.prototype.wakeBodies = function () {\r\n            this.bodies.forEach(function (body) { return Sleeping.set(body, false); });\r\n        };\r\n        GameplayWorldCopy.prototype.maintainBallVelocity = function () {\r\n            var velocityRotation = Math.atan2(this.ball.velocity.y, this.ball.velocity.x);\r\n            this.ballVelocity.x = Math.cos(velocityRotation) * this.ballSpeed;\r\n            this.ballVelocity.y = Math.sin(velocityRotation) * this.ballSpeed;\r\n            Body.setVelocity(this.ball, this.ballVelocity);\r\n        };\r\n        GameplayWorldCopy.prototype.toggleSimulation = function () {\r\n            if (this.world.autoUpdate) {\r\n                this.stopSimulation();\r\n            }\r\n            else {\r\n                var start = this.scene.fox.getHandsPosition();\r\n                var end = this.scene.input.activePointer.positionToCamera(this.scene.camera.camera);\r\n                var rotation = Phaser.Math.Angle.BetweenPoints(start, end);\r\n                this.startSimulation(start.x, start.y, rotation);\r\n            }\r\n        };\r\n        GameplayWorldCopy.prototype.startSimulation = function (x, y, rotation) {\r\n            var velocity = {\r\n                x: Math.cos(rotation) * this.ballSpeed,\r\n                y: Math.sin(rotation) * this.ballSpeed,\r\n            };\r\n            Body.setPosition(this.ball, { x: x, y: y });\r\n            Body.setVelocity(this.ball, velocity);\r\n            this.world.autoUpdate = true;\r\n            this.world.drawDebug = true;\r\n        };\r\n        GameplayWorldCopy.prototype.stopSimulation = function () {\r\n            this.world.autoUpdate = false;\r\n            this.world.drawDebug = false;\r\n            this.world.debugGraphic.clear();\r\n        };\r\n        GameplayWorldCopy.prototype.destroy = function () {\r\n            this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.world.update, this.world);\r\n            this.scene.events.off(Phaser.Scenes.Events.POST_UPDATE, this.world[\"postUpdate\"], this.world);\r\n            this.world.destroy();\r\n        };\r\n        return GameplayWorldCopy;\r\n    }());\r\n    game.GameplayWorldCopy = GameplayWorldCopy;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayAudio = /** @class */ (function () {\r\n        function GameplayAudio(scene) {\r\n            this.scene = scene;\r\n            this.sound = this.scene.sound;\r\n            this.audioCache = this.scene.cache.audio;\r\n            this.isEnabled = this.scene.game.audioType === game.SoundManagerType.WEB_AUDIO;\r\n            this.ballHitSounds = this.getBallHitSoundKeys();\r\n            this.initThrottledSounds();\r\n        }\r\n        GameplayAudio.prototype.getBallHitSoundKeys = function () {\r\n            var _this = this;\r\n            var keys = [game.GameSoundKey.BALL_HIT_1, game.GameSoundKey.BALL_HIT_2, game.GameSoundKey.BALL_HIT_3];\r\n            return keys.filter(function (key) { return _this.scene.cache.audio.has(key); });\r\n        };\r\n        GameplayAudio.prototype.initThrottledSounds = function () {\r\n            this.ballThrow = this.throttleSound(game.GameSoundKey.BALL_THROW, { volume: 0.33 });\r\n            this.ballHit = _.throttle(this.playBallHit.bind(this), 100, { trailing: false });\r\n            this.collectableBallHit = this.throttleSound(game.GameSoundKey.NEW_BALL_HIT, { volume: 0.33 });\r\n            this.collectableBallLand = this.throttleSound(game.GameSoundKey.NEW_BALL_LANDED, { volume: 0.33 });\r\n            this.blockHit = this.throttleSound(game.GameSoundKey.BLOCK_HIT, { volume: 0.66 }, { wait: 200 });\r\n            this.blockZap = this.throttleSound(game.GameSoundKey.BLOCK_ZAPPED, { volume: 0.22 });\r\n            this.blockCollectWhoosh = this.throttleSound(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH, { volume: 0.4 });\r\n            this.blockCollectComplete = this.throttleSound(game.GameSoundKey.BLOCK_COLLECTED, { volume: 0.15 });\r\n            this.pinata = this.throttleSound(game.GameSoundKey.PINATA, { volume: 1.33 });\r\n            this.explosion = this.throttleSound(game.GameSoundKey.EXPLOSION, { volume: 0.7 });\r\n            this.spinner = this.throttleSound(game.GameSoundKey.SPINNER, { volume: 0.33 });\r\n            this.lightning = this.throttleSound(game.GameSoundKey.LIGHTNING, { volume: 0.33 });\r\n            this.winningBallExplode = this.throttleSound(game.GameSoundKey.POP_1, { volume: 1 }, { trailing: true });\r\n            this.crackerPunch = this.throttleSound(game.GameSoundKey.BOOSTER_CRACKER_PUNCH, { volume: 0.5 });\r\n        };\r\n        GameplayAudio.prototype.playBallHit = function () {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            if (this.ballHitSounds.length === 0) {\r\n                return;\r\n            }\r\n            var key = Phaser.Math.RND.pick(this.ballHitSounds);\r\n            this.sound.play(key, { volume: 0.66 });\r\n        };\r\n        GameplayAudio.prototype.throttleSound = function (key, soundOptions, throttleOptions) {\r\n            var _this = this;\r\n            if (this.isEnabled === false) {\r\n                return _.noop;\r\n            }\r\n            throttleOptions = __assign({ wait: 100, trailing: false }, throttleOptions);\r\n            return _.throttle(function () {\r\n                _this.playSound(key, soundOptions);\r\n            }, throttleOptions.wait, throttleOptions);\r\n        };\r\n        GameplayAudio.prototype.playSound = function (key, options) {\r\n            var isSoundAvailable = this.audioCache.has(key);\r\n            if (isSoundAvailable) {\r\n                this.sound.play(key, options);\r\n            }\r\n        };\r\n        GameplayAudio.prototype.destroy = function () {\r\n        };\r\n        return GameplayAudio;\r\n    }());\r\n    game.GameplayAudio = GameplayAudio;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var CrackerEvent;\r\n    (function (CrackerEvent) {\r\n        CrackerEvent[\"COMPLETE\"] = \"Cracker_COMPLETE\";\r\n    })(CrackerEvent = game.CrackerEvent || (game.CrackerEvent = {}));\r\n    var Cracker = /** @class */ (function (_super) {\r\n        __extends(Cracker, _super);\r\n        function Cracker(scene) {\r\n            var _this = _super.call(this, scene.matter.world, 0, 0, \"gameplay\", \"booster_cracker_big\") || this;\r\n            _this.isLaunched = false;\r\n            _this.hasHitSomething = false;\r\n            _this.name = \"cracker\";\r\n            _this.gameplay = _this.scene;\r\n            _this.hittedItems = [];\r\n            _this.setupBody();\r\n            _this.addParticles();\r\n            var collisionCategories = _this.gameplay._physics.collisionCategories;\r\n            _this.ignoreCollisionCategory(collisionCategories.balls);\r\n            _this.ignoreCollisionCategory(collisionCategories.walls);\r\n            return _this;\r\n        }\r\n        Cracker.prototype.setupBody = function () {\r\n            var radius = 30;\r\n            this.setCircle(radius, {\r\n                isSensor: true,\r\n                ignoreGravity: true,\r\n                friction: 0,\r\n                frictionAir: 0,\r\n                frictionStatic: 0,\r\n                render: {\r\n                    sprite: {\r\n                        xOffset: -this.originX + (radius / this.width),\r\n                    },\r\n                },\r\n            });\r\n        };\r\n        Cracker.prototype.addParticles = function () {\r\n            this.particles = this.scene.add.particles(\"gameplay\");\r\n            this.particles.setDepth(game.GameplayDepth.BOOSTER_ABOVE_PARTICLES);\r\n            if (this.scene.game.rendererType === game.RendererType.CANVAS) {\r\n                this.sparksEmitter = this.gameplay.emitters.createDummyEmitter();\r\n                this.smokeEmitter = this.gameplay.emitters.createDummyEmitter();\r\n                return;\r\n            }\r\n            this.sparksEmitter = this.particles.createEmitter({\r\n                frame: [\"bomb_spark\"],\r\n                lifespan: { min: 300, max: 500 },\r\n                scale: { start: 2, end: 0, ease: EasingString.Linear },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseIn },\r\n                quantity: 3,\r\n                frequency: 16,\r\n                speedX: { min: 300, max: 500 },\r\n                speedY: { min: -300, max: 300 },\r\n                on: false,\r\n            });\r\n            this.smokeEmitter = this.particles.createEmitter({\r\n                frame: [\"craker_smoke\"],\r\n                lifespan: 1000,\r\n                scale: { start: 0.4, end: 1, ease: EasingString.Linear },\r\n                alpha: { start: 1, end: 0, ease: EasingString.CubicEaseOut },\r\n                quantity: 1,\r\n                rotate: { min: 0, max: 360 },\r\n                frequency: 33,\r\n                speedX: { min: 100, max: 150 },\r\n                speedY: { min: -133, max: 133 },\r\n            });\r\n            this.smokeEmitter.startFollow(this, this.width * 0.66);\r\n            // this.sparksEmitter.startFollow(this, this.width * 0.66)\r\n        };\r\n        Cracker.prototype.launch = function () {\r\n            this.isLaunched = true;\r\n            this.originalY = this.y;\r\n            var k = 16.66667 / this.scene.game.loop.delta;\r\n            this.setVelocityX(-20 / k);\r\n            this.startFloat();\r\n        };\r\n        Cracker.prototype.startFloat = function () {\r\n            var dy = 10;\r\n            this.y -= dy;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: this.y + dy * 2,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        Cracker.prototype.preUpdate = function (time, delta) {\r\n            var _this = this;\r\n            if (this.isLaunched === false) {\r\n                return;\r\n            }\r\n            this.sparksEmitter.explode(1, this.x + this.displayWidth / 2, this.y);\r\n            if (this.x < -this.gameplay.camera.getPadding().x - 100) {\r\n                this.smokeEmitter.on = false;\r\n                this.smokeEmitter.stopFollow();\r\n                this.isLaunched = false;\r\n                this.emit(CrackerEvent.COMPLETE, this);\r\n                this.scene.time.delayedCall(800, function () {\r\n                    _this.destroy();\r\n                });\r\n            }\r\n        };\r\n        Cracker.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            this.particles.destroy(fromScene);\r\n            this.hittedItems.length = 0;\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return Cracker;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.Cracker = Cracker;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var BombEvent;\r\n    (function (BombEvent) {\r\n        BombEvent[\"LANDED\"] = \"Bomb_LANDED\";\r\n    })(BombEvent = game.BombEvent || (game.BombEvent = {}));\r\n    var Bomb = /** @class */ (function (_super) {\r\n        __extends(Bomb, _super);\r\n        function Bomb(scene) {\r\n            var _this = _super.call(this, scene.matter.world, 0, 0, \"gameplay\", \"booster_bomb_big\") || this;\r\n            _this.isLaunched = false;\r\n            _this.explosionRadius = game.GameGrid.CELL_SIZE * 1.75;\r\n            _this.gameplay = _this.scene;\r\n            _this.name = \"cracker\";\r\n            _this.setupBody();\r\n            _this.addParticles();\r\n            return _this;\r\n        }\r\n        Bomb.prototype.setupBody = function () {\r\n            var _a;\r\n            var radius = 36;\r\n            this.setCircle(radius, {\r\n                plugin: (_a = {}, _a[game.COLLISION_TAG] = game.CollisionTag.BOMB, _a),\r\n                collisionFilter: {\r\n                    mask: this.gameplay._physics.collisionCategories.boosterBomb,\r\n                },\r\n                friction: 0,\r\n                frictionAir: 0,\r\n                frictionStatic: 0,\r\n                render: {\r\n                    sprite: {\r\n                        xOffset: -this.originX + 0.465,\r\n                        yOffset: this.originY - (radius / this.height) - 0.01,\r\n                    },\r\n                },\r\n            });\r\n        };\r\n        Bomb.prototype.addParticles = function () {\r\n            this.particles = this.scene.add.particles(\"gameplay\");\r\n            this.sparksEmitter = this.particles.createEmitter({\r\n                frame: [\"bomb_spark\"],\r\n                lifespan: 400,\r\n                scale: { start: 2, end: 0, ease: EasingString.Linear },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseIn },\r\n                quantity: 1,\r\n                frequency: 33,\r\n                speed: 300,\r\n                on: false,\r\n            });\r\n            this.particlesContainer = this.scene.add.container(0, 0, [this.particles]);\r\n            this.particlesContainer.setDepth(game.GameplayDepth.BOOSTER_ABOVE_PARTICLES);\r\n        };\r\n        Bomb.prototype.launchAt = function (x, y) {\r\n            this.isLaunched = true;\r\n            this.target = { x: x, y: y };\r\n            this.safetyTimer = 0;\r\n            this.updateEmitterPosition();\r\n            this.sparksEmitter.on = true;\r\n            this.playAlphaTween();\r\n            this.launchBody();\r\n        };\r\n        Bomb.prototype.playAlphaTween = function () {\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        Bomb.prototype.launchBody = function () {\r\n            var angleSign = Phaser.Math.RND.sign();\r\n            this.setAngularVelocity(-0.05 * angleSign);\r\n            this.setAngle(150 * angleSign);\r\n            var k = 16.66667 / this.scene.game.loop.delta;\r\n            this.applyForce({ x: 0, y: -0.75 * k });\r\n        };\r\n        Bomb.prototype.preUpdate = function (time, delta) {\r\n            if (this.isLaunched === false) {\r\n                return;\r\n            }\r\n            this.updateScale();\r\n            this.updateEmitterPosition();\r\n            this.checkIfReachTarget();\r\n            this.updateSafetyTimer(delta);\r\n        };\r\n        Bomb.prototype.updateScale = function () {\r\n            var minScale = 1.2;\r\n            var maxScale = 3;\r\n            this.scale = Phaser.Math.MapLinear(this.body.velocity.y, -40, 0, maxScale, minScale);\r\n            this.scale = Phaser.Math.Clamp(this.scale, minScale, maxScale);\r\n        };\r\n        Bomb.prototype.updateEmitterPosition = function () {\r\n            var offset = 58 * this.scale;\r\n            var rotation = Phaser.Math.DegToRad(this.angle - 48);\r\n            var dx = offset * Math.cos(rotation);\r\n            var dy = offset * Math.sin(rotation);\r\n            var emitX = this.x + dx;\r\n            var emitY = this.y + dy;\r\n            this.particlesContainer.x = emitX;\r\n            this.particlesContainer.y = emitY;\r\n            this.particlesContainer.scale = this.scale;\r\n        };\r\n        Bomb.prototype.checkIfReachTarget = function () {\r\n            if (this.y > this.target.y && this.body.velocity.y > 0) {\r\n                this.isLaunched = false;\r\n                this.emit(BombEvent.LANDED, this);\r\n                this.destroy();\r\n            }\r\n        };\r\n        Bomb.prototype.updateSafetyTimer = function (delta) {\r\n            this.safetyTimer += delta;\r\n            if (this.safetyTimer > 1000) {\r\n                this.isLaunched = false;\r\n                this.emit(BombEvent.LANDED, this);\r\n                this.destroy();\r\n            }\r\n        };\r\n        Bomb.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n            }\r\n            this.particles.destroy(fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return Bomb;\r\n    }(Phaser.Physics.Matter.Image));\r\n    game.Bomb = Bomb;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Stopper = /** @class */ (function (_super) {\r\n        __extends(Stopper, _super);\r\n        function Stopper(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.turnsLeft = 3;\r\n            _this.name = \"stop\";\r\n            _this.addCircleFx();\r\n            _this.addIcon();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        Stopper.prototype.addCircleFx = function () {\r\n            this.circleFx = this.scene.add.image(0, 0, \"gameplay\", \"circle_fx\");\r\n            this.add(this.circleFx);\r\n        };\r\n        Stopper.prototype.showCircleFx = function () {\r\n            var _this = this;\r\n            this.circleFx.revive();\r\n            this.circleFx.scale = 0.5;\r\n            this.circleFx.alpha = 1;\r\n            this.scene.tweens.add({\r\n                targets: this.circleFx,\r\n                duration: 1000,\r\n                alpha: { value: 0, ease: Phaser.Math.Easing.Expo.Out },\r\n                scale: { value: 1.8, ease: Phaser.Math.Easing.Expo.Out },\r\n                onComplete: function () {\r\n                    _this.circleFx.kill();\r\n                },\r\n            });\r\n        };\r\n        Stopper.prototype.addIcon = function () {\r\n            this.icon = this.scene.add.image(0, 0, \"gameplay\", \"booster_stop_big\");\r\n            this.add(this.icon);\r\n        };\r\n        Stopper.prototype.addText = function () {\r\n            var content = this.turnsLeft.toString();\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.GAMEPLAY_BOOSTERS, content, 32);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.x = this.icon.right + 1;\r\n            this.text.y = this.icon.bottom - 12;\r\n            this.text.originalY = this.text.y;\r\n            this.add(this.text);\r\n        };\r\n        Stopper.prototype.updateTurnsNum = function (turnsNum) {\r\n            this.turnsLeft = turnsNum;\r\n            this.playUpdateTween();\r\n            this.playTextUpdateTween();\r\n        };\r\n        Stopper.prototype.playUpdateTween = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.3,\r\n                yoyo: true,\r\n                onComplete: function () {\r\n                    _this.showCircleFx();\r\n                },\r\n            });\r\n        };\r\n        Stopper.prototype.playTextUpdateTween = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this.text,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                completeDelay: 400,\r\n                onComplete: function () {\r\n                    _this.text.setText(_this.turnsLeft.toString());\r\n                    _this.text.scale = 0.66;\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.text,\r\n                        duration: 500,\r\n                        ease: Phaser.Math.Easing.Back.Out,\r\n                        scale: 1,\r\n                    });\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.text,\r\n                        duration: 200,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        alpha: 1,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        Stopper.prototype.show = function () {\r\n            this.scale = 0.75;\r\n            this.alpha = 0;\r\n            this.angle = Phaser.Math.RND.sign() * 10;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.4],\r\n                scale: 1,\r\n                angle: 0,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 1,\r\n            });\r\n            this.showCircleFx();\r\n        };\r\n        Stopper.prototype.flyTo = function (targetPosition, delay) {\r\n            var _this = this;\r\n            var distance = Phaser.Math.Distance.Between(this.x, this.y, targetPosition.x, targetPosition.y);\r\n            var duration = Math.max(700, distance / game.Config.ASSETS_SCALE);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: delay,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Back.InOut,\r\n                easeParams: [1],\r\n                x: targetPosition.x,\r\n                y: targetPosition.y,\r\n                onComplete: function () {\r\n                    _this.onFlyComplete();\r\n                },\r\n            });\r\n            this.playWhooshSound(delay, duration);\r\n        };\r\n        Stopper.prototype.playWhooshSound = function (delay, duration) {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH)) {\r\n                var whooshDelay = (delay + duration * 0.25) / 1000;\r\n                this.scene.sound.play(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH, { volume: 1, delay: whooshDelay });\r\n            }\r\n        };\r\n        Stopper.prototype.onFlyComplete = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.list,\r\n                duration: 800,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"+=10\",\r\n                yoyo: true,\r\n                repeat: -1,\r\n                delay: this.scene.tweens.stagger(100),\r\n            });\r\n        };\r\n        Stopper.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                scale: 1.33,\r\n                onComplete: function () {\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        Stopper.prototype.preDestroy = function () {\r\n            this.scene.tweens.killTweensOf(this.list);\r\n            _super.prototype.preDestroy.call(this);\r\n        };\r\n        return Stopper;\r\n    }(Phaser.GameObjects.Container));\r\n    game.Stopper = Stopper;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BombAimSpot = /** @class */ (function (_super) {\r\n        __extends(BombAimSpot, _super);\r\n        function BombAimSpot(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"bomb_aim_spot\";\r\n            _this.addCircles();\r\n            _this.addTimerEvent();\r\n            return _this;\r\n        }\r\n        BombAimSpot.prototype.addCircles = function () {\r\n            var _this = this;\r\n            this.circles = _.times(10, function () {\r\n                var circle = _this.scene.add.image(0, 0, \"gameplay\", \"circle_fx\");\r\n                circle.kill();\r\n                return circle;\r\n            });\r\n            this.add(this.circles);\r\n        };\r\n        BombAimSpot.prototype.addTimerEvent = function () {\r\n            this.showCirclesTimerEvent = this.scene.time.addEvent({\r\n                loop: true,\r\n                delay: 300,\r\n                startAt: 280,\r\n                callback: this.showCircle.bind(this),\r\n                paused: true,\r\n            });\r\n        };\r\n        BombAimSpot.prototype.show = function () {\r\n            this.revive();\r\n            this.showCirclesTimerEvent.paused = false;\r\n        };\r\n        BombAimSpot.prototype.hide = function () {\r\n            this.kill();\r\n            this.showCirclesTimerEvent.paused = true;\r\n        };\r\n        BombAimSpot.prototype.showCircle = function () {\r\n            var circle = this.circles.find(function (circle) { return circle.visible === false; });\r\n            if (circle) {\r\n                circle.revive();\r\n                circle.scale = 2;\r\n                circle.alpha = 0;\r\n                this.scene.tweens.add({\r\n                    targets: circle,\r\n                    duration: 700,\r\n                    alpha: { value: 0.85, ease: Phaser.Math.Easing.Expo.Out },\r\n                    scale: { value: 0, ease: Phaser.Math.Easing.Linear.Linear },\r\n                    onComplete: function () {\r\n                        circle.kill();\r\n                    },\r\n                });\r\n            }\r\n        };\r\n        BombAimSpot.prototype.destroy = function (fromScene) {\r\n            this.showCirclesTimerEvent.destroy();\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BombAimSpot;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BombAimSpot = BombAimSpot;\r\n})(game || (game = {}));\r\n///<reference path='Cracker.ts' />\r\n///<reference path='Bomb.ts' />\r\n///<reference path='Stopper.ts' />\r\n///<reference path='BombAimSpot.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EventEmitter = Phaser.Events.EventEmitter;\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var GameplayBoostersEvent;\r\n    (function (GameplayBoostersEvent) {\r\n        GameplayBoostersEvent[\"SELECT\"] = \"GameplayBoosters_SELECT\";\r\n        GameplayBoostersEvent[\"CANCEL\"] = \"GameplayBoosters_CANCEL\";\r\n        GameplayBoostersEvent[\"ACTIVATE\"] = \"GameplayBoosters_ACTIVATE\";\r\n        GameplayBoostersEvent[\"COMPLETE\"] = \"GameplayBoosters_COMPLETE\";\r\n        GameplayBoostersEvent[\"GET_FREE_BOOSTER\"] = \"GameplayBoosters_GET_FREE_BOOSTER\";\r\n    })(GameplayBoostersEvent = game.GameplayBoostersEvent || (game.GameplayBoostersEvent = {}));\r\n    var GameplayBoosters = /** @class */ (function (_super) {\r\n        __extends(GameplayBoosters, _super);\r\n        function GameplayBoosters(scene, gui) {\r\n            var _this = _super.call(this) || this;\r\n            _this.foxHitNum = 0;\r\n            _this.isCanvasRenderer = scene.game.rendererType === game.RendererType.CANVAS;\r\n            _this.scene = scene;\r\n            _this.gui = gui;\r\n            _this.gui.events.on(GameplayBoostersEvent.SELECT, _this.onBoosterSelect, _this);\r\n            _this.gui.events.on(GameplayBoostersEvent.CANCEL, _this.onBoosterCancel, _this);\r\n            _this.gui.events.on(GameplayBoostersEvent.GET_FREE_BOOSTER, _this.onGetFreeBoostersClick, _this);\r\n            _this.freeBoostersScreen = _this.gui.freeBoostersScreen;\r\n            _this.boosterHint = _this.gui.boosterHintScreen;\r\n            _this.boostersPanel = _this.gui.boostersPanel;\r\n            _this.addBombAimSpot();\r\n            _this.addParticles();\r\n            return _this;\r\n            // this.testBooster(BoosterType.BOMB, { x: 3, y: 5 })\r\n            // this.testBoosterByClick(BoosterType.BOMB)\r\n        }\r\n        GameplayBoosters.prototype.testBooster = function (boosterType, gridPosition) {\r\n            var _this = this;\r\n            gridPosition = gridPosition !== null && gridPosition !== void 0 ? gridPosition : {\r\n                x: Phaser.Math.RND.between(0, game.GameGrid.COLUMNS),\r\n                y: Phaser.Math.RND.between(0, game.GameGrid.ROWS),\r\n            };\r\n            var cell = this.scene.grid.getCellAt(gridPosition.y, gridPosition.x);\r\n            if (cell) {\r\n                this.scene.time.delayedCall(100, function () {\r\n                    _this.activateBooster(_this.getBooster(boosterType), cell.x, cell.y);\r\n                });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.testBoosterByClick = function (type) {\r\n            var _this = this;\r\n            this.scene.removePointerCallbacks();\r\n            this.scene.input.on(Phaser.Input.Events.POINTER_DOWN, function (pointer) {\r\n                var cell = _this.scene.grid.getCellAtXY(pointer.worldX, pointer.worldY);\r\n                if (cell) {\r\n                    _this.activateBooster(_this.getBooster(type), cell.x, cell.y);\r\n                }\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.addBombAimSpot = function () {\r\n            this.bombAimSpot = new game.BombAimSpot(this.scene);\r\n            this.bombAimSpot.setDepth(game.GameplayDepth.BOOSTER_BELOW_PARTICLES);\r\n            this.scene.add.existing(this.bombAimSpot);\r\n        };\r\n        GameplayBoosters.prototype.addParticles = function () {\r\n            this.particles = this.scene.add.particles(\"gameplay\");\r\n            this.particles.setDepth(game.GameplayDepth.BOOSTER_BELOW_PARTICLES);\r\n            this.bombShockwave = this.isCanvasRenderer\r\n                ? this.scene.emitters.createDummyEmitter()\r\n                : this.createBombShockwaveEmitter();\r\n        };\r\n        GameplayBoosters.prototype.createBombShockwaveEmitter = function () {\r\n            return this.particles.createEmitter({\r\n                frame: \"circle_fx\",\r\n                lifespan: 800,\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseOut },\r\n                scale: { start: 0.5, end: 6, ease: EasingString.ExpoEaseOut },\r\n                on: false,\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.showBombAimSpot = function (x, y) {\r\n            this.bombAimSpot.setPosition(x, y);\r\n            this.bombAimSpot.show();\r\n        };\r\n        GameplayBoosters.prototype.hideBombAimSpot = function () {\r\n            this.bombAimSpot.hide();\r\n        };\r\n        GameplayBoosters.prototype.onBoosterSelect = function (booster) {\r\n            this.addPointerDownCallback(booster);\r\n            this.scene.removePointerCallbacks();\r\n            this.boosterHint.updateData(booster);\r\n            this.boosterHint.show();\r\n            this.gui.topPanel.hide();\r\n            this.gui.pauseButton.kill();\r\n            this.boostersPanel.highlight(booster.type);\r\n        };\r\n        GameplayBoosters.prototype.addPointerDownCallback = function (booster) {\r\n            this.onPointerDownCallback = this.onFieldClick.bind(this, booster);\r\n            this.scene.input.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDownCallback);\r\n        };\r\n        GameplayBoosters.prototype.removePointerDownCallback = function () {\r\n            if (this.onPointerDownCallback) {\r\n                this.scene.input.off(Phaser.Input.Events.POINTER_DOWN, this.onPointerDownCallback);\r\n                this.onPointerDownCallback = null;\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onFieldClick = function (booster, pointer) {\r\n            var clickInsideGrid = this.scene.grid.getBounds().contains(pointer.worldX, pointer.worldY);\r\n            if (clickInsideGrid) {\r\n                this.removePointerDownCallback();\r\n                this.activateBooster(booster, pointer.worldX, pointer.worldY);\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.activateBooster = function (booster, x, y) {\r\n            this.scene.analytics.sendBoosterUseEvent(this.scene.levelNumber, booster.type);\r\n            this.scene.raven.addExtraContext({\r\n                lastBooster: booster.type,\r\n                lastBoosterCell: this.scene.grid.getCellAtXY(x, y).toString(),\r\n            });\r\n            this.onBoosterActivate(booster);\r\n            switch (booster.type) {\r\n                case game.BoosterType.STOP:\r\n                    this.activateStop(booster, x, y);\r\n                    break;\r\n                case game.BoosterType.BOMB:\r\n                    this.activateBomb(booster, x, y);\r\n                    break;\r\n                case game.BoosterType.CRACKER:\r\n                    this.activateCracker(booster, x, y);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onBoosterActivate = function (booster) {\r\n            booster.num -= 1;\r\n            this.boosterHint.hide();\r\n            this.gui.topPanel.show();\r\n            this.gui.pauseButton.revive();\r\n            this.boostersPanel.resetHighlight();\r\n            if (booster.type === game.BoosterType.CRACKER || booster.type === game.BoosterType.BOMB) {\r\n                this.boostersPanel.disableInput();\r\n                this.boostersPanel.hide();\r\n                this.scene.turn.start();\r\n                this.scene.stopStomping();\r\n                this.scene.hideWarningLine();\r\n                this.scene.wakeItems();\r\n            }\r\n            else {\r\n                this.boostersPanel.getIconByType(game.BoosterType.STOP).lock();\r\n                this.scene.addPointerCallbacks();\r\n            }\r\n            this.emit(GameplayBoostersEvent.ACTIVATE, booster);\r\n        };\r\n        GameplayBoosters.prototype.activateStop = function (booster, x, y) {\r\n            var stop = new game.Stopper(this.scene);\r\n            stop.setDepth(game.GameplayDepth.BOOSTER);\r\n            stop.x = x;\r\n            stop.y = y;\r\n            stop.show();\r\n            stop.flyTo({ x: 15, y: 10 }, 500);\r\n            this.scene.add.existing(stop);\r\n            this.playStopRevealSound();\r\n            this.addTurnCompleteCallback(stop);\r\n        };\r\n        GameplayBoosters.prototype.addTurnCompleteCallback = function (stop) {\r\n            this.onTurnCompleteCallback = this.onTurnComplete.bind(this, stop);\r\n            this.scene.events.on(game.GameplayEvent.TURN_FULLY_COMPLETE, this.onTurnCompleteCallback);\r\n        };\r\n        GameplayBoosters.prototype.removeTurnCompleteCallback = function () {\r\n            if (this.onTurnCompleteCallback) {\r\n                this.scene.events.off(game.GameplayEvent.TURN_FULLY_COMPLETE, this.onTurnCompleteCallback);\r\n                this.onTurnCompleteCallback = null;\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.playStopRevealSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.FANCY_TAP)) {\r\n                this.scene.sound.play(game.GameSoundKey.FANCY_TAP, { volume: 0.66 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onTurnComplete = function (stop) {\r\n            var isComplete = --stop.turnsLeft === 0;\r\n            if (isComplete) {\r\n                stop.hide();\r\n                this.onBoosterComplete(this.getBooster(game.BoosterType.STOP));\r\n                this.removeTurnCompleteCallback();\r\n            }\r\n            else {\r\n                stop.updateTurnsNum(stop.turnsLeft);\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.activateBomb = function (booster, x, y) {\r\n            var _this = this;\r\n            this.playIgniteSound();\r\n            var cell = this.scene.grid.getCellAtXY(x, y);\r\n            this.showBombAimSpot(cell.x, cell.y);\r\n            this.scene.time.delayedCall(300, function () {\r\n                _this.playBombWhooshSound();\r\n                _this.throwBomb(booster, cell.x, cell.y);\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.playIgniteSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.BOOSTER_BOMB_IGNITE)) {\r\n                this.scene.sound.play(game.GameSoundKey.BOOSTER_BOMB_IGNITE, { volume: 1 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.throwBomb = function (booster, x, y) {\r\n            var bomb = new game.Bomb(this.scene);\r\n            bomb.x = x;\r\n            bomb.y = y + game.GameGrid.CELL_SIZE * 4;\r\n            bomb.setDepth(game.GameplayDepth.BOOSTER);\r\n            bomb.on(game.BombEvent.LANDED, this.onBombLanded.bind(this, bomb, booster));\r\n            bomb.launchAt(x, y);\r\n            this.scene.add.existing(bomb);\r\n            this.scene.turn.pendingBoosters.push(bomb);\r\n        };\r\n        GameplayBoosters.prototype.playBombWhooshSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.WINNING_BALL_WHOOSH)) {\r\n                this.scene.sound.play(game.GameSoundKey.WINNING_BALL_WHOOSH, { volume: 1 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onBombLanded = function (bomb, booster) {\r\n            // on low fps bomb can go throw destination point so we put it back and explode where it should\r\n            bomb.x = bomb.target.x;\r\n            bomb.y = bomb.target.y;\r\n            this.scene.showExplosion(bomb.x, bomb.y, 1.5);\r\n            this.scene.damageNearbyBlocks(bomb);\r\n            this.scene.destroyNearbyItems(bomb);\r\n            this.scene.audio.explosion();\r\n            this.scene.cameras.main.shake(600, 0.014, true);\r\n            this.checkBombFoxOverlap(bomb);\r\n            this.hideBombAimSpot();\r\n            this.bombShockwave.explode(1, bomb.x, bomb.y);\r\n            var index = this.scene.turn.pendingBoosters.indexOf(bomb);\r\n            if (index > -1) {\r\n                this.scene.turn.pendingBoosters.splice(index, 1);\r\n                if (this.scene.turn.pendingBoosters.length === 0) {\r\n                    this.onBoosterComplete(booster);\r\n                    if (this.scene.turn.checkComplete()) {\r\n                        this.scene.onTurnComplete();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.checkBombFoxOverlap = function (bomb) {\r\n            var fox = this.scene.fox;\r\n            var distance = Phaser.Math.Distance.Between(bomb.x, bomb.y, fox.x, fox.y);\r\n            if (distance < game.GameGrid.CELL_SIZE * 2) {\r\n                this.onFoxHit();\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onFoxHit = function () {\r\n            this.scene.showFoxTalkBubble();\r\n            this.scene.fox.showWorriedFrame();\r\n            this.foxHitNum++;\r\n            if (this.foxHitNum % 2 === 0) {\r\n                this.playCatchYouShout();\r\n            }\r\n            else {\r\n                this.playStopShout();\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.playCatchYouShout = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.CATCH_YOU_SHOUT)) {\r\n                this.scene.sound.play(game.GameSoundKey.CATCH_YOU_SHOUT, { volume: 1 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.playStopShout = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.STOP_SHOUT)) {\r\n                this.scene.sound.play(game.GameSoundKey.STOP_SHOUT, { volume: 1 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.activateCracker = function (booster, x, y) {\r\n            var _this = this;\r\n            this.playIgniteSound();\r\n            this.scene.time.delayedCall(300, function () {\r\n                _this.playCrackerSound();\r\n                _this.launchCracker(booster, x, y);\r\n                _this.scene.camera.camera.shake(2000, 0.005, true);\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.playCrackerSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.BOOSTER_CRACKER)) {\r\n                this.scene.sound.play(game.GameSoundKey.BOOSTER_CRACKER, { volume: 1 });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.launchCracker = function (booster, x, y) {\r\n            var cell = this.scene.grid.getCellAtXY(x, y);\r\n            var cracker = new game.Cracker(this.scene);\r\n            cracker.x = this.scene.getFieldWidth() + this.scene.camera.getPadding().x;\r\n            cracker.y = cell.y;\r\n            cracker.setDepth(game.GameplayDepth.BOOSTER);\r\n            cracker.setOnCollide(this.onCrackerCollide.bind(this));\r\n            cracker.once(game.CrackerEvent.COMPLETE, this.onCrackerOutOfWorld.bind(this, booster));\r\n            cracker.launch();\r\n            this.scene.add.existing(cracker);\r\n            this.scene.turn.pendingBoosters.push(cracker);\r\n            this.scene.grid.highlightRow(cell.row, 0.77, 0);\r\n            if (cell.row < 2) {\r\n                this.onFoxHit();\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onCrackerCollide = function (pair) {\r\n            var item = pair.bodyA.gameObject;\r\n            var cracker = pair.bodyB.gameObject;\r\n            if (cracker && item) {\r\n                var wasHitAlready = cracker.hittedItems.includes(item);\r\n                if (wasHitAlready) {\r\n                    return;\r\n                }\r\n                cracker.hasHitSomething = true;\r\n                cracker.hittedItems.push(item);\r\n                this.moveItemByCracker(item);\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.moveItemByCracker = function (item) {\r\n            var _this = this;\r\n            var dx = Phaser.Math.RND.between(60, 100);\r\n            var targetX = Math.max(0, item.x - dx);\r\n            var dy = game.GameGrid.CELL_SIZE / 2;\r\n            var dySign = item.grid.getColumn() % 2 === 0 ? -1 : 1;\r\n            var maxY = (game.GameGrid.ROWS - game.GameGrid.LOSE_ROW) * game.GameGrid.CELL_SIZE;\r\n            var targetY = Phaser.Math.Clamp(item.y + dy * dySign, 0, maxY);\r\n            this.scene.tweens.add({\r\n                targets: item,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                x: targetX,\r\n                y: targetY,\r\n                onStart: function () {\r\n                    _this.onMoveByCrackerStart(item);\r\n                },\r\n                onComplete: function () {\r\n                    _this.onMoveByCrackerComplete(item);\r\n                },\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.onMoveByCrackerStart = function (item) {\r\n            item.setDepth(game.GameplayDepth.HIT_BY_CRACKER);\r\n            var isBlock = game.ItemTypeUtil.isBlockType(item.itemType);\r\n            if (isBlock) {\r\n                var block = item;\r\n                block.hitByCracker();\r\n                this.scene.audio.crackerPunch();\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onMoveByCrackerComplete = function (item) {\r\n            var isBlock = game.ItemTypeUtil.isBlockType(item.itemType);\r\n            if (isBlock) {\r\n                var block = item;\r\n                block.health.kill();\r\n            }\r\n            else {\r\n                item.once(game.HideEvent.COMPLETE, function () {\r\n                    item.destroy();\r\n                });\r\n                item.hideOnLevelComplete(300);\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onCrackerOutOfWorld = function (booster, cracker) {\r\n            var _this = this;\r\n            this.scene.camera.camera.shakeEffect.reset();\r\n            if (cracker.hasHitSomething === false) {\r\n                this.onBoosterComplete(booster);\r\n                this.scene.turn.pendingBoosters.length = 0;\r\n                this.scene.onTurnComplete();\r\n            }\r\n            else {\r\n                cracker.once(Phaser.GameObjects.Events.DESTROY, function () {\r\n                    _this.onBoosterComplete(booster);\r\n                    _this.scene.turn.pendingBoosters.length = 0;\r\n                    if (_this.scene.turn.checkComplete()) {\r\n                        _this.scene.onTurnComplete();\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onBoosterComplete = function (booster) {\r\n            this.emit(GameplayBoostersEvent.COMPLETE, booster);\r\n            if (booster.type === game.BoosterType.STOP) {\r\n                this.boostersPanel.getIconByType(game.BoosterType.STOP).unlock();\r\n            }\r\n            else {\r\n                this.boostersPanel.enableInput();\r\n                this.scene.addPointerCallbacks();\r\n            }\r\n        };\r\n        GameplayBoosters.prototype.onBoosterCancel = function (booster) {\r\n            this.removePointerDownCallback();\r\n            this.scene.addPointerCallbacks();\r\n            this.boosterHint.hide();\r\n            this.gui.topPanel.show();\r\n            this.gui.pauseButton.revive();\r\n            this.boostersPanel.resetHighlight();\r\n        };\r\n        GameplayBoosters.prototype.onGetFreeBoostersClick = function (booster) {\r\n            if (!this.freeBoostersScreen) {\r\n                return;\r\n            }\r\n            this.onFreeBoostersScreenShow(booster.type);\r\n            this.freeBoostersScreen.closeButton.on(ButtonEvent.PRESS, this.onFreeBoosterScreenClose.bind(this, booster.type));\r\n            this.freeBoostersScreen.playButton.on(ButtonEvent.PRESS, this.showRewardAd, this);\r\n            this.freeBoostersScreen.once(game.FreeBoostersScreenEvent.HIDE_START, this.onFreeBoostersScreenHide, this);\r\n            this.freeBoostersScreen.updateData(booster.type, this.getBoosterRewardNum());\r\n            this.freeBoostersScreen.revive();\r\n            this.freeBoostersScreen.show();\r\n        };\r\n        GameplayBoosters.prototype.getBoosterRewardNum = function () {\r\n            var valueStr = this.scene.game.analytics.getRemoteConfigValue(game.RemoteConfigKey.BOOSTERS_NUM, \"1\");\r\n            return parseInt(valueStr);\r\n        };\r\n        GameplayBoosters.prototype.onFreeBoostersScreenShow = function (type) {\r\n            this.scene.removePointerCallbacks();\r\n            this.gui.bottomPanel.disableInput();\r\n        };\r\n        GameplayBoosters.prototype.showRewardAd = function () {\r\n            var _this = this;\r\n            var boosterType = this.freeBoostersScreen.currentBooster;\r\n            var boosterNum = this.getBoosterRewardNum();\r\n            this.scene.analytics.sendRewardedAd(\"free_booster\", boosterType, \"request\");\r\n            this.scene.poki\r\n                .rewardedBreak(\"Booster:\" + boosterType, {\r\n                onSuccess: function () {\r\n                    _this.scene.time.delayedCall(200, function () {\r\n                        _this.onRewardAdSuccess(boosterType, boosterNum);\r\n                        _this.freeBoostersScreen.hide();\r\n                        _this.scene.analytics.sendRewardedAd(\"free_booster\", boosterType, \"receive\");\r\n                    });\r\n                },\r\n                onFail: function () {\r\n                    _this.scene.analytics.sendRewardedAd(\"free_booster\", boosterType, \"fail\");\r\n                },\r\n            })\r\n                .catch(function () {\r\n            });\r\n        };\r\n        GameplayBoosters.prototype.onRewardAdSuccess = function (boosterType, boosterNum) {\r\n            this.boostersPanel.getIconByType(boosterType).onGiftArrive(boosterNum);\r\n            this.scene.boosters.getBooster(boosterType).num += boosterNum;\r\n            this.scene.analytics.sendRewardedAd(\"free_booster\", boosterType, \"receive\");\r\n        };\r\n        GameplayBoosters.prototype.onFreeBoosterScreenClose = function (boosterType) {\r\n            this.gui.freeBoostersScreen.hide();\r\n        };\r\n        GameplayBoosters.prototype.onFreeBoostersScreenHide = function () {\r\n            this.scene.addPointerCallbacks();\r\n            this.gui.bottomPanel.enableInput();\r\n            this.freeBoostersScreen.closeButton.off(ButtonEvent.PRESS, this.onFreeBoosterScreenClose, this);\r\n            this.freeBoostersScreen.playButton.off(ButtonEvent.PRESS, this.showRewardAd, this);\r\n        };\r\n        GameplayBoosters.prototype.getBooster = function (type) {\r\n            return this.scene.game.boosters.getByType(type);\r\n        };\r\n        GameplayBoosters.prototype.destroy = function () {\r\n            this.particles.destroy();\r\n            this.removeTurnCompleteCallback();\r\n            this.removePointerDownCallback();\r\n            this.scene.events.off(GameplayBoostersEvent.ACTIVATE, this.onBoosterActivate, this);\r\n            this.scene.events.off(GameplayBoostersEvent.COMPLETE, this.onBoosterComplete, this);\r\n            this.gui.events.off(GameplayBoostersEvent.SELECT, this.onBoosterSelect, this);\r\n            this.gui.events.off(GameplayBoostersEvent.CANCEL, this.onBoosterCancel, this);\r\n            this.gui.events.off(GameplayBoostersEvent.GET_FREE_BOOSTER, this.onGetFreeBoostersClick, this);\r\n        };\r\n        return GameplayBoosters;\r\n    }(EventEmitter));\r\n    game.GameplayBoosters = GameplayBoosters;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EventEmitter = Phaser.Events.EventEmitter;\r\n    var SecondChanceEvent;\r\n    (function (SecondChanceEvent) {\r\n        SecondChanceEvent[\"COMPLETE\"] = \"SecondChance_COMPLETE\";\r\n    })(SecondChanceEvent = game.SecondChanceEvent || (game.SecondChanceEvent = {}));\r\n    var SecondChance = /** @class */ (function (_super) {\r\n        __extends(SecondChance, _super);\r\n        function SecondChance(scene) {\r\n            var _this = _super.call(this) || this;\r\n            _this.wasUsed = false;\r\n            _this.scene = scene;\r\n            return _this;\r\n        }\r\n        SecondChance.prototype.apply = function () {\r\n            var _this = this;\r\n            this.wasUsed = true;\r\n            this.removeBlockKing();\r\n            var initialDelay = 100;\r\n            this.scene.time.delayedCall(initialDelay + 100, function () {\r\n                _this.reviveFox();\r\n                _this.reviveBalls();\r\n            });\r\n            this.scene.time.delayedCall(initialDelay + 300, function () {\r\n                _this.destroyTopItems();\r\n            });\r\n        };\r\n        SecondChance.prototype.removeBlockKing = function () {\r\n            var blockKing = this.scene.sys.displayList.getByName(game.BlockKing.NAME);\r\n            if (blockKing) {\r\n                this.scene.tweens.add({\r\n                    targets: blockKing,\r\n                    duration: 100,\r\n                    ease: Phaser.Math.Easing.Linear.Linear,\r\n                    alpha: 0,\r\n                    onComplete: function () {\r\n                        blockKing.destroy();\r\n                    },\r\n                });\r\n            }\r\n        };\r\n        SecondChance.prototype.reviveFox = function () {\r\n            var fox = this.scene.fox;\r\n            fox.playIdleAnimation();\r\n            fox.revive();\r\n            fox.alpha = 0;\r\n            fox.scale = 0.8;\r\n            this.scene.tweens.add({\r\n                targets: fox,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: fox,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1,\r\n            });\r\n        };\r\n        SecondChance.prototype.reviveBalls = function () {\r\n            this.scene.idleBalls.forEach(function (ball) { return ball.revive(); });\r\n        };\r\n        SecondChance.prototype.destroyTopItems = function () {\r\n            var _this = this;\r\n            var itemsToDestroy = this.scene.items.filter(function (item) { return item.grid.getRow() >= (game.GameGrid.ROWS - SecondChance.ROWS - 1); });\r\n            var itemsNum = itemsToDestroy.length;\r\n            if (itemsNum === 0) {\r\n                this.moveItemsUp(SecondChance.ROWS);\r\n                return;\r\n            }\r\n            itemsToDestroy.forEach(function (item) {\r\n                item.on(Phaser.GameObjects.Events.DESTROY, function () {\r\n                    if (--itemsNum === 0) {\r\n                        _this.moveItemsUp(SecondChance.ROWS);\r\n                    }\r\n                });\r\n                item.on(game.HideEvent.COMPLETE, function () {\r\n                    item.destroy();\r\n                });\r\n                item.hideOnLevelComplete(150);\r\n            });\r\n        };\r\n        SecondChance.prototype.moveItemsUp = function (counter) {\r\n            var _this = this;\r\n            this.playMoveItemsUpSound();\r\n            this.scene.tweens.add({\r\n                targets: this.scene.items,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                y: \"-=\" + game.GameGrid.CELL_SIZE,\r\n                completeDelay: 66,\r\n            }).once(Phaser.Tweens.Events.TIMELINE_COMPLETE, function () {\r\n                if (--counter === 0) {\r\n                    _this.onMoveUpComplete();\r\n                }\r\n                else {\r\n                    _this.moveItemsUp(counter);\r\n                }\r\n            });\r\n        };\r\n        SecondChance.prototype.playMoveItemsUpSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.MOVE_ITEMS_UP)) {\r\n                this.scene.sound.play(game.GameSoundKey.MOVE_ITEMS_UP, { volume: 0.66 });\r\n            }\r\n        };\r\n        SecondChance.prototype.onMoveUpComplete = function () {\r\n            this.scene.completeTurn();\r\n            this.adjustLevelGenerator();\r\n            this.emit(SecondChanceEvent.COMPLETE, this);\r\n        };\r\n        SecondChance.prototype.adjustLevelGenerator = function () {\r\n            this.scene.generator.moveRowPointer(-SecondChance.ROWS);\r\n        };\r\n        SecondChance.ROWS = 3;\r\n        return SecondChance;\r\n    }(EventEmitter));\r\n    game.SecondChance = SecondChance;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FastForward = /** @class */ (function () {\r\n        function FastForward(scene) {\r\n            this._timeScale = 1;\r\n            this.isEnabled = false;\r\n            this.scene = scene;\r\n            this.items = [];\r\n        }\r\n        Object.defineProperty(FastForward.prototype, \"timeScale\", {\r\n            get: function () {\r\n                return this._timeScale;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        FastForward.prototype.addItem = function (item) {\r\n            this.items.push(item);\r\n        };\r\n        FastForward.prototype.removeItem = function (item) {\r\n            var index = this.items.indexOf(item);\r\n            if (index > -1) {\r\n                this.items.splice(index, 1);\r\n            }\r\n        };\r\n        FastForward.prototype.enable = function () {\r\n            if (this.scene.turn.inProgress() === false) {\r\n                return;\r\n            }\r\n            if (this.isEnabled) {\r\n                return;\r\n            }\r\n            this.scene.turn.fastForwarded = true;\r\n            var timeScale = 3;\r\n            this._timeScale = timeScale;\r\n            this.isEnabled = true;\r\n            this.scene.anims.globalTimeScale = timeScale;\r\n            this.scene.tweens.timeScale = timeScale;\r\n            this.scene.time.timeScale = timeScale;\r\n            this.scene.emitters.setTimescale(timeScale);\r\n            this.items.forEach(function (item) { return (item.timeScale = timeScale); });\r\n            this.scene.gui.tweens.timeScale = timeScale;\r\n            this.scene.gui.fastForwardButton.disable();\r\n            this.scene.gui.fastForwardButton.playAnimation();\r\n            this.scene.gui.fastForward.show();\r\n            this.scene.sound.setRate(timeScale);\r\n            this.playSound();\r\n            this.scene.game.store.saveValue(game.GameStoreKey.FAST_FORWARD_WAS_USED, true);\r\n            this.scene.events.emit(game.GameplayEvent.FAST_FORWARD_START, this);\r\n        };\r\n        FastForward.prototype.playSound = function () {\r\n            if (this.sound) {\r\n                this.sound.play();\r\n                return;\r\n            }\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.FAST_FORWARD)) {\r\n                this.sound = this.scene.sound.add(game.GameSoundKey.FAST_FORWARD, { volume: 1 });\r\n                this.sound.play();\r\n            }\r\n        };\r\n        FastForward.prototype.disable = function () {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            this._timeScale = 1;\r\n            this.isEnabled = false;\r\n            this.scene.anims.globalTimeScale = 1;\r\n            this.scene.tweens.timeScale = 1;\r\n            this.scene.time.timeScale = 1;\r\n            this.scene.emitters.setTimescale(1);\r\n            this.items.forEach(function (item) { return (item.timeScale = 1); });\r\n            this.scene.gui.tweens.timeScale = 1;\r\n            this.scene.gui.fastForwardButton.stopAnimation();\r\n            this.scene.gui.fastForward.hide();\r\n            this.scene.sound.setRate(1);\r\n            if (this.sound) {\r\n                this.sound.stop();\r\n            }\r\n        };\r\n        FastForward.prototype.destroy = function () {\r\n            if (this.scene.sound.rate !== 1) {\r\n                this.scene.sound.setRate(1);\r\n            }\r\n            this.scene.anims.globalTimeScale = 1;\r\n            this.items = null;\r\n        };\r\n        return FastForward;\r\n    }());\r\n    game.FastForward = FastForward;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Turn = /** @class */ (function () {\r\n        function Turn(scene) {\r\n            this.isStarted = false;\r\n            this.scene = scene;\r\n        }\r\n        Turn.prototype.start = function () {\r\n            this.isStarted = true;\r\n            this.startTimestamp = Date.now();\r\n            this.ballsDropped = false;\r\n            this.fastForwarded = false;\r\n            this.points = 0;\r\n            this.blocksKilledNum = 0;\r\n            this.lightningsActivated = [];\r\n            this.spinnersActivated = [];\r\n            this.collectableBallsActivated = [];\r\n            this.futureItems = [];\r\n            this.pendingDestroyBlocks = [];\r\n            this.pendingBoosters = [];\r\n            this.ballsThrownNum = 0;\r\n            this.ballsLandedNum = 0;\r\n            this.firstLandedBall = null;\r\n        };\r\n        Turn.prototype.inProgress = function () {\r\n            return this.isStarted === true;\r\n        };\r\n        Turn.prototype.checkComplete = function () {\r\n            var report = this.getCompleteReport();\r\n            return Object.values(report).every(function (value) { return value === true; });\r\n        };\r\n        Turn.prototype.getCompleteReport = function () {\r\n            if (!this.isStarted) {\r\n                return null;\r\n            }\r\n            var allBallsLanded = this.ballsLandedNum === this.ballsThrownNum;\r\n            var allCollectablesLanded = this.collectableBallsActivated.every(function (ball) { return ball.isDestroyed; });\r\n            var allFutureItemsReady = this.futureItems.length === 0;\r\n            var allBlocksDestroyed = this.pendingDestroyBlocks.length === 0;\r\n            var allBoostersComplete = this.pendingBoosters.length === 0;\r\n            return {\r\n                allBallsLanded: allBallsLanded,\r\n                allCollectablesLanded: allCollectablesLanded,\r\n                allFutureItemsReady: allFutureItemsReady,\r\n                allBlocksDestroyed: allBlocksDestroyed,\r\n                allBoostersComplete: allBoostersComplete,\r\n            };\r\n        };\r\n        Turn.prototype.complete = function () {\r\n            this.isStarted = false;\r\n        };\r\n        return Turn;\r\n    }());\r\n    game.Turn = Turn;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TutorialHand = /** @class */ (function (_super) {\r\n        __extends(TutorialHand, _super);\r\n        function TutorialHand(scene) {\r\n            var _this = _super.call(this, scene, 0, 0) || this;\r\n            _this.addLine();\r\n            _this.addHand();\r\n            _this.scene.events.once(game.GameplayEvent.TURN_START, _this.hide, _this);\r\n            _this.scene.events.once(game.GameplayEvent.TURN_COMPLETE, _this.hide, _this);\r\n            return _this;\r\n        }\r\n        TutorialHand.prototype.addLine = function () {\r\n            this.line = this.scene.add.image(0, 0, \"gameplay\", \"tutorial_line\");\r\n            this.add(this.line);\r\n        };\r\n        TutorialHand.prototype.addHand = function () {\r\n            this.hand = this.scene.add.image(0, 0, \"gameplay\", \"tutorial_hand\");\r\n            this.hand.y = this.line.y + this.hand.height * this.hand.originY - 4;\r\n            this.hand.originalX = this.hand.x;\r\n            this.hand.originalY = this.hand.y;\r\n            this.hand.alpha = 0;\r\n            this.add(this.hand);\r\n        };\r\n        TutorialHand.prototype.show = function (delay) {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: delay,\r\n                alpha: { start: 0, from: 0, to: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 200 },\r\n                scale: { from: 0.8, to: 1, ease: Phaser.Math.Easing.Back.Out, duration: 400 },\r\n                y: { from: this.y + 40, to: this.y, ease: Phaser.Math.Easing.Back.Out, duration: 500 },\r\n            });\r\n            this.playHandMoving(delay + 300);\r\n        };\r\n        TutorialHand.prototype.playHandMoving = function (initialDelay) {\r\n            var _this = this;\r\n            if (initialDelay === void 0) { initialDelay = 0; }\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            var targetBlock = this.scene.items.find(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); });\r\n            if (!targetBlock) {\r\n                return;\r\n            }\r\n            this.hand.x = this.hand.originalX;\r\n            this.hand.y = this.hand.originalY;\r\n            this.hand.alpha = 0;\r\n            this.hand.scale = 1;\r\n            var rotation = Phaser.Math.Angle.BetweenPoints(targetBlock.getWorldPosition(), this.hand.getWorldPosition());\r\n            var targetRotation = rotation - Math.PI / 2;\r\n            var targetAngle = Phaser.Math.RadToDeg(targetRotation);\r\n            this.hand.angle = targetAngle > 0 ? -35 : 44;\r\n            this.handMoveTimeline = this.scene.tweens.timeline({\r\n                tweens: [\r\n                    {\r\n                        delay: initialDelay,\r\n                        targets: this.hand,\r\n                        duration: 100,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        alpha: 1,\r\n                        completeDelay: 100,\r\n                    },\r\n                    {\r\n                        targets: this.hand,\r\n                        duration: 500,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        rotation: targetRotation,\r\n                        completeDelay: 100,\r\n                    },\r\n                    {\r\n                        targets: this.hand,\r\n                        duration: 300,\r\n                        ease: Phaser.Math.Easing.Sine.InOut,\r\n                        x: function () { return _this.getHandX(); },\r\n                        y: function () { return _this.getHandY(); },\r\n                        yoyo: true,\r\n                        completeDelay: 200,\r\n                    },\r\n                    {\r\n                        targets: this.hand,\r\n                        duration: 200,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        scale: 1.33,\r\n                        alpha: 0,\r\n                        completeDelay: 500,\r\n                    },\r\n                ],\r\n                onComplete: this.playHandMoving.bind(this),\r\n            });\r\n        };\r\n        TutorialHand.prototype.getTargetHandPosition = function () {\r\n            var distance = 30;\r\n            var angle = this.hand.rotation - Math.PI / 2;\r\n            var targetX = this.hand.x + Math.cos(angle) * distance;\r\n            var targetY = this.hand.y + Math.sin(angle) * distance;\r\n            return { x: targetX, y: targetY };\r\n        };\r\n        TutorialHand.prototype.getHandX = function () {\r\n            return this.getTargetHandPosition().x;\r\n        };\r\n        TutorialHand.prototype.getHandY = function () {\r\n            return this.getTargetHandPosition().y;\r\n        };\r\n        TutorialHand.prototype.hide = function () {\r\n            var _this = this;\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        TutorialHand.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf(this);\r\n                this.scene.tweens.killTweensOf(this.hand);\r\n                this.scene.events.off(game.GameplayEvent.TURN_START, this.hide, this);\r\n                this.scene.events.off(game.GameplayEvent.TURN_COMPLETE, this.hide, this);\r\n            }\r\n            if (this.handMoveTimeline) {\r\n                this.handMoveTimeline.destroy();\r\n                this.handMoveTimeline = null;\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return TutorialHand;\r\n    }(Phaser.GameObjects.Container));\r\n    game.TutorialHand = TutorialHand;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockHint = /** @class */ (function (_super) {\r\n        __extends(BlockHint, _super);\r\n        function BlockHint(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.scene = scene;\r\n            _this.block = _this.scene.items.find(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); });\r\n            _this.block.once(game.HealthEvent.KILL, _this.hide, _this);\r\n            _this.addCircles();\r\n            _this.show();\r\n            return _this;\r\n        }\r\n        BlockHint.prototype.addCircles = function () {\r\n            var _this = this;\r\n            this.circles = _.times(10, function () {\r\n                var circle = _this.scene.add.image(0, 0, \"gameplay\", \"circle_fx\");\r\n                circle.kill();\r\n                _this.add(circle);\r\n                return circle;\r\n            });\r\n        };\r\n        BlockHint.prototype.show = function () {\r\n            this.showCircleEvent = this.scene.time.addEvent({\r\n                loop: true,\r\n                delay: 600,\r\n                startAt: 400,\r\n                callback: this.showCircle.bind(this),\r\n            });\r\n        };\r\n        BlockHint.prototype.showCircle = function () {\r\n            var circle = this.circles.find(function (circle) { return circle.visible === false; });\r\n            if (circle) {\r\n                circle.revive();\r\n                circle.scale = 2;\r\n                circle.alpha = 0;\r\n                this.scene.tweens.add({\r\n                    targets: circle,\r\n                    duration: 1200,\r\n                    alpha: { value: 0.4, ease: Phaser.Math.Easing.Expo.Out },\r\n                    scale: { value: 0, ease: Phaser.Math.Easing.Linear },\r\n                    onComplete: function () {\r\n                        circle.kill();\r\n                    },\r\n                });\r\n            }\r\n        };\r\n        BlockHint.prototype.hide = function () {\r\n            this.block = null;\r\n            this.destroy();\r\n        };\r\n        BlockHint.prototype.preUpdate = function (time, delta) {\r\n            if (this.block) {\r\n                this.x = this.block.x;\r\n                this.y = this.block.y;\r\n            }\r\n        };\r\n        BlockHint.prototype.destroy = function () {\r\n            if (this.showCircleEvent) {\r\n                this.showCircleEvent.destroy();\r\n            }\r\n        };\r\n        return BlockHint;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BlockHint = BlockHint;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var PinataItemsFactoryEvent;\r\n    (function (PinataItemsFactoryEvent) {\r\n        PinataItemsFactoryEvent[\"ITEMS_READY\"] = \"PinataItemsFactory_ITEMS_READY\";\r\n    })(PinataItemsFactoryEvent = game.PinataItemsFactoryEvent || (game.PinataItemsFactoryEvent = {}));\r\n    var PinataItemsFactory = /** @class */ (function (_super) {\r\n        __extends(PinataItemsFactory, _super);\r\n        function PinataItemsFactory(scene, grid, emitter) {\r\n            var _this = _super.call(this) || this;\r\n            _this.scene = scene;\r\n            _this.grid = grid;\r\n            _this.world = _this.scene.matter.world;\r\n            _this.emitter = emitter;\r\n            return _this;\r\n        }\r\n        PinataItemsFactory.prototype.createFromPinata = function (pinata) {\r\n            var availableCells = this.getAvailableCells(pinata);\r\n            var items = this.createItems(availableCells);\r\n            if (items.length === 0) {\r\n                this.emit(PinataItemsFactoryEvent.ITEMS_READY, []);\r\n            }\r\n            else {\r\n                this.showItems(items);\r\n            }\r\n        };\r\n        PinataItemsFactory.prototype.getAvailableCells = function (pinata) {\r\n            var centerCell = this.grid.getCellAtXY(pinata.x, pinata.y);\r\n            var neighbourCells = this.grid.getCellNeighbours(centerCell);\r\n            return this.filterCells(neighbourCells);\r\n        };\r\n        PinataItemsFactory.prototype.filterCells = function (cells) {\r\n            var _this = this;\r\n            var bodiesToCheck = this.world.getAllBodies().filter(function (body) { return body.isStatic; });\r\n            var notBusyByBodies = function (cell) { return cell && _this.grid.isCellFree(cell.column, cell.row, bodiesToCheck); };\r\n            var notOnEdgeRows = function (cell) { return cell.row > 2; };\r\n            var notBusyByFutureItems = function (cell) { return !_this.scene.turn.futureItems.some(function (item) { return item.column === cell.column && item.row === cell.row; }); };\r\n            return cells\r\n                .filter(notBusyByBodies)\r\n                .filter(notOnEdgeRows)\r\n                .filter(notBusyByFutureItems);\r\n        };\r\n        PinataItemsFactory.prototype.createItems = function (availableCells) {\r\n            var _this = this;\r\n            return availableCells.map(function (cell) {\r\n                var item = _this.createItem(cell);\r\n                _this.onItemCreate(item, cell);\r\n                return item;\r\n            });\r\n        };\r\n        PinataItemsFactory.prototype.showItems = function (items) {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: items,\r\n                alpha: { from: 0, to: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 100 },\r\n                scale: { from: 0.75, to: 1, ease: Phaser.Math.Easing.Back.Out, duration: 200 },\r\n            }).on(Phaser.Tweens.Events.TWEEN_COMPLETE, function () {\r\n                _this.onAllItemsReady(items);\r\n            });\r\n        };\r\n        PinataItemsFactory.prototype.onAllItemsReady = function (items) {\r\n            var _this = this;\r\n            items.forEach(function (item) { return _this.onItemReady(item); });\r\n            this.emit(PinataItemsFactoryEvent.ITEMS_READY, items.map(function (item) { return item.itemType; }));\r\n        };\r\n        PinataItemsFactory.prototype.createItem = function (cell) {\r\n            var itemsGenerator = this.scene.generator.itemsGenerator;\r\n            var itemType = itemsGenerator.getItemTypeForPinata();\r\n            var itemParams = itemsGenerator.getItemParams(itemType, this.scene.levelConfig.generator.startRow, cell.row);\r\n            return this.scene.factory.create(__assign({ itemType: itemType, column: cell.column, row: cell.row }, itemParams));\r\n        };\r\n        PinataItemsFactory.prototype.emitParticles = function (item) {\r\n            this.emitter.explode(10, item.x, item.y);\r\n        };\r\n        PinataItemsFactory.prototype.onItemCreate = function (item, cell) {\r\n            this.world.remove(item.body);\r\n            this.addToFutureItems(item, cell);\r\n            this.emitParticles(item);\r\n            if (game.ItemTypeUtil.isBlock(item)) {\r\n                item.health.invincible = true;\r\n            }\r\n        };\r\n        PinataItemsFactory.prototype.addToFutureItems = function (item, cell) {\r\n            this.scene.turn.futureItems.push({\r\n                item: item,\r\n                column: cell.column,\r\n                row: cell.row,\r\n            });\r\n        };\r\n        PinataItemsFactory.prototype.onItemReady = function (item) {\r\n            this.removeFromFutureItems(item);\r\n            this.world.add(item.body);\r\n            this.scene.factory.postCreationCallback(item);\r\n            if (game.ItemTypeUtil.isBlock(item)) {\r\n                item.health.invincible = false;\r\n            }\r\n        };\r\n        PinataItemsFactory.prototype.removeFromFutureItems = function (readyItem) {\r\n            var index = this.scene.turn.futureItems.findIndex(function (futureItem) { return futureItem.item === readyItem; });\r\n            if (index > -1) {\r\n                this.scene.turn.futureItems.splice(index, 1);\r\n            }\r\n        };\r\n        return PinataItemsFactory;\r\n    }(Phaser.Events.EventEmitter));\r\n    game.PinataItemsFactory = PinataItemsFactory;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ShatterPiecesFactoryEvent;\r\n    (function (ShatterPiecesFactoryEvent) {\r\n        ShatterPiecesFactoryEvent[\"ITEMS_READY\"] = \"ShatterPiecesFactoryEvent_ITEMS_READY\";\r\n    })(ShatterPiecesFactoryEvent = game.ShatterPiecesFactoryEvent || (game.ShatterPiecesFactoryEvent = {}));\r\n    var ShatterPiecesFactory = /** @class */ (function (_super) {\r\n        __extends(ShatterPiecesFactory, _super);\r\n        function ShatterPiecesFactory(scene, grid) {\r\n            var _this = _super.call(this) || this;\r\n            _this.scene = scene;\r\n            _this.grid = grid;\r\n            _this.world = _this.scene.matter.world;\r\n            return _this;\r\n        }\r\n        ShatterPiecesFactory.prototype.createFromParent = function (parentBlock) {\r\n            var frames = game.ShatterBlockPiece.ALL_FRAMES;\r\n            var cells = this.getAvailableCellsAround(parentBlock, frames);\r\n            var pieces = this.createPieces(cells, frames);\r\n            if (pieces.length > 0) {\r\n                this.showPieces(parentBlock, pieces);\r\n            }\r\n            else {\r\n                this.onAllPiecesReady(0);\r\n            }\r\n        };\r\n        ShatterPiecesFactory.prototype.getAvailableCellsAround = function (parentBlock, frames) {\r\n            var _this = this;\r\n            var parentBlockColumn = parentBlock.grid.getColumn();\r\n            var parentBlockRow = parentBlock.grid.getRow();\r\n            return frames.map(function (frame) {\r\n                var _a = _this.getPieceGridPositionByFrame(frame, parentBlockColumn, parentBlockRow), column = _a.x, row = _a.y;\r\n                if (row < 3) {\r\n                    return null;\r\n                }\r\n                var busyByFutureItem = _this.scene.turn.futureItems.findIndex(function (item) { return item.column === column && item.row === row; }) > -1;\r\n                if (busyByFutureItem) {\r\n                    return null;\r\n                }\r\n                var isCellFree = _this.grid.isCellFree(column, row);\r\n                if (isCellFree === false) {\r\n                    return null;\r\n                }\r\n                return _this.grid.getCellAt(row, column);\r\n            });\r\n        };\r\n        ShatterPiecesFactory.prototype.getPieceGridPositionByFrame = function (frame, column, row) {\r\n            var _a;\r\n            var map = (_a = {},\r\n                _a[game.ShatterBlockPiece.UP_FRAME] = { x: column, y: row + 1 },\r\n                _a[game.ShatterBlockPiece.RIGHT_FRAME] = { x: column + 1, y: row },\r\n                _a[game.ShatterBlockPiece.DOWN_FRAME] = { x: column, y: row - 1 },\r\n                _a[game.ShatterBlockPiece.LEFT_FRAME] = { x: column - 1, y: row },\r\n                _a);\r\n            return map[frame];\r\n        };\r\n        ShatterPiecesFactory.prototype.createPieces = function (cells, frames) {\r\n            var _this = this;\r\n            var pieces = [];\r\n            cells.forEach(function (cell, index) {\r\n                if (!cell) {\r\n                    return;\r\n                }\r\n                var piece = _this.createPiece(frames[index], cell.column, cell.row);\r\n                _this.world.remove(piece.body);\r\n                _this.addToFutureItems(piece, cell.row, cell.column);\r\n                pieces.push(piece);\r\n            });\r\n            return pieces;\r\n        };\r\n        ShatterPiecesFactory.prototype.createPiece = function (frame, column, row) {\r\n            var itemType = game.ItemType.SHATTER_BLOCK_PIECE;\r\n            var itemParams = this.scene.generator.itemsGenerator.getItemParams(itemType, this.scene.levelConfig.generator.startRow, row);\r\n            return this.scene.factory.create(__assign({ itemType: itemType,\r\n                frame: frame,\r\n                column: column,\r\n                row: row }, itemParams));\r\n        };\r\n        ShatterPiecesFactory.prototype.showPieces = function (parentBlock, pieces) {\r\n            var _this = this;\r\n            var piecesReadyNum = 0;\r\n            pieces.forEach(function (piece) {\r\n                piece.alpha = 0;\r\n                _this.scene.tweens.add({\r\n                    targets: piece,\r\n                    duration: 200,\r\n                    alpha: 1,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                });\r\n                var originalX = piece.x;\r\n                var originalY = piece.y;\r\n                _this.scene.factory.alignItemToGrid(piece, parentBlock.grid.getColumn(), parentBlock.grid.getRow());\r\n                _this.scene.tweens.add({\r\n                    targets: piece,\r\n                    duration: 300,\r\n                    ease: Phaser.Math.Easing.Back.Out,\r\n                    x: originalX,\r\n                    y: originalY,\r\n                    onComplete: function () {\r\n                        _this.onPieceReady(piece);\r\n                        if (++piecesReadyNum === pieces.length) {\r\n                            _this.onAllPiecesReady(pieces.length);\r\n                        }\r\n                    },\r\n                });\r\n            });\r\n        };\r\n        ShatterPiecesFactory.prototype.onPieceReady = function (piece) {\r\n            this.removeFromFutureItems(piece);\r\n            this.world.add(piece.body);\r\n        };\r\n        ShatterPiecesFactory.prototype.onAllPiecesReady = function (piecesNum) {\r\n            this.emit(ShatterPiecesFactoryEvent.ITEMS_READY, Array(piecesNum).fill(game.ItemType.SHATTER_BLOCK));\r\n        };\r\n        ShatterPiecesFactory.prototype.addToFutureItems = function (item, row, column) {\r\n            this.scene.turn.futureItems.push({\r\n                item: item,\r\n                column: column,\r\n                row: row,\r\n            });\r\n        };\r\n        ShatterPiecesFactory.prototype.removeFromFutureItems = function (readyItem) {\r\n            var index = this.scene.turn.futureItems.findIndex(function (futureItem) { return futureItem.item === readyItem; });\r\n            if (index > -1) {\r\n                this.scene.turn.futureItems.splice(index, 1);\r\n            }\r\n        };\r\n        return ShatterPiecesFactory;\r\n    }(Phaser.Events.EventEmitter));\r\n    game.ShatterPiecesFactory = ShatterPiecesFactory;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BlockKingEvent;\r\n    (function (BlockKingEvent) {\r\n        BlockKingEvent[\"JUMP_ON_FOX_COMPLETE\"] = \"BlockKing_JUMP_ON_FOX_COMPLETE\";\r\n    })(BlockKingEvent = game.BlockKingEvent || (game.BlockKingEvent = {}));\r\n    var BlockKing = /** @class */ (function (_super) {\r\n        __extends(BlockKing, _super);\r\n        function BlockKing(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = BlockKing.NAME;\r\n            _this.addBlock();\r\n            _this.addFace();\r\n            _this.addWhite();\r\n            _this.addShadow();\r\n            _this.addCrown();\r\n            return _this;\r\n        }\r\n        BlockKing.prototype.addBlock = function () {\r\n            this.block = this.scene.add.image(0, 0, \"gameplay\", \"block_king/basic_block_01\");\r\n            this.block.setOrigin(0.5, 1);\r\n            this.add(this.block);\r\n        };\r\n        BlockKing.prototype.addFace = function () {\r\n            this.face = this.scene.add.image(0, 0, \"gameplay\", \"block_king/basic_block_01_face_idle\");\r\n            this.face.setOrigin(0.5, 1);\r\n            this.add(this.face);\r\n        };\r\n        BlockKing.prototype.addWhite = function () {\r\n            this.blockWhite = this.scene.add.image(0, 0, \"gameplay\", \"block_king/white_basic_block_01\");\r\n            this.blockWhite.setOrigin(0.5, 1);\r\n            this.add(this.blockWhite);\r\n        };\r\n        BlockKing.prototype.addShadow = function () {\r\n            this.shadow = this.scene.add.image(0, 0, \"gameplay\", \"block_king/block_ground_shadow\");\r\n            this.shadow.x = 3;\r\n            this.shadow.y = this.block.bottom;\r\n            this.shadow.scaleX = 1.66;\r\n            this.shadow.kill();\r\n            this.addAt(this.shadow, 0);\r\n        };\r\n        BlockKing.prototype.addCrown = function () {\r\n            this.crown = this.scene.add.image(0, 0, \"gameplay\", \"block_king/crown\");\r\n            this.crown.setOrigin(0.5, 1);\r\n            this.crown.y = this.block.top - 14;\r\n            this.crown.kill();\r\n            this.add(this.crown);\r\n        };\r\n        BlockKing.prototype.jumpOnFox = function (foxX, foxY) {\r\n            var _this = this;\r\n            this.alpha = 0;\r\n            this.scale = 1.5;\r\n            this.blockWhite.alpha = 0.77;\r\n            this.scene.tweens.add({\r\n                targets: this.blockWhite,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1,\r\n                y: this.y - 250,\r\n                completeDelay: 100,\r\n                onComplete: function () {\r\n                    _this.doJumpOnFox(foxX, foxY);\r\n                },\r\n            });\r\n        };\r\n        BlockKing.prototype.doJumpOnFox = function (foxX, foxY) {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.BLOCK_STOMP_WHOOSH)) {\r\n                this.scene.sound.play(game.GameSoundKey.BLOCK_STOMP_WHOOSH, { volume: 0.75, delay: 0.24 });\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                angle: this.angle - 15,\r\n                yoyo: true,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                x: foxX,\r\n                y: foxY,\r\n                onComplete: this.onJumpComplete.bind(this),\r\n            });\r\n        };\r\n        BlockKing.prototype.onJumpComplete = function () {\r\n            this.shadow.revive();\r\n            this.playIdleTweens();\r\n            this.showBlinkFrame();\r\n            this.showCrown(500);\r\n            this.emit(BlockKingEvent.JUMP_ON_FOX_COMPLETE, this);\r\n        };\r\n        BlockKing.prototype.playIdleTweens = function () {\r\n            if (!this.scene) {\r\n                return;\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: [this.block, this.face],\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.04,\r\n                scaleY: 0.9,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.crown,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"+=12\",\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        BlockKing.prototype.showBlinkFrame = function () {\r\n            var _this = this;\r\n            this.face.setFrame(\"block_king/basic_block_01_face_blink\");\r\n            this.face.setOrigin(0.5, 1);\r\n            this.scene.time.delayedCall(600, function () {\r\n                _this.face.setFrame(\"block_king/basic_block_01_face_idle\");\r\n                _this.face.setOrigin(0.5, 1);\r\n            });\r\n        };\r\n        BlockKing.prototype.showCrown = function (delay) {\r\n            this.crown.revive();\r\n            this.crown.alpha = 0;\r\n            this.crown.scale = 0.8;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.crown,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.crown,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.4],\r\n                scale: 1,\r\n            });\r\n        };\r\n        BlockKing.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf([this.crown, this.block, this.face]);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        BlockKing.NAME = \"block_king\";\r\n        return BlockKing;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BlockKing = BlockKing;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LoseTutorialPopover = /** @class */ (function (_super) {\r\n        __extends(LoseTutorialPopover, _super);\r\n        function LoseTutorialPopover(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"lose_tutorial_popover\";\r\n            _this.addBack();\r\n            _this.addSign();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        LoseTutorialPopover.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay\", \"warning_popover\");\r\n            this.add(this.back);\r\n        };\r\n        LoseTutorialPopover.prototype.addSign = function () {\r\n            this.sign = this.scene.add.image(0, 0, \"gameplay\", \"warning_sign\");\r\n            this.sign.x = this.back.left + 16;\r\n            this.sign.y = this.back.top + 12;\r\n            this.add(this.sign);\r\n        };\r\n        LoseTutorialPopover.prototype.addText = function () {\r\n            var content = this.scene.texts.lose_warning;\r\n            var style = {\r\n                fontFamily: game.GameFont.DEFAULT,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"24px\",\r\n                color: \"#205466\",\r\n                align: \"center\",\r\n            };\r\n            var maxHeight = 100;\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setWordWrapWidth(265);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n            this.text.y = -74;\r\n            this.add(this.text);\r\n        };\r\n        return LoseTutorialPopover;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LoseTutorialPopover = LoseTutorialPopover;\r\n})(game || (game = {}));\r\n///<reference path='LoseTutorialPopover.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LoseTutorial = /** @class */ (function (_super) {\r\n        __extends(LoseTutorial, _super);\r\n        function LoseTutorial(scene) {\r\n            var _this = _super.call(this) || this;\r\n            _this.scene = scene;\r\n            _this.addPopover();\r\n            _this.showPopover();\r\n            _this.timerEvent = _this.scene.time.delayedCall(2000, _this.addPointerListeners, null, _this);\r\n            _this.scene.events.once(Phaser.Scenes.Events.SHUTDOWN, _this.onSceneShutdown, _this);\r\n            _this.scene.events.once(game.GameplayEvent.TURN_START, _this.onTurnStart, _this);\r\n            return _this;\r\n        }\r\n        LoseTutorial.prototype.addPopover = function () {\r\n            this.popover = new game.LoseTutorialPopover(this.scene);\r\n            this.popover.x = this.scene.getFieldWidth() / 2;\r\n            this.popover.y = this.scene.warningLine.y - 10;\r\n            this.popover.setDepth(game.GameplayDepth.LOSE_TUTORIAL);\r\n            this.scene.add.existing(this.popover);\r\n        };\r\n        LoseTutorial.prototype.showPopover = function () {\r\n            this.popover.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.popover,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.popover.scale = 0.8;\r\n            this.scene.tweens.add({\r\n                targets: this.popover,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                easeParams: [1.6],\r\n                scale: 1,\r\n            });\r\n        };\r\n        LoseTutorial.prototype.hideTutorial = function () {\r\n            var _this = this;\r\n            this.scene.game.store.saveValue(game.GameStoreKey.LOSE_TUTORIAL_COMPLETE, true);\r\n            this.scene.tweens.killTweensOf(this.popover);\r\n            this.scene.tweens.add({\r\n                targets: this.popover,\r\n                y: \"-15\",\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.popover.destroy();\r\n                },\r\n            });\r\n        };\r\n        LoseTutorial.prototype.onPointerDown = function () {\r\n            this.scene.events.off(game.GameplayEvent.TURN_START, this.onTurnStart, this);\r\n            this.removePointerListeners();\r\n            this.hideTutorial();\r\n        };\r\n        LoseTutorial.prototype.onPointerMove = function (pointer) {\r\n            if (pointer.isDown) {\r\n                this.scene.events.off(game.GameplayEvent.TURN_START, this.onTurnStart, this);\r\n                this.removePointerListeners();\r\n                this.hideTutorial();\r\n            }\r\n        };\r\n        LoseTutorial.prototype.addPointerListeners = function () {\r\n            this.scene.input.once(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.scene.input.once(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n        };\r\n        LoseTutorial.prototype.removePointerListeners = function () {\r\n            this.scene.input.off(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.scene.input.off(Phaser.Input.Events.POINTER_MOVE, this.onPointerMove, this);\r\n        };\r\n        LoseTutorial.prototype.onTurnStart = function () {\r\n            this.timerEvent.remove();\r\n            this.removePointerListeners();\r\n            this.hideTutorial();\r\n        };\r\n        LoseTutorial.prototype.onSceneShutdown = function () {\r\n            this.removePointerListeners();\r\n            this.scene.events.off(game.GameplayEvent.TURN_START, this.onTurnStart, this);\r\n            this.timerEvent.remove();\r\n            this.scene = null;\r\n        };\r\n        return LoseTutorial;\r\n    }(Phaser.Events.EventEmitter));\r\n    game.LoseTutorial = LoseTutorial;\r\n})(game || (game = {}));\r\n///<reference path='../../robowhale/phaser3/gameObjects/trail/Trail.ts' />\r\n///<reference path='../../robowhale/phaser3/gameObjects/trail/TrailsCanvas.ts' />\r\n///<reference path='fox/Fox.ts' />\r\n///<reference path='fox/FoxTalkBubble.ts' />\r\n///<reference path='fox/ThrownFox.ts' />\r\n///<reference path='trajectory/Trajectory.ts' />\r\n///<reference path='ball/Ball.ts' />\r\n///<reference path='ball/BallChargedEmitter.ts' />\r\n///<reference path='ball/BallSpinnedEmitter.ts' />\r\n///<reference path='ball/idleBall/IdleBallsAligner.ts' />\r\n///<reference path='ball/idleBall/IdleBall.ts' />\r\n///<reference path='ball/idleBall/IdleBallShadow.ts' />\r\n///<reference path='ball/WinningBall.ts' />\r\n///<reference path='ball/LosingBall.ts' />\r\n///<reference path='grid/GameGrid.ts' />\r\n///<reference path='grid/GridWalls.ts' />\r\n///<reference path='items/GameItem.ts' />\r\n///<reference path='items/lightning/Lightning.ts' />\r\n///<reference path='items/spinner/Spinner.ts' />\r\n///<reference path='items/spinner/SpinnerIdleEmitter.ts' />\r\n///<reference path='items/blocks/BasicBlock.ts' />\r\n///<reference path='items/blocks/common/BlockShadow.ts' />\r\n///<reference path='items/blocks/common/BlockFace.ts' />\r\n///<reference path='items/blocks/common/BlockWhiteCopy.ts' />\r\n///<reference path='items/blocks/common/BlockRedCopy.ts' />\r\n///<reference path='items/blocks/common/BlockHealthCounter.ts' />\r\n///<reference path='items/blocks/TriangleBlock.ts' />\r\n///<reference path='items/blocks/IceBlock.ts' />\r\n///<reference path='items/blocks/RotatingIceBlock.ts' />\r\n///<reference path='items/blocks/DynamiteBlock.ts' />\r\n///<reference path='items/blocks/PinataBlock.ts' />\r\n///<reference path='items/blocks/ShatterBlock.ts' />\r\n///<reference path='items/blocks/ShatterBlockPiece.ts' />\r\n///<reference path='items/ItemType.ts' />\r\n///<reference path='items/CollectableBall.ts' />\r\n///<reference path='items/components/GridComponent.ts' />\r\n///<reference path='items/components/HealthComponent.ts' />\r\n///<reference path='items/components/KillTweens.ts' />\r\n///<reference path='items/components/IActiveable.ts' />\r\n///<reference path='items/components/HideComponent.ts' />\r\n///<reference path='CollisionTag.ts' />\r\n///<reference path='GameplayDepth.ts' />\r\n///<reference path='ball/BallCharged.ts' />\r\n///<reference path='generator/LevelGenerator.ts' />\r\n///<reference path='fx/Explosion.ts' />\r\n///<reference path='fx/BlockDamageFx.ts' />\r\n///<reference path='fx/PlusBallFx.ts' />\r\n///<reference path='fx/levelComplete/LevelCompleteFx.ts' />\r\n///<reference path='fx/DustCloud.ts' />\r\n///<reference path='fx/ClearFieldFx.ts' />\r\n///<reference path='fx/TurnCompleteFx.ts' />\r\n///<reference path='systems/GameplayEmitters.ts' />\r\n///<reference path='systems/GameplayPhysics.ts' />\r\n///<reference path='systems/GameplayAnimationPools.ts' />\r\n///<reference path='systems/GameplayPools.ts' />\r\n///<reference path='systems/GameplayItemsFactory.ts' />\r\n///<reference path='systems/GameplayCamera.ts' />\r\n///<reference path='systems/GameplayWorldCopy.ts' />\r\n///<reference path='systems/GameplayAudio.ts' />\r\n///<reference path='boosters/GameplayBoosters.ts' />\r\n///<reference path='systems/SecondChance.ts' />\r\n///<reference path='FastForward.ts' />\r\n///<reference path='Turn.ts' />\r\n///<reference path='tutorial/TutorialHand.ts' />\r\n///<reference path='tutorial/BlockHint.ts' />\r\n///<reference path='PinataItemsFactory.ts' />\r\n///<reference path='ShatterPiecesFactory.ts' />\r\n///<reference path='BlockKing.ts' />\r\n///<reference path='tutorial/LoseTutorial.ts' />\r\nvar game;\r\n(function (game) {\r\n    var Distance = Phaser.Math.Distance;\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var GameplayEvent;\r\n    (function (GameplayEvent) {\r\n        GameplayEvent[\"TURN_START\"] = \"Gameplay_TURN_START\";\r\n        GameplayEvent[\"TURN_COMPLETE\"] = \"Gameplay_TURN_COMPLETE\";\r\n        GameplayEvent[\"TURN_FULLY_COMPLETE\"] = \"Gameplay_TURN_FULLY_COMPLETE\";\r\n        GameplayEvent[\"FAST_FORWARD_START\"] = \"Gameplay_FAST_FORWARD_START\";\r\n    })(GameplayEvent = game.GameplayEvent || (game.GameplayEvent = {}));\r\n    var Gameplay = /** @class */ (function (_super) {\r\n        __extends(Gameplay, _super);\r\n        function Gameplay() {\r\n            return _super.call(this, {\r\n                physics: game.GameplayRoot.getPhysicsConfig(),\r\n            }) || this;\r\n        }\r\n        Gameplay.prototype.init = function (levelConfig) {\r\n            this.levelConfig = levelConfig;\r\n            this.levelNumber = this.levelConfig.levelNumber;\r\n            this.isPointerDown = false;\r\n            this.isMoveDownLocked = false;\r\n            this.isGameplayStopped = false;\r\n            this.physicsShapes = this.cache.json.get(\"physics\");\r\n            this.balls = [];\r\n            this.items = [];\r\n            this.levelData = this.createLevelData();\r\n            this.initAnimationPools();\r\n            this.gui = null;\r\n            this.camera = null;\r\n            this.worldCopy = null;\r\n            this.audio = null;\r\n            this.boosters = null;\r\n            this.secondChance = null;\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            this.analytics.sendLevelStart(this.levelNumber);\r\n            this.poki.sdk.gameplayStart();\r\n            this.game.raven.addExtraContext({ level: this.levelNumber });\r\n        };\r\n        Gameplay.prototype.create = function () {\r\n            this.generator = new game.LevelGenerator(this, this.levelConfig);\r\n            this.camera = new game.GameplayCamera(this);\r\n            this.factory = new game.GameplayItemsFactory(this);\r\n            this._physics = new game.GameplayPhysics(this);\r\n            this.pools = new game.GameplayPools(this);\r\n            this.emitters = new game.GameplayEmitters(this);\r\n            this.fastForward = new game.FastForward(this);\r\n            this.turn = new game.Turn(this);\r\n            this.worldCopy = new game.GameplayWorldCopy(this);\r\n            this.audio = new game.GameplayAudio(this);\r\n            this.secondChance = new game.SecondChance(this);\r\n            this.addGrid();\r\n            this.addGridWalls();\r\n            this.addInitialItems();\r\n            this.addFox();\r\n            this.addFoxTalkBubble();\r\n            this.addBallTrails();\r\n            this.addIdleBalls(this.levelConfig.balls);\r\n            this.addBalls(this.levelConfig.balls);\r\n            this.addTrajectory();\r\n            this.addTutorial();\r\n            this.addWarningLine();\r\n            this.addTurnCompleteFx();\r\n            this.addLevelCompleteFx();\r\n            this.idleBallsAligner = new game.IdleBallsAligner(this);\r\n            this.idleBallsAligner.placeIdleBallsAroundInstant(this.idleBalls, this.fox.x);\r\n            this.sleepItems();\r\n            this.autoThrow();\r\n        };\r\n        Gameplay.prototype.testTurnCompleteAnimations = function () {\r\n            var _this = this;\r\n            this.hideRemainingItems();\r\n            this.time.addEvent({\r\n                loop: true,\r\n                delay: 4000,\r\n                startAt: 3700,\r\n                callback: function () {\r\n                    var blocksKilled = Phaser.Math.RND.between(3, 10);\r\n                    var points = Phaser.Math.RND.between(100, 10000);\r\n                    var clearBonus = Phaser.Math.RND.bool();\r\n                    _this.showTurnCompleteFx(blocksKilled, points, clearBonus);\r\n                },\r\n            });\r\n        };\r\n        Gameplay.prototype.addItem = function (item) {\r\n            item.on(game.GameItemEvent.PRE_DESTROY, this.onItemPreDestroy, this);\r\n            this.items.push(item);\r\n        };\r\n        Gameplay.prototype.onItemPreDestroy = function (item, fromScene) {\r\n            if (fromScene === true) {\r\n                // scene was shutdown so we don't have handle this event\r\n                return;\r\n            }\r\n            _.pull(this.items, item);\r\n            this.tryToDropBalls();\r\n        };\r\n        Gameplay.prototype.onDynamiteBlockExplode = function (explosive) {\r\n            this.showExplosion(explosive.x, explosive.y, 1.5);\r\n            this.damageNearbyBlocks(explosive);\r\n            this.audio.explosion();\r\n            this.cameras.main.shake(500, 0.011, true);\r\n        };\r\n        Gameplay.prototype.onLightningDestroy = function (lightning) {\r\n            // this.emitters.lightning.explode(10, lightning.x, lightning.y)\r\n            this.animsPools.lightnings.recycleActive(lightning.animation);\r\n        };\r\n        Gameplay.prototype.onBlockDamage = function (block, damage) {\r\n            this.showDamageValueFx(damage, block);\r\n            this.turn.points += damage;\r\n            if (this.levelNumber === 1) {\r\n                this.audio.blockHit();\r\n            }\r\n        };\r\n        Gameplay.prototype.onBlockKill = function (block) {\r\n            block.once(Phaser.GameObjects.Events.DESTROY, this.onBlockDestroy, this);\r\n            block.setDepth(block.wasHitByCracker ? game.GameplayDepth.HIT_BY_CRACKER : game.GameplayDepth.DEAD_BLOCKS);\r\n            this.turn.pendingDestroyBlocks.push(block);\r\n            this.turn.blocksKilledNum++;\r\n            var isTargetItemType = this.isTargetItemType(block.itemType);\r\n            if (isTargetItemType) {\r\n                this.levelData.targetBlocksKilled++;\r\n                this.showCollectedBlockFx(block);\r\n            }\r\n        };\r\n        Gameplay.prototype.onBlockDestroy = function (block) {\r\n            var index = this.turn.pendingDestroyBlocks.indexOf(block);\r\n            if (index > -1) {\r\n                this.turn.pendingDestroyBlocks.splice(index, 1);\r\n                if (this.turn.pendingDestroyBlocks.length === 0) {\r\n                    this.checkTurnComplete();\r\n                }\r\n            }\r\n            var blockType = block.itemType;\r\n            if (blockType === game.ItemType.PINATA_BLOCK || blockType === game.ItemType.DYNAMITE_BLOCK) {\r\n                return;\r\n            }\r\n            var isTargetItemType = this.isTargetItemType(blockType);\r\n            if (isTargetItemType) {\r\n                if (blockType === game.ItemType.SHATTER_BLOCK) {\r\n                    this.showItemDestroyFx(block.x, block.y);\r\n                }\r\n                return;\r\n            }\r\n            this.showItemDestroyFx(block.x, block.y);\r\n        };\r\n        Gameplay.prototype.showItemDestroyFx = function (x, y) {\r\n            this.emitters.blockKill.explode(1, x, y);\r\n            this.emitters.blockKillParticles.setPosition(x, y);\r\n            this.emitters.blockKillParticles.explode(8, x, y);\r\n        };\r\n        Gameplay.prototype.addBlockWhiteCopy = function (block) {\r\n            var copy = this.pools.blockWhiteCopies.getFirstDead(true);\r\n            copy.setBlock(block);\r\n            return copy;\r\n        };\r\n        Gameplay.prototype.addBlockHealthCounter = function (block) {\r\n            var counter = this.pools.blockHealthCounters.getFirstDead(true);\r\n            counter.revive();\r\n            counter.setBlock(block);\r\n            return counter;\r\n        };\r\n        Gameplay.prototype.onBallSpinnerTouched = function (ball, spinner) {\r\n            var ballWasSpinned = spinner.spinnedBalls.some(function (spinnedBall) { return spinnedBall.ball === ball; });\r\n            if (ballWasSpinned) {\r\n                return;\r\n            }\r\n            spinner.spinnedBalls.push({ ball: ball, timestamp: this.game.getTime() });\r\n            spinner.activate();\r\n            ball.spin();\r\n            this.audio.spinner();\r\n            this.emitters.spinner.setPosition(spinner.x, spinner.y);\r\n            this.emitters.spinner.explode(10, spinner.x, spinner.y);\r\n            this.turn.spinnersActivated.push(spinner);\r\n            this.tryToDropBalls();\r\n        };\r\n        Gameplay.prototype.onBallLightningTouched = function (ball, lightning) {\r\n            if (lightning.wasActivated === false) {\r\n                this.turn.lightningsActivated.push(lightning);\r\n            }\r\n            if (ball.isCharged === false) {\r\n                ball.setCharge();\r\n                this.emitters.lightning.setPosition(lightning.x, lightning.y);\r\n                this.emitters.lightning.explode(10, lightning.x, lightning.y);\r\n                this.audio.lightning();\r\n            }\r\n            lightning.activate();\r\n            this.tryToDropBalls();\r\n        };\r\n        Gameplay.prototype.onBallFloorCollide = function (ball, floor) {\r\n            ball.onTouchedTheFloor();\r\n            this.showIdleBall(ball.x);\r\n            this.audio.ballHit();\r\n            if (this.turn.firstLandedBall === null) {\r\n                this.turn.firstLandedBall = ball;\r\n                this.turn.firstLandedBallMark = ball.x;\r\n            }\r\n        };\r\n        Gameplay.prototype.onBallWallsCollide = function (ball, wall, pair) {\r\n            var contactPoint = this._physics.world.getContactPoint(pair);\r\n            this.emitFeathers(1, contactPoint.x, contactPoint.y);\r\n            this.audio.ballHit();\r\n        };\r\n        Gameplay.prototype.onBallBlocksCollide = function (ball, block, pair) {\r\n            this.audio.ballHit();\r\n            block.health.damage(ball.damage);\r\n            if (ball.isCharged) {\r\n                block.zap();\r\n            }\r\n            else {\r\n                var contactPoint = this._physics.world.getContactPoint(pair);\r\n                this.emitFeathers(2, contactPoint.x, contactPoint.y);\r\n            }\r\n        };\r\n        Gameplay.prototype.onBlockZap = function (block) {\r\n            this.emitters.zappedBlock.setPosition(block.x, block.y);\r\n            this.emitters.zappedBlock.explode(4, block.x, block.y);\r\n            this.audio.blockZap();\r\n        };\r\n        Gameplay.prototype.onCollectableBallHit = function (collectable, ball, pair) {\r\n            collectable.state = \"hit_by_ball\";\r\n            collectable.setDepth(game.GameplayDepth.DROPPED_COLLECTABLE_BALLS);\r\n            collectable.startFalling();\r\n            collectable.setCollidesWith([this._physics.collisionCategories.floor, this._physics.collisionCategories.walls]);\r\n            collectable.setVelocityX(ball.body.velocity.x / 2);\r\n            var contactPoint = this._physics.world.getContactPoint(pair);\r\n            this.emitters.collectableBallFeathers.setPosition(contactPoint.x, contactPoint.y);\r\n            this.emitters.collectableBallFeathers.explode(25, contactPoint.x, contactPoint.y);\r\n            this.turn.collectableBallsActivated.push(collectable);\r\n            this.audio.collectableBallHit();\r\n        };\r\n        Gameplay.prototype.onCollectableBallLand = function (collectable, floor, pair) {\r\n            collectable.state = \"landed\";\r\n            var contactPoint = this._physics.world.getContactPoint(pair);\r\n            this.emitters.feathers.explode(6, contactPoint.x, contactPoint.y);\r\n            this.addIdleBall(collectable.x);\r\n            this.showPlusBallFx(collectable);\r\n            collectable.destroy();\r\n            this.addBall();\r\n            this.gui.ballsLabel.updateNum(this.balls.length);\r\n            this.audio.collectableBallLand();\r\n            this.checkTurnComplete();\r\n        };\r\n        Gameplay.prototype.removePointerCallbacks = function () {\r\n            this.input.off(\"pointerdown\", this.onPointerDown, this);\r\n            this.input.off(\"pointerup\", this.onPointerUp, this);\r\n            this.input.off(Phaser.Input.Events.POINTER_UP_OUTSIDE, this.onPointerUp, this);\r\n            this.gui.input.off(\"pointerup\", this.onPointerUp, this);\r\n        };\r\n        Gameplay.prototype.addPointerCallbacks = function () {\r\n            this.input.on(\"pointerdown\", this.onPointerDown, this);\r\n            this.input.on(\"pointerup\", this.onPointerUp, this);\r\n            this.input.on(Phaser.Input.Events.POINTER_UP_OUTSIDE, this.onPointerUp, this);\r\n            this.gui.input.on(\"pointerup\", this.onPointerUp, this);\r\n        };\r\n        Gameplay.prototype.getThrowRotation = function (startPosition, endPosition) {\r\n            return Phaser.Math.Angle.Between(startPosition.x, startPosition.y, endPosition.x, endPosition.y);\r\n        };\r\n        Gameplay.prototype.doResize = function () {\r\n            // we can't properly resize gameplay until gui is ready\r\n            if (this.gui && this.camera) {\r\n                this.camera.resize();\r\n            }\r\n        };\r\n        Gameplay.prototype.getFieldWidth = function () {\r\n            return game.GameGrid.CELL_SIZE * game.GameGrid.COLUMNS;\r\n        };\r\n        Gameplay.prototype.getFieldHeight = function () {\r\n            return game.GameGrid.CELL_SIZE * (game.GameGrid.ROWS + 1) - game.GameGrid.CELL_SIZE / 2;\r\n        };\r\n        Gameplay.prototype.onGuiCreated = function () {\r\n            this.gui.fastForwardButton.kill();\r\n            this.gui.fastForwardButton.on(Phaser.GameObjects.ButtonEvent.PRESS, this.onFastForwardButtonClick, this);\r\n            this.gui.dropBallsButton.kill();\r\n            this.gui.dropBallsButton.on(Phaser.GameObjects.ButtonEvent.PRESS, this.dropBallsToFloorByKey, this);\r\n            this.addBoosters();\r\n            this.addPointerCallbacks();\r\n            this.addKeyboardCallbacks();\r\n        };\r\n        Gameplay.prototype.addBoosters = function () {\r\n            this.boosters = new game.GameplayBoosters(this, this.gui);\r\n            this.boosters.on(game.GameplayBoostersEvent.ACTIVATE, this.onBoosterActivate, this);\r\n            this.boosters.on(game.GameplayBoostersEvent.COMPLETE, this.onBoosterComplete, this);\r\n        };\r\n        Gameplay.prototype.onBoosterActivate = function (booster) {\r\n            if (booster.type === game.BoosterType.STOP) {\r\n                this.isMoveDownLocked = true;\r\n            }\r\n        };\r\n        Gameplay.prototype.onBoosterComplete = function (booster) {\r\n            if (booster.type === game.BoosterType.STOP) {\r\n                this.isMoveDownLocked = false;\r\n            }\r\n        };\r\n        Gameplay.prototype.onPinataDestroyed = function (pinata) {\r\n            var factory = new game.PinataItemsFactory(this, this.grid, this.emitters.newPinataItem);\r\n            factory.once(game.PinataItemsFactoryEvent.ITEMS_READY, this.onPinataItemsReady, this);\r\n            factory.createFromPinata(pinata);\r\n            this.emitters.pinataConfetti.explode(40, pinata.x, pinata.y);\r\n            this.emitters.pinata.explode(1, pinata.x, pinata.y);\r\n            this.audio.pinata();\r\n            this.cameras.main.shake(300, 0.006, true);\r\n        };\r\n        Gameplay.prototype.onPinataItemsReady = function (newItemTypes) {\r\n            this.adjustTargetItemsNum(newItemTypes);\r\n            this.checkTurnComplete();\r\n        };\r\n        Gameplay.prototype.onShatterBlockShatter = function (shatterBlock) {\r\n            var factory = new game.ShatterPiecesFactory(this, this.grid);\r\n            factory.once(game.ShatterPiecesFactoryEvent.ITEMS_READY, this.onShatterPiecesReady, this);\r\n            factory.createFromParent(shatterBlock);\r\n            if (this.cache.audio.has(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH)) {\r\n                this.sound.play(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH, { volume: 1 });\r\n            }\r\n        };\r\n        Gameplay.prototype.onShatterPiecesReady = function (newItemTypes) {\r\n            this.adjustTargetItemsNum(newItemTypes);\r\n            this.checkTurnComplete();\r\n        };\r\n        Gameplay.prototype.update = function (time, delta) {\r\n            this._physics.update(delta);\r\n            this.updateTrajectory();\r\n            this.updateWarningLine(delta);\r\n        };\r\n        Gameplay.prototype.updateTrajectory = function () {\r\n            if (this.isPointerDown) {\r\n                if (this.trajectory.visible === false && this.turn.inProgress() === false) {\r\n                    this.fox.play(game.FoxAnimation.AIM, true);\r\n                    this.trajectory.show();\r\n                }\r\n            }\r\n            else {\r\n                if (this.trajectory.visible) {\r\n                    if (this.fox.anims.getCurrentKey() !== game.FoxAnimation.SHOT) {\r\n                        this.fox.play(game.FoxAnimation.IDLE, true);\r\n                    }\r\n                    this.trajectory.hide();\r\n                }\r\n            }\r\n        };\r\n        Gameplay.prototype.updateWarningLine = function (delta) {\r\n            if (this.warningLine.visible) {\r\n                this.warningLine.tilePositionX -= delta * 0.035;\r\n            }\r\n        };\r\n        Gameplay.prototype.addBlockFace = function (block) {\r\n            var facelessBlocks = [game.ItemType.SHATTER_BLOCK, game.ItemType.SHATTER_BLOCK_PIECE];\r\n            if (facelessBlocks.includes(block.itemType)) {\r\n                return;\r\n            }\r\n            var face = new game.BlockFace(this, block);\r\n            face.setDepth(game.GameplayDepth.BLOCK_FACES);\r\n            this.add.existing(face);\r\n        };\r\n        Gameplay.prototype.addLightningIdleEmitter = function (lightning) {\r\n            var actualEmitter = this.emitters.createLightningIdleEmitter();\r\n            var emitter = new game.LightningIdleEmitter(this, lightning, actualEmitter);\r\n        };\r\n        Gameplay.prototype.addSpinnerIdleEmitter = function (spinner) {\r\n            var actualEmitter = this.emitters.createSpinnerIdleEmitter(spinner);\r\n            var emitter = new game.SpinnerIdleEmitter(this, spinner, actualEmitter);\r\n        };\r\n        Gameplay.prototype.addIceBlockEmitter = function (iceBlock) {\r\n            var emitter = this.emitters.createIceBlockEmitter(iceBlock);\r\n            iceBlock.on(game.HideEvent.START, emitter.remove, emitter);\r\n            iceBlock.on(game.HealthEvent.KILL, function () {\r\n                emitter.remove();\r\n            });\r\n            iceBlock.on(Phaser.GameObjects.Events.DESTROY, function () {\r\n                emitter.remove();\r\n            });\r\n        };\r\n        Gameplay.prototype.addCollectableBallEmitter = function (ball) {\r\n            var emitter = this.emitters.createCollectableBallEmitter(ball);\r\n            ball.on(game.CollectableBallEvent.ACTIVATE, function () {\r\n                emitter.on = true;\r\n            });\r\n            ball.on(game.HideEvent.START, function () {\r\n                emitter.remove();\r\n            });\r\n            ball.on(game.CollectableBallEvent.START_FALL, function () {\r\n                emitter.remove();\r\n            });\r\n            ball.on(Phaser.GameObjects.Events.DESTROY, function () {\r\n                emitter.remove();\r\n            });\r\n        };\r\n        Gameplay.prototype.onBlockStartStomping = function (block) {\r\n            block.setDepth(game.GameplayDepth.STOMPING_BLOCKS);\r\n            this.showRedCopy(block);\r\n        };\r\n        Gameplay.prototype.onBlockStopStomping = function (block) {\r\n            block.setDepth(game.GameplayDepth.ITEMS);\r\n        };\r\n        Gameplay.prototype.createLevelData = function () {\r\n            return {\r\n                turnsNum: 0,\r\n                points: 0,\r\n                targetBlocksKilled: 0,\r\n                targetBlocksRequired: this.levelConfig.generator.targetItemsNum,\r\n            };\r\n        };\r\n        Gameplay.prototype.initAnimationPools = function () {\r\n            if (!this.animsPools) {\r\n                this.animsPools = new game.GameplayAnimationPools(this);\r\n            }\r\n        };\r\n        Gameplay.prototype.addGrid = function () {\r\n            this.grid = new game.GameGrid(this, game.GameGrid.COLUMNS, game.GameGrid.ROWS);\r\n            this.grid.alpha = 0.5;\r\n            this.grid.setDepth(game.GameplayDepth.GRID);\r\n        };\r\n        Gameplay.prototype.addGridWalls = function () {\r\n            this.gridWalls = new game.GridWalls(this, this.grid.getWidth(), this.grid.getHeight());\r\n            this.gridWalls.top.collisionFilter.category = this._physics.collisionCategories.ceiling;\r\n            this.gridWalls.right.collisionFilter.category = this._physics.collisionCategories.walls;\r\n            this.gridWalls.bottom.collisionFilter.category = this._physics.collisionCategories.floor;\r\n            this.gridWalls.left.collisionFilter.category = this._physics.collisionCategories.walls;\r\n            this.gridWalls.align(this.grid);\r\n        };\r\n        Gameplay.prototype.addInitialItems = function () {\r\n            var _this = this;\r\n            this.generator.getInitialItems(game.GameGrid.ROWS - 1).map(function (itemConfig) {\r\n                var newItem = _this.factory.create(__assign({ itemType: itemConfig.type, row: itemConfig.row, column: itemConfig.column }, itemConfig.config));\r\n                _this.factory.postCreationCallback(newItem);\r\n            });\r\n        };\r\n        Gameplay.prototype.addFox = function () {\r\n            this.fox = new game.Fox(this);\r\n            this.fox.x = this.grid.x + this.grid.getWidth() / 2;\r\n            this.fox.y = this.grid.y + this.grid.getHeight();\r\n            this.add.existing(this.fox);\r\n        };\r\n        Gameplay.prototype.addFoxTalkBubble = function () {\r\n            this.foxTalkBubble = new game.FoxTalkBubble(this);\r\n            this.foxTalkBubble.kill();\r\n            this.add.existing(this.foxTalkBubble);\r\n        };\r\n        Gameplay.prototype.showFoxTalkBubble = function () {\r\n            this.foxTalkBubble.x = this.fox.x - 66;\r\n            this.foxTalkBubble.y = this.fox.y - 134;\r\n            this.foxTalkBubble.revive();\r\n            this.foxTalkBubble.show();\r\n        };\r\n        Gameplay.prototype.addBallTrails = function () {\r\n            var options = {\r\n                color: 0xfaf1bf,\r\n                alpha: 0.44,\r\n                length: 8,\r\n                accuracy: 12,\r\n            };\r\n            this.ballTrails = new game.TrailsCanvas(this, options);\r\n            this.ballTrails.setDepth(game.GameplayDepth.BALL_TRAILS);\r\n            this.ballTrails.kill();\r\n            this.add.existing(this.ballTrails);\r\n        };\r\n        Gameplay.prototype.addIdleBalls = function (ballsNum) {\r\n            var _this = this;\r\n            this.idleBalls = _.times(ballsNum, function () {\r\n                var idleBall = _this.pools.idleBalls.pop();\r\n                idleBall.y = _this.getIdleBallPositionY();\r\n                idleBall.show();\r\n                return idleBall;\r\n            });\r\n        };\r\n        Gameplay.prototype.addBalls = function (ballsNum) {\r\n            var _this = this;\r\n            _.times(ballsNum, function () {\r\n                _this.addBall();\r\n            });\r\n        };\r\n        Gameplay.prototype.addBall = function () {\r\n            var options = {\r\n                depth: game.GameplayDepth.BALLS,\r\n                subDepth: this.balls.length,\r\n                worldBounds: this.getWorldBounds(),\r\n                collisionGroup: this._physics.collisionGroups.balls,\r\n                collisionCategory: this._physics.collisionCategories.balls,\r\n            };\r\n            var ball = new game.Ball(this, options);\r\n            ball.kill();\r\n            ball.setPosition(this.grid.getWidth() / 2, this.grid.getHeight());\r\n            this.add.existing(ball);\r\n            this.balls.push(ball);\r\n            this.createBallChargedEmitter(ball);\r\n            // this.createBallSpinnedEmitter(ball)\r\n            this.ballTrails.addTrail(ball);\r\n            return ball;\r\n        };\r\n        Gameplay.prototype.getWorldBounds = function () {\r\n            return new Phaser.Geom.Rectangle(0, 0, this.grid.getWidth(), this.grid.getHeight());\r\n        };\r\n        Gameplay.prototype.addTrajectory = function () {\r\n            var bouncesNum = this.getTrajectoryBounces();\r\n            this.trajectory = new game.Trajectory(this);\r\n            this.trajectory.setBounces(bouncesNum);\r\n            this.trajectory.setDepth(game.GameplayDepth.TRAJECTORY);\r\n            this.add.existing(this.trajectory);\r\n        };\r\n        Gameplay.prototype.getTrajectoryBounces = function () {\r\n            var bouncesNum = utils.NetUtil.getParam(\"trajectory\");\r\n            if (bouncesNum !== null) {\r\n                return parseInt(bouncesNum) || 1;\r\n            }\r\n            if (this.levelNumber < 5) {\r\n                return 2;\r\n            }\r\n            return 1;\r\n        };\r\n        Gameplay.prototype.addTutorial = function () {\r\n            if (this.levelNumber !== 1) {\r\n                return;\r\n            }\r\n            var tutorial = new game.TutorialHand(this);\r\n            tutorial.x = this.getFieldWidth() / 2;\r\n            tutorial.y = this.fox.y - game.GameGrid.CELL_SIZE * 4.5;\r\n            tutorial.show(370);\r\n            this.add.existing(tutorial);\r\n            var blockHint = new game.BlockHint(this);\r\n            this.add.existing(blockHint);\r\n        };\r\n        Gameplay.prototype.addWarningLine = function () {\r\n            this.warningLine = this.add.tileSprite(0, 0, 0, 0, \"gameplay\", \"warning_line\");\r\n            this.warningLine.x = this.getFieldWidth() / 2;\r\n            this.warningLine.y = game.GameGrid.CELL_SIZE * 7;\r\n            this.warningLine.setDepth(game.GameplayDepth.LOSE_TUTORIAL);\r\n            this.warningLine.kill();\r\n            this.add.existing(this.warningLine);\r\n        };\r\n        Gameplay.prototype.addTurnCompleteFx = function () {\r\n            this.turnCompleteFx = new game.TurnCompleteFx(this);\r\n            this.turnCompleteFx.setDepth(game.GameplayDepth.TURN_POINTS_FX);\r\n            this.turnCompleteFx.kill();\r\n            this.turnCompleteFx.on(game.TurnCompleteFxEvent.CLEAR_BONUS_SHOW, this.onClearBonusShow, this);\r\n            this.add.existing(this.turnCompleteFx);\r\n        };\r\n        Gameplay.prototype.onClearBonusShow = function () {\r\n            var worldIndexStr = this.levelConfig.background.split(\"_\").pop();\r\n            var worldIndex = parseInt(worldIndexStr) || 1;\r\n            var targetAlpha = worldIndex === 3 ? 0.33 : 0.5;\r\n            this.grid.showClearGridFx(targetAlpha, 0);\r\n            if (this.cache.audio.has(game.GameSoundKey.CLEAR_FIELD)) {\r\n                this.sound.play(game.GameSoundKey.CLEAR_FIELD, { volume: 0.33 });\r\n            }\r\n        };\r\n        Gameplay.prototype.addLevelCompleteFx = function () {\r\n            this.levelCompleteFx = new game.LevelCompleteFx(this, this.isLastLevel());\r\n            this.levelCompleteFx.setDepth(game.GameplayDepth.LEVEL_COMPLETE_FX);\r\n            this.levelCompleteFx.kill();\r\n            this.add.existing(this.levelCompleteFx);\r\n        };\r\n        Gameplay.prototype.isLastLevel = function () {\r\n            var levelNumbers = this.game.levelConfigs.getLevelNumbers();\r\n            return levelNumbers.indexOf(this.levelNumber) === levelNumbers.length - 1;\r\n        };\r\n        Gameplay.prototype.autoThrow = function () {\r\n            var _this = this;\r\n            if (!game.Main.development) {\r\n                return;\r\n            }\r\n            var autoThrowConfig = this.levelConfig.autoThrow;\r\n            if (autoThrowConfig.enabled === false) {\r\n                return;\r\n            }\r\n            this.time.delayedCall(autoThrowConfig.delay, function () {\r\n                var x = autoThrowConfig.x;\r\n                var y = _this.grid.getHeight() + autoThrowConfig.y;\r\n                _this.startTurn({ x: x, y: y });\r\n                if (autoThrowConfig.fastForward) {\r\n                    _this.time.delayedCall(100, function () {\r\n                        _this.fastForward.enable();\r\n                    });\r\n                }\r\n            });\r\n        };\r\n        Gameplay.prototype.tryToDropBalls = function () {\r\n            var hasBallsInAir = this.balls.some(function (ball) { return ball.isThown; });\r\n            if (hasBallsInAir === false) {\r\n                return;\r\n            }\r\n            var areItemsLeft = this.items.length > 0;\r\n            if (areItemsLeft === false) {\r\n                this.dropBallsToFloor();\r\n                return;\r\n            }\r\n            var noCollectableBalls = this.getItemsByType(game.ItemType.COLLECTABLE_BALL).length === 0;\r\n            var noBlocks = this.items.every(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType) === false; });\r\n            if (noCollectableBalls && noBlocks) {\r\n                var activeable = this.items.filter(function (item) { return item.itemType === game.ItemType.LIGHTNING || item.itemType === game.ItemType.SPINNER; });\r\n                var allActivated = activeable.every(function (item) { return item.wasActivated; });\r\n                if (allActivated) {\r\n                    this.dropBallsToFloor();\r\n                }\r\n            }\r\n        };\r\n        Gameplay.prototype.getItemsByType = function (itemType) {\r\n            return this.items.filter(function (item) { return item.itemType === itemType; });\r\n        };\r\n        Gameplay.prototype.showExplosion = function (x, y, initialScale) {\r\n            var _this = this;\r\n            var animation = this.animsPools.explosions.getInactive();\r\n            var explosion = new game.Explosion(this, animation);\r\n            explosion.once(\"destroy\", function () { return _this.animsPools.explosions.recycleActive(animation); });\r\n            explosion.x = x;\r\n            explosion.y = y;\r\n            explosion.scale = initialScale;\r\n            explosion.setDepth(game.GameplayDepth.EXPLOSION);\r\n            explosion.playScaleTween();\r\n            this.add.existing(explosion);\r\n        };\r\n        Gameplay.prototype.damageNearbyBlocks = function (source) {\r\n            var _this = this;\r\n            this.items\r\n                .filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); })\r\n                .filter(function (item) { return Distance.Between(source.x, source.y, item.x, item.y) <= source.explosionRadius; })\r\n                .forEach(function (block) {\r\n                var isFutureBlock = _this.turn.futureItems.some(function (futureItem) { return futureItem.item === block; });\r\n                if (isFutureBlock) {\r\n                    return;\r\n                }\r\n                block.health.kill();\r\n            });\r\n        };\r\n        Gameplay.prototype.destroyNearbyItems = function (bomb) {\r\n            this.items\r\n                .filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType) === false; })\r\n                .filter(function (item) { return Distance.Between(bomb.x, bomb.y, item.x, item.y) <= bomb.explosionRadius; })\r\n                .forEach(function (item) {\r\n                item.destroy();\r\n            });\r\n        };\r\n        Gameplay.prototype.showDamageValueFx = function (damage, block) {\r\n            var fx = this.pools.blockDamageFXs.getFirstDead(true);\r\n            if (fx) {\r\n                fx.setText(damage.toString());\r\n                fx.x = block.x;\r\n                fx.y = Phaser.Display.Bounds.GetTop(block);\r\n                fx.reset();\r\n                fx.show();\r\n            }\r\n        };\r\n        Gameplay.prototype.showCollectedBlockFx = function (block) {\r\n            var _this = this;\r\n            var nonCollectables = [game.ItemType.SHATTER_BLOCK, game.ItemType.PINATA_BLOCK, game.ItemType.DYNAMITE_BLOCK];\r\n            var isNonCollectable = nonCollectables.includes(block.itemType);\r\n            if (isNonCollectable) {\r\n                this.gui.blocksLabel.incrementCurrent();\r\n                return;\r\n            }\r\n            this.time.delayedCall(200, function () {\r\n                _this.gui.onTargetBlockKilled(block);\r\n                block.forceKill();\r\n            });\r\n        };\r\n        Gameplay.prototype.isTargetItemType = function (itemType) {\r\n            var targetItemType = this.levelConfig.generator.targetItemType;\r\n            if (targetItemType === game.ItemType.SHATTER_BLOCK) {\r\n                return itemType === game.ItemType.SHATTER_BLOCK || itemType === game.ItemType.SHATTER_BLOCK_PIECE;\r\n            }\r\n            return itemType === targetItemType;\r\n        };\r\n        Gameplay.prototype.checkTurnComplete = function () {\r\n            if (this.turn.checkComplete()) {\r\n                this.onTurnComplete();\r\n            }\r\n        };\r\n        Gameplay.prototype.onTurnComplete = function () {\r\n            var _this = this;\r\n            if (this.isSceneShutdown()) {\r\n                return;\r\n            }\r\n            this.fastForward.disable();\r\n            this.gui.bottomPanel.hideTurnButtons();\r\n            this.events.emit(GameplayEvent.TURN_COMPLETE);\r\n            var hasBlocksOnLoseRow = this.getBlocks().some(function (block) { return block.grid.getRow() === game.GameGrid.LOSE_ROW; });\r\n            var lastRowItems = this.isMoveDownLocked || hasBlocksOnLoseRow\r\n                ? []\r\n                : this.clearLastRow();\r\n            // noinspection TypeScriptValidateTypes\r\n            var pendingDestroyItems = _.uniq(__spreadArrays(lastRowItems, this.turn.lightningsActivated, this.turn.spinnersActivated));\r\n            if (pendingDestroyItems.length === 0) {\r\n                this.onTurnFullyComplete();\r\n                return;\r\n            }\r\n            var destroyedItemsNum = 0;\r\n            pendingDestroyItems.forEach(function (item) {\r\n                item.kill();\r\n                item.once(Phaser.GameObjects.Events.DESTROY, function () {\r\n                    if (++destroyedItemsNum === pendingDestroyItems.length) {\r\n                        _this.onTurnFullyComplete();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Gameplay.prototype.getBlocks = function () {\r\n            return this.items.filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); });\r\n        };\r\n        Gameplay.prototype.onTurnFullyComplete = function () {\r\n            if (this.isSceneShutdown()) {\r\n                return;\r\n            }\r\n            var clearFieldBonus = this.turn.blocksKilledNum >= 3 && this.isGridEmpty();\r\n            var totalPoints = this.turn.points * (clearFieldBonus ? 2 : 1);\r\n            this.levelData.points += totalPoints;\r\n            this.gui.pointsLabel.updatePoints(this.levelData.points);\r\n            this.showTurnCompleteFx(this.turn.blocksKilledNum, this.turn.points, clearFieldBonus);\r\n            var turnCompleteAnimationsDelay = clearFieldBonus ? 1800 : 400;\r\n            this.time.delayedCall(turnCompleteAnimationsDelay, this.onTurnCompleteAnimationsComplete, null, this);\r\n        };\r\n        Gameplay.prototype.isSceneShutdown = function () {\r\n            return this.scene.settings.status === Phaser.Scenes.SHUTDOWN;\r\n        };\r\n        Gameplay.prototype.onTurnCompleteAnimationsComplete = function () {\r\n            var _this = this;\r\n            var isGameOver = this.isMoveDownLocked === false && this.checkForGameOver();\r\n            if (isGameOver) {\r\n                this.onLevelFailed();\r\n                return;\r\n            }\r\n            var isGameComplete = this.checkGameComplete();\r\n            if (isGameComplete) {\r\n                this.onLevelComplete();\r\n                return;\r\n            }\r\n            this.adjustFirstLandedBallMark();\r\n            this.fox.moveTo(this.turn.firstLandedBallMark);\r\n            this.idleBallsAligner.placeIdleBallsAround(this.idleBalls, this.turn.firstLandedBallMark);\r\n            if (this.isMoveDownLocked) {\r\n                var isFieldClear = this.isGridEmpty();\r\n                if (isFieldClear) {\r\n                    var moveDownRows = this.calculateMoveDownShift();\r\n                    this.generateNewItems(moveDownRows);\r\n                    this.completeTurn();\r\n                }\r\n                else {\r\n                    this.playStopActiveTween();\r\n                    this.playStopActiveSound();\r\n                    this.completeTurn();\r\n                }\r\n            }\r\n            else {\r\n                var moveDownRows_1 = this.calculateMoveDownShift();\r\n                var moveDownDuration = 300;\r\n                this.playMoveItemsDownSound();\r\n                this.moveItemsDown(moveDownRows_1, moveDownDuration);\r\n                this.time.delayedCall(moveDownDuration, function () {\r\n                    _this.playAlarmSound();\r\n                    _this.generateNewItems(moveDownRows_1);\r\n                    _this.completeTurn();\r\n                });\r\n            }\r\n        };\r\n        Gameplay.prototype.playStopActiveTween = function () {\r\n            this.tweens.add({\r\n                targets: this.items,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"+=30\",\r\n                yoyo: true,\r\n            });\r\n        };\r\n        Gameplay.prototype.playStopActiveSound = function () {\r\n            if (this.cache.audio.has(game.GameSoundKey.BOOSTER_STOP_ACTIVE)) {\r\n                this.sound.play(game.GameSoundKey.BOOSTER_STOP_ACTIVE, { volume: 0.33, delay: 0.33 });\r\n            }\r\n        };\r\n        Gameplay.prototype.completeTurn = function () {\r\n            this.sleepItems();\r\n            this.turn.complete();\r\n            this.gui.showBoostersPanel();\r\n            this.events.emit(GameplayEvent.TURN_FULLY_COMPLETE, this);\r\n        };\r\n        Gameplay.prototype.adjustFirstLandedBallMark = function () {\r\n            // if we force drop balls before any of them landed\r\n            if (this.turn.firstLandedBall === null) {\r\n                this.turn.firstLandedBallMark = this.fox.x;\r\n                return;\r\n            }\r\n            var margin = game.Ball.RADIUS * 2;\r\n            var left = this.grid.x + margin;\r\n            var right = this.grid.x + this.grid.getWidth() - margin;\r\n            this.turn.firstLandedBallMark = Phaser.Math.Clamp(this.turn.firstLandedBallMark, left, right);\r\n        };\r\n        Gameplay.prototype.checkForGameOver = function () {\r\n            return this.items\r\n                .filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); })\r\n                .some(function (item) { return item.grid.getRow() === game.GameGrid.LOSE_ROW; });\r\n        };\r\n        Gameplay.prototype.checkGameComplete = function () {\r\n            return this.levelData.targetBlocksKilled >= this.levelData.targetBlocksRequired;\r\n        };\r\n        Gameplay.prototype.onLevelFailed = function () {\r\n            var _this = this;\r\n            var initialDelay = 390;\r\n            this.time.delayedCall(initialDelay + 50, function () {\r\n                _this.showFoxWorried();\r\n            });\r\n            this.time.delayedCall(initialDelay, function () {\r\n                _this.playBlockJumpOnFox();\r\n            });\r\n            this.time.delayedCall(initialDelay + 2400, function () {\r\n                if (game.Main.areRewardAdsEnabled === false || _this.secondChance.wasUsed) {\r\n                    _this.showLevelFailedScreen();\r\n                    _this.analytics.sendLevelFail(_this.levelNumber, _this.levelData.targetBlocksRequired - _this.levelData.targetBlocksKilled);\r\n                }\r\n                else {\r\n                    _this.gui.secondChanceScreen.closeButton.once(ButtonEvent.PRESS, _this.showLevelFailedScreen, _this);\r\n                    _this.gui.showSecondChanceScreen(_this.levelData.targetBlocksKilled, _this.levelData.targetBlocksRequired);\r\n                }\r\n            });\r\n            this.time.delayedCall(initialDelay + 3000, function () {\r\n                _this.scene.pause();\r\n            });\r\n        };\r\n        Gameplay.prototype.showFoxWorried = function () {\r\n            if (this.cache.audio.has(game.GameSoundKey.FOX_OOH)) {\r\n                this.sound.play(game.GameSoundKey.FOX_OOH, { volume: 1 });\r\n            }\r\n            this.fox.showLoseFrame();\r\n        };\r\n        Gameplay.prototype.playBlockJumpOnFox = function () {\r\n            var block = new game.BlockKing(this);\r\n            block.x = this.fox.x;\r\n            block.y = this.fox.y;\r\n            block.setDepth(game.GameplayDepth.JUMP_ON_FOX_BLOCK);\r\n            block.once(game.BlockKingEvent.JUMP_ON_FOX_COMPLETE, this.onJumpOnFoxComplete, this);\r\n            block.jumpOnFox(this.fox.x, this.fox.y);\r\n            this.add.existing(block);\r\n            if (this.cache.audio.has(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH)) {\r\n                this.sound.play(game.GameSoundKey.BLOCK_COLLECTED_WHOOSH, { volume: 0.66, delay: 0 });\r\n            }\r\n        };\r\n        Gameplay.prototype.onJumpOnFoxComplete = function (block) {\r\n            if (this.cache.audio.has(game.GameSoundKey.DUCK_SCREAM)) {\r\n                this.sound.play(game.GameSoundKey.DUCK_SCREAM, { volume: 0.66 });\r\n            }\r\n            if (this.cache.audio.has(game.GameSoundKey.BLOCK_STOMP_HIT)) {\r\n                this.sound.play(game.GameSoundKey.BLOCK_STOMP_HIT, { volume: 0.8 });\r\n            }\r\n            this.cameras.main.shake(433, 0.018, true);\r\n            this.showDustCloud(block);\r\n            this.throwFox(block);\r\n            this.throwLosingBalls(block.x);\r\n        };\r\n        Gameplay.prototype.showDustCloud = function (block) {\r\n            var dust = new game.DustCloud(this);\r\n            dust.x = block.x + block.displayWidth * (0.5 - block.originX);\r\n            dust.y = block.y + block.displayHeight * (1 - block.originY) - 20;\r\n            dust.setDepth(game.GameplayDepth.JUMP_ON_FOX_BLOCK_DUST);\r\n            this.add.existing(dust);\r\n        };\r\n        Gameplay.prototype.throwFox = function (block) {\r\n            this.fox.kill();\r\n            var thrownFoxFrame = this.textures.getFrame(\"gameplay\", \"fox_lost\");\r\n            var thrownFox = new game.ThrownFox(this.matter.world, thrownFoxFrame);\r\n            thrownFox.x = block.x;\r\n            thrownFox.y = block.y;\r\n            thrownFox.setCollidesWith(0);\r\n            thrownFox.setDepth(game.GameplayDepth.FOX_THROWN);\r\n            thrownFox.throw();\r\n            thrownFox.destroyAfter(1300);\r\n            this.add.existing(thrownFox);\r\n        };\r\n        Gameplay.prototype.throwLosingBalls = function (stompX) {\r\n            var _this = this;\r\n            this.idleBalls.forEach(function (ball, index) {\r\n                ball.kill();\r\n                var throwDirection = ball.x > stompX ? Phaser.RIGHT : Phaser.LEFT;\r\n                var losingBall = new game.LosingBall(_this, ball);\r\n                losingBall.x = ball.x;\r\n                losingBall.y = ball.y - ball.height / 2;\r\n                losingBall.setCollidesWith(0);\r\n                losingBall.setDepth(game.GameplayDepth.LOSING_BALLS);\r\n                losingBall.throw(throwDirection);\r\n                losingBall.destroyAfter(1300);\r\n                _this.add.existing(losingBall);\r\n            });\r\n        };\r\n        Gameplay.prototype.showLevelFailedScreen = function () {\r\n            var data = this.getLevelFailedData();\r\n            this.gui.onLevelFailed(data);\r\n            this.isGameplayStopped = true;\r\n            this.poki.sdk.gameplayStop();\r\n        };\r\n        Gameplay.prototype.getLevelFailedData = function () {\r\n            return {\r\n                levelNumber: this.levelNumber,\r\n                targetBlocksType: this.levelConfig.generator.targetItemType,\r\n                blocksRequired: this.levelData.targetBlocksRequired,\r\n                blocksKilled: this.levelData.targetBlocksKilled,\r\n                score: this.levelData.points,\r\n            };\r\n        };\r\n        Gameplay.prototype.onLevelComplete = function () {\r\n            var _this = this;\r\n            this.isGameplayStopped = true;\r\n            this.poki.sdk.gameplayStop();\r\n            this.analytics.sendLevelComplete(this.levelNumber, this.getEarnedStarsNum(this.levelData.points, this.levelConfig.stars));\r\n            this.saveLevelResult();\r\n            this.hideRemainingItems();\r\n            this.gui.boostersPanel.disableInput();\r\n            var animationsDelay = 220;\r\n            this.time.delayedCall(0, function () {\r\n                _this.fox.playHappyAnimation();\r\n                _this.idleBallsAligner.placeIdleBallsAround(_this.idleBalls, _this.fox.x);\r\n            });\r\n            this.time.delayedCall(animationsDelay, function () {\r\n                _this.launchWinningBalls();\r\n            });\r\n            var winningBallsDelay = 500 + Math.min(5, this.idleBalls.length) * 133;\r\n            var levelCompleteDelay = animationsDelay + winningBallsDelay;\r\n            this.time.delayedCall(levelCompleteDelay, function () {\r\n                _this.showLevelCompleteFx();\r\n                _this.poki.sdk.happyTime(1);\r\n            });\r\n            this.time.delayedCall(levelCompleteDelay + 1600, function () {\r\n                _this.showLevelCompleteScreen();\r\n            });\r\n            this.time.delayedCall(levelCompleteDelay + 2500, function () {\r\n                _this.scene.pause();\r\n            });\r\n        };\r\n        Gameplay.prototype.hideRemainingItems = function () {\r\n            var _this = this;\r\n            this.items.forEach(function (item) {\r\n                item.on(game.HideEvent.COMPLETE, _this.showItemDestroyFx.bind(_this, item.x, item.y));\r\n                item.hideOnLevelComplete(300);\r\n            });\r\n        };\r\n        Gameplay.prototype.launchWinningBalls = function () {\r\n            var _this = this;\r\n            this.idleBalls.slice(0).forEach(function (idleBall, index) {\r\n                var launchDelay = index * 133;\r\n                var launchSide = idleBall.x > _this.grid.getWidth() / 2 ? Phaser.LEFT : Phaser.RIGHT;\r\n                var winningBall = new game.WinningBall(_this);\r\n                winningBall.x = idleBall.x;\r\n                winningBall.y = idleBall.y - idleBall.height / 2;\r\n                winningBall.alpha = 0;\r\n                winningBall.once(game.WinningBallEvent.LAUNCH, _this.onWinningBallLaunch.bind(_this, idleBall, winningBall));\r\n                winningBall.once(game.WinningBallEvent.EXPLODE, _this.onWinningBallExplode, _this);\r\n                winningBall.setDepth(game.GameplayDepth.WINNING_BALLS);\r\n                winningBall.launch(launchDelay, launchSide);\r\n                _this.add.existing(winningBall);\r\n            });\r\n        };\r\n        Gameplay.prototype.onWinningBallLaunch = function (idleBall, winningBall) {\r\n            idleBall.kill();\r\n            winningBall.alpha = 1;\r\n            if (this.cache.audio.has(game.GameSoundKey.WINNING_BALL_WHOOSH)) {\r\n                this.sound.play(game.GameSoundKey.WINNING_BALL_WHOOSH, { volume: 0.66, rate: 0.82 });\r\n            }\r\n        };\r\n        Gameplay.prototype.onWinningBallExplode = function (ball) {\r\n            this.emitters.collectableBallFeathers.setPosition(ball.x, ball.y);\r\n            this.emitters.collectableBallFeathers.explode(25, ball.x, ball.y);\r\n            this.audio.winningBallExplode();\r\n        };\r\n        Gameplay.prototype.showLevelCompleteFx = function () {\r\n            this.levelCompleteFx.x = this.grid.getWidth() / 2;\r\n            this.levelCompleteFx.y = this.grid.y + this.grid.getHeight() * 0.2;\r\n            this.levelCompleteFx.revive();\r\n            this.levelCompleteFx.show();\r\n            if (this.cache.audio.has(game.GameSoundKey.LEVEL_COMPLETE_TEXT)) {\r\n                this.sound.play(game.GameSoundKey.LEVEL_COMPLETE_TEXT, { volume: 1, delay: 0.1 });\r\n            }\r\n        };\r\n        Gameplay.prototype.saveLevelResult = function () {\r\n            var prevHighscore = this.getLevelHighscore(this.levelNumber);\r\n            var newHighscore = Math.max(prevHighscore, this.levelData.points);\r\n            var newResult = {\r\n                complete: true,\r\n                stars: this.getEarnedStarsNum(this.levelData.points, this.levelConfig.stars),\r\n                highscore: newHighscore,\r\n            };\r\n            this.game.store.saveLevelResult(this.levelNumber, newResult);\r\n        };\r\n        Gameplay.prototype.getEarnedStarsNum = function (points, starPoints) {\r\n            return _.findLastIndex(starPoints, function (star) { return (points >= star); }) + 1;\r\n        };\r\n        Gameplay.prototype.getLevelHighscore = function (levelNumber) {\r\n            var levelResult = this.game.store.getLevelResult(levelNumber);\r\n            if (levelResult) {\r\n                return levelResult.highscore;\r\n            }\r\n            return 0;\r\n        };\r\n        Gameplay.prototype.showLevelCompleteScreen = function () {\r\n            var data = {\r\n                levelNumber: this.levelNumber,\r\n                stars: this.getEarnedStarsNum(this.levelData.points, this.levelConfig.stars),\r\n                score: this.levelData.points,\r\n                highscore: this.getLevelHighscore(this.levelNumber),\r\n                blocksType: this.levelConfig.generator.targetItemType,\r\n                blocksNum: this.levelData.targetBlocksKilled,\r\n            };\r\n            this.gui.onLevelComplete(data);\r\n        };\r\n        Gameplay.prototype.clearLastRow = function () {\r\n            var itemTypesToRemove = [game.ItemType.SPINNER, game.ItemType.LIGHTNING, game.ItemType.COLLECTABLE_BALL];\r\n            return this.items.filter(function (item) { return itemTypesToRemove\r\n                .includes(item.itemType); })\r\n                .filter(function (item) { return item.grid.getRow() === game.GameGrid.LOSE_ROW; });\r\n        };\r\n        Gameplay.prototype.calculateMoveDownShift = function () {\r\n            var maxShift = 4;\r\n            var isGridEmpty = this.isGridEmpty();\r\n            if (isGridEmpty) {\r\n                return maxShift;\r\n            }\r\n            var areBlocksLeft = this.items.some(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); });\r\n            if (areBlocksLeft) {\r\n                return 1;\r\n            }\r\n            var bottomItem = this.getVeryBottomItem();\r\n            var bottomOccupiedRow = bottomItem.grid.getRow();\r\n            var shift = bottomOccupiedRow - game.GameGrid.LOSE_ROW;\r\n            return Math.min(maxShift, shift);\r\n        };\r\n        Gameplay.prototype.getVeryTopItem = function () {\r\n            return _.maxBy(this.items, (function (item) {\r\n                return item.grid.getRow();\r\n            }));\r\n        };\r\n        Gameplay.prototype.getVeryBottomItem = function () {\r\n            return _.minBy(this.items, (function (item) {\r\n                return item.grid.getRow();\r\n            }));\r\n        };\r\n        Gameplay.prototype.playMoveItemsDownSound = function () {\r\n            if (this.isGridEmpty()) {\r\n                return;\r\n            }\r\n            if (this.cache.audio.has(game.GameSoundKey.MOVE_ITEMS_DOWN)) {\r\n                this.sound.play(game.GameSoundKey.MOVE_ITEMS_DOWN, { volume: 1 });\r\n            }\r\n        };\r\n        Gameplay.prototype.moveItemsDown = function (rows, moveDownDuration) {\r\n            var _this = this;\r\n            var onMoveDownComplete = _.once(function () {\r\n                _this.showWarningLine();\r\n                _this.addLoseTutorial();\r\n            });\r\n            this.items\r\n                .sort(this.sortGridItems.bind(this))\r\n                .reverse()\r\n                .forEach(function (item) {\r\n                var newRow = item.grid.getRow() - rows;\r\n                _this.tweens.add({\r\n                    targets: item,\r\n                    duration: moveDownDuration,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    y: item.y + game.GameGrid.CELL_SIZE * rows,\r\n                    onComplete: function () {\r\n                        _this.onItemMoveDownComplete(item, newRow, onMoveDownComplete);\r\n                    },\r\n                });\r\n            });\r\n        };\r\n        Gameplay.prototype.sortGridItems = function (itemA, itemB) {\r\n            var rowA = itemA.grid.getRow();\r\n            var rowB = itemB.grid.getRow();\r\n            if (rowA === rowB) {\r\n                return itemA.grid.getColumn() - itemB.grid.getColumn();\r\n            }\r\n            return rowA - rowB;\r\n        };\r\n        Gameplay.prototype.onItemMoveDownComplete = function (item, row, onMoveDownComplete) {\r\n            var isLastRow = row === 2;\r\n            if (isLastRow === false) {\r\n                return;\r\n            }\r\n            var isBlock = game.ItemTypeUtil.isBlockType(item.itemType);\r\n            if (isBlock === false) {\r\n                return;\r\n            }\r\n            ;\r\n            item.startStomping();\r\n            onMoveDownComplete();\r\n        };\r\n        Gameplay.prototype.showWarningLine = function () {\r\n            this.warningLine.revive();\r\n            this.warningLine.alpha = 0;\r\n            this.tweens.add({\r\n                targets: this.warningLine,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        Gameplay.prototype.addLoseTutorial = function () {\r\n            var isLoseTutorialComplete = this.game.store.getBoolean(game.GameStoreKey.LOSE_TUTORIAL_COMPLETE);\r\n            if (isLoseTutorialComplete) {\r\n                return;\r\n            }\r\n            var loseTutorial = new game.LoseTutorial(this);\r\n        };\r\n        Gameplay.prototype.playAlarmSound = function () {\r\n            var blocks = this.items.filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); });\r\n            var onBottomRow = blocks.some(function (block) { return block.grid.getRow() === game.GameGrid.LOSE_ROW; });\r\n            if (onBottomRow) {\r\n                if (this.cache.audio.has(game.GameSoundKey.FOX_UH_OH_1)) {\r\n                    this.sound.play(game.GameSoundKey.FOX_UH_OH_1, { volume: 1 });\r\n                }\r\n            }\r\n        };\r\n        Gameplay.prototype.generateNewItems = function (rowsToGenerate) {\r\n            var _this = this;\r\n            var isTopRowBusy = this.items.some(function (item) { return (item.grid.getRow() === game.GameGrid.ROWS - 2); });\r\n            if (isTopRowBusy) {\r\n                return;\r\n            }\r\n            var topEmptyRows = this.getTopEmptyRowsNum();\r\n            var rowsToFill = Math.min(topEmptyRows, rowsToGenerate);\r\n            var newItemsConfigs = this.generator.getNextRows(rowsToFill);\r\n            if (newItemsConfigs.length === 0) {\r\n                return;\r\n            }\r\n            // noinspection TypeScriptValidateTypes\r\n            var startRow = _.minBy(newItemsConfigs, \"row\").row;\r\n            newItemsConfigs.map(function (itemConfig) {\r\n                var newRowOffset = itemConfig.row - startRow;\r\n                var newRow = game.GameGrid.ROWS - 1 - rowsToFill + newRowOffset;\r\n                var newItem = _this.factory.create(__assign({ itemType: itemConfig.type, column: itemConfig.column, row: newRow }, itemConfig.config));\r\n                _this.showNewlyGeneratedItem(newItem);\r\n                return newItem;\r\n            });\r\n        };\r\n        Gameplay.prototype.getTopEmptyRowsNum = function () {\r\n            var topItem = this.getVeryTopItem();\r\n            if (topItem) {\r\n                var topRow = topItem.grid.getRow();\r\n                return game.GameGrid.ROWS - 2 - topRow;\r\n            }\r\n            return game.GameGrid.ROWS - 2;\r\n        };\r\n        Gameplay.prototype.showNewlyGeneratedItem = function (newItem) {\r\n            var _this = this;\r\n            newItem.alpha = 0;\r\n            newItem.scale = 0.66;\r\n            this.tweens.add({\r\n                targets: newItem,\r\n                scale: { value: 1, duration: 300, ease: Phaser.Math.Easing.Back.Out },\r\n                alpha: { value: 1, duration: 150, ease: Phaser.Math.Easing.Cubic.Out },\r\n                onComplete: function () {\r\n                    _this.factory.postCreationCallback(newItem);\r\n                },\r\n            });\r\n        };\r\n        Gameplay.prototype.isGridEmpty = function () {\r\n            return this.items.length === 0;\r\n        };\r\n        Gameplay.prototype.sleepItems = function () {\r\n            this.items.forEach(function (item) { return item.setToSleep(); });\r\n        };\r\n        Gameplay.prototype.showIdleBall = function (x) {\r\n            var idleBall = this.idleBalls.find(function (idleBall) { return idleBall.active === false && idleBall.scheduledForLaunch === false; });\r\n            if (!idleBall) {\r\n                idleBall = this.idleBalls.find(function (ball) { return ball.isHiding; });\r\n                if (idleBall) {\r\n                    idleBall.stopHideTween();\r\n                }\r\n                else {\r\n                    this.addTurnStateToRavenExtraContext();\r\n                }\r\n            }\r\n            idleBall.setPosition(x, this.getIdleBallPositionY());\r\n            idleBall.show();\r\n            idleBall.slightlyMoveAside(x, this.grid)\r\n                .on(Phaser.Tweens.Events.TWEEN_COMPLETE, this.onIdleBallReady, this);\r\n        };\r\n        Gameplay.prototype.addTurnStateToRavenExtraContext = function () {\r\n            var turnState = {\r\n                inProgress: this.turn.inProgress(),\r\n                idleBallsTotal: this.idleBalls.length,\r\n                idleBallsActive: this.idleBalls.filter(function (ball) { return ball.active; }).length,\r\n                idleBallsScheduled: this.idleBalls.filter(function (ball) { return ball.scheduledForLaunch; }).length,\r\n                ballsThrown: this.turn.ballsThrownNum,\r\n                ballsLanded: this.turn.ballsLandedNum,\r\n                fastForward: this.turn.fastForwarded,\r\n                dropBalls: this.turn.ballsDropped,\r\n            };\r\n            this.raven.addExtraContext({ turnState: turnState });\r\n        };\r\n        Gameplay.prototype.onIdleBallReady = function () {\r\n            this.turn.ballsLandedNum++;\r\n            this.checkTurnComplete();\r\n        };\r\n        Gameplay.prototype.emitFeathers = function (num, x, y) {\r\n            this.emitters.feathers.explode(num, x, y);\r\n        };\r\n        Gameplay.prototype.addIdleBall = function (x) {\r\n            var idleBall = this.getIdleBall();\r\n            idleBall.x = x;\r\n            idleBall.y = this.getIdleBallPositionY();\r\n            idleBall.show();\r\n            this.add.existing(idleBall);\r\n            this.idleBalls.push(idleBall);\r\n        };\r\n        Gameplay.prototype.getIdleBall = function () {\r\n            var isPoolEmtpy = this.pools.idleBalls.length === 0;\r\n            if (isPoolEmtpy) {\r\n                var newBall = this.pools.createNewIdleBall();\r\n                var newShadow = this.pools.createNewIdleBallShadow(newBall);\r\n                return newBall;\r\n            }\r\n            return this.pools.idleBalls.pop();\r\n        };\r\n        Gameplay.prototype.getIdleBallPositionY = function () {\r\n            return this.grid.getHeight() + 5;\r\n        };\r\n        Gameplay.prototype.showPlusBallFx = function (collectable) {\r\n            var _a;\r\n            var text = (_a = this.game.texts.texts.plus_ball) !== null && _a !== void 0 ? _a : \"+DUCK\";\r\n            var fx = new game.PlusBallFx(this, text);\r\n            fx.x = collectable.x - 5;\r\n            fx.y = this.fox.y - 80;\r\n            fx.setDepth(game.GameplayDepth.PLUS_DUCK_FX);\r\n            fx.show();\r\n            this.add.existing(fx);\r\n        };\r\n        Gameplay.prototype.onPointerDown = function (pointer, objects) {\r\n            if (objects.length > 0) {\r\n                return;\r\n            }\r\n            this.isPointerDown = true;\r\n        };\r\n        Gameplay.prototype.onPointerUp = function (pointer) {\r\n            if (this.isPointerDown === false) {\r\n                return;\r\n            }\r\n            this.isPointerDown = false;\r\n            if (this.turn.inProgress()) {\r\n                return;\r\n            }\r\n            this.startTurn(this.trajectory.trajectoryEnd);\r\n        };\r\n        Gameplay.prototype.startTurn = function (ballsTarget) {\r\n            var throwPosition = this.fox.getHandsPosition();\r\n            var throwRotation = this.getThrowRotation(throwPosition, ballsTarget);\r\n            if (throwRotation >= 0) {\r\n                return;\r\n            }\r\n            this.events.emit(GameplayEvent.TURN_START);\r\n            this.levelData.turnsNum++;\r\n            this.turn.start();\r\n            this.stopStomping();\r\n            this.hideWarningLine();\r\n            this.wakeItems();\r\n            this.startThrowingBalls(throwPosition, throwRotation);\r\n            this.gui.onTurnStart();\r\n        };\r\n        Gameplay.prototype.stopStomping = function () {\r\n            this.items\r\n                .filter(function (item) { return game.ItemTypeUtil.isBlockType(item.itemType); })\r\n                .forEach(function (block) {\r\n                block.stopStomping();\r\n            });\r\n        };\r\n        Gameplay.prototype.hideWarningLine = function () {\r\n            var _this = this;\r\n            this.tweens.killTweensOf(this.warningLine);\r\n            this.tweens.add({\r\n                targets: this.warningLine,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.warningLine.kill();\r\n                },\r\n            });\r\n        };\r\n        Gameplay.prototype.wakeItems = function () {\r\n            this.items.forEach(function (item) {\r\n                item.setAwake();\r\n            });\r\n        };\r\n        Gameplay.prototype.startThrowingBalls = function (start, rotation) {\r\n            var _this = this;\r\n            this.idleBalls.forEach(function (idleBall, index) {\r\n                idleBall.scheduledForLaunch = true;\r\n                // throw balls in reverse order to display them in right depth order\r\n                var ball = _this.balls[_this.balls.length - 1 - index];\r\n                var delay = (index + 1) * 55;\r\n                _this.time.delayedCall(delay, function () {\r\n                    // launch can be canceled when we force drop balls to floor\r\n                    if (idleBall.scheduledForLaunch === false) {\r\n                        return;\r\n                    }\r\n                    _this.doThrowBall(idleBall, ball, start, rotation);\r\n                    _this.turn.ballsThrownNum++;\r\n                    _this.fox.playShotAnimation();\r\n                });\r\n            });\r\n        };\r\n        Gameplay.prototype.doThrowBall = function (idleBall, ball, start, rotation) {\r\n            this.audio.ballThrow();\r\n            idleBall.scheduledForLaunch = false;\r\n            idleBall.hide();\r\n            ball.setPosition(start.x, start.y);\r\n            ball.show();\r\n            ball.throw(rotation);\r\n        };\r\n        Gameplay.prototype.addKeyboardCallbacks = function () {\r\n            this.input.keyboard.on(\"keydown-SPACE\", this.fastForward.enable.bind(this.fastForward));\r\n            this.input.keyboard.on(\"keydown-DOWN\", this.dropBallsToFloorByKey, this);\r\n            if (game.Main.development) {\r\n                this.input.keyboard.on(\"keydown-PAGE_DOWN\", this.moveItemsDownByKey, this);\r\n                this.input.keyboard.on(\"keydown-D\", this._physics.toggleDebug, this._physics);\r\n                this.input.keyboard.on(\"keydown-G\", this.grid.toggleDebug, this.grid);\r\n                this.input.keyboard.on(\"keydown-C\", this.testLevelCompleteScreen, this);\r\n                this.input.keyboard.on(\"keydown-F\", this.testLevelFailedScreen, this);\r\n                this.input.keyboard.on(\"keydown-X\", this.testCompleteAnimations, this);\r\n                this.input.keyboard.on(\"keydown-Z\", this.testFailAnimations, this);\r\n                this.input.keyboard.on(\"keydown-S\", this.worldCopy.toggleSimulation, this.worldCopy);\r\n                this.input.keyboard.on(\"keydown-FORWARD_SLASH\", this.getTurnCompleteReport, this);\r\n                this.input.keyboard.on(\"keydown-UP\", this.applySecondChance, this);\r\n                this.input.keyboard.on(\"keydown-ONE\", this.trajectory.setBounces.bind(this.trajectory, 1));\r\n                this.input.keyboard.on(\"keydown-TWO\", this.trajectory.setBounces.bind(this.trajectory, 2));\r\n                this.input.keyboard.on(\"keydown-THREE\", this.trajectory.setBounces.bind(this.trajectory, 3));\r\n                this.input.keyboard.on(\"keydown-N\", this.putBallsOutsideWorld, this);\r\n            }\r\n        };\r\n        Gameplay.prototype.putBallsOutsideWorld = function () {\r\n            if (this.turn.inProgress() === false) {\r\n                return;\r\n            }\r\n            var bounds = this.getWorldBounds();\r\n            this.balls.forEach(function (ball) {\r\n                if (ball.isThown === false) {\r\n                    return;\r\n                }\r\n                var velocity = ball.body.velocity;\r\n                ball.x = bounds.centerX + 1000 * Phaser.Math.Sign(velocity.x);\r\n                ball.y = bounds.centerY + 1200 * Phaser.Math.Sign(velocity.y);\r\n            });\r\n        };\r\n        Gameplay.prototype.getTurnCompleteReport = function () {\r\n            console.log(this.turn.getCompleteReport(), this.turn.futureItems);\r\n        };\r\n        Gameplay.prototype.moveItemsDownByKey = function () {\r\n            if (this.turn.inProgress()) {\r\n                return;\r\n            }\r\n            if (this.canMoveItemsDown()) {\r\n                this.moveItemsDown(1, 300);\r\n            }\r\n        };\r\n        Gameplay.prototype.canMoveItemsDown = function () {\r\n            // noinspection TypeScriptValidateTypes\r\n            var bottomItem = _.minBy(this.items, function (item) {\r\n                return item.grid.getRow();\r\n            });\r\n            return bottomItem.grid.getRow() > 2;\r\n        };\r\n        Gameplay.prototype.testFailAnimations = function () {\r\n            this.onLevelFailed();\r\n        };\r\n        Gameplay.prototype.testCompleteAnimations = function () {\r\n            this.onLevelComplete();\r\n        };\r\n        Gameplay.prototype.dropBallsToFloor = function () {\r\n            var _this = this;\r\n            if (this.turn.inProgress() === false) {\r\n                return false;\r\n            }\r\n            this.turn.ballsDropped = true;\r\n            this.idleBalls.forEach(function (idleBall) {\r\n                idleBall.scheduledForLaunch = false;\r\n            });\r\n            this.balls.forEach(function (ball) {\r\n                ball.dropToFloor([_this._physics.collisionCategories.floor, _this._physics.collisionCategories.walls, _this._physics.collisionCategories.ceiling]);\r\n            });\r\n            return true;\r\n        };\r\n        Gameplay.prototype.onFastForwardButtonClick = function (fastForwardButton) {\r\n            this.fastForward.enable();\r\n        };\r\n        Gameplay.prototype.dropBallsToFloorByKey = function () {\r\n            var wereDropped = this.dropBallsToFloor();\r\n            if (wereDropped) {\r\n                this.gui.dropBallsButton.disable();\r\n                if (this.cache.audio.has(game.GameSoundKey.DROP_BALLS_DOWN)) {\r\n                    this.sound.play(game.GameSoundKey.DROP_BALLS_DOWN, { volume: 1.25, delay: 0 });\r\n                }\r\n            }\r\n        };\r\n        Gameplay.prototype.adjustTargetItemsNum = function (newItemTypes) {\r\n            var targetItemType = this.levelConfig.generator.targetItemType;\r\n            var additionalTargetItems = newItemTypes.filter(function (itemType) { return itemType === targetItemType; }).length;\r\n            this.updateTargetBlockNum(additionalTargetItems);\r\n        };\r\n        Gameplay.prototype.updateTargetBlockNum = function (delta) {\r\n            if (delta === 0) {\r\n                return;\r\n            }\r\n            this.levelData.targetBlocksRequired += delta;\r\n            this.gui.blocksLabel.updateTotal(this.levelData.targetBlocksRequired);\r\n        };\r\n        Gameplay.prototype.showTurnCompleteFx = function (blocksKilled, points, clearBonus) {\r\n            if (points === 0) {\r\n                return;\r\n            }\r\n            this.turnCompleteFx.x = this.grid.getWidth() / 2;\r\n            this.turnCompleteFx.y = game.GameGrid.CELL_SIZE * 4;\r\n            this.turnCompleteFx.revive();\r\n            this.turnCompleteFx.reset();\r\n            this.turnCompleteFx.updateData(blocksKilled, points, clearBonus);\r\n            this.turnCompleteFx.show();\r\n            if (this.cache.audio.has(game.GameSoundKey.TURN_COMPLETE_TEXT)) {\r\n                this.sound.play(game.GameSoundKey.TURN_COMPLETE_TEXT, { volume: 0.5, delay: 0.2 });\r\n            }\r\n        };\r\n        Gameplay.prototype.createBallChargedEmitter = function (ball) {\r\n            var actualEmitter = this.emitters.createBallChargedEmitter(ball);\r\n            var emitter = new game.BallChargedEmitter(ball, actualEmitter);\r\n        };\r\n        Gameplay.prototype.showRedCopy = function (block) {\r\n            var redCopy = this.pools.blockRedCopies.getFirstDead(true);\r\n            redCopy.setBlock(block);\r\n            redCopy.revive();\r\n            redCopy.playFadeTween();\r\n        };\r\n        Gameplay.prototype.testLevelCompleteScreen = function () {\r\n            var data = {\r\n                levelNumber: this.levelNumber,\r\n                blocksNum: Phaser.Math.RND.between(5, 100),\r\n                blocksType: this.levelConfig.generator.targetItemType,\r\n                score: Phaser.Math.RND.between(1, 10000),\r\n                highscore: Phaser.Math.RND.between(1, 100000),\r\n                stars: Phaser.Math.RND.between(0, 3),\r\n            };\r\n            this.scene.pause();\r\n            this.gui.onLevelComplete(data);\r\n        };\r\n        Gameplay.prototype.testLevelFailedScreen = function () {\r\n            var targetBlocksNum = Phaser.Math.RND.between(5, 100);\r\n            var data = {\r\n                levelNumber: this.levelNumber,\r\n                targetBlocksType: this.levelConfig.generator.targetItemType,\r\n                blocksKilled: Phaser.Math.RND.between(0, targetBlocksNum - 1),\r\n                blocksRequired: targetBlocksNum,\r\n                score: Phaser.Math.RND.between(0, 100000),\r\n            };\r\n            this.scene.pause();\r\n            this.gui.onLevelFailed(data);\r\n        };\r\n        Gameplay.prototype.applySecondChance = function () {\r\n            this.secondChance.once(game.SecondChanceEvent.COMPLETE, this.onSecondChanceComplete, this);\r\n            this.secondChance.apply();\r\n        };\r\n        Gameplay.prototype.onSecondChanceComplete = function () {\r\n            this.analytics.sendDesignEvent(\"SecondChance:Level_\" + _.padStart(this.levelNumber.toString(), 3, \"0\"));\r\n        };\r\n        Gameplay.prototype.onPause = function () {\r\n            this.scene.pause();\r\n            this.isGameplayStopped = true;\r\n            this.poki.sdk.gameplayStop();\r\n        };\r\n        Gameplay.prototype.onResume = function () {\r\n            this.scene.resume();\r\n            this.isGameplayStopped = true;\r\n            this.poki.sdk.gameplayStart();\r\n        };\r\n        Gameplay.prototype.shutdown = function () {\r\n            if (this.isGameplayStopped === false) {\r\n                this.poki.sdk.gameplayStop();\r\n            }\r\n            if (this.boosters) {\r\n                this.boosters.destroy();\r\n                this.boosters = null;\r\n            }\r\n            if (this.worldCopy) {\r\n                this.worldCopy.destroy();\r\n            }\r\n            if (this.audio) {\r\n                this.audio.destroy();\r\n            }\r\n            if (this.fastForward) {\r\n                this.fastForward.destroy();\r\n            }\r\n            this.animsPools.recycle();\r\n        };\r\n        return Gameplay;\r\n    }(Phaser.Scene));\r\n    game.Gameplay = Gameplay;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var IngamePanel = /** @class */ (function (_super) {\r\n        __extends(IngamePanel, _super);\r\n        function IngamePanel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.verticalMargin = 1;\r\n            _this.strokeThickness = 6;\r\n            _this.padding = 24;\r\n            _this.scene.add.existing(_this);\r\n            _this.addBackground();\r\n            _this.addContainer();\r\n            return _this;\r\n        }\r\n        IngamePanel.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, \"gameplay_gui\", \"up_panel\");\r\n            this.background.setOrigin(0.5, 0);\r\n            this.add(this.background);\r\n        };\r\n        IngamePanel.prototype.addContainer = function () {\r\n            this.container = this.scene.add.image(0, 0, \"gameplay_gui\", \"white_rect\");\r\n            this.container.displayWidth = this.background.displayWidth;\r\n            this.container.displayHeight = this.background.displayHeight;\r\n            this.container.alpha = 0;\r\n            this.add(this.container);\r\n        };\r\n        IngamePanel.prototype.getWidth = function () {\r\n            return this.background.width;\r\n        };\r\n        IngamePanel.prototype.getHeight = function () {\r\n            return this.background.height;\r\n        };\r\n        IngamePanel.prototype.getDisplayHeight = function () {\r\n            return this.getHeight() * this.scaleY;\r\n        };\r\n        IngamePanel.prototype.getVeticalOffset = function () {\r\n            return this.container.displayHeight + this.strokeThickness - this.verticalMargin;\r\n        };\r\n        return IngamePanel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.IngamePanel = IngamePanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelLabel = /** @class */ (function (_super) {\r\n        __extends(LevelLabel, _super);\r\n        function LevelLabel(scene, levelNumber) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.baseFontSize = 24;\r\n            _this.name = \"level_label\";\r\n            _this.style = _this.createTextStyle();\r\n            _this.addTitle();\r\n            _this.addNumber(levelNumber);\r\n            return _this;\r\n        }\r\n        LevelLabel.prototype.createTextStyle = function () {\r\n            return {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BLACK,\r\n                fontSize: this.baseFontSize + \"px\",\r\n                color: game.GameplayGui.FONT_COLOR_STR,\r\n                align: \"center\",\r\n            };\r\n        };\r\n        LevelLabel.prototype.addTitle = function () {\r\n            var _a, _b;\r\n            var titleContent = (_b = (_a = this.scene.texts.level) === null || _a === void 0 ? void 0 : _a.toUpperCase()) !== null && _b !== void 0 ? _b : \"LEVEL\";\r\n            this.levelTitle = this.scene.add.text(0, 0, titleContent, this.style);\r\n            this.levelTitle.setOrigin(0);\r\n            this.add(this.levelTitle);\r\n            var maxWidth = 90;\r\n            this.levelTitle.scale = Math.min(1, maxWidth / this.levelTitle.width);\r\n        };\r\n        LevelLabel.prototype.addNumber = function (levelNumber) {\r\n            var fontSize = Math.round(this.baseFontSize * 1.7);\r\n            var numberStyle = __assign(__assign({}, this.style), { fontSize: fontSize + \"px\" });\r\n            this.levelNumber = this.scene.add.text(0, 0, levelNumber.toString(), numberStyle);\r\n            this.levelNumber.setOrigin(0.5, 0);\r\n            this.levelNumber.x = this.levelTitle.getCenter().x;\r\n            this.levelNumber.y = this.levelTitle.y + this.levelTitle.getBounds().height / 2 + 8;\r\n            this.add(this.levelNumber);\r\n        };\r\n        return LevelLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelLabel = LevelLabel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BasicBallsLabel = /** @class */ (function (_super) {\r\n        __extends(BasicBallsLabel, _super);\r\n        function BasicBallsLabel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"balls_label\";\r\n            _this.addBalIcon();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        BasicBallsLabel.prototype.addBalIcon = function () {\r\n            this.ballIcon = this.scene.add.image(0, 0, \"gameplay_gui\", \"ball_icon\");\r\n            this.add(this.ballIcon);\r\n        };\r\n        BasicBallsLabel.prototype.addText = function () {\r\n            var content = \"0\";\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.BLOCKS_LABEL, content, 22);\r\n            this.text.setTint(game.GameplayGui.FONT_COLOR);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.x = 0;\r\n            this.text.y = this.ballIcon.y + 42;\r\n            this.add(this.text);\r\n        };\r\n        BasicBallsLabel.prototype.updateNum = function (num) {\r\n            this.text.setText(num.toString());\r\n        };\r\n        return BasicBallsLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BasicBallsLabel = BasicBallsLabel;\r\n})(game || (game = {}));\r\n///<reference path='LevelLabel.ts' />\r\n///<reference path='BasicBallsLabel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var MainLabel = /** @class */ (function (_super) {\r\n        __extends(MainLabel, _super);\r\n        function MainLabel(scene, levelConfig) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.padding = { x: 22, y: 0 };\r\n            _this.name = \"main_label\";\r\n            _this.levelConfig = levelConfig;\r\n            _this.addBackground();\r\n            _this.addLevelLabel(levelConfig.levelNumber);\r\n            _this.addFirstSeparator();\r\n            _this.addBlocksLabel(levelConfig.generator.targetItemType, levelConfig.generator.targetItemsNum);\r\n            _this.addSecondSeparator();\r\n            _this.addBallsLabel(levelConfig.balls);\r\n            _this.alignItems();\r\n            _this.bringToTop(_this.levelLabel);\r\n            return _this;\r\n        }\r\n        MainLabel.prototype.addBackground = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"main_label_back\");\r\n            this.add(this.back);\r\n        };\r\n        MainLabel.prototype.addLevelLabel = function (levelNumber) {\r\n            this.levelLabel = new game.LevelLabel(this.scene, levelNumber);\r\n            this.add(this.levelLabel);\r\n        };\r\n        MainLabel.prototype.addFirstSeparator = function () {\r\n            this.firstSeparator = this.scene.add.image(0, 0, \"gameplay_gui\", \"main_label_separator\");\r\n            this.add(this.firstSeparator);\r\n        };\r\n        MainLabel.prototype.addBlocksLabel = function (targetBlocksType, targetBlocksNum) {\r\n            this.blocksLabel = new game.BasicBlocksLabel(this.scene, targetBlocksType, targetBlocksNum);\r\n            this.add(this.blocksLabel);\r\n        };\r\n        MainLabel.prototype.addSecondSeparator = function () {\r\n            this.secondSeparator = this.scene.add.image(0, 0, \"gameplay_gui\", \"main_label_separator\");\r\n            this.add(this.secondSeparator);\r\n        };\r\n        MainLabel.prototype.addBallsLabel = function (ballsNum) {\r\n            this.ballsLabel = new game.BasicBallsLabel(this.scene);\r\n            this.ballsLabel.updateNum(ballsNum);\r\n            this.add(this.ballsLabel);\r\n        };\r\n        MainLabel.prototype.alignItems = function () {\r\n            this.alignLevelLabel();\r\n            this.alignBallsLabel();\r\n            this.alignBlocksLabel();\r\n            this.alignFirstSeparator();\r\n            this.alignSecondSeparator();\r\n            this.blocksLabel.x += 5;\r\n            this.ballsLabel.x += 11;\r\n        };\r\n        MainLabel.prototype.alignLevelLabel = function () {\r\n            this.levelLabel.x = this.back.left + this.padding.x;\r\n            this.levelLabel.y = this.back.y - this.levelLabel.getBounds().height / 2;\r\n        };\r\n        MainLabel.prototype.alignBallsLabel = function () {\r\n            var bounds = this.ballsLabel.getBounds();\r\n            this.ballsLabel.x = this.back.right - bounds.width - this.padding.x / 2;\r\n            this.ballsLabel.y = -13;\r\n        };\r\n        MainLabel.prototype.alignBlocksLabel = function () {\r\n            var left = this.levelLabel.getBounds().right;\r\n            var right = this.ballsLabel.getBounds().left;\r\n            var width = right - left;\r\n            this.blocksLabel.x = left + width / 2;\r\n            this.blocksLabel.y = -14;\r\n        };\r\n        MainLabel.prototype.alignFirstSeparator = function () {\r\n            var left = this.levelLabel.x + this.levelLabel.getBounds().width;\r\n            var right = this.blocksLabel.x - this.blocksLabel.getBounds().width / 2;\r\n            var width = right - left;\r\n            this.firstSeparator.x = left + width / 2;\r\n            this.firstSeparator.y -= 3;\r\n        };\r\n        MainLabel.prototype.alignSecondSeparator = function () {\r\n            var left = this.blocksLabel.x + this.blocksLabel.getBounds().width;\r\n            var right = this.ballsLabel.x - this.ballsLabel.getBounds().width / 2;\r\n            var width = right - left;\r\n            this.secondSeparator.x = left + width / 2 - 2;\r\n            this.secondSeparator.y -= 3;\r\n        };\r\n        MainLabel.prototype.getWidth = function () {\r\n            return this.back.displayWidth;\r\n        };\r\n        return MainLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.MainLabel = MainLabel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ProgressBarStarEvent;\r\n    (function (ProgressBarStarEvent) {\r\n        ProgressBarStarEvent[\"SHOW_START\"] = \"ProgressBarStar_SHOW_START\";\r\n        ProgressBarStarEvent[\"SHOW_COMPLETE\"] = \"ProgressBarStar_SHOW_COMPLETE\";\r\n    })(ProgressBarStarEvent = game.ProgressBarStarEvent || (game.ProgressBarStarEvent = {}));\r\n    var ProgressBarStar = /** @class */ (function (_super) {\r\n        __extends(ProgressBarStar, _super);\r\n        function ProgressBarStar(scene, atlas, activeFrame, inactiveFrame) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this._isActive = true;\r\n            _this.name = \"star\";\r\n            _this.inactiveStar = _this.scene.add.image(0, 0, atlas, inactiveFrame);\r\n            _this.activeStar = _this.scene.add.image(0, 0, atlas, activeFrame);\r\n            _this.circleFx = _this.scene.add.image(0, 2, atlas, \"star_circle_fx\").setVisible(false);\r\n            _this.hideActiveStar();\r\n            _this.add(_this.inactiveStar);\r\n            _this.add(_this.circleFx);\r\n            _this.add(_this.activeStar);\r\n            return _this;\r\n        }\r\n        Object.defineProperty(ProgressBarStar.prototype, \"isActive\", {\r\n            get: function () {\r\n                return this._isActive;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        ProgressBarStar.prototype.showActiveStar = function () {\r\n            this.activeStar.visible = true;\r\n            this.activeStar.active = true;\r\n            this._isActive = true;\r\n        };\r\n        ProgressBarStar.prototype.hideActiveStar = function () {\r\n            this.activeStar.visible = false;\r\n            this.activeStar.active = false;\r\n            this._isActive = false;\r\n        };\r\n        ProgressBarStar.prototype.tweenActiveStar = function (delay) {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this.activeStar);\r\n            this.activeStar.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.activeStar,\r\n                delay: delay,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n                onComplete: function () {\r\n                    _this.inactiveStar.visible = false;\r\n                },\r\n            });\r\n            this.activeStar.scale = 1;\r\n            this.scene.tweens.add({\r\n                targets: this.activeStar,\r\n                delay: delay,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1.5,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.activeStar,\r\n                        duration: 100,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        scale: 1,\r\n                        onComplete: function () {\r\n                            _this.showCircleFx();\r\n                            _this.emit(ProgressBarStarEvent.SHOW_COMPLETE, _this);\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n            this.emit(ProgressBarStarEvent.SHOW_START, this);\r\n        };\r\n        ProgressBarStar.prototype.showCircleFx = function () {\r\n            this.circleFx.visible = true;\r\n            this.circleFx.alpha = 0.4;\r\n            this.circleFx.scale = 0.4;\r\n            this.scene.tweens.add({\r\n                targets: this.circleFx,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                scale: 1.75,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.circleFx,\r\n                delay: 150,\r\n                duration: 250,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                alpha: 0,\r\n            });\r\n        };\r\n        return ProgressBarStar;\r\n    }(Phaser.GameObjects.Container));\r\n    game.ProgressBarStar = ProgressBarStar;\r\n})(game || (game = {}));\r\n///<reference path='ProgressBarStar.ts' />\r\nvar game;\r\n(function (game) {\r\n    var PointsProgressBar = /** @class */ (function (_super) {\r\n        __extends(PointsProgressBar, _super);\r\n        function PointsProgressBar(scene, props) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.currentPoints = 0;\r\n            _this.name = \"stars_progress_bar\";\r\n            _this.props = props;\r\n            _this.initTwinkleSounds();\r\n            _this.addBack();\r\n            _this.addProgressBar();\r\n            _this.addStarLines();\r\n            _this.addStars();\r\n            return _this;\r\n        }\r\n        PointsProgressBar.prototype.initTwinkleSounds = function () {\r\n            var _this = this;\r\n            this.twinkleStartThrottled = _.throttle(function () {\r\n                if (_this.scene.cache.audio.has(game.GameSoundKey.STAR_TWINKLE_1)) {\r\n                    _this.scene.sound.play(game.GameSoundKey.STAR_TWINKLE_1, { volume: 0.33 });\r\n                }\r\n            }, 100, { trailing: false });\r\n            this.twinkleCompleteThrottled = _.throttle(function () {\r\n                if (_this.scene.cache.audio.has(game.GameSoundKey.STAR_TWINKLE_2)) {\r\n                    _this.scene.sound.play(game.GameSoundKey.STAR_TWINKLE_2, { volume: 0.16 });\r\n                }\r\n            }, 100, { trailing: false });\r\n        };\r\n        PointsProgressBar.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"stars_progress_bar_outer\");\r\n            this.back.setOrigin(0, 0.5);\r\n            this.add(this.back);\r\n        };\r\n        PointsProgressBar.prototype.addProgressBar = function () {\r\n            this.progressBar = this.scene.add.image(0, 0, \"gameplay_gui\", \"stars_progress_bar_inner\");\r\n            this.progressBar.setOrigin(0, 0.5);\r\n            this.add(this.progressBar);\r\n            if (game.Main.development) {\r\n                this.progressBar.setInteractive();\r\n                this.progressBar.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this.onClick, this);\r\n            }\r\n            Phaser.Display.Align.In.Center(this.progressBar, this.back, 0, 0);\r\n        };\r\n        PointsProgressBar.prototype.onClick = function (pointer, x, y) {\r\n            var percent = Phaser.Math.Percent(x, 0, this.progressBar.width);\r\n            this.emit(\"update_points\", percent);\r\n        };\r\n        PointsProgressBar.prototype.addStarLines = function () {\r\n            var _this = this;\r\n            var offsetX = Phaser.Display.Bounds.GetLeft(this.progressBar);\r\n            var linesY = this.progressBar.getCenter().y;\r\n            this.starLines = this.props.starsPoints.map(function (points) {\r\n                var line = _this.scene.add.image(0, 0, \"gameplay_gui\", \"star_line\");\r\n                line.x = offsetX + _this.getPositionByPoints(points);\r\n                line.y = linesY;\r\n                _this.add(line);\r\n                return line;\r\n            });\r\n        };\r\n        PointsProgressBar.prototype.addStars = function () {\r\n            var _this = this;\r\n            var offsetX = Phaser.Display.Bounds.GetLeft(this.progressBar);\r\n            var starsY = Phaser.Display.Bounds.GetTop(this.progressBar) - 10;\r\n            this.stars = this.props.starsPoints.map(function (points) {\r\n                var star = new game.ProgressBarStar(_this.scene, \"gameplay_gui\", \"star\", \"star_inactive\");\r\n                star.x = offsetX + _this.getPositionByPoints(points);\r\n                star.y = starsY;\r\n                star.setData(\"points\", points);\r\n                star.on(game.ProgressBarStarEvent.SHOW_START, _this.twinkleStartThrottled, _this);\r\n                star.on(game.ProgressBarStarEvent.SHOW_COMPLETE, _this.twinkleCompleteThrottled, _this);\r\n                _this.add(star);\r\n                return star;\r\n            });\r\n        };\r\n        PointsProgressBar.prototype.getPositionByPoints = function (points) {\r\n            var percent = Phaser.Math.Percent(points, 0, this.props.totalPoints);\r\n            return this.progressBar.width * percent;\r\n        };\r\n        PointsProgressBar.prototype.getPercentFromPoints = function (points) {\r\n            return Phaser.Math.Percent(points, 0, this.props.totalPoints);\r\n        };\r\n        PointsProgressBar.prototype.updateProgressInstant = function (points) {\r\n            this.updateProgressBarCrop(this.getPercentFromPoints(points));\r\n            this.updateStars(points);\r\n        };\r\n        PointsProgressBar.prototype.updateProgress = function (points, tweenDuration) {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                currentPoints: points,\r\n                duration: tweenDuration,\r\n                ease: Phaser.Math.Easing.Circular.Out,\r\n                onUpdate: function () {\r\n                    _this.updateProgressBarCrop(_this.getPercentFromPoints(_this.currentPoints));\r\n                    _this.updateStars(_this.currentPoints);\r\n                },\r\n            });\r\n        };\r\n        PointsProgressBar.prototype.updateProgressBarCrop = function (percent) {\r\n            percent = Math.max(0.001, percent); // because canvas renderer fails when crop.width is zero\r\n            this.progressBar.setCrop(0, 0, this.progressBar.width * percent, this.progressBar.height);\r\n        };\r\n        PointsProgressBar.prototype.updateStars = function (points) {\r\n            this.stars.forEach(function (star) {\r\n                var wasActive = star.isActive;\r\n                var active = points >= star.getData(\"points\");\r\n                if (active) {\r\n                    star.showActiveStar();\r\n                    if (wasActive === false && active) {\r\n                        star.tweenActiveStar(0);\r\n                    }\r\n                }\r\n                else {\r\n                    star.hideActiveStar();\r\n                }\r\n            });\r\n        };\r\n        PointsProgressBar.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        PointsProgressBar.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        return PointsProgressBar;\r\n    }(Phaser.GameObjects.Container));\r\n    game.PointsProgressBar = PointsProgressBar;\r\n})(game || (game = {}));\r\n///<reference path='PointsProgressBar.ts' />\r\nvar game;\r\n(function (game) {\r\n    var PointsLabel = /** @class */ (function (_super) {\r\n        __extends(PointsLabel, _super);\r\n        function PointsLabel(scene, levelConfig) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.padding = { x: 18, y: 0 };\r\n            _this.points = 0;\r\n            _this.name = \"points_label\";\r\n            _this.levelConfig = levelConfig;\r\n            _this.addBack();\r\n            _this.addProgressBar();\r\n            _this.addPointsText();\r\n            return _this;\r\n        }\r\n        PointsLabel.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"points_label_back\");\r\n            this.back.setOrigin(0);\r\n            this.add(this.back);\r\n        };\r\n        PointsLabel.prototype.addProgressBar = function () {\r\n            var _this = this;\r\n            var totalPoints = this.levelConfig.stars[2];\r\n            var props = {\r\n                totalPoints: totalPoints,\r\n                starsPoints: this.levelConfig.stars.slice(0),\r\n            };\r\n            this.starsProgressBar = new game.PointsProgressBar(this.scene, props);\r\n            this.starsProgressBar.x = this.back.left + this.padding.x;\r\n            this.starsProgressBar.y = Phaser.Display.Bounds.GetCenterY(this.back) - 3;\r\n            this.starsProgressBar.updateProgressInstant(0);\r\n            this.starsProgressBar.on(\"update_points\", function (percent) {\r\n                _this.updatePoints(totalPoints * percent);\r\n            });\r\n            this.add(this.starsProgressBar);\r\n        };\r\n        PointsLabel.prototype.addPointsText = function () {\r\n            var content = \"0\";\r\n            this.pointsText = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.INGAME_GUI_DIGITS, content, 28);\r\n            this.pointsText.setTint(game.GameplayGui.FONT_COLOR);\r\n            this.pointsText.setOrigin(1, 0.5);\r\n            this.pointsText.x = this.back.right - this.padding.x - 4;\r\n            this.pointsText.y = this.back.getCenter().y;\r\n            this.add(this.pointsText);\r\n        };\r\n        PointsLabel.prototype.updatePoints = function (value, instant) {\r\n            if (instant === void 0) { instant = false; }\r\n            if (instant) {\r\n                this.points = value;\r\n                this.updatePointsText(this.points);\r\n                this.starsProgressBar.updateProgressInstant(this.points);\r\n                return;\r\n            }\r\n            var tweenDuration = 800;\r\n            this.budgePointsText();\r\n            this.tweenPointsValue(value, tweenDuration);\r\n            this.starsProgressBar.updateProgress(value, tweenDuration);\r\n        };\r\n        PointsLabel.prototype.tweenPointsValue = function (value, tweenDuration) {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: tweenDuration,\r\n                ease: Phaser.Math.Easing.Circular.Out,\r\n                points: value,\r\n                onUpdate: function () {\r\n                    _this.updatePointsText(Math.round(_this.points));\r\n                },\r\n            });\r\n        };\r\n        PointsLabel.prototype.budgePointsText = function () {\r\n            this.scene.tweens.killTweensOf(this.pointsText);\r\n            this.scene.tweens.add({\r\n                targets: this.pointsText,\r\n                duration: 166,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                x: \"-=8\",\r\n                yoyo: true,\r\n            });\r\n        };\r\n        PointsLabel.prototype.updatePointsText = function (value) {\r\n            this.pointsText.setText(value.toLocaleString());\r\n        };\r\n        PointsLabel.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        PointsLabel.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        return PointsLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.PointsLabel = PointsLabel;\r\n})(game || (game = {}));\r\n///<reference path='MainLabel.ts' />\r\n///<reference path='pointsLabel/PointsLabel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var TopPanel = /** @class */ (function (_super) {\r\n        __extends(TopPanel, _super);\r\n        function TopPanel(scene, levelConfig) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.labelsY = 0;\r\n            _this.originalY = 0;\r\n            _this.levelConfig = levelConfig;\r\n            _this.name = \"top_panel\";\r\n            Phaser.Display.Align.In.TopCenter(_this.container, _this.background, 0, 0);\r\n            _this.labelsY = _this.background.height / 2 - 4;\r\n            _this.addShadow();\r\n            _this.addMainLabel();\r\n            _this.addPointsLabel();\r\n            _this.alignItems();\r\n            return _this;\r\n        }\r\n        TopPanel.prototype.addShadow = function () {\r\n            this.shadow = this.scene.add.image(0, 0, \"gameplay_gui\", \"up_panel_shadow\");\r\n            this.shadow.setOrigin(0.5, 0);\r\n            this.shadow.alpha = 0.08;\r\n            this.shadow.y = 10;\r\n            this.addAt(this.shadow, 0);\r\n        };\r\n        TopPanel.prototype.addMainLabel = function () {\r\n            this.mainLabel = new game.MainLabel(this.scene, this.levelConfig);\r\n            this.add(this.mainLabel);\r\n        };\r\n        TopPanel.prototype.addPointsLabel = function () {\r\n            this.pointsLabel = new game.PointsLabel(this.scene, this.levelConfig);\r\n            this.add(this.pointsLabel);\r\n        };\r\n        TopPanel.prototype.alignItems = function () {\r\n            var mainLabelWidth = this.mainLabel.getWidth();\r\n            var pointsLabelWidth = this.pointsLabel.getWidth();\r\n            var labelsGap = 30;\r\n            var totalContentWidth = mainLabelWidth + pointsLabelWidth + labelsGap;\r\n            var padding = (this.background.width - totalContentWidth) / 2;\r\n            this.pointsLabel.x = this.background.left + padding;\r\n            this.pointsLabel.y = this.labelsY - this.pointsLabel.getHeight() / 2;\r\n            this.mainLabel.x = this.background.right - mainLabelWidth / 2 - padding;\r\n            this.mainLabel.y = this.labelsY;\r\n        };\r\n        TopPanel.prototype.show = function () {\r\n            this.revive();\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n                y: this.originalY,\r\n            });\r\n        };\r\n        TopPanel.prototype.hide = function () {\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                y: this.originalY - 10,\r\n                onComplete: this.kill.bind(this),\r\n            });\r\n        };\r\n        return TopPanel;\r\n    }(game.IngamePanel));\r\n    game.TopPanel = TopPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BottomPanelButton = /** @class */ (function (_super) {\r\n        __extends(BottomPanelButton, _super);\r\n        function BottomPanelButton(scene, texture, frame, parent) {\r\n            var _this = _super.call(this, scene, texture, frame, parent) || this;\r\n            _this.originalY = 0;\r\n            _this.checkIfOver = false;\r\n            return _this;\r\n        }\r\n        BottomPanelButton.prototype.enable = function () {\r\n            this.setInteractive();\r\n            // this.tweenAlpha(1)\r\n        };\r\n        BottomPanelButton.prototype.disable = function () {\r\n            this.disableInteractive();\r\n            // this.tweenAlpha(0.5)\r\n        };\r\n        BottomPanelButton.prototype.tweenAlpha = function (alpha) {\r\n            if (this.alphaTween) {\r\n                this.alphaTween.stop();\r\n            }\r\n            this.alphaTween = this.scene.tweens.add({\r\n                targets: this,\r\n                alpha: { value: alpha, ease: Phaser.Math.Easing.Cubic.Out, duration: 150 },\r\n            });\r\n        };\r\n        return BottomPanelButton;\r\n    }(Phaser.GameObjects.Button));\r\n    game.BottomPanelButton = BottomPanelButton;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FastForwardButton = /** @class */ (function (_super) {\r\n        __extends(FastForwardButton, _super);\r\n        function FastForwardButton(scene, texture, frame, parent) {\r\n            var _this = _super.call(this, scene, texture, frame, parent) || this;\r\n            _this.areTweensEnabled = false;\r\n            return _this;\r\n        }\r\n        FastForwardButton.prototype.playAnimation = function () {\r\n            this.scaleTween = this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.1,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        FastForwardButton.prototype.stopAnimation = function () {\r\n            if (this.scaleTween) {\r\n                this.scaleTween.stop();\r\n                this.scene.tweens.add({\r\n                    targets: this,\r\n                    duration: 150,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    scale: 1,\r\n                });\r\n            }\r\n        };\r\n        return FastForwardButton;\r\n    }(game.BottomPanelButton));\r\n    game.FastForwardButton = FastForwardButton;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var IngameBoosterNumLabel = /** @class */ (function (_super) {\r\n        __extends(IngameBoosterNumLabel, _super);\r\n        function IngameBoosterNumLabel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"num_label\";\r\n            _this.addBack();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        IngameBoosterNumLabel.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"boosters/booster_label_num\");\r\n            this.add(this.back);\r\n        };\r\n        IngameBoosterNumLabel.prototype.addText = function () {\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.BLOCKS_LABEL, \"0\", 25);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.y += 2;\r\n            this.text.alpha = 0.9;\r\n            this.add(this.text);\r\n        };\r\n        IngameBoosterNumLabel.prototype.updateNum = function (value) {\r\n            this.text.setText(value.toString());\r\n        };\r\n        return IngameBoosterNumLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.IngameBoosterNumLabel = IngameBoosterNumLabel;\r\n})(game || (game = {}));\r\n///<reference path='IngameBoosterNumLabel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var Rectangle = Phaser.Geom.Rectangle;\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var IngameBoosterIcon = /** @class */ (function (_super) {\r\n        __extends(IngameBoosterIcon, _super);\r\n        function IngameBoosterIcon(scene, booster) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this._isSelected = false;\r\n            _this.isLocked = false;\r\n            _this.originalY = 0;\r\n            _this.name = \"booster_\" + booster.type;\r\n            _this._booster = booster;\r\n            _this._booster.on(game.BoosterEvent.NUM_CHANGED, _this.onBoosterNumChanged, _this);\r\n            _this.addParticles();\r\n            _this.addBack();\r\n            _this.addBackShadow();\r\n            _this.addIcon();\r\n            _this.addNumLabel();\r\n            _this.addPlusButton();\r\n            _this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.onInputDown, _this);\r\n            _this.scene.input.on(Phaser.Input.Events.POINTER_UP, _this.onInputUp, _this);\r\n            _this.enableInteractive();\r\n            _this.updateView();\r\n            return _this;\r\n        }\r\n        Object.defineProperty(IngameBoosterIcon.prototype, \"isSelected\", {\r\n            get: function () {\r\n                return this._isSelected;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(IngameBoosterIcon.prototype, \"booster\", {\r\n            get: function () {\r\n                return this._booster;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        IngameBoosterIcon.prototype.onBoosterNumChanged = function () {\r\n            this.updateView();\r\n        };\r\n        IngameBoosterIcon.prototype.updateView = function () {\r\n            if (game.Main.areRewardAdsEnabled === false) {\r\n                this.plusButton.kill();\r\n                return;\r\n            }\r\n            if (this._booster.num > 0) {\r\n                this.numLabel.revive();\r\n                this.plusButton.kill();\r\n            }\r\n            else {\r\n                this.numLabel.kill();\r\n                this.plusButton.revive();\r\n            }\r\n        };\r\n        IngameBoosterIcon.prototype.enableInteractive = function () {\r\n            this.setInteractive(this.backBounds, Rectangle.Contains);\r\n            this.input.cursor = \"pointer\";\r\n        };\r\n        IngameBoosterIcon.prototype.onInputDown = function (pointer) {\r\n            this.currentPointer = pointer;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                scale: this.scale * 0.9,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                duration: 50,\r\n            });\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.TAP)) {\r\n                this.scene.sound.play(game.GameSoundKey.TAP, { volume: 1 });\r\n            }\r\n        };\r\n        IngameBoosterIcon.prototype.onInputUp = function (pointer) {\r\n            if (this.currentPointer && this.currentPointer === pointer) {\r\n                this.currentPointer = null;\r\n                this.scene.tweens.add({\r\n                    targets: this,\r\n                    scale: 1,\r\n                    ease: Phaser.Math.Easing.Back.Out,\r\n                    duration: 300,\r\n                });\r\n            }\r\n        };\r\n        IngameBoosterIcon.prototype.addParticles = function () {\r\n            this.particles = this.scene.add.particles(\"gameplay_gui\");\r\n            this.emitter = this.particles.createEmitter({\r\n                frame: [\"boosters/circle_fx\"],\r\n                scale: { start: 0.5, end: 2, ease: EasingString.ExpoEaseOut },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseOut },\r\n                lifespan: 2000,\r\n                frequency: 500,\r\n                on: false,\r\n            });\r\n            this.add(this.particles);\r\n        };\r\n        IngameBoosterIcon.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"boosters/booster_back\");\r\n            this.add(this.back);\r\n            this.backBounds = this.back.getBounds();\r\n        };\r\n        IngameBoosterIcon.prototype.addBackShadow = function () {\r\n            this.backShadow = this.scene.add.image(0, 0, \"gameplay_gui\", \"boosters/booster_back_shadow\");\r\n            this.backShadow.alpha = 0.15;\r\n            this.backShadow.y += 6;\r\n            this.addAt(this.backShadow, 0);\r\n        };\r\n        IngameBoosterIcon.prototype.addIcon = function () {\r\n            var frameName = \"boosters/booster_\" + this._booster.type;\r\n            this.icon = this.scene.add.image(0, 0, \"gameplay_gui\", frameName);\r\n            this.add(this.icon);\r\n        };\r\n        IngameBoosterIcon.prototype.addNumLabel = function () {\r\n            var offset = this.back.width / 2 - 15;\r\n            this.numLabel = new game.IngameBoosterNumLabel(this.scene);\r\n            this.numLabel.updateNum(this._booster.num);\r\n            this.numLabel.x = offset;\r\n            this.numLabel.y = offset;\r\n            this.add(this.numLabel);\r\n        };\r\n        IngameBoosterIcon.prototype.addPlusButton = function () {\r\n            this.plusButton = this.scene.add.image(0, 0, \"gameplay_gui\", \"boosters/plus_button\");\r\n            this.plusButton.x = this.numLabel.x;\r\n            this.plusButton.y = this.numLabel.y;\r\n            this.add(this.plusButton);\r\n        };\r\n        IngameBoosterIcon.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        IngameBoosterIcon.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        IngameBoosterIcon.prototype.onGiftArrive = function (num) {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.BLOCK_COLLECTED)) {\r\n                this.scene.sound.play(game.GameSoundKey.BLOCK_COLLECTED, { volume: 0.3 });\r\n            }\r\n            this.numLabel.updateNum(this.booster.num + num);\r\n            this.emitter.explode(1, 0, 0);\r\n            this.scene.tweens.add({\r\n                targets: [this.back, this.icon],\r\n                duration: 233,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.33,\r\n                yoyo: true,\r\n                delay: this.scene.tweens.stagger(50),\r\n            });\r\n        };\r\n        IngameBoosterIcon.prototype.highlight = function () {\r\n            this._isSelected = true;\r\n            this.emitter.flow(800);\r\n        };\r\n        IngameBoosterIcon.prototype.dim = function () {\r\n            this.alpha = 0.4;\r\n            this.disableInteractive();\r\n        };\r\n        IngameBoosterIcon.prototype.resetHighlight = function () {\r\n            this._isSelected = false;\r\n            this.emitter.on = false;\r\n            this.emitter.killAll();\r\n        };\r\n        IngameBoosterIcon.prototype.resetDim = function () {\r\n            this.alpha = 1;\r\n            if (this.isLocked === false) {\r\n                this.enableInteractive();\r\n            }\r\n        };\r\n        IngameBoosterIcon.prototype.lock = function () {\r\n            if (this.isLocked) {\r\n                return;\r\n            }\r\n            this.isLocked = true;\r\n            // this.disableInteractive()\r\n        };\r\n        IngameBoosterIcon.prototype.unlock = function () {\r\n            if (this.isLocked === false) {\r\n                return;\r\n            }\r\n            this.isLocked = false;\r\n            // this.enableInteractive()\r\n        };\r\n        IngameBoosterIcon.prototype.preDestroy = function () {\r\n            this.scene.input.off(Phaser.Input.Events.POINTER_UP, this.onInputUp, this);\r\n            this._booster.off(game.BoosterEvent.NUM_CHANGED, this.onBoosterNumChanged, this);\r\n            _super.prototype.preDestroy.call(this);\r\n        };\r\n        return IngameBoosterIcon;\r\n    }(Phaser.GameObjects.Container));\r\n    game.IngameBoosterIcon = IngameBoosterIcon;\r\n})(game || (game = {}));\r\n///<reference path='IngameBoosterIcon.ts' />\r\nvar game;\r\n(function (game) {\r\n    var IngameBoostersPanel = /** @class */ (function (_super) {\r\n        __extends(IngameBoostersPanel, _super);\r\n        function IngameBoostersPanel(scene, boosters) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.originalY = 0;\r\n            _this.name = \"boosters_panel\";\r\n            _this.addIcons(boosters);\r\n            _this.alignIcons();\r\n            _this.addOverlay();\r\n            return _this;\r\n        }\r\n        IngameBoostersPanel.prototype.addIcons = function (boosters) {\r\n            var _this = this;\r\n            this.icons = boosters.map(function (booster) {\r\n                var icon = new game.IngameBoosterIcon(_this.scene, booster);\r\n                icon.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, _this.onIconClick.bind(_this, icon));\r\n                _this.add(icon);\r\n                return icon;\r\n            });\r\n            this.iconsReversed = this.icons.slice().reverse();\r\n        };\r\n        IngameBoostersPanel.prototype.onIconClick = function (icon) {\r\n            if (icon.booster.num === 0) {\r\n                if (game.Main.areRewardAdsEnabled) {\r\n                    this.scene.events.emit(game.GameplayBoostersEvent.GET_FREE_BOOSTER, icon.booster);\r\n                }\r\n                return;\r\n            }\r\n            if (icon.isLocked) {\r\n                return;\r\n            }\r\n            if (icon.isSelected) {\r\n                this.scene.events.emit(game.GameplayBoostersEvent.CANCEL, icon.booster);\r\n            }\r\n            else {\r\n                this.scene.events.emit(game.GameplayBoostersEvent.SELECT, icon.booster);\r\n            }\r\n        };\r\n        IngameBoostersPanel.prototype.alignIcons = function () {\r\n            var cellSize = 140;\r\n            this.gridAlign({\r\n                cellWidth: cellSize,\r\n                cellHeight: cellSize,\r\n                x: cellSize / 2,\r\n                position: Phaser.Display.Align.CENTER,\r\n                height: 1,\r\n            });\r\n            this.icons.forEach(function (icon) {\r\n                icon.originalY = icon.y;\r\n            });\r\n        };\r\n        IngameBoostersPanel.prototype.addOverlay = function () {\r\n            var bounds = this.getBounds();\r\n            this.overlay = this.scene.add.image(0, 0, \"gameplay_gui\", \"white_rect\");\r\n            this.overlay.displayWidth = bounds.width;\r\n            this.overlay.displayHeight = bounds.height;\r\n            this.overlay.x = bounds.centerX;\r\n            this.overlay.y = bounds.centerY;\r\n            this.add(this.overlay);\r\n            this.overlay.alpha = 0.001;\r\n            this.overlay.visible = false;\r\n            this.overlay.setInteractive();\r\n        };\r\n        IngameBoostersPanel.prototype.show = function () {\r\n            var _this = this;\r\n            this.revive();\r\n            this.iconsReversed.forEach(function (icon) {\r\n                icon.alpha = 0;\r\n                icon.y = icon.originalY - 10;\r\n                _this.scene.tweens.add({\r\n                    delay: 150,\r\n                    targets: icon,\r\n                    duration: 150,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    alpha: 1,\r\n                    y: icon.originalY,\r\n                });\r\n            });\r\n        };\r\n        IngameBoostersPanel.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this.icons,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                y: \"+=10\",\r\n            }).on(Phaser.Tweens.Events.TIMELINE_COMPLETE, function () {\r\n                _this.kill();\r\n            });\r\n        };\r\n        IngameBoostersPanel.prototype.enableInput = function () {\r\n            this.overlay.visible = false;\r\n        };\r\n        IngameBoostersPanel.prototype.disableInput = function () {\r\n            this.overlay.visible = true;\r\n        };\r\n        IngameBoostersPanel.prototype.getIconByType = function (boosterType) {\r\n            return this.icons.find(function (icon) { return icon.booster.type === boosterType; });\r\n        };\r\n        IngameBoostersPanel.prototype.highlight = function (boosterType) {\r\n            this.icons.forEach(function (icon) {\r\n                if (icon.booster.type === boosterType) {\r\n                    icon.highlight();\r\n                }\r\n                else {\r\n                    icon.dim();\r\n                }\r\n            });\r\n        };\r\n        IngameBoostersPanel.prototype.resetHighlight = function () {\r\n            this.icons.forEach(function (icon) {\r\n                if (icon.isSelected) {\r\n                    icon.resetHighlight();\r\n                }\r\n                else {\r\n                    icon.resetDim();\r\n                }\r\n            });\r\n        };\r\n        return IngameBoostersPanel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.IngameBoostersPanel = IngameBoostersPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FastForwardPopoverEvent;\r\n    (function (FastForwardPopoverEvent) {\r\n        FastForwardPopoverEvent[\"SHOW\"] = \"FastForwardPopover_SHOw\";\r\n    })(FastForwardPopoverEvent = game.FastForwardPopoverEvent || (game.FastForwardPopoverEvent = {}));\r\n    var FastForwardPopover = /** @class */ (function (_super) {\r\n        __extends(FastForwardPopover, _super);\r\n        function FastForwardPopover(scene, gameplay) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.originalY = 0;\r\n            _this.turnTimer = 0;\r\n            _this.isTurnStarted = false;\r\n            _this.fastForwardWasUsed = false;\r\n            _this.name = \"fast_forward_popover\";\r\n            _this.addBack();\r\n            _this.addTip();\r\n            _this.addText();\r\n            _this.adjustTextSize();\r\n            _this.alignItems();\r\n            _this.gameplay = gameplay;\r\n            _this.gameplay.events.on(game.GameplayEvent.TURN_START, _this.onTurnStart, _this);\r\n            _this.gameplay.events.on(game.GameplayEvent.TURN_COMPLETE, _this.onTurnComplete, _this);\r\n            _this.gameplay.events.once(game.GameplayEvent.FAST_FORWARD_START, _this.onFastForwardUse, _this);\r\n            return _this;\r\n        }\r\n        FastForwardPopover.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"booster_hint_screen/booster_info_popover\");\r\n            this.back.scaleY = 0.75;\r\n            this.back.setOrigin(0.5, 1);\r\n            this.add(this.back);\r\n        };\r\n        FastForwardPopover.prototype.addTip = function () {\r\n            this.tip = this.scene.add.image(0, 0, \"gameplay_gui\", \"booster_hint_screen/booster_info_popover_tip\");\r\n            this.tip.setOrigin(0.5, 0);\r\n            this.tip.y = this.back.y - 10;\r\n            this.add(this.tip);\r\n        };\r\n        FastForwardPopover.prototype.addText = function () {\r\n            var content = this.scene.texts.fast_forward_hint;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"30px\",\r\n                color: \"#205466\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.setWordWrapWidth(this.back.width * 0.8);\r\n            this.text.lineSpacing = -3;\r\n            this.text.y = -this.back.displayHeight / 2;\r\n            this.add(this.text);\r\n        };\r\n        FastForwardPopover.prototype.adjustTextSize = function () {\r\n            var maxHeight = this.back.height * 0.8;\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n        };\r\n        FastForwardPopover.prototype.alignItems = function () {\r\n            var _this = this;\r\n            this.list.forEach(function (item) {\r\n                item.y -= _this.tip.height;\r\n            });\r\n        };\r\n        FastForwardPopover.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        FastForwardPopover.prototype.offsetTip = function (offset) {\r\n            this.tip.x = -offset / this.scale;\r\n        };\r\n        FastForwardPopover.prototype.onTurnStart = function () {\r\n            if (this.fastForwardWasUsed) {\r\n                return;\r\n            }\r\n            this.turnTimer = 0;\r\n            this.isTurnStarted = true;\r\n        };\r\n        FastForwardPopover.prototype.onTurnComplete = function () {\r\n            this.isTurnStarted = false;\r\n            this.hide();\r\n        };\r\n        FastForwardPopover.prototype.preUpdate = function (time, delta) {\r\n            if (this.visible || this.fastForwardWasUsed || this.isTurnStarted === false) {\r\n                return;\r\n            }\r\n            this.turnTimer += delta;\r\n            if (this.turnTimer > 3500) {\r\n                this.revive();\r\n                this.show();\r\n            }\r\n        };\r\n        FastForwardPopover.prototype.show = function () {\r\n            this.emit(FastForwardPopoverEvent.SHOW, this);\r\n            this.alpha = 0;\r\n            this.y = this.originalY - 12 * this.scale;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: this.originalY,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        FastForwardPopover.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 66,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                }\r\n            });\r\n        };\r\n        FastForwardPopover.prototype.onFastForwardUse = function () {\r\n            this.fastForwardWasUsed = true;\r\n            this.destroy();\r\n        };\r\n        FastForwardPopover.prototype.destroy = function (fromScene) {\r\n            this.gameplay.events.off(game.GameplayEvent.TURN_START, this.onTurnStart, this);\r\n            this.gameplay.events.off(game.GameplayEvent.TURN_COMPLETE, this.onTurnComplete, this);\r\n            this.gameplay.events.off(game.GameplayEvent.FAST_FORWARD_START, this.onFastForwardUse, this);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return FastForwardPopover;\r\n    }(Phaser.GameObjects.Container));\r\n    game.FastForwardPopover = FastForwardPopover;\r\n})(game || (game = {}));\r\n///<reference path='BottomPanelButton.ts' />\r\n///<reference path='FastForwardButton.ts' />\r\n///<reference path='boosters/IngameBoostersPanel.ts' />\r\n///<reference path='../FastForwardPopover.ts' />\r\nvar game;\r\n(function (game) {\r\n    var BottomPanel = /** @class */ (function (_super) {\r\n        __extends(BottomPanel, _super);\r\n        function BottomPanel(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"bottom_panel\";\r\n            _this.background.setOrigin(0.5, 0.5);\r\n            _this.background.scaleY = -1;\r\n            _this.background.y += _this.background.height / 2 + 4;\r\n            _this.background.visible = false;\r\n            Phaser.Display.Align.In.TopCenter(_this.container, _this.background, 0, -_this.strokeThickness - _this.verticalMargin);\r\n            _this.padding = 30;\r\n            _this.buttonsY = _this.background.height / 2 - 5;\r\n            _this.addPauseButton();\r\n            _this.addFastForwardButton();\r\n            _this.addDropBallsButton();\r\n            _this.addBoostersPanel();\r\n            _this.container.alpha = 0.001;\r\n            _this.container.visible = false;\r\n            _this.container.setInteractive();\r\n            _this.bringToTop(_this.container);\r\n            _this.turnButtons = [_this.dropBallsButton, _this.fastForwardButton];\r\n            return _this;\r\n        }\r\n        BottomPanel.prototype.addPauseButton = function () {\r\n            this.pauseButton = this.scene.add.button(\"gameplay_gui\", \"button_pause\", this);\r\n            this.pauseButton.x = this.background.left + this.pauseButton.width / 2 + this.padding;\r\n            this.pauseButton.y = this.buttonsY + 4;\r\n        };\r\n        BottomPanel.prototype.addFastForwardButton = function () {\r\n            this.fastForwardButton = new game.FastForwardButton(this.scene, \"gameplay_gui\", \"button_fast_forward_2\", this);\r\n            this.fastForwardButton.x = this.background.right - this.fastForwardButton.width / 2 - this.padding;\r\n            this.fastForwardButton.y = this.buttonsY - 2;\r\n            this.fastForwardButton.originalY = this.fastForwardButton.y;\r\n            this.add(this.fastForwardButton);\r\n        };\r\n        BottomPanel.prototype.addDropBallsButton = function () {\r\n            this.dropBallsButton = new game.BottomPanelButton(this.scene, \"gameplay_gui\", \"button_drop_balls_2\", this);\r\n            this.dropBallsButton.x = this.fastForwardButton.left - this.dropBallsButton.width / 2 - 32;\r\n            this.dropBallsButton.y = this.fastForwardButton.y;\r\n            this.dropBallsButton.originalY = this.dropBallsButton.y;\r\n            this.add(this.dropBallsButton);\r\n        };\r\n        BottomPanel.prototype.addBoostersPanel = function () {\r\n            this.boostersPanel = new game.IngameBoostersPanel(this.scene, this.scene.game.boosters.boosters);\r\n            this.boostersPanel.x = this.background.right - this.boostersPanel.getBounds().width - this.padding;\r\n            this.boostersPanel.y = this.buttonsY - 1;\r\n            this.boostersPanel.originalY = this.boostersPanel.y;\r\n            this.add(this.boostersPanel);\r\n        };\r\n        BottomPanel.prototype.disableInput = function () {\r\n            this.container.visible = true;\r\n        };\r\n        BottomPanel.prototype.enableInput = function () {\r\n            this.container.visible = false;\r\n        };\r\n        BottomPanel.prototype.showTurnButtons = function () {\r\n            var _this = this;\r\n            this.turnButtons.forEach(function (button) {\r\n                button.revive();\r\n                button.enable();\r\n                button.alpha = 0;\r\n                button.y = button.originalY - 10;\r\n                _this.scene.tweens.add({\r\n                    delay: 170,\r\n                    targets: button,\r\n                    duration: 150,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    alpha: 1,\r\n                    y: button.originalY,\r\n                });\r\n            });\r\n        };\r\n        BottomPanel.prototype.hideTurnButtons = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this.turnButtons,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                y: \"+=10\",\r\n                alpha: 0,\r\n            }).on(Phaser.Tweens.Events.TIMELINE_COMPLETE, function () {\r\n                _this.turnButtons.forEach(function (button) { return button.kill(); });\r\n            }).on(Phaser.Tweens.Events.TWEEN_START, function () {\r\n                _this.turnButtons.forEach(function (button) { return button.disable(); });\r\n            });\r\n        };\r\n        return BottomPanel;\r\n    }(game.IngamePanel));\r\n    game.BottomPanel = BottomPanel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BasicBlocksLabel = /** @class */ (function (_super) {\r\n        __extends(BasicBlocksLabel, _super);\r\n        function BasicBlocksLabel(scene, targetItemsType, targetItemsNum) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.blockOriginalScale = 0.42;\r\n            _this.currentItemsNum = 0;\r\n            _this.totalItemsNum = 0;\r\n            _this.name = \"ducks_label\";\r\n            _this.addBlock(targetItemsType);\r\n            _this.addBlockWhiteCopies();\r\n            _this.addText();\r\n            _this.updateTotal(targetItemsNum);\r\n            return _this;\r\n        }\r\n        BasicBlocksLabel.prototype.addBlock = function (targetItemsType) {\r\n            var frame = game.ItemTypeUtil.getFrameName(targetItemsType);\r\n            this.block = this.scene.add.image(0, 0, \"gameplay_gui\", frame);\r\n            this.block.scale = this.blockOriginalScale;\r\n            this.add(this.block);\r\n        };\r\n        BasicBlocksLabel.prototype.addBlockWhiteCopies = function () {\r\n            var _this = this;\r\n            this.blockWhiteCopies = this.scene.add.group({\r\n                defaultKey: \"gameplay_gui\",\r\n                defaultFrame: this.getWhiteBlockFrame(this.block.frame.name),\r\n                name: \"white_copies\",\r\n                createCallback: function (item) {\r\n                    item.x = _this.block.x;\r\n                    item.y = _this.block.y;\r\n                    item.scale = _this.blockOriginalScale;\r\n                    item.active = false;\r\n                    item.visible = false;\r\n                    _this.add(item);\r\n                },\r\n            });\r\n            for (var i = 0; i < 5; i++) {\r\n                this.blockWhiteCopies.create();\r\n            }\r\n        };\r\n        BasicBlocksLabel.prototype.getWhiteBlockFrame = function (originalFrame) {\r\n            var splitIndex = originalFrame.lastIndexOf(\"/\");\r\n            var whiteFrame = originalFrame.substring(0, splitIndex + 1) + \"white\" + originalFrame.substring(splitIndex, originalFrame.length);\r\n            return whiteFrame;\r\n        };\r\n        BasicBlocksLabel.prototype.addText = function () {\r\n            var content = \"0\";\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.BLOCKS_LABEL, content, 22);\r\n            this.text.setTint(game.GameplayGui.FONT_COLOR);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.y = this.block.y + 43;\r\n            this.add(this.text);\r\n        };\r\n        BasicBlocksLabel.prototype.incrementCurrent = function () {\r\n            this.currentItemsNum++;\r\n            this.setTextContent(this.currentItemsNum, this.totalItemsNum);\r\n        };\r\n        BasicBlocksLabel.prototype.updateTotal = function (num) {\r\n            this.totalItemsNum = num;\r\n            this.setTextContent(this.currentItemsNum, this.totalItemsNum);\r\n        };\r\n        BasicBlocksLabel.prototype.setTextContent = function (current, total) {\r\n            var content = current + \"/\" + total;\r\n            this.text.setText(content);\r\n        };\r\n        BasicBlocksLabel.prototype.showWhiteCopy = function () {\r\n            var whiteCopy = this.blockWhiteCopies.getFirstDead(true);\r\n            whiteCopy.revive();\r\n            whiteCopy.scale = this.block.scale;\r\n            whiteCopy.alpha = 0.5;\r\n            this.scene.tweens.add({\r\n                targets: whiteCopy,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                alpha: 0,\r\n                scale: whiteCopy.scale * 2.66,\r\n                onComplete: function () {\r\n                    whiteCopy.kill();\r\n                },\r\n            });\r\n        };\r\n        BasicBlocksLabel.prototype.tweenBlockIcon = function () {\r\n            this.block.scale = this.blockOriginalScale;\r\n            this.scene.tweens.killTweensOf(this.block);\r\n            this.scene.tweens.add({\r\n                targets: this.block,\r\n                duration: 250,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: this.blockOriginalScale * 1.33,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        return BasicBlocksLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BasicBlocksLabel = BasicBlocksLabel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ComplexBlocksLabel = /** @class */ (function (_super) {\r\n        __extends(ComplexBlocksLabel, _super);\r\n        function ComplexBlocksLabel(scene, props) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.props = props;\r\n            _this.name = \"blocks_label\";\r\n            _this.addBack();\r\n            _this.addBlock();\r\n            _this.addText();\r\n            _this.addTick();\r\n            _this.bringToTop(_this.text);\r\n            return _this;\r\n        }\r\n        ComplexBlocksLabel.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", this.props.backFrame);\r\n            this.back.setOrigin(0.5, 0);\r\n            this.add(this.back);\r\n        };\r\n        ComplexBlocksLabel.prototype.addBlock = function () {\r\n            this.block = this.scene.add.image(0, 0, \"gameplay_gui\", game.ItemTypeUtil.getFrameName(game.ItemType.BASIC_BLOCK));\r\n            this.block.scale = 0.94;\r\n            this.block.y = this.back.top + this.block.displayHeight / 2 + 18;\r\n            this.add(this.block);\r\n        };\r\n        ComplexBlocksLabel.prototype.addText = function () {\r\n            var content = \"0/0\";\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"37px\",\r\n                color: \"#\" + this.props.textColor.toString(16),\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setOrigin(0.5, 1);\r\n            this.text.y = this.back.bottom - 8;\r\n            this.add(this.text);\r\n        };\r\n        ComplexBlocksLabel.prototype.addTick = function () {\r\n            var offset = -15;\r\n            this.tick = this.scene.add.image(0, 0, \"gameplay_gui\", this.props.iconFrame);\r\n            this.tick.x = this.back.right + offset;\r\n            this.tick.y = this.back.bottom + offset;\r\n            this.add(this.tick);\r\n        };\r\n        ComplexBlocksLabel.prototype.getHeight = function () {\r\n            return this.back.displayHeight;\r\n        };\r\n        ComplexBlocksLabel.prototype.getDisplayHeight = function () {\r\n            return this.back.displayHeight * this.scaleY;\r\n        };\r\n        ComplexBlocksLabel.prototype.updateData = function (blocksType, currentBlocksNum, totalBlocksNum) {\r\n            this.block.setFrame(game.ItemTypeUtil.getFrameName(blocksType));\r\n            this.text.setText(currentBlocksNum + \"/\" + totalBlocksNum);\r\n        };\r\n        return ComplexBlocksLabel;\r\n    }(Phaser.GameObjects.Container));\r\n    game.ComplexBlocksLabel = ComplexBlocksLabel;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteBall = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteBall, _super);\r\n        function LevelCompleteBall(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"ball_with_shadow\";\r\n            _this._jumpHeight = 80;\r\n            _this.jumpDuration = _this._jumpHeight * 3.8;\r\n            _this.addBall();\r\n            _this.addShadow();\r\n            _this.ball.emit(game.IdleBallEvent.SHOW);\r\n            return _this;\r\n        }\r\n        LevelCompleteBall.prototype.addBall = function () {\r\n            this.ball = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_complete/ball_complete\");\r\n            this.ball.baseY = 0;\r\n            this.ball.jumpHeight = this._jumpHeight;\r\n            this.ball.setOrigin(0.5, 1);\r\n            this.add(this.ball);\r\n        };\r\n        LevelCompleteBall.prototype.addShadow = function () {\r\n            this.shadow = new game.JumpingBallShadow(this.scene, this.ball, \"gameplay_gui\", \"level_complete/ball_complete_shadow\");\r\n            this.add(this.shadow);\r\n        };\r\n        LevelCompleteBall.prototype.playJumpAnimation = function () {\r\n            var _this = this;\r\n            this.ball.scale = 1;\r\n            var deltaScale = 0.15;\r\n            this.scene.tweens.add({\r\n                targets: this.ball,\r\n                duration: this.jumpDuration * 0.66,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: this.ball.scale + deltaScale,\r\n                scaleY: this.ball.scale - deltaScale,\r\n                yoyo: true,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.ball,\r\n                duration: this.jumpDuration,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                y: this.ball.y - this._jumpHeight,\r\n                completeDelay: 33,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.ball,\r\n                        duration: _this.jumpDuration,\r\n                        ease: Phaser.Math.Easing.Linear.Linear,\r\n                        y: _this.ball.y + _this._jumpHeight,\r\n                        onComplete: function () {\r\n                            _this.playJumpAnimation();\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        return LevelCompleteBall;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteBall = LevelCompleteBall;\r\n})(game || (game = {}));\r\n///<reference path='LevelCompleteBall.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelCompletePopup = /** @class */ (function (_super) {\r\n        __extends(LevelCompletePopup, _super);\r\n        function LevelCompletePopup(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"popup\";\r\n            _this.addBack();\r\n            _this.addBanner();\r\n            _this.addBlocksLabel();\r\n            _this.addSeparator();\r\n            _this.addTexts();\r\n            _this.addFox();\r\n            _this.addJumpingDucks();\r\n            _this.align();\r\n            _this.bringToTop(_this.blocksLabel);\r\n            _this.bringToTop(_this.texts);\r\n            _this.bringToTop(_this.bannerText);\r\n            return _this;\r\n        }\r\n        LevelCompletePopup.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_complete/popup_back\");\r\n            this.add(this.back);\r\n        };\r\n        LevelCompletePopup.prototype.addBanner = function () {\r\n            this.bannerBack = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_complete/banner\");\r\n            this.add(this.bannerBack);\r\n            var maxWidth = 360;\r\n            this.bannerText = this.createBannerText();\r\n            this.bannerText.setOrigin(0.5, 0.5);\r\n            this.bannerText.scale = Math.min(1, maxWidth / this.bannerText.width);\r\n            this.add(this.bannerText);\r\n        };\r\n        LevelCompletePopup.prototype.createBannerText = function () {\r\n            var content = _.compact(this.scene.texts.level_complete_titles);\r\n            var text = this.scene.make.text({\r\n                add: false,\r\n                text: _.sample(content),\r\n                style: {\r\n                    fontFamily: game.GameFont.SOUSES,\r\n                    fontStyle: game.FontWeight.BLACK,\r\n                    fontSize: \"55px\",\r\n                    color: \"#FAD353\",\r\n                    align: \"center\",\r\n                },\r\n            });\r\n            text.setShadow(0, 4, \"rgba(0,0,0,0.15)\");\r\n            return text;\r\n        };\r\n        LevelCompletePopup.prototype.addBlocksLabel = function () {\r\n            var props = {\r\n                backFrame: \"level_complete/blocks_label_back\",\r\n                iconFrame: \"level_complete/tick\",\r\n                textColor: 0xba3339,\r\n            };\r\n            this.blocksLabel = new game.ComplexBlocksLabel(this.scene, props);\r\n            this.add(this.blocksLabel);\r\n        };\r\n        LevelCompletePopup.prototype.addSeparator = function () {\r\n            this.separator = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_complete/separator\");\r\n            this.separator.scaleY = 0.75;\r\n            this.add(this.separator);\r\n        };\r\n        LevelCompletePopup.prototype.addTexts = function () {\r\n            var texts = this.createTexts();\r\n            texts.forEach(function (text) { return text.setOrigin(0.5, 0.5); });\r\n            this.texts = this.scene.add.container(0, 0, texts);\r\n            this.texts.name = \"texts\";\r\n            this.texts.gridAlign({\r\n                position: Phaser.Display.Align.TOP_CENTER,\r\n                width: 1,\r\n                cellWidth: this.back.displayWidth,\r\n                cellHeight: 45,\r\n            });\r\n            this.score.y += 6;\r\n            this.add(this.texts);\r\n        };\r\n        LevelCompletePopup.prototype.createTexts = function () {\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"22px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            this.levelNumber = this.scene.make.text({\r\n                text: this.getLevelNumberTextContent(1),\r\n                style: __assign(__assign({}, style), { fontSize: \"42px\", color: \"#AE6334\" }),\r\n                add: false,\r\n            });\r\n            this.score = this.scene.make.text({\r\n                text: this.getScoreTextContent(0),\r\n                style: __assign(__assign({}, style), { fontSize: \"33px\", color: \"#B62C35\" }),\r\n                add: false,\r\n            });\r\n            this.highscore = this.scene.make.text({\r\n                text: this.getHighscoreTextContent(0),\r\n                style: __assign(__assign({}, style), { fontSize: \"33px\", color: \"#B62C35\" }),\r\n                add: false,\r\n            });\r\n            return [this.levelNumber, this.score, this.highscore];\r\n        };\r\n        LevelCompletePopup.prototype.getLevelNumberTextContent = function (levelNumber) {\r\n            var template = this.scene.texts.level_end.level;\r\n            return template.replace(\"#\", levelNumber.toString());\r\n        };\r\n        LevelCompletePopup.prototype.getScoreTextContent = function (score) {\r\n            var template = this.scene.texts.level_end.score;\r\n            return template.replace(\"#\", score.toLocaleString());\r\n        };\r\n        LevelCompletePopup.prototype.getHighscoreTextContent = function (highscore) {\r\n            var template = this.scene.texts.level_end.highscore;\r\n            return template.replace(\"#\", highscore.toLocaleString());\r\n        };\r\n        LevelCompletePopup.prototype.addFox = function () {\r\n            this.fox = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_complete/fox_win\");\r\n            this.add(this.fox);\r\n        };\r\n        LevelCompletePopup.prototype.addJumpingDucks = function () {\r\n            var _this = this;\r\n            this.jumpingDucks = _.times(3, function () {\r\n                var duck = new game.LevelCompleteBall(_this.scene);\r\n                _this.add(duck);\r\n                return duck;\r\n            });\r\n            var centerDuck = this.jumpingDucks[1];\r\n            var rightDuck = this.jumpingDucks[2];\r\n            this.swap(centerDuck, rightDuck);\r\n        };\r\n        LevelCompletePopup.prototype.align = function () {\r\n            this.alignBanner();\r\n            this.alignSeparator();\r\n            this.alignBlocksLabel();\r\n            this.alignTexts();\r\n            this.alignFox();\r\n            this.alignDucks();\r\n        };\r\n        LevelCompletePopup.prototype.alignBanner = function () {\r\n            this.bannerBack.y = this.back.top - 3;\r\n            this.bannerText.y = this.bannerBack.y - 34;\r\n        };\r\n        LevelCompletePopup.prototype.alignSeparator = function () {\r\n            this.separator.y = this.back.y + 16;\r\n        };\r\n        LevelCompletePopup.prototype.alignBlocksLabel = function () {\r\n            var top = this.bannerBack.y;\r\n            var bottom = this.separator.y;\r\n            var height = bottom - top;\r\n            this.blocksLabel.x = this.back.getCenter().x + 2;\r\n            this.blocksLabel.y = top + height / 2 - this.blocksLabel.getHeight() / 2 + 15;\r\n        };\r\n        LevelCompletePopup.prototype.alignTexts = function () {\r\n            var top = this.separator.y;\r\n            var bottom = this.back.bottom;\r\n            var height = bottom - top;\r\n            this.texts.y = top + height / 2 - this.texts.getBounds().height / 2 + 12;\r\n        };\r\n        LevelCompletePopup.prototype.alignFox = function () {\r\n            this.fox.x = this.back.displayWidth * 0.32;\r\n            this.fox.y = this.back.bottom - 70;\r\n        };\r\n        LevelCompletePopup.prototype.alignDucks = function () {\r\n            var baseX = -this.back.displayWidth * 0.33;\r\n            var baseY = this.fox.y;\r\n            var dx = 55;\r\n            var leftDuck = this.jumpingDucks[0];\r\n            leftDuck.x = baseX - dx;\r\n            leftDuck.y = baseY - 20;\r\n            leftDuck.scale = 0.8;\r\n            var centerDuck = this.jumpingDucks[1];\r\n            centerDuck.x = baseX;\r\n            centerDuck.y = baseY;\r\n            centerDuck.scale = 1.05;\r\n            var rightDuck = this.jumpingDucks[2];\r\n            rightDuck.x = baseX + dx;\r\n            rightDuck.y = baseY - 30;\r\n            rightDuck.scale = 0.9;\r\n        };\r\n        LevelCompletePopup.prototype.updateData = function (data) {\r\n            this.blocksLabel.updateData(data.blocksType, data.blocksNum, data.blocksNum);\r\n            this.updateTexts(data.levelNumber, data.score, data.highscore);\r\n        };\r\n        LevelCompletePopup.prototype.updateTexts = function (levelNumber, score, highscore) {\r\n            this.levelNumber.text = this.getLevelNumberTextContent(levelNumber);\r\n            this.score.text = this.getScoreTextContent(score);\r\n            this.highscore.text = this.getHighscoreTextContent(highscore);\r\n        };\r\n        LevelCompletePopup.prototype.resize = function () {\r\n            this.back.displayWidth = (game.Config.GAME_WIDTH + 2) / this.scale;\r\n            this.separator.displayWidth = this.back.displayWidth * 0.8;\r\n            this.alignFox();\r\n            this.alignDucks();\r\n        };\r\n        LevelCompletePopup.prototype.show = function (initialDelay) {\r\n            var dy = 60;\r\n            var originalScale = this.scale;\r\n            this.y += dy;\r\n            this.scale = originalScale * 0.75;\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: initialDelay,\r\n                y: { value: this.y - dy, duration: 600, ease: Phaser.Math.Easing.Back.Out },\r\n                scale: { value: originalScale, duration: 500, ease: Phaser.Math.Easing.Back.Out },\r\n                alpha: { value: 1, duration: 200, ease: Phaser.Math.Easing.Cubic.Out },\r\n            });\r\n            this.showBanner(initialDelay + 200);\r\n            this.showFox(initialDelay + 350);\r\n            this.showDucks();\r\n        };\r\n        LevelCompletePopup.prototype.showBanner = function (delay) {\r\n            this.bannerBack.alpha = 0;\r\n            this.bannerText.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: [this.bannerBack, this.bannerText],\r\n                delay: delay,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.bannerBack.scale = 1.2;\r\n            this.bannerText.scale = 1.2;\r\n            this.scene.tweens.add({\r\n                targets: [this.bannerBack, this.bannerText],\r\n                delay: delay,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1,\r\n            });\r\n            var deltaY = -30;\r\n            this.bannerBack.y += deltaY;\r\n            this.bannerText.y += deltaY;\r\n            this.scene.tweens.add({\r\n                targets: [this.bannerBack, this.bannerText],\r\n                delay: delay,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                y: \"-=\" + deltaY,\r\n            });\r\n        };\r\n        LevelCompletePopup.prototype.showFox = function (delay) {\r\n            this.fox.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.fox,\r\n                delay: delay,\r\n                alpha: { value: 1, duration: 150, ease: Phaser.Math.Easing.Cubic.Out },\r\n            });\r\n            this.fox.scale = 0.6;\r\n            this.scene.tweens.add({\r\n                targets: this.fox,\r\n                duration: 800,\r\n                delay: delay,\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.33],\r\n                scale: 1,\r\n                onComplete: this.animateFox.bind(this),\r\n            });\r\n        };\r\n        LevelCompletePopup.prototype.animateFox = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.fox,\r\n                duration: 550,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleY: 0.97,\r\n                scaleX: 1.02,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        LevelCompletePopup.prototype.showDucks = function () {\r\n            var _this = this;\r\n            this.jumpingDucks.forEach(function (duck, index) {\r\n                var delay = index * 150;\r\n                _this.scene.time.delayedCall(delay, function () {\r\n                    duck.playJumpAnimation();\r\n                });\r\n            });\r\n        };\r\n        LevelCompletePopup.prototype.getWidth = function () {\r\n            return 750;\r\n        };\r\n        LevelCompletePopup.prototype.getHeight = function () {\r\n            return this.back.displayHeight;\r\n        };\r\n        return LevelCompletePopup;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompletePopup = LevelCompletePopup;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteButtons = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteButtons, _super);\r\n        function LevelCompleteButtons(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.cellWidth = 190;\r\n            _this.name = \"buttons\";\r\n            _this.restartButton = _this.scene.add.button(\"gameplay_gui\", \"level_complete/button_restart\", _this);\r\n            _this.nextLevelButton = _this.scene.add.button(\"gameplay_gui\", \"level_complete/button_play\", _this);\r\n            _this.homeButton = _this.scene.add.button(\"gameplay_gui\", \"level_complete/button_menu\", _this);\r\n            _this.buttons = [_this.restartButton, _this.nextLevelButton, _this.homeButton];\r\n            _this.add(_this.buttons);\r\n            var cellHeight = _this.nextLevelButton.height;\r\n            _this.gridAlign({\r\n                position: Phaser.Display.Align.CENTER,\r\n                cellWidth: _this.cellWidth,\r\n                cellHeight: cellHeight,\r\n                width: 3,\r\n                x: _this.cellWidth / 2,\r\n            });\r\n            return _this;\r\n        }\r\n        LevelCompleteButtons.prototype.getWidth = function () {\r\n            return this.length * this.cellWidth;\r\n        };\r\n        LevelCompleteButtons.prototype.show = function (initialDelay) {\r\n            var _this = this;\r\n            this.list.forEach(function (button, index) {\r\n                var deltaY = 60;\r\n                button.alpha = 0;\r\n                button.scale = 0.66;\r\n                button.y += deltaY;\r\n                _this.scene.tweens.add({\r\n                    targets: button,\r\n                    delay: initialDelay + index * 133,\r\n                    alpha: { value: 1, duration: 150, ease: Phaser.Math.Easing.Cubic.Out },\r\n                    scale: { value: 1, duration: 400, ease: Phaser.Math.Easing.Back.Out },\r\n                    y: { value: button.y - deltaY, duration: 500, ease: Phaser.Math.Easing.Back.Out },\r\n                });\r\n            });\r\n        };\r\n        LevelCompleteButtons.prototype.animatePlayButton = function () {\r\n            this.scene.time.addEvent({\r\n                repeat: -1,\r\n                delay: 3000,\r\n                callback: this.shakePlayButton,\r\n                callbackScope: this,\r\n            });\r\n        };\r\n        LevelCompleteButtons.prototype.shakePlayButton = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.nextLevelButton,\r\n                duration: 266,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.1,\r\n                scaleY: 1.1,\r\n                repeat: 2,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        return LevelCompleteButtons;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteButtons = LevelCompleteButtons;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var ConfettiParticle = /** @class */ (function (_super) {\r\n        __extends(ConfettiParticle, _super);\r\n        function ConfettiParticle(scene, frame) {\r\n            var _this = _super.call(this, scene, 0, 0, \"gameplay_gui\", frame) || this;\r\n            _this.angularVelocity = 0;\r\n            _this.deltaScale = 0;\r\n            _this.speedX = 0;\r\n            _this.speedY = 0;\r\n            return _this;\r\n        }\r\n        ConfettiParticle.prototype.onEmit = function () {\r\n            this.active = true;\r\n            this.visible = true;\r\n            this.scaleY = 1;\r\n            this.angularVelocity = Phaser.Math.RND.realInRange(0.1, 0.15) * Phaser.Math.RND.sign();\r\n            this.deltaScale = this.angularVelocity / 20;\r\n            this.speedX = Phaser.Math.RND.realInRange(-0.08, 0.08);\r\n            this.speedY = Phaser.Math.RND.realInRange(0.18, 0.3);\r\n        };\r\n        ConfettiParticle.prototype.preUpdate = function (time, delta) {\r\n            if (!this.visible) {\r\n                return;\r\n            }\r\n            this.x += this.speedX * delta;\r\n            this.y += this.speedY * delta;\r\n            this.angle += this.angularVelocity * delta;\r\n            this.updateScale(delta);\r\n            this.checkOutOfBounds();\r\n        };\r\n        ConfettiParticle.prototype.updateScale = function (delta) {\r\n            this.scaleY += this.deltaScale * delta;\r\n            if (this.scaleY < -1) {\r\n                this.scaleY = -1;\r\n                this.deltaScale *= -1;\r\n            }\r\n            else if (this.scaleY > 1) {\r\n                this.scaleY = 1;\r\n                this.deltaScale *= -1;\r\n            }\r\n        };\r\n        ConfettiParticle.prototype.checkOutOfBounds = function () {\r\n            var offset = 50;\r\n            if (this.y > game.Config.GAME_HEIGHT + offset || this.x < -offset || this.x > game.Config.GAME_WIDTH + offset) {\r\n                this.visible = false;\r\n                this.active = false;\r\n            }\r\n        };\r\n        return ConfettiParticle;\r\n    }(Phaser.GameObjects.Image));\r\n    game.ConfettiParticle = ConfettiParticle;\r\n})(game || (game = {}));\r\n///<reference path='ConfettiParticle.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteConfetti = /** @class */ (function () {\r\n        function LevelCompleteConfetti(scene, particlesNum) {\r\n            if (particlesNum === void 0) { particlesNum = 100; }\r\n            this.timer = 0;\r\n            this.frequency = 66;\r\n            this.amount = 1;\r\n            this.scene = scene;\r\n            this.frames = [1, 2, 3].map(function (num) { return \"level_complete/confetti/particle_Confetti_\" + num; });\r\n            this.createParticles(particlesNum);\r\n        }\r\n        LevelCompleteConfetti.prototype.createParticles = function (particlesNum) {\r\n            var _this = this;\r\n            this.particles = _.times(particlesNum, function (index) { return _this.createNewParticle(); });\r\n        };\r\n        LevelCompleteConfetti.prototype.createNewParticle = function () {\r\n            var frame = Phaser.Math.RND.pick(this.frames);\r\n            var p = new game.ConfettiParticle(this.scene, frame);\r\n            p.setDepth(game.GameplayGuiDepth.COMPLETE_SCREEN_CONFETTI);\r\n            p.kill();\r\n            this.scene.add.existing(p);\r\n            return p;\r\n        };\r\n        LevelCompleteConfetti.prototype.update = function (delta) {\r\n            this.emit(delta);\r\n        };\r\n        LevelCompleteConfetti.prototype.emit = function (delta) {\r\n            this.timer += delta;\r\n            if (this.timer > this.frequency) {\r\n                this.timer -= this.frequency;\r\n                this.doEmit();\r\n            }\r\n        };\r\n        LevelCompleteConfetti.prototype.doEmit = function () {\r\n            for (var i = 0; i < this.amount; i++) {\r\n                var p = this.particles.find(function (p) { return p.active === false; });\r\n                if (!p) {\r\n                    p = this.createNewParticle();\r\n                    this.particles.push(p);\r\n                }\r\n                p.x = Phaser.Math.RND.between(0, game.Config.GAME_WIDTH);\r\n                p.y = 0;\r\n                p.onEmit();\r\n            }\r\n        };\r\n        LevelCompleteConfetti.prototype.destroy = function (fromScene) {\r\n            this.particles.forEach(function (p) { return p.destroy(fromScene); });\r\n            this.particles.length = 0;\r\n        };\r\n        return LevelCompleteConfetti;\r\n    }());\r\n    game.LevelCompleteConfetti = LevelCompleteConfetti;\r\n})(game || (game = {}));\r\n///<reference path='stars/LevelCompleteStars.ts' />\r\n///<reference path='LevelCompletePopup.ts' />\r\n///<reference path='LevelCompleteButtons.ts' />\r\n///<reference path='confetti/LevelCompleteConfetti.ts' />\r\nvar game;\r\n(function (game) {\r\n    var LevelCompleteScreen = /** @class */ (function (_super) {\r\n        __extends(LevelCompleteScreen, _super);\r\n        function LevelCompleteScreen(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.backgroundAlpha = 0.75;\r\n            _this.name = \"complete_screen\";\r\n            _this.addBack();\r\n            _this.addStars();\r\n            _this.addPopup();\r\n            _this.addButtons();\r\n            _this.bringToTop(_this.popup);\r\n            return _this;\r\n        }\r\n        LevelCompleteScreen.prototype.addBack = function () {\r\n            this.background = this.scene.add.image(0, 0, \"gameplay_gui\", \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.add(this.background);\r\n        };\r\n        LevelCompleteScreen.prototype.addStars = function () {\r\n            var props = {\r\n                atlas: \"gameplay_gui\",\r\n                activeStarFrame: \"level_complete/star_with_glow\",\r\n                inactiveStarFrame: \"level_complete/star_inactive\",\r\n                whiteStarFrame: \"level_complete/star_white\",\r\n            };\r\n            this.stars = new game.LevelCompleteStars(this.scene, props);\r\n            this.stars.addEmitter(\"gameplay_gui\", \"level_complete/particle_star_4\", game.GameplayGuiDepth.COMPLETE_SCREEN_PARTICLES);\r\n            this.add(this.stars);\r\n        };\r\n        LevelCompleteScreen.prototype.addPopup = function () {\r\n            this.popup = new game.LevelCompletePopup(this.scene);\r\n            this.add(this.popup);\r\n        };\r\n        LevelCompleteScreen.prototype.addButtons = function () {\r\n            this.buttons = new game.LevelCompleteButtons(this.scene);\r\n            this.add(this.buttons);\r\n        };\r\n        LevelCompleteScreen.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.alignPopup();\r\n            this.alignStars();\r\n            this.alignButtons();\r\n        };\r\n        LevelCompleteScreen.prototype.resizeBackground = function () {\r\n            this.background.setDisplaySize(game.Config.GAME_WIDTH + 4, game.Config.GAME_HEIGHT + 4);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        LevelCompleteScreen.prototype.alignPopup = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH;\r\n            var maxHeight = game.Config.GAME_HEIGHT * 0.35;\r\n            var scaleX = maxWidth / this.popup.getWidth();\r\n            var scaleY = maxHeight / this.popup.getHeight();\r\n            this.popup.scale = Math.min(scaleX, scaleY);\r\n            this.popup.resize();\r\n            this.popup.x = game.Config.HALF_GAME_WIDTH;\r\n            this.popup.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        LevelCompleteScreen.prototype.alignStars = function () {\r\n            var popupTop = this.popup.y - (this.popup.getHeight() * this.popup.scale) / 2;\r\n            this.stars.scale = this.popup.scale;\r\n            this.stars.x = game.Config.HALF_GAME_WIDTH;\r\n            this.stars.y = popupTop - 225 * this.popup.scale;\r\n        };\r\n        LevelCompleteScreen.prototype.alignButtons = function () {\r\n            var popupBottom = this.popup.y + (this.popup.getHeight() * this.popup.scale) / 2;\r\n            this.buttons.scale = this.popup.scale;\r\n            this.buttons.x = (game.Config.GAME_WIDTH - this.buttons.getWidth() * this.buttons.scale) / 2;\r\n            this.buttons.y = popupBottom + this.buttons.getBounds().height / 2 + 100 * this.buttons.scale;\r\n        };\r\n        LevelCompleteScreen.prototype.updateData = function (data) {\r\n            this.stars.updateData(data.stars);\r\n            this.popup.updateData(data);\r\n        };\r\n        LevelCompleteScreen.prototype.show = function () {\r\n            this.revive();\r\n            this.resize();\r\n            this.playSound();\r\n            var delay = 100;\r\n            this.showBackground();\r\n            this.showPopup(delay + 200);\r\n            this.showButtons(delay + 400);\r\n            this.showStars(delay + 450);\r\n            this.fadeOutSound(delay + 450);\r\n            this.showConfetti();\r\n        };\r\n        LevelCompleteScreen.prototype.playSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.LEVEL_COMPLETE)) {\r\n                this.sound = this.scene.sound.add(game.GameSoundKey.LEVEL_COMPLETE);\r\n                this.sound.play(\"\", { volume: 1, delay: 0.45 });\r\n            }\r\n        };\r\n        LevelCompleteScreen.prototype.showBackground = function () {\r\n            this.background.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: this.backgroundAlpha,\r\n            });\r\n        };\r\n        LevelCompleteScreen.prototype.showPopup = function (initialDelay) {\r\n            this.popup.show(initialDelay);\r\n        };\r\n        LevelCompleteScreen.prototype.showStars = function (initialDelay) {\r\n            var _this = this;\r\n            this.stars.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.stars,\r\n                delay: initialDelay,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            var deltaY = 50;\r\n            this.stars.y -= deltaY;\r\n            this.scene.tweens.add({\r\n                targets: this.stars,\r\n                delay: initialDelay,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                y: this.stars.y + deltaY,\r\n                onComplete: function () {\r\n                    _this.stars.startFloating();\r\n                    _this.stars.showActiveStars(0);\r\n                },\r\n            });\r\n        };\r\n        LevelCompleteScreen.prototype.fadeOutSound = function (initialDelay) {\r\n            if (!this.sound || this.stars.activeStarsNum === 0) {\r\n                return;\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this.sound,\r\n                delay: initialDelay + 350,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                volume: 0.5,\r\n            });\r\n        };\r\n        LevelCompleteScreen.prototype.showButtons = function (initialDelay) {\r\n            this.buttons.show(initialDelay);\r\n            this.buttons.animatePlayButton();\r\n        };\r\n        LevelCompleteScreen.prototype.showConfetti = function () {\r\n            this.confetti = new game.LevelCompleteConfetti(this.scene);\r\n        };\r\n        LevelCompleteScreen.prototype.preUpdate = function (time, delta) {\r\n            if (this.confetti) {\r\n                this.confetti.update(delta);\r\n            }\r\n        };\r\n        LevelCompleteScreen.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n            if (this.sound) {\r\n                this.sound.stop();\r\n                this.sound = null;\r\n            }\r\n            if (this.confetti) {\r\n                this.confetti.destroy(fromScene);\r\n                this.confetti = null;\r\n            }\r\n        };\r\n        return LevelCompleteScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelCompleteScreen = LevelCompleteScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelFailedPopup = /** @class */ (function (_super) {\r\n        __extends(LevelFailedPopup, _super);\r\n        function LevelFailedPopup(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"popup\";\r\n            _this.addBack();\r\n            _this.addBanner();\r\n            _this.addBlocksLabel();\r\n            _this.addSeparator();\r\n            _this.addTexts();\r\n            _this.addButtons();\r\n            _this.align();\r\n            _this.bringToTop(_this.texts);\r\n            _this.bringToTop(_this.banner);\r\n            return _this;\r\n        }\r\n        LevelFailedPopup.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_failed/popup_back\");\r\n            this.add(this.back);\r\n        };\r\n        LevelFailedPopup.prototype.addBanner = function () {\r\n            var bannerBack = this.scene.make.image({\r\n                key: \"gameplay_gui\",\r\n                frame: \"level_failed/banner\",\r\n                add: false,\r\n            });\r\n            var maxWidth = 360;\r\n            var bannerText = this.createBannerText();\r\n            bannerText.setOrigin(0.5, 0.5);\r\n            bannerText.scale = Math.min(1, maxWidth / bannerText.width);\r\n            bannerText.y = -60;\r\n            this.banner = this.scene.add.container(0, 0, [bannerBack, bannerText]);\r\n            this.add(this.banner);\r\n        };\r\n        LevelFailedPopup.prototype.createBannerText = function () {\r\n            var content = this.scene.texts.level_failed_titles;\r\n            var text = this.scene.make.text({\r\n                add: false,\r\n                text: _.sample(content),\r\n                style: {\r\n                    fontFamily: game.GameFont.SOUSES,\r\n                    fontStyle: game.FontWeight.BLACK,\r\n                    fontSize: \"55px\",\r\n                    color: \"#B8B8B8\",\r\n                    align: \"center\",\r\n                },\r\n            });\r\n            text.setShadow(0, 4, \"rgba(0,0,0,0.15)\");\r\n            return text;\r\n        };\r\n        LevelFailedPopup.prototype.addBlocksLabel = function () {\r\n            var props = {\r\n                backFrame: \"level_failed/blocks_label_back_gray\",\r\n                iconFrame: \"level_failed/cross\",\r\n                textColor: 0x474e52,\r\n            };\r\n            this.blocksLabel = new game.ComplexBlocksLabel(this.scene, props);\r\n            this.add(this.blocksLabel);\r\n        };\r\n        LevelFailedPopup.prototype.addSeparator = function () {\r\n            this.separator = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_failed/separator\");\r\n            this.separator.scaleY = 0.75;\r\n            this.add(this.separator);\r\n        };\r\n        LevelFailedPopup.prototype.addTexts = function () {\r\n            var texts = this.createTexts();\r\n            texts.forEach(function (text) { return text.setOrigin(0.5, 0.5); });\r\n            this.texts = this.scene.add.container(0, 0, texts);\r\n            this.texts.name = \"texts\";\r\n            this.texts.gridAlign({\r\n                position: Phaser.Display.Align.TOP_CENTER,\r\n                width: 1,\r\n                cellWidth: this.back.displayWidth,\r\n                cellHeight: 45,\r\n            });\r\n            this.score.y += 6;\r\n            this.add(this.texts);\r\n        };\r\n        LevelFailedPopup.prototype.createTexts = function () {\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"22px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            this.levelNumber = this.scene.make.text({\r\n                text: this.getLevelNumberTextContent(1),\r\n                style: __assign(__assign({}, style), { fontSize: \"42px\", color: \"#444B4F\" }),\r\n                add: false,\r\n            });\r\n            this.score = this.scene.make.text({\r\n                text: this.getScoreTextContent(0),\r\n                style: __assign(__assign({}, style), { fontSize: \"33px\", color: \"#676B6E\" }),\r\n                add: false,\r\n            });\r\n            return [this.levelNumber, this.score];\r\n        };\r\n        LevelFailedPopup.prototype.getLevelNumberTextContent = function (levelNumber) {\r\n            var template = this.scene.texts.level_end.level;\r\n            return template.replace(\"#\", levelNumber.toString());\r\n        };\r\n        LevelFailedPopup.prototype.getScoreTextContent = function (score) {\r\n            var template = this.scene.texts.level_end.score;\r\n            return template.replace(\"#\", score.toLocaleString());\r\n        };\r\n        LevelFailedPopup.prototype.addButtons = function () {\r\n            this.homeButton = this.scene.add.button(\"gameplay_gui\", \"level_failed/button_menu\", this);\r\n            this.restartButton = this.scene.add.button(\"gameplay_gui\", \"level_failed/button_restart\", this);\r\n        };\r\n        LevelFailedPopup.prototype.align = function () {\r\n            this.alignBanner();\r\n            this.alignSeparator();\r\n            this.alignBlocksLabel();\r\n            this.alignTexts();\r\n            this.alignButtons();\r\n        };\r\n        LevelFailedPopup.prototype.alignBanner = function () {\r\n            this.banner.x = -9;\r\n            this.banner.y = this.back.top + 20;\r\n        };\r\n        LevelFailedPopup.prototype.alignSeparator = function () {\r\n            this.separator.y = this.back.y + 54;\r\n        };\r\n        LevelFailedPopup.prototype.alignBlocksLabel = function () {\r\n            var top = Phaser.Display.Bounds.GetBottom(this.banner);\r\n            var bottom = this.separator.y;\r\n            var height = bottom - top;\r\n            this.blocksLabel.x = this.back.getCenter().x;\r\n            this.blocksLabel.y = top + height / 2 - this.blocksLabel.getHeight() / 2;\r\n        };\r\n        LevelFailedPopup.prototype.alignTexts = function () {\r\n            var top = this.separator.y;\r\n            var bottom = this.back.bottom;\r\n            var height = bottom - top;\r\n            this.texts.y = top + height / 2 - this.texts.getBounds().height / 2 + 15;\r\n        };\r\n        LevelFailedPopup.prototype.alignButtons = function () {\r\n            var offsetX = this.back.displayWidth * 0.3;\r\n            var y = this.back.bottom;\r\n            this.homeButton.x = -offsetX;\r\n            this.homeButton.y = y;\r\n            this.restartButton.x = offsetX;\r\n            this.restartButton.y = y;\r\n        };\r\n        LevelFailedPopup.prototype.updateData = function (data) {\r\n            this.blocksLabel.updateData(data.targetBlocksType, data.blocksKilled, data.blocksRequired);\r\n            this.updateTexts(data.levelNumber, data.score);\r\n        };\r\n        LevelFailedPopup.prototype.updateTexts = function (levelNumber, score) {\r\n            this.levelNumber.text = this.getLevelNumberTextContent(levelNumber);\r\n            this.score.text = this.getScoreTextContent(score);\r\n        };\r\n        LevelFailedPopup.prototype.resize = function () {\r\n            this.back.displayWidth = game.Config.GAME_WIDTH / this.scaleX;\r\n            this.separator.displayWidth = this.back.displayWidth * 0.8;\r\n            this.alignButtons();\r\n        };\r\n        LevelFailedPopup.prototype.show = function (initialDelay) {\r\n            var dy = 50;\r\n            this.y += dy;\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: initialDelay,\r\n                y: { value: this.y - dy, duration: 700, ease: Phaser.Math.Easing.Back.Out },\r\n                alpha: { value: 1, duration: 200, ease: Phaser.Math.Easing.Cubic.Out },\r\n            });\r\n            this.showButtons(initialDelay + 600);\r\n        };\r\n        LevelFailedPopup.prototype.showButtons = function (initialDelay) {\r\n            var _this = this;\r\n            var buttons = [this.homeButton, this.restartButton];\r\n            buttons.forEach(function (button) {\r\n                button.alpha = 0;\r\n                button.scale = 1.33;\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: buttons,\r\n                delay: initialDelay,\r\n                alpha: { value: 1, duration: 200, ease: Phaser.Math.EasingString.Cubic },\r\n                scale: { value: 1, duration: 560, ease: Phaser.Math.EasingString.Cubic },\r\n            }).on(Phaser.Tweens.Events.TWEEN_COMPLETE, function () {\r\n                _this.animateRestartButton();\r\n            });\r\n        };\r\n        LevelFailedPopup.prototype.animateRestartButton = function () {\r\n            this.scene.time.addEvent({\r\n                repeat: -1,\r\n                delay: 3500,\r\n                startAt: 3000,\r\n                callback: this.shakeRestartButton,\r\n                callbackScope: this,\r\n            });\r\n        };\r\n        LevelFailedPopup.prototype.shakeRestartButton = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.restartButton,\r\n                duration: 320,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.15,\r\n                scaleY: 1.15,\r\n                repeat: 2,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        LevelFailedPopup.prototype.getWidth = function () {\r\n            return 750;\r\n        };\r\n        LevelFailedPopup.prototype.getHeight = function () {\r\n            return this.back.displayHeight;\r\n        };\r\n        return LevelFailedPopup;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelFailedPopup = LevelFailedPopup;\r\n})(game || (game = {}));\r\n///<reference path='LevelFailedPopup.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var LevelFailedScreen = /** @class */ (function (_super) {\r\n        __extends(LevelFailedScreen, _super);\r\n        function LevelFailedScreen(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.backgroundAlpha = 0.75;\r\n            _this.name = \"failed_screen\";\r\n            _this.addBack();\r\n            _this.addShine();\r\n            _this.addCryingFox();\r\n            _this.addPopup();\r\n            _this.addTears();\r\n            _this.createRainEmitter();\r\n            _this.buttons = [_this.restartButton, _this.homeButton];\r\n            return _this;\r\n        }\r\n        Object.defineProperty(LevelFailedScreen.prototype, \"restartButton\", {\r\n            get: function () {\r\n                return this.popup.restartButton;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(LevelFailedScreen.prototype, \"homeButton\", {\r\n            get: function () {\r\n                return this.popup.homeButton;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        LevelFailedScreen.prototype.addBack = function () {\r\n            this.background = this.scene.add.image(0, 0, \"gameplay_gui\", \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.add(this.background);\r\n        };\r\n        LevelFailedScreen.prototype.addShine = function () {\r\n            this.shine = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_failed/gray\");\r\n            this.add(this.shine);\r\n        };\r\n        LevelFailedScreen.prototype.addCryingFox = function () {\r\n            this.fox = this.scene.add.image(0, 0, \"gameplay_gui\", \"level_failed/crying_fox\");\r\n            this.add(this.fox);\r\n        };\r\n        LevelFailedScreen.prototype.addPopup = function () {\r\n            this.popup = new game.LevelFailedPopup(this.scene);\r\n            this.add(this.popup);\r\n        };\r\n        LevelFailedScreen.prototype.addTears = function () {\r\n            this.particles = this.scene.add.particles(\"gameplay_gui\");\r\n            this.tearsEmitter = this.createTearEmitter();\r\n            this.rainEmitter = this.createRainEmitter();\r\n            this.add(this.particles);\r\n            this.particles.visible = false;\r\n            this.particles.active = false;\r\n        };\r\n        LevelFailedScreen.prototype.createTearEmitter = function () {\r\n            var _this = this;\r\n            var sign = 1;\r\n            var lifespan = 1500;\r\n            return this.particles.createEmitter({\r\n                frame: \"level_failed/particle_tear\",\r\n                lifespan: lifespan,\r\n                speedY: 50,\r\n                gravityY: 50,\r\n                frequency: 700,\r\n                quantity: 1,\r\n                x: {\r\n                    onEmit: function () {\r\n                        sign *= -1;\r\n                        return _this.fox.x + sign * 18 * _this.fox.scaleX;\r\n                    },\r\n                },\r\n                y: {\r\n                    onEmit: function () {\r\n                        return _this.fox.y - 138 * _this.fox.scaleY;\r\n                    },\r\n                },\r\n                emitCallback: function (particle) {\r\n                    var fadeOutDuration = 400;\r\n                    _this.scene.tweens.add({\r\n                        targets: particle,\r\n                        duration: fadeOutDuration,\r\n                        ease: Phaser.Math.Easing.Cubic.Out,\r\n                        alpha: 0,\r\n                        delay: lifespan - fadeOutDuration,\r\n                    });\r\n                },\r\n                on: false,\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.createRainEmitter = function () {\r\n            return this.particles.createEmitter({\r\n                frame: \"level_failed/particle_rain\",\r\n                lifespan: {\r\n                    onEmit: function () {\r\n                        return game.Config.GAME_HEIGHT * 2.5;\r\n                    },\r\n                },\r\n                scale: { min: 0.66, max: 1 },\r\n                alpha: { start: 1, end: 0.2, ease: EasingString.Cubic },\r\n                gravityY: 1500,\r\n                frequency: 100,\r\n                quantity: 1,\r\n                y: -938,\r\n                x: {\r\n                    onEmit: function () {\r\n                        return Phaser.Math.RND.between(0, game.Config.GAME_WIDTH);\r\n                    },\r\n                },\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.alignPopup();\r\n            this.alignFox();\r\n            this.alignShine();\r\n        };\r\n        LevelFailedScreen.prototype.resizeBackground = function () {\r\n            this.background.setDisplaySize(game.Config.GAME_WIDTH + 4, game.Config.GAME_HEIGHT + 4);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        LevelFailedScreen.prototype.alignPopup = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH;\r\n            var maxHeight = game.Config.GAME_HEIGHT * 0.31;\r\n            var scaleX = maxWidth / this.popup.getWidth();\r\n            var scaleY = maxHeight / this.popup.getHeight();\r\n            this.popup.scale = Math.min(scaleX, scaleY);\r\n            this.popup.resize();\r\n            this.popup.x = game.Config.HALF_GAME_WIDTH;\r\n            this.popup.y = game.Config.GAME_HEIGHT * 0.6;\r\n        };\r\n        LevelFailedScreen.prototype.alignFox = function () {\r\n            var isTweening = this.scene.tweens.getTweensOf(this.fox).length > 0;\r\n            if (isTweening) {\r\n                this.scene.tweens.killTweensOf(this.fox);\r\n            }\r\n            this.fox.scale = this.popup.scale;\r\n            this.fox.x = game.Config.HALF_GAME_WIDTH;\r\n            this.fox.y = this.popup.y - ((this.popup.getHeight() + 40) * this.popup.scale) / 2;\r\n            if (isTweening) {\r\n                this.animateFox(this.fox.scale);\r\n            }\r\n        };\r\n        LevelFailedScreen.prototype.alignShine = function () {\r\n            this.shine.scale = (game.Config.GAME_WIDTH * 1.2) / this.shine.width;\r\n            this.shine.x = this.fox.x;\r\n            this.shine.y = this.fox.getTopCenter().y + 70 * this.fox.scale;\r\n        };\r\n        LevelFailedScreen.prototype.updateData = function (data) {\r\n            this.popup.updateData(data);\r\n        };\r\n        LevelFailedScreen.prototype.show = function () {\r\n            this.revive();\r\n            this.resize();\r\n            this.playSound();\r\n            this.showBackground();\r\n            this.showPopup(200);\r\n            this.showFox(400);\r\n            this.showShine(500);\r\n            this.particles.visible = true;\r\n            this.particles.active = true;\r\n        };\r\n        LevelFailedScreen.prototype.playSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.LEVEL_FAILED)) {\r\n                this.sound = this.scene.sound.add(game.GameSoundKey.LEVEL_FAILED);\r\n                this.sound.play(\"\", { delay: 0.33 });\r\n            }\r\n        };\r\n        LevelFailedScreen.prototype.showBackground = function () {\r\n            this.background.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: this.backgroundAlpha,\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.showPopup = function (initialDelay) {\r\n            this.popup.show(initialDelay);\r\n        };\r\n        LevelFailedScreen.prototype.showFox = function (initialDelay) {\r\n            var _this = this;\r\n            var originalScale = this.fox.scale;\r\n            this.fox.alpha = 0;\r\n            this.fox.scale = originalScale * 0.75;\r\n            this.scene.tweens.add({\r\n                targets: this.fox,\r\n                delay: initialDelay,\r\n                alpha: { value: 1, duration: 150, ease: Phaser.Math.Easing.Cubic.Out },\r\n                scale: { value: originalScale, duration: 800, ease: Phaser.Math.Easing.Back.Out },\r\n                onComplete: function () {\r\n                    _this.tearsEmitter.on = true;\r\n                    _this.animateFox(originalScale);\r\n                },\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.animateFox = function (originalScale) {\r\n            this.scene.tweens.add({\r\n                targets: this.fox,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: originalScale * 1.01,\r\n                scaleY: originalScale * 0.97,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.showShine = function (initialDelay) {\r\n            this.shine.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.shine,\r\n                duration: 1000,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n                delay: initialDelay,\r\n            });\r\n        };\r\n        LevelFailedScreen.prototype.destroy = function (fromScene) {\r\n            if (this.sound) {\r\n                this.sound.stop();\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return LevelFailedScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.LevelFailedScreen = LevelFailedScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayGuiDepth;\r\n    (function (GameplayGuiDepth) {\r\n        GameplayGuiDepth[GameplayGuiDepth[\"COLLECTED_BLOCKS\"] = 1] = \"COLLECTED_BLOCKS\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"GIFT_SCREEN\"] = 2] = \"GIFT_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"BOTTOM_PANEL\"] = 3] = \"BOTTOM_PANEL\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"TUTORIAL_SCREEN\"] = 4] = \"TUTORIAL_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"PAUSE_SCREEN\"] = 5] = \"PAUSE_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"FREE_BOOSTERS_SCREEN\"] = 6] = \"FREE_BOOSTERS_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"SECOND_CHANCE_SCREEN\"] = 7] = \"SECOND_CHANCE_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"COMPLETE_SCREEN\"] = 8] = \"COMPLETE_SCREEN\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"COMPLETE_SCREEN_PARTICLES\"] = 9] = \"COMPLETE_SCREEN_PARTICLES\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"COMPLETE_SCREEN_CONFETTI\"] = 10] = \"COMPLETE_SCREEN_CONFETTI\";\r\n        GameplayGuiDepth[GameplayGuiDepth[\"FAILED_SCREEN\"] = 11] = \"FAILED_SCREEN\";\r\n    })(GameplayGuiDepth = game.GameplayGuiDepth || (game.GameplayGuiDepth = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TutorialText = /** @class */ (function (_super) {\r\n        __extends(TutorialText, _super);\r\n        function TutorialText(scene, textContent) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.backShadowOffset = 6;\r\n            _this.name = \"tutorial_text\";\r\n            _this.addFox();\r\n            _this.addBack();\r\n            _this.addFoxPaws();\r\n            _this.addCloseButton();\r\n            _this.addText(textContent);\r\n            _this.align();\r\n            return _this;\r\n        }\r\n        TutorialText.prototype.addFox = function () {\r\n            this.fox = this.scene.add.image(0, 0, \"gameplay_gui\", \"tutorial/fox\");\r\n            this.add(this.fox);\r\n        };\r\n        TutorialText.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"tutorial/back\");\r\n            this.add(this.back);\r\n        };\r\n        TutorialText.prototype.addFoxPaws = function () {\r\n            this.foxPaws = this.scene.add.image(0, 0, \"gameplay_gui\", \"tutorial/fox_paws\");\r\n            this.add(this.foxPaws);\r\n        };\r\n        TutorialText.prototype.addText = function (content) {\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"32px\",\r\n                color: \"#B72C35\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.setWordWrapWidth(this.back.width * 0.85);\r\n            this.text.setLineSpacing(-3);\r\n            this.text.y -= this.backShadowOffset / 2;\r\n            this.add(this.text);\r\n        };\r\n        TutorialText.prototype.addCloseButton = function () {\r\n            this.closeButton = this.scene.add.button(\"gameplay_gui\", \"tutorial/button_close\", this);\r\n        };\r\n        TutorialText.prototype.align = function () {\r\n            this.fox.x = this.back.left + 110;\r\n            this.fox.y = this.back.top;\r\n            this.foxPaws.x = this.fox.x;\r\n            this.foxPaws.y = this.fox.y + 6;\r\n            this.closeButton.x = this.back.right;\r\n            this.closeButton.y = this.back.top;\r\n            this.alignText();\r\n        };\r\n        TutorialText.prototype.alignText = function () {\r\n            var maxHeight = this.back.height * 0.7;\r\n            this.text.scale = 1;\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n        };\r\n        TutorialText.prototype.show = function (initialDelay) {\r\n            var textOriginalScale = this.text.scale;\r\n            this.text.scale *= 0.8;\r\n            this.scene.tweens.add({\r\n                targets: this.text,\r\n                scale: { value: textOriginalScale, ease: Phaser.Math.Easing.Back.Out, duration: 500 },\r\n                alpha: { start: 0, to: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 150 },\r\n                delay: initialDelay,\r\n            });\r\n            this.playWhooshSound();\r\n        };\r\n        TutorialText.prototype.playWhooshSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.WINNING_BALL_WHOOSH)) {\r\n                this.scene.sound.play(game.GameSoundKey.WINNING_BALL_WHOOSH, { volume: 0.66, delay: 0.33 });\r\n            }\r\n        };\r\n        TutorialText.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        TutorialText.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        return TutorialText;\r\n    }(Phaser.GameObjects.Container));\r\n    game.TutorialText = TutorialText;\r\n})(game || (game = {}));\r\n///<reference path='TutorialText.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var TutorialEvent;\r\n    (function (TutorialEvent) {\r\n        TutorialEvent[\"COMPLETE\"] = \"tutorial_complete\";\r\n    })(TutorialEvent = game.TutorialEvent || (game.TutorialEvent = {}));\r\n    var TutorialScreen = /** @class */ (function (_super) {\r\n        __extends(TutorialScreen, _super);\r\n        function TutorialScreen(scene, config) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"tutorial\";\r\n            _this.config = config;\r\n            _this.addBackdrop();\r\n            _this.addWindow();\r\n            _this.addText();\r\n            var isCanvasRenderer = _this.scene.game.rendererType === game.RendererType.CANVAS;\r\n            if (isCanvasRenderer === false) {\r\n                _this.backdrop.mask = _this.window.createGeometryMask();\r\n                _this.backdrop.mask.invertAlpha = true;\r\n            }\r\n            else {\r\n                _this.backdrop.kill();\r\n                _this.window.kill();\r\n            }\r\n            return _this;\r\n        }\r\n        TutorialScreen.prototype.addBackdrop = function () {\r\n            this.backdrop = this.scene.add.image(0, 0, \"gameplay_gui\", \"black_rect\");\r\n            this.backdrop.alpha = 0.8;\r\n            this.add(this.backdrop);\r\n        };\r\n        TutorialScreen.prototype.addWindow = function () {\r\n            this.window = this.scene.make.graphics({\r\n                fillStyle: { color: 0xff0000, alpha: 1 },\r\n            });\r\n            var width = this.config.width;\r\n            var height = this.config.height;\r\n            this.window.fillRoundedRect(-width / 2, -height / 2, width, height);\r\n        };\r\n        TutorialScreen.prototype.addText = function () {\r\n            var textContent = this.scene.texts.tutorial[this.config.textKey];\r\n            if (!textContent) {\r\n                console.warn(\"Add text for this tutorial! [tutorialKey = \" + this.config.textKey + \"]\");\r\n                textContent = this.config.text;\r\n            }\r\n            this.popup = new game.TutorialText(this.scene, textContent);\r\n            this.popup.closeButton.once(ButtonEvent.PRESS, this.onCloseButtonClick, this);\r\n            this.add(this.popup);\r\n        };\r\n        TutorialScreen.prototype.onCloseButtonClick = function () {\r\n            this.emit(TutorialEvent.COMPLETE, this);\r\n            this.hide();\r\n        };\r\n        TutorialScreen.prototype.show = function (initialDelay) {\r\n            this.showText(initialDelay);\r\n            this.animateWindow();\r\n        };\r\n        TutorialScreen.prototype.showText = function (initialDelay) {\r\n            var deltaY = 250;\r\n            this.popup.y += deltaY;\r\n            this.scene.tweens.add({\r\n                targets: this.popup,\r\n                delay: initialDelay,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                y: this.popup.y - deltaY,\r\n            });\r\n            var originalScale = this.popup.scale;\r\n            this.popup.scale *= 0.8;\r\n            this.scene.tweens.add({\r\n                delay: initialDelay,\r\n                targets: this.popup,\r\n                duration: 400,\r\n                scale: originalScale,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n            });\r\n            this.popup.alpha = 0;\r\n            this.scene.tweens.add({\r\n                delay: initialDelay,\r\n                targets: this.popup,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.popup.show(initialDelay + 150);\r\n        };\r\n        TutorialScreen.prototype.animateWindow = function () {\r\n            if (!this.config.tweenMask) {\r\n                return;\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this.window,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: this.window.scale * this.config.tweenScale,\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        TutorialScreen.prototype.hide = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.popup,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                scale: 0.33,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.popup,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                y: \"+=250\",\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.popup,\r\n                duration: 200,\r\n                delay: 250,\r\n                ease: Phaser.Math.Easing.Cubic.In,\r\n                alpha: 0,\r\n                onComplete: this.onHideComplete.bind(this),\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.backdrop,\r\n                duration: 200,\r\n                delay: 300,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n            });\r\n        };\r\n        TutorialScreen.prototype.onHideComplete = function () {\r\n            this.visible = false;\r\n            this.active = false;\r\n            this.scene.tweens.killTweensOf(this.window);\r\n        };\r\n        TutorialScreen.prototype.resize = function (field) {\r\n            this.resizeBackdrop();\r\n            this.resizeWindow(field);\r\n            this.resizeText(field);\r\n        };\r\n        TutorialScreen.prototype.resizeBackdrop = function () {\r\n            this.backdrop.setDisplaySize(game.Config.GAME_WIDTH + 2, game.Config.GAME_HEIGHT + 2);\r\n            this.backdrop.x = game.Config.HALF_GAME_WIDTH;\r\n            this.backdrop.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        TutorialScreen.prototype.resizeWindow = function (field) {\r\n            var camera = field.camera;\r\n            var cameraPadding = camera.getPadding();\r\n            this.window.x = cameraPadding.x + this.config.x * camera.zoom;\r\n            this.window.y = cameraPadding.y + this.config.y * camera.zoom;\r\n            this.window.scale = camera.zoom;\r\n        };\r\n        TutorialScreen.prototype.resizeText = function (field) {\r\n            this.popup.scale = field.cameras.main.zoom;\r\n            this.popup.x = game.Config.HALF_GAME_WIDTH;\r\n            this.popup.y = game.Config.GAME_HEIGHT - (this.popup.getHeight() / 2) * this.popup.scale - 35;\r\n        };\r\n        TutorialScreen.prototype.destroy = function (fromScene) {\r\n            this.window.destroy(fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return TutorialScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.TutorialScreen = TutorialScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var PauseScreenEvent;\r\n    (function (PauseScreenEvent) {\r\n        PauseScreenEvent[\"SHOW\"] = \"PauseScreen_SHOW\";\r\n        PauseScreenEvent[\"HIDE\"] = \"PauseScreen_HIDE\";\r\n    })(PauseScreenEvent = game.PauseScreenEvent || (game.PauseScreenEvent = {}));\r\n    var PauseScreen = /** @class */ (function (_super) {\r\n        __extends(PauseScreen, _super);\r\n        function PauseScreen(scene) {\r\n            var _this = _super.call(this, scene, {\r\n                backgroundAlpha: 0.85,\r\n                backgroundKey: \"gameplay_gui\",\r\n                backgroundFrame: \"black_rect\",\r\n            }) || this;\r\n            _this.name = \"pause_screen\";\r\n            _this.background.name = \"pause_screen_back\";\r\n            _this.addResumeButton();\r\n            _this.addOtherButtons();\r\n            _this.buttons = [_this.resumeButton, _this.soundButton, _this.homeButton, _this.restartButton];\r\n            _this.buttonsContainer = _this.scene.add.container(0, 0, _this.buttons);\r\n            _this.buttonsContainer.setName(\"buttons_container\");\r\n            _this.add(_this.buttonsContainer);\r\n            _this.align();\r\n            return _this;\r\n        }\r\n        PauseScreen.prototype.addResumeButton = function () {\r\n            this.resumeButton = this.scene.add.button(\"gameplay_gui\", \"pause_screen/button_resume\", this.buttonsContainer);\r\n        };\r\n        PauseScreen.prototype.addOtherButtons = function () {\r\n            this.soundButton = this.scene.add.soundButton(\"gameplay_gui\", \"pause_screen/button_sound_on\", \"pause_screen/button_sound_off\", this.buttonsContainer);\r\n            this.homeButton = this.scene.add.button(\"gameplay_gui\", \"pause_screen/button_home\", this.buttonsContainer);\r\n            this.restartButton = this.scene.add.button(\"gameplay_gui\", \"pause_screen/button_restart\", this.buttonsContainer);\r\n        };\r\n        PauseScreen.prototype.align = function () {\r\n            var dy = 100;\r\n            var dx = 175;\r\n            this.resumeButton.y = -dy;\r\n            var bottomButtonsY = dy;\r\n            this.homeButton.y = bottomButtonsY;\r\n            this.soundButton.x = -dx;\r\n            this.soundButton.y = bottomButtonsY;\r\n            this.restartButton.x = dx;\r\n            this.restartButton.y = bottomButtonsY;\r\n        };\r\n        PauseScreen.prototype.resize = function () {\r\n            this.background.displayHeight = (game.Config.GAME_HEIGHT + 4) / this.scale;\r\n        };\r\n        PauseScreen.prototype.show = function () {\r\n            this.revive();\r\n            this.emit(PauseScreenEvent.SHOW, this);\r\n            this.alpha = 1;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: { from: 0, to: this.options.backgroundAlpha },\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.buttons,\r\n                duration: 900,\r\n                alpha: { start: 0, from: 0, to: 1, ease: Phaser.Math.Easing.Cubic.Out, duration: 200 },\r\n                scale: { from: 0.75, to: 1 },\r\n                ease: Phaser.Math.Easing.Elastic.Out,\r\n                easeParams: [0.1, 0.4],\r\n                delay: this.scene.tweens.stagger(80),\r\n            });\r\n        };\r\n        PauseScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                    _this.emit(PauseScreenEvent.HIDE, _this);\r\n                },\r\n            });\r\n        };\r\n        return PauseScreen;\r\n    }(Phaser.GameObjects.Screen));\r\n    game.PauseScreen = PauseScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var CollectedBlockEvent;\r\n    (function (CollectedBlockEvent) {\r\n        CollectedBlockEvent[\"MOVE_IN_MIDDLE\"] = \"CollectedBlock_MOVE_IN_MIDDLE\";\r\n        CollectedBlockEvent[\"MOVE_COMPLETE\"] = \"CollectedBlock_MOVE_COMPLETE\";\r\n    })(CollectedBlockEvent = game.CollectedBlockEvent || (game.CollectedBlockEvent = {}));\r\n    var CollectedBlock = /** @class */ (function (_super) {\r\n        __extends(CollectedBlock, _super);\r\n        function CollectedBlock(scene) {\r\n            return _super.call(this, scene, 0, 0, \"gameplay_gui\", \"blocks/basic_block_01\") || this;\r\n        }\r\n        CollectedBlock.prototype.updateFrame = function (originalBlock) {\r\n            this.setFrame(originalBlock.frame.name);\r\n            this.setOrigin(originalBlock.originX, originalBlock.originY);\r\n        };\r\n        CollectedBlock.prototype.moveTo = function (targetPosition, targetScale) {\r\n            var _this = this;\r\n            var distance = Phaser.Math.Distance.Between(this.x, this.y, targetPosition.x, targetPosition.y);\r\n            var duration = Math.max(350, (distance / game.Config.ASSETS_SCALE) * 0.8);\r\n            this.scene.time.delayedCall(duration * 0.75, function () {\r\n                _this.emit(CollectedBlockEvent.MOVE_IN_MIDDLE, _this);\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                easeParams: [1.1],\r\n                x: targetPosition.x,\r\n                y: targetPosition.y,\r\n                scale: targetScale,\r\n                onComplete: function () {\r\n                    _this.emit(CollectedBlockEvent.MOVE_COMPLETE, _this);\r\n                    _this.kill();\r\n                },\r\n            });\r\n        };\r\n        CollectedBlock.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return CollectedBlock;\r\n    }(Phaser.GameObjects.Image));\r\n    game.CollectedBlock = CollectedBlock;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var FastForwardFx = /** @class */ (function (_super) {\r\n        __extends(FastForwardFx, _super);\r\n        function FastForwardFx(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"fast_forward\";\r\n            _this.addLines();\r\n            return _this;\r\n        }\r\n        FastForwardFx.prototype.addLines = function () {\r\n            var _this = this;\r\n            var linesNum = 4;\r\n            var lineFrames = this.getLineFrames();\r\n            this.lines = _.times(linesNum, function () {\r\n                var frame = Phaser.Math.RND.pick(lineFrames);\r\n                var line = _this.scene.add.image(0, 0, \"gameplay_gui\", frame);\r\n                _this.add(line);\r\n                return line;\r\n            });\r\n        };\r\n        FastForwardFx.prototype.getLineFrames = function () {\r\n            return [1, 2, 3].map(function (num) { return \"fast_forward/fast_forward_line_\" + num; });\r\n        };\r\n        FastForwardFx.prototype.resize = function () {\r\n            var dy = game.Config.GAME_HEIGHT / (this.lines.length + 1);\r\n            this.lines.forEach(function (line, index) {\r\n                line.scale = game.Config.GAME_WIDTH / line.width;\r\n                line.x = game.Config.HALF_GAME_WIDTH;\r\n                line.y = dy * (index + 1);\r\n                line.setData(\"originalY\", line.y);\r\n            });\r\n        };\r\n        FastForwardFx.prototype.show = function () {\r\n            this.resize();\r\n            this.revive();\r\n            this.tweenLines();\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        FastForwardFx.prototype.tweenLines = function () {\r\n            var _this = this;\r\n            this.lines.forEach(function (line) {\r\n                line.alpha = 0.66;\r\n                _this.scene.tweens.add({\r\n                    targets: line,\r\n                    delay: Phaser.Math.RND.between(0, 150),\r\n                    duration: 300,\r\n                    ease: Phaser.Math.Easing.Sine.InOut,\r\n                    alpha: 0.3,\r\n                    yoyo: true,\r\n                    repeat: -1,\r\n                });\r\n                _this.tweenLine(line);\r\n            });\r\n        };\r\n        FastForwardFx.prototype.tweenLine = function (line) {\r\n            var _this = this;\r\n            var targetY = line.getData(\"originalY\") + Phaser.Math.RND.sign() * Phaser.Math.RND.between(0, 30);\r\n            var distance = targetY - this.y;\r\n            var duration = distance / 4;\r\n            this.scene.tweens.add({\r\n                targets: line,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                y: targetY,\r\n                onStart: function () {\r\n                    line.scaleX = line.scaleX * Phaser.Math.RND.sign();\r\n                    line.scaleY = line.scaleY * Phaser.Math.RND.sign();\r\n                },\r\n                onComplete: function () {\r\n                    _this.tweenLine(line);\r\n                },\r\n            });\r\n        };\r\n        FastForwardFx.prototype.hide = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.In,\r\n                alpha: 0,\r\n                onComplete: this.onHideComplete.bind(this),\r\n            });\r\n        };\r\n        FastForwardFx.prototype.onHideComplete = function () {\r\n            this.stopLineTweens();\r\n            this.kill();\r\n        };\r\n        FastForwardFx.prototype.stopLineTweens = function () {\r\n            this.scene.tweens.killTweensOf(this.lines);\r\n        };\r\n        return FastForwardFx;\r\n    }(Phaser.GameObjects.Container));\r\n    game.FastForwardFx = FastForwardFx;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GiftedBoosterEvent;\r\n    (function (GiftedBoosterEvent) {\r\n        GiftedBoosterEvent[\"MOVE_COMPLETE\"] = \"GiftedBooster_MOVE_COMPLETE\";\r\n    })(GiftedBoosterEvent = game.GiftedBoosterEvent || (game.GiftedBoosterEvent = {}));\r\n    var GiftedBooster = /** @class */ (function (_super) {\r\n        __extends(GiftedBooster, _super);\r\n        function GiftedBooster(scene, atlas, boosterType, num) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"booster_\" + boosterType;\r\n            _this.atlasKey = atlas;\r\n            _this.boosterType = boosterType;\r\n            _this.num = num;\r\n            _this.addIcon(boosterType);\r\n            _this.addText(num);\r\n            return _this;\r\n        }\r\n        GiftedBooster.prototype.addIcon = function (boosterType) {\r\n            this.icon = this.scene.add.image(0, 0, this.atlasKey, this.getIconFrame(boosterType));\r\n            this.add(this.icon);\r\n        };\r\n        GiftedBooster.prototype.getIconFrame = function (boosterType) {\r\n            return \"gift_screen/\" + boosterType;\r\n        };\r\n        GiftedBooster.prototype.addText = function (num) {\r\n            var content = \"+\" + num;\r\n            this.text = this.scene.add.bitmapText(0, 0, game.BitmapGameFont.GAMEPLAY_GUI_BOOSTERS, content, 46);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.y = this.icon.bottom + 38;\r\n            this.add(this.text);\r\n        };\r\n        GiftedBooster.prototype.updateData = function (boosterType, boostersNum) {\r\n            this.icon.setFrame(this.getIconFrame(boosterType));\r\n            this.text.setText(\"+\" + boostersNum.toString());\r\n            this.text.y = this.icon.bottom + 38;\r\n        };\r\n        GiftedBooster.prototype.startFloat = function (initialDelay) {\r\n            this.scene.tweens.add({\r\n                targets: this.list,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                y: \"-=18\",\r\n                delay: this.scene.tweens.stagger(100, { start: initialDelay }),\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        GiftedBooster.prototype.stopFloat = function () {\r\n            this.scene.tweens.killTweensOf(this.list);\r\n            this.icon.y = 0;\r\n            this.text.y = this.icon.bottom + 38;\r\n        };\r\n        GiftedBooster.prototype.moveToIcon = function (icon, delay) {\r\n            var _this = this;\r\n            this.hideText(delay);\r\n            var target = icon.getWorldPosition();\r\n            var localTarget = this.parentContainer.pointToContainer(target);\r\n            var distance = Phaser.Math.Distance.Between(localTarget.x, localTarget.y, this.x, this.y);\r\n            var duration = Math.min(450, distance * 0.8);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: delay,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Back.In,\r\n                easeParams: [1.1],\r\n                x: localTarget.x,\r\n                y: localTarget.y,\r\n                scale: 0.33,\r\n                onStart: function () {\r\n                    _this.scene.tweens.killTweensOf(_this.list);\r\n                },\r\n                onComplete: function () {\r\n                    _this.emit(GiftedBoosterEvent.MOVE_COMPLETE, _this);\r\n                    _this.kill();\r\n                    icon.onGiftArrive(_this.num);\r\n                },\r\n            });\r\n            var whooshDelay = delay + duration * 0.6;\r\n            this.playWhooshSound(whooshDelay);\r\n        };\r\n        GiftedBooster.prototype.hideText = function (delay) {\r\n            this.scene.tweens.add({\r\n                targets: this.text,\r\n                delay: delay,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n            });\r\n        };\r\n        GiftedBooster.prototype.playWhooshSound = function (delay) {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.WINNING_BALL_WHOOSH)) {\r\n                this.scene.sound.play(game.GameSoundKey.WINNING_BALL_WHOOSH, { volume: 0.5, delay: delay / 1000 });\r\n            }\r\n        };\r\n        GiftedBooster.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.tweens.killTweensOf([this, this.text, this.icon]);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return GiftedBooster;\r\n    }(Phaser.GameObjects.Container));\r\n    game.GiftedBooster = GiftedBooster;\r\n})(game || (game = {}));\r\n///<reference path='GiftedBooster.ts' />\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var GiftScreenEvent;\r\n    (function (GiftScreenEvent) {\r\n        GiftScreenEvent[\"BOOSTERS_SHOW_COMPLETE\"] = \"GiftScreen_BOOSTERS_SHOW_COMPLETE\";\r\n        GiftScreenEvent[\"HIDE_COMPLETE\"] = \"GiftScreen_HIDE_COMPLETE\";\r\n    })(GiftScreenEvent = game.GiftScreenEvent || (game.GiftScreenEvent = {}));\r\n    var GiftScreen = /** @class */ (function (_super) {\r\n        __extends(GiftScreen, _super);\r\n        function GiftScreen(scene, atlas, content, boostersPanel) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.boostersCollected = 0;\r\n            _this.autoPlay = false;\r\n            _this.name = \"gift_screen\";\r\n            _this.atlasKey = atlas;\r\n            _this.content = content;\r\n            _this.boostersPanel = boostersPanel;\r\n            _this.addBackground();\r\n            _this.addBoosters();\r\n            _this.addGift();\r\n            _this.addHintText();\r\n            _this.addParticlesContainer();\r\n            _this.addGlowParticles();\r\n            _this.addCircleParticles();\r\n            _this.bringToTop(_this.gift);\r\n            _this.bringToTop(_this.giftWhite);\r\n            _this.bringToTop(_this.hintText);\r\n            return _this;\r\n        }\r\n        GiftScreen.prototype.addBackground = function () {\r\n            this.backgroundAlpha = 0.8;\r\n            this.background = this.scene.add.image(0, 0, this.atlasKey, \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.background.displayWidth = game.Config.SOURCE_GAME_WIDTH;\r\n            this.background.displayHeight = game.Config.SOURCE_GAME_HEIGHT;\r\n            this.add(this.background);\r\n        };\r\n        GiftScreen.prototype.addBoosters = function () {\r\n            var _this = this;\r\n            var dx = 180;\r\n            var contentArr = Object\r\n                .entries(this.content)\r\n                .map(function (value) { return ({ type: value[0], num: value[1] }); })\r\n                .filter(function (value) { return value.num > 0; });\r\n            this.boosters = contentArr.map(function (entry, index) {\r\n                var icon = new game.GiftedBooster(_this.scene, _this.atlasKey, entry.type, entry.num);\r\n                icon.x = index * dx - ((contentArr.length - 1) * dx) / 2;\r\n                icon.y = 0;\r\n                icon.kill();\r\n                _this.add(icon);\r\n                return icon;\r\n            });\r\n        };\r\n        GiftScreen.prototype.addGift = function () {\r\n            this.gift = this.scene.add.image(0, 0, this.atlasKey, \"gift_screen/gift\");\r\n            this.gift.y = 200;\r\n            this.add(this.gift);\r\n            this.giftWhite = this.scene.add.image(0, 0, this.atlasKey, \"gift_screen/gift_white\");\r\n            this.giftWhite.x = this.gift.x;\r\n            this.giftWhite.y = this.gift.y + 10;\r\n            this.giftWhite.setOrigin(this.gift.originX, this.gift.originY);\r\n            this.giftWhite.kill();\r\n            this.add(this.giftWhite);\r\n        };\r\n        GiftScreen.prototype.addHintText = function () {\r\n            var content = this.scene.texts.open_gift;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"40px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            var wordWrapWidth = game.Config.SOURCE_GAME_WIDTH * 0.75;\r\n            this.hintText = this.scene.add.text(0, 0, content, style);\r\n            this.hintText.setOrigin(0.5, 0.5);\r\n            this.hintText.y = this.gift.bottom + 80;\r\n            this.hintText.setWordWrapWidth(wordWrapWidth, true);\r\n            this.add(this.hintText);\r\n        };\r\n        GiftScreen.prototype.addParticlesContainer = function () {\r\n            this.particlesContainer = this.scene.add.container(0, 0);\r\n            this.particlesContainer.name = \"particles_container\";\r\n            this.particlesContainer.x = -2;\r\n            this.particlesContainer.y = this.gift.y - 90;\r\n            this.add(this.particlesContainer);\r\n        };\r\n        GiftScreen.prototype.addGlowParticles = function () {\r\n            this.glowParticles = this.scene.add.particles(\"gameplay_gui\");\r\n            this.giftWell = this.glowParticles.createGravityWell({\r\n                power: 10,\r\n                epsilon: 250,\r\n                gravity: 200,\r\n            });\r\n            var emitCircle = new Phaser.Geom.Circle(0, 0, this.giftWhite.displayWidth);\r\n            this.giftAttractEmitter = this.glowParticles.createEmitter({\r\n                frame: [\"gift_screen/gift_particle_1\"],\r\n                lifespan: 800,\r\n                alpha: { start: 0, end: 1, ease: EasingString.ExpoEaseOut },\r\n                scale: { start: 1.33, end: 0.33 },\r\n                quantity: 2,\r\n                on: false,\r\n            }).setDeathZone({\r\n                source: new Phaser.Geom.Circle(0, 0, emitCircle.radius * 0.25),\r\n                type: \"onEnter\",\r\n            }).setEmitZone({\r\n                source: emitCircle,\r\n                type: \"random\",\r\n            });\r\n            this.giftExplodeEmitter = this.glowParticles.createEmitter({\r\n                frame: [\"gift_screen/gift_particle_1\"],\r\n                lifespan: 3000,\r\n                speed: { min: 10, max: 1200 },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseOut },\r\n                scale: { start: 1.33, end: 0 },\r\n                on: false,\r\n            });\r\n            this.particlesContainer.add(this.glowParticles);\r\n        };\r\n        GiftScreen.prototype.addCircleParticles = function () {\r\n            this.circleParticles = this.scene.add.particles(\"gameplay_gui\");\r\n            this.circlesEmitter = this.circleParticles.createEmitter({\r\n                frame: [\"gift_screen/circle_fx\"],\r\n                scale: { start: 0.5, end: 1.5, ease: EasingString.ExpoEaseOut },\r\n                alpha: { start: 1, end: 0, ease: EasingString.ExpoEaseOut },\r\n                lifespan: 2000,\r\n                frequency: 500,\r\n                on: false,\r\n            });\r\n            this.particlesContainer.add(this.circleParticles);\r\n        };\r\n        GiftScreen.prototype.resize = function () {\r\n            this.background.displayHeight = (game.Config.GAME_HEIGHT + 4) / this.scale;\r\n        };\r\n        GiftScreen.prototype.show = function () {\r\n            this.showGift(200);\r\n            this.showHintText(400);\r\n        };\r\n        GiftScreen.prototype.showGift = function (initialDelay) {\r\n            var _this = this;\r\n            this.gift.alpha = 0;\r\n            this.gift.scale = 0.8;\r\n            this.scene.tweens.add({\r\n                delay: initialDelay,\r\n                targets: this.gift,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: initialDelay,\r\n                targets: this.gift,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: 1,\r\n                onComplete: function () {\r\n                    _this.onGiftShowComplete();\r\n                },\r\n            });\r\n            this.scene.time.delayedCall(200, function () {\r\n                _this.circlesEmitter.flow(1000);\r\n            });\r\n            this.playGiftRevealSound(initialDelay);\r\n        };\r\n        GiftScreen.prototype.playGiftRevealSound = function (initialDelay) {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.GIFT_REVEAL)) {\r\n                var delay = initialDelay / 1000 + 0.2;\r\n                this.scene.sound.play(game.GameSoundKey.GIFT_REVEAL, { volume: 0.5, delay: delay });\r\n            }\r\n        };\r\n        GiftScreen.prototype.onGiftShowComplete = function () {\r\n            var _this = this;\r\n            if (this.autoPlay) {\r\n                this.scene.time.delayedCall(300, function () {\r\n                    _this.onGiftClick();\r\n                });\r\n            }\r\n            else {\r\n                this.gift.setInteractive();\r\n                this.gift.input.cursor = \"pointer\";\r\n                this.gift.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this.onGiftClick, this);\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this.gift,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.06,\r\n                scaleY: 0.94,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        GiftScreen.prototype.onGiftClick = function () {\r\n            var _this = this;\r\n            this.hideHintText();\r\n            this.playFancyTapSound();\r\n            this.playGiftChargeSound();\r\n            this.giftAttractEmitter.on = true;\r\n            this.circlesEmitter.setLifespan(500);\r\n            this.circlesEmitter.setAlpha({ start: 0, end: 0.33, ease: EasingString.ExpoEaseOut });\r\n            this.circlesEmitter.setScale({ start: 1.66, end: 0.5, ease: EasingString.Linear });\r\n            this.circlesEmitter.flow(333);\r\n            this.gift.disableInteractive();\r\n            this.scene.tweens.killTweensOf(this.gift);\r\n            this.giftWhite.scaleX = this.gift.scaleX;\r\n            this.giftWhite.scaleY = this.gift.scaleY;\r\n            this.giftWhite.alpha = 0;\r\n            this.giftWhite.revive();\r\n            var duration = 1333;\r\n            this.scene.tweens.add({\r\n                targets: this.giftWhite,\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: [this.giftWhite, this.gift],\r\n                duration: duration,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                scale: this.gift.scale * 0.66,\r\n            }).on(Phaser.Tweens.Events.TIMELINE_COMPLETE, function () {\r\n                _this.circlesEmitter.killAll();\r\n                _this.circlesEmitter.setLifespan(900);\r\n                _this.circlesEmitter.setAlpha({ start: 1, end: 0, ease: EasingString.ExpoEaseOut });\r\n                _this.circlesEmitter.setScale({ start: 0.5, end: 3, ease: EasingString.ExpoEaseOut });\r\n                _this.circlesEmitter.explode(1, 0, 0);\r\n                _this.stopChargeSound();\r\n                _this.disableAttractEmitter();\r\n                _this.emitExplosionParticles();\r\n                _this.explodeGift();\r\n                _this.showBoosters();\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: [this.giftWhite, this.gift],\r\n                duration: 33,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                x: \"-=14\",\r\n                repeat: -1,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        GiftScreen.prototype.playFancyTapSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.FANCY_TAP)) {\r\n                this.scene.sound.play(game.GameSoundKey.FANCY_TAP, { volume: 1 });\r\n            }\r\n        };\r\n        GiftScreen.prototype.playGiftChargeSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.GIFT_CHARGE)) {\r\n                this.chargeSound = this.scene.sound.add(game.GameSoundKey.GIFT_CHARGE, { volume: 0.5 });\r\n                this.chargeSound.play();\r\n            }\r\n        };\r\n        GiftScreen.prototype.stopChargeSound = function () {\r\n            if (this.chargeSound) {\r\n                this.chargeSound.stop();\r\n            }\r\n        };\r\n        GiftScreen.prototype.disableAttractEmitter = function () {\r\n            this.giftWell.active = false;\r\n            this.giftAttractEmitter.active = false;\r\n            this.giftAttractEmitter.on = false;\r\n            this.giftAttractEmitter.killAll();\r\n        };\r\n        GiftScreen.prototype.emitExplosionParticles = function () {\r\n            this.giftExplodeEmitter.setEmitZone({\r\n                source: new Phaser.Geom.Circle(0, 0, 100),\r\n                type: \"random\",\r\n            });\r\n            this.giftExplodeEmitter.explode(100, this.giftWell.x, this.giftWell.y - 100);\r\n        };\r\n        GiftScreen.prototype.explodeGift = function () {\r\n            var _this = this;\r\n            this.gift.kill();\r\n            this.playGiftExplodeSound();\r\n            this.scene.tweens.killTweensOf([this.gift, this.giftWhite]);\r\n            var targetOriginY = 0.7;\r\n            this.giftWhite.y -= (this.giftWhite.originY - targetOriginY) * this.giftWhite.displayHeight;\r\n            this.giftWhite.setOrigin(0.5, targetOriginY);\r\n            this.scene.tweens.add({\r\n                targets: this.giftWhite,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                scale: 3,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.giftWhite,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Quintic.Out,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.giftWhite.kill();\r\n                },\r\n            });\r\n        };\r\n        GiftScreen.prototype.playGiftExplodeSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.GIFT_EXPLODE)) {\r\n                this.scene.sound.play(game.GameSoundKey.GIFT_EXPLODE, { volume: 1 });\r\n            }\r\n        };\r\n        GiftScreen.prototype.showBoosters = function () {\r\n            var _this = this;\r\n            this.boosters.forEach(function (booster, index) {\r\n                var x = booster.x;\r\n                var y = booster.y;\r\n                booster.revive();\r\n                booster.startFloat(index * 150);\r\n                booster.x = _this.giftWhite.x;\r\n                booster.y = _this.giftWhite.y;\r\n                booster.scale = 0.25;\r\n                booster.alpha = 0;\r\n                _this.scene.tweens.add({\r\n                    targets: booster,\r\n                    duration: 200,\r\n                    ease: Phaser.Math.Easing.Cubic.Out,\r\n                    alpha: 1,\r\n                });\r\n                _this.scene.tweens.add({\r\n                    targets: booster,\r\n                    duration: 1000,\r\n                    ease: Phaser.Math.Easing.Elastic.Out,\r\n                    easeParams: [0.1, 0.4],\r\n                    scale: 1,\r\n                });\r\n                _this.scene.tweens.add({\r\n                    targets: booster,\r\n                    duration: 1200,\r\n                    ease: Phaser.Math.Easing.Elastic.Out,\r\n                    easeParams: [0.1, 0.4],\r\n                    x: x,\r\n                    y: y,\r\n                });\r\n            });\r\n            this.scene.time.delayedCall(600, function () {\r\n                _this.onBoostersShowComplete();\r\n            });\r\n        };\r\n        GiftScreen.prototype.onBoostersShowComplete = function () {\r\n            var _this = this;\r\n            this.emit(GiftScreenEvent.BOOSTERS_SHOW_COMPLETE, this);\r\n            if (this.autoPlay) {\r\n                this.scene.time.delayedCall(200, function () {\r\n                    _this.onBoostersClick();\r\n                });\r\n            }\r\n            else {\r\n                this.background.setInteractive();\r\n                this.background.once(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN, this.onBoostersClick, this);\r\n            }\r\n        };\r\n        GiftScreen.prototype.onBoostersClick = function () {\r\n            this.background.disableInteractive();\r\n            this.playFancyTapSound();\r\n            this.collectBoosters();\r\n        };\r\n        GiftScreen.prototype.collectBoosters = function () {\r\n            var _this = this;\r\n            this.boostersCollected = 0;\r\n            this.boosters.forEach(function (booster, index) {\r\n                var delay = index * 133;\r\n                var icon = _this.boostersPanel.getIconByType(booster.boosterType);\r\n                booster.on(game.GiftedBoosterEvent.MOVE_COMPLETE, _this.onBoosterCollectComplete, _this);\r\n                booster.moveToIcon(icon, delay);\r\n            });\r\n        };\r\n        GiftScreen.prototype.onBoosterCollectComplete = function () {\r\n            if (++this.boostersCollected < this.boosters.length) {\r\n                return;\r\n            }\r\n            this.onAllBoostersCollected();\r\n        };\r\n        GiftScreen.prototype.onAllBoostersCollected = function () {\r\n            this.hide();\r\n        };\r\n        GiftScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 300,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.emit(GiftScreenEvent.HIDE_COMPLETE, _this);\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        GiftScreen.prototype.showHintText = function (initialDelay) {\r\n            this.hintText.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.hintText,\r\n                delay: initialDelay,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Quadratic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: this.hintText,\r\n                duration: 600,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.14,\r\n                yoyo: true,\r\n                repeat: -1,\r\n            });\r\n        };\r\n        GiftScreen.prototype.hideHintText = function () {\r\n            var _this = this;\r\n            this.scene.tweens.killTweensOf(this.hintText);\r\n            this.scene.tweens.add({\r\n                targets: this.hintText,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                y: \"+=15\",\r\n                onComplete: function () {\r\n                    _this.hintText.kill();\r\n                },\r\n            });\r\n        };\r\n        GiftScreen.prototype.destroy = function (fromScene) {\r\n            this.circleParticles.destroy(fromScene);\r\n            this.glowParticles.destroy(fromScene);\r\n            if (this.chargeSound) {\r\n                this.chargeSound.destroy();\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return GiftScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.GiftScreen = GiftScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BoosterInfoPopover = /** @class */ (function (_super) {\r\n        __extends(BoosterInfoPopover, _super);\r\n        function BoosterInfoPopover(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.originalY = 0;\r\n            _this.name = \"booster_info_popover\";\r\n            _this.booster = _this.scene.game.boosters.getRandom();\r\n            _this.addBack();\r\n            _this.addTip();\r\n            _this.addText();\r\n            _this.alignItems();\r\n            return _this;\r\n        }\r\n        BoosterInfoPopover.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, \"gameplay_gui\", \"booster_hint_screen/booster_info_popover\");\r\n            this.back.setOrigin(0.5, 1);\r\n            this.add(this.back);\r\n        };\r\n        BoosterInfoPopover.prototype.addTip = function () {\r\n            this.tip = this.scene.add.image(0, 0, \"gameplay_gui\", \"booster_hint_screen/booster_info_popover_tip\");\r\n            this.tip.setOrigin(0.5, 0);\r\n            this.tip.y = this.back.y - 10;\r\n            this.add(this.tip);\r\n        };\r\n        BoosterInfoPopover.prototype.addText = function () {\r\n            var content = this.booster.hint;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"24px\",\r\n                color: \"#205466\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            this.text.setWordWrapWidth(this.back.width * 0.8);\r\n            this.text.lineSpacing = -3;\r\n            this.text.y = -this.back.height / 2;\r\n            this.add(this.text);\r\n        };\r\n        BoosterInfoPopover.prototype.updateText = function (content) {\r\n            this.text.setText(content);\r\n            this.adjustTextSize();\r\n        };\r\n        BoosterInfoPopover.prototype.adjustTextSize = function () {\r\n            var maxHeight = this.back.height * 0.8;\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n        };\r\n        BoosterInfoPopover.prototype.alignItems = function () {\r\n            var _this = this;\r\n            this.list.forEach(function (item) {\r\n                item.y -= _this.tip.height;\r\n            });\r\n        };\r\n        BoosterInfoPopover.prototype.getWidth = function () {\r\n            return this.back.width;\r\n        };\r\n        BoosterInfoPopover.prototype.offsetTip = function (offset) {\r\n            this.tip.x = -offset / this.scale;\r\n        };\r\n        return BoosterInfoPopover;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BoosterInfoPopover = BoosterInfoPopover;\r\n})(game || (game = {}));\r\n///<reference path='BoosterInfoPopover.ts' />\r\nvar game;\r\n(function (game) {\r\n    var BoosterHintScreen = /** @class */ (function (_super) {\r\n        __extends(BoosterHintScreen, _super);\r\n        function BoosterHintScreen(scene, bottomPanel) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.backgroundAlpha = 0.85;\r\n            _this.name = \"booster_hint_screen\";\r\n            _this.bottomPanel = bottomPanel;\r\n            _this.boostersPanel = bottomPanel.boostersPanel;\r\n            _this.addWindow();\r\n            _this.addBackground();\r\n            _this.addPopover();\r\n            _this.addHintText();\r\n            var isCanvasRenderer = _this.scene.game.rendererType === game.RendererType.CANVAS;\r\n            if (isCanvasRenderer) {\r\n                _this.background.kill();\r\n                _this.window.kill();\r\n                _this.hintText.setStroke(\"rgba(0,0,0,0.66)\", 10);\r\n            }\r\n            return _this;\r\n        }\r\n        BoosterHintScreen.prototype.addWindow = function () {\r\n            this.window = this.scene.make.graphics({\r\n                fillStyle: { color: 0xff0000, alpha: 1 },\r\n            });\r\n            var width = 100;\r\n            var height = 100;\r\n            this.window.fillRoundedRect(-width / 2, -height / 2, width, height);\r\n        };\r\n        BoosterHintScreen.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, \"gameplay_gui\", \"black_rect\");\r\n            this.background.alpha = this.backgroundAlpha;\r\n            this.background.mask = this.window.createGeometryMask();\r\n            this.background.mask.invertAlpha = true;\r\n            this.background.name = \"booster_hint_screen_back\";\r\n            this.add(this.background);\r\n        };\r\n        BoosterHintScreen.prototype.addPopover = function () {\r\n            this.popover = new game.BoosterInfoPopover(this.scene);\r\n            this.add(this.popover);\r\n        };\r\n        BoosterHintScreen.prototype.addHintText = function () {\r\n            var content = this.scene.texts.booster_hint;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"33px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            this.hintText = this.scene.add.text(0, 0, content, style);\r\n            this.hintText.setOrigin(0.5, 0.5);\r\n            this.hintText.setLineSpacing(-6);\r\n            this.add(this.hintText);\r\n        };\r\n        BoosterHintScreen.prototype.resize = function (gameplay) {\r\n            this.resizeBackground();\r\n            this.resizeWindow(gameplay);\r\n            this.alignWindow(gameplay);\r\n            this.alignPopover();\r\n            this.alignHintText();\r\n        };\r\n        BoosterHintScreen.prototype.resizeBackground = function () {\r\n            this.background.displayWidth = game.Config.GAME_WIDTH + 4;\r\n            this.background.displayHeight = game.Config.GAME_HEIGHT + 4;\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        BoosterHintScreen.prototype.resizeWindow = function (gameplay) {\r\n            var padding = 30;\r\n            var width = gameplay.grid.getWidth() + padding;\r\n            var height = gameplay.grid.getHeight() + padding;\r\n            this.window.fillRoundedRect(-width / 2, -height / 2, width, height);\r\n            this.window.width = width;\r\n            this.window.height = height;\r\n        };\r\n        BoosterHintScreen.prototype.alignWindow = function (field) {\r\n            var camera = field.camera;\r\n            var cameraPadding = camera.getPadding();\r\n            this.window.x = cameraPadding.x + camera.zoom * field.grid.getWidth() / 2;\r\n            this.window.y = cameraPadding.y + camera.zoom * field.grid.getHeight() / 2;\r\n            this.window.scale = camera.zoom;\r\n        };\r\n        BoosterHintScreen.prototype.alignPopover = function () {\r\n            var scale = this.bottomPanel.scale;\r\n            var icon = this.boostersPanel.getIconByType(this.popover.booster.type);\r\n            var position = icon.getWorldPosition();\r\n            this.popover.scale = scale;\r\n            this.popover.y = position.y - 65 * scale;\r\n            this.popover.originalY = this.popover.y;\r\n            var right = game.Config.GAME_WIDTH - 20 * scale;\r\n            var maxX = right - ((this.popover.getWidth() - 20) * scale) / 2;\r\n            if (position.x > maxX) {\r\n                this.popover.x = maxX;\r\n                this.popover.offsetTip(maxX - position.x);\r\n            }\r\n            else {\r\n                this.popover.x = position.x;\r\n                this.popover.offsetTip(0);\r\n            }\r\n        };\r\n        BoosterHintScreen.prototype.alignHintText = function () {\r\n            var top = 0;\r\n            var bottom = this.window.y - (this.window.height * this.window.scale) / 2;\r\n            var height = bottom - top;\r\n            var maxHeight = height * 0.6;\r\n            var maxWidth = (this.window.width * this.window.scale) * 0.85;\r\n            this.hintText.x = game.Config.HALF_GAME_WIDTH;\r\n            this.hintText.y = top + height / 2;\r\n            this.hintText.setWordWrapWidth(maxWidth);\r\n            this.hintText.scale = Math.min(1, maxHeight / this.hintText.height);\r\n            this.hintText.originalY = this.hintText.y;\r\n            this.hintText.originalScale = this.hintText.scale;\r\n        };\r\n        BoosterHintScreen.prototype.updateData = function (booster) {\r\n            this.updatePopover(booster);\r\n        };\r\n        BoosterHintScreen.prototype.updatePopover = function (booster) {\r\n            this.popover.booster = booster;\r\n            this.popover.updateText(booster.hint);\r\n            this.alignPopover();\r\n        };\r\n        BoosterHintScreen.prototype.show = function () {\r\n            this.revive();\r\n            this.alpha = 1;\r\n            this.showBackground(0);\r\n            this.showPopover(0);\r\n            this.showText(200);\r\n        };\r\n        BoosterHintScreen.prototype.showBackground = function (delay) {\r\n            this.background.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this.background,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: this.backgroundAlpha,\r\n            });\r\n        };\r\n        BoosterHintScreen.prototype.showPopover = function (delay) {\r\n            this.popover.revive();\r\n            this.popover.alpha = 0;\r\n            this.popover.y = this.popover.originalY - 20;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.popover,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.popover,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                y: this.popover.originalY,\r\n            });\r\n        };\r\n        BoosterHintScreen.prototype.showText = function (delay) {\r\n            var _this = this;\r\n            this.hintText.alpha = 0;\r\n            this.hintText.scale = this.hintText.originalScale * 0.8;\r\n            this.hintText.y = this.hintText.originalY - 30;\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.hintText,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.hintText,\r\n                duration: 500,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                y: this.hintText.originalY,\r\n            });\r\n            this.scene.tweens.add({\r\n                delay: delay,\r\n                targets: this.hintText,\r\n                duration: 400,\r\n                ease: Phaser.Math.Easing.Back.Out,\r\n                scale: this.hintText.originalScale,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this.hintText,\r\n                        duration: 666,\r\n                        ease: Phaser.Math.Easing.Sine.InOut,\r\n                        scale: _this.hintText.originalScale * 0.9,\r\n                        yoyo: true,\r\n                        repeat: -1,\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        BoosterHintScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.popover.kill();\r\n            this.scene.tweens.killTweensOf(this.hintText);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.kill();\r\n                },\r\n            });\r\n        };\r\n        BoosterHintScreen.prototype.destroy = function (fromScene) {\r\n            this.window.destroy(fromScene);\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return BoosterHintScreen;\r\n    }(Phaser.GameObjects.Container));\r\n    game.BoosterHintScreen = BoosterHintScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Flash = /** @class */ (function (_super) {\r\n        __extends(Flash, _super);\r\n        function Flash(scene, atlas, frame) {\r\n            return _super.call(this, scene, 0, 0, atlas, frame) || this;\r\n        }\r\n        Flash.prototype.show = function (options) {\r\n            var _this = this;\r\n            this.revive();\r\n            this.scene.tweens.killTweensOf(this);\r\n            this.alpha = 0;\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: options.fadeInDuration,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: options.targetAlpha,\r\n                onComplete: function () {\r\n                    _this.scene.tweens.add({\r\n                        targets: _this,\r\n                        duration: options.fadeOutDuration,\r\n                        ease: Phaser.Math.Easing.Quadratic.In,\r\n                        alpha: 0,\r\n                        onComplete: function () {\r\n                            _this.kill();\r\n                        },\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        Flash.prototype.resize = function () {\r\n            this.displayWidth = game.Config.GAME_WIDTH + 4;\r\n            this.displayHeight = game.Config.GAME_HEIGHT + 4;\r\n            this.x = game.Config.HALF_GAME_WIDTH;\r\n            this.y = game.Config.HALF_GAME_HEIGHT;\r\n        };\r\n        Flash.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return Flash;\r\n    }(Phaser.GameObjects.Image));\r\n    game.Flash = Flash;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var SecondChancePopup = /** @class */ (function (_super) {\r\n        __extends(SecondChancePopup, _super);\r\n        function SecondChancePopup(scene, atlas) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"popup\";\r\n            _this.atlas = atlas;\r\n            _this.addBack();\r\n            _this.addFox();\r\n            _this.addTitle();\r\n            _this.addSubtitle();\r\n            _this.addBlocksLabel();\r\n            _this.alignBlocksLabel();\r\n            _this.sendToBack(_this.fox);\r\n            _this.bringToTop(_this.title);\r\n            _this.bringToTop(_this.subtitle);\r\n            return _this;\r\n        }\r\n        SecondChancePopup.prototype.addBack = function () {\r\n            this.back = this.scene.add.image(0, 0, this.atlas, \"second_chance/popup_back\");\r\n            this.add(this.back);\r\n        };\r\n        SecondChancePopup.prototype.addFox = function () {\r\n            this.fox = this.scene.add.image(0, 0, this.atlas, \"second_chance/fox\");\r\n            this.fox.x = -3;\r\n            this.fox.y = this.back.top - 10;\r\n            this.add(this.fox);\r\n            this.foxPaws = this.scene.add.image(0, 0, this.atlas, \"second_chance/fox_paws\");\r\n            this.foxPaws.x = this.fox.x + 4;\r\n            this.foxPaws.y = this.fox.y + 19;\r\n            this.add(this.foxPaws);\r\n            this.foxBubble = this.scene.add.image(0, 0, this.atlas, \"second_chance/fox_bubble\");\r\n            this.foxBubble.x = this.fox.x - 100;\r\n            this.foxBubble.y = this.fox.y - 116;\r\n            this.add(this.foxBubble);\r\n        };\r\n        SecondChancePopup.prototype.addTitle = function () {\r\n            var content = this.scene.texts.second_chance.title;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"44px\",\r\n                color: \"#B62D35\",\r\n            };\r\n            this.title = this.scene.add.text(0, 0, content, style);\r\n            this.title.setOrigin(0.5, 0.5);\r\n            this.title.y = this.back.top + this.title.height / 2 + 20;\r\n            this.add(this.title);\r\n        };\r\n        SecondChancePopup.prototype.addBlocksLabel = function () {\r\n            var props = {\r\n                backFrame: \"level_complete/blocks_label_back\",\r\n                iconFrame: \"level_complete/tick\",\r\n                textColor: 0xba3339,\r\n            };\r\n            this.blocksLabel = new game.ComplexBlocksLabel(this.scene, props);\r\n            this.blocksLabel.tick.kill();\r\n            this.add(this.blocksLabel);\r\n        };\r\n        SecondChancePopup.prototype.addSubtitle = function () {\r\n            var content = this.getSubtitleContent();\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"32px\",\r\n                color: \"#B62D35\",\r\n                align: \"center\",\r\n            };\r\n            this.subtitle = this.scene.add.text(0, 0, content, style);\r\n            this.subtitle.setOrigin(0.5, 0.5);\r\n            this.subtitle.setWordWrapWidth(this.back.width * 0.85);\r\n            this.subtitle.setLineSpacing(-6);\r\n            this.subtitle.bottom = this.back.bottom - 28;\r\n            this.add(this.subtitle);\r\n        };\r\n        SecondChancePopup.prototype.getSubtitleContent = function () {\r\n            return this.scene.texts.second_chance.subtitle.replace(\"#\", game.SecondChance.ROWS.toString());\r\n        };\r\n        SecondChancePopup.prototype.alignBlocksLabel = function () {\r\n            var top = this.title.bottom;\r\n            var bottom = this.subtitle.top;\r\n            var height = bottom - top;\r\n            var maxHeight = height * 0.9;\r\n            this.blocksLabel.scale = Math.min(1, maxHeight / this.blocksLabel.getHeight());\r\n            this.blocksLabel.y = top + height / 2 - this.blocksLabel.getDisplayHeight() / 2;\r\n        };\r\n        SecondChancePopup.prototype.updateData = function (levelNumber, blocksType, killedBlocksNum, requiredBlocksNum) {\r\n            this.blocksLabel.updateData(blocksType, killedBlocksNum, requiredBlocksNum);\r\n            this.subtitle.text = levelNumber === 1\r\n                ? this.scene.texts.start_level_popup.task.replace(\"#\", requiredBlocksNum.toString())\r\n                : this.scene.texts.second_chance.subtitle.replace(\"#\", game.SecondChance.ROWS.toString());\r\n        };\r\n        SecondChancePopup.prototype.getHeight = function () {\r\n            return this.back.height;\r\n        };\r\n        return SecondChancePopup;\r\n    }(Phaser.GameObjects.Container));\r\n    game.SecondChancePopup = SecondChancePopup;\r\n})(game || (game = {}));\r\n///<reference path='SecondChancePopup.ts' />\r\nvar game;\r\n(function (game) {\r\n    var Screen = Phaser.GameObjects.Screen;\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var SecondChanceScreenEvent;\r\n    (function (SecondChanceScreenEvent) {\r\n        SecondChanceScreenEvent[\"HIDE_START\"] = \"SecondChanceScreen_HIDE_START\";\r\n        SecondChanceScreenEvent[\"HIDE_COMPLETE\"] = \"SecondChanceScreen_HIDE_COMPLETE\";\r\n    })(SecondChanceScreenEvent = game.SecondChanceScreenEvent || (game.SecondChanceScreenEvent = {}));\r\n    var SecondChanceScreen = /** @class */ (function (_super) {\r\n        __extends(SecondChanceScreen, _super);\r\n        function SecondChanceScreen(scene, atlas) {\r\n            var _this = _super.call(this, scene, {\r\n                backgroundKey: atlas,\r\n                backgroundFrame: \"black_rect\",\r\n                backgroundAlpha: 0.85,\r\n            }) || this;\r\n            _this.name = \"second_chance\";\r\n            _this.atlas = atlas;\r\n            _this.background.name = \"second_chance_screen_back\";\r\n            _this.addPopup();\r\n            _this.addCloseButton();\r\n            _this.addPlayButton();\r\n            _this.bringToTop(_this.popup);\r\n            return _this;\r\n        }\r\n        SecondChanceScreen.prototype.addPopup = function () {\r\n            this.popup = new game.SecondChancePopup(this.scene, this.atlas);\r\n            this.add(this.popup);\r\n        };\r\n        SecondChanceScreen.prototype.addCloseButton = function () {\r\n            this.closeButton = this.scene.add.button(this.atlas, \"second_chance/button_close\", this);\r\n        };\r\n        SecondChanceScreen.prototype.addPlayButton = function () {\r\n            this.playButton = this.scene.add.button(this.atlas, \"second_chance/button_video\", this);\r\n            this.playButton.y = this.popup.y + this.popup.getHeight() / 2 + this.playButton.height / 2 + 50;\r\n            this.playButton.areTweensEnabled = false;\r\n        };\r\n        SecondChanceScreen.prototype.resize = function () {\r\n            this.background.displayHeight = (game.Config.GAME_HEIGHT + 4) / this.scale;\r\n            this.alignPlayButton();\r\n            this.alignCloseButton();\r\n        };\r\n        SecondChanceScreen.prototype.alignPlayButton = function () {\r\n            var top = this.popup.y + this.popup.getHeight() / 2;\r\n            var bottom = this.background.displayHeight / 2;\r\n            var height = bottom - top;\r\n            this.playButton.y = top + height / 2;\r\n        };\r\n        SecondChanceScreen.prototype.alignCloseButton = function () {\r\n            var margin = 70;\r\n            this.closeButton.x = game.Config.SOURCE_GAME_WIDTH / 2 - margin;\r\n            this.closeButton.y = -this.background.displayHeight / 2 + margin;\r\n        };\r\n        SecondChanceScreen.prototype.updateData = function (levelNumber, blocksType, killedBlocksNum, requiredBlocksNum) {\r\n            this.popup.updateData(levelNumber, blocksType, killedBlocksNum, requiredBlocksNum);\r\n        };\r\n        SecondChanceScreen.prototype.show = function () {\r\n            var _this = this;\r\n            this.alpha = 1;\r\n            var items = [this.popup, this.playButton, this.popup.foxBubble, this.closeButton];\r\n            items.forEach(function (item) {\r\n                item.alpha = 0;\r\n                item.scale = 0.8;\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: items,\r\n                alpha: { value: 1, duration: 200, ease: EasingString.Cubic },\r\n                scale: { value: 1, duration: 500, ease: EasingString.Back },\r\n                delay: this.scene.tweens.stagger(100),\r\n            }).on(Phaser.Tweens.Events.TIMELINE_COMPLETE, function () {\r\n                _this.animatePlayButton();\r\n            });\r\n            this.playRevealSound();\r\n        };\r\n        SecondChanceScreen.prototype.animatePlayButton = function () {\r\n            this.animatePlayButtonEvent = this.scene.time.addEvent({\r\n                repeat: -1,\r\n                startAt: 2999,\r\n                delay: 3000,\r\n                callback: this.shakePlayButton,\r\n                callbackScope: this,\r\n            });\r\n        };\r\n        SecondChanceScreen.prototype.shakePlayButton = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.playButton,\r\n                duration: 266,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.1,\r\n                scaleY: 1.1,\r\n                repeat: 2,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        SecondChanceScreen.prototype.playRevealSound = function () {\r\n            if (this.scene.cache.audio.has(game.GameSoundKey.GIFT_REVEAL)) {\r\n                this.scene.sound.play(game.GameSoundKey.GIFT_REVEAL, { volume: 0.66 });\r\n            }\r\n        };\r\n        SecondChanceScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            if (this.animatePlayButtonEvent) {\r\n                this.animatePlayButtonEvent.remove();\r\n                this.animatePlayButtonEvent = null;\r\n            }\r\n            this.scene.tweens.killTweensOf(this.playButton);\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 150,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onStart: function () {\r\n                    _this.emit(SecondChanceScreenEvent.HIDE_START, _this);\r\n                    _this.scene.game.toasts.dismissAll();\r\n                },\r\n                onComplete: function () {\r\n                    _this.emit(SecondChanceScreenEvent.HIDE_COMPLETE, _this);\r\n                    _this.destroy();\r\n                },\r\n            });\r\n        };\r\n        SecondChanceScreen.prototype.shakeCloseButton = function () {\r\n            this.closeButton.scale = 1;\r\n            this.scene.tweens.killTweensOf(this.closeButton);\r\n            this.scene.tweens.add({\r\n                targets: this.closeButton,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scale: 1.25,\r\n                yoyo: true,\r\n                repeat: 1,\r\n            });\r\n        };\r\n        return SecondChanceScreen;\r\n    }(Screen));\r\n    game.SecondChanceScreen = SecondChanceScreen;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EasingString = Phaser.Math.EasingString;\r\n    var FreeBoostersScreenEvent;\r\n    (function (FreeBoostersScreenEvent) {\r\n        FreeBoostersScreenEvent[\"HIDE_START\"] = \"FreeBoostersScreen_HIDE_START\";\r\n        FreeBoostersScreenEvent[\"HIDE_COMPLETE\"] = \"FreeBoostersScreen_HIDE_COMPLETE\";\r\n    })(FreeBoostersScreenEvent = game.FreeBoostersScreenEvent || (game.FreeBoostersScreenEvent = {}));\r\n    var FreeBoostersScreen = /** @class */ (function (_super) {\r\n        __extends(FreeBoostersScreen, _super);\r\n        function FreeBoostersScreen(scene) {\r\n            var _this = _super.call(this, scene, {\r\n                backgroundKey: \"gameplay_gui\",\r\n                backgroundFrame: \"black_rect\",\r\n                backgroundAlpha: 0.85,\r\n            }) || this;\r\n            _this.name = \"free_booster_screen\";\r\n            _this.addBoosters();\r\n            _this.addTitle();\r\n            _this.addPlayButton();\r\n            _this.addCloseButton();\r\n            _this.bringToTop(_this.title);\r\n            return _this;\r\n        }\r\n        FreeBoostersScreen.prototype.addBoosters = function () {\r\n            this.boosters = new game.GiftedBooster(this.scene, \"gameplay_gui\", game.BoosterType.BOMB, 1);\r\n            this.boosters.y = -30;\r\n            this.add(this.boosters);\r\n        };\r\n        FreeBoostersScreen.prototype.addTitle = function () {\r\n            var content = this.scene.texts.free_boosters;\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"45px\",\r\n                color: \"#ffffff\",\r\n                align: \"center\",\r\n            };\r\n            this.title = this.scene.add.text(0, 0, content, style);\r\n            this.title.setOrigin(0.5, 1);\r\n            this.title.setWordWrapWidth(game.Config.SOURCE_GAME_WIDTH * 0.66);\r\n            this.title.y = this.boosters.y - 160;\r\n            this.add(this.title);\r\n        };\r\n        FreeBoostersScreen.prototype.addPlayButton = function () {\r\n            this.playButton = this.scene.add.button(\"gameplay_gui\", \"boosters/button_video\", this);\r\n            this.playButton.top = this.boosters.y + 205;\r\n            this.playButton.areTweensEnabled = false;\r\n        };\r\n        FreeBoostersScreen.prototype.addCloseButton = function () {\r\n            this.closeButton = this.scene.add.button(\"gameplay_gui\", \"second_chance/button_close\", this);\r\n        };\r\n        FreeBoostersScreen.prototype.resize = function () {\r\n            this.background.displayHeight = (game.Config.GAME_HEIGHT + 4) / this.scale;\r\n            this.alignCloseButton();\r\n        };\r\n        FreeBoostersScreen.prototype.alignCloseButton = function () {\r\n            var margin = 70;\r\n            this.closeButton.x = game.Config.SOURCE_GAME_WIDTH / 2 - margin;\r\n            this.closeButton.y = -this.background.displayHeight / 2 + margin;\r\n        };\r\n        FreeBoostersScreen.prototype.updateData = function (boosterType, boostersNum) {\r\n            this.boosters.updateData(boosterType, boostersNum);\r\n            this.currentBooster = boosterType;\r\n        };\r\n        FreeBoostersScreen.prototype.show = function () {\r\n            this.alpha = 1;\r\n            this.playButton.scale = 1;\r\n            this.boosters.startFloat(0);\r\n            this.showContent();\r\n        };\r\n        FreeBoostersScreen.prototype.showContent = function () {\r\n            var items = [this.title, this.boosters, this.playButton, this.closeButton];\r\n            items.forEach(function (item) {\r\n                item.alpha = 0;\r\n                item.scale = 0.8;\r\n            });\r\n            this.scene.tweens.add({\r\n                targets: items,\r\n                alpha: { value: 1, duration: 200, ease: EasingString.Cubic },\r\n                scale: { value: 1, duration: 400, ease: EasingString.Back },\r\n            }).on(Phaser.Tweens.Events.TIMELINE_COMPLETE, this.onShowComplete, this);\r\n        };\r\n        FreeBoostersScreen.prototype.onShowComplete = function () {\r\n            this.animatePlayButton();\r\n        };\r\n        FreeBoostersScreen.prototype.animatePlayButton = function () {\r\n            this.animatePlayButtonEvent = this.scene.time.addEvent({\r\n                repeat: -1,\r\n                startAt: 2999,\r\n                delay: 3000,\r\n                callback: this.shakePlayButton,\r\n                callbackScope: this,\r\n            });\r\n        };\r\n        FreeBoostersScreen.prototype.shakePlayButton = function () {\r\n            this.scene.tweens.add({\r\n                targets: this.playButton,\r\n                duration: 266,\r\n                ease: Phaser.Math.Easing.Sine.InOut,\r\n                scaleX: 1.1,\r\n                scaleY: 1.1,\r\n                repeat: 2,\r\n                yoyo: true,\r\n            });\r\n        };\r\n        FreeBoostersScreen.prototype.hide = function () {\r\n            var _this = this;\r\n            this.emit(FreeBoostersScreenEvent.HIDE_START, this);\r\n            if (this.animatePlayButtonEvent) {\r\n                this.animatePlayButtonEvent.remove();\r\n                this.animatePlayButtonEvent = null;\r\n            }\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                duration: 100,\r\n                ease: Phaser.Math.Easing.Linear.Linear,\r\n                alpha: 0,\r\n                onComplete: function () {\r\n                    _this.boosters.stopFloat();\r\n                    _this.scene.game.toasts.dismissAll();\r\n                    _this.emit(FreeBoostersScreenEvent.HIDE_COMPLETE, _this);\r\n                    _this.kill();\r\n                },\r\n            });\r\n        };\r\n        return FreeBoostersScreen;\r\n    }(Phaser.GameObjects.Screen));\r\n    game.FreeBoostersScreen = FreeBoostersScreen;\r\n})(game || (game = {}));\r\n///<reference path='IngamePanel.ts' />\r\n///<reference path='topPanel/TopPanel.ts' />\r\n///<reference path='bottomPanel/BottomPanel.ts' />\r\n///<reference path='topPanel/BasicBlocksLabel.ts' />\r\n///<reference path='ComplexBlocksLabel.ts' />\r\n///<reference path='levelComplete/LevelCompleteScreen.ts' />\r\n///<reference path='levelFailed/LevelFailedScreen.ts' />\r\n///<reference path='GameplayGuiDepth.ts' />\r\n///<reference path='tutorial/TutorialScreen.ts' />\r\n///<reference path='PauseScreen.ts' />\r\n///<reference path='CollectedBlock.ts' />\r\n///<reference path='FastForwardFx.ts' />\r\n///<reference path='gift/GiftScreen.ts' />\r\n///<reference path='boosterHintScreen/BoosterHintScreen.ts' />\r\n///<reference path='Flash.ts' />\r\n///<reference path='secondChanceScreen/SecondChanceScreen.ts' />\r\n///<reference path='FreeBoostersScreen.ts' />\r\n///<reference path='FastForwardPopover.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var GameplayGuiEvent;\r\n    (function (GameplayGuiEvent) {\r\n        GameplayGuiEvent[\"PAUSE\"] = \"GUI_PAUSE\";\r\n        GameplayGuiEvent[\"RESUME\"] = \"GUI_RESUME\";\r\n        GameplayGuiEvent[\"GOTO_LEVEL\"] = \"GOTO_LEVEL\";\r\n        GameplayGuiEvent[\"GOTO_LEVELS_MAP\"] = \"GOTO_LEVELS_MAP\";\r\n    })(GameplayGuiEvent = game.GameplayGuiEvent || (game.GameplayGuiEvent = {}));\r\n    var GameplayGui = /** @class */ (function (_super) {\r\n        __extends(GameplayGui, _super);\r\n        function GameplayGui() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        Object.defineProperty(GameplayGui.prototype, \"boostersPanel\", {\r\n            get: function () {\r\n                return this.bottomPanel.boostersPanel;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"pauseButton\", {\r\n            get: function () {\r\n                return this.bottomPanel.pauseButton;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"fastForwardButton\", {\r\n            get: function () {\r\n                return this.bottomPanel.fastForwardButton;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"dropBallsButton\", {\r\n            get: function () {\r\n                return this.bottomPanel.dropBallsButton;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"blocksLabel\", {\r\n            get: function () {\r\n                return this.topPanel.mainLabel.blocksLabel;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"pointsLabel\", {\r\n            get: function () {\r\n                return this.topPanel.pointsLabel;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(GameplayGui.prototype, \"ballsLabel\", {\r\n            get: function () {\r\n                return this.topPanel.mainLabel.ballsLabel;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        GameplayGui.prototype.init = function (data) {\r\n            _super.prototype.init.call(this);\r\n            this.levelConfig = data.levelConfig;\r\n            this.gameField = data.gameplay;\r\n            this.tutorial = null;\r\n            this.giftScreen = null;\r\n        };\r\n        GameplayGui.prototype.create = function () {\r\n            this.addFlash();\r\n            this.addTopPanel();\r\n            this.addBottomPanel();\r\n            this.addFastForwardPopover();\r\n            this.addCollectedBlocks();\r\n            this.addFastForward();\r\n            this.addGiftScreen();\r\n            this.addTutorial();\r\n            this.addBoosterHintScreen();\r\n            this.addFreeBoostersScreen();\r\n            this.addSecondChanceScreen();\r\n            this.addPauseScreen();\r\n            this.addCompleteScreen();\r\n            this.addFailedScreen();\r\n            this.addKeyboardCallbacks();\r\n            this.cameras.main.visible = !utils.NetUtil.getParamBool(\"hideGui\");\r\n        };\r\n        GameplayGui.prototype.addFlash = function () {\r\n            this.flash = new game.Flash(this, \"gameplay_gui\", \"white_rect\");\r\n            this.flash.kill();\r\n            this.add.existing(this.flash);\r\n        };\r\n        GameplayGui.prototype.addTopPanel = function () {\r\n            this.topPanel = new game.TopPanel(this, this.levelConfig);\r\n        };\r\n        GameplayGui.prototype.addBottomPanel = function () {\r\n            this.bottomPanel = new game.BottomPanel(this);\r\n            this.bottomPanel.setDepth(game.GameplayGuiDepth.BOTTOM_PANEL);\r\n            this.bottomPanel.pauseButton.on(ButtonEvent.PRESS, this.onPauseButtonClick, this);\r\n        };\r\n        GameplayGui.prototype.onPauseButtonClick = function () {\r\n            this.events.emit(GameplayGuiEvent.PAUSE, this);\r\n        };\r\n        GameplayGui.prototype.addFastForwardPopover = function () {\r\n            var wasFastForwardUsed = this.game.store.getBoolean(game.GameStoreKey.FAST_FORWARD_WAS_USED);\r\n            if (wasFastForwardUsed) {\r\n                return;\r\n            }\r\n            this.fastForwardPopover = new game.FastForwardPopover(this, this.gameField);\r\n            this.fastForwardPopover.on(game.FastForwardPopoverEvent.SHOW, this.alignFastForwardPopover, this);\r\n            this.fastForwardPopover.kill();\r\n            this.add.existing(this.fastForwardPopover);\r\n        };\r\n        GameplayGui.prototype.addCollectedBlocks = function () {\r\n            var _this = this;\r\n            this.collectedBlocks = this.add.group({\r\n                classType: game.CollectedBlock,\r\n                createCallback: function (block) {\r\n                    block.kill();\r\n                    block.setDepth(game.GameplayGuiDepth.COLLECTED_BLOCKS);\r\n                },\r\n            });\r\n            var blocksInitialNum = 5;\r\n            _.times(blocksInitialNum, function () {\r\n                _this.collectedBlocks.create();\r\n            });\r\n        };\r\n        GameplayGui.prototype.addFastForward = function () {\r\n            this.fastForward = new game.FastForwardFx(this);\r\n            this.fastForward.kill();\r\n            this.add.existing(this.fastForward);\r\n        };\r\n        GameplayGui.prototype.addCompleteScreen = function () {\r\n            this.completeScreen = new game.LevelCompleteScreen(this);\r\n            this.completeScreen.buttons.restartButton.once(ButtonEvent.PRESS, this.onRestartButtonClick, this);\r\n            this.completeScreen.buttons.nextLevelButton.once(ButtonEvent.PRESS, this.onNextLevelButtonClick, this);\r\n            this.completeScreen.buttons.homeButton.once(ButtonEvent.PRESS, this.onMenuButtonClick, this);\r\n            this.completeScreen.kill();\r\n            this.completeScreen.setDepth(game.GameplayGuiDepth.COMPLETE_SCREEN);\r\n            this.add.existing(this.completeScreen);\r\n        };\r\n        GameplayGui.prototype.addFailedScreen = function () {\r\n            this.failedScreen = new game.LevelFailedScreen(this);\r\n            this.failedScreen.restartButton.once(Phaser.GameObjects.ButtonEvent.PRESS, this.onRestartButtonClick, this);\r\n            this.failedScreen.homeButton.once(Phaser.GameObjects.ButtonEvent.PRESS, this.onMenuButtonClick, this);\r\n            this.failedScreen.setDepth(game.GameplayGuiDepth.FAILED_SCREEN);\r\n            this.failedScreen.kill();\r\n            this.add.existing(this.failedScreen);\r\n        };\r\n        GameplayGui.prototype.onRestartButtonClick = function () {\r\n            var _this = this;\r\n            this.poki.commercialBreak(\"Restart\")\r\n                .catch(function () {\r\n            })\r\n                .finally(function () {\r\n                _this.gotoLevel(_this.levelConfig.levelNumber);\r\n            });\r\n        };\r\n        GameplayGui.prototype.onNextLevelButtonClick = function () {\r\n            var _this = this;\r\n            this.poki.commercialBreak(\"NextLevelButton\")\r\n                .catch(function () {\r\n            })\r\n                .finally(function () {\r\n                var nextLevel = _this.levelConfig.levelNumber + 1;\r\n                var nextLevelExist = _this.game.levelConfigs.check(nextLevel);\r\n                if (nextLevelExist === false) {\r\n                    _this.gotoLevelsMap();\r\n                }\r\n                _this.gotoLevel(nextLevel);\r\n            });\r\n        };\r\n        GameplayGui.prototype.onMenuButtonClick = function () {\r\n            this.gotoLevelsMap();\r\n        };\r\n        GameplayGui.prototype.gotoLevelsMap = function () {\r\n            this.events.emit(GameplayGuiEvent.GOTO_LEVELS_MAP);\r\n        };\r\n        GameplayGui.prototype.gotoLevel = function (levelNumber) {\r\n            this.events.emit(GameplayGuiEvent.GOTO_LEVEL, levelNumber);\r\n        };\r\n        GameplayGui.prototype.addGiftScreen = function () {\r\n            if (!this.levelConfig.gift) {\r\n                return;\r\n            }\r\n            var hasGifts = Object.values(this.levelConfig.gift).some(function (value) { return value > 0; });\r\n            if (hasGifts === false) {\r\n                return;\r\n            }\r\n            var giftsSaveData = this.game.store.getValue(game.GameStoreKey.LEVEL_GIFTS);\r\n            var wereCollected = giftsSaveData[this.levelConfig.levelNumber] === true;\r\n            if (wereCollected) {\r\n                return;\r\n            }\r\n            var skipGifts = utils.NetUtil.getParamBool(\"skipGifts\");\r\n            if (skipGifts) {\r\n                return;\r\n            }\r\n            this.giftScreen = new game.GiftScreen(this, \"gameplay_gui\", this.levelConfig.gift, this.bottomPanel.boostersPanel);\r\n            this.giftScreen.on(game.GiftScreenEvent.BOOSTERS_SHOW_COMPLETE, this.onGiftBoostersShowComplete, this);\r\n            this.giftScreen.on(game.GiftScreenEvent.HIDE_COMPLETE, this.onGiftScreenHideComplete, this);\r\n            this.giftScreen.setDepth(game.GameplayGuiDepth.GIFT_SCREEN);\r\n            this.add.existing(this.giftScreen);\r\n            this.giftScreen.autoPlay = utils.NetUtil.getParamBool(\"giftAutoPlay\");\r\n            this.giftScreen.show();\r\n            this.onGiftScreenShow();\r\n        };\r\n        GameplayGui.prototype.onGiftScreenShow = function () {\r\n            var _this = this;\r\n            this.time.delayedCall(100, function () {\r\n                _this.gameField.scene.pause();\r\n                _this.gameField.removePointerCallbacks();\r\n            });\r\n            this.bottomPanel.disableInput();\r\n            this.bottomPanel.kill();\r\n        };\r\n        GameplayGui.prototype.onGiftBoostersShowComplete = function () {\r\n            this.bottomPanel.revive();\r\n            this.bottomPanel.pauseButton.visible = false;\r\n            this.boostersPanel.alpha = 0;\r\n            this.tweens.add({\r\n                targets: this.boostersPanel,\r\n                duration: 266,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 1,\r\n            });\r\n        };\r\n        GameplayGui.prototype.onGiftScreenHideComplete = function (screen) {\r\n            this.saveGifts(screen.content);\r\n            this.gameField.scene.resume();\r\n            this.gameField.addPointerCallbacks();\r\n            this.bottomPanel.enableInput();\r\n            this.bottomPanel.pauseButton.visible = true;\r\n        };\r\n        GameplayGui.prototype.saveGifts = function (giftContent) {\r\n            var _a;\r\n            this.game.boosters.updateFromGift(giftContent);\r\n            var giftsSaveData = this.game.store.getValue(game.GameStoreKey.LEVEL_GIFTS);\r\n            var newSaveData = __assign(__assign({}, giftsSaveData), (_a = {}, _a[this.levelConfig.levelNumber] = true, _a));\r\n            this.game.store.saveValue(game.GameStoreKey.LEVEL_GIFTS, newSaveData);\r\n        };\r\n        GameplayGui.prototype.addTutorial = function () {\r\n            if (!this.levelConfig.tutorial) {\r\n                return;\r\n            }\r\n            var skipTutorial = utils.NetUtil.getParamBool(\"skipTutorial\");\r\n            if (skipTutorial) {\r\n                return;\r\n            }\r\n            this.tutorial = new game.TutorialScreen(this, this.levelConfig.tutorial);\r\n            this.tutorial.setDepth(game.GameplayGuiDepth.TUTORIAL_SCREEN);\r\n            this.add.existing(this.tutorial);\r\n        };\r\n        GameplayGui.prototype.showTutorial = function () {\r\n            this.onTutorialStart();\r\n            this.tutorial.once(game.TutorialEvent.COMPLETE, this.onTutorialComplete, this);\r\n            this.tutorial.show(400);\r\n        };\r\n        GameplayGui.prototype.onTutorialStart = function () {\r\n            this.gameField.removePointerCallbacks();\r\n            this.bottomPanel.kill();\r\n        };\r\n        GameplayGui.prototype.onTutorialComplete = function () {\r\n            this.gameField.addPointerCallbacks();\r\n            this.bottomPanel.revive();\r\n        };\r\n        GameplayGui.prototype.addBoosterHintScreen = function () {\r\n            this.boosterHintScreen = new game.BoosterHintScreen(this, this.bottomPanel);\r\n            this.boosterHintScreen.kill();\r\n            this.add.existing(this.boosterHintScreen);\r\n        };\r\n        GameplayGui.prototype.addFreeBoostersScreen = function () {\r\n            if (game.Main.areRewardAdsEnabled === false) {\r\n                return;\r\n            }\r\n            this.freeBoostersScreen = new game.FreeBoostersScreen(this);\r\n            this.freeBoostersScreen.kill();\r\n            this.freeBoostersScreen.setDepth(game.GameplayGuiDepth.FREE_BOOSTERS_SCREEN);\r\n            this.add.existing(this.freeBoostersScreen);\r\n        };\r\n        GameplayGui.prototype.addSecondChanceScreen = function () {\r\n            if (game.Main.areRewardAdsEnabled === false) {\r\n                return;\r\n            }\r\n            this.secondChanceScreen = new game.SecondChanceScreen(this, \"gameplay_gui\");\r\n            this.secondChanceScreen.kill();\r\n            this.secondChanceScreen.setDepth(game.GameplayGuiDepth.SECOND_CHANCE_SCREEN);\r\n            this.add.existing(this.secondChanceScreen);\r\n        };\r\n        GameplayGui.prototype.addPauseScreen = function () {\r\n            this.pauseScreen = new game.PauseScreen(this);\r\n            this.pauseScreen.kill();\r\n            this.pauseScreen.setDepth(game.GameplayGuiDepth.PAUSE_SCREEN);\r\n            this.pauseScreen.resumeButton.on(ButtonEvent.PRESS, this.onResumeButtonClick, this);\r\n            this.pauseScreen.restartButton.once(ButtonEvent.PRESS, this.onRestartButtonClick, this);\r\n            this.pauseScreen.homeButton.once(ButtonEvent.PRESS, this.gotoLevelsMap, this);\r\n            this.add.existing(this.pauseScreen);\r\n        };\r\n        GameplayGui.prototype.onResumeButtonClick = function () {\r\n            this.events.emit(GameplayGuiEvent.RESUME, this);\r\n        };\r\n        GameplayGui.prototype.addKeyboardCallbacks = function () {\r\n        };\r\n        GameplayGui.prototype.resizeTutorial = function (field) {\r\n            if (this.tutorial) {\r\n                this.tutorial.resize(field);\r\n            }\r\n        };\r\n        GameplayGui.prototype.doResize = function () {\r\n            this.flash.resize();\r\n            this.alignTopPanel();\r\n            this.alignBottomPanel();\r\n            this.alignFastForwardPopover();\r\n            this.resizeGiftScreen();\r\n            this.resizeSecondChanceScreen();\r\n            this.resizeFreeBoostersScreen();\r\n            this.fastForward.resize();\r\n            this.completeScreen.resize();\r\n            this.failedScreen.resize();\r\n            this.resizePauseScreen();\r\n        };\r\n        GameplayGui.prototype.resizePauseScreen = function () {\r\n            this.pauseScreen.scale = (game.Config.GAME_WIDTH + 4) / game.Config.SOURCE_GAME_WIDTH;\r\n            this.pauseScreen.x = game.Config.HALF_GAME_WIDTH;\r\n            this.pauseScreen.y = game.Config.HALF_GAME_HEIGHT;\r\n            this.pauseScreen.resize();\r\n        };\r\n        GameplayGui.prototype.alignTopPanel = function () {\r\n            var minWidth = game.Config.GAME_WIDTH * 0.5;\r\n            var maxWidth = game.Config.GAME_WIDTH - 14;\r\n            var minAspectRatio = 0.6;\r\n            var maxAspectRatio = 1;\r\n            var width = Phaser.Math.MapLinear(game.Config.ASPECT_RATIO, maxAspectRatio, minAspectRatio, minWidth, maxWidth);\r\n            width = Phaser.Math.Clamp(width, minWidth, maxWidth);\r\n            this.topPanel.scale = width / this.topPanel.getWidth();\r\n            this.topPanel.x = game.Config.HALF_GAME_WIDTH;\r\n            this.topPanel.y = 0;\r\n            this.topPanel.originalY = this.topPanel.y;\r\n        };\r\n        GameplayGui.prototype.alignBottomPanel = function () {\r\n            this.bottomPanel.scale = this.topPanel.scale;\r\n            this.bottomPanel.x = game.Config.HALF_GAME_WIDTH;\r\n            this.bottomPanel.y = game.Config.GAME_HEIGHT - this.bottomPanel.getVeticalOffset() * this.bottomPanel.scale;\r\n        };\r\n        GameplayGui.prototype.alignFastForwardPopover = function () {\r\n            if (!this.fastForwardPopover) {\r\n                return;\r\n            }\r\n            var scale = this.bottomPanel.scale;\r\n            var button = this.bottomPanel.fastForwardButton;\r\n            var position = button.getWorldPosition();\r\n            this.fastForwardPopover.scale = scale;\r\n            this.fastForwardPopover.y = position.y - (button.height / 2) * scale;\r\n            this.fastForwardPopover.originalY = this.fastForwardPopover.y;\r\n            var right = game.Config.GAME_WIDTH - 20 * scale;\r\n            var maxX = right - ((this.fastForwardPopover.getWidth() - 20) * scale) / 2;\r\n            if (position.x > maxX) {\r\n                this.fastForwardPopover.x = maxX;\r\n                this.fastForwardPopover.offsetTip(maxX - position.x);\r\n            }\r\n            else {\r\n                this.fastForwardPopover.x = position.x;\r\n                this.fastForwardPopover.offsetTip(0);\r\n            }\r\n        };\r\n        GameplayGui.prototype.resizeGiftScreen = function () {\r\n            if (!this.giftScreen) {\r\n                return;\r\n            }\r\n            this.giftScreen.scale = (game.Config.GAME_WIDTH + 4) / game.Config.SOURCE_GAME_WIDTH;\r\n            this.giftScreen.x = game.Config.HALF_GAME_WIDTH;\r\n            this.giftScreen.y = game.Config.HALF_GAME_HEIGHT;\r\n            this.giftScreen.resize();\r\n        };\r\n        GameplayGui.prototype.resizeSecondChanceScreen = function () {\r\n            if (!this.secondChanceScreen) {\r\n                return;\r\n            }\r\n            this.secondChanceScreen.scale = (game.Config.GAME_WIDTH + 4) / game.Config.SOURCE_GAME_WIDTH;\r\n            this.secondChanceScreen.x = game.Config.HALF_GAME_WIDTH;\r\n            this.secondChanceScreen.y = game.Config.HALF_GAME_HEIGHT;\r\n            this.secondChanceScreen.resize();\r\n        };\r\n        GameplayGui.prototype.resizeFreeBoostersScreen = function () {\r\n            if (!this.freeBoostersScreen) {\r\n                return;\r\n            }\r\n            this.freeBoostersScreen.scale = (game.Config.GAME_WIDTH + 4) / game.Config.SOURCE_GAME_WIDTH;\r\n            this.freeBoostersScreen.x = game.Config.HALF_GAME_WIDTH;\r\n            this.freeBoostersScreen.y = game.Config.HALF_GAME_HEIGHT;\r\n            this.freeBoostersScreen.resize();\r\n        };\r\n        GameplayGui.prototype.resizeBoosterHintScreen = function (gameplay) {\r\n            this.boosterHintScreen.resize(gameplay);\r\n        };\r\n        GameplayGui.prototype.onTurnStart = function () {\r\n            this.hideBoostersPanel();\r\n            this.bottomPanel.showTurnButtons();\r\n        };\r\n        GameplayGui.prototype.showBoostersPanel = function () {\r\n            this.bottomPanel.boostersPanel.enableInput();\r\n            this.bottomPanel.boostersPanel.show();\r\n        };\r\n        GameplayGui.prototype.hideBoostersPanel = function () {\r\n            this.bottomPanel.boostersPanel.disableInput();\r\n            this.bottomPanel.boostersPanel.hide();\r\n        };\r\n        GameplayGui.prototype.onLevelComplete = function (data) {\r\n            this.input.keyboard.once(\"keydown-SPACE\", this.onNextLevelButtonClick, this);\r\n            this.bottomPanel.disableInput();\r\n            this.completeScreen.updateData(data);\r\n            this.completeScreen.show();\r\n        };\r\n        GameplayGui.prototype.onLevelFailed = function (data) {\r\n            this.input.keyboard.once(\"keydown-SPACE\", this.onRestartButtonClick, this);\r\n            this.bottomPanel.disableInput();\r\n            this.failedScreen.updateData(data);\r\n            this.failedScreen.show();\r\n        };\r\n        GameplayGui.prototype.onPause = function () {\r\n            this.bottomPanel.disableInput();\r\n            this.pauseScreen.show();\r\n        };\r\n        GameplayGui.prototype.onResume = function () {\r\n            this.bottomPanel.enableInput();\r\n            this.pauseScreen.hide();\r\n        };\r\n        GameplayGui.prototype.onTargetBlockKilled = function (killedBlock) {\r\n            var startPosition = this.getBlockGlobalPosition(killedBlock);\r\n            var targetPosition = this.blocksLabel.getWorldPosition();\r\n            var block = this.collectedBlocks.getFirstDead(true);\r\n            block.x = startPosition.x;\r\n            block.y = startPosition.y;\r\n            block.scale = this.gameField.camera.zoom;\r\n            block.updateFrame(killedBlock);\r\n            block.revive();\r\n            block.once(game.CollectedBlockEvent.MOVE_IN_MIDDLE, this.playBlockCollectedWhooshSound, this);\r\n            block.once(game.CollectedBlockEvent.MOVE_COMPLETE, this.playBlockCollectedCompleteSound, this);\r\n            block.once(game.CollectedBlockEvent.MOVE_COMPLETE, this.onTargetBlockMoveComplete, this);\r\n            block.moveTo(targetPosition, this.blocksLabel.blockOriginalScale);\r\n        };\r\n        GameplayGui.prototype.getBlockGlobalPosition = function (block) {\r\n            var camera = this.gameField.camera;\r\n            var padding = camera.getPadding();\r\n            var zoom = camera.zoom;\r\n            var x = camera.x + padding.x + block.x * zoom;\r\n            var y = camera.y + padding.y + block.y * zoom;\r\n            return { x: x, y: y };\r\n        };\r\n        GameplayGui.prototype.playBlockCollectedWhooshSound = function () {\r\n            this.gameField.audio.blockCollectWhoosh();\r\n        };\r\n        GameplayGui.prototype.playBlockCollectedCompleteSound = function () {\r\n            this.gameField.audio.blockCollectComplete();\r\n        };\r\n        GameplayGui.prototype.onTargetBlockMoveComplete = function () {\r\n            this.blocksLabel.incrementCurrent();\r\n            this.blocksLabel.showWhiteCopy();\r\n            this.blocksLabel.tweenBlockIcon();\r\n        };\r\n        GameplayGui.prototype.showSecondChanceScreen = function (blocksKilled, blocksRequired) {\r\n            if (this.levelConfig.levelNumber === 1) {\r\n                this.secondChanceScreen.playButton.on(ButtonEvent.PRESS, this.onSecondChanceSuccess, this);\r\n            }\r\n            else {\r\n                this.secondChanceScreen.playButton.on(ButtonEvent.PRESS, this.showSecondChanceVideoAd, this);\r\n            }\r\n            this.secondChanceScreen.closeButton.once(ButtonEvent.PRESS, this.onSecondChanceScreenClose, this);\r\n            this.secondChanceScreen.updateData(this.levelConfig.levelNumber, this.levelConfig.generator.targetItemType, blocksKilled, blocksRequired);\r\n            this.secondChanceScreen.revive();\r\n            this.secondChanceScreen.show();\r\n        };\r\n        GameplayGui.prototype.onSecondChanceScreenClose = function () {\r\n            this.secondChanceScreen.playButton.off(ButtonEvent.PRESS, this.showSecondChanceVideoAd, this);\r\n            this.secondChanceScreen.hide();\r\n        };\r\n        GameplayGui.prototype.showSecondChanceVideoAd = function () {\r\n            var _this = this;\r\n            this.analytics.sendRewardedAd(\"second_chance\", \"screen\", \"request\");\r\n            this.poki.rewardedBreak(\"SecondChance\", {\r\n                onSuccess: function () {\r\n                    _this.onSecondChanceSuccess();\r\n                    _this.analytics.sendRewardedAd(\"second_chance\", \"screen\", \"receive\");\r\n                },\r\n                onFail: function () {\r\n                    _this.analytics.sendRewardedAd(\"second_chance\", \"screen\", \"fail\");\r\n                },\r\n            }).catch(function (error) {\r\n                if (error === \"AdBlock\") {\r\n                    _this.secondChanceScreen.shakeCloseButton();\r\n                }\r\n            });\r\n        };\r\n        GameplayGui.prototype.onSecondChanceSuccess = function () {\r\n            this.gameField.applySecondChance();\r\n            this.gameField.scene.resume();\r\n            this.secondChanceScreen.closeButton.off(ButtonEvent.PRESS, this.onSecondChanceScreenClose, this);\r\n            this.secondChanceScreen.playButton.off(ButtonEvent.PRESS, this.showSecondChanceVideoAd, this);\r\n            this.secondChanceScreen.hide();\r\n        };\r\n        GameplayGui.prototype.update = function (time, delta) {\r\n            _super.prototype.update.call(this, time, delta);\r\n            if (this.fastForwardPopover) {\r\n                this.fastForwardPopover.preUpdate(time, delta);\r\n            }\r\n        };\r\n        GameplayGui.prototype.shutdown = function () {\r\n        };\r\n        GameplayGui.FONT_COLOR_STR = \"#E9EBEC\";\r\n        GameplayGui.FONT_COLOR = 0xe9ebec;\r\n        return GameplayGui;\r\n    }(game.BaseScene));\r\n    game.GameplayGui = GameplayGui;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var GameplayRootBackground = /** @class */ (function () {\r\n        function GameplayRootBackground(scene, worldIndex) {\r\n            this.scene = scene;\r\n            this.worldIndex = worldIndex;\r\n            this.addSky();\r\n            this.addGround();\r\n            this.addBottomGrass();\r\n        }\r\n        GameplayRootBackground.prototype.addSky = function () {\r\n            this.sky = this.scene.add.image(0, 0, \"backgrounds\", \"sky_\" + this.worldIndex);\r\n            this.sky.setOrigin(0.5, 1);\r\n        };\r\n        GameplayRootBackground.prototype.addGround = function () {\r\n            this.ground = this.scene.add.image(0, 0, \"backgrounds\", \"ground_\" + this.worldIndex);\r\n        };\r\n        GameplayRootBackground.prototype.addBottomGrass = function () {\r\n            this.bottomGrass = this.scene.add.image(0, 0, \"backgrounds\", \"bottom_grass_\" + this.worldIndex);\r\n            this.bottomGrass.setOrigin(0.5, 1);\r\n        };\r\n        GameplayRootBackground.prototype.resize = function (field) {\r\n            if (!field || !field.camera) {\r\n                return;\r\n            }\r\n            this.resizeGround(field);\r\n            this.resizeSky();\r\n            this.resizeBottomGrass();\r\n        };\r\n        GameplayRootBackground.prototype.resizeGround = function (field) {\r\n            this.ground.scale = game.Config.GAME_WIDTH / this.ground.width;\r\n            this.ground.x = game.Config.HALF_GAME_WIDTH;\r\n            this.ground.y = this.getFieldBottom(field.camera);\r\n        };\r\n        GameplayRootBackground.prototype.getFieldBottom = function (gameplayCamera) {\r\n            return gameplayCamera.height - gameplayCamera.getPadding().y;\r\n        };\r\n        GameplayRootBackground.prototype.resizeSky = function () {\r\n            var top = 0;\r\n            var bottom = this.ground.y;\r\n            var height = bottom - top;\r\n            this.sky.displayWidth = game.Config.GAME_WIDTH;\r\n            this.sky.displayHeight = height;\r\n            this.sky.x = game.Config.HALF_GAME_WIDTH;\r\n            this.sky.y = bottom;\r\n        };\r\n        GameplayRootBackground.prototype.resizeBottomGrass = function () {\r\n            this.bottomGrass.scale = game.Config.GAME_WIDTH / this.bottomGrass.width;\r\n            this.bottomGrass.x = game.Config.HALF_GAME_WIDTH;\r\n            this.bottomGrass.y = Math.max(game.Config.GAME_HEIGHT, this.ground.y + this.bottomGrass.displayHeight * 0.9);\r\n        };\r\n        return GameplayRootBackground;\r\n    }());\r\n    game.GameplayRootBackground = GameplayRootBackground;\r\n})(game || (game = {}));\r\n///<reference path='Gameplay.ts' />\r\n///<reference path='gui/GameplayGui.ts' />\r\n///<reference path='GameplayRootBackground.ts' />\r\nvar game;\r\n(function (game) {\r\n    var GameplayRoot = /** @class */ (function (_super) {\r\n        __extends(GameplayRoot, _super);\r\n        function GameplayRoot() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        GameplayRoot.getPhysicsConfig = function () {\r\n            return {\r\n                matter: {\r\n                    debug: game.Main.development,\r\n                    enableSleeping: true,\r\n                    runner: { isFixed: true },\r\n                    gravity: { x: 0, y: 7 },\r\n                    positionIterations: 6,\r\n                    velocityIterations: 4,\r\n                    constraintIterations: 0,\r\n                    broadphase: {\r\n                        bucketWidth: game.GameGrid.CELL_SIZE,\r\n                        bucketHeight: game.GameGrid.CELL_SIZE,\r\n                    },\r\n                },\r\n            };\r\n        };\r\n        GameplayRoot.prototype.init = function (data) {\r\n            this.initData = data || this.getDefaultInitData();\r\n            this.levelNumber = this.initData.levelNumber;\r\n            this.levelConfig = this.game.levelConfigs.get(this.levelNumber);\r\n            this.gameplay = null;\r\n            this.gui = null;\r\n            this.background = null;\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n            console.group(\"Level \" + data.levelNumber);\r\n        };\r\n        GameplayRoot.prototype.getDefaultInitData = function () {\r\n            return {\r\n                levelNumber: 1,\r\n                fromEditor: false,\r\n            };\r\n        };\r\n        GameplayRoot.prototype.preload = function () {\r\n            var loader = this.game.globalScene.delayedLoader;\r\n            var areAssetsReady = loader.areGameplayAssetsLoaded;\r\n            if (areAssetsReady) {\r\n                return;\r\n            }\r\n            this.analytics.sendLoadingEvent(\"gameplay\", \"start\");\r\n            this.waitForGameplayAssets(loader);\r\n        };\r\n        GameplayRoot.prototype.waitForGameplayAssets = function (loader) {\r\n            var _this = this;\r\n            this.game.loadingOverlay.fadeIn();\r\n            this.load.rexAwait(Phaser.Math.RND.uuid(), {\r\n                callback: function (onSuccess) {\r\n                    loader.once(game.DelayedLoaderEvent.GAMEPLAY_ASSETS_READY, function () {\r\n                        _this.analytics.sendLoadingEvent(\"gameplay\", \"complete\");\r\n                        onSuccess();\r\n                    });\r\n                },\r\n            });\r\n        };\r\n        GameplayRoot.prototype.create = function () {\r\n            if (!this.levelConfig) {\r\n                console.warn(\"Config for level \" + this.levelNumber + \" doesn't exist!\");\r\n                this.gotoLevelsMap();\r\n                return;\r\n            }\r\n            console.log(\"Config\", _.omit(this.levelConfig, \"items\", \"generator\"));\r\n            this.launchGameplayScene();\r\n            this.addBackground();\r\n            this.addKeyboardCallbacks();\r\n        };\r\n        GameplayRoot.prototype.launchGameplayScene = function () {\r\n            this.gameplay = this.launchScene(game.SceneKey.GAMEPLAY, this.levelConfig);\r\n            this.gameplay.events.once(Phaser.Scenes.Events.CREATE, this.launchGameplayGuiScene, this);\r\n            this.game.raven.trackSceneInput(this.gameplay.scene.key);\r\n        };\r\n        GameplayRoot.prototype.launchGameplayGuiScene = function () {\r\n            this.gui = this.launchScene(game.SceneKey.GAMEPLAY_GUI, {\r\n                levelConfig: this.levelConfig,\r\n                gameplay: this.gameplay,\r\n            });\r\n            this.gui.events.once(Phaser.Scenes.Events.CREATE, this.onGuiCreated, this);\r\n            this.gui.events.once(game.GameplayGuiEvent.GOTO_LEVELS_MAP, this.gotoLevelsMap, this);\r\n            this.gui.events.once(game.GameplayGuiEvent.GOTO_LEVEL, this.gotoLevel, this);\r\n            this.gui.events.on(game.GameplayGuiEvent.PAUSE, this.pause, this);\r\n            this.gui.events.on(game.GameplayGuiEvent.RESUME, this.resume, this);\r\n            this.game.raven.trackSceneInput(this.gui.scene.key);\r\n        };\r\n        GameplayRoot.prototype.onGuiCreated = function () {\r\n            this.gameplay.gui = this.gui;\r\n            this.gameplay.onGuiCreated();\r\n            this.resize();\r\n            if (this.gui.tutorial) {\r\n                this.gui.showTutorial();\r\n            }\r\n            this.game.loadingOverlay.fadeOut();\r\n        };\r\n        GameplayRoot.prototype.launchScene = function (key, data) {\r\n            return this.scene.launch(key, data).get(key);\r\n        };\r\n        GameplayRoot.prototype.addBackground = function () {\r\n            var worldIndexStr = this.levelConfig.background.split(\"_\").pop();\r\n            var worldIndex = parseInt(worldIndexStr) || 1;\r\n            this.background = new game.GameplayRootBackground(this, worldIndex);\r\n        };\r\n        GameplayRoot.prototype.addKeyboardCallbacks = function () {\r\n            if (game.Main.development) {\r\n                this.input.keyboard.on(\"keydown-P\", this.togglePause, this);\r\n                this.input.keyboard.once(\"keydown-R\", this.restart, this);\r\n                this.input.keyboard.once(\"keydown-ESC\", this.onEscKeyDown, this);\r\n                this.input.keyboard.once(\"keydown-RIGHT\", this.gotoNextLevel, this);\r\n                this.input.keyboard.once(\"keydown-LEFT\", this.gotoPrevLevel, this);\r\n            }\r\n            if (game.Main.editorEnabled) {\r\n                this.input.keyboard.once(\"keydown-E\", this.gotoEditor, this);\r\n                // this.input.keyboard.on(\"keydown-T\", this.gotoTutorialEditor, this)\r\n            }\r\n        };\r\n        GameplayRoot.prototype.gotoPrevLevel = function () {\r\n            var prevLevelNumber = this.levelNumber - 1;\r\n            var prevLevelExist = this.game.levelConfigs.check(prevLevelNumber);\r\n            if (prevLevelExist === false) {\r\n                return;\r\n            }\r\n            this.gotoLevel(prevLevelNumber);\r\n        };\r\n        GameplayRoot.prototype.gotoNextLevel = function () {\r\n            var nextLevelNumber = this.levelNumber + 1;\r\n            var nextLevelExist = this.game.levelConfigs.check(nextLevelNumber);\r\n            if (nextLevelExist === false) {\r\n                return;\r\n            }\r\n            this.gotoLevel(nextLevelNumber);\r\n        };\r\n        GameplayRoot.prototype.gotoLevel = function (levelNumber) {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.GAMEPLAY_ROOT, { levelNumber: levelNumber });\r\n        };\r\n        GameplayRoot.prototype.onEscKeyDown = function () {\r\n            if (this.initData.fromEditor) {\r\n                this.gotoEditor();\r\n            }\r\n            else {\r\n                this.gotoLevelsMap();\r\n            }\r\n        };\r\n        GameplayRoot.prototype.gotoEditor = function () {\r\n            this.scene.start(game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: this.levelNumber });\r\n        };\r\n        GameplayRoot.prototype.gotoTutorialEditor = function () {\r\n            this.scene.start(game.SceneKey.TUTORIAL_EDITOR, { levelNumber: this.levelNumber });\r\n        };\r\n        GameplayRoot.prototype.gotoLevelsMap = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.LEVELS_MAP);\r\n        };\r\n        GameplayRoot.prototype.restart = function () {\r\n            this.game.changeScene(this.scene.key, game.SceneKey.GAMEPLAY_ROOT, { levelNumber: this.levelNumber });\r\n        };\r\n        GameplayRoot.prototype.togglePause = function () {\r\n            var _a;\r\n            if ((_a = this.gameplay) === null || _a === void 0 ? void 0 : _a.scene.isPaused()) {\r\n                this.resume();\r\n            }\r\n            else {\r\n                this.pause();\r\n            }\r\n        };\r\n        GameplayRoot.prototype.resize = function () {\r\n            var _a, _b, _c, _d, _e;\r\n            (_a = this.gui) === null || _a === void 0 ? void 0 : _a.doResize();\r\n            (_b = this.gameplay) === null || _b === void 0 ? void 0 : _b.doResize();\r\n            (_c = this.background) === null || _c === void 0 ? void 0 : _c.resize(this.gameplay);\r\n            (_d = this.gui) === null || _d === void 0 ? void 0 : _d.resizeTutorial(this.gameplay);\r\n            (_e = this.gui) === null || _e === void 0 ? void 0 : _e.resizeBoosterHintScreen(this.gameplay);\r\n        };\r\n        GameplayRoot.prototype.pause = function () {\r\n            this.gameplay.onPause();\r\n            this.gui.onPause();\r\n        };\r\n        GameplayRoot.prototype.resume = function () {\r\n            this.gameplay.onResume();\r\n            this.gui.onResume();\r\n        };\r\n        GameplayRoot.prototype.shutdown = function () {\r\n            this.stopChildScenes();\r\n            console.groupEnd();\r\n        };\r\n        GameplayRoot.prototype.stopChildScenes = function () {\r\n            this.getChildScenes().forEach(function (childScene) {\r\n                if (childScene) {\r\n                    childScene.scene.stop();\r\n                }\r\n            });\r\n            if (this.gameplay) {\r\n                this.gameplay.events.off(Phaser.Scenes.Events.CREATE, this.launchGameplayGuiScene, this);\r\n            }\r\n            if (this.gui) {\r\n                this.gui.events.off(Phaser.Scenes.Events.CREATE, this.onGuiCreated, this);\r\n                this.gui.events.off(game.GameplayGuiEvent.GOTO_LEVELS_MAP, this.gotoLevelsMap, this);\r\n                this.gui.events.off(game.GameplayGuiEvent.GOTO_LEVEL, this.gotoLevel, this);\r\n                this.gui.events.off(game.GameplayGuiEvent.PAUSE, this.pause, this);\r\n                this.gui.events.off(game.GameplayGuiEvent.RESUME, this.resume, this);\r\n            }\r\n        };\r\n        GameplayRoot.prototype.getChildScenes = function () {\r\n            return [this.gameplay, this.gui];\r\n        };\r\n        return GameplayRoot;\r\n    }(Phaser.Scene));\r\n    game.GameplayRoot = GameplayRoot;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EditorTutorialText = /** @class */ (function (_super) {\r\n        __extends(EditorTutorialText, _super);\r\n        function EditorTutorialText(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.name = \"tutorial_text\";\r\n            _this.addBackground();\r\n            _this.addText();\r\n            return _this;\r\n        }\r\n        EditorTutorialText.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, \"editor\", \"back\");\r\n            this.add(this.background);\r\n        };\r\n        EditorTutorialText.prototype.addText = function () {\r\n            var content = \"Tutorial\";\r\n            var style = {\r\n                fontFamily: game.GameFont.SOUSES,\r\n                fontStyle: game.FontWeight.BOLD,\r\n                fontSize: \"30px\",\r\n                color: \"#B72C35\",\r\n                align: \"center\",\r\n            };\r\n            this.text = this.scene.add.text(0, 0, content, style);\r\n            this.text.setWordWrapWidth(this.background.width * 0.9);\r\n            this.text.setOrigin(0.5, 0.5);\r\n            // this.text.y += 3\r\n            this.add(this.text);\r\n        };\r\n        EditorTutorialText.prototype.updateText = function (content) {\r\n            this.text.setText(content);\r\n            var maxHeight = this.background.height * 0.7;\r\n            this.text.scale = 1;\r\n            this.text.scale = Math.min(1, maxHeight / this.text.height);\r\n        };\r\n        EditorTutorialText.prototype.getWidth = function () {\r\n            return this.background.width;\r\n        };\r\n        EditorTutorialText.prototype.getHeight = function () {\r\n            return this.background.height;\r\n        };\r\n        EditorTutorialText.prototype.getDisplayHeight = function () {\r\n            return this.getHeight() * this.scaleY;\r\n        };\r\n        return EditorTutorialText;\r\n    }(Phaser.GameObjects.Container));\r\n    game.EditorTutorialText = EditorTutorialText;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var Rectangle = Phaser.Geom.Rectangle;\r\n    var EditorTutorialArea = /** @class */ (function (_super) {\r\n        __extends(EditorTutorialArea, _super);\r\n        function EditorTutorialArea(scene) {\r\n            var _this = _super.call(this, scene, {\r\n                x: 0,\r\n                y: 0,\r\n                fillStyle: { color: 0, alpha: 0.5 },\r\n                lineStyle: { width: 0 },\r\n            }) || this;\r\n            _this.width = 0;\r\n            _this.height = 0;\r\n            _this.setInteractive(_this.getHitArea(), Rectangle.Contains);\r\n            _this.setSize(EditorTutorialArea.INITIAL_WIDTH, EditorTutorialArea.INITIAL_HEIGHT);\r\n            _this.input.cursor = \"pointer\";\r\n            return _this;\r\n        }\r\n        EditorTutorialArea.prototype.getHitArea = function () {\r\n            return new Rectangle(-this.width / 2, -this.height / 2, this.width, this.height);\r\n        };\r\n        EditorTutorialArea.prototype.changeSize = function (deltaWidth, deltaHeight) {\r\n            this.setSize(this.width + deltaWidth, this.height + deltaHeight);\r\n        };\r\n        EditorTutorialArea.prototype.setSize = function (width, height) {\r\n            this.width = Math.max(EditorTutorialArea.INITIAL_WIDTH, width);\r\n            this.height = Math.max(EditorTutorialArea.INITIAL_HEIGHT, height);\r\n            this.clear();\r\n            this.fillRoundedRect(-width / 2, -height / 2, width, height);\r\n            this.input.hitArea = this.getHitArea();\r\n        };\r\n        EditorTutorialArea.prototype.destroy = function (fromScene) {\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        EditorTutorialArea.INITIAL_WIDTH = game.GameGrid.CELL_SIZE * 1.5;\r\n        EditorTutorialArea.INITIAL_HEIGHT = game.GameGrid.CELL_SIZE * 1.5;\r\n        return EditorTutorialArea;\r\n    }(Phaser.GameObjects.Graphics));\r\n    game.EditorTutorialArea = EditorTutorialArea;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var TutorialConfigPanelEvent;\r\n    (function (TutorialConfigPanelEvent) {\r\n        TutorialConfigPanelEvent[\"TEXT_CHANGE\"] = \"TEXT_CHANGE\";\r\n    })(TutorialConfigPanelEvent = game.TutorialConfigPanelEvent || (game.TutorialConfigPanelEvent = {}));\r\n    var TutorialConfigPanel = /** @class */ (function (_super) {\r\n        __extends(TutorialConfigPanel, _super);\r\n        function TutorialConfigPanel(scene, levelNumber, tutorialConfig) {\r\n            var _this = _super.call(this, scene, \"Level \" + levelNumber) || this;\r\n            _this.tutorialConfig = tutorialConfig;\r\n            _this.panel.addInput(_this.tutorialConfig, \"text\").on(\"change\", _this.onTextChange.bind(_this));\r\n            _this.panel.addInput(_this.tutorialConfig, \"textKey\");\r\n            _this.panel.addSeparator();\r\n            _this.panel.addInput(_this.tutorialConfig, \"tweenMask\");\r\n            _this.panel.addInput(_this.tutorialConfig, \"tweenScale\", { min: 1, max: 1.3, step: 0.01 });\r\n            _this.panel.addSeparator();\r\n            _this.panel.addInput(_this.tutorialConfig, \"snapping\");\r\n            _this.panel.addSeparator();\r\n            _this.addButtons();\r\n            return _this;\r\n        }\r\n        TutorialConfigPanel.prototype.onTextChange = function (text) {\r\n            this.events.emit(TutorialConfigPanelEvent.TEXT_CHANGE, text);\r\n        };\r\n        TutorialConfigPanel.prototype.addButtons = function () {\r\n            this.editorButton = this.panel.addButton({ title: \"Editor\" });\r\n            this.deleteButton = this.panel.addButton({ title: \"Delete\" });\r\n            this.saveButton = this.panel.addButton({ title: \"Save\" });\r\n            this.testButton = this.panel.addButton({ title: \"Test\" });\r\n        };\r\n        return TutorialConfigPanel;\r\n    }(game.EditorPanel));\r\n    game.TutorialConfigPanel = TutorialConfigPanel;\r\n})(game || (game = {}));\r\n///<reference path='EditorTutorialText.ts' />\r\n///<reference path='EditorTutorialArea.ts' />\r\n///<reference path='panels/TutorialConfigPanel.ts' />\r\nvar game;\r\n(function (game) {\r\n    var ButtonEvent = Phaser.GameObjects.ButtonEvent;\r\n    var TutorialEditor = /** @class */ (function (_super) {\r\n        __extends(TutorialEditor, _super);\r\n        function TutorialEditor() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.lastPointerDownTime = 0;\r\n            return _this;\r\n        }\r\n        TutorialEditor.prototype.init = function (data) {\r\n            this.levelNumber = data ? data.levelNumber : 1;\r\n            this.levelConfig = this.game.levelConfigs.get(this.levelNumber);\r\n            this.tutorialConfig = _.cloneDeep(this.levelConfig.tutorial) || this.getDefaultTutorialConfig();\r\n            console.group(\"Tutorial Editor - Level \" + this.levelNumber);\r\n            console.log(this.tutorialConfig);\r\n            this.getDefaultTutorialConfig();\r\n            this.lastPointerDownTime = 0;\r\n            this.tutorialArea = null;\r\n            this.events.once(\"shutdown\", this.shutdown, this);\r\n        };\r\n        TutorialEditor.prototype.getDefaultTutorialConfig = function () {\r\n            var defaultConfig = {\r\n                autoGenerated: true,\r\n                tweenMask: false,\r\n                tweenScale: 1.15,\r\n                width: 0,\r\n                height: 0,\r\n                x: 0,\r\n                y: 0,\r\n                snapping: true,\r\n                text: \"\",\r\n                textKey: \"\",\r\n            };\r\n            return defaultConfig;\r\n        };\r\n        TutorialEditor.prototype.preload = function () {\r\n            // we have to preload this for grid\r\n            this.load.atlas(\"gameplay\", \"assets/graphics/gameplay.png\", \"assets/graphics/gameplay.json\");\r\n            this.load.atlas(\"gameplay_gui\", \"assets/graphics/gameplay_gui.png\", \"assets/graphics/gameplay_gui.json\");\r\n            this.load.bitmapFontFromAtlas(game.BitmapGameFont.INGAME_GUI_DIGITS, \"gameplay_gui\", \"ingame_gui_digits\", \"assets/fonts/bitmap/ingame_gui_digits.fnt\");\r\n        };\r\n        TutorialEditor.prototype.create = function () {\r\n            this.addEditorsPanels();\r\n            this.addBackground();\r\n            this.addLevelLabel();\r\n            this.addGrid();\r\n            this.addItemsLayer();\r\n            this.loadFromConfig();\r\n            this.addKeyboardCallbacks();\r\n            this.addPointerCallbacks();\r\n            this.resize();\r\n        };\r\n        TutorialEditor.prototype.addEditorsPanels = function () {\r\n            var _this = this;\r\n            this.panelsContainer = document.getElementById(\"editor-panels\");\r\n            this.panelsContainer.style.visibility = \"visible\";\r\n            this.time.delayedCall(100, function () {\r\n                _this.panelsContainer.style.visibility = \"visible\";\r\n            });\r\n            this.panel = new game.TutorialConfigPanel(this, this.levelConfig.levelNumber, this.tutorialConfig);\r\n            this.panel.events.on(game.TutorialConfigPanelEvent.TEXT_CHANGE, this.onTutorialTextChange, this);\r\n            this.panel.editorButton.on(\"click\", this.gotoLevelEditor.bind(this));\r\n            this.panel.deleteButton.on(\"click\", this.onDeleteButtonClick.bind(this));\r\n            this.panel.testButton.on(\"click\", this.onTestButtonClick.bind(this));\r\n            this.panel.saveButton.on(\"click\", this.onSaveButtonClick.bind(this));\r\n        };\r\n        TutorialEditor.prototype.gotoLevelEditor = function () {\r\n            this.scene.start(game.SceneKey.LEVEL_EDITOR_ROOT, { levelNumber: this.levelNumber });\r\n        };\r\n        TutorialEditor.prototype.onTutorialTextChange = function (text) {\r\n            if (!this.tutorialText) {\r\n                return;\r\n            }\r\n            this.tutorialText.updateText(text);\r\n        };\r\n        TutorialEditor.prototype.onDeleteButtonClick = function () {\r\n            var _this = this;\r\n            if (!this.tutorialArea) {\r\n                console.warn(\"Nothing to delete!\");\r\n                return;\r\n            }\r\n            var isConfirmed = window.confirm(\"Delete tutorial for level \" + this.levelConfig.levelNumber + \"?\");\r\n            if (!isConfirmed) {\r\n                return;\r\n            }\r\n            this.tutorialArea.destroy();\r\n            this.tutorialArea = null;\r\n            this.tutorialText.destroy();\r\n            this.tutorialText = null;\r\n            Object.assign(this.tutorialConfig, this.getDefaultTutorialConfig());\r\n            this.panel.refresh();\r\n            delete this.levelConfig.tutorial;\r\n            this.panel.disableInput();\r\n            console.log(\"Deleting tutorial for level \" + this.levelConfig.levelNumber + \"...\");\r\n            this.game.levelConfigs.saveLocally();\r\n            this.game.levelConfigs.saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Delete complete! \u2714\");\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Delete failed!\");\r\n            })\r\n                .finally(function () {\r\n                _this.panel.enableInput();\r\n            });\r\n        };\r\n        TutorialEditor.prototype.onTestButtonClick = function () {\r\n            if (!this.tutorialArea) {\r\n                console.warn(\"Add tutorial area first!\");\r\n                return;\r\n            }\r\n            Object.assign(this.tutorialConfig, this.createTutorialConfig());\r\n            this.levelConfig.tutorial = this.tutorialConfig;\r\n            this.game.changeScene(this.scene.key, game.SceneKey.GAMEPLAY_ROOT, { levelNumber: this.levelNumber });\r\n        };\r\n        TutorialEditor.prototype.onSaveButtonClick = function () {\r\n            var _this = this;\r\n            if (!this.tutorialArea) {\r\n                console.warn(\"Add tutorial area first!\");\r\n                return;\r\n            }\r\n            if (!this.tutorialConfig.textKey) {\r\n                console.warn(\"Please set textKey!\");\r\n                return;\r\n            }\r\n            Object.assign(this.tutorialConfig, this.createTutorialConfig());\r\n            this.levelConfig.tutorial = this.tutorialConfig;\r\n            this.panel.disableInput();\r\n            console.log(\"Uploading tutorial for level \" + this.levelConfig.levelNumber + \"...\", this.tutorialConfig);\r\n            this.game.levelConfigs\r\n                .saveLocally()\r\n                .then(function () {\r\n                console.log(\"Local save complete! \u2714\");\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Local save failed!\");\r\n            });\r\n            this.game.levelConfigs\r\n                .saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Upload complete! \u2714\");\r\n            })\r\n                .catch(function (xhr) {\r\n                console.warn(\"Upload failed!\");\r\n            })\r\n                .finally(function () {\r\n                _this.panel.enableInput();\r\n            });\r\n        };\r\n        TutorialEditor.prototype.createTutorialConfig = function () {\r\n            return __assign(__assign({}, this.tutorialConfig), { x: this.tutorialArea.x, y: this.tutorialArea.y, width: this.tutorialArea.width, height: this.tutorialArea.height, autoGenerated: false });\r\n        };\r\n        TutorialEditor.prototype.addBackground = function () {\r\n            this.background = this.add.image(0, 0, \"editor\", this.levelConfig.background);\r\n            this.background.setOrigin(0.5, 1);\r\n        };\r\n        TutorialEditor.prototype.addLevelLabel = function () {\r\n            this.levelLabel = new game.EditorLevelLabel(this, this.levelNumber);\r\n            this.levelLabel.prevLevelButton.once(ButtonEvent.PRESS, this.gotoPrevLevel, this);\r\n            this.levelLabel.nextLevelButton.once(ButtonEvent.PRESS, this.gotoNextLevel, this);\r\n            this.add.existing(this.levelLabel);\r\n        };\r\n        TutorialEditor.prototype.gotoPrevLevel = function () {\r\n            this.gotoLevel(this.levelNumber - 1);\r\n        };\r\n        TutorialEditor.prototype.gotoNextLevel = function () {\r\n            this.gotoLevel(this.levelNumber + 1);\r\n        };\r\n        TutorialEditor.prototype.gotoLevel = function (levelNumber) {\r\n            var isLevelExist = this.game.levelConfigs.check(levelNumber);\r\n            if (isLevelExist === false) {\r\n                console.warn(\"Level \" + levelNumber + \" doesn't exist!\");\r\n                return;\r\n            }\r\n            this.scene.start(game.SceneKey.TUTORIAL_EDITOR, { levelNumber: levelNumber });\r\n        };\r\n        TutorialEditor.prototype.addGrid = function () {\r\n            this.grid = new game.GameGrid(this, game.GameGrid.COLUMNS, game.GameGrid.ROWS);\r\n            this.add.existing(this.grid);\r\n        };\r\n        TutorialEditor.prototype.addItemsLayer = function () {\r\n            this.itemsContainer = this.add.container(0, 0);\r\n        };\r\n        TutorialEditor.prototype.loadFromConfig = function () {\r\n            this.loadItems();\r\n            this.loadTutorial();\r\n        };\r\n        TutorialEditor.prototype.loadItems = function () {\r\n            var _this = this;\r\n            this.items = [];\r\n            this.levelConfig.items\r\n                .filter(function (itemConfig) { return itemConfig.row < game.GameGrid.ROWS; })\r\n                .forEach(function (itemConfig) {\r\n                var cell = _this.grid.getCellAt(itemConfig.row, itemConfig.column);\r\n                var item = new game.EditorItem(_this, \"editor\", itemConfig.type);\r\n                item.x = cell.x;\r\n                item.y = cell.y;\r\n                item.column = cell.column;\r\n                item.row = cell.row;\r\n                item.disableInteractive();\r\n                _this.itemsContainer.add(item);\r\n                _this.items.push(item);\r\n            });\r\n        };\r\n        TutorialEditor.prototype.loadTutorial = function () {\r\n            if (this.tutorialConfig.autoGenerated) {\r\n                return;\r\n            }\r\n            this.addTutorialArea(this.tutorialConfig.x, this.tutorialConfig.y);\r\n            this.tutorialArea.setSize(this.tutorialConfig.width, this.tutorialConfig.height);\r\n            this.addTutorialText();\r\n            this.tutorialText.updateText(this.tutorialConfig.text);\r\n        };\r\n        TutorialEditor.prototype.addKeyboardCallbacks = function () {\r\n            var _this = this;\r\n            this.shiftKey = this.input.keyboard.addKey(\"shift\");\r\n            this.input.keyboard.once(\"keydown-PLUS\", function () {\r\n                _this.addTutorialArea(_this.input.activePointer.x, _this.input.activePointer.y);\r\n            });\r\n            this.input.keyboard.once(\"keydown-ESC\", this.gotoLevelsMapDev, this);\r\n        };\r\n        TutorialEditor.prototype.gotoLevelsMapDev = function () {\r\n            this.scene.start(game.SceneKey.LEVELS_MAP_DEV);\r\n        };\r\n        TutorialEditor.prototype.addPointerCallbacks = function () {\r\n            this.input.on(Phaser.Input.Events.POINTER_DOWN, this.onPointerDown, this);\r\n            this.input.on(\"drag\", function (pointer, gameObject, dragX, dragY) {\r\n                gameObject.x = dragX;\r\n                gameObject.y = dragY;\r\n            });\r\n        };\r\n        TutorialEditor.prototype.onPointerDown = function (pointer) {\r\n            var now = Date.now();\r\n            var deltaTime = now - this.lastPointerDownTime;\r\n            if (deltaTime < 300) {\r\n                if (this.tutorialArea) {\r\n                    return;\r\n                }\r\n                this.tutorialConfig.autoGenerated = false;\r\n                this.addTutorialArea(pointer.x, pointer.y);\r\n                this.addTutorialText();\r\n                this.alignTutorialText();\r\n                if (this.tutorialConfig.snapping) {\r\n                    this.snapToGrid(this.tutorialArea);\r\n                }\r\n            }\r\n            this.lastPointerDownTime = now;\r\n        };\r\n        TutorialEditor.prototype.addTutorialArea = function (x, y) {\r\n            var localPosition = this.itemsContainer.pointToContainer({ x: x, y: y });\r\n            this.tutorialArea = new game.EditorTutorialArea(this);\r\n            this.tutorialArea.x = localPosition.x;\r\n            this.tutorialArea.y = localPosition.y;\r\n            this.tutorialArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_WHEEL, this.onTutorialAreaWheel, this);\r\n            this.tutorialArea.on(Phaser.Input.Events.GAMEOBJECT_DRAG_END, this.onTutorialAreaDragEnd, this);\r\n            this.itemsContainer.add(this.tutorialArea);\r\n            this.input.setDraggable(this.tutorialArea);\r\n        };\r\n        TutorialEditor.prototype.onTutorialAreaWheel = function (pointer, dx, dy) {\r\n            var deltaWidth = 0;\r\n            var deltaHeight = 0;\r\n            var sign = Phaser.Math.Sign(dy) * -1;\r\n            var deltaSize = game.GameGrid.CELL_SIZE / 2;\r\n            if (this.shiftKey.isDown) {\r\n                deltaWidth = deltaSize * sign;\r\n            }\r\n            else {\r\n                deltaHeight = deltaSize * sign;\r\n            }\r\n            this.tutorialArea.changeSize(deltaWidth, deltaHeight);\r\n        };\r\n        TutorialEditor.prototype.onTutorialAreaDragEnd = function (pointer, x, y) {\r\n            if (this.tutorialConfig.snapping) {\r\n                this.snapToGrid(this.tutorialArea);\r\n            }\r\n        };\r\n        TutorialEditor.prototype.snapToGrid = function (object) {\r\n            var cell = this.grid.getCellAtXY(object.x, object.y);\r\n            if (cell) {\r\n                object.x = cell.x;\r\n                object.y = cell.y;\r\n            }\r\n            else {\r\n                var getDistance = function (cell) { return Phaser.Math.Distance.Between(cell.x, cell.y, object.x, object.y); };\r\n                var nearestCell = _.sortBy(this.grid.cells, getDistance)[0];\r\n                object.x = nearestCell.x;\r\n                object.y = nearestCell.y;\r\n            }\r\n        };\r\n        TutorialEditor.prototype.addTutorialText = function () {\r\n            this.tutorialText = new game.EditorTutorialText(this);\r\n            this.tutorialText.updateText(this.tutorialConfig.text);\r\n            this.add.existing(this.tutorialText);\r\n        };\r\n        TutorialEditor.prototype.resize = function () {\r\n            this.resizeBackground();\r\n            this.alignLevelLabel();\r\n            this.resizeGrid();\r\n            this.resizeItemsContainer();\r\n            this.alignTutorialText();\r\n        };\r\n        TutorialEditor.prototype.resizeBackground = function () {\r\n            this.background.envelop(game.Config.GAME_WIDTH, game.Config.GAME_HEIGHT);\r\n            this.background.x = game.Config.HALF_GAME_WIDTH;\r\n            this.background.y = game.Config.GAME_HEIGHT;\r\n        };\r\n        TutorialEditor.prototype.alignLevelLabel = function () {\r\n            this.levelLabel.scale = 0.66;\r\n            this.levelLabel.x = game.Config.HALF_GAME_WIDTH;\r\n            this.levelLabel.y = this.levelLabel.getBounds().height / 2 + 20;\r\n        };\r\n        TutorialEditor.prototype.resizeGrid = function () {\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.85;\r\n            var maxHeight = game.Config.GAME_HEIGHT * 0.8;\r\n            var scaleX = maxWidth / this.grid.getWidth();\r\n            var scaleY = maxHeight / this.grid.getHeight();\r\n            var scale = Math.min(scaleX, scaleY);\r\n            this.grid.scale = scale;\r\n            this.grid.x = (game.Config.GAME_WIDTH - this.grid.getWidth() * scale) / 2;\r\n            this.grid.y = (game.Config.GAME_HEIGHT - this.grid.getHeight() * scale) / 2;\r\n        };\r\n        TutorialEditor.prototype.resizeItemsContainer = function () {\r\n            this.itemsContainer.scale = this.grid.scale;\r\n            this.itemsContainer.x = this.grid.x;\r\n            this.itemsContainer.y = this.grid.y;\r\n        };\r\n        TutorialEditor.prototype.alignTutorialText = function () {\r\n            if (!this.tutorialText) {\r\n                return;\r\n            }\r\n            var maxWidth = game.Config.GAME_WIDTH * 0.8;\r\n            this.tutorialText.scale = maxWidth / this.tutorialText.getWidth();\r\n            this.tutorialText.x = game.Config.HALF_GAME_WIDTH;\r\n            this.tutorialText.y = game.Config.GAME_HEIGHT - this.tutorialText.getDisplayHeight() / 2 - 20;\r\n        };\r\n        TutorialEditor.prototype.shutdown = function () {\r\n            this.destroyPanels();\r\n            console.groupEnd();\r\n        };\r\n        TutorialEditor.prototype.destroyPanels = function () {\r\n            this.panelsContainer.style.visibility = \"hidden\";\r\n            this.panelsContainer = null;\r\n            if (this.panel) {\r\n                this.panel.destroy();\r\n            }\r\n        };\r\n        return TutorialEditor;\r\n    }(Phaser.Scene));\r\n    game.TutorialEditor = TutorialEditor;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LevelConfigsManager = /** @class */ (function () {\r\n        function LevelConfigsManager(allConfigs) {\r\n            this.allConfigs = allConfigs;\r\n            // this.fixConfigs()\r\n        }\r\n        LevelConfigsManager.prototype.fixConfigs = function () {\r\n            // this.fixStars()\r\n            // this.fixBackgrounds()\r\n            this.saveLocally();\r\n            this.saveRemotely()\r\n                .then(function () {\r\n                console.log(\"Configs were fixed!\");\r\n            })\r\n                .catch(function () {\r\n                console.warn(\"Can't fix configs!\");\r\n            });\r\n        };\r\n        LevelConfigsManager.prototype.fixBackgrounds = function () {\r\n            this.getAll().forEach(function (levelConfig) {\r\n                if (levelConfig.levelNumber <= 13) {\r\n                    levelConfig.background = \"background_1\";\r\n                }\r\n                else if (levelConfig.levelNumber >= 14 && levelConfig.levelNumber <= 27) {\r\n                    levelConfig.background = \"background_2\";\r\n                }\r\n                else {\r\n                    levelConfig.background = \"background_3\";\r\n                }\r\n            });\r\n        };\r\n        LevelConfigsManager.prototype.fixStars = function () {\r\n            var _this = this;\r\n            Object.keys(this.allConfigs).forEach(function (configKey) {\r\n                var levelConfig = _this.allConfigs[configKey];\r\n                levelConfig.stars = game.Editor.createStarsConfig(levelConfig.levelNumber, levelConfig.items);\r\n            });\r\n        };\r\n        LevelConfigsManager.prototype.getAll = function () {\r\n            return Object.values(this.allConfigs);\r\n        };\r\n        LevelConfigsManager.prototype.get = function (levelNumber) {\r\n            return this.allConfigs[levelNumber];\r\n        };\r\n        LevelConfigsManager.prototype.remove = function (levelNumber) {\r\n            delete this.allConfigs[levelNumber.toString()];\r\n        };\r\n        LevelConfigsManager.prototype.check = function (levelNumber) {\r\n            return this.allConfigs.hasOwnProperty(levelNumber.toString());\r\n        };\r\n        LevelConfigsManager.prototype.add = function (config) {\r\n            this.allConfigs[config.levelNumber] = config;\r\n        };\r\n        LevelConfigsManager.prototype.create = function (levelNumber, add) {\r\n            if (add === void 0) { add = true; }\r\n            var config = this.createDefaultLevelConfig(levelNumber);\r\n            if (add) {\r\n                this.allConfigs[levelNumber] = config;\r\n            }\r\n            return config;\r\n        };\r\n        LevelConfigsManager.prototype.createDefaultLevelConfig = function (levelNumber) {\r\n            return {\r\n                levelNumber: levelNumber,\r\n                background: \"background_001\",\r\n                balls: 5,\r\n                autoThrow: this.createDefaultAutoThrowConfig(),\r\n                generator: this.createDefaultGeneratorConfig(),\r\n                stars: [100, 200, 300],\r\n                items: [],\r\n            };\r\n        };\r\n        LevelConfigsManager.prototype.createDefaultAutoThrowConfig = function () {\r\n            return {\r\n                enabled: false,\r\n                fastForward: true,\r\n                snapping: false,\r\n                delay: 300,\r\n                x: 0,\r\n                y: 0,\r\n            };\r\n        };\r\n        LevelConfigsManager.prototype.createDefaultGeneratorConfig = function () {\r\n            return {\r\n                seed: Date.now().toString(),\r\n                general: 50,\r\n                startRow: 5,\r\n                targetItemsNum: 10,\r\n                targetItemType: game.ItemType.BASIC_BLOCK,\r\n                minHealth: 2,\r\n                maxHealth: 30,\r\n                deltaHealth: 0,\r\n                incrementHealth: 1,\r\n                itemTypes: this.getDefaultItemTypes(),\r\n                weights: this.getDefaultWeights(),\r\n                sides: 0,\r\n            };\r\n        };\r\n        LevelConfigsManager.prototype.getDefaultItemTypes = function () {\r\n            var defaultEnabled = [game.ItemType.COLLECTABLE_BALL, game.ItemType.BASIC_BLOCK];\r\n            var keys = this.getGeneratorItemTypes();\r\n            var values = keys.map(function (key) { return defaultEnabled.includes(key); });\r\n            return _.zipObject(keys, values);\r\n        };\r\n        LevelConfigsManager.prototype.getDefaultWeights = function () {\r\n            var keys = this.getGeneratorItemTypes();\r\n            var values = keys.map(function (key) {\r\n                return 100;\r\n            });\r\n            return _.zipObject(keys, values);\r\n        };\r\n        LevelConfigsManager.prototype.getGeneratorItemTypes = function () {\r\n            var allTypes = game.ItemTypeUtil.getAllTypes();\r\n            var typesToRemove = [game.ItemType.SHATTER_BLOCK_PIECE];\r\n            return _.without.apply(_, __spreadArrays([allTypes], typesToRemove));\r\n        };\r\n        LevelConfigsManager.prototype.saveLocally = function () {\r\n            var isBrowserSyncAvailable = typeof window[\"___browserSync___\"] !== \"undefined\";\r\n            if (isBrowserSyncAvailable === false) {\r\n                return Promise.resolve(false);\r\n            }\r\n            var url = location.protocol + \"//\" + location.host + \"/files\";\r\n            var path = \"dev/assets/configs/\";\r\n            return this.doSave(url, path);\r\n        };\r\n        LevelConfigsManager.prototype.saveRemotely = function () {\r\n            var url = game.Config.SERVER_URL + \"upload.php\";\r\n            return this.doSave(url, \"\");\r\n        };\r\n        /*public save(): Promise<any>[] {\r\n            return [\r\n                this.saveLocally(),\r\n                this.saveRemotely(),\r\n            ]\r\n        }*/\r\n        LevelConfigsManager.prototype.doSave = function (url, filepath) {\r\n            var _this = this;\r\n            return new Promise(function (resolve, reject) {\r\n                var _a;\r\n                var filename = (_a = utils.NetUtil.getParam(\"levelsFile\")) !== null && _a !== void 0 ? _a : \"levels\";\r\n                var data = {\r\n                    filename: filepath + filename + \".json\",\r\n                    content: JSON.stringify(_this.allConfigs),\r\n                };\r\n                var xhr = new XMLHttpRequest();\r\n                xhr.open(\"POST\", url, true);\r\n                xhr.onload = function () {\r\n                    resolve(xhr);\r\n                };\r\n                xhr.onerror = function () {\r\n                    reject(xhr);\r\n                };\r\n                xhr.send(_this.convertObjectToURLSearchParams(data));\r\n            });\r\n        };\r\n        LevelConfigsManager.prototype.convertObjectToURLSearchParams = function (obj) {\r\n            return new URLSearchParams(obj);\r\n        };\r\n        LevelConfigsManager.prototype.getLevelNumbers = function () {\r\n            var levelNumbers = Object.keys(this.allConfigs);\r\n            return levelNumbers.map(function (num) {\r\n                return parseInt(num);\r\n            });\r\n        };\r\n        return LevelConfigsManager;\r\n    }());\r\n    game.LevelConfigsManager = LevelConfigsManager;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var IngamePreloader = /** @class */ (function (_super) {\r\n        __extends(IngamePreloader, _super);\r\n        function IngamePreloader(scene) {\r\n            var _this = _super.call(this, scene) || this;\r\n            _this.isSimulating = false;\r\n            _this.updateTimer = 0;\r\n            _this.updateInterval = 0;\r\n            _this.progress = 0;\r\n            _this.scene.scale.on(Phaser.Scale.Events.RESIZE, _this.resize, _this);\r\n            _this.scene.events.on(Phaser.Scenes.Events.UPDATE, _this.customUpdate, _this);\r\n            _this.name = \"preloader\";\r\n            _this.addBackground();\r\n            _this.addLogo();\r\n            return _this;\r\n        }\r\n        IngamePreloader.prototype.reset = function () {\r\n            this.visible = true;\r\n            this.active = true;\r\n            this.alpha = 1;\r\n            this.updateTimer = 0;\r\n            this.progress = 0;\r\n            this.isSimulating = false;\r\n            this.logo.setProgressInstant(0);\r\n        };\r\n        IngamePreloader.prototype.addBackground = function () {\r\n            this.background = this.scene.add.image(0, 0, \"preloader\", \"bg\");\r\n            this.add(this.background);\r\n        };\r\n        IngamePreloader.prototype.addLogo = function () {\r\n            this.logo = new game.LoadingLogo(this.scene);\r\n            this.add(this.logo);\r\n        };\r\n        IngamePreloader.prototype.resize = function (gameSize) {\r\n            var _a, _b;\r\n            var width = (_a = gameSize === null || gameSize === void 0 ? void 0 : gameSize.width) !== null && _a !== void 0 ? _a : game.Config.GAME_WIDTH;\r\n            var height = (_b = gameSize === null || gameSize === void 0 ? void 0 : gameSize.height) !== null && _b !== void 0 ? _b : game.Config.GAME_HEIGHT;\r\n            this.resizeBackground(width, height);\r\n            this.alignLogo(width, height);\r\n        };\r\n        IngamePreloader.prototype.resizeBackground = function (width, height) {\r\n            this.background.envelop(width, height);\r\n            this.background.x = width / 2;\r\n            this.background.y = height / 2;\r\n        };\r\n        IngamePreloader.prototype.alignLogo = function (width, height) {\r\n            var maxWidth = width * 0.45;\r\n            this.logo.scale = Math.min(1, maxWidth / this.logo.getWidth());\r\n            this.logo.x = width / 2;\r\n            this.logo.y = height / 2;\r\n        };\r\n        IngamePreloader.prototype.simulateLoading = function () {\r\n            this.isSimulating = true;\r\n        };\r\n        IngamePreloader.prototype.customUpdate = function (time, delta) {\r\n            if (this.isSimulating === false) {\r\n                return;\r\n            }\r\n            if (this.progress >= 99) {\r\n                return;\r\n            }\r\n            this.updateTimer += delta;\r\n            if (this.updateTimer > this.updateInterval) {\r\n                this.updateTimer -= this.updateInterval;\r\n                this.updateInterval = Phaser.Math.RND.between(300, 800);\r\n                this.progress += Phaser.Math.RND.between(1, 3);\r\n                if (this.progress >= 99) {\r\n                    this.progress = 99;\r\n                }\r\n                this.logo.setProgress(this.progress / 100);\r\n            }\r\n        };\r\n        IngamePreloader.prototype.setComplete = function () {\r\n            this.isSimulating = false;\r\n            this.progress = 100;\r\n            this.logo.setProgress(1);\r\n        };\r\n        IngamePreloader.prototype.hide = function () {\r\n            this.scene.tweens.add({\r\n                targets: this,\r\n                delay: 150,\r\n                duration: 200,\r\n                ease: Phaser.Math.Easing.Cubic.Out,\r\n                alpha: 0,\r\n                onComplete: this.onHideComplete.bind(this),\r\n            });\r\n        };\r\n        IngamePreloader.prototype.onHideComplete = function () {\r\n            this.kill();\r\n        };\r\n        IngamePreloader.prototype.destroy = function (fromScene) {\r\n            if (this.scene) {\r\n                this.scene.scale.off(Phaser.Scale.Events.RESIZE, this.resize, this);\r\n                this.scene.events.off(Phaser.Scenes.Events.UPDATE, this.customUpdate, this);\r\n            }\r\n            _super.prototype.destroy.call(this, fromScene);\r\n        };\r\n        return IngamePreloader;\r\n    }(Phaser.GameObjects.Container));\r\n    game.IngamePreloader = IngamePreloader;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var BoosterType;\r\n    (function (BoosterType) {\r\n        BoosterType[\"BOMB\"] = \"bomb\";\r\n        BoosterType[\"CRACKER\"] = \"cracker\";\r\n        BoosterType[\"STOP\"] = \"stop\";\r\n    })(BoosterType = game.BoosterType || (game.BoosterType = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EventEmitter = Phaser.Events.EventEmitter;\r\n    var BoosterEvent;\r\n    (function (BoosterEvent) {\r\n        BoosterEvent[\"NUM_CHANGED\"] = \"IngameBooster_NUM_CHANGED\";\r\n    })(BoosterEvent = game.BoosterEvent || (game.BoosterEvent = {}));\r\n    var Booster = /** @class */ (function (_super) {\r\n        __extends(Booster, _super);\r\n        function Booster(type, num) {\r\n            var _this = _super.call(this) || this;\r\n            _this._type = type;\r\n            _this._num = num;\r\n            return _this;\r\n        }\r\n        Object.defineProperty(Booster.prototype, \"num\", {\r\n            get: function () {\r\n                return this._num;\r\n            },\r\n            set: function (value) {\r\n                this._num = Math.max(0, value);\r\n                this.emit(BoosterEvent.NUM_CHANGED, this);\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(Booster.prototype, \"type\", {\r\n            get: function () {\r\n                return this._type;\r\n            },\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n        return Booster;\r\n    }(EventEmitter));\r\n    game.Booster = Booster;\r\n})(game || (game = {}));\r\n///<reference path='BoosterType.ts' />\r\n///<reference path='Booster.ts' />\r\nvar game;\r\n(function (game_4) {\r\n    var BoostersManager = /** @class */ (function () {\r\n        function BoostersManager(game) {\r\n            this.game = game;\r\n            this.store = this.game.store;\r\n            this.store.on(game_4.GameStoreEvent.CLEAR, this.onSaveDataCleared, this);\r\n            this.texts = this.game.texts;\r\n            this.texts.on(game_4.GameTextsEvent.LANGUAGE_CHANGE, this.onLanguageChange, this);\r\n            this.initBoosters();\r\n        }\r\n        BoostersManager.prototype.onSaveDataCleared = function () {\r\n            this.boosters.forEach(function (booster) {\r\n                booster.num = 0;\r\n            });\r\n        };\r\n        BoostersManager.prototype.onLanguageChange = function () {\r\n            var allTexts = this.game.texts.texts.ingame_boosters;\r\n            this.boosters.forEach(function (booster) {\r\n                var texts = allTexts[booster.type];\r\n                booster.title = texts.title;\r\n                booster.hint = texts.hint;\r\n            });\r\n        };\r\n        BoostersManager.prototype.initBoosters = function () {\r\n            var _this = this;\r\n            var allTexts = this.game.texts.texts.ingame_boosters;\r\n            var saveData = this.store.getValue(game_4.GameStoreKey.INGAME_BOOSTERS);\r\n            var types = [game_4.BoosterType.BOMB, game_4.BoosterType.CRACKER, game_4.BoosterType.STOP];\r\n            this.boosters = types.map(function (type) {\r\n                var _a;\r\n                var num = (_a = saveData[type]) !== null && _a !== void 0 ? _a : 0;\r\n                var texts = allTexts[type];\r\n                var booster = new game_4.Booster(type, num);\r\n                booster.title = texts.title;\r\n                booster.hint = texts.hint;\r\n                booster.on(game_4.BoosterEvent.NUM_CHANGED, _this.onBoosterNumChanged, _this);\r\n                return booster;\r\n            });\r\n        };\r\n        BoostersManager.prototype.onBoosterNumChanged = function (booster) {\r\n            var _a;\r\n            var currentData = this.store.getValue(game_4.GameStoreKey.INGAME_BOOSTERS);\r\n            var newData = __assign(__assign({}, currentData), (_a = {}, _a[booster.type] = booster.num, _a));\r\n            this.store.saveValue(game_4.GameStoreKey.INGAME_BOOSTERS, newData);\r\n        };\r\n        BoostersManager.prototype.getByType = function (type) {\r\n            return this.boosters.find(function (booster) { return booster.type === type; });\r\n        };\r\n        BoostersManager.prototype.getRandom = function () {\r\n            return Phaser.Math.RND.pick(this.boosters);\r\n        };\r\n        BoostersManager.prototype.updateFromGift = function (gift) {\r\n            var _this = this;\r\n            Object.entries(gift).forEach(function (entry) {\r\n                var type = entry[0];\r\n                var num = entry[1];\r\n                _this.getByType(type).num += num;\r\n            });\r\n        };\r\n        return BoostersManager;\r\n    }());\r\n    game_4.BoostersManager = BoostersManager;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game_5) {\r\n    var GA = gameanalytics.GameAnalytics;\r\n    var EGAProgressionStatus = gameanalytics.EGAProgressionStatus;\r\n    var EGAErrorSeverity = gameanalytics.EGAErrorSeverity;\r\n    var RemoteConfigKey;\r\n    (function (RemoteConfigKey) {\r\n        RemoteConfigKey[\"BOOSTERS_NUM\"] = \"boosters_num\";\r\n    })(RemoteConfigKey = game_5.RemoteConfigKey || (game_5.RemoteConfigKey = {}));\r\n    var GameAnalyticsWrapper = /** @class */ (function () {\r\n        function GameAnalyticsWrapper(game) {\r\n            this.isEnabled = false;\r\n            var disableAnalytics = this.disableAnalytics();\r\n            if (disableAnalytics) {\r\n                this.isEnabled = false;\r\n                return;\r\n            }\r\n            this.game = game;\r\n            this.isEnabled = true;\r\n            this.loadingTimes = {};\r\n            this.setLog();\r\n            this.setCustomDimensions();\r\n            this.endSessionOnUnload();\r\n            GA.configureBuild(window.game.config.build_version.toString());\r\n            GA.initialize(\"3646a9cdd69f7984bf5ae9413a451f80\", \"311c306197a6aa747e3ac552ba7fdeb1adb7c100\");\r\n            GA.addDesignEvent(\"Startup\");\r\n            this.sendAvifEvent();\r\n            this.sendWebpEvent();\r\n        }\r\n        GameAnalyticsWrapper.prototype.disableAnalytics = function () {\r\n            var forceAnalytics = utils.NetUtil.getParamBool(\"analytics\");\r\n            if (forceAnalytics) {\r\n                return false;\r\n            }\r\n            return game_5.Main.development || typeof GA === \"undefined\" || this.isRobowhale();\r\n        };\r\n        GameAnalyticsWrapper.prototype.isRobowhale = function () {\r\n            var _a;\r\n            return (_a = location.hostname) === null || _a === void 0 ? void 0 : _a.includes(\"robowhale\");\r\n        };\r\n        GameAnalyticsWrapper.prototype.setLog = function () {\r\n            var logLevel = utils.NetUtil.getParamInt(\"analyticsLog\");\r\n            if (logLevel === 1) {\r\n                GA.setEnabledInfoLog(true);\r\n            }\r\n            else if (logLevel === 2) {\r\n                GA.setEnabledVerboseLog(true);\r\n            }\r\n        };\r\n        GameAnalyticsWrapper.prototype.setCustomDimensions = function () {\r\n            GA.configureAvailableCustomDimensions01([\"poki\", \"yandex\", \"game-distribution\", \"worker-bee\", \"orange-fr\"]);\r\n            GA.setCustomDimension01(\"poki\");\r\n            GA.configureAvailableCustomDimensions02([game_5.RendererType.CANVAS, game_5.RendererType.WEBGL, game_5.RendererType.HEADLESS]);\r\n            GA.setCustomDimension02(this.game.rendererType);\r\n            var browsers = [\"chrome\", \"edge\", \"firefox\", \"ie\", \"mobileSafari\", \"opera\", \"safari\", \"silk\", \"trident\", \"other\"];\r\n            var currentBrowser = this.getCurrentBrowser(browsers);\r\n            GA.configureAvailableCustomDimensions03(browsers);\r\n            GA.setCustomDimension03(currentBrowser);\r\n        };\r\n        GameAnalyticsWrapper.prototype.getCurrentBrowser = function (browsers) {\r\n            var _this = this;\r\n            var currentBrowser = browsers.find(function (browser) { return _this.game.device.browser[browser] === true; });\r\n            return currentBrowser !== null && currentBrowser !== void 0 ? currentBrowser : \"other\";\r\n        };\r\n        GameAnalyticsWrapper.prototype.endSessionOnUnload = function () {\r\n            window.addEventListener(\"unload\", function () {\r\n                GA.endSession();\r\n            }, { once: true });\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendLevelStart = function (level) {\r\n            this.sendProgressionEvent(EGAProgressionStatus.Start, level);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendLevelComplete = function (level, starsNum) {\r\n            this.sendProgressionEvent(EGAProgressionStatus.Complete, level, starsNum);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendLevelFail = function (level, blocksLeft) {\r\n            this.sendProgressionEvent(EGAProgressionStatus.Fail, level, blocksLeft);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendProgressionEvent = function (type, level, score) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            var levelKey = \"level_\" + _.padStart(level.toString(), 3, \"0\");\r\n            GA.addProgressionEvent(type, levelKey, \"\", \"\", score);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendBoosterUseEvent = function (level, type) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            var levelKey = \"Level_\" + _.padStart(level.toString(), 3, \"0\");\r\n            GA.addDesignEvent(levelKey + \":Booster:\" + type);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendAdEvent = function (action, type, placement, adProvider) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            GA.addAdEvent(action, type, adProvider, placement);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendRewardedAd = function (placement, type, action) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            GA.addDesignEvent(\"Rewarded_Ad:\" + placement + \":\" + type + \":\" + action);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendLoadingEvent = function (place, type) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            if (type === \"start\") {\r\n                this.loadingTimes[place] = Date.now();\r\n                GA.addDesignEvent(\"Loading:\" + place + \":\" + type);\r\n            }\r\n            if (type === \"complete\") {\r\n                var durationMs = Date.now() - this.loadingTimes[place];\r\n                var duration = Phaser.Math.RoundTo(durationMs / 1000, -1);\r\n                GA.addDesignEvent(\"Loading:\" + place + \":\" + type, duration);\r\n            }\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendDesignEvent = function (event, value) {\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            GA.addDesignEvent(event, value);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendError = function (message, severity) {\r\n            if (severity === void 0) { severity = EGAErrorSeverity.Error; }\r\n            if (this.isEnabled === false) {\r\n                return;\r\n            }\r\n            GA.addErrorEvent(severity, message);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendAvifEvent = function () {\r\n            var event = this.game.avif\r\n                ? \"avif:supported\"\r\n                : \"avif:not_supported\";\r\n            this.sendDesignEvent(event, this.game.avif ? 1 : 0);\r\n        };\r\n        GameAnalyticsWrapper.prototype.sendWebpEvent = function () {\r\n            var event = this.game.webp\r\n                ? \"webp:supported\"\r\n                : \"webp:not_supported\";\r\n            this.sendDesignEvent(event, this.game.webp ? 1 : 0);\r\n        };\r\n        GameAnalyticsWrapper.prototype.getRemoteConfigValue = function (key, defaultValue) {\r\n            if (this.isEnabled === false) {\r\n                return defaultValue;\r\n            }\r\n            return GA.getRemoteConfigsValueAsString(key, defaultValue);\r\n        };\r\n        return GameAnalyticsWrapper;\r\n    }());\r\n    game_5.GameAnalyticsWrapper = GameAnalyticsWrapper;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var EGAAdAction = gameanalytics.EGAAdAction;\r\n    var EGAAdType = gameanalytics.EGAAdType;\r\n    var PokiDummySdk = /** @class */ (function () {\r\n        function PokiDummySdk() {\r\n        }\r\n        PokiDummySdk.prototype.init = function () {\r\n            return Promise.resolve();\r\n        };\r\n        PokiDummySdk.prototype.setDebug = function (value) {\r\n        };\r\n        PokiDummySdk.prototype.gameLoadingStart = function () {\r\n        };\r\n        PokiDummySdk.prototype.gameLoadingProgress = function (progress) {\r\n        };\r\n        PokiDummySdk.prototype.gameLoadingFinished = function () {\r\n        };\r\n        PokiDummySdk.prototype.gameplayStart = function () {\r\n        };\r\n        PokiDummySdk.prototype.gameplayStop = function () {\r\n        };\r\n        PokiDummySdk.prototype.commercialBreak = function () {\r\n            return Promise.resolve(undefined);\r\n        };\r\n        PokiDummySdk.prototype.rewardedBreak = function () {\r\n            return Promise.resolve(undefined);\r\n        };\r\n        PokiDummySdk.prototype.happyTime = function (scale) {\r\n        };\r\n        return PokiDummySdk;\r\n    }());\r\n    game.PokiDummySdk = PokiDummySdk;\r\n    var PokiSdkWrapper = /** @class */ (function () {\r\n        function PokiSdkWrapper(_game) {\r\n            this.isEnabled = false;\r\n            this.wasMuted = false;\r\n            this.isAdBlockEnabled = false;\r\n            this.game = _game;\r\n            this.isEnabled = typeof PokiSDK !== \"undefined\";\r\n            this.sdk = this.isEnabled ? PokiSDK : new PokiDummySdk();\r\n            this.sdk.setDebug(utils.NetUtil.getParamBool(\"pokiDev\"));\r\n        }\r\n        PokiSdkWrapper.prototype.init = function () {\r\n            var _this = this;\r\n            return this.sdk.init()\r\n                .then(function () {\r\n                _this.game.analytics.sendDesignEvent(\"AdBlock:disabled\");\r\n            })\r\n                .catch(function () {\r\n                _this.game.analytics.sendDesignEvent(\"AdBlock:enabled\", true);\r\n                _this.isAdBlockEnabled = true;\r\n            })\r\n                .finally(function () {\r\n                var _a;\r\n                (_a = _this.game.raven) === null || _a === void 0 ? void 0 : _a.addExtraContext({\r\n                    adblock: _this.isAdBlockEnabled,\r\n                });\r\n            });\r\n        };\r\n        PokiSdkWrapper.prototype.injectIntoScenes = function () {\r\n            var _this = this;\r\n            this.game.scene.scenes.forEach(function (scene) { return (scene.poki = _this); });\r\n        };\r\n        PokiSdkWrapper.prototype.commercialBreak = function (placement) {\r\n            var _this = this;\r\n            var _a;\r\n            if (this.isAdBlockEnabled) {\r\n                return Promise.reject(\"AdBlock\");\r\n            }\r\n            (_a = this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.Clicked, EGAAdType.Interstitial, placement, \"poki\");\r\n            return this.onBreakStart()\r\n                .finally(function () {\r\n                _this.sdk.commercialBreak()\r\n                    .then(function () {\r\n                    var _a;\r\n                    (_a = _this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.Show, EGAAdType.Interstitial, placement, \"poki\");\r\n                })\r\n                    .catch(function () {\r\n                    var _a;\r\n                    (_a = _this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.FailedShow, EGAAdType.Interstitial, placement, \"poki\");\r\n                })\r\n                    .finally(function () {\r\n                    _this.onBreakComplete();\r\n                });\r\n            });\r\n        };\r\n        PokiSdkWrapper.prototype.rewardedBreak = function (placement, callbacks) {\r\n            var _this = this;\r\n            var _a;\r\n            if (this.isAdBlockEnabled) {\r\n                this.game.toasts.showNoRewardedAdsWarning();\r\n                return Promise.reject(\"AdBlock\");\r\n            }\r\n            (_a = this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.Clicked, EGAAdType.RewardedVideo, placement, \"poki\");\r\n            return this.onBreakStart()\r\n                .finally(function () {\r\n                _this.sdk.rewardedBreak()\r\n                    .then(function (success) {\r\n                    var _a;\r\n                    (_a = _this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.Show, EGAAdType.RewardedVideo, placement, \"poki\");\r\n                    if (success) {\r\n                        callbacks.onSuccess();\r\n                    }\r\n                    else {\r\n                        callbacks.onCancel && callbacks.onCancel();\r\n                        _this.game.toasts.showRewardedAdsDontSkipWarning();\r\n                    }\r\n                })\r\n                    .catch(function () {\r\n                    var _a;\r\n                    callbacks.onFail && callbacks.onFail();\r\n                    _this.game.toasts.showNoRewardedAdsWarning();\r\n                    (_a = _this.game.analytics) === null || _a === void 0 ? void 0 : _a.sendAdEvent(EGAAdAction.FailedShow, EGAAdType.RewardedVideo, placement, \"poki\");\r\n                })\r\n                    .finally(function () {\r\n                    _this.onBreakComplete();\r\n                });\r\n            });\r\n        };\r\n        PokiSdkWrapper.prototype.onBreakStart = function () {\r\n            this.wasMuted = this.game.sound.mute;\r\n            this.game.sound.mute = true;\r\n            this.game.canvas.style.pointerEvents = \"none\";\r\n            this.game.input.keyboard.enabled = false;\r\n            return this.game.audio.suspendAudioContext();\r\n        };\r\n        PokiSdkWrapper.prototype.onBreakComplete = function () {\r\n            this.game.sound.mute = this.wasMuted;\r\n            this.game.canvas.style.pointerEvents = \"auto\";\r\n            this.game.input.keyboard.enabled = true;\r\n            this.game.audio.resumeAudioContext();\r\n        };\r\n        return PokiSdkWrapper;\r\n    }());\r\n    game.PokiSdkWrapper = PokiSdkWrapper;\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var RegistryKey;\r\n    (function (RegistryKey) {\r\n        RegistryKey[\"GAMEPLAY_LOADED\"] = \"GAMEPLAY_LOADED\";\r\n    })(RegistryKey = game.RegistryKey || (game.RegistryKey = {}));\r\n})(game || (game = {}));\r\nvar game;\r\n(function (game) {\r\n    var LoadingOverlay = /** @class */ (function () {\r\n        function LoadingOverlay() {\r\n            this.element = document.getElementById(\"loading-spinner-container\");\r\n        }\r\n        LoadingOverlay.prototype.fadeIn = function () {\r\n            this.element.style.display = \"flex\";\r\n            this.element.style.opacity = \"1\";\r\n            this.element.classList.remove(\"spinner-fadeout\");\r\n            this.element.classList.add(\"spinner-fadein\");\r\n        };\r\n        LoadingOverlay.prototype.fadeOut = function () {\r\n            var _this = this;\r\n            this.element.classList.remove(\"spinner-fadein\");\r\n            this.element.classList.add(\"spinner-fadeout\");\r\n            setTimeout(function () {\r\n                _this.element.style.display = \"none\";\r\n            }, 150);\r\n        };\r\n        LoadingOverlay.prototype.isVisible = function () {\r\n            return this.element.style.display === \"flex\";\r\n        };\r\n        return LoadingOverlay;\r\n    }());\r\n    game.LoadingOverlay = LoadingOverlay;\r\n})(game || (game = {}));\r\n///<reference path='Config.ts' />\r\n///<reference path='GameConfigCreator.ts' />\r\n///<reference path='RavenWrapper.ts' />\r\n///<reference path='GameFonts.ts' />\r\n///<reference path='GameTexts.ts' />\r\n///<reference path='GameStore.ts' />\r\n///<reference path='audio/GameAudio.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/toast/ToastsManager.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/container/Screen.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/buttons/Button.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/buttons/ToggleButton.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/buttons/SoundButton.ts' />\r\n///<reference path='robowhale/phaser3/gameObjects/buttons/ComplexButton.ts' />\r\n///<reference path='robowhale/phaser3/camera/KineticScroll.ts' />\r\n///<reference path='robowhale/phaser3/particles/ParticleUtil.ts' />\r\n///<reference path='robowhale/phaser3/AnimationsPool.ts' />\r\n///<reference path='robowhale/utils/NetUtil.ts' />\r\n///<reference path='robowhale/Polyfills.ts' />\r\n///<reference path='robowhale/phaser3/Phaser3Extensions.ts' />\r\n///<reference path='robowhale/phaser3/MatterExtensions.ts' />\r\n///<reference path='robowhale/utils/DeviceUtil.ts' />\r\n///<reference path='robowhale/phaser3/Easing.ts' />\r\n///<reference path='robowhale/phaser3/scenes/BaseScene.ts' />\r\n///<reference path='scenes/SceneKey.ts' />\r\n///<reference path='scenes/Boot.ts' />\r\n///<reference path='scenes/preloader/Preloader.ts' />\r\n///<reference path='scenes/levelsEditor/EditorRoot.ts' />\r\n///<reference path='scenes/levelsMapEditor/LevelsMapEditor.ts' />\r\n///<reference path='scenes/levelsMapDev/LevelsMapDev.ts' />\r\n///<reference path='scenes/levelsMap/LevelsMap.ts' />\r\n///<reference path='scenes/gameplay/GameplayRoot.ts' />\r\n///<reference path='scenes/tutorialEditor/TutorialEditor.ts' />\r\n///<reference path='LevelConfigsManager.ts' />\r\n///<reference path='scenes/global/IngamePreloader.ts' />\r\n///<reference path='boosters/BoostersManager.ts' />\r\n///<reference path='GameAnalyticsWrapper.ts' />\r\n///<reference path='PokiSdkWrapper.ts' />\r\n///<reference path='RegistryKey.ts' />\r\n///<reference path='LoadingOverlay.ts' />\r\nvar game;\r\n(function (game) {\r\n    var RendererType;\r\n    (function (RendererType) {\r\n        RendererType[\"WEBGL\"] = \"webgl\";\r\n        RendererType[\"CANVAS\"] = \"canvas\";\r\n        RendererType[\"HEADLESS\"] = \"headless\";\r\n    })(RendererType = game.RendererType || (game.RendererType = {}));\r\n    var Main = /** @class */ (function (_super) {\r\n        __extends(Main, _super);\r\n        function Main() {\r\n            var _this = this;\r\n            Main.detectDevMode();\r\n            Main.detectEditorMode();\r\n            utils.Polyfills.polyfill();\r\n            utils.Phaser3Extensions.extend();\r\n            utils.MatterExtensions.extend();\r\n            // noinspection JSAnnotator\r\n            _this = _super.call(this, game.GameConfigCreator.create()) || this;\r\n            _this.webp = false;\r\n            _this.avif = false;\r\n            _this.fonts = new game.GameFonts(_this);\r\n            _this.store = new game.GameStore(_this, \"BouncyWoods\");\r\n            _this.loadingOverlay = new game.LoadingOverlay();\r\n            _this.decoratePage();\r\n            _this.addScenes();\r\n            return _this;\r\n        }\r\n        Main.detectDevMode = function () {\r\n            Main.development = utils.NetUtil.getParamBool(\"dev\");\r\n            if (Main.development) {\r\n                console.info(\"Developer mode is ON\");\r\n            }\r\n        };\r\n        Main.detectEditorMode = function () {\r\n            var allowedHosts = [\"localhost\", \"192.168\", \"robowhale\"];\r\n            var isHostAllowed = allowedHosts.some(function (host) { return location.hostname.includes(host); });\r\n            if (isHostAllowed && utils.NetUtil.getParamBool(\"editor\")) {\r\n                Main.editorEnabled = true;\r\n                document.title = document.title + \" + Editor\";\r\n                console.info(\"Editor is enabled\");\r\n            }\r\n        };\r\n        Main.prototype.decoratePage = function () {\r\n            var isDesktopScaling = this.config.scaleMode === Phaser.Scale.FIT;\r\n            if (isDesktopScaling === false) {\r\n                return;\r\n            }\r\n            this.surroundCanvasWithSidebars(this.canvas);\r\n            this.canvas.style.boxShadow = \"0px 0px 5px 5px rgba(0, 0, 0, 0.1)\";\r\n            this.scale.updateBounds();\r\n        };\r\n        Main.prototype.getDefaultImageFormat = function (defaultFormat) {\r\n            if (this.avif) {\r\n                return \"avif\";\r\n            }\r\n            else if (this.webp) {\r\n                return \"webp\";\r\n            }\r\n            else {\r\n                return defaultFormat;\r\n            }\r\n        };\r\n        Main.prototype.surroundCanvasWithSidebars = function (canvas) {\r\n            var leftSidebar = document.createElement(\"div\");\r\n            leftSidebar.className = \"sidebar\";\r\n            leftSidebar.id = \"left-sidebar\";\r\n            canvas.parentNode.insertBefore(leftSidebar, canvas);\r\n            var rightSidebar = document.createElement(\"div\");\r\n            rightSidebar.className = \"sidebar\";\r\n            rightSidebar.id = \"right-sidebar\";\r\n            canvas.parentNode.insertBefore(rightSidebar, canvas.nextSibling);\r\n        };\r\n        Main.prototype.addScenes = function () {\r\n            this.scene.add(game.SceneKey.GLOBAL, game.GlobalScene);\r\n            this.scene.add(game.SceneKey.BOOT, game.Boot, true);\r\n            this.scene.add(game.SceneKey.PRELOADER, game.Preloader);\r\n            this.scene.add(game.SceneKey.LEVELS_MAP, game.LevelsMap);\r\n            this.scene.add(game.SceneKey.LEVELS_MAP_DEV, game.LevelsMapDev);\r\n            this.scene.add(game.SceneKey.GAMEPLAY_ROOT, game.GameplayRoot);\r\n            this.scene.add(game.SceneKey.GAMEPLAY, game.Gameplay);\r\n            this.scene.add(game.SceneKey.GAMEPLAY_GUI, game.GameplayGui);\r\n            if (Main.editorEnabled) {\r\n                this.scene.add(game.SceneKey.LEVELS_MAP_EDITOR, game.LevelsMapEditor);\r\n                this.scene.add(game.SceneKey.LEVEL_EDITOR_ROOT, game.EditorRoot);\r\n                this.scene.add(game.SceneKey.LEVEL_EDITOR, game.Editor);\r\n                this.scene.add(game.SceneKey.LEVEL_EDITOR_GUI, game.EditorGui);\r\n                this.scene.add(game.SceneKey.TUTORIAL_EDITOR, game.TutorialEditor);\r\n            }\r\n        };\r\n        Main.prototype.changeScene = function (currentSceneKey, newSceneKey, newSceneData) {\r\n            this.globalScene.sceneTransition.changeScene(currentSceneKey, newSceneKey, newSceneData);\r\n        };\r\n        Main.prototype.restartScene = function (currentScene, data) {\r\n            this.globalScene.sceneTransition.changeScene(currentScene, currentScene, data);\r\n        };\r\n        Main.prototype.injectIntoScenes = function (obj, key) {\r\n            this.scene.scenes.forEach(function (scene) {\r\n                var isKeyTaken = scene.hasOwnProperty(key);\r\n                if (isKeyTaken) {\r\n                    console.warn(\"Key \" + key + \" is taken in \" + scene.scene.key + \" scene!\");\r\n                    return;\r\n                }\r\n                scene[key] = obj;\r\n            });\r\n        };\r\n        Main.editorEnabled = false;\r\n        Main.development = false;\r\n        Main.areRewardAdsEnabled = true;\r\n        return Main;\r\n    }(Phaser.Game));\r\n    game.Main = Main;\r\n})(game || (game = {}));\r\nvar GameEnvironment;\r\n(function (GameEnvironment) {\r\n    GameEnvironment[\"DEVELOP\"] = \"develop\";\r\n    GameEnvironment[\"DEPLOY_WEB\"] = \"deploy-web\";\r\n    GameEnvironment[\"DEPLOY_POKI\"] = \"deploy-poki\";\r\n})(GameEnvironment || (GameEnvironment = {}));\r\n// @ts-nocheck\r\nvar game;\r\n(function (game) {\r\n    function sitelock() {\r\n        if (window.environment !== GameEnvironment.DEPLOY_POKI) {\r\n            return;\r\n        }\r\n        var isIgnoreSitelock = utils.NetUtil.getParamBool(\"sitelock\", \"0\");\r\n        if (isIgnoreSitelock) {\r\n            return;\r\n        }\r\n        var _0x1918 = [\"top\", \"indexOf\", \"I3ViZzIzNQ==\", \"hostname\", \"length\", \"location\", \"LnBva2ktZ2RuLmNvbQ==\", \"href\"];\r\n        (function (_0x4a02b5, _0x5c0c3d) {\r\n            var _0x56a85d = function (_0x375c0e) {\r\n                while (--_0x375c0e) {\r\n                    _0x4a02b5.push(_0x4a02b5.shift());\r\n                }\r\n            };\r\n            _0x56a85d(++_0x5c0c3d);\r\n        }(_0x1918, 0x1ae));\r\n        var _0xcdc9 = function (_0x4a02b5, _0x5c0c3d) {\r\n            _0x4a02b5 -= 0x0;\r\n            var _0x56a85d = _0x1918[_0x4a02b5];\r\n            return _0x56a85d;\r\n        };\r\n        (function checkInit() {\r\n            var _0x151adb = [\"bG9jYWxob3N0\", \"LnBva2kuY29t\", _0xcdc9(\"0x0\")];\r\n            var _0x219654 = ![];\r\n            var _0x558823 = window[_0xcdc9(\"0x7\")][_0xcdc9(\"0x5\")];\r\n            for (var _0x220888 = 0x0; _0x220888 < _0x151adb[_0xcdc9('0x6')]; _0x220888++) {\r\n                var _0x4a2f49 = atob(_0x151adb[_0x220888]);\r\n                if (_0x558823[_0xcdc9(\"0x3\")](_0x4a2f49, _0x558823.length - _0x4a2f49.length) !== -0x1) {\r\n                    _0x219654 = !![];\r\n                    break;\r\n                }\r\n            }\r\n            if (!_0x219654) {\r\n                var _0xcff8e8 = _0xcdc9(\"0x4\");\r\n                var _0x3296f7 = atob(_0xcff8e8);\r\n                window.location[_0xcdc9(\"0x1\")] = _0x3296f7;\r\n                window[_0xcdc9(\"0x2\")][_0xcdc9(\"0x7\")] !== window[_0xcdc9(\"0x7\")] && (window[_0xcdc9(\"0x2\")][_0xcdc9(\"0x7\")] = window[_0xcdc9(\"0x7\")]);\r\n            }\r\n        }());\r\n    }\r\n    game.sitelock = sitelock;\r\n})(game || (game = {}));\r\n///<reference path=\"Main.ts\"/>\r\n///<reference path=\"GameEnvironment.ts\"/>\r\n///<reference path='Sitelock.ts' />\r\nwindow.addEventListener(\"load\", function () {\r\n    game.sitelock();\r\n    game.loadErudaConsole();\r\n    game.startPhaser();\r\n});\r\nvar game;\r\n(function (game) {\r\n    function loadErudaConsole() {\r\n        var erudaValue = utils.NetUtil.getParamInt(\"console\");\r\n        if (erudaValue <= 0) {\r\n            logBuildInfo();\r\n            return;\r\n        }\r\n        doLoadErudaConsole(erudaValue);\r\n    }\r\n    game.loadErudaConsole = loadErudaConsole;\r\n    function logBuildInfo() {\r\n        console.info(\"Build #\" + window.game.config.build_version, window.game.config.build_time);\r\n    }\r\n    function doLoadErudaConsole(erudaValue) {\r\n        var body = document.getElementsByTagName(\"body\")[0];\r\n        var script = document.createElement(\"script\");\r\n        script.src = \"//cdn.jsdelivr.net/npm/eruda\";\r\n        script.type = \"text/javascript\";\r\n        script.onload = onErudaConsoleLoad.bind(this, erudaValue);\r\n        body.appendChild(script);\r\n    }\r\n    function onErudaConsoleLoad(value) {\r\n        eruda.init({\r\n            tool: [\"console\", \"elements\", \"info\"],\r\n        });\r\n        logBuildInfo();\r\n        if (value === 2) {\r\n            eruda.show();\r\n        }\r\n    }\r\n    function startPhaser() {\r\n        var environment = window.environment;\r\n        var forceRaven = utils.NetUtil.getParamBool(\"raven\");\r\n        if (forceRaven || environment !== GameEnvironment.DEVELOP) {\r\n            setupRaven(environment, forceRaven);\r\n        }\r\n        else {\r\n            createGame();\r\n        }\r\n    }\r\n    game.startPhaser = startPhaser;\r\n    function setupRaven(environment, forceRaven) {\r\n        var options = {\r\n            environment: environment.toString(),\r\n            release: window.game.config.build_version,\r\n            whitelistUrls: [\"poki-gdn.com\", \"robowhale.com\"],\r\n            ignoreErrors: [\"freed script\", \"out of memory\", \"This SourceBuffer has been removed from the parent media source\"],\r\n            captureUnhandledRejections: true,\r\n            tags: {\r\n                channel: window.game.config.channel,\r\n            },\r\n        };\r\n        if (forceRaven) {\r\n            options.whitelistUrls.push(location.hostname);\r\n        }\r\n        Raven.config(\"https://b40f604d5759459ab112987df609ffdc@sentry.io/1883892\", options).install();\r\n        Raven.context(function () {\r\n            createGame();\r\n        });\r\n    }\r\n    function createGame() {\r\n        try {\r\n            window[\"gameInstance\"] = new game.Main();\r\n        }\r\n        catch (error) {\r\n            var webgErrors = [\r\n                \"WebGL unsupported\",\r\n                \"Framebuffer status\",\r\n                \"Vertex Shader failed\",\r\n                \"Fragment Shader failed\",\r\n                \"Link Program failed\",\r\n            ];\r\n            var isWebglError = webgErrors.some(function (error) { return error.toString().includes(error); });\r\n            var forcedCanvas = location.search.includes(\"forceCanvas=1\");\r\n            if (isWebglError && forcedCanvas === false) {\r\n                console.warn(\"WebGL Error\", error.toString());\r\n                // when webgl renderer has failed we force game to use canvas renderer and reload the page\r\n                if (location.search.indexOf(\"?\") === 0) {\r\n                    location.replace(location.href + \"&forceCanvas=1\");\r\n                }\r\n                else {\r\n                    location.replace(location.href + \"?forceCanvas=1\");\r\n                }\r\n            }\r\n            else {\r\n                throw error;\r\n            }\r\n        }\r\n    }\r\n})(game || (game = {}));\r\n//# sourceMappingURL=game.js.map"],
  "mappings": "AAAA,AAAC,UAAU,KACV,AAAI,MAAO,SAAW,UAAY,OAAO,QACxC,OAAO,QAAU,IAEjB,EAAK,KAAO,CACX,OAAQ,OAGR,MAAO,OAAS,YAAc,KAAO,KAAM,WAC7C,MAAO,CACN,WAAY,sBACZ,cAAe,IACf,QAAS,OACT,WAAY,eACZ,iBAAkB,eAClB,UAAW,kBAIb,cAAiB,MAAQ,KAAK,WAAe,WACzC,MAAoB,cAChB,SAAgB,OAAO,gBAClB,CAAE,UAAW,aAAgB,QAAS,cAAkB,EAAE,UAAY,IACvE,cAAkB,YAAc,GAAG,AAAI,OAAO,UAAU,eAAe,KAAK,EAAG,IAAI,GAAE,GAAK,EAAE,KACzF,EAAc,EAAG,IAE5B,MAAO,eACH,EAAc,EAAG,GACjB,aAAgB,KAAK,YAAc,EACnC,EAAE,UAAY,IAAM,KAAO,OAAO,OAAO,GAAM,GAAG,UAAY,EAAE,UAAW,GAAI,kBAGtE,MAAQ,KAAK,WAAc,kBACxC,cAAwB,MAAO,aAAiB,GAAI,EAAQ,GAAI,GAAE,YAAqB,EAAQ,KAC/F,MAAO,IAAK,IAAM,GAAI,UAAU,cAC5B,cAA4B,IAAM,EAAK,EAAU,KAAK,aAAuB,EAAO,IACpF,cAA2B,IAAM,EAAK,EAAU,MAAS,aAAuB,EAAO,IACvF,cAAwB,EAAO,KAAO,EAAQ,EAAO,OAAS,EAAM,EAAO,OAAO,KAAK,EAAW,GAClG,EAAM,GAAY,EAAU,MAAM,EAAS,GAAc,KAAK,uBAGnD,MAAQ,KAAK,aAAgB,cAC5C,MAAQ,CAAE,MAAO,EAAG,KAAM,WAAa,GAAI,EAAE,GAAK,EAAG,KAAM,GAAE,GAAI,MAAO,GAAE,IAAO,KAAM,GAAI,IAAK,YAChG,MAAO,GAAI,CAAE,KAAM,EAAK,GAAI,MAAS,EAAK,GAAI,OAAU,EAAK,IAAM,MAAO,SAAW,YAAe,GAAE,OAAO,UAAY,WAAa,MAAO,QAAU,EACvJ,cAAmB,MAAO,aAAe,MAAO,GAAK,CAAC,EAAG,KACzD,cACI,GAAI,EAAG,KAAM,IAAI,WAAU,mCAC3B,KAAO,GAAG,IACN,GAAI,EAAI,EAAG,GAAM,GAAI,EAAG,GAAK,EAAI,EAAE,OAAY,EAAG,GAAK,EAAE,OAAc,IAAI,EAAE,SAAc,EAAE,KAAK,GAAI,GAAK,EAAE,OAAS,CAAE,GAAI,EAAE,KAAK,EAAG,EAAG,KAAK,KAAM,MAAO,GAC3J,AAAI,GAAI,EAAG,IAAG,GAAK,CAAC,EAAG,GAAK,EAAG,EAAE,QACjC,OAAQ,EAAG,QACF,OAAQ,GAAG,EAAI,EAAI,UACnB,GAAG,SAAE,QAAgB,CAAE,MAAO,EAAG,GAAI,KAAM,QAC3C,GAAG,EAAE,QAAS,EAAI,EAAG,GAAI,EAAK,CAAC,GAAI,aACnC,GAAG,EAAK,EAAE,IAAI,MAAO,EAAE,KAAK,MAAO,iBAEpC,GAAI,CAAE,GAAI,EAAE,KAAM,EAAI,EAAE,OAAS,GAAK,EAAE,EAAE,OAAS,KAAQ,GAAG,KAAO,GAAK,EAAG,KAAO,IAAM,EAAI,EAAG,SACjG,GAAI,EAAG,KAAO,GAAM,EAAC,GAAM,EAAG,GAAK,EAAE,IAAM,EAAG,GAAK,EAAE,KAAQ,EAAE,MAAQ,EAAG,GAAI,MAC9E,GAAI,EAAG,KAAO,GAAK,EAAE,MAAQ,EAAE,IAAM,EAAE,MAAQ,EAAE,GAAI,EAAI,EAAI,MAC7D,GAAI,GAAK,EAAE,MAAQ,EAAE,IAAM,EAAE,MAAQ,EAAE,GAAI,EAAE,IAAI,KAAK,GAAK,MAC3D,AAAI,EAAE,IAAI,EAAE,IAAI,MAChB,EAAE,KAAK,MAAO,SAEtB,EAAK,EAAK,KAAK,EAAS,YACd,EAAK,CAAC,EAAG,GAAI,EAAI,UAAe,EAAI,EAAI,EACtD,GAAI,EAAG,GAAK,EAAG,KAAM,GAAG,GAAI,MAAO,CAAE,MAAO,EAAG,GAAK,EAAG,GAAK,OAAQ,KAAM,eAGlE,MAAQ,KAAK,UAAa,WACtC,gBAAW,OAAO,QAAU,YACxB,YAAgB,IAAO,UAAU,OAAQ,EAAI,EAAG,KAC5C,EAAI,UAAU,GACd,YAAc,GAAG,AAAI,OAAO,UAAU,eAAe,KAAK,EAAG,IACzD,GAAE,GAAK,EAAE,IAEjB,MAAO,IAEJ,SAAS,MAAM,KAAM,2BAEV,MAAQ,KAAK,gBAAmB,WAClD,UAAa,IAAO,IAAQ,UAAU,OAAQ,EAAI,EAAI,IAAK,GAAK,UAAU,GAAG,OAC7E,UAAa,MAAM,KAAQ,IAAO,EAAG,EAAI,EAAI,IACzC,UAAa,UAAU,KAAQ,IAAQ,EAAE,OAAQ,EAAI,EAAI,IAAK,IAC1D,EAAE,GAAK,EAAE,GACjB,MAAO,SAGX,AAAC,aACG,MAA4B,WACxB,cAEA,SAAO,WAAa,eACpB,EAAO,WAAa,mDACpB,EAAO,kBAAoB,IAC3B,EAAO,mBAAqB,KAC5B,EAAO,aAAe,EAAO,kBAAoB,EAAO,mBACxD,EAAO,YAAc,EAAO,mBAAqB,EAAO,kBACxD,EAAO,WAAa,EAAO,kBAC3B,EAAO,YAAc,EAAO,mBAC5B,EAAO,gBAAkB,EAAO,WAAa,GAC7C,EAAO,iBAAmB,EAAO,YAAc,GAC/C,EAAO,aAAe,EAAO,kBAAoB,EAAO,mBACxD,EAAO,KAAO,EACd,EAAO,aAAe,EACf,KAEX,EAAK,OAAS,IACf,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoB,OAAO,SAAS,MAAM,gBACrB,OAAO,SAAS,OAAO,iBACL,WACnC,cAEA,SAAkB,OAAS,WACvB,MAAO,CACH,KAAM,KAAK,gBACX,MAAO,KAAK,oBACZ,MAAO,KAAK,oBACZ,OAAQ,mBACR,MAAO,CACH,aAAc,GACd,aAAc,IAElB,OAAQ,CACJ,kBAAmB,GACnB,YAAa,GACb,6BAA8B,GAC9B,gBAAiB,mBACjB,UAAW,KAAK,qBAAuB,IAE3C,OAAQ,CACJ,WAAY,CAAC,sBAEjB,QAAS,CACL,OAAQ,CACJ,CACI,IAAK,QACL,OAAQ,kBACR,MAAO,IAEX,CACI,IAAK,mBACL,OAAQ,uBACR,MAAO,IAEX,CACI,IAAK,uBACL,OAAQ,qBACR,MAAO,MAInB,UAAW,CACP,QAAS,KAAK,gBAAgB,KAAK,MACnC,SAAU,KAAK,iBAAiB,KAAK,SAIjD,EAAkB,cAAgB,WAC9B,MAAa,MAAM,QAAQ,SAAS,eACpC,MAAI,KAAW,IACJ,OAAO,OAEX,OAAO,MAElB,EAAkB,kBAAoB,WAClC,MAAO,OAAM,WAAW,YAClB,KAAK,2BACL,KAAK,2BAEf,EAAkB,yBAA2B,WACzC,EAAO,OAAO,mBAAqB,IACnC,EAAO,OAAO,YAAc,EAAO,OAAO,mBAC1C,EAAO,OAAO,iBAAmB,EAAO,OAAO,YAAc,EAC7D,EAAO,OAAO,aAAe,EAAO,OAAO,kBAAoB,EAAO,OAAO,mBAC7E,MAAa,CACT,MAAO,EAAO,OAAO,kBACrB,OAAQ,EAAO,OAAO,mBACtB,WAAY,OAAO,MAAM,kBACzB,KAAM,OAAO,MAAM,OAEJ,MAAM,QAAQ,aAAa,gBAC9C,MAAI,IACA,GAAO,IAAM,CACT,MAAO,EAAO,OAAO,kBACrB,OAAQ,EAAO,OAAO,qBAGvB,GAEX,EAAkB,wBAA0B,WACxC,MAAO,CACH,MAAO,EAAO,OAAO,kBACrB,OAAQ,EAAO,OAAO,mBACtB,KAAM,OAAO,MAAM,OAG3B,EAAkB,kBAAoB,WAClC,QACoB,GAAK,OAAO,gBAAqB,MAAQ,IAAO,OAAS,EAAK,OAAO,qBAC3D,MAAO,IAAiB,YACtD,GAAI,IAA4B,GAC5B,MAAO,CACH,gBAAiB,IAGzB,MAAc,KAAK,mBAAmB,GACtC,GAAI,MAAO,GAAQ,QAAW,aAAe,MAAO,GAAQ,SAAY,YACpE,MAAO,CACH,gBAAiB,IAGzB,MAAiB,MAAM,QAAQ,aAAa,cAC5C,MAAO,CACH,gBAAiB,EACjB,QAAS,IAGjB,EAAkB,mBAAqB,YACnC,MAAc,CACV,WAAY,MACZ,YAAa,cAGjB,IACI,EAAU,GAAI,GAAa,YAG3B,EAAU,GAAI,GAElB,MAAO,IAEX,EAAkB,iBAAmB,WACjC,MAAO,OAAM,QAAQ,aAAa,SAEtC,EAAkB,gBAAkB,cAEpC,EAAkB,iBAAmB,YACjC,EAAK,UAAY,EAAO,UAAU,aAAa,EAAK,OACpD,EAAK,aAAe,KAAK,gBAAgB,EAAK,UAC9C,EAAK,MAAQ,GAAI,GAAO,aAAa,GACrC,EAAK,MAAM,sBAEf,EAAkB,gBAAkB,YAChC,MAAI,aAAoB,GACb,EAAO,aAAa,MAEtB,YAAoB,GAClB,EAAO,aAAa,OAExB,EAAO,aAAa,UAExB,KAEX,EAAO,kBAAoB,IAC5B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,WAC9B,cACI,KAAK,SAAW,GAChB,KAAK,KAAO,EACZ,KAAK,SAAW,MAAO,QAAU,aAAe,MAAM,UAE1D,cAAO,eAAe,EAAa,UAAW,UAAW,CACrD,IAAK,WACD,MAAO,MAAK,UAEhB,WAAY,GACZ,aAAc,KAElB,EAAa,UAAU,kBAAoB,YACvC,GAAI,KAAK,WAAa,GAClB,OAEJ,MAAM,kBAAkB,IAE5B,EAAa,UAAU,eAAiB,YACpC,GAAI,KAAK,WAAa,GAClB,OAEJ,MAAM,eAAe,IAEzB,EAAa,UAAU,gBAAkB,YACrC,GAAI,KAAK,WAAa,GAClB,OAEJ,MAAM,gBAAgB,IAE1B,EAAa,UAAU,mBAAqB,WACxC,MACA,GAAI,KAAK,WAAa,GAClB,OAEJ,MAAM,eAAe,CACjB,SAAU,KAAK,KAAK,aACpB,MAAO,KAAK,KAAK,UACjB,gBAAiB,UAAU,SAC3B,gBAAkB,GAAK,KAAK,KAAK,MAAM,WAAgB,MAAQ,IAAO,OAAS,OAAS,EAAG,aAE/F,MAAa,KAAK,KAAK,OACvB,MAAM,gBAAgB,CAClB,eAAgB,GAChB,gBAAiB,GACjB,OAAQ,CACJ,WAAY,EAAO,WAAW,UAC9B,UAAW,EAAO,SAAS,UAC3B,OAAQ,EAAO,SAAS,OACxB,MAAO,EAAO,SAAS,MACvB,MAAO,CACH,IAAK,EAAO,MAAM,IAClB,IAAK,EAAO,MAAM,IAClB,IAAK,EAAO,MAAM,SAKlC,EAAa,UAAU,kBAAoB,YACvC,GAAI,KAAK,WAAa,GAClB,OAEJ,EAAW,GAAG,EAAO,qBAAqB,SAAU,KAAK,0BAA2B,OAExF,EAAa,UAAU,0BAA4B,kBAC/C,MAAM,gBAAgB,CAClB,UAAW,EACX,aAAc,EACd,iBAAkB,IAEtB,KAAK,gBAAgB,IAEzB,EAAa,UAAU,gBAAkB,YACrC,MACA,GAAI,KAAK,WAAa,GAClB,OAEJ,MAAY,KAAK,KAAK,MAAM,SAAS,GACrC,AAAI,GACA,GAAM,OAAO,KAAK,OAAO,OAAO,OAAO,SAAU,KAAK,0BAA0B,KAAK,KAAM,IAC1F,GAAK,EAAM,SAAW,MAAQ,IAAO,QAAkB,EAAG,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,QAG5H,EAAa,UAAU,0BAA4B,YAC/C,MACA,AAAC,GAAK,EAAM,SAAW,MAAQ,IAAO,QAAkB,EAAG,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,OAEzH,EAAa,UAAU,cAAgB,cACnC,MAAc,EAAQ,IAAI,YACtB,QACA,MAAO,GAAI,MAAU,IAAK,EAAI,SAAc,MAAQ,IAAO,OAAS,OAAS,EAAG,OAAW,IAAK,EAAI,WAAgB,MAAQ,IAAO,OAAS,OAAS,EAAG,OAE5J,GAAI,EAAQ,SAAW,EACnB,OAEJ,MAAM,gBAAgB,CAClB,UAAW,EAAQ,UAG3B,EAAa,UAAU,eAAiB,cACpC,AAAI,IAAU,QAAU,GAAQ,QAChC,AAAI,KAAK,UACL,MAAM,eAAe,EAAS,CAAE,MAAO,KAG/C,EAAa,UAAU,iBAAmB,cACtC,AAAI,KAAK,UACL,MAAM,iBAAiB,EAAW,IAGnC,KAEX,EAAO,aAAe,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAW,KAAU,MACrB,EAAW,MAAW,QACvB,EAAa,EAAK,YAAe,GAAK,WAAa,KACtD,MACA,AAAC,aACG,EAAe,eAAoB,gBACnC,EAAe,iBAAsB,oBACtC,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MACA,AAAC,aACG,EAAS,OAAY,SACrB,EAAS,QAAa,WACvB,EAAW,EAAK,UAAa,GAAK,SAAW,KAChD,MACA,AAAC,aACG,EAAe,kBAAuB,oBACtC,EAAe,sBAA2B,wBAC1C,EAAe,sBAA2B,wBAC1C,EAAe,aAAkB,eACjC,EAAe,kBAAuB,oBACtC,EAAe,mBAAwB,qBACvC,EAAe,mBAAwB,qBACvC,EAAe,4BAAiC,8BAChD,EAAe,4BAAiC,8BAChD,EAAe,gBAAqB,kBACpC,EAAe,YAAiB,gBACjC,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,KAAO,EACN,EAEX,MAAO,IACT,OAAO,OAAO,cAChB,EAAK,UAAY,IAClB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmB,OAAO,OAAO,aACjC,EAAK,cAAgB,CACjB,GAAM,6CACN,GAAM,UACN,GAAM,cACN,GAAM,WACN,GAAM,UACN,GAAM,aACN,GAAM,aACN,GAAM,QACN,GAAM,QACN,GAAM,aACN,GAAM,gBAEV,cACI,MAAO,GAAK,cAAc,GAE9B,EAAK,iBAAmB,EACxB,MACA,AAAC,aACG,EAAe,gBAAqB,8BACrC,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,KAAO,EACb,EAAM,SAAW,EAAM,KAAK,MAAM,KAAK,IAAI,SAC3C,EAAM,aAAe,OAAO,KAAK,EAAM,UACvC,EAAM,UAAY,EAAM,iBACxB,EAAM,MAAQ,EAAM,SAAS,EAAM,WACnC,EAAM,KAAK,MAAM,eAAe,CAAE,aAAc,EAAM,YACzC,GAAe,EAAM,UAC3B,EAKX,cAAO,eAAe,EAAU,UAAW,WAAY,CACnD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,EAAU,UAAU,eAAiB,WACjC,MAAQ,MAAK,2BACT,KAAK,oBACL,KAAK,0BACL,MAER,EAAU,UAAU,wBAA0B,WAC1C,MAAe,MAAM,QAAQ,SAAS,SAAW,MAAM,QAAQ,SAAS,YACxE,MAAI,IAAY,MAAO,IAAa,UAAY,KAAK,oBAAoB,GAC9D,EAEJ,MAEX,EAAU,UAAU,iBAAmB,WACnC,MAAO,MAAK,KAAK,MAAM,SAAS,EAAK,aAAa,WAEtD,EAAU,UAAU,uBAAyB,WACzC,MAAgB,UAAU,SAAS,MAAM,KAAK,GAAG,cACjD,MAAI,IAAa,KAAK,oBAAoB,GAC/B,EAEX,QAEJ,EAAU,UAAU,oBAAsB,YACtC,MAAO,MAAK,aAAa,SAAS,IAEtC,EAAU,UAAU,sBAAwB,WACxC,MAAY,KACZ,KAAK,KAAK,MAAM,UAAU,IAAO,QAAQ,YACrC,EAAM,MAAW,EAAM,SAG/B,EAAU,UAAU,YAAc,YAC9B,MAAK,MAAK,oBAAoB,GAI9B,MAAK,UAAY,EACjB,KAAK,MAAQ,KAAK,SAAS,GAC3B,KAAK,KAAK,MAAM,eAAe,CAAE,aAAc,KAAK,YACpD,KAAK,wBACL,KAAK,KAAK,EAAe,gBAAiB,GACnC,IARU,IAAc,EACpB,KASR,GACT,GACF,EAAK,UAAY,IAClB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAA4D,WACxD,aACI,KAAK,KAAO,kBACZ,KAAK,QAAU,GAEnB,cAAO,eAAe,EAAe,UAAW,YAAa,CACzD,IAAK,WACD,MAAO,MAAK,YAEhB,WAAY,GACZ,aAAc,KAElB,EAAe,UAAU,KAAO,aAChC,EAAe,UAAU,aAAe,YACpC,KAAK,WAAa,GAEtB,EAAe,UAAU,UAAY,cACjC,KAAK,QAAQ,KAAK,WAAW,IAAQ,GAEzC,EAAe,UAAU,SAAW,YAChC,MAAO,MAAK,QAAQ,KAAK,WAAW,KAExC,EAAe,UAAU,UAAY,YACjC,MAAO,MAAK,SAAS,IAAQ,GAEjC,EAAe,UAAU,WAAa,YAClC,MAAO,MAAK,SAAS,IAAQ,IAEjC,EAAe,UAAU,UAAY,YACjC,MAAO,MAAK,SAAS,IAAQ,IAEjC,EAAe,UAAU,UAAY,YACjC,MAAO,MAAK,SAAS,IAAQ,IAEjC,EAAe,UAAU,WAAa,YAClC,MAAY,KAEZ,GADA,AAAI,IAAoB,QAAU,GAAkB,IAChD,EACA,MAAO,MAAK,QAGZ,MAAW,OAAO,KAAK,KAAK,SAAS,OAAO,YACxC,MAAO,GAAI,QAAQ,EAAM,YAAc,OAE3B,GAChB,SAAK,QAAQ,YACT,EAAU,GAAO,EAAM,QAAQ,KAE5B,GAGf,EAAe,UAAU,MAAQ,YAC7B,MAAY,KAEZ,GADA,AAAI,IAAoB,QAAU,GAAkB,IAChD,EACA,KAAK,QAAU,QAGf,MAAmB,OAAO,KAAK,KAAK,SAAS,OAAO,YAChD,MAAO,GAAI,QAAQ,EAAM,YAAc,KAE3C,EAAa,QAAQ,YACjB,MAAO,GAAM,QAAQ,OAIjC,EAAe,UAAU,WAAa,YAClC,MAAO,MAAK,WAAa,KAAO,GAE7B,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,WACpC,cACI,KAAK,KAAO,eACZ,KAAK,UAAY,EAErB,SAAmB,UAAU,KAAO,WAChC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,UACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GACD,SAAG,KAAK,KAAK,CAAC,EAAG,EAAG,CAAE,IACtB,KAAK,SAAW,YAAY,eAAe,CACvC,OAAQ,CAAC,YAAY,aAAc,YAAY,WAC/C,UAAW,KAAK,UAChB,KAAM,cAEV,EAAU,UACH,CAAC,EAAa,QAAQ,IAAI,CACzB,KAAK,SAAS,QAAQ,EAAS,GAC/B,KAAK,SAAS,QAAQ,GACtB,KAAK,SAAS,WAAW,UAEhC,GACD,SAAU,EAAG,OACN,CAAC,EAAc,QAAQ,eAC7B,GACD,SAAU,EAAG,OACb,KAAK,SAAW,KACT,CAAC,EAAc,QAAQ,OAAO,QACpC,GAAG,MAAO,CAAC,SAKhC,EAAmB,UAAU,UAAY,cACrC,QACiB,MAAO,IAAU,SAC5B,EACA,KAAK,UAAU,GACrB,MAAQ,GAAK,KAAK,YAAc,MAAQ,IAAO,OAAS,OAAS,EAAG,QAAQ,KAAK,cAAc,GAAM,IAEzG,EAAmB,UAAU,cAAgB,YACzC,MAAO,KAAO,GAElB,EAAmB,UAAU,SAAW,YACpC,MACA,MAAO,SAAQ,QAAS,GAAK,KAAK,YAAc,MAAQ,IAAO,OAAS,OAAS,EAAG,QAAQ,KAAK,cAAc,MAEnH,EAAmB,UAAU,UAAY,YACrC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,IAGtC,SAAM,WAAW,IAAU,EACpB,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAmB,UAAU,WAAa,YACtC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,KAGtC,SAAO,IAAU,OACV,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAmB,UAAU,UAAY,YACrC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,MACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,KAGtC,MAAO,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAmB,UAAU,UAAY,YACrC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GACD,EAAQ,EAAG,OACX,EAAM,KACN,IACI,EAAM,KAAK,MAAM,aAKrB,MAAO,CAAC,EAAc,QAAQ,QAAQ,UAK1D,EAAmB,UAAU,OAAS,YAClC,MACA,AAAC,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,WAAW,KAAK,cAAc,KAE/F,EAAmB,UAAU,MAAQ,WACjC,MAAY,KACZ,cAAO,KAAK,KAAK,UACZ,OAAO,YAAiB,MAAO,GAAI,SAAS,EAAM,aAClD,QAAQ,YACT,MACA,AAAC,GAAK,EAAM,YAAc,MAAQ,IAAO,QAAkB,EAAG,WAAW,KAEtE,QAAQ,WAEnB,EAAmB,UAAU,cAAgB,WACzC,GAAI,CAAC,KAAK,SACN,MAAO,OAEX,OAAQ,KAAK,SAAS,aACb,aAAY,aACb,MAAO,mBACN,aAAY,UACb,MAAO,iBACN,aAAY,OACb,MAAO,iBAEP,MAAO,SAGZ,KAEX,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KAInB,SACA,AAAC,aACG,MAAmB,OAAO,OAAO,eAEjC,AAAC,aACG,EAAa,YAAiB,cAC9B,EAAa,gBAAqB,kBAClC,EAAa,OAAY,SACzB,EAAa,SAAc,WAC3B,EAAa,YAAiB,cAC9B,EAAa,YAAiB,cAC9B,EAAa,sBAA2B,wBACxC,EAAa,uBAA4B,2BAC1C,EAAe,EAAO,cAAiB,GAAO,aAAe,KAChE,MACA,AAAC,aACG,EAAe,MAAW,oBAC3B,EAAiB,EAAO,gBAAmB,GAAO,eAAiB,KACtE,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,KAAO,EACb,EAAM,UAAY,EAClB,EAAM,qBACC,EAEX,SAAU,UAAU,mBAAqB,WACrC,KAAK,gBAAkB,GAAI,GAAO,eAClC,KAAK,gBAAgB,aAAa,KAAK,OAAO,aAElD,EAAU,UAAU,kBAAoB,WACpC,MAAO,MAAK,kBAEhB,EAAU,UAAU,eAAiB,WACjC,MAAY,OACC,GAAI,GAAO,mBAAmB,KAAK,WAChD,MAAO,IAAI,SAAQ,cACf,EAAO,OACF,KAAK,WACN,EAAM,WAAW,GACjB,MAEC,MAAM,YACP,EAAO,KAEN,QAAQ,WACT,UACkB,EAAO,gBACzB,AAAC,GAAK,EAAM,KAAK,SAAW,MAAQ,IAAO,QAAkB,EAAG,eAAe,CAAE,QAAS,IACzF,GAAK,EAAM,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,gBAAgB,WAAa,QAI7G,EAAU,UAAU,WAAa,YAC7B,KAAK,SAAW,GAEpB,EAAU,UAAU,SAAW,YAC3B,MAAO,MAAK,gBAAgB,SAAS,IAEzC,EAAU,UAAU,WAAa,YAC7B,MAAO,MAAK,gBAAgB,WAAW,IAE3C,EAAU,UAAU,UAAY,YAC5B,MAAO,MAAK,gBAAgB,UAAU,IAE1C,EAAU,UAAU,UAAY,YAC5B,MAAO,MAAK,gBAAgB,UAAU,IAE1C,EAAU,UAAU,UAAY,cAC5B,MACA,AAAC,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,UAAU,EAAK,GAC5E,KAAK,gBAAgB,UAAU,EAAK,IAExC,EAAU,UAAU,aAAe,kBAC/B,AAAI,IAAQ,QAAU,GAAM,OAAO,kBACnC,AAAI,IAAQ,QAAU,GAAM,OAAO,kBACnC,MAAe,KAAK,UAAU,KACf,EAAW,EAC1B,SAAW,OAAO,KAAK,MAAM,EAAU,EAAK,GAC5C,KAAK,UAAU,EAAK,GACb,GAEX,EAAU,UAAU,eAAiB,YACjC,MAAc,KAAK,UAAU,EAAa,QAC1C,MAAO,GAAQ,IAEnB,EAAU,UAAU,gBAAkB,cAClC,QACc,KAAK,UAAU,EAAa,UAC5B,SAAS,SAAS,GAAI,GAAW,GAAK,GAAI,EAAG,GAAe,EAAM,IAChF,KAAK,UAAU,EAAa,OAAQ,IAExC,EAAU,UAAU,kBAAoB,WACpC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,QAAQ,IAAI,CACjC,KAAK,UAAU,EAAa,SAAU,IACtC,KAAK,UAAU,EAAa,YAAa,IACzC,KAAK,UAAU,EAAa,OAAQ,IACpC,KAAK,UAAU,EAAa,YAAa,IACzC,KAAK,UAAU,EAAa,gBAAiB,IAC7C,KAAK,UAAU,EAAa,YAAa,GACzC,KAAK,UAAU,EAAa,sBAAuB,IACnD,KAAK,UAAU,EAAa,uBAAwB,WAEvD,GACD,SAAG,OACI,CAAC,SAK5B,EAAU,UAAU,UAAY,kBAC5B,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,UACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GACD,MAAK,MAAK,SAIV,GAAK,GAAY,KAAK,2BAA2B,GACjD,EAAY,GAAmB,KAAK,SAC7B,CAAC,EAAa,EAAG,KAAK,EAAW,KALpC,MAAK,gBAAgB,UAAU,EAAK,GAC7B,CAAC,QAKX,GACD,SAAS,EAAG,QAAW,EACvB,KAAK,gBAAgB,UAAU,EAAK,GAC7B,CAAC,SAK5B,EAAU,UAAU,2BAA6B,YAC7C,MAAgB,MAAO,GACvB,OAAQ,OACC,SACD,MAAO,MAAK,SAAS,cACpB,SACD,MAAO,MAAK,SAAS,aACpB,UACD,MAAO,MAAK,SAAS,eACpB,SACD,MAAO,MAAK,SAAS,kBAErB,MAAO,MAAK,SAAS,WAGjC,EAAU,UAAU,kBAAoB,WACpC,MAAW,OAAO,KAAK,GAAc,IAAI,YACrC,MAAO,GAAa,OAEP,OAAO,KAAK,KAAK,gBAAgB,cAAc,IAAI,YAChE,MAAO,GAAI,MAAM,MAAM,OAEhB,EAAE,IAAI,EAAM,GACvB,AAAI,EAAK,OAAS,GAItB,EAAU,UAAU,MAAQ,WACxB,KAAK,UAAU,EAAa,OAAQ,IACpC,KAAK,UAAU,EAAa,YAAa,IACzC,KAAK,UAAU,EAAa,gBAAiB,IAC7C,KAAK,UAAU,EAAa,YAAa,GACzC,KAAK,UAAU,EAAa,sBAAuB,IACnD,KAAK,UAAU,EAAa,uBAAwB,IACpD,KAAK,KAAK,EAAe,MAAO,OAEpC,EAAU,UAAU,gBAAkB,WAClC,QACY,KACZ,IACI,MAA2B,GAAK,GAC5B,EAAG,EAAa,iBAAmB,YAAmB,MAAO,MAAK,MAAM,IACxE,EAAG,EAAa,aAAe,YAAmB,MAAO,MAAK,MAAM,IACpE,EAAG,EAAa,QAAU,YAAmB,MAAO,MAAK,MAAM,IAC/D,EAAG,EAAa,UAAY,YAAmB,MAAO,IACtD,EAAG,EAAa,aAAe,YAAmB,MAAO,YAAW,IACpE,EAAG,EAAa,aAAe,YAAmB,MAAO,KAAU,QACnE,EAAG,EAAa,uBAAyB,YAAmB,MAAO,KAAU,QAC7E,EAAG,EAAa,wBAA0B,YAAmB,MAAO,KAAU,QAC9E,GACJ,OAAO,KAAK,cACP,OAAO,YAAiB,MAAO,GAAI,SAAS,kBAC5C,QAAQ,YACT,MAAa,EAAI,MAAM,MAAM,KACA,EAAoB,GACjD,GAAI,GACA,MAAe,aAAa,QAAQ,KACrB,EAAuB,GACtC,EAAM,UAAU,EAAQ,GACxB,aAAa,WAAW,kBAOjC,GACT,GACF,EAAO,UAAY,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAa,UAAe,YAC5B,EAAa,cAAmB,gBAEhC,EAAa,IAAS,MACtB,EAAa,UAAe,YAC5B,EAAa,YAAiB,cAC9B,EAAa,YAAiB,gBAC9B,EAAa,aAAkB,eAC/B,EAAa,gBAAqB,kBAClC,EAAa,WAAgB,aAC7B,EAAa,oBAAyB,sBACtC,EAAa,oBAAyB,sBACtC,EAAa,gBAAqB,kBAClC,EAAa,sBAA2B,wBACxC,EAAa,MAAW,UACxB,EAAa,MAAW,UACxB,EAAa,MAAW,UACxB,EAAa,WAAgB,eAC7B,EAAa,WAAgB,aAC7B,EAAa,WAAgB,aAC7B,EAAa,WAAgB,aAC7B,EAAa,UAAe,YAC5B,EAAa,aAAkB,iBAC/B,EAAa,uBAA4B,yBACzC,EAAa,gBAAqB,kBAClC,EAAa,OAAY,eACzB,EAAa,UAAe,aAC5B,EAAa,QAAa,UAC1B,EAAa,UAAe,cAC5B,EAAa,aAAkB,iBAC/B,EAAa,gBAAqB,oBAClC,EAAa,cAAmB,gBAChC,EAAa,gBAAqB,kBAClC,EAAa,0BAA+B,4BAC5C,EAAa,YAAiB,cAC9B,EAAa,mBAAwB,qBACrC,EAAa,oBAAyB,sBACtC,EAAa,MAAW,QACxB,EAAa,oBAAyB,sBACtC,EAAa,eAAoB,iBACjC,EAAa,2BAAgC,4BAC7C,EAAa,2BAAgC,4BAC7C,EAAa,2BAAgC,4BAC7C,EAAa,QAAa,UAC1B,EAAa,YAAiB,cAC9B,EAAa,YAAiB,cAC9B,EAAa,mBAAwB,qBACrC,EAAa,gBAAqB,oBAClC,EAAa,YAAiB,gBAC9B,EAAa,aAAkB,iBAC/B,EAAa,aAAkB,eAC/B,EAAa,gBAAqB,oBAClC,EAAa,eAAoB,iBACjC,EAAa,eAAoB,mBAClC,EAAe,EAAK,cAAiB,GAAK,aAAe,OAC7D,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAA2B,OAAO,MAAM,uBACX,OAAO,MAAM,yBAE1C,AAAC,aACG,EAAiB,SAAc,WAC/B,EAAiB,YAAiB,cAClC,EAAiB,UAAe,cACjC,EAAmB,EAAK,kBAAqB,GAAK,iBAAmB,KACxE,MAA+B,WAC3B,cACI,KAAK,MAAQ,EACb,KAAK,MAAQ,KAAK,MAAM,MACxB,KAAK,SAAW,KAAK,MAAM,KAC3B,KAAK,MAAM,YAAc,GACzB,KAAK,IAAM,KAAK,MAAM,KAAK,OAAO,GAAG,IACrC,KAAK,iBAAmB,EAAE,SAAS,KAAK,QAAQ,KAAK,MAAO,KAC5D,KAAK,0BAET,SAAU,aAAe,YACrB,MAAI,aAAiB,GACV,EAAiB,UAEnB,YAAiB,GACf,EAAiB,YAErB,EAAiB,UAE5B,EAAU,UAAU,wBAA0B,WAC1C,KAAK,MAAM,KAAK,OAAO,GAAG,OAAO,KAAK,OAAO,KAAM,KAAK,OAAQ,MAChE,KAAK,MAAM,KAAK,OAAO,GAAG,OAAO,KAAK,OAAO,MAAO,KAAK,mBAE7D,EAAU,UAAU,uBAAyB,WACzC,KAAK,MAAM,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,KAAM,KAAK,OAAQ,MACjE,KAAK,MAAM,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,MAAO,KAAK,mBAE9D,EAAU,UAAU,OAAS,WACzB,KAAK,SAAW,KAAK,MAAM,KAC3B,KAAK,MAAM,KAAO,IAEtB,EAAU,UAAU,QAAU,WAC1B,KAAK,MAAM,KAAO,KAAK,UAE3B,EAAU,UAAU,oBAAsB,WACtC,MACA,MAAM,IAAK,KAAK,MAAM,WAAa,MAAQ,IAAO,OAAS,OAAS,EAAG,SAAW,UACvE,KAAK,MAAM,QAAQ,UAEvB,QAAQ,WAEnB,EAAU,UAAU,mBAAqB,WACrC,MACA,MAAM,IAAK,KAAK,MAAM,WAAa,MAAQ,IAAO,OAAS,OAAS,EAAG,SAAW,YACvE,KAAK,MAAM,QAAQ,SAEvB,QAAQ,WAEnB,EAAU,UAAU,qBAAuB,YACvC,EAAgB,GAAG,EAAK,qBAAqB,MAAO,KAAK,mBAAoB,OAEjF,EAAU,UAAU,mBAAqB,gBACrC,GAAI,IAAa,EAAK,SAAS,YAC3B,KAAK,mBACL,OAEJ,GAAI,IAAa,EAAK,SAAS,eAC3B,KAAK,uBACL,SAGR,EAAU,UAAU,iBAAmB,WACnC,KAAK,SAAS,KAAK,cACnB,KAAK,SAAS,KAAK,SAAU,KAEjC,EAAU,UAAU,qBAAuB,WACvC,KAAK,SAAS,KAAK,UACnB,KAAK,SAAS,KAAK,aAAc,IAErC,EAAU,UAAU,SAAW,WAC3B,KAAK,MAAM,KAAO,KAAK,MAAM,KAAK,MAAM,WAAW,EAAK,aAAa,cAEzE,EAAU,UAAU,YAAc,WAC9B,KAAK,SAAW,KAAK,QAAQ,EAAK,aAAa,YAEnD,EAAU,UAAU,gBAAkB,WAClC,KAAK,aAAe,KAAK,QAAQ,EAAK,aAAa,gBAEvD,EAAU,UAAU,qBAAuB,WACvC,KAAK,kBACL,AAAI,KAAK,oBACL,KAAK,SAAS,KAAK,aAAc,IAGzC,EAAU,UAAU,iBAAmB,WACnC,MAAO,MAAK,MAAM,KAAK,MAAM,UAAU,IAAM,KAAK,YAAmB,MAAO,GAAM,MAAM,MAAQ,EAAK,SAAS,iBAElH,EAAU,UAAU,QAAU,YAC1B,MAAuB,KAAK,MAAM,MAAM,MAAM,IAAI,GAClD,MAAI,KAAqB,GACd,KAEJ,KAAK,MAAM,IAAI,EAAK,CAAE,KAAM,MAEvC,EAAU,UAAU,SAAW,cAC3B,GAAI,CAAC,GAAQ,EAAK,UACd,OAEJ,EAAK,OAAS,EACd,EAAK,OACL,KAAK,MAAM,OAAO,aAAa,GAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,KACV,KAAM,OAAO,KAAK,OAAO,MAAM,GAC/B,OAAQ,KAGhB,EAAU,UAAU,SAAW,YAC3B,GAAI,CAAC,EACD,OAEJ,KAAK,MAAM,OAAO,aAAa,GAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,OAAQ,EACR,WAAY,WACR,EAAK,WAIjB,EAAU,UAAU,eAAiB,YACjC,AAAI,IAAW,QAAU,GAAS,GAClC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,MAC7C,KAAK,MAAM,KAAK,EAAK,aAAa,IAAK,CAAE,OAAQ,KAGlD,KAEX,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA2B,YACvB,UAAU,EAAO,GACjB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,QAAU,EAChB,EAAM,UACN,EAAM,QAAQ,EAAQ,SACtB,EAAM,eAAe,GAAI,QAAO,KAAK,UAAU,CAAC,EAAM,KAAK,MAAQ,EAAG,CAAC,EAAM,KAAK,OAAS,EAAG,EAAM,KAAK,MAAO,EAAM,KAAK,QAAS,OAAO,KAAK,UAAU,UAC1J,EAAM,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,QAAS,GACrE,EAAM,MAAM,OAAS,UACd,EAEX,SAAM,UAAU,QAAU,WACtB,KAAK,KAAO,KAAK,MAAM,IAAI,SAAS,CAChC,UAAW,CACP,MAAO,SACP,MAAO,GAEX,UAAW,CACP,MAAO,KAGf,MAAY,EAAK,OAAO,kBAAoB,KAC/B,IACb,KAAK,KAAK,gBAAgB,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,EAAQ,CAAE,GAAI,GAAI,GAAI,EAAG,GAAI,EAAG,GAAI,KAC9F,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,OAAS,EACnB,KAAK,IAAI,KAAK,OAElB,EAAM,UAAU,QAAU,YACtB,MAAY,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAa,GACnD,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,eAAe,IACzB,KAAK,KAAK,iBAAiB,KAAK,KAAK,MAAQ,IAC7C,KAAK,IAAI,KAAK,MACd,KAAK,kBAET,EAAM,UAAU,eAAiB,WAC7B,MAAgB,KAAK,KAAK,OAAS,GACnC,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,SAExD,EAAM,UAAU,KAAO,YACnB,MAAa,GACb,KAAK,MAAQ,EACb,KAAK,GAAK,EACV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,KAAK,EAAI,EACZ,WAAY,KAAK,gBAAgB,KAAK,KAAM,MAGpD,EAAM,UAAU,gBAAkB,YAC9B,MAAY,KACZ,KAAK,kBAAoB,KAAK,MAAM,KAAK,YAAY,EAAU,WAC3D,EAAM,aAGd,EAAM,UAAU,QAAU,WACtB,AAAI,KAAK,mBACL,KAAK,kBAAkB,SAE3B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,EAAG,OACH,WAAY,KAAK,QAAQ,KAAK,SAGtC,EAAM,UAAU,SAAW,WACvB,MAAO,MAAK,KAAK,OAErB,EAAM,UAAU,UAAY,WACxB,MAAO,MAAK,KAAK,QAErB,EAAM,UAAU,WAAa,WACzB,AAAI,KAAK,mBACL,KAAK,kBAAkB,SAE3B,KAAK,MAAM,OAAO,aAAa,OAE5B,GACT,OAAO,YAAY,WACrB,EAAK,MAAQ,IACd,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,mBACb,EAAM,OAAS,GACf,EAAM,QAAQ,EAAK,OAAO,kBAAmB,EAAK,OAAO,oBAClD,EAEX,SAAc,UAAU,eAAiB,YACrC,MAAY,KAAK,OAAO,QAAQ,GAChC,AAAI,EAAQ,IACR,KAAK,OAAO,OAAO,EAAO,IAGlC,EAAc,UAAU,WAAa,WACjC,KAAK,OAAO,QAAQ,YAAmB,MAAO,GAAM,aAExD,EAAc,UAAU,cAAgB,WACpC,MAAO,GAAK,OAAO,YAAc,KAAK,OAE1C,EAAc,UAAU,OAAS,aAEjC,EAAc,UAAU,KAAO,YAC3B,KAAK,aACL,MAAa,IACD,GAAI,GAAK,MAAM,KAAK,MAAO,GAEvC,EAAM,EAAI,KAAK,gBAAkB,EAAI,EAAM,YAAc,EAAI,EAC7D,EAAM,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,eAAgB,MACnE,EAAM,KAAK,EAAQ,UACnB,KAAK,OAAO,KAAK,GACjB,KAAK,IAAI,IAEb,EAAc,UAAU,yBAA2B,WAC/C,KAAK,KAAK,CACN,QAAS,KAAK,MAAM,MAAM,IAAI,kBAC9B,SAAU,QAGlB,EAAc,UAAU,+BAAiC,WACrD,KAAK,KAAK,CACN,QAAS,KAAK,MAAM,MAAM,IAAI,UAC9B,SAAU,QAGX,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,WACA,AAAC,aACG,MACA,AAAC,aACG,MAA4B,YACxB,UAAU,EAAQ,GAClB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,SACb,EAAM,QAAU,SAAS,CAAE,gBAAiB,IAAO,GACnD,EAAM,gBACC,EAEX,SAAO,UAAU,cAAgB,WAC7B,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,QAAQ,cAAe,KAAK,QAAQ,iBACtF,KAAK,WAAW,MAAQ,KAAK,QAAQ,gBACrC,KAAK,WAAW,aAAe,KAAK,OAAO,kBAC3C,KAAK,WAAW,cAAgB,KAAK,OAAO,mBAC5C,KAAK,IAAI,KAAK,aAElB,EAAO,UAAU,OAAS,cAEnB,GACT,EAAO,YAAY,WACrB,EAAY,OAAS,IACtB,EAAc,EAAO,aAAgB,GAAO,YAAc,OAC9D,QAAW,QAAS,KACvB,WACA,AAAC,aACG,MACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,MAAW,eACvB,EAAY,QAAa,mBAC1B,EAAc,EAAY,aAAgB,GAAY,YAAc,KACvE,MAA4B,YACxB,UAAU,EAAQ,GAClB,oBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAS,IAAU,KAC9D,SAAM,SAAW,GACjB,EAAM,cAAgB,EACtB,EAAM,iBAAmB,GACzB,EAAM,YAAc,GACpB,EAAM,SAAW,MACjB,EAAM,YAAc,EACpB,AAAI,EACA,EAAO,IAAI,GAGX,EAAM,MAAM,IAAI,SAAS,GAE7B,EAAM,iBACN,EAAM,GAAG,EAAO,MAAM,OAAO,wBAAyB,EAAM,cAAe,GAC3E,EAAM,MAAM,MAAM,GAAG,EAAO,MAAM,OAAO,WAAY,EAAM,iBAAkB,GAC7E,EAAM,MAAM,OAAS,UACd,EAEX,cAAO,eAAe,EAAO,UAAW,UAAW,CAC/C,IAAK,WACD,MAAO,MAAK,UAEhB,IAAK,YACD,KAAK,SAAW,EAChB,KAAK,SAAW,KAAK,iBAAmB,KAAK,sBAEjD,WAAY,GACZ,aAAc,KAElB,EAAO,UAAU,cAAgB,YAC7B,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,KAAK,WAChC,KAAK,MAAM,MAAM,KAAK,KAAK,UAE/B,KAAK,mBACL,KAAK,YACL,KAAK,KAAK,EAAY,MAAO,KAAM,GACnC,KAAK,eAAiB,GAE1B,EAAO,UAAU,iBAAmB,WAChC,GAAI,CAAC,KAAK,iBACN,OAEJ,KAAK,cAAgB,KAAK,MAC1B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,KAAK,MAAQ,GACpB,KAAM,EAAO,KAAK,OAAO,MAAM,IAC/B,SAAU,MAGlB,EAAO,UAAU,UAAY,WACzB,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,KAAK,WAChC,KAAK,MAAM,MAAM,KAAK,KAAK,SAAU,CAAE,OAAQ,KAAK,eAG5D,EAAO,UAAU,iBAAmB,cAChC,GAAI,KAAK,gBAAkB,KAAK,iBAAmB,GAC/C,KAAK,eAAiB,KACtB,MAA0B,EAAQ,SAAS,MAC3C,AAAI,MAAK,cAAgB,IAAS,IAC9B,MAAK,cACL,KAAK,KAAK,EAAY,QAAS,KAAM,IAEzC,KAAK,sBAGb,EAAO,UAAU,kBAAoB,WAEjC,GAAI,CAAC,KAAK,MACN,OAEJ,GAAI,CAAC,KAAK,iBACN,OAEJ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,KAAK,cACZ,KAAM,EAAO,KAAK,OAAO,KAAK,IAC9B,SAAU,OAGlB,EAAO,UAAU,YAAc,aAE/B,EAAO,UAAU,QAAU,YACvB,AAAI,KAAK,OACL,KAAK,MAAM,MAAM,IAAI,EAAO,MAAM,OAAO,WAAY,KAAK,iBAAkB,MAEhF,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,EAAO,YAAY,OACrB,EAAY,OAAS,IACtB,EAAc,EAAO,aAAgB,GAAO,YAAc,OAC9D,QAAW,QAAS,KACvB,WACA,AAAC,aACG,MACA,AAAC,aACG,MACA,AAAC,aACG,EAAkB,EAAkB,QAAa,GAAK,UACtD,EAAkB,EAAkB,QAAa,GAAK,YACvD,EAAoB,EAAY,mBAAsB,GAAY,kBAAoB,KACzF,MAAkC,YAC9B,UAAU,EAAc,GACxB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAS,IAAW,KAClE,SAAM,QAAU,EAChB,EAAM,QAAU,EAChB,EAAM,aAAe,EAAkB,QAChC,EAEX,SAAa,UAAU,YAAc,WACjC,EAAO,UAAU,YAAY,KAAK,MAClC,KAAK,kBAET,EAAa,UAAU,eAAiB,WACpC,KAAK,YAAc,KAAK,eAAiB,EAAkB,QAAU,EAAkB,QAAU,EAAkB,SAEvH,OAAO,eAAe,EAAa,UAAW,cAAe,CACzD,IAAK,WACD,MAAO,MAAK,cAEhB,IAAK,YACD,KAAK,aAAe,EACpB,KAAK,eAAiB,EAAkB,QAClC,KAAK,SAAS,KAAK,SACnB,KAAK,SAAS,KAAK,UAE7B,WAAY,GACZ,aAAc,KAEX,GACT,EAAO,YAAY,QACrB,EAAY,aAAe,IAC5B,EAAc,EAAO,aAAgB,GAAO,YAAc,OAC9D,QAAW,QAAS,KACvB,WACA,AAAC,aACG,MACA,AAAC,aACG,MAAmB,KAAK,eACS,YAC7B,UAAU,EAAa,GACvB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAS,IAAW,KAClE,SAAM,QAAU,EAChB,EAAM,QAAU,EAChB,EAAM,MAAQ,EAAM,MAAM,KAAK,MAC/B,EAAM,aAAe,EAAM,MAAM,MACjC,EAAM,aAAa,GAAG,EAAO,MAAM,OAAO,YAAa,EAAM,aAAc,GAC3E,EAAM,YAAY,EAAM,aAAa,MAC9B,EAEX,SAAY,UAAU,aAAe,cACjC,KAAK,YAAY,IAErB,EAAY,UAAU,YAAc,YAChC,KAAK,SAAS,EAAO,KAAK,QAAU,KAAK,UAE7C,EAAY,UAAU,YAAc,WAChC,EAAO,UAAU,YAAY,KAAK,MAClC,KAAK,aAAa,KAAO,CAAC,KAAK,aAAa,KAC5C,KAAK,MAAM,UAAU,EAAa,YAAa,CAAC,KAAK,aAAa,OAEtE,EAAY,UAAU,QAAU,YAC5B,KAAK,aAAa,IAAI,EAAO,MAAM,OAAO,YAAa,KAAK,aAAc,MAC1E,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,EAAO,YAAY,QACrB,EAAY,YAAc,IAC3B,EAAc,EAAO,aAAgB,GAAO,YAAc,OAC9D,QAAW,QAAS,KACvB,WACA,AAAC,aACG,MACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,kBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,SAAW,MACjB,EAAM,cAAgB,GACtB,EAAM,YAAc,GACpB,EAAM,KAAO,SACb,EAAM,QAAQ,EAAO,GACd,EAEX,SAAc,UAAU,YAAc,WAClC,KAAK,KAAK,kBAEd,EAAc,UAAU,aAAe,WACnC,KAAK,KAAK,sBAEd,EAAc,UAAU,QAAU,cAC9B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GAC9C,KAAK,KAAK,iBACV,KAAK,KAAK,MAAM,OAAS,UACzB,KAAK,KAAK,GAAG,EAAO,MAAM,OAAO,wBAAyB,KAAK,cAAe,MAC9E,KAAK,MAAM,MAAM,GAAG,EAAO,MAAM,OAAO,WAAY,KAAK,iBAAkB,MAC3E,KAAK,IAAI,KAAK,OAElB,EAAc,UAAU,cAAgB,YACpC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,KAAK,WAChC,KAAK,MAAM,MAAM,KAAK,KAAK,UAE/B,AAAI,KAAK,eACL,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,GACP,KAAM,EAAO,KAAK,OAAO,MAAM,IAC/B,SAAU,KAGlB,KAAK,KAAK,EAAY,YAAY,MAAO,KAAM,GAC/C,KAAK,eAAiB,GAE1B,EAAc,UAAU,iBAAmB,cACvC,GAAI,KAAK,gBAAkB,KAAK,iBAAmB,GAC/C,KAAK,eAAiB,KACtB,MAA0B,EAAQ,SAAS,KAAK,MAChD,AAAI,MAAK,cAAgB,IAAS,IAC9B,MAAK,cACL,KAAK,KAAK,EAAO,YAAY,YAAY,QAAS,KAAM,IAE5D,AAAI,KAAK,eAAiB,KAAK,OAC3B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,KAAM,EAAO,KAAK,OAAO,KAAK,IAC9B,SAAU,QAK1B,EAAc,UAAU,YAAc,aAEtC,EAAc,UAAU,cAAgB,oBACpC,MAAI,KAAY,QAAU,GAAU,GACpC,AAAI,IAAY,QAAU,GAAU,GACpC,KAAK,WAAa,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAM,EAAS,GACjE,KAAK,WAAW,MAAQ,EAAO,QAAQ,MAAM,OAC7C,KAAK,WAAW,UAAU,GAAK,IAC/B,KAAK,WAAW,EAAI,KAAK,KAAK,EAAI,EAClC,KAAK,WAAW,EAAI,KAAK,KAAK,EAAI,EAClC,KAAK,IAAI,KAAK,YACP,KAAK,YAEhB,EAAc,UAAU,QAAU,kBAC9B,MAAI,KAAY,QAAU,GAAU,GACpC,AAAI,IAAY,QAAU,GAAU,GACpC,KAAK,KAAO,KAAK,MAAM,KAAK,KAAK,CAC7B,KAAM,EACN,MAAO,IAEX,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,KAAK,KAAK,EAAI,EAC5B,KAAK,KAAK,EAAI,KAAK,KAAK,EAAI,EAC5B,KAAK,IAAI,KAAK,MACP,KAAK,MAET,GACT,EAAO,YAAY,WACrB,EAAY,cAAgB,IAC7B,EAAc,EAAO,aAAgB,GAAO,YAAc,OAC9D,QAAW,QAAS,KACvB,SACA,AAAC,aACG,MAAmC,WAC/B,gBACI,KAAK,mBAAqB,IAC1B,KAAK,uBAAyB,GAC9B,KAAK,cAAgB,EACrB,KAAK,MAAQ,EACb,MAAsB,CAClB,OAAQ,KAAK,MAAM,QAAQ,KAC3B,gBAAiB,GACjB,mBAAoB,IACpB,iBAAkB,GAClB,eAAgB,GAChB,gBAAiB,GACjB,cAAe,GACf,kBAAmB,IACnB,SAAU,KACV,iBAAkB,GAEtB,KAAK,SAAW,SAAS,SAAS,GAAI,GAAkB,GACxD,KAAK,iBAAmB,GAAI,QAAO,KAAK,UAE5C,SAAc,UAAU,oBAAsB,WAC1C,KAAK,MAAM,MAAM,GAAG,cAAe,KAAK,UAAW,MACnD,KAAK,MAAM,MAAM,GAAG,YAAa,KAAK,QAAS,MAC/C,KAAK,MAAM,MAAM,GAAG,cAAe,KAAK,KAAM,OAElD,EAAc,UAAU,uBAAyB,WAC7C,KAAK,MAAM,MAAM,IAAI,cAAe,KAAK,UAAW,MACpD,KAAK,MAAM,MAAM,IAAI,YAAa,KAAK,QAAS,MAChD,KAAK,MAAM,MAAM,IAAI,cAAe,KAAK,KAAM,OAEnD,EAAc,UAAU,UAAY,YAChC,KAAK,UAAY,EAAQ,GACzB,KAAK,OAAS,KAAK,MAAM,MAAM,EAC/B,KAAK,OAAS,KAAK,MAAM,MAAM,EAC/B,KAAK,QAAU,EAAQ,QACvB,KAAK,QAAU,EAAQ,QACvB,KAAK,YAAc,GAEnB,KAAK,UAAY,KAAK,SACtB,KAAK,UAAY,KAAK,UACtB,KAAK,UAAY,KAAK,WAAa,KAAK,UAAY,KAAK,WAAa,GAE1E,EAAc,UAAU,eAAiB,WACrC,MAAa,KAAK,SAAS,OAC3B,SAAO,UAAU,KAAK,kBACf,EAAO,QAAU,GAAK,EAAO,QAAU,EAAO,OAAS,KAAK,iBAAiB,QAExF,EAAc,UAAU,eAAiB,WACrC,MAAa,KAAK,SAAS,OAC3B,SAAO,UAAU,KAAK,kBACf,EAAO,QAAU,GAAK,EAAO,QAAU,EAAO,MAAQ,KAAK,iBAAiB,OAEvF,EAAc,UAAU,KAAO,YAC3B,MAAQ,EAAQ,IACR,EAAQ,EAChB,GAAI,CAAC,KAAK,YACN,OAEJ,GAAI,KAAK,YAAc,EAAQ,GAC3B,OAEJ,KAAK,IAAM,KAAK,SAChB,MAAc,KAAK,IAAM,KAAK,UAC9B,KAAK,UAAY,KAAK,IACtB,MAAa,IACA,EACb,GAAI,KAAK,MAAM,GACX,OAEJ,MAAU,KAAK,SAAS,OACxB,AAAI,KAAK,SAAS,kBACd,GAAS,EAAI,KAAK,OAClB,AAAI,IAAW,GACX,MAAK,SAAW,IAEpB,KAAK,OAAS,EACd,KAAK,UAAY,GAAQ,KAAO,EAAW,GAAI,IAAY,GAAM,KAAK,UACtE,EAAI,UAAU,EAAI,QAAU,EAAQ,EAAI,UAE5C,AAAI,KAAK,SAAS,gBACd,GAAU,GAAI,KAAK,QAAU,KAAK,SAAS,iBAC3C,AAAI,IAAW,GACX,MAAK,SAAW,IAEpB,KAAK,OAAS,EACd,KAAK,UAAY,GAAQ,KAAO,EAAW,GAAI,IAAY,GAAM,KAAK,UACtE,EAAI,UAAU,EAAI,QAAS,EAAI,QAAU,IAE7C,KAAK,iBAAiB,EAAQ,GAC9B,KAAK,cAAgB,KAAK,UAE9B,EAAc,UAAU,iBAAmB,cACvC,GAAI,MAAO,MAAK,SAAS,UAAa,WAClC,OAEJ,MAAc,KAAK,iBAAmB,EAAS,IACjC,KAAK,iBAAmB,EAAS,EAC/C,KAAK,SAAS,SAAS,EAAS,IAEpC,EAAc,UAAU,MAAQ,YAC5B,MAAQ,MAAK,IAAM,KAAK,UAAY,KAAK,oBACrC,KAAK,IAAI,EAAQ,QAAU,KAAK,SAAW,KAAK,wBAChD,KAAK,IAAI,EAAQ,QAAU,KAAK,SAAW,KAAK,wBAExD,EAAc,UAAU,QAAU,WAK9B,GAJA,KAAK,UAAY,KACjB,KAAK,YAAc,GACnB,KAAK,YAAc,GACnB,KAAK,YAAc,GACf,CAAC,KAAK,SAAS,gBACf,OAEJ,KAAK,IAAM,KAAK,SAChB,MAAU,KAAK,SAAS,OACxB,AAAI,KAAK,cACL,CAAI,MAAK,UAAY,IAAM,KAAK,UAAY,MACxC,MAAK,WAAa,GAAM,KAAK,UAC7B,KAAK,QAAU,KAAK,MAAM,EAAI,QAAU,KAAK,YAC7C,KAAK,YAAc,IAEvB,AAAI,MAAK,UAAY,IAAM,KAAK,UAAY,MACxC,MAAK,WAAa,GAAM,KAAK,UAC7B,KAAK,QAAU,KAAK,MAAM,EAAI,QAAU,KAAK,YAC7C,KAAK,YAAc,KAG3B,AAAK,KAAK,cACN,MAAK,kBAAoB,KAAK,IAAI,KAAK,gBACvC,KAAK,kBAAoB,KAAK,IAAI,KAAK,gBACvC,AAAI,KAAK,SAAS,kBAAqB,MAAK,kBAAoB,IAAO,CAAC,KAAK,eACzE,MAAK,YAAc,IAEvB,AAAI,KAAK,SAAS,gBAAmB,MAAK,kBAAoB,IAAO,CAAC,KAAK,eACvE,MAAK,YAAc,MAI/B,EAAc,UAAU,OAAS,WAC7B,MAAoB,KAAK,SAAW,KAAK,cACzC,AAAI,EAAgB,IAChB,MAAK,UAAY,EACjB,KAAK,UAAY,GAErB,KAAK,QAAU,KAAK,SAAW,KAAK,UACpC,KAAK,kBAAoB,KAAK,IAAI,KAAK,gBACvC,KAAK,kBAAoB,KAAK,IAAI,KAAK,gBACvC,MAAY,IACF,KAAK,SAAS,OACxB,AAAI,KAAK,aAAe,KAAK,aAAe,GACxC,GAAQ,CAAC,KAAK,WAAa,KAAK,IAAI,CAAC,KAAK,QAAU,KAAK,SAAS,oBAClE,AAAI,KAAK,kBAAqB,GAAQ,IAAO,EAAQ,KACjD,EAAI,UAAU,KAAK,QAAU,EAAO,EAAI,SAGxC,MAAK,YAAc,GACnB,EAAI,UAAU,KAAK,QAAS,EAAI,WAGxC,AAAI,KAAK,aAAe,KAAK,aAAe,GACxC,GAAQ,CAAC,KAAK,WAAa,KAAK,IAAI,CAAC,KAAK,QAAU,KAAK,SAAS,oBAClE,AAAI,KAAK,kBAAqB,GAAQ,IAAO,EAAQ,KACjD,EAAI,UAAU,EAAI,QAAS,KAAK,QAAU,GAG1C,MAAK,YAAc,GACnB,EAAI,UAAU,EAAI,QAAS,KAAK,WAGxC,AAAI,CAAC,KAAK,aAAe,CAAC,KAAK,aAC3B,MAAK,SAAW,IAEpB,AAAI,KAAK,SAAS,iBAAmB,KAAK,kBAAoB,IAC1D,MAAK,SAAW,GAChB,KAAK,WAAa,EAClB,KAAK,YAAc,GACnB,EAAI,UAAU,EAAI,QAAU,KAAK,eAAgB,EAAI,SACrD,KAAK,gBAAkB,KAAK,SAAS,mBAEzC,AAAI,KAAK,SAAS,eAAiB,KAAK,kBAAoB,IACxD,MAAK,SAAW,GAChB,KAAK,YAAc,GACnB,EAAI,UAAU,EAAI,QAAS,EAAI,QAAU,KAAK,gBAC9C,KAAK,gBAAkB,KAAK,SAAS,oBAG7C,EAAc,UAAU,OAAS,WAC7B,MAAI,cAAe,YAAY,IACpB,YAAY,MAEhB,KAAK,OAEhB,EAAc,UAAU,WAAa,WACjC,MAAO,IAEX,EAAc,UAAU,YAAc,WAClC,KAAK,YAAc,GACnB,KAAK,YAAc,GACnB,KAAK,eAAiB,EACtB,KAAK,eAAiB,GAEnB,KAEX,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,UACA,AAAC,aACG,MAAkC,WAC9B,cAEA,SAAa,mBAAqB,cAC9B,MAAa,EAAM,eACE,YACjB,EACI,OAAQ,OAAO,KAAK,QAAQ,EAAG,EAAM,SAC7B,OAAO,KAAK,QAAQ,EAAG,EAAM,UACzB,EAAM,SAAS,SAAS,EAAG,EAAG,EAAM,QAAQ,WACnD,EAAM,MAAQ,KACvB,MAAO,GAAI,MAAM,EAAI,EAAO,EAAG,EAAI,EAAO,IAE9C,MAAO,CACH,eAAgB,IAGxB,EAAa,sBAAwB,gBACjC,AAAI,IAAa,QAAU,GAAW,KACtC,AAAI,IAAc,QAAU,GAAY,IACxC,MAAa,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,KAC3B,CAAE,OAAQ,EAAQ,KAAM,OAAQ,SAAU,KACvC,YACd,MAAc,EAAS,UACR,EAAQ,OAAS,EAAQ,OAAO,EAAI,EAAQ,EAAE,gBAC9C,EAAQ,OAAS,EAAQ,OAAO,EAAI,EAAQ,EAAE,cAC7D,MAAO,MAAK,MAAM,EAAS,EAAI,EAAU,EAAS,EAAI,MAEhC,EACpB,CACE,aAAc,cACV,MAAe,EAAQ,SACvB,EAAS,QAAU,OAAO,KAAK,IAAI,QAAQ,EAAG,EAAS,OAAO,UAGpE,GACN,MAAO,UAAS,SAAS,GAAI,GAAsB,CAAE,SAAU,EAAU,MAAO,CACxE,OAAQ,YACJ,MAAO,GAAY,GAAY,OAAO,KAAK,aAEhD,OAAQ,CACP,OAAQ,YACJ,MAAQ,GAAY,GAAY,KAAK,GAAK,GAAK,OAAO,KAAK,gBAIpE,KAEX,EAAM,aAAe,IACtB,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAAoC,WAChC,gBACI,KAAK,QAAU,EACf,KAAK,MAAQ,EACb,KAAK,QAAU,EACf,KAAK,KAAO,KAAK,iBAAiB,KAAK,QAAQ,YAEnD,SAAe,UAAU,iBAAmB,YACxC,MAAY,OACS,YACjB,MAAO,OAAO,IAAU,WAE5B,MAAO,OAAM,GACR,KAAK,GACL,IAAI,WAAc,MAAO,GAAM,oBAC/B,OAAO,GACP,IAAI,YACL,SAAU,OAAS,GACZ,KAGf,EAAe,UAAU,gBAAkB,WACvC,YAAK,UACE,KAAK,MAAM,MAAM,OAAO,SAAS,SAAS,GAAI,KAAK,QAAQ,iBAAkB,CAAE,IAAK,KAAK,QAAQ,OAAS,IAAM,KAAK,QAAQ,WAAY,OAAQ,KAAK,MAAM,MAAM,cAAc,KAAK,QAAQ,MAAO,KAAK,QAAQ,YAE5N,EAAe,UAAU,YAAc,WACnC,MAAW,KAAK,KAAK,KAAK,YAAkB,MAAO,GAAK,SAAW,KACnE,MAAK,IACD,GAAO,KAAK,kBACZ,KAAK,KAAK,KAAK,GACF,GAAa,KAAK,QAAQ,KAA0C,KAAK,KAAK,QAE/F,EAAK,OAAS,GACP,GAEX,EAAe,UAAU,cAAgB,YACrC,EAAK,OAAS,IAElB,EAAe,UAAU,WAAa,WAClC,KAAK,KAAK,QAAQ,YAAkB,MAAQ,GAAK,OAAS,MAE9D,EAAe,UAAU,SAAW,WAChC,MAAgB,KAAK,KAAK,OAAO,YAAkB,MAAO,GAAK,SAAW,SACxD,KAAK,KAAK,OAAS,IACtB,KAAK,KACf,IAAI,YACL,MAAO,GAAK,IAAM,KAAO,EAAK,OAAO,aAEpC,KAAK,MACV,MAAO,gBAAqB,EAAY,kBAAuB,EAAc,eAAoB,KAAK,KAAK,OAAS,0CAAkD,EAAW,SAErL,EAAe,UAAU,QAAU,WAC/B,KAAK,KAAK,QAAQ,YAAkB,MAAO,GAAK,YAChD,KAAK,KAAO,MAET,KAEX,EAAM,eAAiB,IACxB,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAA6B,WACzB,cAEA,SAAQ,eAAiB,WACrB,MAAI,WAAY,SAAS,SACd,SAAS,SAEb,MAEX,EAAQ,YAAc,WAElB,UADuB,KACT,EAAG,EAAK,UAAU,OAAQ,IACpC,EAAiB,GAAM,UAAU,GAErC,MAAO,GAAQ,cAAc,eAAe,EAAkB,CAAC,gBAEnE,EAAQ,cAAgB,YACpB,MAAkB,EAAQ,iBAC1B,MAAI,GACO,EAAa,KAAK,YACrB,MAAO,GAAY,SAAS,KAG7B,IAEX,EAAQ,SAAW,WACf,IACI,MAAO,QAAO,OAAS,OAAO,aAG9B,MAAO,KAGf,EAAQ,SAAW,YACf,MAAqB,EAAK,QAAQ,OAAQ,OAAO,QAAQ,OAAQ,SACrD,GAAI,QAAO,SAAW,EAAiB,eACrC,EAAM,KAAK,SAAS,QAClC,MAAO,KAAY,KAAO,KAAO,mBAAmB,EAAQ,GAAG,QAAQ,MAAO,OAElF,EAAQ,YAAc,cAClB,AAAI,IAAa,QAAU,GAAW,GACtC,MAAY,KAAK,SAAS,GAC1B,GAAI,GACA,MAAU,SAAS,GACnB,MAAO,OAAM,GAAO,EAAW,EAEnC,MAAO,IAEX,EAAQ,cAAgB,cACpB,AAAI,IAAa,QAAU,GAAW,GACtC,MAAY,KAAK,SAAS,GAC1B,GAAI,GACA,MAAU,WAAW,GACrB,MAAO,OAAM,GAAO,EAAW,EAEnC,MAAO,IAEX,EAAQ,aAAe,cACnB,AAAI,IAAkB,QAAU,GAAgB,KAChD,MAAY,EAAQ,SAAS,GAC7B,MAAO,CAAC,CAAE,IAAS,IAAU,IAE1B,KAEX,EAAM,QAAU,IACjB,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAA+B,WAC3B,cAEA,SAAU,SAAW,WACjB,MAAoB,OAAO,KAAK,GAChC,EAAc,QAAQ,YAClB,GAAI,IAAe,WACf,OAEJ,GAAI,EAAW,WAAW,KACtB,OAEJ,EAAU,QAGlB,EAAU,WAAa,WACnB,MAAU,CAAC,QAAS,cAAe,gBACxB,GACX,EAAI,QAAQ,YACR,AAAI,GACA,EAAK,KAAK,EAAK,aAItB,YACG,EAAI,QAAQ,YACR,GAAI,EAAK,eAAe,UACpB,OAEJ,OAAO,eAAe,EAAM,SAAU,CAClC,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO,WACH,KAAK,WAAW,YAAY,YAIzC,IAEA,KAEX,EAAM,UAAY,IACnB,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAAuC,WACnC,cAEA,SAAkB,OAAS,WACvB,MAAoB,OAAO,KAAK,GAChC,EAAc,QAAQ,YAClB,AAAI,IAAW,UACX,EAAkB,QAI9B,EAAkB,qBAAuB,WACrC,MAAuB,YACnB,MAAkB,KAAK,0BACvB,SAAM,GAAQ,KAAyB,EAAM,CAAE,EAAG,EAAG,EAAG,GACxD,EAAI,EAAI,EAAY,GACpB,EAAI,EAAI,EAAY,GACb,KAGG,CACV,OAAO,YAAY,UACnB,OAAO,YAAY,MACnB,OAAO,YAAY,OACnB,OAAO,YAAY,SACnB,OAAO,YAAY,OACrB,QAAQ,YACN,EAAM,UAAU,iBAAmB,KAG3C,EAAkB,cAAgB,WAC9B,MAAW,WACP,KAAK,QAAU,GACf,KAAK,OAAS,MAEL,WACT,KAAK,QAAU,GACf,KAAK,OAAS,MAGJ,CACV,OAAO,YAAY,UACnB,OAAO,YAAY,MACnB,OAAO,YAAY,OACnB,OAAO,YAAY,SACnB,OAAO,YAAY,MACnB,OAAO,YAAY,KACnB,OAAO,YAAY,WACnB,OAAO,YAAY,YACrB,QAAQ,YACN,EAAM,UAAU,KAAO,EACvB,EAAM,UAAU,OAAS,KAGjC,EAAkB,gBAAkB,WAChC,OAAO,YAAY,UAAU,UAAU,UAAY,gBAC/C,AAAI,MAAO,IAAe,aACtB,GAAa,GAEjB,AAAI,MAAO,IAAa,aACpB,GAAW,KAAK,QAEpB,MAAY,KAAK,KAAK,MAAM,EAAY,GACxC,cAAO,QAAQ,UAAU,EAAO,GACzB,OAGf,EAAkB,uBAAyB,WACvC,MAAyB,cACrB,MAAc,EAAe,KACf,EAAe,GAC7B,MAAO,GAAU,KAEA,cACjB,MAAI,KAAY,QAAU,GAAU,GAC7B,SAAS,EAAU,MAAM,CAAC,KAErC,OAAO,WAAW,iBAAiB,UAAU,cAAgB,cACzD,MAAgB,KAAK,KAAK,SAAS,IAAI,GAAU,kBACvB,EAAU,OAAO,YAAuB,MAAO,GAAU,SAAS,KAAY,KAAK,GAC7G,MAAO,GAAoB,IAAI,YAC3B,MAAO,CACH,IAAK,EACL,MAAO,OAKvB,EAAkB,WAAa,WAC3B,OAAO,KAAK,KAAO,YACf,MAAO,IAAS,EAAI,EAAI,IAE5B,OAAO,KAAK,UAAY,oBACpB,MAAO,GAAO,GAAI,GAAO,GAAK,GAAQ,GAAK,KAGnD,EAAkB,0BAA4B,WAC1C,OAAO,KAAK,oBAAoB,UAAU,KAAO,WAC7C,MAAO,MAAK,OAAS,IAEzB,OAAO,KAAK,oBAAoB,UAAU,WAAa,gBACnD,AAAI,IAAkB,QAAU,GAAgB,KAChD,MACA,EACI,GAAO,KAAK,KAAK,SACZ,IAAc,GAAQ,EAAE,EAAgB,GACjD,MAAO,IAEX,OAAO,KAAK,oBAAoB,UAAU,mBAAqB,gBAC3D,AAAI,IAAkB,QAAU,GAAgB,KAChD,MACA,EACI,GAAO,KAAK,KAAK,SACZ,EAAW,SAAS,IAAS,EAAE,EAAgB,GACxD,MAAO,KAGf,EAAkB,cAAgB,WAC9B,MAAc,OAAO,YAAY,kBAAkB,UACnD,EAAQ,iBAAmB,YACvB,MAAY,KACZ,MAAO,GAAS,IAAI,YAAmB,MAAO,GAAM,SAAS,MAEjE,EAAQ,OAAS,gBACb,MAAO,IAAI,QAAO,YAAY,OAAO,KAAK,MAAO,EAAS,EAAO,IAErE,EAAQ,aAAe,kBACnB,MAAO,IAAI,QAAO,YAAY,aAAa,KAAK,MAAO,EAAS,EAAS,EAAS,IAEtF,EAAQ,YAAc,kBAClB,MAAO,IAAI,QAAO,YAAY,YAAY,KAAK,MAAO,EAAS,EAAS,EAAS,KAGzF,EAAkB,gBAAkB,WAChC,MAAe,YACX,MAAO,OAAO,GAAO,UAAa,aAEtC,OAAO,YAAY,WAAW,UAAU,SAAW,YAC/C,GAAI,EAAS,QAAU,GACnB,OAEJ,KAAK,SAAS,GACd,KAAK,SAAS,EAAQ,KAAK,QAE/B,OAAO,YAAY,WAAW,UAAU,UAAY,YAChD,GAAI,EAAS,QAAU,GACnB,OAEJ,KAAK,SAAS,KAAK,IAAI,EAAG,EAAY,KAAK,UAE/C,OAAO,YAAY,WAAW,UAAU,MAAQ,cAC5C,GAAI,EAAS,QAAU,GACnB,OAEJ,MAAa,EAAW,KAAK,QAChB,EAAY,KAAK,OAC9B,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAQ,IAErC,OAAO,YAAY,WAAW,UAAU,UAAY,YAChD,GAAI,EAAS,QAAU,GACnB,OAEJ,KAAK,SAAS,KAAK,IAAI,EAAG,EAAW,KAAK,SAE9C,OAAO,YAAY,WAAW,UAAU,WAAa,YACjD,GAAI,EAAS,QAAU,GACnB,OAEJ,KAAK,SAAS,KAAK,IAAI,EAAG,EAAY,KAAK,UAE/C,OAAO,YAAY,WAAW,UAAU,QAAU,cAC9C,GAAI,EAAS,QAAU,GACnB,OAEJ,MAAa,EAAW,KAAK,QAChB,EAAY,KAAK,OAC9B,KAAK,MAAQ,KAAK,IAAI,EAAQ,KAGtC,EAAkB,gBAAkB,WAChC,OAAO,eAAe,OAAO,YAAY,WAAW,UAAW,MAAO,CAClE,IAAK,WACD,MAAO,QAAO,QAAQ,OAAO,OAAO,OAExC,IAAK,YACD,MAAO,QAAO,QAAQ,OAAO,OAAO,KAAM,MAGlD,OAAO,eAAe,OAAO,YAAY,WAAW,UAAW,QAAS,CACpE,IAAK,WACD,MAAO,QAAO,QAAQ,OAAO,SAAS,OAE1C,IAAK,YACD,MAAO,QAAO,QAAQ,OAAO,SAAS,KAAM,MAGpD,OAAO,eAAe,OAAO,YAAY,WAAW,UAAW,SAAU,CACrE,IAAK,WACD,MAAO,QAAO,QAAQ,OAAO,UAAU,OAE3C,IAAK,YACD,MAAO,QAAO,QAAQ,OAAO,UAAU,KAAM,MAGrD,OAAO,eAAe,OAAO,YAAY,WAAW,UAAW,OAAQ,CACnE,IAAK,WACD,MAAO,QAAO,QAAQ,OAAO,QAAQ,OAEzC,IAAK,YACD,MAAO,QAAO,QAAQ,OAAO,QAAQ,KAAM,OAIvD,EAAkB,aAAe,WAC7B,OAAO,OAAO,aAAa,UAAU,oBAAsB,sBACvD,MAAY,OACC,EAAU,QACvB,YAAK,IAAI,EAAQ,GACjB,KAAK,KAAK,OAAO,OAAO,OAAO,SAAU,WACrC,MAAgB,OAAO,YAAY,WAAW,eAAe,EAAM,MAAO,EAAS,EAAU,EAAY,EAAQ,EAAU,GAC3H,AAAI,IAAc,IACD,GAA2B,IAGzC,OAGR,KAEX,EAAM,kBAAoB,IAC3B,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAAsC,WAClC,cAEA,SAAiB,OAAS,WACtB,MAAoB,OAAO,KAAK,GAChC,EAAc,QAAQ,YAClB,AAAI,IAAW,UACX,EAAiB,QAI7B,EAAiB,2BAA6B,WAC1C,MAA8B,YAC1B,YAAK,KAAK,gBAAgB,MAAQ,CAAC,EAC5B,MAEX,OAAO,QAAQ,OAAO,MAAM,UAAU,wBAA0B,EAChE,OAAO,QAAQ,OAAO,OAAO,UAAU,wBAA0B,GAErE,EAAiB,mBAAqB,WAClC,OAAO,QAAQ,OAAO,MAAM,UAAU,gBAAkB,cACpD,MAAc,EAAK,eAAe,KAC1B,EAAQ,OAAO,EAAI,EAAK,UAAU,YAAY,IAC9C,EAAQ,OAAO,EAAI,EAAK,UAAU,YAAY,EACtD,SAAM,GAAQ,KAAyB,EAAO,GAAO,CAAE,EAAG,EAAG,EAAG,GACzD,IAGR,KAEX,EAAM,iBAAmB,IAC1B,OAAU,OAAQ,KACrB,UACA,AAAC,aACG,MAAgC,WAC5B,cAEA,SAAW,KAAO,WACd,MAAY,UAAU,UAAU,MAAM,2BACtC,GAAI,EACA,MAAQ,GAAM,KAAO,WAAa,CAAC,EAAM,IAAM,IACvC,EAAM,KAAO,QAAU,CAAC,EAAM,IAAM,GAIhD,MAAQ,SAAS,cAAc,UAC/B,MAAO,GAAE,UACH,EAAE,UAAU,cAAc,QAAQ,oBAAsB,EACxD,IAEV,EAAW,cAAgB,WACvB,MAAS,UAAU,YACV,CACL,QAAS,GACT,SAAU,GACV,QAAS,GACT,UAAW,GACX,QAAS,GACT,OAAQ,GACR,SAAU,GACV,IAAK,GACL,WAAY,EACZ,KAAM,GACN,OAAQ,GACR,OAAQ,GACR,MAAO,GACP,MAAO,GACP,KAAM,GACN,WAAY,GACZ,WAAY,EACZ,OAAQ,GACR,QAAS,GACT,aAAc,IAElB,AAAI,UAAU,KAAK,GACf,EAAG,QAAU,GAEZ,AAAI,SAAS,KAAK,IAAO,CAAC,cAAc,KAAK,GAC9C,EAAG,MAAQ,GAEV,AAAI,UAAU,KAAK,GACpB,EAAG,QAAU,GAEZ,AAAI,QAAQ,KAAK,GAClB,EAAG,MAAQ,GAEV,AAAI,kBAAkB,KAAK,GAC5B,GAAG,IAAM,GACT,UAAU,WAAW,MAAM,YAC3B,EAAG,WAAa,SAAS,OAAO,GAAI,IACpC,EAAG,OAAS,EAAG,cAAc,QAAQ,YAAc,GACnD,EAAG,KAAO,EAAG,cAAc,QAAQ,UAAY,IAE9C,AAAI,SAAS,KAAK,IAAO,kBAAkB,KAAK,IAAO,sBAAsB,KAAK,GACnF,EAAG,OAAS,GAIX,AAAI,OAAO,KAAK,IACjB,GAAG,SAAW,IAElB,AAAI,kBAAiB,KAAK,IAAO,YAAY,KAAK,KAC9C,GAAG,QAAU,GACb,EAAG,IAAM,GACT,EAAG,MAAQ,GACX,EAAG,QAAU,GACb,EAAG,aAAe,IAEtB,MAAW,OAAO,KAAK,GACvB,MAAI,GAAG,SAAW,EAAG,OAAU,EAAG,OAAS,CAAC,GAAS,EAAG,WACpD,GAAG,QAAU,IAGjB,AAAI,GAAG,cAAiB,cAAc,KAAK,IAAO,SAAS,KAAK,KAC5D,GAAG,QAAU,IAEV,GAEX,EAAW,OAAS,YAChB,SAAS,GAAW,KAA4B,EAAS,KAAK,gBACvD,EAAO,OAAS,UAAU,gBAAkB,UAAU,eAAiB,GAElF,EAAW,UAAY,WACnB,MAAO,MAAK,gBAAgB,SAEzB,KAEX,EAAM,WAAa,IACpB,OAAU,OAAQ,KACrB,WACA,AAAC,aACG,MACA,AAAC,aACG,MACA,AAAC,aACG,EAAa,OAAY,SACzB,EAAa,OAAY,gBACzB,EAAa,OAAY,YACzB,EAAa,OAAY,cACzB,EAAa,OAAY,cACzB,EAAa,OAAY,SACzB,EAAa,KAAU,gBACvB,EAAa,MAAW,YACxB,EAAa,MAAW,cACxB,EAAa,MAAW,cACxB,EAAa,KAAU,WACvB,EAAa,KAAU,WACvB,EAAa,KAAU,eACvB,EAAa,QAAa,cAC1B,EAAa,KAAU,WACvB,EAAa,OAAY,aACzB,EAAa,QAAa,UAC1B,EAAa,WAAgB,eAC7B,EAAa,YAAiB,WAC9B,EAAa,YAAiB,aAC9B,EAAa,YAAiB,aAC9B,EAAa,WAAgB,UAC7B,EAAa,WAAgB,UAC7B,EAAa,WAAgB,cAC7B,EAAa,cAAmB,aAChC,EAAa,WAAgB,UAC7B,EAAa,aAAkB,YAC/B,EAAa,YAAiB,gBAC9B,EAAa,aAAkB,YAC/B,EAAa,aAAkB,cAC/B,EAAa,aAAkB,cAC/B,EAAa,YAAiB,WAC9B,EAAa,YAAiB,WAC9B,EAAa,YAAiB,eAC9B,EAAa,eAAoB,cACjC,EAAa,YAAiB,WAC9B,EAAa,cAAmB,aAChC,EAAa,cAAmB,kBAChC,EAAa,eAAoB,cACjC,EAAa,eAAoB,gBACjC,EAAa,eAAoB,gBACjC,EAAa,cAAmB,aAChC,EAAa,cAAmB,aAChC,EAAa,cAAmB,iBAChC,EAAa,iBAAsB,gBACnC,EAAa,cAAmB,aAChC,EAAa,gBAAqB,iBACnC,EAAe,EAAK,cAAiB,GAAK,aAAe,OAC7D,EAAO,EAAO,MAAS,GAAO,KAAO,OACzC,QAAW,QAAS,KACvB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,cAAO,eAAe,EAAU,UAAW,WAAY,CACnD,IAAK,WACD,MAAO,MAAK,MAAM,UAEtB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAU,UAAW,gBAAiB,CACxD,IAAK,WACD,MAAO,MAAK,MAAM,eAEtB,WAAY,GACZ,aAAc,KAElB,EAAU,UAAU,KAAO,YACvB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,OAEhD,EAAU,UAAU,OAAS,aAE7B,EAAU,UAAU,OAAS,aAE7B,EAAU,UAAU,QAAU,YAC1B,KAAK,KAAK,aAAa,KAAK,MAAM,IAAK,IAE3C,EAAU,UAAU,UAAY,gBAC5B,KAAK,SAAS,GAAG,WAAa,EAAK,EAAU,IAEjD,EAAU,UAAU,YAAc,gBAC9B,KAAK,SAAS,KAAK,WAAa,EAAK,EAAU,IAEnD,EAAU,UAAU,SAAW,aAExB,GACT,OAAO,OACT,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAS,cAAmB,gBAC5B,EAAS,WAAgB,aACzB,EAAS,UAAe,YACxB,EAAS,eAAoB,iBAC7B,EAAS,gBAAqB,kBAC9B,EAAS,OAAY,SACrB,EAAS,KAAU,OACnB,EAAS,UAAe,YACxB,EAAS,WAAgB,aACzB,EAAS,eAAoB,iBAC7B,EAAS,cAAmB,gBAC5B,EAAS,SAAc,WACvB,EAAS,cAAmB,gBAC5B,EAAS,aAAkB,eAC3B,EAAS,gBAAqB,kBAC9B,EAAS,kBAAuB,oBAChC,EAAS,kBAAuB,oBAChC,EAAS,aAAkB,eAC3B,EAAS,iBAAsB,qBAChC,EAAW,EAAK,UAAa,GAAK,SAAW,OACjD,MAAS,MAAO,KACnB,UACA,AAAC,aACG,MAAoC,WAChC,cACI,KAAK,MAAQ,EACb,KAAK,eAAiB,IACtB,KAAK,aAAe,EACpB,KAAK,MAAQ,EACb,KAAK,SAAW,KAAK,MAAM,KAAK,KAChC,KAAK,KAAO,SAAS,cAAc,QACnC,KAAK,KAAK,GAAK,QACf,KAAK,KAAK,iBAAiB,QAAS,KAAK,iBAAiB,KAAK,OAC/D,SAAS,KAAK,YAAY,KAAK,MAC/B,KAAK,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,OAAQ,KAAK,SAAU,MAC/D,KAAK,WACL,KAAK,cAET,SAAe,UAAU,iBAAmB,WACxC,AAAI,KAAK,KAAK,MAAM,UAAY,IAC5B,KAAK,KAAK,MAAM,QAAU,IAG1B,KAAK,KAAK,MAAM,QAAU,KAGlC,EAAe,UAAU,SAAW,WAChC,KAAK,KAAK,MAAM,KAAO,KAAK,MAAM,MAAM,aAAa,KAAO,MAEhE,EAAe,UAAU,YAAc,WACnC,MAAY,OACG,KAAK,MAAM,IAAI,SAC9B,GAAI,YAAoB,QAAO,SAAS,MAAM,eAC1C,KAAK,MAAM,KAAK,OAAO,GAAG,OAAO,KAAK,OAAO,UAAW,WACpD,EAAM,aAAe,IAEzB,MAAS,sBAAsB,UAC/B,EAAG,mBAAqB,WACpB,EAAM,gBAEV,EAAG,eAAiB,sBAAsB,UAAU,WACpD,EAAG,WAAa,gBACZ,KAAK,qBACL,KAAK,eAAe,EAAM,EAAO,MAI7C,EAAe,UAAU,OAAS,YAC9B,KAAK,OAAS,EACd,AAAI,KAAK,OAAS,KAAK,gBACnB,MAAK,OAAS,KAAK,eACnB,KAAK,gBAGb,EAAe,UAAU,YAAc,WACnC,MAAU,QAAU,KAAK,MAAM,KAAK,SAAS,aAC7B,OAAS,KAAK,eACjB,EAAM,MAAQ,EAC3B,KAAK,KAAK,UAAY,GAEnB,KAEX,EAAM,eAAiB,IACxB,OAAU,OAAQ,KACrB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAqB,MAAW,QAChC,EAAqB,SAAc,aACpC,EAAuB,EAAK,sBAAyB,GAAK,qBAAuB,OACrF,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqC,YACjC,UAAU,EAAiB,GAC3B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,cAAgB,GACtB,EAAM,KAAO,mBACb,EAAM,aAAe,EAAM,MAAM,KAAK,MACtC,EAAM,QAAQ,GACd,EAAM,cAAc,GACpB,EAAM,SACC,EAEX,SAAgB,UAAU,YAAc,gBACpC,GAAI,KAAK,eACL,KAAK,KAAK,EAAK,qBAAqB,MAAO,KAAM,EAAiB,EAAa,GAC/E,KAAK,KAAK,EAAK,qBAAqB,SAAU,KAAM,EAAiB,EAAa,GAClF,MAAkB,KAAK,aAAa,SAAS,GAC7C,EAAY,MAAM,MAAM,EAAa,GACrC,OAEJ,KAAK,SACL,KAAK,KAAK,EAAK,qBAAqB,MAAO,KAAM,EAAiB,EAAa,GAC/E,KAAK,SACL,KAAK,cACL,KAAK,SACL,KAAK,WAAW,EAAiB,EAAa,IAElD,EAAgB,UAAU,OAAS,WAC/B,KAAK,WAAW,aAAe,EAAK,OAAO,WAAa,EACxD,KAAK,WAAW,cAAgB,EAAK,OAAO,YAAc,EAC1D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,iBAChC,KAAK,UAAU,EAAI,EAAK,OAAO,gBAC/B,KAAK,UAAU,EAAI,EAAK,OAAO,kBAEnC,EAAgB,UAAU,QAAU,YAChC,KAAK,UAAY,KAAK,MAAM,KAAK,MAAM,CAAE,IAAK,GAAO,IAAK,EAAO,WAAY,MAAO,EAAO,iBAE/F,EAAgB,UAAU,cAAgB,YACtC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,WAAY,EAAO,qBACvE,KAAK,WAAW,QAAQ,EAAO,WAC/B,KAAK,IAAI,KAAK,aAElB,EAAgB,UAAU,YAAc,WACpC,AAAI,KAAK,WAAW,MAChB,KAAK,WAAW,KAAK,UAEzB,KAAK,WAAW,KAAO,KAAK,UAAU,mBACtC,KAAK,WAAW,KAAK,YAAc,IAEvC,EAAgB,UAAU,OAAS,WAC/B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,OAGvC,EAAgB,UAAU,WAAa,gBACnC,MAAY,KACZ,KAAK,UAAU,MAAQ,KAAK,aAAa,KAAK,WAC9C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,WAAY,WACR,EAAM,eAAe,EAAc,EAAU,OAIzD,EAAgB,UAAU,eAAiB,gBACvC,MAAmB,KAAK,aAAa,SAAS,GAC9C,EAAa,OAAO,KAAK,OAAO,OAAO,OAAO,SAAU,KAAK,aAAa,KAAK,KAAM,EAAiB,EAAa,IACnH,EAAa,MAAM,MAAM,EAAa,IAE1C,EAAgB,UAAU,aAAe,cACrC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,WAAY,WACR,EAAM,OACN,EAAM,KAAK,EAAK,qBAAqB,SAAU,EAAO,EAAc,OAIhF,EAAgB,UAAU,aAAe,YACrC,MAAa,EAAK,OAAO,WAAa,EAAK,QAC9B,EAAK,OAAO,YAAc,EAAK,SAChC,KAAK,IAAI,EAAQ,GAC7B,MAAO,IAEJ,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA2C,YACvC,UAAU,EAAuB,GACjC,kBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAK,IAAU,KAC1D,SAAM,aAAe,EAAM,MAAM,KAAK,MAC/B,EAEX,SAAsB,UAAU,YAAc,gBAC1C,GAAI,KAAK,eACL,KAAK,KAAK,EAAK,qBAAqB,MAAO,KAAM,EAAiB,GAClE,KAAK,KAAK,EAAK,qBAAqB,SAAU,KAAM,EAAiB,GACrE,MAAkB,KAAK,aAAa,SAAS,GAC7C,EAAY,MAAM,MAAM,EAAa,GACrC,OAEJ,KAAK,KAAK,EAAK,qBAAqB,MAAO,KAAM,EAAiB,GAClE,KAAK,SACL,KAAK,OAAO,EAAiB,EAAa,IAE9C,EAAsB,UAAU,OAAS,gBACrC,MAAY,KACZ,KAAK,SACL,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,GACnC,MAAO,EACP,WAAY,WACR,EAAM,eAAe,EAAiB,EAAa,OAI/D,EAAsB,UAAU,eAAiB,gBAC7C,MAAmB,KAAK,aAAa,SAAS,GAC9C,EAAa,OAAO,KAAK,OAAO,OAAO,OAAO,SAAU,KAAK,QAAQ,KAAK,KAAM,EAAiB,IACjG,EAAa,MAAM,MAAM,EAAa,IAE1C,EAAsB,UAAU,QAAU,WACtC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,GACnC,MAAO,EACP,WAAY,WACR,EAAM,WAIlB,EAAsB,UAAU,OAAS,WACrC,KAAK,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GAC1E,KAAK,EAAI,EAAK,OAAO,gBACrB,KAAK,EAAI,EAAK,OAAO,kBAEzB,EAAsB,UAAU,QAAU,YACtC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,sBAAwB,IAC9B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAmB,sBAA2B,4BAC/C,EAAqB,EAAK,oBAAuB,GAAK,mBAAqB,KAC9E,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,wBAA0B,GACzB,EAEX,SAAc,UAAU,aAAe,WACnC,KAAK,KAAK,UAAW,sCACrB,KAAK,uBACL,KAAK,oBACL,KAAK,oBACL,KAAK,KAAK,OAAO,OAAO,OAAO,SAAU,KAAK,6BAA8B,MAC5E,KAAK,SAET,EAAc,UAAU,qBAAuB,WAC3C,KAAK,MAAM,cAAe,kCAAmC,oCAC7D,KAAK,MAAM,WAAY,+BAAgC,iCACvD,KAAK,MAAM,eAAgB,mCAAoC,sCAEnE,EAAc,UAAU,kBAAoB,WACxC,KAAK,oBAAoB,EAAK,eAAe,sBAAuB,eAAgB,iBAAkB,yCAA0C,IAChJ,KAAK,oBAAoB,EAAK,eAAe,kBAAmB,WAAY,iBAAkB,yCAA0C,IACxI,KAAK,oBAAoB,EAAK,eAAe,YAAa,WAAY,cAAe,sCAAuC,IAC5H,KAAK,oBAAoB,EAAK,eAAe,gBAAiB,WAAY,iBAAkB,yCAA0C,IACtI,KAAK,oBAAoB,EAAK,eAAe,kBAAmB,eAAgB,oBAAqB,6CACrG,KAAK,oBAAoB,EAAK,eAAe,aAAc,eAAgB,eAAgB,uCAAwC,GACnI,KAAK,oBAAoB,EAAK,eAAe,sBAAuB,eAAgB,wBAAyB,kDAEjH,EAAc,UAAU,kBAAoB,WACxC,KAAK,UAAU,EAAK,aAAa,YACjC,KAAK,UAAU,EAAK,aAAa,YACjC,KAAK,UAAU,EAAK,aAAa,YACjC,KAAK,UAAU,EAAK,aAAa,OACjC,KAAK,UAAU,EAAK,aAAa,OACjC,KAAK,UAAU,EAAK,aAAa,QAErC,EAAc,UAAU,UAAY,cAChC,AAAI,IAAe,QAAU,GAAa,OAC1C,KAAK,MAAM,EAAK,gBAAkB,EAAM,IAAM,IAElD,EAAc,UAAU,6BAA+B,WACnD,KAAK,wBAA0B,GAC/B,KAAK,KAAK,EAAmB,sBAAuB,MACpD,KAAK,qBACL,KAAK,GAAG,OAAO,OAAO,OAAO,cAAe,KAAK,oBAAqB,MACtE,KAAK,SAET,EAAc,UAAU,mBAAqB,WACzC,GAAI,KAAK,MAAM,KAAK,YAAc,EAAK,iBAAiB,aACpD,KAAK,mBACL,OAEJ,KAAK,mBACL,KAAK,UAAU,EAAK,aAAa,WACjC,KAAK,UAAU,EAAK,aAAa,cACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,YACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,qBACjC,KAAK,UAAU,EAAK,aAAa,qBACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,uBACjC,KAAK,UAAU,EAAK,aAAa,MAAO,OACxC,KAAK,UAAU,EAAK,aAAa,WAAY,OAC7C,KAAK,UAAU,EAAK,aAAa,WACjC,KAAK,UAAU,EAAK,aAAa,cACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,wBACjC,KAAK,UAAU,EAAK,aAAa,QACjC,KAAK,UAAU,EAAK,aAAa,WACjC,KAAK,UAAU,EAAK,aAAa,cACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,SACjC,KAAK,UAAU,EAAK,aAAa,WACjC,KAAK,UAAU,EAAK,aAAa,eACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,oBACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,0BAA2B,OAC5D,KAAK,UAAU,EAAK,aAAa,qBACjC,KAAK,UAAU,EAAK,aAAa,qBACjC,KAAK,UAAU,EAAK,aAAa,SACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,oBACjC,KAAK,UAAU,EAAK,aAAa,aACjC,KAAK,UAAU,EAAK,aAAa,cACjC,KAAK,UAAU,EAAK,aAAa,gBACjC,KAAK,UAAU,EAAK,aAAa,4BACjC,KAAK,UAAU,EAAK,aAAa,4BACjC,KAAK,UAAU,EAAK,aAAa,4BACjC,KAAK,UAAU,EAAK,aAAa,iBACjC,KAAK,UAAU,EAAK,aAAa,cACjC,KAAK,UAAU,EAAK,aAAa,gBACjC,KAAK,UAAU,EAAK,aAAa,iBAErC,EAAc,UAAU,iBAAmB,WACvC,KAAK,MAAM,EAAK,aAAa,cAAe,mCAEhD,EAAc,UAAU,oBAAsB,YAC1C,AAAI,IAAQ,EAAK,aAAa,eAC1B,KAAK,MAAM,KAAK,MAAM,wBAGvB,GACT,OAAO,OAAO,cAChB,EAAK,cAAgB,IACtB,MAAS,MAAO,KAMnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAY,UAAU,KAAO,aAE7B,EAAY,UAAU,OAAS,WAC3B,MAAsB,MAAM,QAAQ,aAAa,SACjD,AAAI,GACA,KAAK,kBAGb,EAAY,UAAU,eAAiB,WACnC,KAAK,YAAc,GAAI,OAAM,eAAe,OAEhD,EAAY,UAAU,mBAAqB,WACvC,KAAK,UAAY,GAAI,GAAK,gBAAgB,MAC1C,KAAK,UAAU,OACf,KAAK,IAAI,SAAS,KAAK,YAE3B,EAAY,UAAU,kBAAoB,YACtC,KAAK,gBAAkB,EACvB,KAAK,gBAAgB,QAAU,GAC/B,KAAK,gBAAgB,OAAS,GAC9B,KAAK,IAAI,SAAS,KAAK,kBAE3B,EAAY,UAAU,UAAY,WAC9B,YAAK,OAAS,GAAI,GAAK,cAAc,MACrC,KAAK,IAAI,SAAS,KAAK,QACvB,KAAK,SACE,KAAK,QAEhB,EAAY,UAAU,iBAAmB,WACrC,KAAK,cAAgB,GAAI,GAAK,cAAc,OAEhD,EAAY,UAAU,OAAS,cAC3B,AAAI,KAAK,aACL,KAAK,YAAY,OAAO,IAGhC,EAAY,UAAU,OAAS,WAC3B,AAAI,KAAK,QACL,MAAK,OAAO,MAAQ,EAAK,OAAO,WAAa,EAAK,OAAO,kBACzD,KAAK,OAAO,EAAI,EAAK,OAAO,gBAC5B,KAAK,OAAO,EAAI,EAAK,OAAO,iBAC5B,KAAK,OAAO,WAGb,GACT,OAAO,OACT,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,aACI,IACI,MAAU,mBACV,oBAAa,QAAQ,EAAK,GAC1B,aAAa,WAAW,GACjB,YAGP,MAAO,IAGf,EAAK,wBAA0B,EAC/B,MAAyC,WACrC,cACI,KAAK,KAAO,gBACZ,KAAK,OAAS,EAElB,SAAoB,UAAU,KAAO,WACjC,MAAO,SAAQ,WAEnB,EAAoB,UAAU,UAAY,cACtC,GAAI,MAAO,IAAU,SACjB,aAAa,QAAQ,KAAK,cAAc,GAAM,QAG9C,MAAiB,KAAK,UAAU,GAChC,aAAa,QAAQ,KAAK,cAAc,GAAM,GAElD,MAAO,SAAQ,WAEnB,EAAoB,UAAU,cAAgB,YAC1C,MAAO,MAAK,OAAS,KAAO,GAEhC,EAAoB,UAAU,SAAW,YAErC,MAAO,SAAQ,QAAQ,aAAa,QAAQ,KAAK,cAAc,MAEnE,EAAoB,UAAU,UAAY,YACtC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,IAGtC,SAAM,WAAW,IAAU,EACpB,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAoB,UAAU,WAAa,YACvC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,KAGtC,SAAO,IAAU,OACV,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAoB,UAAU,UAAY,YACtC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,MACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GAED,GADA,EAAQ,EAAG,OACP,IAAU,KACV,MAAO,CAAC,EAAc,QAAQ,QAAQ,KAGtC,MAAO,CAAC,EAAc,QAAQ,QAAQ,IAE1C,MAAO,CAAC,SAK5B,EAAoB,UAAU,UAAY,YACtC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,SAAS,QACtC,GACD,EAAQ,EAAG,OACX,EAAM,KACN,IACI,EAAM,KAAK,MAAM,aAKrB,MAAO,CAAC,EAAc,QAAQ,QAAQ,UAK1D,EAAoB,UAAU,OAAS,YACnC,aAAa,WAAW,KAAK,cAAc,KAE/C,EAAoB,UAAU,MAAQ,WAClC,MAAY,KACZ,cAAO,KAAK,cACP,OAAO,YAAiB,MAAO,GAAI,SAAS,EAAM,UAClD,QAAQ,YACT,aAAa,WAAW,KAErB,QAAQ,WAEZ,KAEX,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KAGnB,SACA,AAAC,aACG,MAAgB,OAAO,OAAO,UAAU,YACxB,OAAO,OAAO,UAAU,YACd,YACtB,UAAU,EAAM,GAChB,aACI,MAAY,IAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAChE,SAAM,UAAY,GAClB,EAAM,wBAA0B,GACzB,EAEX,SAAK,UAAU,KAAO,WAClB,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACA,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GACD,SAAe,EAAK,0BAA4B,OAAO,aAAe,KACtE,EAAK,KAAK,KACH,CAAC,EAAa,KAAK,iBAAiB,QAC1C,GACD,SAAG,KAAO,EAAG,OACb,KAAK,KAAK,KAAO,KAAK,iBAAiB,GACvC,AAAI,MAAK,KAAK,MAAQ,KAAK,KAAK,OAC5B,KAAK,mBAET,KAAK,oBACL,KAAK,wBACE,CAAC,SAK5B,EAAK,UAAU,iBAAmB,YAC9B,MAAkB,MAAM,QAAQ,aAAa,UAC7C,GAAI,EACA,MAAO,SAAQ,QAAQ,IAE3B,MAAgB,OAAO,cAAgB,gBAAgB,QACvD,GAAI,EACA,MAAO,SAAQ,QAAQ,IAE3B,MAAsB,kBACtB,MAAK,IAAiB,KAAkC,OAAS,EAAa,QAAQ,MAAsB,OACjG,QAAQ,QAAQ,IAEpB,GAAI,SAAQ,YACf,MAAe,WACX,AAAI,EAAM,SAAW,EACjB,IAAiB,MAA2C,EAAa,QAAQ,EAAiB,QAClG,EAAQ,KAGR,EAAQ,OAGJ,GAAI,OAChB,EAAM,OAAS,EACf,EAAM,QAAU,EAChB,EAAM,IAAM,6bAGpB,EAAK,UAAU,iBAAmB,YAC9B,MAAkB,MAAM,QAAQ,aAAa,UAC7C,GAAI,EACA,MAAO,GAEX,MAAgB,OAAO,cAAgB,gBAAgB,QACvD,GAAI,EACA,MAAO,GAEX,MAAsB,kBACtB,GAAK,IAAiB,KAAkC,OAAS,EAAa,QAAQ,MAAsB,OACxG,MAAO,GAEX,MAAkB,KAAK,cACvB,MAAI,IACA,IAAiB,MAA2C,EAAa,QAAQ,EAAiB,SAE/F,GAEX,EAAK,UAAU,YAAc,WACzB,MAAY,UAAU,UAAU,MAAM,gCACtC,GAAI,GAAS,EAAM,KAAO,WAAa,CAAC,EAAM,IAAM,GAChD,MAAO,GAGX,GAAI,GAAS,EAAM,KAAO,QAAU,CAAC,EAAM,KAAO,IAAM,CAAC,EAAM,KAAO,MAClE,MAAO,GAEX,MAAa,OAAO,QAAQ,OAAO,WAAW,OAAO,YACrC,EAAO,UACjB,EAAO,UAAU,cAAc,QAAQ,oBAAsB,EAC7D,GACN,cAAO,QAAQ,OAAO,WAAW,OAAO,GACjC,GAEX,EAAK,UAAU,iBAAmB,WAC9B,MAAgB,KAAK,sBAAsB,UAC7B,CAAC,OAAQ,UACN,YACb,GAAI,YAAgB,IAChB,MAAgB,EAAK,MACR,EAAQ,KAAK,YAAoB,MAAO,GAAU,SAAS,KACxE,AAAI,GACA,GAAK,IAAM,EAAK,IAAI,QAAQ,EAAQ,MAIhD,OAAO,OAAO,aAAa,UAAU,WAAgB,OAAO,OAAO,aAAa,UAAU,QAC1F,OAAO,OAAO,aAAa,UAAU,QAAU,YAC3C,MAAI,OAAM,QAAQ,GACd,EAAM,QAAQ,YAAkB,MAAO,GAAW,KAGlD,EAAW,GAER,KAAK,WAAc,KAGlC,EAAK,UAAU,sBAAwB,YACnC,MAAI,MAAK,KAAK,KACH,QAEF,KAAK,KAAK,KACR,QAGA,GAGf,EAAK,UAAU,kBAAoB,WAC/B,KAAK,KAAK,OAAO,cAAc,MAAM,gBAAkB,uCAAyC,KAAK,sBAAsB,QAAU,MAEzI,EAAK,UAAU,sBAAwB,WACnC,EAAU,UAAU,aAAkB,EAAU,UAAU,UAC1D,EAAU,UAAU,UAAY,WAC5B,UACA,IACI,KAAK,wBAGL,AAAC,GAAM,GAAM,GAAK,KAAK,UAAY,MAAQ,IAAO,OAAS,OAAS,EAAG,SAAW,MAAQ,IAAO,OAAS,OAAS,EAAG,SAAW,MAAQ,IAAO,QAAkB,EAAG,iBAAiB,0BAA4B,KAAK,IAAM,MAAQ,MAIjP,EAAK,UAAU,QAAU,WACrB,KAAK,KAAK,MAAM,YAAa,gCAAiC,kCAC9D,KAAK,gBAET,EAAK,UAAU,aAAe,WAE1B,KAAK,KAAK,GAAG,EAAK,eAAe,iBAAkB,KAAK,kBAAmB,MAC3E,KAAK,KAAK,WAAW,CACjB,OAAQ,CACJ,SAAU,CAAC,gBACX,KAAM,CAAC,qBAInB,EAAK,UAAU,gBAAkB,aAGjC,EAAK,UAAU,kBAAoB,gBAC/B,MAAc,sBAAwB,EAAa,IAAM,GAG7D,EAAK,UAAU,OAAS,WACpB,MAAY,KACZ,KAAK,KAAK,MAAM,eAAe,CAC3B,KAAM,KAAK,KAAK,KAChB,KAAM,KAAK,KAAK,OAEpB,KAAK,KAAK,iBAAiB,KAAK,KAAK,MAAO,SAC5C,KAAK,gBACL,KAAK,0BACL,KAAK,iBACL,KAAK,aACL,KAAK,YACA,QAAQ,WACT,EAAM,uBAGd,EAAK,UAAU,cAAgB,WAC3B,MAAe,MAAM,QAAQ,YAAY,YACzC,AAAI,EAAW,GACX,KAAK,OAAO,GAAG,OAAO,OAAO,OAAO,WAAY,WAG5C,UAFQ,EAAW,MACX,EACD,EAAE,GACL,GAAK,KAAK,KAAK,MAK/B,EAAK,UAAU,wBAA0B,WACrC,GAAI,KAAK,KAAK,OAAO,GAAG,QACpB,OAEJ,KAAK,KAAK,MAAM,SAAS,WAAW,KAExC,EAAK,UAAU,eAAiB,WAC5B,KAAK,KAAK,UAAY,GAAI,GAAK,qBAAqB,KAAK,MACzD,KAAK,KAAK,iBAAiB,KAAK,KAAK,UAAW,cAEpD,EAAK,UAAU,kBAAoB,WAC/B,MAAkB,KAAK,MAAM,IAAI,EAAK,SAAS,QAC/C,EAAY,OAAO,KAAK,OAAO,OAAO,OAAO,MAAO,KAAK,mBAAmB,KAAK,KAAM,IACvF,EAAY,MAAM,MAAM,EAAK,SAAS,SAE1C,EAAK,UAAU,mBAAqB,YAChC,KAAK,KAAK,YAAc,EACxB,EAAY,MAAM,OAAO,EAAK,SAAS,WACvC,EAAY,MAAM,cAEtB,EAAK,UAAU,WAAa,WACxB,AAAI,KAAK,KAAK,OAAO,YAAc,OAAO,MAAM,MAC5C,MAAK,iBACL,KAAK,0BAGb,EAAK,UAAU,eAAiB,WAC5B,MAAY,KAAK,KAAK,MACtB,EAAM,YAAc,OAAO,MAAM,YAAY,SAC7C,KAAK,wBAA0B,GAC/B,OAAO,iBAAiB,SAAU,KAAK,eAAe,KAAK,OAC3D,KAAK,kBAET,EAAK,UAAU,eAAiB,WAC5B,QACY,OAAO,aACN,OAAO,cACV,KAAK,IAAI,OAAO,iBAAkB,KAC5C,KAAK,KAAK,MAAM,kBAAkB,CAC9B,SAAU,OACV,QAAS,SACT,KAAM,CACF,MAAO,EACP,OAAQ,EACR,IAAK,OAAO,iBACZ,YAAc,GAAK,OAAO,eAAiB,MAAQ,IAAO,OAAS,OAAS,EAAG,QAGvF,KAAK,MAAM,KAAO,EAAI,EACtB,KAAK,MAAM,OAAO,EAAQ,EAAK,EAAS,GACxC,MAA2B,KAAK,uBAChC,AAAI,EACA,MAAK,wBACL,KAAK,qBACL,KAAK,iBACL,AAAI,KAAK,WACL,MAAK,KAAK,KAAK,SACf,KAAK,UAAY,KAIrB,MAAK,iBACL,KAAK,KAAK,KAAK,QACf,KAAK,UAAY,IAErB,MAAwB,CAAC,KAAK,yBAA2B,EACzD,AAAI,GACA,KAAK,eAET,MAA8B,KAAK,yBAA2B,EAC9D,AAAI,GACA,KAAK,eAET,KAAK,wBAA0B,CAAC,GAEpC,EAAK,UAAU,aAAe,WAC1B,AAAI,MAAO,MAAK,eAAiB,aAC7B,aAAa,KAAK,eAEtB,KAAK,cAAgB,WAAW,WAC5B,OAAO,SAAS,EAAG,CAAC,OAAO,cAC5B,MAEP,EAAK,UAAU,aAAe,WAC1B,AAAI,MAAO,MAAK,eAAkB,aAC9B,aAAa,KAAK,eAEtB,KAAK,cAAgB,WAAW,WAC5B,SAAS,KAAK,MAAM,MAAQ,QAC5B,SAAS,KAAK,MAAM,OAAS,SAC9B,MAEP,EAAK,UAAU,qBAAuB,WAClC,MAAsB,EAAK,OAAO,aAAe,KAAK,eAC/B,EAAK,OAAO,cAAgB,KAAK,cACxD,MAAO,IAAmB,GAE9B,EAAK,UAAU,mBAAqB,WAChC,KAAK,KAAK,MAAM,UAAU,IAAM,QAAQ,YACpC,AAAI,EAAM,QACN,EAAM,YAIlB,EAAK,UAAU,UAAY,WACvB,YAAK,KAAK,KAAO,GAAI,GAAK,eAAe,KAAK,MAC9C,KAAK,KAAK,KAAK,mBACR,KAAK,KAAK,KAAK,QAE1B,EAAK,UAAU,sBAAwB,WACnC,EAAK,OAAO,WAAa,KAAK,KAAK,MAAM,MACzC,EAAK,OAAO,YAAc,KAAK,KAAK,MAAM,OAC1C,EAAK,OAAO,gBAAkB,EAAK,OAAO,WAAa,GACvD,EAAK,OAAO,iBAAmB,EAAK,OAAO,YAAc,GACzD,EAAK,OAAO,aAAe,EAAK,OAAO,WAAa,EAAK,OAAO,YAChE,EAAK,OAAO,KAAO,KAAK,KAAK,MAAM,KACnC,EAAK,OAAO,aAAe,EAAK,OAAO,YACjC,EAAK,OAAO,WAAa,EAAK,OAAO,kBACrC,EAAK,OAAO,YAAc,EAAK,OAAO,oBAEhD,EAAK,UAAU,eAAiB,WAC5B,KAAK,mBAAmB,MAAM,QAAU,QAE5C,EAAK,UAAU,eAAiB,WAC5B,KAAK,mBAAmB,MAAM,QAAU,QAE5C,EAAK,UAAU,iBAAmB,WAC9B,MAAO,UAAS,eAAe,WAEnC,EAAK,UAAU,YAAc,WACzB,MAAO,QAAO,WAAa,OAAO,aAEtC,EAAK,UAAU,WAAa,WACxB,MAAO,QAAO,YAAc,OAAO,YAEhC,GACT,OAAO,OACT,EAAK,KAAO,IACb,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,gBACI,AAAI,IAAa,QAAU,GAAW,aACtC,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,eACb,EAAM,SAAW,EACjB,EAAM,UACN,EAAM,cACC,EAEX,SAAY,UAAU,QAAU,WAC5B,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,kBAC5D,KAAK,WAAW,EAAI,GACpB,KAAK,WAAW,MAAQ,IACxB,KAAK,SAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,kBAC1D,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,YACtD,KAAK,IAAI,CAAC,KAAK,WAAY,KAAK,SAAU,KAAK,QAEnD,EAAY,UAAU,YAAc,WAChC,MAAoB,EACpB,KAAK,SAAW,GAAI,QAAO,KAAK,UAAU,EAAG,KAAK,KAAK,OAAS,EAAe,KAAK,KAAK,MAAO,GAChG,KAAK,KAAK,QAAQ,KAAK,WAE3B,EAAY,UAAU,mBAAqB,YACvC,KAAK,MAAM,OAAO,aAAa,KAAK,UACpC,MAAW,KAAK,kBAAkB,GAClC,KAAK,SAAS,OAAS,EAAK,OAC5B,KAAK,SAAS,EAAI,EAAK,EACvB,KAAK,KAAK,QAAQ,KAAK,WAE3B,EAAY,UAAU,YAAc,YAChC,MAAY,OACD,KAAK,kBAAkB,GAClC,KAAK,MAAM,OAAO,aAAa,KAAK,UACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,EAAK,EACR,OAAQ,EAAK,OACb,SAAU,WACN,EAAM,KAAK,QAAQ,EAAM,cAIrC,EAAY,UAAU,kBAAoB,YACtC,MAAqB,KAAK,KAAK,SAClB,EAAiB,KAAK,IAAI,KAAO,GAC9C,MAAO,CACH,OAAQ,EACR,EAAG,EAAiB,IAG5B,EAAY,UAAU,SAAW,WAC7B,MAAO,MAAK,SAAS,OAElB,GACT,OAAO,YAAY,WACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAc,MAAM,UACW,YAC3B,UAAU,EAAW,GACrB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAU,UAAU,KAAO,WACvB,KAAK,OAAO,GAAG,WAAY,KAAK,SAAU,MAC1C,KAAK,gBACL,KAAK,UACL,KAAK,eACL,KAAK,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,KAAK,iBAAkB,MACnE,KAAK,UAET,EAAU,UAAU,cAAgB,WAChC,KAAK,WAAa,KAAK,IAAI,WAAW,EAAG,EAAG,EAAG,EAAG,YAAa,OAEnE,EAAU,UAAU,QAAU,WAC1B,KAAK,KAAO,GAAI,GAAK,YAAY,MACjC,KAAK,IAAI,SAAS,KAAK,OAE3B,EAAU,UAAU,aAAe,WAC/B,MAAc,KAAK,wBACP,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,UAAY,KAAK,IAAI,KAAK,EAAG,EAAG,EAAS,GAC9C,KAAK,UAAU,UAAU,GAAK,GAC9B,KAAK,UAAU,UAAU,EAAG,EAAG,mBAC/B,KAAK,UAAU,QAAU,MAAM,QAAQ,cAAc,CAAC,UAAW,YAAa,kBAC9E,KAAK,UAAU,QAEnB,EAAU,UAAU,oBAAsB,WACtC,MAAsB,OACJ,GAAI,QAAO,mBACjB,IAAgB,EAAkB,EAAY,WAAa,EAAkB,IAAM,EAC/F,MAAO,2BAA6B,EAAQ,yBAEhD,EAAU,UAAU,QAAU,WAC1B,KAAK,UAAU,iBAAiB,OAAQ,SACxC,KAAK,KAAK,IAAI,mBACd,KAAK,KAAK,eAAe,UACzB,KAAK,KAAK,qBAAuB,KAAK,KAAK,OAAO,GAAG,QAAU,EAAI,GACnE,KAAK,KAAK,YAAc,OAAO,KAAK,OAAO,cAC3C,KAAK,KAAK,GAAG,OAAO,OAAO,OAAO,SAAU,KAAK,eAAgB,MACjE,KAAK,KAAK,GAAG,OAAO,OAAO,OAAO,SAAU,KAAK,eAAgB,MACjE,KAAK,kBACL,KAAK,YACL,KAAK,YACL,KAAK,eACL,KAAK,aACL,KAAK,gBAET,EAAU,UAAU,eAAiB,WACjC,KAAK,KAAK,YAAY,KAAK,KAAK,WAEpC,EAAU,UAAU,eAAiB,WACjC,KAAK,KAAK,IAAI,OAAO,OAAO,OAAO,cAAe,KAAK,eAAgB,OAE3E,EAAU,UAAU,gBAAkB,WAClC,KAAK,KAAK,KAAK,QAAS,qBACxB,KAAK,mBACL,KAAK,uBAET,EAAU,UAAU,iBAAmB,WACnC,QACiB,MAAM,QAAQ,aAAa,gBAC5B,GAAK,MAAM,QAAQ,SAAS,iBAAmB,MAAQ,IAAO,OAAS,EAAK,WACzE,EAAW,UACpB,EAAa,EAAK,OAAO,WAAa,EAAe,kBAAoB,EACnF,KAAK,KAAK,KAAK,SAAU,IAE7B,EAAU,UAAU,oBAAsB,WACtC,MAAiB,MAAM,QAAQ,aAAa,gBAClC,EACJ,EAAK,OAAO,WAAa,kBACzB,wCACN,KAAK,KAAK,KAAK,EAAK,UAAU,WAAY,IAE9C,EAAU,UAAU,UAAY,WAC5B,KAAK,KAAK,oBAAoB,EAAK,eAAe,4BAA6B,aAAc,4BAA6B,qDAC1H,KAAK,KAAK,oBAAoB,EAAK,eAAe,4BAA6B,aAAc,4BAA6B,sDAE9H,EAAU,UAAU,UAAY,WAC5B,KAAK,KAAK,MAAM,EAAK,aAAa,UAAW,8BAC7C,AAAI,KAAK,KAAK,YAAc,EAAK,iBAAiB,WAC9C,KAAK,KAAK,MAAM,EAAK,aAAa,IAAK,yBAG/C,EAAU,UAAU,aAAe,WAC/B,KAAK,KAAK,MAAM,kBAAmB,uCACnC,KAAK,KAAK,MAAM,kBAAmB,uCACnC,KAAK,KAAK,MAAM,kBAAmB,uCACnC,KAAK,KAAK,MAAM,aAAc,iCAAkC,oCAEpE,EAAU,UAAU,WAAa,WAC7B,GAAI,EAAK,KAAK,gBAAkB,GAC5B,OAEJ,KAAK,KAAK,OAAO,YAAa,uBAC9B,KAAK,KAAK,MAAM,SAAU,6BAA8B,+BACxD,KAAK,KAAK,oBAAoB,EAAK,eAAe,mBAAoB,SAAU,cAAe,sCAAuC,IACtI,KAAK,KAAK,oBAAoB,EAAK,eAAe,mBAAoB,SAAU,cAAe,sCAAuC,KAE1I,EAAU,UAAU,aAAe,WAC/B,MAAY,KACZ,KAAK,KAAK,SAAS,kBAAmB,CAClC,SAAU,YACN,EAAM,KAAK,MAAM,oBACZ,MAAM,YACP,EAAM,4BAA4B,KAEjC,QAAQ,WAAc,MAAO,WAAU,EAAO,OAAQ,OAAQ,WAC/D,MAAO,aAAY,KAAM,YACrB,OAAQ,EAAG,WACF,GAAG,MAAO,CAAC,EAAa,KAAK,KAAK,MAAM,yBACxC,GACD,SAAG,OACI,CAAC,EAAa,KAAK,KAAK,MAAM,uBACpC,GACD,SAAG,OACH,IACO,CAAC,cAOpC,EAAU,UAAU,4BAA8B,YAC9C,QACgB,YAAiB,cAC3B,EAAM,QACN,EAAM,WACZ,AAAC,GAAK,KAAK,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,UAAU,gBAAkB,IAEnG,EAAU,UAAU,OAAS,WACzB,KAAK,eACL,KAAK,YACL,KAAK,eACL,KAAK,mBACL,KAAK,qBACL,KAAK,sBACL,KAAK,YACL,KAAK,YACL,KAAK,oBACL,KAAK,KAAK,IAAI,sBACd,KAAK,UAAU,iBAAiB,OAAQ,YACxC,KAAK,aAET,EAAU,UAAU,aAAe,WAC/B,KAAK,kBAAkB,eAAgB,qBACvC,KAAK,kBAAkB,gBAAiB,uBAE5C,EAAU,UAAU,kBAAoB,cACpC,MAAc,SAAS,eAAe,GACtC,GAAI,CAAC,EACD,OAEJ,MAAa,KAAK,KAAK,sBAAsB,SAClC,EAAW,IAAM,EAC5B,EAAQ,MAAM,gBAAkB,wBAA0B,EAAO,MAErE,EAAU,UAAU,UAAY,WAC5B,KAAK,KAAK,MAAQ,GAAI,GAAK,UAAU,KAAK,MAC1C,KAAK,KAAK,MAAM,yBAEpB,EAAU,UAAU,aAAe,WAC/B,KAAK,KAAK,SAAW,GAAI,GAAK,gBAAgB,KAAK,MACnD,MAAoB,MAAM,QAAQ,aAAa,YAC/C,AAAI,GACA,KAAK,KAAK,SAAS,SAAS,QAAQ,YAChC,EAAQ,IAAM,MAI1B,EAAU,UAAU,iBAAmB,WACnC,MAAc,KAAK,MAAM,KAAK,IAAI,UAClC,KAAK,KAAK,aAAe,GAAI,GAAK,oBAAoB,IAE1D,EAAU,UAAU,UAAY,WAC5B,MAAY,GAAI,GAAK,UAAU,KAAK,KAAK,aACzC,EAAM,WACN,EAAM,cACN,EAAM,qBAAqB,KAAK,KAAK,YAAY,iBACjD,KAAK,KAAK,MAAQ,GAEtB,EAAU,UAAU,kBAAoB,WACpC,KAAK,KAAK,YAAY,mBACtB,KAAK,KAAK,YAAY,cAAc,gBAExC,EAAU,UAAU,mBAAqB,WACrC,KAAK,KAAK,YAAY,sBAE1B,EAAU,UAAU,oBAAsB,WACtC,MAAiB,GAAI,GAAK,sBAAsB,KAAK,KAAK,YAAa,YAAa,cACpF,KAAK,KAAK,YAAY,kBAAkB,GACxC,KAAK,KAAK,YAAY,gBAAgB,cAAgB,MAAM,QAAQ,aAAa,sBACjF,KAAK,KAAK,MAAM,kBAAkB,IAEtC,EAAU,UAAU,UAAY,WAC5B,KAAK,KAAK,OAAS,KAAK,KAAK,YAAY,aAE7C,EAAU,UAAU,UAAY,WAC5B,AAAI,OAAO,cAAgB,gBAAgB,QACvC,KAAK,iBAGL,KAAK,qBAGb,EAAU,UAAU,eAAiB,WACjC,MAAY,EAAQ,YAAY,SAChC,GAAI,EAAQ,GAAK,KAAK,KAAK,aAAa,MAAM,IAC1C,KAAK,WAAW,EAAK,SAAS,cAAe,CAAE,YAAa,IAC5D,OAEJ,MAAkB,EAAQ,YAAY,eACtC,GAAI,EAAc,GAAK,KAAK,KAAK,aAAa,MAAM,IAChD,KAAK,WAAW,EAAK,SAAS,kBAAmB,CAAE,YAAa,IAChE,OAEJ,KAAK,WAAW,EAAK,SAAS,aAOlC,EAAU,UAAU,kBAAoB,WACpC,GAAI,EAAK,KAAK,eACV,KAAK,WAAW,EAAK,SAAS,gBAC9B,OAEJ,MAAkB,KAAK,kBACvB,AAAI,EACA,KAAK,WAAW,EAAK,SAAS,cAAe,CAAE,YAAa,IAG5D,KAAK,WAAW,EAAK,SAAS,aAGtC,EAAU,UAAU,gBAAkB,WAClC,MAAkB,MAAM,QAAQ,SAAS,SACzC,MAAI,KAAgB,KACT,KAEJ,SAAS,IAEpB,EAAU,UAAU,WAAa,cAC7B,MAAoB,CAAC,EAAK,SAAS,eAAgB,EAAK,SAAS,kBAAmB,EAAK,SAAS,kBAAmB,EAAK,SAAS,iBAAiB,SAAS,GAC7J,GAAI,GAAiB,EAAK,KAAK,gBAAkB,IAC7C,AAAa,GAAiB,EAC9B,OAEJ,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAO,IAEjD,EAAU,UAAU,iBAAmB,cACnC,KAAK,WAAW,eAAiB,KAAQ,GAE7C,EAAU,UAAU,OAAS,WACzB,KAAK,mBACL,KAAK,YACL,KAAK,kBAET,EAAU,UAAU,iBAAmB,WACnC,KAAK,WAAW,QAAQ,EAAK,OAAO,WAAY,EAAK,OAAO,aAC5D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAU,UAAU,UAAY,WAC5B,MAAe,EAAK,OAAO,WAAa,IACxC,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,KAAK,YACnD,KAAK,KAAK,EAAI,EAAK,OAAO,gBAC1B,KAAK,KAAK,EAAI,EAAK,OAAO,kBAE9B,EAAU,UAAU,eAAiB,WACjC,MAAe,EAAK,OAAO,WAAa,IACxC,KAAK,UAAU,MAAQ,EACvB,KAAK,UAAU,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,UAAU,OAC7D,KAAK,UAAU,EAAI,EAAK,OAAO,gBAC/B,KAAK,UAAU,EAAI,EAAK,OAAO,YAAc,IAEjD,EAAU,UAAU,SAAW,WAC3B,KAAK,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,iBAAkB,OAEjE,GACT,OAAO,OACT,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgC,YAC5B,UAAU,EAAY,GACtB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAS,IAAU,KAC9D,SAAM,cAAgB,EACtB,EAAM,YAAc,GACpB,EAAM,QAAU,EAChB,EAAM,KAAO,EACb,EAAM,KAAO,OACb,EAAM,iBACN,EAAM,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,cAAe,GAC3E,EAAM,GAAG,OAAO,MAAM,OAAO,uBAAwB,EAAM,aAAc,GAClE,EAEX,cAAO,eAAe,EAAW,UAAW,aAAc,CACtD,IAAK,WACD,MAAO,MAAK,aAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAW,UAAW,MAAO,CAC/C,IAAK,WACD,MAAO,MAAK,MAEhB,IAAK,YACD,KAAK,KAAO,GAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAW,UAAW,SAAU,CAClD,IAAK,WACD,MAAO,MAAK,SAEhB,WAAY,GACZ,aAAc,KAElB,EAAW,UAAU,cAAgB,WACjC,KAAK,MAAQ,KAEjB,EAAW,UAAU,aAAe,WAChC,KAAK,MAAQ,GAEjB,EAAW,UAAU,iBAAmB,WACpC,MAAO,MAAK,cAAgB,GAEhC,EAAW,UAAU,YAAc,YAC/B,GAAI,KAAK,cAAgB,EACrB,OAEJ,KAAK,YAAc,EACnB,AAAI,KAAK,YACL,MAAK,SAAS,kBACd,KAAK,MAAQ,KAAK,oBAGlB,MAAK,SAAS,QACd,KAAK,MAAQ,KAAK,gBAG1B,EAAW,UAAU,QAAU,YAC3B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAgB,QAAa,UAC7B,EAAgB,WAAgB,eACjC,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MAAgC,YAC5B,UAAU,EAAY,GACtB,kBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,IAAI,SAAS,GACnB,EAAM,OAAS,EAAM,MACrB,EAAM,cAAgB,GACtB,EAAM,UAAY,GAClB,EAAM,iBAAmB,GACzB,EAAM,KAAO,OACb,EAAM,eAAiB,EACvB,EAAM,YAAc,EACpB,EAAM,SAAW,EACjB,EAAM,MAAQ,EACd,EAAM,iBACN,EAAM,0BACN,EAAM,kBACN,EAAM,kBACC,EAEX,cAAO,eAAe,EAAW,UAAW,UAAW,CACnD,IAAK,WACD,MAAO,MAAK,UAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAW,UAAW,OAAQ,CAChD,IAAK,WACD,MAAO,MAAK,OAEhB,WAAY,GACZ,aAAc,KAElB,EAAW,UAAU,gBAAkB,YACnC,EAAK,YAAY,IACjB,KAAK,iBAAmB,EACxB,KAAK,cAAc,KAAK,IAE5B,EAAW,UAAU,mBAAqB,YACtC,EAAK,YAAY,IACjB,EAAE,KAAK,KAAK,cAAe,GAC3B,AAAI,KAAK,mBAAqB,GAC1B,MAAK,iBAAmB,OAGhC,EAAW,UAAU,mBAAqB,WACtC,KAAK,cAAc,QAAQ,YACvB,EAAK,YAAY,MAErB,KAAK,iBAAmB,KACxB,KAAK,cAAc,OAAS,GAEhC,EAAW,UAAU,eAAiB,WAClC,KAAK,MAAQ,GACb,EAAE,MAAM,KAAK,YAAa,KAAK,OAAO,KAAK,QAE/C,EAAW,UAAU,OAAS,WAC1B,KAAK,cAAc,KAAK,OACxB,KAAK,YAAY,KAAK,OACtB,KAAK,mBAAmB,KAAK,OAC7B,KAAK,QACL,KAAK,KAAK,EAAgB,QAAS,KAAM,KAAK,QAElD,EAAW,UAAU,cAAgB,YACjC,MAAY,KACZ,EAAE,MAAM,KAAK,SAAU,YACnB,EAAM,QAAQ,EAAO,MAG7B,EAAW,UAAU,QAAU,cAC3B,MAAW,GAAI,GAAK,WAAW,KAAK,MAAO,SAAU,OAAQ,EAAQ,GACrE,SAAK,EAAI,EAAW,UAAY,EAAI,EAAS,EAAW,UACxD,EAAK,EAAI,CAAC,EAAW,UAAY,EAAI,EAAM,EAAW,UACtD,EAAK,MAAQ,GACb,EAAK,cAAgB,EAAK,MAC1B,KAAK,MAAM,KAAK,GAChB,KAAK,IAAI,GACF,GAEX,EAAW,UAAU,wBAA0B,WAC3C,MAAQ,CAAC,EAAK,SAAS,KAAO,EAAK,SAAS,YACjC,KAAK,MAAM,IAAI,KAAK,KAAK,WAAa,EAAG,EAAG,EAAG,EAAG,KAAK,WAAY,EAAG,UACjF,EAAK,aAAa,GAClB,KAAK,MAAM,EAAM,IAErB,EAAW,UAAU,gBAAkB,WACnC,MAAY,KACZ,EAAE,MAAM,KAAK,SAAU,YACnB,MAAc,EAAO,aACT,EAAM,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,mBAAoB,EAAS,GAAI,OAAO,OACzG,SAAM,EAAI,EAAS,EAAW,UAAY,EAAW,UAAY,EACjE,EAAM,EAAI,GACV,EAAM,QAAQ,SAAU,GACxB,EAAM,IAAI,GACV,EAAM,iBACN,EAAM,MAAM,OAAS,UACrB,EAAM,QAAQ,OAAQ,gBACf,KAGf,EAAW,UAAU,YAAc,YAC/B,MAAc,EAAU,aACZ,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,mBAAoB,EAAS,GAAI,OAAO,OACxG,SAAM,UAAU,EAAG,IACnB,EAAM,EAAI,IACV,EAAM,EAAI,CAAC,EAAY,EAAW,UAAY,EAAW,UAAY,EAAI,EACzE,EAAM,QAAQ,MAAO,GACrB,KAAK,IAAI,GACT,KAAK,UAAU,KAAK,GACpB,EAAM,iBACN,EAAM,MAAM,OAAS,UACrB,EAAM,QAAQ,OAAQ,aACf,GAEX,EAAW,UAAU,mBAAqB,YACtC,MAAa,KAAK,MAAM,IAAI,OAAO,SAAU,oBAAqB,MAClE,EAAO,GAAG,OAAO,YAAY,YAAY,QAAS,KAAK,uBAAwB,MAC/E,EAAO,QAAQ,MAAO,GACtB,EAAO,EAAI,KAAK,WAAa,EAAO,aAAe,EAAI,GACvD,EAAO,EAAI,CAAC,EAAY,EAAW,UAAY,EAAW,UAAY,EACtE,KAAK,iBAAiB,KAAK,IAE/B,EAAW,UAAU,uBAAyB,YAC1C,GAAI,KAAK,OAAS,EAAK,SAAS,MAC5B,AAAa,GAAwB,EAAK,SAAS,KACnD,OAEJ,MAAgB,EAAO,QAAQ,OAC/B,KAAK,UAAU,IAEnB,EAAW,UAAU,UAAY,YAC7B,KAAK,iBAAiB,GACtB,KAAK,eAAe,GACpB,KAAK,sBAAsB,GAC3B,KAAK,gBAAgB,GACrB,KAAK,QACL,KAAK,oBACL,KAAK,KAAK,EAAgB,WAAY,IAE1C,EAAW,UAAU,iBAAmB,YACpC,MAAoB,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,MAAQ,IAC5E,EAAc,QAAQ,YAAkB,MAAO,GAAK,YACpD,EAAE,KAAK,MAAM,EAAG,eAAe,CAAC,KAAK,OAAQ,KAEjD,EAAW,UAAU,eAAiB,YAClC,MAAoB,KAAK,UAAU,UAAU,YAAmB,MAAO,GAAM,QAAQ,SAAW,IAChG,GAAI,IAAkB,GAClB,OAEJ,KAAK,UAAU,GAAe,UAC9B,KAAK,UAAU,OAAO,EAAe,IAEzC,EAAW,UAAU,sBAAwB,YACzC,MAAoB,KAAK,iBAAiB,UAAU,YAAoB,MAAO,GAAO,QAAQ,SAAW,IACzG,GAAI,IAAkB,GAClB,OAEJ,KAAK,iBAAiB,GAAe,UACrC,KAAK,iBAAiB,OAAO,EAAe,IAEhD,EAAW,UAAU,gBAAkB,WACnC,KAAK,aAAe,KAAK,MAAM,IAAI,OAAO,SAAU,iBAAkB,MACtE,KAAK,aAAa,GAAG,OAAO,YAAY,YAAY,QAAS,KAAK,cAAe,MACjF,KAAK,qBAET,EAAW,UAAU,kBAAoB,WACrC,KAAK,aAAa,EAAI,KAAK,WAAa,EACxC,KAAK,aAAa,EAAI,CAAC,EAAW,UAAY,EAAI,KAAK,MAAQ,EAAW,WAE9E,EAAW,UAAU,cAAgB,WAEjC,UADgB,KAAK,OAAO,SAAS,OAAS,EAAI,IACrC,EAAG,EAAI,EAAW,IAC3B,KAAK,SACL,KAAK,qBAGb,EAAW,UAAU,SAAW,WAC5B,MAAO,MAAK,SAAW,EAAW,WAEtC,EAAW,UAAU,UAAY,WAC7B,MAAO,MAAK,MAAQ,EAAW,WAEnC,EAAW,UAAU,gBAAkB,WACnC,MAAO,MAAK,eAAiB,EAAW,WAE5C,EAAW,UAAU,UAAY,cAC7B,MAAO,MAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,MAAQ,GAAO,EAAK,SAAW,KAExF,EAAW,UAAU,YAAc,cAC/B,MAAU,KAAK,MAAM,EAAI,EAAW,aACvB,KAAK,MAAM,EAAI,EAAW,WACvC,MAAO,MAAK,UAAU,EAAK,IAE/B,EAAW,UAAU,iBAAmB,YACpC,MAAiB,EAAE,MAAM,KAAK,UAC9B,MAAO,QAAO,KAAK,IAAI,QAAQ,GAAY,MAAM,EAAG,IAExD,EAAW,UAAU,gBAAkB,YACnC,MAAY,KACZ,KAAK,MACA,OAAO,YAAkB,MAAO,GAAK,IAAM,IAC3C,QAAQ,YACT,EAAK,MACL,EAAK,EAAI,EAAM,UAAU,EAAK,OAElC,KAAK,UACA,OAAO,YAAmB,MAAO,GAAM,QAAQ,OAAS,IACxD,QAAQ,YACT,MAAa,EAAM,QAAQ,OAAS,EACpC,EAAM,QAAQ,MAAO,GACrB,EAAM,EAAI,EAAM,UAAU,GAC1B,EAAM,KAAO,EAAO,aAExB,KAAK,iBACA,OAAO,YAAoB,MAAO,GAAO,QAAQ,OAAS,IAC1D,QAAQ,YACT,MAAa,EAAO,QAAQ,OAAS,EACrC,EAAO,QAAQ,MAAO,GACtB,EAAO,EAAI,EAAM,UAAU,MAGnC,EAAW,UAAU,UAAY,YAC7B,MAAO,CAAC,EAAW,UAAY,EAAI,EAAM,EAAW,WAExD,EAAW,UAAU,eAAiB,YAClC,MAAY,KACZ,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,MAAQ,IAAc,QAAQ,YAAkB,MAAO,GAAM,gBAAgB,MAEjI,EAAW,UAAU,OAAS,YAC1B,MAAO,MAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,MAAQ,KAEjE,EAAW,UAAY,IAChB,GACT,OAAO,YAAY,WACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAAK,aAAa,cACpC,EAAM,SAAW,IACjB,EAAM,KAAO,aACb,EAAM,WACN,EAAM,aACC,EAEX,SAAc,UAAU,SAAW,WAC/B,MAAY,KACZ,KAAK,MAAQ,KAAK,UAAU,IAAI,YAC5B,MAAY,EAAK,aAAa,aAAa,KAChC,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,SAAU,GACjD,SAAK,QAAQ,OAAQ,iBACrB,EAAK,QAAQ,EAAK,UAAW,GAC7B,EAAK,iBACL,EAAK,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,cAAc,KAAK,EAAO,IACrF,EAAK,GAAG,OAAO,MAAM,OAAO,uBAAwB,EAAM,aAAa,KAAK,EAAO,IACnF,EAAK,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,cAAc,KAAK,EAAO,IAC9E,IAEX,KAAK,IAAI,KAAK,QAElB,EAAc,UAAU,WAAa,WACjC,OAAO,QAAQ,UAAU,KAAK,MAAO,CACjC,MAAO,EACP,SAAU,OAAO,QAAQ,MAAM,OAC/B,UAAW,KAAK,SAChB,WAAY,KAAK,SACjB,EAAG,KAAK,SAAW,EACnB,EAAG,KAAK,SAAW,KAG3B,EAAc,UAAU,cAAgB,YACpC,EAAK,MAAQ,KAEjB,EAAc,UAAU,aAAe,YACnC,EAAK,MAAQ,GAEjB,EAAc,UAAU,cAAgB,cACxC,EAAc,UAAU,mBAAqB,YACzC,KAAK,MAAM,QAAQ,YACf,MAAoB,EAAa,SAAS,EAAK,QAAQ,EAAK,YAC5D,EAAK,QAAU,IAEnB,KAAK,MAAQ,OAAO,MAAM,MAAM,WAAW,KAAK,MAAO,KAAK,cAAc,KAAK,OAC/E,KAAK,aACL,KAAK,KAAK,WAEd,EAAc,UAAU,cAAgB,cACpC,MAAS,EAAE,QAAU,EAAI,IAChB,EAAE,QAAU,EAAI,EACzB,MAAO,GAAK,GAEhB,EAAc,UAAU,cAAgB,WACpC,MAAmB,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,UACnE,GAAI,EAAa,SAAW,EACxB,MAAO,CAAE,MAAO,EAAG,OAAQ,GAE/B,MAAe,EAAE,MAAM,EAAc,OACrB,EAAE,MAAM,EAAc,OACxB,EAAE,MAAM,EAAc,OACnB,EAAE,MAAM,EAAc,OAC5B,EAAS,EAAI,KAAK,SAAW,IAC5B,EAAU,EAAI,KAAK,SAAW,IAChC,EAAQ,EAAI,KAAK,SAAW,IACzB,EAAW,EAAI,KAAK,SAAW,EAC5C,MAAO,CACH,MAAO,EAAQ,EACf,OAAQ,EAAS,IAGlB,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,kBACb,EAAM,UACN,EAAM,WACN,EAAM,aACC,EAEX,SAAa,UAAU,QAAU,WAC7B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,SAAU,kBACjD,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAa,UAAU,SAAW,WAC9B,KAAK,MAAQ,GAAI,GAAK,cAAc,KAAK,OACzC,KAAK,MAAM,GAAG,SAAU,KAAK,WAAY,MACzC,KAAK,IAAI,KAAK,QAElB,EAAa,UAAU,WAAa,WAChC,KAAK,MAAM,SAAS,GACpB,MAAkB,KAAK,MAAM,kBACZ,EAAY,QACX,EAAY,SACb,MACF,KAAK,KAAK,MAAQ,KACjB,EAAa,KAChB,EAAW,IACX,EAAY,EACzB,KAAK,MAAM,MAAQ,KAAK,IAAI,EAAG,EAAQ,GACvC,MAAc,KAAK,KAAK,aACxB,KAAK,MAAM,EAAI,EAAQ,EAAK,MAAK,KAAK,MAAQ,EAAa,KAAK,MAAM,OAAS,EAC/E,KAAK,MAAM,EAAI,EAAQ,EAAK,GAAa,EAAc,KAAK,MAAM,OAAS,GAE/E,EAAa,UAAU,OAAS,WAC5B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAa,UAAU,KAAO,WAC1B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAa,UAAU,KAAO,WAC1B,KAAK,SACL,KAAK,MAAQ,EACb,KAAK,MAAQ,IACb,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,MAAO,KAGf,EAAa,UAAU,KAAO,WAC1B,KAAK,QAET,EAAa,UAAU,YAAc,YACjC,KAAK,MAAM,mBAAmB,IAE3B,GACT,OAAO,YAAY,WACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAgB,OAAY,SAC5B,EAAgB,MAAW,UAC5B,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MACA,AAAC,aACG,EAAgB,SAAc,WAC9B,EAAgB,WAAgB,aAChC,EAAgB,eAAoB,mBACrC,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MAAgC,YAC5B,UAAU,EAAY,GACtB,kBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAO,EAAK,aAAa,aAAa,KAAc,KAC/F,SAAM,YAAc,GACpB,EAAM,cAAgB,GACtB,EAAM,OAAS,GACf,EAAM,SAAW,EACjB,EAAM,QAAQ,OAAQ,QACtB,EAAM,iBACN,EAAM,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,cAAe,GAC3E,EAAM,GAAG,OAAO,MAAM,OAAO,uBAAwB,EAAM,aAAc,GAClE,EAEX,cAAO,eAAe,EAAW,UAAW,aAAc,CACtD,IAAK,WACD,MAAO,MAAK,aAEhB,WAAY,GACZ,aAAc,KAElB,EAAW,UAAU,WAAa,YAC9B,MAAY,KACZ,OAAO,KAAK,GAAQ,QAAQ,YACxB,EAAM,aAAa,EAAK,EAAO,OAGvC,EAAW,UAAU,aAAe,cAChC,KAAK,OAAO,GAAO,EACnB,AAAI,IAAQ,EAAgB,OACxB,KAAK,SAAS,GAElB,KAAK,KAAK,EAAgB,eAAgB,KAAM,EAAK,IAEzD,EAAW,UAAU,cAAgB,WACjC,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,MAEX,KAAK,gBAAgB,WAAW,OAEpC,EAAW,UAAU,aAAe,WAChC,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAW,UAAU,YAAc,YAC/B,GAAI,KAAK,cAAgB,EACrB,OAEJ,KAAK,YAAc,EACnB,AAAI,KAAK,YACL,KAAK,KAAK,EAAgB,SAAU,MAGpC,KAAK,KAAK,EAAgB,WAAY,OAG9C,EAAW,UAAU,UAAY,WAC7B,MAAa,SAAS,SAAS,GAAI,KAAK,QAAU,KAAK,WAAa,EAAK,SAAS,UAAY,CAAE,MAAO,KAAK,MAAM,OAClH,MAAO,UAAS,SAAS,GAAK,KAAK,eAAiB,CAAE,cAAe,KAAU,CAAE,OAAQ,KAAK,OAAQ,IAAK,KAAK,IAAK,KAAM,KAAK,SAAU,OAAQ,KAEtJ,EAAW,UAAU,QAAU,YAC3B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA4C,YACxC,UAAU,EAAwB,GAClC,kBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAK,eAAe,mBAAoB,EAAK,OAAO,EAAK,gBAAgB,SAAW,IAAK,KAAO,KAC3I,SAAM,UAAU,GAAK,IACrB,EAAM,YAAc,EACpB,EAAM,MAAQ,EACd,EAAM,MAAM,GAAG,EAAK,gBAAgB,eAAgB,EAAM,oBAAqB,GAC/E,EAAM,MAAM,GAAG,OAAO,YAAY,OAAO,QAAS,EAAM,eAAgB,GACxE,EAAM,MAAM,OAAO,GAAG,aAAc,EAAM,YAAa,GAChD,EAEX,SAAuB,UAAU,oBAAsB,gBACnD,AAAI,IAAQ,EAAK,gBAAgB,QAC7B,KAAK,QAAQ,EAAM,aAG3B,EAAuB,UAAU,eAAiB,WAC9C,KAAK,WAET,EAAuB,UAAU,YAAc,WAC3C,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,YAAY,EACzC,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,YAAY,GAE7C,EAAuB,UAAU,QAAU,YACvC,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,GAAG,aAAc,KAAK,YAAa,MAEzD,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,YACrB,EAAK,uBAAyB,IAC/B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,YAChC,UAAU,EAAgB,GAC1B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAa,QAAQ,IAAK,EAAa,MAAM,OAAS,KACjG,SAAM,YAAY,UAClB,EAAM,SAAS,IACf,EAAM,OACN,EAAM,aAAe,EACrB,EAAM,aAAa,GAAG,EAAK,gBAAgB,SAAU,EAAM,KAAM,GACjE,EAAM,aAAa,GAAG,EAAK,gBAAgB,WAAY,EAAM,KAAM,GACnE,EAAM,aAAa,GAAG,EAAK,gBAAgB,eAAgB,EAAM,mBAAoB,GACrF,EAAM,aAAa,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,0BAA2B,GACpG,EAAM,aAAa,GAAG,OAAO,YAAY,OAAO,QAAS,WACrD,EAAM,QAAQ,MAElB,EAAM,MAAM,OAAO,GAAG,aAAc,EAAM,mBAAoB,GACvD,EAEX,SAAe,UAAU,mBAAqB,gBAC1C,AAAI,IAAU,EAAK,gBAAgB,OAC/B,KAAK,SAAS,IAGtB,EAAe,UAAU,KAAO,WAC5B,KAAK,QAAU,GACf,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,MAGf,EAAe,UAAU,KAAO,WAC5B,KAAK,QAAU,IAEnB,EAAe,UAAU,0BAA4B,WACjD,KAAK,gBAAgB,WAAW,OAEpC,EAAe,UAAU,mBAAqB,WAC1C,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,EAAI,KAAK,aAAa,EAC3B,KAAK,EAAI,KAAK,aAAa,EAC3B,KAAK,MAAQ,KAAK,aAAa,OAEnC,EAAe,UAAU,QAAU,YAC/B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,IAAI,aAAc,KAAK,mBAAoB,MAEjE,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,WAC7B,gBACI,KAAK,MAAQ,EACb,KAAK,OAAS,GAAI,QAAO,OAAO,aAChC,KAAK,MAAQ,GAAI,WAAU,CAAE,MAAO,EAAO,UAAW,SAAS,eAAe,mBAElF,SAAY,UAAU,aAAe,WACjC,KAAK,MAAM,eAAe,UAAU,IAAI,wBAE5C,EAAY,UAAU,YAAc,WAChC,KAAK,MAAM,eAAe,UAAU,OAAO,wBAE/C,EAAY,UAAU,QAAU,WAC5B,KAAK,MAAM,WAEf,EAAY,UAAU,QAAU,WAC5B,KAAK,MAAM,WAER,KAEX,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAsB,kBAAuB,sBAC9C,EAAwB,EAAK,uBAA0B,GAAK,sBAAwB,KACvF,MAAsC,YAClC,UAAU,EAAkB,GAC5B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,SAAW,EAAY,cAAgB,KAC5E,SAAM,YAAc,EACpB,EAAM,MAAM,SAAS,EAAM,YAAa,QAAS,CAAE,KAAM,IACzD,EAAM,QAAU,EAAM,MAAM,SAAS,EAAM,YAAa,aAAc,CAAE,QAAS,EAAM,mBACvF,EAAM,qBACN,EAAM,iBACN,EAAM,aACC,EAEX,SAAiB,UAAU,eAAiB,WACxC,MAAO,CACH,CAAE,KAAM,QAAS,MAAO,gBACxB,CAAE,KAAM,OAAQ,MAAO,gBACvB,CAAE,KAAM,QAAS,MAAO,kBAGhC,EAAiB,UAAU,mBAAqB,WAC5C,MAAsB,KAAK,MAAM,UAAU,CACvC,MAAO,eAEX,EAAgB,SAAS,KAAK,YAAY,UAAW,WAAW,GAAG,SAAU,KAAK,kBAAkB,KAAK,OACzG,EAAgB,SAAS,KAAK,YAAY,UAAW,eACrD,EAAgB,SAAS,KAAK,YAAY,UAAW,YACrD,EAAgB,SAAS,KAAK,YAAY,UAAW,QAAS,CAAE,IAAK,EAAG,IAAK,IAAM,KAAM,MAE7F,EAAiB,UAAU,kBAAoB,YAC3C,KAAK,OAAO,KAAK,EAAsB,kBAAmB,IAE9D,EAAiB,UAAU,eAAiB,WACxC,MAAkB,KAAK,MAAM,UAAU,CACnC,MAAO,UAEX,AAAK,KAAK,YAAY,MAClB,MAAK,YAAY,KAAO,KAAK,2BAEjC,MAAiB,KAAK,YAAY,KAClC,OAAO,KAAK,GAAY,QAAQ,YAC5B,EAAY,SAAS,EAAY,EAAa,CAAE,IAAK,EAAG,IAAK,GAAI,KAAM,OAG/E,EAAiB,UAAU,wBAA0B,WACjD,MACA,MAAO,GAAK,GACR,EAAG,EAAK,YAAY,MAAQ,EAC5B,EAAG,EAAK,YAAY,SAAW,EAC/B,EAAG,EAAK,YAAY,MAAQ,EAC5B,GAER,EAAiB,UAAU,WAAa,WACpC,KAAK,eAAiB,KAAK,MAAM,UAAU,CAAE,MAAO,aACpD,KAAK,aAAe,KAAK,MAAM,UAAU,CAAE,MAAO,WAClD,KAAK,WAAa,KAAK,MAAM,UAAU,CAAE,MAAO,UAE7C,GACT,EAAK,aACP,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAyB,iBAAsB,mBAC/C,EAAyB,MAAW,QACpC,EAAyB,SAAc,aACxC,EAA2B,EAAK,0BAA6B,GAAK,yBAA2B,KAChG,MAAyC,YACrC,UAAU,EAAqB,GAC/B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,cAAgB,KACrD,SAAM,UAAY,EAClB,EAAM,MAAM,SAAS,EAAM,UAAW,UAAW,CAAE,KAAM,EAAG,IAAK,EAAG,IAAK,MACzE,EAAM,MAAM,SAAS,EAAM,UAAW,QAAS,CAAE,KAAM,EAAG,IAAK,EAAG,IAAK,MACvE,EAAM,MAAM,SAAS,EAAM,UAAW,WAAY,CAAE,KAAM,EAAG,IAAK,EAAG,IAAK,KAC1E,EAAM,MAAM,SAAS,EAAM,UAAW,iBAAkB,CAAE,QAAS,EAAM,uBAAwB,GAAG,SAAU,EAAM,wBAAwB,KAAK,IACjJ,EAAM,MAAM,SAAS,EAAM,UAAW,iBAAkB,CAAE,KAAM,IAChE,EAAM,kBACN,EAAM,kBACN,EAAM,qBACN,EAAM,mBACN,EAAM,aACC,EAEX,SAAoB,UAAU,gBAAkB,WAC5C,MAAmB,KAAK,MAAM,UAAU,CACpC,MAAO,SACP,SAAU,KAEd,EAAa,SAAS,KAAK,UAAW,YAAa,CAAE,KAAM,EAAG,MAAO,QAAS,GAAG,SAAU,KAAK,kBAAkB,KAAK,OACvH,EAAa,SAAS,KAAK,UAAW,YAAa,CAAE,KAAM,EAAG,MAAO,QAAS,GAAG,SAAU,KAAK,kBAAkB,KAAK,OACvH,EAAa,SAAS,KAAK,UAAW,kBAAmB,CAAE,KAAM,IAAM,IAAK,GAAK,IAAK,EAAG,MAAO,cAChG,EAAa,SAAS,KAAK,UAAW,cAAe,CAAE,KAAM,EAAG,IAAK,EAAG,IAAK,GAAI,MAAO,WAE5F,EAAoB,UAAU,kBAAoB,YAC9C,KAAK,UAAU,UAAY,KAAK,IAAI,EAAU,KAAK,UAAU,WAC7D,KAAK,MAAM,WAEf,EAAoB,UAAU,kBAAoB,YAC9C,KAAK,UAAU,UAAY,KAAK,IAAI,EAAU,KAAK,UAAU,WAC7D,KAAK,MAAM,WAEf,EAAoB,UAAU,wBAA0B,YACpD,KAAK,UAAU,UAAU,GAAY,GACrC,KAAK,MAAM,WAEf,EAAoB,UAAU,gBAAkB,WAC5C,KAAK,MAAM,SAAS,KAAK,UAAW,QACpC,KAAK,MAAM,UAAU,CAAE,MAAO,aAAc,GAAG,QAAS,KAAK,kBAAkB,KAAK,QAExF,EAAoB,UAAU,kBAAoB,WAC9C,KAAK,UAAU,KAAO,KAAK,aAC3B,KAAK,MAAM,WAEf,EAAoB,UAAU,WAAa,WACvC,MAAO,GAAE,QAAQ,KAAK,MAAM,WAAW,MAAM,KAAK,KAAK,KAE3D,EAAoB,UAAU,mBAAqB,WAC/C,MAAoB,CAAC,EAAK,SAAS,uBAClB,EAAK,aAAa,kBACxB,EAAE,QAAQ,MAAM,EAAG,eAAe,CAAC,GAAa,MAC9C,eAAe,GAC5B,MAAO,GAAE,UAAU,EAAM,IAE7B,EAAoB,UAAU,mBAAqB,WAC/C,MAAY,OACM,KAAK,MAAM,UAAU,CACnC,MAAO,aACP,SAAU,KAEd,OAAO,KAAK,KAAK,UAAU,WACtB,KAAK,KAAK,cAAc,KAAK,OAC7B,QAAQ,YACT,EAAY,SAAS,EAAM,UAAU,UAAW,GAAK,GAAG,SAAU,EAAM,iBAAiB,KAAK,EAAO,MAEzG,KAAK,gBAAkB,EAAY,UAAU,CAAE,MAAO,eACtD,KAAK,gBAAgB,GAAG,QAAS,KAAK,uBAAuB,KAAK,OAClE,KAAK,kBAAoB,EAAY,UAAU,CAAE,MAAO,iBACxD,KAAK,kBAAkB,GAAG,QAAS,KAAK,yBAAyB,KAAK,QAE1E,EAAoB,UAAU,cAAgB,cAC1C,MAAc,EAAK,aAAa,YAAY,KAC9B,EAAK,aAAa,YAAY,GAC5C,MAAI,IAAW,IAAY,GAChB,GAEP,IAAY,IAAS,EACd,EAEP,GAAW,EACJ,EAAO,WAAW,WAAW,GAAK,EAAO,WAAW,WAAW,GAEnE,GAEX,EAAoB,UAAU,uBAAyB,WACnD,KAAK,2BAA2B,IAChC,KAAK,MAAM,WAEf,EAAoB,UAAU,yBAA2B,WACrD,KAAK,2BAA2B,IAEhC,KAAK,MAAM,WAEf,EAAoB,UAAU,2BAA6B,YACvD,MAAY,KACZ,OAAO,KAAK,KAAK,UAAU,WAAW,QAAQ,YAC1C,EAAM,UAAU,UAAU,GAAO,KAGzC,EAAoB,UAAU,iBAAmB,cAC7C,KAAK,OAAO,KAAK,EAAyB,iBAAkB,EAAK,GACjE,KAAK,uBAET,EAAoB,UAAU,oBAAsB,WAChD,KAAK,cAAc,UACnB,KAAK,YAAY,UACjB,KAAK,eAAe,UACpB,KAAK,mBACL,KAAK,cAET,EAAoB,UAAU,iBAAmB,WAC7C,MAAY,KACZ,KAAK,cAAgB,KAAK,MAAM,UAAU,CACtC,MAAO,YAEX,KAAK,sBAAsB,QAAQ,YAC/B,EAAM,cAAc,SAAS,EAAM,UAAU,QAAS,EAAK,CAAE,KAAM,EAAG,IAAK,EAAG,IAAK,QAEvF,KAAK,cAAc,UAAU,CAAE,MAAO,UAAW,GAAG,QAAS,KAAK,oBAAoB,KAAK,QAE/F,EAAoB,UAAU,oBAAsB,WAChD,MAAY,KACZ,MAAO,QAAO,KAAK,KAAK,UAAU,WAAW,OAAO,YAAsB,MAAO,GAAM,UAAU,UAAU,KAAc,MAE7H,EAAoB,UAAU,oBAAsB,WAChD,MAAY,KACZ,OAAO,KAAK,KAAK,UAAU,SAAS,QAAQ,YACxC,EAAM,UAAU,QAAQ,GAAO,MAEnC,KAAK,MAAM,WAEf,EAAoB,UAAU,WAAa,WACvC,MAAY,KACZ,KAAK,YAAc,KAAK,MAAM,UAAU,CAAE,MAAO,UACjD,KAAK,YAAY,GAAG,QAAS,WACzB,EAAM,OAAO,KAAK,EAAyB,SAE/C,KAAK,eAAiB,KAAK,MAAM,UAAU,CAAE,MAAO,aACpD,KAAK,eAAe,GAAG,QAAS,WAC5B,EAAM,OAAO,KAAK,EAAyB,aAG5C,GACT,EAAK,aACP,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,WAChC,gBACI,KAAK,MAAQ,EACb,KAAK,YAAc,EACnB,KAAK,IAAM,GAAI,QAAO,KAAK,oBAAoB,CAAC,EAAY,UAAU,OACtE,KAAK,MAAQ,KAAK,YAAY,KAAK,YAAY,UAAU,UAAW,KAAK,YAAY,UAAU,QAAS,KAAK,KAEjH,SAAe,UAAU,YAAc,gBACnC,MAAa,KAAK,MAAM,QAAQ,IAAI,WACb,OAAO,KAAK,GAAW,OAAO,YAAsB,MAAO,GAAU,KAAc,OACrF,EAAiB,OAAO,cACzC,MAAQ,GAAI,GAAY,EAAQ,GAAY,GAC7C,IACH,MAAO,GAAO,IAAI,CACd,KAAM,UACN,IAAK,EACL,MAAO,SAAS,GAAI,MAG5B,EAAe,UAAU,gBAAkB,WACvC,MAAO,MAAK,IAAI,QAAQ,EAAG,KAAO,KAAK,YAAY,UAAU,SAEjE,EAAe,UAAU,sBAAwB,WAC7C,MAAO,MAAK,IAAI,QAAQ,EAAG,KAAO,KAAK,YAAY,UAAU,OAEjE,EAAe,UAAU,YAAc,WACnC,MAAO,MAAK,MAAM,QAEtB,EAAe,UAAU,qBAAuB,WAE5C,UADe,EAAK,SAAS,aACtB,IAAa,EAAK,SAAS,cAC9B,EAAW,KAAK,MAAM,OAE1B,MAAO,IAEX,EAAe,UAAU,cAAgB,gBACrC,MAAa,KACC,EAAK,aAAa,YAAY,GAC5C,AAAI,GACA,GAAO,EAAK,gBAAgB,QAAU,EAAe,eAAe,EAAY,EAAU,KAAK,IAAK,KAAK,YAAY,YAEzH,MAAiB,IAAa,EAAK,SAAS,SAC5C,GAAI,GACA,MAAe,CAAC,EAAG,EAAG,EAAG,GAAG,IAAI,YAAiB,MAAO,GAAK,cAAc,SAAS,OACxE,KAAK,IAAI,KAAK,GAC1B,EAAO,EAAK,gBAAgB,OAAS,EAEzC,MAAO,IAEX,EAAe,eAAiB,kBAC5B,MAAgB,EAAU,YACV,EAAU,YACV,EAAU,kBACT,EAAY,KAAK,MAAO,GAAa,GAAY,KACtD,EAAU,YAAc,EAAI,OACxC,MAAO,QAAO,KAAK,MAAM,EAAa,EAAO,EAAW,IAErD,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KAWnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,qBAA0B,uBACtC,EAAY,kBAAuB,oBACnC,EAAY,cAAmB,gBAC/B,EAAY,WAAgB,aAC5B,EAAY,aAAkB,iBAC/B,EAAc,EAAK,aAAgB,GAAK,YAAc,KACzD,MAA4B,YACxB,UAAU,EAAQ,GAClB,aACI,MAAO,GAAO,KAAK,KAAM,KAAO,KAEpC,SAAO,UAAU,KAAO,YACpB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAC5C,KAAK,YAAc,EACnB,KAAK,YAAc,EAAK,YACxB,KAAK,YAAc,KACnB,KAAK,eAAiB,KACtB,KAAK,MAAQ,IAEjB,EAAO,UAAU,OAAS,WACtB,KAAK,kBACL,KAAK,UACL,KAAK,oBACL,KAAK,SACL,KAAK,uBACL,KAAK,eACL,KAAK,mBACL,KAAK,mBAAmB,KAAK,YAAY,YACzC,KAAK,YACL,KAAK,sBACL,KAAK,wBAET,EAAO,UAAU,gBAAkB,WAC/B,KAAK,iBACL,KAAK,oBACL,MAAW,KAAK,KAAK,MAAM,UAAU,EAAK,aAAa,aACvD,KAAK,gBAAkB,SAAS,eAAe,iBAC/C,KAAK,gBAAgB,MAAM,WAAa,UACxC,KAAK,gBAAgB,MAAM,KAAO,EAAK,YAE3C,EAAO,UAAU,aAAe,WAC5B,KAAK,YAAY,cACjB,KAAK,eAAe,eAExB,EAAO,UAAU,cAAgB,WAC7B,KAAK,YAAY,eACjB,KAAK,eAAe,gBAExB,EAAO,UAAU,eAAiB,WAC9B,KAAK,YAAc,GAAI,GAAK,iBAAiB,KAAM,KAAK,aACxD,KAAK,YAAY,OAAO,GAAG,EAAK,sBAAsB,kBAAmB,KAAK,kBAAmB,MACjG,KAAK,YAAY,QAAQ,GAAG,SAAU,KAAK,mBAAmB,KAAK,OACnE,KAAK,YAAY,eAAe,GAAG,QAAS,KAAK,mBAAmB,KAAK,OACzE,KAAK,YAAY,aAAa,GAAG,QAAS,KAAK,oBAAoB,KAAK,OACxE,KAAK,YAAY,WAAW,GAAG,QAAS,KAAK,UAAU,KAAK,QAEhE,EAAO,UAAU,mBAAqB,WAClC,KAAK,OAAO,KAAK,EAAY,uBAEjC,EAAO,UAAU,kBAAoB,YACjC,KAAK,mBAAmB,QAAU,GAEtC,EAAO,UAAU,UAAY,WACzB,KAAK,oBACL,KAAK,OAAO,KAAK,EAAY,WAAY,CACrC,YAAa,KAAK,YAClB,WAAY,MAGpB,EAAO,UAAU,mBAAqB,YAClC,KAAK,OAAO,KAAK,EAAY,kBAAmB,IAEpD,EAAO,UAAU,oBAAsB,WACnC,MAAO,WAAU,KAAM,OAAQ,OAAQ,WACnC,QACY,KACZ,MAAO,aAAY,KAAM,YAErB,MADA,GAAc,OAAO,QAAQ,+BAAiC,KAAK,YAAc,YAC7E,IAAgB,GACT,CAAC,GAEZ,MAAK,gBACL,KAAK,KAAK,aAAa,OAAO,KAAK,aACnC,KAAK,KAAK,aAAa,cACvB,KAAK,KAAK,aACL,eACA,KAAK,WACN,AAAa,GAAW,EAAM,YAC9B,EAAM,OAAO,KAAK,EAAY,iBAE7B,MAAM,YACP,AAAa,GAAwB,EAAM,cAE1C,QAAQ,WACT,EAAM,iBAEH,CAAC,SAIpB,EAAO,UAAU,kBAAoB,WACjC,MAAY,OACe,KAAK,KAAK,aAAa,oBACvB,KAAK,IAAI,MAAM,KAAM,GAAwB,GAAK,IACxD,OAAO,qBAAsB,EAAqB,YACvE,GAAI,CAAC,EAED,OAEJ,MAAkB,SAAS,GAC3B,GAAI,CAAC,EAED,OAEJ,MAAmB,EAAqB,SAAS,GACjD,GAAI,GACA,AAAa,GAAW,EACxB,OAEJ,KAAK,IAAI,WAAW,MAAQ,GAC5B,KAAK,IAAI,WAAW,QAAU,GAC9B,KAAK,gBACL,MAAqB,SAAS,SAAS,GAAI,KAAK,aAAc,CAAE,YAAa,IAC7E,KAAK,KAAK,aAAa,IAAI,GAC3B,KAAK,KAAK,aAAa,cACvB,KAAK,KAAK,aACL,eACA,KAAK,WACN,AAAY,GAAW,EACvB,EAAM,OAAO,KAAK,EAAY,aAAc,KAE3C,MAAM,WACP,AAAa,GAAsB,KAG3C,EAAO,UAAU,gBAAkB,WAC/B,MAAY,OACW,KAAK,YAAY,UAAU,iBAC5B,KAAK,YAAY,UAAU,iBAC3B,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,WAAa,IAAqB,OACxG,GAAI,EAAkB,GAClB,AAAa,GAA0B,EAA0B,EAAwB,EAC5E,GAAoB,GAAkB,GAAyB,EAAiB,cAC7F,WAEC,AAAI,GAAkB,GACV,IAAgC,EAAsD,EAA2B,EAAiB,cAE/I,KAAK,YAAY,UAAU,eAAiB,EAC5C,KAAK,eAAe,WAExB,KAAK,IAAI,WAAW,MAAQ,GAC5B,KAAK,IAAI,WAAW,QAAU,GAC9B,KAAK,gBACL,KAAK,oBACO,GAAqB,KAAK,YAA4B,EAAE,KAAK,KAAK,YAAa,SAC3F,KAAK,KAAK,aACL,cACA,KAAK,eAQL,MAAM,eAGX,KAAK,KAAK,aACL,eACA,KAAK,cAGL,MAAM,eAGN,QAAQ,WACT,EAAM,IAAI,WAAW,MAAQ,EAC7B,EAAM,IAAI,WAAW,QAAU,GAC/B,EAAM,kBAGd,EAAO,UAAU,kBAAoB,WACjC,KAAK,YAAY,UAAU,EAAI,OAAO,KAAK,QAAQ,KAAK,UAAU,EAAG,IACrE,KAAK,YAAY,UAAU,EAAI,OAAO,KAAK,QAAQ,KAAK,UAAU,EAAG,IACrE,KAAK,YAAY,MAAQ,KAAK,MAAM,IAAI,YAAkB,MAAO,GAAK,cACtE,KAAK,YAAY,MAAQ,EAAO,kBAAkB,KAAK,YAAY,YAAa,KAAK,YAAY,QAErG,EAAO,kBAAoB,cACvB,MAAkB,EAAM,OAAO,cAC3B,MAAgB,MAAO,GAAK,OAAO,QAAc,YACjD,MAAO,GACD,EAAM,EAAK,OAAO,OAClB,GACP,GACH,GAAI,IAAgB,EAChB,MAAO,GAAO,mBAAmB,GAErC,MAAc,KAAK,MAAM,EAAc,MACxB,KAAK,MAAM,EAAc,KACvB,KAAK,MAAM,EAAc,KAC1C,MAAO,CAAC,EAAS,EAAU,IAE/B,EAAO,mBAAqB,YACxB,MAAc,KAAK,MAAM,EAAoB,OAC9B,KAAK,MAAM,EAAoB,OAC7B,EACjB,MAAO,CAAC,EAAS,EAAU,IAE/B,EAAO,UAAU,kBAAoB,WACjC,KAAK,eAAiB,GAAI,GAAK,oBAAoB,KAAM,KAAK,YAAY,WAC1E,KAAK,eAAe,OAAO,GAAG,EAAK,yBAAyB,iBAAkB,KAAK,kBAAmB,MACtG,KAAK,eAAe,OAAO,GAAG,EAAK,yBAAyB,MAAO,KAAK,oBAAqB,MAC7F,KAAK,eAAe,OAAO,GAAG,EAAK,yBAAyB,SAAU,KAAK,sBAAuB,OAEtG,EAAO,UAAU,oBAAsB,WACnC,KAAK,kBAAkB,QAAQ,YAAkB,MAAO,GAAK,YAC7D,KAAK,oBACL,KAAK,gBAET,EAAO,UAAU,gBAAkB,WAC/B,MAAe,KAAK,SAAS,OAC7B,MAAO,GACD,KAAK,MAAM,QACX,KAAK,MAAM,OAAO,YAAkB,MAAO,CAAC,EAAK,iBAE3D,EAAO,UAAU,sBAAwB,WACrC,MAAsB,OAAO,OAAO,KAAK,YAAY,UAAU,WAAW,KAAK,YAAmB,MAAO,KAAU,KACnH,GAAI,IAAoB,GAEpB,OAEJ,KAAK,sBACL,KAAK,iBAET,EAAO,UAAU,kBAAoB,WAKjC,UAJgB,EAAK,SAAS,KAAO,IACvB,EAAE,MAAM,KAAK,MAAO,SACrB,KAAK,IAAI,GAAY,KAA6B,OAAS,EAAQ,IAAK,IAAc,IACnF,KAAK,KAAK,OACX,EAAY,EAAG,EAAM,EAAQ,IACxC,KAAK,KAAK,UAAU,IAG5B,EAAO,UAAU,cAAgB,WAC7B,MAAsB,KAAK,YAAY,YAClB,GAAI,GAAK,eAAe,KAAM,KAAK,eAC5B,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,WAAa,EAAgB,iBAAmB,OAC5H,GAAI,IAA0B,EAAgB,eAC1C,OAEJ,UAAe,EAAgB,SAAU,EAAM,IAAM,KACjD,MAAiB,CAAC,CAAC,KAAK,KAAK,UAAU,EAAK,GAC5C,AAAI,IAAe,IACf,MAAK,KAAK,SACV,KAAK,KAAK,qBAEd,UAAkB,EAAG,EAAS,KAAK,KAAK,QAAS,KAC7C,GAAI,KAAK,WAAW,EAAQ,KAAS,GACjC,SAEJ,MAAmB,EAAe,kBAClC,GAAI,IAAiB,GACjB,SAEJ,MAAe,EAAe,gBAChB,EAAK,aAAa,YAAY,KACzB,IAAW,GAAK,IAAW,EAAK,SAAS,QAAU,EACtE,GAAI,GAAW,GACX,MAAwB,EAAe,wBACvC,GAAI,IAAsB,GACtB,SAGR,MAAW,KAAK,KAAK,UAAU,EAAK,KACvB,EAAe,cAAc,EAAU,EAAgB,SAAU,GAE9E,GADA,KAAK,QAAQ,EAAU,EAAM,EAAQ,IACjC,IAAa,EAAgB,gBACzB,EAAE,IAA0B,EAAgB,eAC5C,UAMpB,EAAO,UAAU,kBAAoB,WACjC,MAAmB,KAAK,sBACxB,KAAK,cAAc,YAAY,IAEnC,EAAO,UAAU,oBAAsB,WACnC,MAAY,KACZ,MAAO,QAAO,KAAK,KAAK,YAAY,UAAU,WAAW,OAAO,YAAiB,MAAO,GAAM,YAAY,UAAU,UAAU,KAAS,MAE3I,EAAO,UAAU,QAAU,WACvB,MAAW,KAAK,6BAChB,KAAK,KAAO,GAAI,GAAK,WAAW,KAAM,EAAK,SAAS,QAAS,GAC7D,KAAK,KAAK,MAAQ,IAClB,KAAK,KAAK,GAAG,EAAK,gBAAgB,QAAS,KAAK,SAAU,MAC1D,KAAK,KAAK,GAAG,EAAK,gBAAgB,WAAY,KAAK,YAAa,OAEpE,EAAO,UAAU,2BAA6B,WAC1C,MAAW,KAAK,YAAY,MAAM,IAAI,YAAkB,MAAO,GAAK,QACvD,KAAK,IAAI,MAAM,KAAM,GAClC,MAAO,MAAK,IAAI,EAAK,SAAS,KAAM,EAAS,IAEjD,EAAO,UAAU,SAAW,cAE5B,EAAO,UAAU,YAAc,YAC3B,MAAY,OACQ,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,MAAQ,IAC5E,EAAc,QAAQ,YAClB,EAAK,UACL,EAAE,KAAK,EAAM,MAAO,KAExB,MAAoB,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,IAAM,IAC1E,EAAc,QAAQ,YAClB,EAAK,MACL,EAAK,GAAK,EAAK,WAAW,aAGlC,EAAO,UAAU,OAAS,WACtB,KAAK,IAAM,KAAK,IAAI,MAAM,EAAG,EAAG,SAAU,gBAC1C,KAAK,IAAI,UAAU,IAAM,IACzB,KAAK,IAAI,EAAI,KAAK,KAAK,WAAa,EACpC,KAAK,eAAe,IAAI,KAAK,MAEjC,EAAO,UAAU,mBAAqB,WAClC,MAAO,CACH,EAAG,KAAK,IAAI,EACZ,EAAG,KAAK,IAAI,EAAI,KAAK,IAAI,OAAS,MAG1C,EAAO,UAAU,kBAAoB,WACjC,KAAK,eAAiB,KAAK,IAAI,UAAU,EAAG,GAC5C,KAAK,eAAe,KAAO,SAE/B,EAAO,UAAU,qBAAuB,WACpC,KAAK,sBAAwB,KAAK,IAAI,UAAU,EAAG,GACnD,KAAK,sBAAsB,KAAO,iBAEtC,EAAO,UAAU,aAAe,WAC5B,KAAK,cAAgB,KAAK,IAAI,KAAK,EAAG,GACtC,KAAK,cAAc,eAAe,EAAG,UACrC,KAAK,cAAc,UAAU,EAAG,GAChC,KAAK,UAAY,KAAK,IAAI,MAAM,EAAG,EAAG,SAAU,aAChD,KAAK,UAAU,KAAO,YACtB,KAAK,UAAU,iBACf,KAAK,UAAU,MAAM,OAAS,UAC9B,KAAK,UAAU,GAAG,OAAO,MAAM,OAAO,SAAU,KAAK,mBAAoB,MACzE,KAAK,UAAU,GAAG,OAAO,MAAM,OAAO,KAAM,KAAK,gBAAiB,MAClE,KAAK,MAAM,aAAa,KAAK,WAC7B,MAAsB,KAAK,YAAY,UACvC,AAAI,EAAgB,IAAM,GAAK,EAAgB,IAAM,EACjD,MAAK,UAAU,EAAI,KAAK,KAAK,WAAa,EAC1C,KAAK,UAAU,EAAI,CAAC,EAAK,WAAW,UAAY,KAGhD,MAAK,UAAU,EAAI,EAAgB,EACnC,KAAK,UAAU,EAAI,EAAgB,GAEvC,KAAK,mBAAqB,KAAK,IAAI,UAAU,EAAG,GAChD,KAAK,mBAAmB,KAAO,sBAC/B,KAAK,mBAAmB,QAAU,EAAgB,QAClD,KAAK,mBAAmB,IAAI,KAAK,eACjC,KAAK,mBAAmB,IAAI,KAAK,WACjC,KAAK,uBAET,EAAO,UAAU,gBAAkB,gBAC/B,KAAK,UAAU,EAAI,OAAO,KAAK,MAAM,EAAO,EAAG,KAAK,KAAK,YACzD,KAAK,UAAU,EAAI,OAAO,KAAK,MAAM,EAAO,CAAC,KAAK,KAAK,YAAa,KAAK,qBAAqB,GAC9F,KAAK,uBAET,EAAO,UAAU,oBAAsB,WACnC,MAAS,KAAK,uBAA+B,EAAG,IAAY,EAAG,EAC/D,KAAK,cAAc,MAAM,EAAQ,EAAQ,KAAK,UAAU,EAAG,KAAK,UAAU,IAE9E,EAAO,UAAU,mBAAqB,WAClC,GAAI,KAAK,YAAY,UAAU,WAAa,GACxC,OAEJ,MAAU,EAAK,WAAW,UAAY,EACtC,KAAK,UAAU,EAAI,OAAO,KAAK,KAAK,GAAG,KAAK,UAAU,EAAG,GACzD,KAAK,UAAU,EAAI,OAAO,KAAK,KAAK,GAAG,KAAK,UAAU,EAAG,GACzD,KAAK,uBAET,EAAO,UAAU,iBAAmB,WAChC,KAAK,cAAgB,GAAI,GAAK,aAAa,MAC3C,KAAK,cAAc,EAAI,IACvB,KAAK,cAAc,EAAI,IACvB,KAAK,cAAc,OACnB,KAAK,cAAc,YAAY,KAAK,uBACpC,KAAK,IAAI,SAAS,KAAK,gBAE3B,EAAO,UAAU,UAAY,WACzB,MAAY,KACZ,KAAK,YAAY,MAAM,QAAQ,YAC3B,MAAW,EAAM,KAAK,UAAU,EAAW,IAAK,EAAW,UAChD,EAAM,QAAQ,EAAW,KAAM,EAAM,EAAW,OAAQ,IACnE,EAAK,cAAgB,EAAW,iBAGxC,EAAO,UAAU,oBAAsB,WACnC,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MACpE,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,cAAe,KAAK,eAAgB,OAE1E,EAAO,UAAU,cAAgB,cAC7B,MAAW,EAAQ,KAAK,YAAoB,MAAO,GAAO,OAAS,SACnE,GAAI,GACA,KAAK,YAAY,GACjB,OAEJ,MAAe,EAAQ,KAAK,YAAiB,MAAO,GAAI,QAAQ,UAAY,cAC5E,GAAI,GACA,KAAK,gBAAgB,GACrB,OAEJ,MAAe,EAAQ,KAAK,YAAoB,MAAO,GAAO,QAAQ,UAAY,kBAClF,GAAI,GACA,KAAK,SAAS,GACd,KAAK,KAAK,qBACV,KAAK,cAAc,OACnB,OAEJ,MAAW,EAAQ,KAAK,YAAoB,MAAO,GAAO,QAAQ,UAAY,SAC9E,GAAI,GACA,KAAK,YAAY,GACjB,OAEJ,KAAK,qBACL,KAAK,KAAK,qBACV,KAAK,cAAc,QAEvB,EAAO,UAAU,YAAc,YAC3B,AAAI,EAAK,WACL,EAAK,YAAY,IAGjB,CAAI,KAAK,SAAS,SAAW,IACzB,KAAK,qBAET,EAAK,YAAY,MAGzB,EAAO,UAAU,gBAAkB,YAC/B,MAAgB,EAAS,QAAQ,OACjC,AAAI,KAAK,SAAS,OACd,KAAK,KAAK,eAAe,GAGzB,MAAK,KAAK,qBACV,KAAK,KAAK,eAAe,KAGjC,EAAO,UAAU,YAAc,YAC3B,AAAI,EAAK,WACL,MAAK,KAAK,mBAAmB,GAC7B,KAAK,cAAc,QAGnB,CAAI,KAAK,SAAS,SAAW,IACzB,KAAK,KAAK,qBAEd,KAAK,KAAK,gBAAgB,GAC1B,KAAK,iBAAiB,KAG9B,EAAO,UAAU,iBAAmB,YAChC,MAAS,EAAK,qBAAwB,EAAG,IAAO,EAAG,EACnD,KAAK,cAAc,EAAI,EACvB,KAAK,cAAc,EAAI,EACvB,KAAK,cAAc,QAEvB,EAAO,UAAU,mBAAqB,WAClC,KAAK,mBAAmB,QAAQ,YAAkB,MAAO,GAAK,YAAY,OAE9E,EAAO,UAAU,SAAW,YACxB,MAAY,OACM,EAAS,QAAQ,EAAK,aACzB,KAAK,KAAK,cAAc,IAAI,YACvC,MAAiB,EAAM,iBAAiB,EAAa,EAAK,OAC/C,EAAM,QAAQ,EAAa,EAAM,GAC5C,SAAK,cAAgB,GACd,IAEX,AAAI,IAAgB,KAAK,YAAY,UAAU,gBAC3C,MAAK,YAAY,UAAU,gBAAkB,EAAS,OACtD,KAAK,eAAe,YAG5B,EAAO,UAAU,iBAAmB,cAChC,MAAa,KACC,EAAK,aAAa,YAAY,GAC5C,MAAI,IACA,GAAO,EAAK,gBAAgB,QAAU,EAAK,eAAe,eAAe,EAAK,KAAK,YAAY,UAAU,SAAU,OAAO,KAAK,IAAK,KAAK,YAAY,YAElJ,GAEX,EAAO,UAAU,QAAU,kBAGvB,GAFA,AAAI,IAAW,QAAU,GAAS,IAClC,AAAI,IAAY,QAAU,GAAU,IAChC,EAAK,IAAM,EAEX,OAEJ,MAAiB,CAAC,CAAC,KAAK,cAAc,EAAK,OAAQ,EAAK,KACxD,GAAI,GACA,AAAa,GAA2B,EAAK,OAAmB,EAAK,IACrE,OAEJ,MAAW,GAAI,GAAK,WAAW,KAAM,SAAU,GAC/C,SAAK,EAAI,EAAK,EACd,EAAK,EAAI,EAAK,EACd,EAAK,OAAS,EAAK,OACnB,EAAK,IAAM,EAAK,IAChB,EAAK,WAAW,GAChB,EAAK,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,cAAe,MAC/D,KAAK,eAAe,IAAI,GACxB,KAAK,MAAM,KAAK,GAChB,KAAK,YAAY,GACjB,KAAK,eAAe,GACpB,AAAI,IAAY,IACZ,KAAK,OAAO,IAAI,CACZ,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,CAAE,KAAM,IAAM,GAAI,GACzB,MAAO,CAAE,KAAM,EAAG,GAAI,KAGvB,GAEX,EAAO,UAAU,WAAa,cAC1B,MAAO,CAAC,KAAK,cAAc,EAAQ,IAEvC,EAAO,UAAU,cAAgB,cAC7B,MAAO,MAAK,MAAM,KAAK,YACnB,MAAO,GAAK,SAAW,GAAU,EAAK,MAAQ,KAGtD,EAAO,UAAU,cAAgB,YAC7B,EAAE,KAAK,KAAK,MAAO,IAEvB,EAAO,UAAU,YAAc,YAC3B,MAAW,GAAI,GAAK,eAAe,KAAM,GACzC,KAAK,eAAe,IAAI,IAE5B,EAAO,UAAU,eAAiB,YAC9B,MAAa,EAAK,aAAa,kBACjB,EAAO,SAAS,EAAK,UACnC,GAAI,IAAY,GACZ,OAEJ,MAAa,CAAE,EAAG,GAAI,EAAG,CAAC,EAAK,cAAgB,EAAI,MACjC,GAAI,GAAK,uBAAuB,KAAM,EAAM,GAC9D,KAAK,sBAAsB,IAAI,IAEnC,EAAO,UAAU,eAAiB,kBAC9B,MAAY,KAAK,SAAS,GAC1B,GAAI,GAAS,EAAM,YACf,MAAa,EAAM,OAAO,EAAK,gBAAgB,UAC7B,EAAK,EAAI,GAAK,IAChB,KAAK,IAAI,EAAG,EAAS,GACrC,EAAM,aAAa,EAAK,gBAAgB,OAAQ,GAChD,OAEJ,MAAW,GAAM,EAAI,EAAI,GACzB,KAAK,QAAQ,KAAK,SAAW,EAAK,WAAW,UAAY,GAE7D,EAAO,UAAU,SAAW,YACxB,MAAW,EAAQ,KAAK,YAAoB,MAAO,GAAO,QAAQ,UAAY,SAC9E,GAAI,CAAC,EACD,MAAO,MAEX,MAAc,EAAK,aAAa,gBAAgB,SAAS,EAAK,UAC9D,MAAI,KAAY,GACL,KAEJ,GAEX,EAAO,UAAU,qBAAuB,WACpC,KAAK,SAAW,KAAK,MAAM,SAAS,OAAO,OAAO,MAAM,SAAS,SAAS,OAC1E,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,WAAY,MACrD,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,UAAW,MACxD,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,aAAc,MAC1D,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,YAAa,MACxD,KAAK,MAAM,SAAS,GAAG,iBAAkB,KAAK,YAAa,MAC3D,KAAK,MAAM,SAAS,GAAG,aAAc,KAAK,kBAAkB,KAAK,KAAM,EAAG,KAC1E,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,kBAAkB,KAAK,KAAM,EAAG,IAC7E,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,kBAAkB,KAAK,KAAM,EAAG,IAC5E,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,kBAAkB,KAAK,KAAM,GAAI,IAC7E,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,uBAAuB,KAAK,KAAM,IAC9E,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,uBAAuB,KAAK,KAAM,KAC/E,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,sBAAuB,MACnE,KAAK,MAAM,SAAS,GAAG,uBAAwB,KAAK,mBAAmB,KAAK,KAAM,KAClF,KAAK,MAAM,SAAS,GAAG,yBAA0B,KAAK,mBAAmB,KAAK,KAAM,IACpF,KAAK,MAAM,SAAS,GAAG,qBAAsB,KAAK,kBAAmB,MACrE,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,yBAAyB,KAAK,KAAM,IAC/E,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,yBAAyB,KAAK,KAAM,IAC/E,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,yBAAyB,KAAK,KAAM,IACjF,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,yBAAyB,KAAK,KAAM,KAEpF,EAAO,UAAU,WAAa,WAC1B,AAAI,KAAK,SAAS,OACd,KAAK,oBAGL,KAAK,mBAGb,EAAO,UAAU,yBAA2B,YACxC,KAAK,0BAA0B,GAC/B,KAAK,8BAA8B,IAEvC,EAAO,UAAU,0BAA4B,YACzC,KAAK,uBAAuB,QAAQ,YAChC,MAAmB,EAAK,cAAc,SAAS,GAC/C,EAAS,aAAa,EAAK,gBAAgB,MAAO,MAG1D,EAAO,UAAU,8BAAgC,YAC7C,MAAY,EAAK,kBAAkB,SAAS,GAC5C,KAAK,2BAA2B,QAAQ,YAAmB,MAAO,GAAM,aAAa,EAAK,gBAAgB,MAAO,MAErH,EAAO,UAAU,yBAA2B,WACxC,MAAO,MAAK,mBAAmB,OAAO,YAAkB,MAAO,GAAK,WAAa,EAAK,SAAS,uBAEnG,EAAO,UAAU,qBAAuB,WACpC,MAAO,MAAK,mBAAmB,OAAO,YAAkB,MAAO,GAAK,WAAa,EAAK,SAAS,YAEnG,EAAO,UAAU,kBAAoB,cACjC,MAAY,OACQ,KAAK,qBACN,EAAc,IAAI,YAAkB,MAAO,GAAM,KAAK,UAAU,EAAK,IAAK,EAAK,YACnF,EAAc,IAAI,YAC7B,MAAO,GAAM,KAAK,UAAU,EAAK,IAAM,EAAW,EAAK,OAAS,OAEjD,EAAE,QAAQ,MAAM,EAAG,eAAe,CAAC,GAAW,MAC9C,EAAa,MAAM,YAClC,GAAI,CAAC,EACD,MAAO,GAEX,GAAI,EAAK,IAAM,EACX,MAAO,GAEX,MAAiB,EAAM,cAAc,EAAK,OAAQ,EAAK,KACvD,MAAO,CAAC,IAEZ,AAAI,GACA,KAAK,UAAU,EAAe,EAAc,IAGpD,EAAO,UAAU,UAAY,gBACzB,EAAM,QAAQ,YACV,EAAK,KAAO,EACZ,EAAK,QAAU,EACf,EAAK,GAAK,EAAK,WAAW,UAAY,EACtC,EAAK,GAAK,EAAK,WAAW,UAAY,KAG9C,EAAO,UAAU,YAAc,WAC3B,MAAY,OACS,KAAK,YAAY,UAAU,eAChD,KAAK,mBAAmB,QAAQ,YAC5B,AAAI,EAAK,WAAa,GAClB,EAAM,YAAY,UAAU,iBAEhC,EAAK,YAET,KAAK,eAAe,WAExB,EAAO,UAAU,iBAAmB,WAChC,MAAO,MAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,cAE3D,EAAO,UAAU,uBAAyB,YACtC,AAAI,IAAS,QAAU,GAAO,GAC9B,MAAW,WAAW,KAAK,gBAAgB,MAAM,OAAS,IAC5C,EAAO,OAAO,KAAK,KAAK,GAAQ,GAC9C,EAAU,KAAK,IAAI,GAAK,GACxB,KAAK,gBAAgB,MAAM,KAAO,EAAQ,WAC1C,KAAK,KAAK,MAAM,UAAU,EAAK,aAAa,YAAa,IAE7D,EAAO,UAAU,sBAAwB,WACrC,MAAW,EACX,KAAK,gBAAgB,MAAM,KAAO,EAAK,WACvC,KAAK,KAAK,MAAM,UAAU,EAAK,aAAa,YAAa,IAE7D,EAAO,UAAU,mBAAqB,YAClC,MAAkB,KAAK,KAAK,OAAO,QACnB,EAAY,WAAW,MAAM,EAAG,MACnC,WAAW,KACR,EAAS,GAAK,EAC9B,EAAY,WAAa,EAAY,MAEzC,EAAO,UAAU,kBAAoB,WACjC,KAAK,MAAM,gBAEf,EAAO,UAAU,aAAe,WAC5B,KAAK,QAAQ,KAAK,QAAU,GAEhC,EAAO,UAAU,YAAc,aAG/B,EAAO,UAAU,uBAAyB,WACtC,KAAK,OAAO,MAAM,WAAa,CAAC,KAAK,OAAO,MAAM,WACtC,GAA2B,MAAK,OAAO,MAAM,WAAa,MAAQ,OAElF,EAAO,UAAU,aAAe,aAGhC,EAAO,UAAU,mBAAqB,WAClC,GAAI,KAAK,OAAO,OAAO,QAAU,GAC7B,OAEJ,KAAK,OAAO,MAAM,UAAY,CAAC,KAAK,OAAO,MAAM,UACjD,AAAI,KAAK,OAAO,MAAM,YAAc,IAChC,KAAK,OAAO,MAAM,aAAa,SAGvC,EAAO,UAAU,SAAW,WACxB,KAAK,YACL,KAAK,aACL,KAAK,oBACL,KAAK,0BACL,KAAK,gBAET,EAAO,UAAU,UAAY,WACzB,MAAuB,KAAK,KAAK,oBAClB,EAAK,OAAO,WAAa,MAC5B,EAAW,EACvB,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,EAAK,GAAK,OAAO,WAAa,KAAK,KAAK,kBAAoB,GAAS,EAC/E,KAAK,KAAK,EAAI,EAAK,OAAO,YAAc,IAE5C,EAAO,UAAU,WAAa,WAC1B,KAAK,eAAe,MAAQ,KAAK,KAAK,MACtC,KAAK,eAAe,EAAI,KAAK,KAAK,EAClC,KAAK,eAAe,EAAI,KAAK,KAAK,GAEtC,EAAO,UAAU,kBAAoB,WACjC,KAAK,sBAAsB,MAAQ,KAAK,KAAK,MAC7C,KAAK,sBAAsB,EAAI,KAAK,KAAK,EACzC,KAAK,sBAAsB,EAAI,KAAK,KAAK,GAE7C,EAAO,UAAU,wBAA0B,WACvC,KAAK,mBAAmB,MAAQ,KAAK,KAAK,MAC1C,KAAK,mBAAmB,EAAI,KAAK,KAAK,EACtC,KAAK,mBAAmB,EAAI,KAAK,KAAK,GAE1C,EAAO,UAAU,aAAe,WAC5B,MAAa,KAAK,QAAQ,KAC1B,EAAO,YAAY,EAAG,EAAG,EAAK,OAAO,WAAY,EAAK,OAAO,cAEjE,EAAO,UAAU,aAAe,aAEhC,EAAO,UAAU,OAAS,gBAE1B,EAAO,UAAU,SAAW,WACxB,KAAK,iBAET,EAAO,UAAU,cAAgB,WAC7B,KAAK,gBAAgB,MAAM,WAAa,SACxC,KAAK,gBAAkB,KACvB,AAAI,KAAK,aACL,KAAK,YAAY,UAErB,AAAI,KAAK,gBACL,KAAK,eAAe,WAGrB,GACT,OAAO,OACT,EAAK,OAAS,IACf,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,YAClC,UAAU,EAAkB,GAC5B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,cAAgB,GACtB,EAAM,KAAO,cACb,EAAM,eACN,EAAM,SAAS,GACf,EAAM,qBACN,EAAM,qBACC,EAEX,SAAiB,UAAU,aAAe,WACtC,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,SAAU,oBACtD,KAAK,IAAI,KAAK,YAElB,EAAiB,UAAU,SAAW,YAClC,MAAc,SAAW,IACb,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,MAAQ,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAChD,KAAK,MAAM,UAAU,GAAK,IAC1B,KAAK,IAAI,KAAK,QAElB,EAAiB,UAAU,mBAAqB,WAC5C,KAAK,gBAAkB,KAAK,MAAM,IAAI,OAAO,SAAU,oBAAqB,MAC5E,KAAK,gBAAgB,EAAI,KAAK,UAAU,KAAO,KAAK,gBAAgB,aAAe,EAAI,KAAK,eAEhG,EAAiB,UAAU,mBAAqB,WAC5C,KAAK,gBAAkB,KAAK,MAAM,IAAI,OAAO,SAAU,oBAAqB,MAC5E,KAAK,gBAAgB,EAAI,KAAK,UAAU,MAAQ,KAAK,gBAAgB,aAAe,EAAI,KAAK,eAE1F,GACT,OAAO,YAAY,WACrB,EAAK,iBAAmB,IACzB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAU,UAAU,KAAO,YACvB,KAAK,YAAc,EAAK,aAE5B,EAAU,UAAU,OAAS,WACzB,KAAK,gBACL,KAAK,iBAET,EAAU,UAAU,cAAgB,WAChC,KAAK,WAAa,GAAI,GAAK,iBAAiB,KAAM,KAAK,YAAY,aACnE,KAAK,IAAI,SAAS,KAAK,aAE3B,EAAU,UAAU,cAAgB,WAChC,KAAK,WAAa,KAAK,IAAI,OAAO,SAAU,gBAEhD,EAAU,UAAU,SAAW,WAC3B,KAAK,kBACL,KAAK,mBAET,EAAU,UAAU,gBAAkB,WAClC,KAAK,WAAW,MAAQ,IACxB,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,KAAK,WAAW,YAAY,OAAS,EAAI,IAEjE,EAAU,UAAU,gBAAkB,WAClC,MAAa,GACb,KAAK,WAAW,EAAI,EAAK,OAAO,WAAa,EAC7C,KAAK,WAAW,EAAI,EAAK,OAAO,YAAc,EAAS,GAE3D,EAAU,UAAU,SAAW,aAExB,GACT,OAAO,OACT,EAAK,UAAY,IAClB,MAAS,MAAO,KAGnB,SACA,AAAC,aACG,MAAkB,OAAO,YAAY,cACL,YAC5B,UAAU,EAAY,GACtB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAW,UAAU,KAAO,YACxB,KAAK,YAAc,EAAO,EAAK,YAAc,EAC7C,KAAK,YAAc,KAAK,eAAe,KAAK,aAC9B,GAA0B,KAAK,YAC7C,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAC5C,KAAK,OAAS,KACd,KAAK,UAAY,MAErB,EAAW,UAAU,eAAiB,YAClC,MAAoB,KAAK,KAAK,aAAa,MAAM,GACjD,MAAI,GACO,KAAK,KAAK,aAAa,IAAI,GAE/B,KAAK,KAAK,aAAa,OAAO,IAEzC,EAAW,UAAU,OAAS,WAC1B,KAAK,gBACL,KAAK,uBACL,KAAK,qBAET,EAAW,UAAU,cAAgB,WACjC,KAAK,WAAa,KAAK,IAAI,MAAM,EAAG,EAAG,SAAU,KAAK,YAAY,YAClE,KAAK,WAAW,UAAU,GAAK,IAEnC,EAAW,UAAU,qBAAuB,WACxC,KAAK,MAAM,SAAS,KAAK,YAAa,KAAK,QAAS,MACpD,KAAK,MAAM,SAAS,KAAK,YAAa,KAAK,mBAAoB,MAC/D,KAAK,MAAM,SAAS,KAAK,cAAe,KAAK,iBAAkB,OAEnE,EAAW,UAAU,mBAAqB,WACtC,KAAK,MAAM,MAAM,EAAK,SAAS,gBAAiB,CAAE,YAAa,KAAK,eAExE,EAAW,UAAU,QAAU,WAC3B,KAAK,KAAK,YAAY,EAAK,SAAS,kBAAmB,EAAK,SAAS,kBAAmB,CAAE,YAAa,KAAK,eAEhH,EAAW,UAAU,cAAgB,WACjC,KAAK,UAAU,KAAK,YAAc,IAEtC,EAAW,UAAU,cAAgB,WACjC,KAAK,UAAU,KAAK,YAAc,IAEtC,EAAW,UAAU,UAAY,YAC7B,MAAmB,KAAK,KAAK,aAAa,MAAM,GAChD,GAAI,IAAiB,IACjB,AAAa,GAAW,EACxB,OAEJ,KAAK,MAAM,MAAM,EAAK,SAAS,kBAAmB,CAAE,YAAa,KAErE,EAAW,UAAU,iBAAmB,WACpC,KAAK,MAAM,MAAM,EAAK,SAAS,iBAEnC,EAAW,UAAU,kBAAoB,WACrC,KAAK,OAAS,KAAK,YAAY,EAAK,SAAS,aAAc,KAAK,aAChE,KAAK,OAAO,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,KAAK,qBAAsB,MAC9E,KAAK,OAAO,OAAO,GAAG,EAAK,YAAY,kBAAmB,KAAK,mBAAoB,MACnF,KAAK,OAAO,OAAO,GAAG,EAAK,YAAY,cAAe,KAAK,iBAAkB,MAC7E,KAAK,OAAO,OAAO,KAAK,EAAK,YAAY,WAAY,KAAK,gBAAiB,MAC3E,KAAK,OAAO,OAAO,KAAK,EAAK,YAAY,aAAc,KAAK,UAAW,MACvE,KAAK,OAAO,OAAO,KAAK,EAAK,YAAY,qBAAsB,KAAK,mBAAoB,OAE5F,EAAW,UAAU,qBAAuB,WACxC,KAAK,UAAY,KAAK,YAAY,EAAK,SAAS,iBAAkB,CAAE,YAAa,KAAK,cACtF,KAAK,UAAU,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,KAAK,aAAc,OAE7E,EAAW,UAAU,aAAe,WAChC,KAAK,OAAO,IAAM,KAAK,UACvB,KAAK,OAAO,eACZ,KAAK,UAAU,WAAW,GAAG,EAAY,QAAS,KAAK,kBAAmB,MAC1E,KAAK,UAAU,WAAW,gBAAgB,KAAK,EAAY,MAAO,KAAK,cAAe,MACtF,KAAK,UAAU,WAAW,gBAAgB,KAAK,EAAY,MAAO,KAAK,cAAe,MACtF,KAAK,UAET,EAAW,UAAU,kBAAoB,cACrC,AAAI,EAAQ,MAAM,SACd,KAAK,OAAO,oBAGZ,KAAK,OAAO,mBAGpB,EAAW,UAAU,mBAAqB,YACtC,KAAK,WAAW,SAAS,GACzB,KAAK,WAAW,UAAU,GAAK,IAEnC,EAAW,UAAU,gBAAkB,YACnC,KAAK,MAAM,MAAM,EAAK,SAAS,cAAe,IAElD,EAAW,UAAU,YAAc,cAC/B,MAAO,MAAK,MAAM,OAAO,EAAK,GAAM,IAAI,IAE5C,EAAW,UAAU,OAAS,WAC1B,KAAK,mBACL,KAAK,UAAU,WACf,KAAK,OAAO,YAEhB,EAAW,UAAU,iBAAmB,WACpC,KAAK,WAAW,QAAQ,EAAK,OAAO,WAAY,EAAK,OAAO,aAC5D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,aAEpC,EAAW,UAAU,SAAW,WAE5B,AAAI,KAAK,QACL,MAAK,MAAM,KAAK,KAAK,OAAO,MAAM,KAClC,KAAK,OAAO,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,qBAAsB,MAC/E,KAAK,OAAO,OAAO,IAAI,EAAK,YAAY,kBAAmB,KAAK,mBAAoB,MACpF,KAAK,OAAO,OAAO,IAAI,EAAK,YAAY,cAAe,KAAK,iBAAkB,MAC9E,KAAK,OAAO,OAAO,IAAI,EAAK,YAAY,WAAY,KAAK,gBAAiB,MAC1E,KAAK,OAAO,OAAO,IAAI,EAAK,YAAY,aAAc,KAAK,UAAW,MACtE,KAAK,OAAO,OAAO,IAAI,EAAK,YAAY,qBAAsB,KAAK,mBAAoB,OAE3F,AAAI,KAAK,WACL,MAAK,MAAM,KAAK,KAAK,UAAU,MAAM,KACrC,KAAK,UAAU,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,aAAc,QAG3E,GACT,OAAO,OACT,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,gBACE,EAAsB,EAAK,qBAAwB,GAAK,oBAAsB,KACjF,MAAoC,YAChC,UAAU,EAAgB,GAC1B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,sBAAwB,KAC7D,SAAM,OAAS,EACf,EAAM,aACC,EAEX,SAAe,UAAU,WAAa,WAClC,KAAK,WAAa,KAAK,MAAM,UAAU,CAAE,MAAO,SAChD,KAAK,WAAa,KAAK,MAAM,UAAU,CAAE,MAAO,UAE7C,GACT,EAAK,aACP,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA8C,YAC1C,UAAU,EAA0B,GACpC,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,aAAe,EACrB,EAAM,YAAc,GACpB,EAAM,aAAe,EACrB,EAAM,UACN,EAAM,UACN,EAAM,QAAQ,EAAM,KAAK,MAAO,EAAM,KAAK,QAC3C,EAAM,iBACN,EAAM,MAAM,OAAS,UACrB,EAAM,GAAG,OAAO,MAAM,OAAO,yBAA0B,EAAM,eAAgB,GAC7E,EAAM,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,cAAe,GACpE,EAEX,cAAO,eAAe,EAAyB,UAAW,aAAc,CACpE,IAAK,WACD,MAAO,MAAK,aAEhB,IAAK,YACD,KAAK,YAAc,EACnB,KAAK,YAAc,KAAK,KAAK,SAAS,2BAA6B,KAAK,KAAK,SAAS,6BAE1F,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAyB,UAAW,cAAe,CACrE,IAAK,WACD,MAAO,MAAK,cAEhB,WAAY,GACZ,aAAc,KAElB,EAAyB,UAAU,QAAU,WACzC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,4BACrD,KAAK,IAAI,KAAK,OAElB,EAAyB,UAAU,eAAiB,gBAChD,MAAqB,KAAK,aAAe,OAAO,KAAK,KAAK,GAC1D,KAAK,aAAe,OAAO,KAAK,MAAM,EAAgB,EAAG,IACzD,KAAK,eAAe,KAAK,eAE7B,EAAyB,UAAU,cAAgB,WAC/C,KAAK,WAAa,CAAC,KAAK,YAE5B,EAAyB,UAAU,QAAU,WACzC,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,4BAA6B,KAAK,aAAa,WAAY,IAC3H,KAAK,KAAK,MAAQ,OAAO,QAAQ,MAAM,OACvC,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,KAAK,KAAK,EACxB,KAAK,KAAK,EAAI,KAAK,KAAK,EAAI,EAC5B,KAAK,IAAI,KAAK,OAElB,EAAyB,UAAU,eAAiB,YAChD,KAAK,aAAe,EACpB,KAAK,KAAK,QAAQ,KAAK,aAAa,aAEjC,GACT,OAAO,YAAY,WACrB,EAAK,yBAA2B,IACjC,MAAS,MAAO,KAInB,SACA,AAAC,aACG,MAAsB,OAAO,QAAQ,SAAS,kBACT,YACjC,UAAU,EAAiB,GAC3B,aACI,MAAY,IAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAChE,SAAM,YAAc,EACb,EAEX,SAAgB,UAAU,KAAO,WAC7B,KAAK,OAAS,KAAK,MAAM,KAAK,IAAI,qBAClC,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAEtB,KAAK,QAE/B,EAAgB,UAAU,OAAS,WAC/B,KAAK,iBACL,KAAK,mBACL,KAAK,iBACL,KAAK,gBACL,KAAK,YACL,KAAK,cACL,KAAK,4BACL,KAAK,kBACL,KAAK,sBACL,KAAK,uBACL,KAAK,UAET,EAAgB,UAAU,eAAiB,WACvC,KAAK,eAAiB,GAAI,GAAK,eAAe,KAAM,KAAK,QACzD,KAAK,eAAe,WAAW,GAAG,QAAS,KAAK,kBAAkB,KAAK,OACvE,KAAK,eAAe,WAAW,GAAG,QAAS,KAAK,kBAAkB,KAAK,OACvE,KAAK,gBAAkB,SAAS,eAAe,iBAC/C,KAAK,gBAAgB,MAAM,WAAa,WAE5C,EAAgB,UAAU,kBAAoB,WAC1C,MAAY,OACC,KAAK,wBAClB,GAAI,CAAC,EACD,OAEJ,KAAK,MAAM,KAAK,OAAO,qBACvB,KAAK,MAAM,KAAK,IAAI,oBAAqB,GACzC,KAAK,OAAS,EAC6B,KAAK,OAChD,KAAK,eAAe,eACpB,KAAK,aAAa,GACb,KAAK,YACN,AAAyD,EAAK,eAE7D,MAAM,eAGN,QAAQ,WACT,EAAM,eAAe,iBAG7B,EAAgB,UAAU,kBAAoB,WAC1C,MAAa,KAAK,wBAClB,GAAI,CAAC,EACD,OAEJ,KAAK,MAAM,KAAK,OAAO,qBACvB,KAAK,MAAM,KAAK,IAAI,oBAAqB,GACzC,KAAK,KAAK,YAAY,EAAK,SAAS,kBAAmB,EAAK,SAAS,aAEzE,EAAgB,UAAU,sBAAwB,WAC9C,MAAuB,KAAK,2BACL,KAAK,wBAAwB,GACpD,MAAI,GAAiB,UAAY,GACe,GAAiB,OACtD,MAGJ,CACH,YAAa,eAAe,KAAK,OAAO,aACxC,YAAa,EACb,MAAO,eAAe,CAClB,KAAK,OAAO,MAAM,KAAK,YAAkB,MAAO,GAAK,OAAS,EAAK,eAAe,cAClF,KAAK,OAAO,MAAM,KAAK,YAAkB,MAAO,GAAK,OAAS,EAAK,eAAe,MAClF,KAAK,OAAO,MAAM,KAAK,YAAkB,MAAO,GAAK,OAAS,EAAK,eAAe,QACnF,KAAK,sBAGhB,EAAgB,UAAU,uBAAyB,WAC/C,MAAoB,YAChB,MAAO,CACH,aAAc,EAAK,YACnB,EAAG,OAAO,KAAK,QAAQ,EAAK,EAAG,IAC/B,EAAG,OAAO,KAAK,QAAQ,EAAK,EAAG,QAGzB,KAAK,WAAW,IAAI,YAAkB,MAAO,GAAc,KACzE,SAAU,EAAE,OAAO,EAAS,gBACrB,GAEX,EAAgB,UAAU,iBAAmB,WACzC,MAAO,MAAK,OAAO,IAAI,YACnB,MAAO,CACH,KAAM,EAAK,eAAe,MAC1B,MAAO,EAAM,MAAM,KACnB,EAAG,EAAM,EACT,EAAG,EAAM,MAIrB,EAAgB,UAAU,wBAA0B,YAChD,MAAa,CAAE,QAAS,GAAM,OAAQ,MAC1B,EAAE,QAAQ,EAAQ,gBAC9B,YAAwB,IACpB,GAAI,EAAM,eAAe,KAAiB,GACtC,SAEJ,MAAU,EAAM,GAChB,AAAI,EAAM,GACN,GAAO,QAAU,GACjB,EAAO,OAAO,KAAK,wBAA0B,EAAc,eAAiB,EAAM,sBAG1F,MAAO,IAEX,EAAgB,UAAU,aAAe,YACrC,MAAY,KACZ,MAAO,IAAI,SAAQ,cACf,MAAW,CACP,SAAU,kBACV,QAAS,KAAK,UAAU,MAEZ,EAAK,OAAO,WAAa,eAC/B,GAAI,gBACd,EAAI,KAAK,OAAQ,EAAW,IAC5B,EAAI,OAAS,WACT,EAAQ,IAEZ,EAAI,QAAU,WACV,EAAO,IAEX,EAAI,KAAK,EAAM,+BAA+B,OAGtD,EAAgB,UAAU,+BAAiC,YACvD,MAAO,IAAI,iBAAgB,IAE/B,EAAgB,UAAU,iBAAmB,WACzC,KAAK,cAAgB,KAAK,IAAI,UAAU,EAAG,GAC3C,KAAK,cAAc,KAAO,kBAE9B,EAAgB,UAAU,eAAiB,WACvC,MAAY,KACZ,KAAK,YAAc,KAAK,OAAO,YAAY,IAAI,cAC3C,MAAS,EAAM,IAAI,MAAM,EAAG,EAAG,GAC/B,SAAG,UAAU,EAAG,GAChB,EAAG,EAAI,EAAG,OAAS,EACnB,EAAM,cAAc,IAAI,GACjB,KAGf,EAAgB,UAAU,cAAgB,WACtC,MAAY,KACZ,KAAK,WAAa,GAClB,KAAK,OAAO,YAAY,QAAQ,YAC5B,EAAM,eAAe,EAAO,aAAc,EAAO,EAAG,EAAO,MAGnE,EAAgB,UAAU,UAAY,WAClC,MAAY,KACZ,KAAK,OAAS,GACd,KAAK,OAAO,MACP,OAAO,YAAkB,MAAO,GAAK,OAAS,EAAK,eAAe,QAClE,QAAQ,YACT,EAAM,WAAW,EAAY,EAAG,EAAY,EAAG,EAAY,UAGnE,EAAgB,UAAU,YAAc,WACpC,KAAK,OAAS,KAAK,QAAQ,MAE/B,EAAgB,UAAU,0BAA4B,WAClD,MAAc,KAAK,MAAM,SAAS,mBAClC,KAAK,cAAgB,GAAI,GAAgB,CACrC,OAAQ,KAAK,OACb,KAAM,EAAQ,KACd,MAAO,EAAQ,MACf,GAAI,EAAQ,GACZ,KAAM,EAAQ,KACd,MAAO,KAGf,EAAgB,UAAU,gBAAkB,WACxC,MAAY,KACZ,KAAK,aAAe,GAAI,GAAK,cAAc,KAAM,CAC7C,gBAAiB,GACjB,mBAAoB,IACpB,iBAAkB,GAClB,eAAgB,KAEpB,KAAK,MAAM,GAAG,YAAa,WACvB,EAAM,aAAa,YAEvB,KAAK,MAAM,GAAG,cAAe,YACzB,EAAM,aAAa,KAAK,MAGhC,EAAgB,UAAU,oBAAsB,WAC5C,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MACpE,KAAK,MAAM,GAAG,OAAQ,kBAClB,EAAW,EAAI,EACf,EAAW,EAAI,KAGvB,EAAgB,UAAU,cAAgB,cACtC,MAAU,KAAK,MACf,GAAI,EAAQ,OAAS,GACjB,KAAK,YAAc,EACnB,OAEJ,KAAK,aAAa,UAAU,GAC5B,MAAmB,EAAM,KAAK,YAC9B,AAAI,EAAe,KACf,KAAK,eAET,KAAK,YAAc,GAEvB,EAAgB,UAAU,qBAAuB,WAC7C,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,aAAc,MAC1D,KAAK,MAAM,SAAS,GAAG,iBAAkB,KAAK,iBAAkB,MAChE,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,YAAa,MACzD,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,eAAgB,MAC3D,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,QAAS,MAClD,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,cAAe,OAE5D,EAAgB,UAAU,cAAgB,WACtC,MAAuB,KAAK,MAAM,cAAc,iBAAiB,KAAK,QACtE,KAAK,WAAW,EAAiB,EAAG,EAAiB,IAEzD,EAAgB,UAAU,WAAa,gBACnC,MAAY,KAAK,IAAI,MAAM,EAAG,EAAG,aAAc,GAAS,EAAgB,aAAa,IACrF,SAAM,EAAI,EACV,EAAM,EAAI,EACV,EAAM,iBACN,EAAM,GAAG,OAAO,MAAM,OAAO,yBAA0B,KAAK,oBAAoB,KAAK,KAAM,IAC3F,KAAK,MAAM,aAAa,GACxB,KAAK,cAAc,IAAI,GACvB,KAAK,OAAO,KAAK,GACV,GAEX,EAAgB,UAAU,oBAAsB,kBAC5C,MAAmB,EAAM,MAAM,OACZ,EAAgB,aAAa,QAAQ,KACzC,EAAe,OAAO,KAAK,KAAK,GAC/C,EAAW,OAAO,KAAK,KAAK,EAAU,EAAG,EAAgB,aAAa,QACtE,EAAM,SAAS,EAAgB,aAAa,KAEhD,EAAgB,UAAU,QAAU,aACpC,EAAgB,UAAU,aAAe,WACrC,MAA2B,CAAE,EAAG,KAAK,MAAM,cAAc,OAAQ,EAAG,KAAK,MAAM,cAAc,UACrE,KAAK,cAAc,iBAAiB,KAC1C,KAAK,IAAI,MAAM,KAAM,eAAe,KAAK,WAAW,IAAI,YAAkB,MAAO,GAAK,cAAiB,CAAC,KAAO,EACjI,KAAK,eAAe,EAAa,EAAkB,EAAG,EAAkB,IAE5E,EAAgB,UAAU,eAAiB,gBACvC,MAAW,GAAI,GAAK,yBAAyB,KAAM,GACnD,SAAK,EAAI,EACT,EAAK,EAAI,EACT,KAAK,MAAM,aAAa,GACxB,KAAK,cAAc,IAAI,GACvB,KAAK,WAAW,KAAK,GACd,GAEX,EAAgB,UAAU,iBAAmB,WACzC,MAAY,KACZ,KAAK,wBAAwB,QAAQ,YACjC,EAAK,UACL,EAAE,KAAK,EAAM,WAAY,MAGjC,EAAgB,UAAU,sBAAwB,WAC9C,MAAO,MAAK,WAAW,OAAO,YAAkB,MAAO,GAAK,cAEhE,EAAgB,UAAU,YAAc,WACpC,KAAK,OAAO,QAAU,GAE1B,EAAgB,UAAU,eAAiB,WACvC,KAAK,OAAO,QAAU,KAAK,OAAO,YAAY,QAElD,EAAgB,UAAU,OAAS,cAC/B,KAAK,aAAa,SAClB,KAAK,cAAc,OAAO,IAE9B,EAAgB,UAAU,OAAS,WAC/B,KAAK,sBACL,KAAK,sBAET,EAAgB,UAAU,oBAAsB,WAC5C,KAAK,cAAc,MAAQ,EAAK,OAAO,WAAa,KAAK,YAAY,GAAG,OAE5E,EAAgB,UAAU,mBAAqB,WAC3C,MAAU,OAAO,QAAQ,OAAO,OAAO,KAAK,YAAY,MAC3C,OAAO,QAAQ,OAAO,UAAU,KAAK,YAAY,KAAK,YAAY,OAAS,MACtE,EAAS,EAC3B,KAAK,OAAO,UAAU,EAAG,EAAG,EAAK,OAAO,WAAY,EAAc,KAAK,cAAc,QAEzF,EAAgB,UAAU,SAAW,WAEjC,KAAK,iBAET,EAAgB,UAAU,cAAgB,WACtC,KAAK,gBAAgB,MAAM,WAAa,SACxC,KAAK,gBAAkB,KACvB,AAAI,KAAK,gBACL,KAAK,eAAe,WAG5B,EAAgB,aAAe,CAC3B,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,0BACA,2BAEG,GACT,OAAO,OACT,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,SAAU,oBAAsB,KACrE,SAAM,KAAO,aACb,EAAM,YAAc,EACpB,EAAM,cAAc,EAAY,WAAY,EAAK,eAAe,mBAAoB,GAAI,GAAI,IAC5F,EAAM,kBACC,EAEX,SAAa,UAAU,gBAAkB,WACrC,MAAkB,KAAK,MAAM,KAAK,aAAa,IAAI,KAAK,eACnC,EAAY,SACjC,GAAI,CAAC,EACD,OAEJ,MAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,SAAU,iBAChD,KAAK,IAAI,GACT,OAAO,QAAQ,MAAM,GAAG,YAAY,EAAM,KAAK,KAAM,IAAK,MAE9D,EAAa,UAAU,SAAW,WAC9B,MAAO,MAAK,KAAK,OAErB,EAAa,UAAU,UAAY,WAC/B,MAAO,MAAK,KAAK,QAEd,GACT,OAAO,YAAY,eACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAa,UAAU,KAAO,WAC1B,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,OAEhD,EAAa,UAAU,OAAS,WAC5B,KAAK,gBACL,KAAK,gBACL,KAAK,gBACL,KAAK,oBACL,KAAK,sBACL,KAAK,uBACL,KAAK,UAET,EAAa,UAAU,cAAgB,WACnC,KAAK,WAAa,KAAK,IAAI,MAAM,EAAG,EAAG,SAAU,gBACjD,KAAK,WAAW,gBAAgB,EAAG,IAEvC,EAAa,UAAU,cAAgB,WACnC,KAAK,WAAa,KAAK,IAAI,OAAO,SAAU,gBAC5C,KAAK,WAAW,KAAK,OAAO,YAAY,YAAY,MAAO,KAAK,cAAe,MAC/E,KAAK,WAAW,gBAAgB,EAAG,IAEvC,EAAa,UAAU,cAAgB,WACnC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,aAExD,EAAa,UAAU,cAAgB,WACnC,MAAmB,KAAK,KAAK,aAAa,kBAC1C,KAAK,WAAa,KAAK,iBAAiB,GACxC,KAAK,oBAAsB,KAAK,IAAI,UAAU,EAAG,EAAG,KAAK,aAE7D,EAAa,UAAU,iBAAmB,YACtC,MAAY,KACZ,MAAO,GAAa,IAAI,YACpB,MAAW,GAAI,GAAK,aAAa,EAAO,GACxC,SAAK,KAAK,OAAO,YAAY,YAAY,MAAO,EAAM,iBAAkB,GACjE,KAGf,EAAa,UAAU,iBAAmB,YACtC,MAAkB,EAAU,YAC5B,AAAI,KAAK,SAAS,OACd,KAAK,uBAAuB,GAE3B,AAAI,KAAK,KAAK,OACf,KAAK,mBAAmB,GAGxB,KAAK,UAAU,IAGvB,EAAa,UAAU,mBAAqB,YACxC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,gBAAiB,CAAE,YAAa,KAExF,EAAa,UAAU,uBAAyB,YAC5C,MAAgB,OAAO,QAAQ,+BAAiC,EAAc,YAC9E,AAAI,GACA,MAAK,SAAS,QACd,KAAK,kBAAkB,KAG/B,EAAa,UAAU,kBAAoB,YACvC,MAAY,KACZ,KAAK,oBAAoB,MAAQ,IACjC,KAAK,WAAW,QAAQ,YAAkB,MAAO,GAAK,iBACtD,KAAK,KAAK,aAAa,OAAO,GAC9B,KAAK,KAAK,aAAa,cACvB,KAAK,KAAK,aAAa,eAClB,KAAK,WACN,AAAY,GAAW,EACvB,EAAM,gBAAgB,KAErB,MAAM,YACP,AAAa,GAAwB,IAEpC,QAAQ,WACT,EAAM,oBAAoB,MAAQ,EAClC,EAAM,WAAW,QAAQ,YAAkB,MAAO,GAAK,mBAG/D,EAAa,UAAU,gBAAkB,YACrC,MAAoB,KAAK,WAAW,UAAU,YAAkB,MAAO,GAAK,cAAgB,IAC5F,AAAI,EAAgB,IAChB,MAAK,WAAW,GAAe,UAC/B,KAAK,WAAW,OAAO,EAAe,GACtC,KAAK,aACL,KAAK,wBAGb,EAAa,UAAU,UAAY,YAC/B,KAAK,MAAM,MAAM,EAAK,SAAS,kBAAmB,CAAE,YAAa,KAErE,EAAa,UAAU,kBAAoB,WACvC,KAAK,eAAiB,KAAK,IAAI,OAAO,SAAU,oBAChD,KAAK,eAAe,GAAG,OAAO,YAAY,YAAY,QAAS,KAAK,gBAAiB,OAEzF,EAAa,UAAU,gBAAkB,WACrC,MAAe,KAAK,IAAI,MAAM,KAAM,eAAe,KAAK,KAAK,aAAa,kBAAmB,CAAC,KAAO,IAChF,OAAO,OAAO,yBAA0B,EAAS,YACtE,GAAI,CAAC,EACD,OAEJ,MAAkB,SAAS,GAC3B,GAAI,CAAC,EAED,OAEJ,MAAmB,KAAK,KAAK,aAAa,MAAM,GAChD,GAAI,GACA,AAAa,GAAW,EACxB,OAEJ,KAAK,UAAU,IAEnB,EAAa,UAAU,oBAAsB,WACzC,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,cAAe,KAAK,eAAgB,OAE1E,EAAa,UAAU,eAAiB,kBACpC,KAAK,QAAQ,KAAK,SAAW,GAEjC,EAAa,UAAU,qBAAuB,WAC1C,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,QAAS,MAClD,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,gBAAiB,MAC7D,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,cAAe,MACxD,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,sBAAuB,MACpE,KAAK,SAAW,KAAK,MAAM,SAAS,OAAO,SAC3C,KAAK,KAAO,KAAK,MAAM,SAAS,OAAO,MAE3C,EAAa,UAAU,QAAU,WAC7B,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,iBAExD,EAAa,UAAU,sBAAwB,WAC3C,MAAgB,KAAK,IAAI,MAAM,KAAM,KAAK,KAAK,aAAa,mBAC5D,KAAK,UAAU,IAEnB,EAAa,UAAU,OAAS,WAC5B,KAAK,kBACL,KAAK,kBACL,KAAK,aACL,KAAK,uBAET,EAAa,UAAU,gBAAkB,WACrC,KAAK,WAAW,QAAQ,EAAK,OAAO,WAAY,EAAK,OAAO,aAC5D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAa,UAAU,gBAAkB,WACrC,MAAa,GACb,KAAK,WAAW,EAAI,EAAK,OAAO,WAAa,EAC7C,KAAK,WAAW,EAAI,GAExB,EAAa,UAAU,WAAa,WAChC,KAAK,iBACL,KAAK,cAET,EAAa,UAAU,eAAiB,WACpC,GAAI,KAAK,WAAW,SAAW,EAC3B,OAEJ,KAAK,oBAAoB,UAAU,CAC/B,UAAW,IACX,MAAO,EACP,SAAU,OAAO,QAAQ,MAAM,OAC/B,EAAG,KAAK,WAAW,GAAG,WAAa,EACnC,EAAG,KAAK,WAAW,GAAG,YAAc,KAG5C,EAAa,UAAU,WAAa,WAChC,MAAe,EAAK,OAAO,WAAa,KAC5B,KAAK,oBAAoB,YAAY,QACrC,KAAK,IAAI,EAAG,EAAW,GACnC,KAAK,oBAAoB,MAAQ,EACjC,KAAK,oBAAoB,EAAK,GAAK,OAAO,WAAa,KAAK,oBAAoB,YAAY,OAAS,EACrG,KAAK,oBAAoB,EAAI,IAEjC,EAAa,UAAU,oBAAsB,WACzC,MAAkB,KAAK,oBAAoB,EAAI,KAAK,oBAAoB,YAAY,OACpF,KAAK,eAAe,MAAQ,KAAK,oBAAoB,MACrD,KAAK,eAAe,EAAI,EAAK,OAAO,gBACpC,KAAK,eAAe,EAAI,EAAc,KAAK,eAAe,cAAgB,EAAI,GAAK,KAAK,eAAe,OAE3G,EAAa,UAAU,SAAW,aAE3B,GACT,OAAO,OACT,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgB,OAAO,QAAQ,YACK,YAChC,UAAU,EAAgB,GAC1B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,WACN,EAAM,aACN,EAAM,mBACC,EAEX,SAAe,UAAU,SAAW,WAChC,MAAY,KACZ,KAAK,MAAQ,EAAE,MAAM,EAAG,YACpB,MAAO,GAAM,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,gBAErD,KAAK,IAAI,KAAK,QAElB,EAAe,UAAU,WAAa,WAClC,MAAgB,GAChB,EAAU,KAAK,MAAO,CAClB,OAAQ,EACR,MAAO,KAAK,MAAM,OAClB,SAAU,OAAO,QAAQ,MAAM,WAC/B,UAAW,EACX,EAAG,CAAE,MAAK,MAAM,OAAS,GAAa,EAAI,KAAK,MAAM,GAAG,MAAQ,KAGxE,EAAe,UAAU,iBAAmB,WACxC,MAAgB,GAChB,KAAK,MAAM,GAAG,MAAQ,CAAC,EACvB,KAAK,MAAM,GAAG,MAAQ,EACtB,KAAK,MAAM,GAAG,GAAK,MAEvB,EAAe,UAAU,aAAe,YACpC,KAAK,MAAM,QAAQ,cACf,MAAY,EAAQ,EAAM,aAAe,wBAC7B,EAAQ,EAAM,EAAI,IAC9B,EAAK,SAAS,GACd,EAAK,MAAQ,KAGd,GACT,OAAO,YAAY,WACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAe,OAAY,SAC3B,EAAe,SAAc,WAC7B,EAAe,SAAc,aAC9B,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,SAAW,EACjB,EAAM,KAAO,cAAgB,EAAM,SAAS,YAAY,WACxD,EAAM,aAAe,EAAM,SAAS,YACpC,EAAM,UACN,EAAM,kBACN,EAAM,kBACN,EAAM,WACN,EAAM,QAAQ,EAAM,KAAK,MAAO,EAAM,KAAK,QAC3C,EAAM,kBACC,EAEX,cAAO,eAAe,EAAU,UAAW,cAAe,CACtD,IAAK,WACD,MAAO,MAAK,cAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAU,UAAW,YAAa,CACpD,IAAK,WACD,MAAO,MAAK,YAEhB,WAAY,GACZ,aAAc,KAElB,EAAU,UAAU,gBAAkB,WAClC,AAAI,KAAK,SAAS,OACd,KAAK,YAGL,AAAI,KAAK,SAAS,SACd,KAAK,cAGL,KAAK,eAIjB,EAAU,UAAU,UAAY,WAC5B,KAAK,WAAa,EAAe,OACjC,KAAK,KAAK,SAAS,8BACnB,KAAK,aAAa,QAAU,GAC5B,KAAK,aAAa,QAAU,GAC5B,KAAK,MAAM,QAAU,GACrB,KAAK,qBAET,EAAU,UAAU,YAAc,WAC9B,KAAK,WAAa,EAAe,SACjC,KAAK,KAAK,SAAS,2BACnB,KAAK,MAAM,QAAU,GACrB,KAAK,aAAa,QAAU,GAC5B,KAAK,aAAa,QAAU,GAC5B,KAAK,iBACL,KAAK,MAAM,OAAS,WAExB,EAAU,UAAU,YAAc,WAC9B,KAAK,WAAa,EAAe,SACjC,KAAK,KAAK,SAAS,4BACnB,KAAK,MAAM,QAAU,GACrB,KAAK,aAAa,QAAU,GAC5B,KAAK,aAAa,QAAU,GAC5B,KAAK,iBACL,KAAK,MAAM,OAAS,WAExB,EAAU,UAAU,QAAU,WAC1B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,4BACrD,KAAK,IAAI,KAAK,OAElB,EAAU,UAAU,gBAAkB,WAClC,KAAK,aAAe,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,4BAA6B,KAAK,aAAa,WAAY,IACnI,KAAK,aAAa,UAAU,GAAK,IACjC,KAAK,aAAa,EAAI,KAAK,KAAK,EAChC,KAAK,aAAa,EAAI,KAAK,KAAK,EAAI,EACpC,KAAK,IAAI,KAAK,eAElB,EAAU,UAAU,gBAAkB,WAClC,KAAK,aAAe,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,4BAA6B,KAAK,aAAa,WAAY,IACnI,KAAK,aAAa,UAAU,GAAK,IACjC,KAAK,aAAa,EAAI,KAAK,aAAa,EACxC,KAAK,aAAa,EAAI,KAAK,aAAa,EACxC,KAAK,IAAI,KAAK,eAElB,EAAU,UAAU,SAAW,WAC3B,KAAK,MAAQ,GAAI,GAAK,eAAe,KAAK,OAC1C,KAAK,MAAM,EAAI,EACf,KAAK,MAAM,EAAI,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,EAAI,GACpD,KAAK,MAAM,aAAa,KAAK,SAAS,OACtC,KAAK,IAAI,KAAK,QAEX,GACT,OAAO,YAAY,WACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAuB,QAAa,YACrC,EAAyB,EAAK,wBAA2B,GAAK,uBAAyB,KAC1F,MAAuC,YACnC,UAAU,EAAmB,GAC7B,sBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,GAClB,EAAM,mBAAqB,GAC3B,EAAM,KAAO,OACb,EAAM,aAAe,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GACxD,EAAM,WAAa,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GACtD,EAAM,UAAY,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GAAgB,WAAW,IAChF,EAAM,iBACN,EAAM,IAAI,EAAM,cAChB,EAAM,IAAI,EAAM,YAChB,EAAM,IAAI,EAAM,WACT,EAEX,cAAO,eAAe,EAAkB,UAAW,WAAY,CAC3D,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,EAAkB,UAAU,eAAiB,WACzC,KAAK,WAAW,QAAU,GAC1B,KAAK,WAAW,OAAS,GACzB,KAAK,UAAY,IAErB,EAAkB,UAAU,eAAiB,WACzC,KAAK,WAAW,QAAU,GAC1B,KAAK,WAAW,OAAS,GACzB,KAAK,UAAY,IAErB,EAAkB,UAAU,gBAAkB,YAC1C,MAAY,KACZ,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,WAAW,MAAQ,IACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,QAAS,WACL,EAAM,gBAAgB,WAAW,IAErC,WAAY,WACR,EAAM,aAAa,QAAU,MAGrC,KAAK,MAAM,KAAK,YAAY,EAAQ,IAAK,WACrC,EAAM,KAAK,EAAuB,QAAS,GAC3C,EAAM,mBAGd,EAAkB,UAAU,cAAgB,WACxC,MAAY,KACZ,KAAK,UAAU,QAAU,GACzB,KAAK,UAAU,MAAQ,GACvB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,MAAO,CAAE,MAAO,KAAM,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,OAAO,QACrE,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACjE,WAAY,WACR,EAAM,UAAU,QAAU,GAC1B,EAAM,UAAU,MAAQ,EACxB,EAAM,cAIlB,EAAkB,UAAU,QAAU,WAClC,GAAI,CAAC,KAAK,mBACN,OAEJ,KAAK,MAAM,KAAK,SAAS,CACrB,MAAO,IACP,QAAS,KACT,KAAM,GACN,SAAU,KAAK,UACf,cAAe,QAGvB,EAAkB,UAAU,UAAY,WACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,MAAQ,KACpB,KAAM,KAEV,KAAK,oBAET,EAAkB,UAAU,iBAAmB,WAC3C,MAAY,KACZ,KAAK,UAAU,QAAU,GACzB,KAAK,UAAU,MAAQ,EACvB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IACP,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,UACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,GAC/B,MAAO,EACP,WAAY,WACR,EAAM,UAAU,QAAU,UAMvC,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAwB,mBAAwB,uBACjD,EAA0B,EAAK,yBAA4B,GAAK,wBAA0B,KAC7F,MAAwC,YACpC,UAAU,EAAoB,GAC9B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,gBAAkB,GACxB,EAAM,gBAAkB,GACxB,EAAM,mBAAqB,IAC3B,EAAM,YAAc,GACpB,EAAM,eAAiB,EACvB,EAAM,cAAgB,EACtB,EAAM,KAAO,QACb,EAAM,MAAQ,EACd,EAAM,WACC,EAEX,SAAmB,UAAU,SAAW,WACpC,KAAK,SAAW,GAAI,GAAK,kBAAkB,KAAK,MAAO,KAAK,MAAM,MAAO,KAAK,MAAM,gBAAiB,KAAK,MAAM,kBAAmB,KAAK,MAAM,gBAC9I,KAAK,SAAS,MAAQ,CAAC,KAAK,gBAC5B,KAAK,SAAS,MAAQ,KAAK,gBAC3B,KAAK,SAAS,EAAI,CAAC,KAAK,mBACxB,KAAK,SAAS,EAAI,KAAK,YACvB,KAAK,YAAc,GAAI,GAAK,kBAAkB,KAAK,MAAO,KAAK,MAAM,MAAO,KAAK,MAAM,gBAAiB,KAAK,MAAM,kBAAmB,KAAK,MAAM,gBACjJ,KAAK,UAAY,GAAI,GAAK,kBAAkB,KAAK,MAAO,KAAK,MAAM,MAAO,KAAK,MAAM,gBAAiB,KAAK,MAAM,kBAAmB,KAAK,MAAM,gBAC/I,KAAK,UAAU,MAAQ,KAAK,gBAC5B,KAAK,UAAU,MAAQ,KAAK,gBAC5B,KAAK,UAAU,EAAI,KAAK,mBACxB,KAAK,UAAU,EAAI,KAAK,YACxB,KAAK,SAAW,CAAC,KAAK,SAAU,KAAK,YAAa,KAAK,WACvD,KAAK,IAAI,KAAK,UACd,KAAK,WAAW,KAAK,cAEzB,EAAmB,UAAU,WAAa,YACtC,KAAK,eAAiB,GAE1B,EAAmB,UAAU,uBAAyB,WAClD,MAAY,KACZ,KAAK,SAAS,QAAQ,cAClB,AAAI,EAAQ,EAAM,eACd,EAAK,iBAGL,EAAK,oBAIjB,EAAmB,UAAU,gBAAkB,YAC3C,MAAY,KACZ,AAAI,KAAK,iBAAmB,GACxB,KAAK,KAAK,EAAwB,mBAAoB,MAE1D,KAAK,SAAS,QAAQ,cAClB,GAAI,EAAQ,EAAM,gBACd,MAAY,EAAe,EAAQ,IACnC,EAAM,cAAc,EAAO,GAC3B,EAAK,GAAG,EAAK,uBAAuB,QAAS,EAAM,cAAe,GAClE,EAAK,iBACL,EAAK,gBAAgB,OAIjC,EAAmB,UAAU,cAAgB,cACzC,MAAU,2BAA8B,GAAQ,KACnC,GAAe,KAAO,IACnC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,IAC3B,KAAK,MAAM,MAAM,KAAK,EAAK,CACvB,OAAQ,EACR,MAAO,KAInB,EAAmB,UAAU,cAAgB,YACzC,GAAI,KAAK,gBACL,MAAkB,EAAK,0BACvB,KAAK,eAAe,QAAQ,GAAI,EAAY,GAAI,EAAY,IAEhE,AAAI,EAAE,KAAK,gBAAkB,KAAK,gBAC9B,KAAK,KAAK,EAAwB,mBAAoB,OAG9D,EAAmB,UAAU,WAAa,gBACtC,KAAK,QAAU,KAAK,MAAM,IAAI,UAAU,GACxC,KAAK,QAAQ,SAAS,GACtB,KAAK,eAAiB,KAAK,QAAQ,cAAc,CAC7C,SAAU,CACN,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,IACrC,KAAM,UAEV,MAAO,EACP,MAAO,GACP,MAAO,CAAE,MAAO,IAAM,IAAK,IAAM,KAAM,OAAO,KAAK,aAAa,OAChE,MAAO,CAAE,MAAO,IAAM,IAAK,EAAG,KAAM,OAAO,KAAK,aAAa,OAC7D,SAAU,IACV,GAAI,MAGZ,EAAmB,UAAU,cAAgB,WACzC,MAAY,KACZ,KAAK,SAAS,QAAQ,cAClB,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,MAAO,EAAQ,IACf,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,GACN,OAAQ,QAIb,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,EAAK,UAAY,YACjB,MACA,AAAC,aACG,EAAS,SAAc,WACvB,EAAS,YAAiB,cAC1B,EAAS,eAAoB,iBAC7B,EAAS,UAAe,YACxB,EAAS,UAAe,YACxB,EAAS,YAAiB,cAC1B,EAAS,aAAkB,eAC3B,EAAS,cAAmB,gBAC5B,EAAS,oBAAyB,sBAClC,EAAS,UAAe,YACxB,EAAS,iBAAsB,mBAC/B,EAAS,QAAa,YACvB,EAAW,EAAK,UAAa,GAAK,SAAW,KAChD,MAAkC,WAC9B,cAEA,SAAa,YAAc,WACvB,MAAO,QAAO,OAAO,IAEzB,EAAa,YAAc,YACvB,MAAO,GAAa,gBAAgB,SAAS,IAEjD,EAAa,cAAgB,WACzB,MAAO,GAAa,aAExB,EAAa,aAAe,YACxB,MAAO,GAAa,WAAW,IAEnC,EAAa,QAAU,YACnB,MAAO,GAAa,YAAY,EAAK,WAEzC,EAAa,YAAc,CACvB,EAAS,YACT,EAAS,SACT,EAAS,eACT,EAAS,UACT,EAAS,UACT,EAAS,YACT,EAAS,aACT,EAAS,cACT,EAAS,qBAEb,EAAa,WAAc,GAAK,GAC5B,EAAG,EAAS,aAAe,wBAC3B,EAAG,EAAS,eAAiB,0BAC7B,EAAG,EAAS,qBAAuB,+BACnC,EAAG,EAAS,UAAY,qBACxB,EAAG,EAAS,WAAa,mBACzB,EAAG,EAAS,WAAa,kBACzB,EAAG,EAAS,aAAe,qBAC3B,EAAG,EAAS,cAAgB,sBAC5B,EAAG,EAAS,gBAAkB,wBAC9B,EAAG,EAAS,SAAW,sBACvB,EAAG,EAAS,WAAa,0BACzB,EAAG,EAAS,kBAAoB,mBAChC,GACG,KAEX,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgD,YAC5C,UAAU,EAA4B,GACtC,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,eACb,EAAM,UACN,EAAM,WACN,EAAM,UACN,EAAM,QACC,EAEX,SAA2B,UAAU,QAAU,WAC3C,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,oBACrD,KAAK,IAAI,KAAK,OAElB,EAA2B,UAAU,SAAW,WAC5C,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,+BACtD,KAAK,IAAI,KAAK,QAElB,EAA2B,UAAU,QAAU,WAC3C,MAAc,KAAK,eAAe,KACtB,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,IAAI,KAAK,OAElB,EAA2B,UAAU,eAAiB,YAClD,MAAO,MAAK,MAAM,MAAM,kBAAkB,KAAK,QAAQ,IAAK,EAAU,aAE1E,EAA2B,UAAU,MAAQ,WACzC,KAAK,MAAM,EAAI,KAAK,KAAK,KAAO,KAAK,MAAM,MAAQ,EAAI,GACvD,KAAK,MAAM,EAAI,KAAK,KAAK,YAAY,EACrC,KAAK,aAET,EAA2B,UAAU,UAAY,WAC7C,MAAW,KAAK,MAAM,QACV,KAAK,KAAK,QACV,EAAQ,EACpB,KAAK,KAAK,iBAAiB,EAAQ,KACnC,KAAK,KAAK,EAAI,EAAO,EAAQ,EAC7B,KAAK,KAAK,EAAI,KAAK,KAAK,YAAY,GAExC,EAA2B,UAAU,WAAa,cAC9C,KAAK,MAAM,SAAS,KAAK,cAAc,IACvC,KAAK,KAAK,KAAO,KAAK,eAAe,IAEzC,EAA2B,UAAU,cAAgB,YACjD,QACa,kBACF,GAAK,GACZ,EAAG,EAAK,SAAS,aAAe,EAAS,iBACzC,EAAG,EAAK,SAAS,UAAY,EAAS,cACtC,EAAG,EAAK,SAAS,WAAa,EAAS,YACvC,EAAG,EAAK,SAAS,cAAgB,EAAS,eAC1C,EAAG,EAAK,SAAS,gBAAkB,EAAS,mBAC5C,GACJ,MAAO,GAAI,IAAe,EAAI,EAAK,SAAS,cAEhD,EAA2B,UAAU,UAAY,WAC7C,MAAO,MAAK,KAAK,QAErB,EAA2B,UAAU,SAAW,WAC5C,MAAO,MAAK,KAAK,OAEd,GACT,OAAO,YAAY,WACrB,EAAK,2BAA6B,IACnC,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAqC,YACjC,UAAU,EAAiB,GAC3B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,UACN,EAAM,YACN,EAAM,aACN,EAAM,iBACN,EAAM,aACN,EAAM,UACN,EAAM,eACN,EAAM,iBACN,EAAM,aACN,EAAM,QACN,EAAM,WAAW,EAAM,WACvB,EAAM,WAAW,EAAM,QAChB,EAEX,SAAgB,UAAU,QAAU,WAChC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,oBACrD,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,UAAY,WAClC,MAAiB,KAAK,MAAM,KAAK,MAAM,CACnC,IAAK,aACL,MAAO,eACP,IAAK,OAEM,IACf,KAAK,WAAa,KAAK,mBACvB,KAAK,WAAW,UAAU,GAAK,IAC/B,KAAK,WAAW,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,WAAW,OAC/D,KAAK,WAAW,EAAI,IACpB,KAAK,WAAW,KAAO,QACvB,KAAK,OAAS,KAAK,MAAM,IAAI,UAAU,EAAG,EAAG,CAAC,EAAY,KAAK,aAC/D,KAAK,IAAI,KAAK,SAElB,EAAgB,UAAU,iBAAmB,WACzC,MAAW,KAAK,MAAM,KAAK,KAAK,CAC5B,IAAK,GACL,KAAM,KAAK,iBAAiB,GAC5B,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,MAAO,YAGf,SAAK,UAAU,EAAG,EAAG,oBACd,GAEX,EAAgB,UAAU,iBAAmB,YACzC,MAAe,KAAK,MAAM,MAAM,kBAAkB,MAClD,MAAO,GAAS,QAAQ,IAAK,EAAY,aAE7C,EAAgB,UAAU,WAAa,WACnC,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,aACxD,KAAK,IAAI,KAAK,UAElB,EAAgB,UAAU,eAAiB,WACvC,KAAK,YAAc,GAAI,GAAK,2BAA2B,KAAK,OAC5D,KAAK,IAAI,KAAK,cAElB,EAAgB,UAAU,WAAa,WACnC,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,iBACxD,KAAK,IAAI,KAAK,UAElB,EAAgB,UAAU,QAAU,WAChC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,cACrD,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,aAAe,WACrC,KAAK,cAAgB,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,8BAC9D,KAAK,IAAI,KAAK,eACd,MAAc,KAAK,oBAAoB,KAC3B,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,UAAY,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACpD,KAAK,UAAU,UAAU,GAAK,IAC9B,KAAK,IAAI,KAAK,YAElB,EAAgB,UAAU,oBAAsB,YAC5C,MAAe,KAAK,MAAM,MAAM,kBAAkB,UAClD,MAAO,GAAS,QAAQ,IAAK,EAAM,mBAEvC,EAAgB,UAAU,eAAiB,WACvC,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,aAAc,qBAAsB,MAC7E,KAAK,YAAY,gBAAgB,EAAG,IAExC,EAAgB,UAAU,WAAa,WACnC,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,UACL,OAAQ,GACR,OAAQ,KAAK,MAAM,MAAM,cAAc,aAAc,yBACrD,UAAW,KAEf,KAAK,QAAU,KAAK,MAAM,IAAI,OAAO,EAAG,EAAG,aAAc,6BACzD,KAAK,QAAQ,KAAK,WAClB,KAAK,QAAQ,MAAQ,IACrB,KAAK,IAAI,KAAK,SACd,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,MACH,OAAQ,GACR,KAAM,KAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,MACH,OAAQ,GACR,KAAM,MAGd,EAAgB,UAAU,MAAQ,WAC9B,KAAK,cACL,KAAK,mBACL,KAAK,YACL,KAAK,WACL,KAAK,iBACL,KAAK,mBACL,KAAK,gBAET,EAAgB,UAAU,aAAe,WACrC,MAAY,OAAO,QAAQ,QACd,KACD,OAAO,KAAK,IAAI,OAAS,EAAM,SAAW,EAAM,UAC5D,OAAO,QAAQ,MAAM,GAAG,SAAS,KAAK,QAAS,KAAK,KAAM,EAAO,CAAC,EAAQ,CAAC,IAE/E,EAAgB,UAAU,YAAc,WACpC,KAAK,OAAO,EAAI,KAAK,KAAK,IAAM,GAEpC,EAAgB,UAAU,iBAAmB,WACzC,OAAO,QAAQ,MAAM,GAAG,OAAO,KAAK,YAAa,KAAK,KAAM,EAAG,KAEnE,EAAgB,UAAU,UAAY,WAClC,KAAK,KAAK,EAAI,KAAK,YAAY,EAAI,KAAK,YAAY,WAAa,EAAI,EACrE,KAAK,KAAK,EAAI,KAAK,YAAY,EAAI,KAAK,YAAY,YAAc,EAAI,IAE1E,EAAgB,UAAU,SAAW,WACjC,OAAO,QAAQ,MAAM,GAAG,UAAU,KAAK,QAAS,KAAK,aACrD,KAAK,QAAQ,EAAI,KAAK,YAAY,EAClC,KAAK,QAAQ,EAAI,KAAK,QAAQ,EAAI,EAClC,KAAK,QAAQ,EAAI,KAAK,QAAQ,GAElC,EAAgB,UAAU,eAAiB,WACvC,OAAO,QAAQ,MAAM,GAAG,aAAa,KAAK,cAAe,KAAK,KAAM,EAAG,KACvE,OAAO,QAAQ,MAAM,GAAG,OAAO,KAAK,UAAW,KAAK,cAAe,EAAG,IAE1E,EAAgB,UAAU,iBAAmB,WACzC,MAAa,KAAK,YAAY,MAAQ,EAAI,EAC1C,OAAO,QAAQ,MAAM,GAAG,SAAS,KAAK,YAAa,KAAK,KAAM,EAAQ,IAE1E,EAAgB,UAAU,WAAa,YACnC,KAAK,WAAW,KAAO,KAAK,iBAAiB,EAAK,aAClD,KAAK,YAAY,WAAW,EAAK,WAAY,EAAK,WAClD,KAAK,KAAK,QAAU,EAAK,cACzB,KAAK,UAAU,KAAO,EAAK,cAAgB,KAAK,oBAAoB,EAAK,WAAa,KAAK,oBAAoB,IAEnH,EAAgB,UAAU,SAAW,WACjC,MAAO,MAAK,KAAK,OAErB,EAAgB,UAAU,UAAY,WAClC,MAAO,MAAK,KAAK,eAEd,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KAInB,SACA,AAAC,aACG,MAAkB,OAAO,YAAY,cAErC,AAAC,aACG,EAAsB,KAAU,OAChC,EAAsB,KAAU,SACjC,EAAwB,EAAK,uBAA0B,GAAK,sBAAwB,KACvF,MAAsC,YAClC,UAAU,EAAkB,GAC5B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,gBAAkB,IACxB,EAAM,YAAc,EACpB,EAAM,KAAO,qBACb,EAAM,UACN,EAAM,WACN,EAAM,WACN,EAAM,gBACN,EAAM,WAAW,EAAM,OAChB,EAEX,SAAiB,UAAU,QAAU,WACjC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,cAC3D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,IAAI,KAAK,aAElB,EAAiB,UAAU,SAAW,WAClC,MAAY,CACR,MAAO,aACP,gBAAiB,uBACjB,kBAAmB,sBACnB,eAAgB,oBAEpB,KAAK,MAAQ,GAAI,GAAK,mBAAmB,KAAK,MAAO,GACrD,KAAK,MAAM,gBACX,KAAK,IAAI,KAAK,QAElB,EAAiB,UAAU,SAAW,WAClC,KAAK,MAAQ,GAAI,GAAK,gBAAgB,KAAK,OAC3C,KAAK,MAAM,YAAY,GAAG,EAAY,QAAS,KAAK,KAAM,MAC1D,KAAK,IAAI,KAAK,QAElB,EAAiB,UAAU,cAAgB,WACvC,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,aAAc,oBAAqB,MAC3E,KAAK,WAAW,gBAAgB,EAAG,IAEvC,EAAiB,UAAU,OAAS,WAChC,KAAK,mBACL,KAAK,aACL,KAAK,aACL,KAAK,mBAET,EAAiB,UAAU,iBAAmB,WAC1C,KAAK,WAAW,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GACrF,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAiB,UAAU,WAAa,WACpC,MAAe,EAAK,OAAO,WAAa,KACxB,EAAK,OAAO,YAAc,MAC7B,EAAW,KAAK,MAAM,aACtB,EAAY,KAAK,MAAM,YACpC,KAAK,MAAM,MAAQ,KAAK,IAAI,EAAQ,GACpC,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAK,OAAO,kBAE/B,EAAiB,UAAU,WAAa,WACpC,MAAe,KAAK,MAAM,EAAK,KAAK,MAAM,YAAc,KAAK,MAAM,MAAS,EAC5E,KAAK,MAAM,MAAQ,KAAK,MAAM,MAC9B,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAW,IAAM,KAAK,MAAM,OAE/C,EAAiB,UAAU,gBAAkB,WACzC,MAAkB,KAAK,MAAM,EAAK,KAAK,MAAM,YAAc,KAAK,MAAM,MAAS,EAC/E,KAAK,WAAW,MAAQ,KAAK,MAAM,MACnC,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAc,KAAK,WAAW,cAAgB,EAAI,GAAK,KAAK,WAAW,OAE/F,EAAiB,UAAU,WAAa,YACpC,KAAK,YAAc,EAAK,YACxB,KAAK,MAAM,WAAW,EAAK,OAC3B,KAAK,MAAM,yBACX,KAAK,MAAM,WAAW,IAE1B,EAAiB,UAAU,KAAO,WAC9B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAiB,UAAU,OAAS,WAChC,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAiB,UAAU,KAAO,WAC9B,KAAK,KAAK,EAAsB,KAAM,MACtC,KAAK,MAAQ,EACb,KAAK,SACL,KAAK,SACL,KAAK,iBACL,KAAK,UAAU,IAEnB,EAAiB,UAAU,eAAiB,WACxC,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAAK,mBAGpB,EAAiB,UAAU,UAAY,YACnC,MAAY,KACZ,AAAI,IAAiB,QAAU,GAAe,GAE9C,CAAC,KAAK,MAAO,KAAK,MAAO,KAAK,YAAY,QAAQ,cAC9C,MAAY,EAAQ,EACpB,EAAK,MAAQ,EACb,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,EACP,QAAS,EACT,MAAO,CAAE,MAAO,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,OAErE,MAAoB,EAAK,MACzB,EAAK,MAAQ,EAAgB,IAC7B,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,EACP,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,KAClB,MAAO,OAInB,EAAiB,UAAU,KAAO,WAC9B,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,OACN,EAAM,KAAK,EAAsB,KAAM,OAInD,EAAiB,UAAU,QAAU,YACjC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAClB,EAAM,UAAY,EAClB,EAAM,KAAO,OACb,EAAM,KAAO,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,mBACvD,EAAM,MAAQ,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,oBACxD,EAAM,IAAI,CAAC,EAAM,KAAM,EAAM,QAC7B,EAAM,eACC,EAEX,SAAc,UAAU,aAAe,WACnC,KAAK,MAAM,MAAQ,GACnB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,IAAI,KAAK,MAAM,OAC3B,OAAQ,GACR,KAAM,KAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KACR,OAAQ,IACR,OAAQ,GACR,KAAM,MAGP,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,kBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,aAAc,IAAU,KACnE,SAAM,SAAW,EACjB,EAAM,WAAa,EACnB,EAAM,SAAW,OAAO,KAAK,IAAI,YAAY,IAAM,IAC5C,EAEX,SAAc,UAAU,UAAY,cAChC,KAAK,GAAK,KAAK,SAAW,EAC1B,AAAI,KAAK,EAAI,KAAK,WAAa,KAAK,MAAQ,GACxC,MAAK,EAAI,CAAC,KAAK,MAAQ,IAG/B,EAAc,UAAU,QAAU,YAC9B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,aAAc,cAAgB,KACzE,SAAM,UAAY,GAClB,EAAM,UAAY,EAClB,EAAM,aAAe,EACrB,EAAM,aAAe,EACrB,EAAM,iBACN,EAAM,MAAM,OAAS,UACrB,EAAM,GAAG,OAAO,MAAM,OAAO,sBAAuB,EAAM,qBAAsB,GAChF,EAAM,GAAG,OAAO,MAAM,OAAO,oBAAqB,EAAM,mBAAoB,GACrE,EAEX,SAAU,UAAU,qBAAuB,YACvC,KAAK,UAAY,IAErB,EAAU,UAAU,mBAAqB,WACrC,KAAK,UAAY,IAErB,EAAU,UAAU,QAAU,YAC1B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAExC,EAAU,UAAU,SAAW,WAC3B,MAAmB,KAAK,cAAgB,EAAI,EAAI,KAAK,OACrD,KAAK,UAAY,EACjB,KAAK,aAAe,EAAK,OAAO,YAAc,EAC9C,KAAK,aAAe,KAAK,aAAe,KAAK,WAE1C,GACT,OAAO,YAAY,OACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA4B,YACxB,UAAU,EAAQ,GAClB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,cAAgB,EACtB,EAAM,YAAc,GACpB,EAAM,KAAO,aACb,EAAM,SACN,EAAM,UACN,EAAM,eAAe,EAAM,KAAK,YAAa,OAAO,KAAK,UAAU,UACnE,EAAM,MAAM,OAAS,UACd,EAEX,SAAO,UAAU,YAAc,WAC3B,KAAK,MAAM,QAAU,IAEzB,EAAO,UAAU,aAAe,WAC5B,KAAK,MAAM,QAAU,IAEzB,EAAO,UAAU,OAAS,WACtB,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,cACpD,KAAK,IAAI,KAAK,MAElB,EAAO,UAAU,QAAU,WACvB,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,eACrD,KAAK,IAAI,KAAK,OAElB,EAAO,UAAU,OAAS,WACtB,KAAK,KAAK,MAAQ,MAEtB,EAAO,UAAU,WAAa,WAC1B,KAAK,KAAK,MAAQ,GAEtB,EAAO,UAAU,iBAAmB,WAChC,MAAQ,MAAK,IAAI,OAAS,IAAM,KAAK,QAEzC,EAAO,UAAU,QAAU,YACvB,MAAI,MAAK,YACL,MAAK,WAAW,SAChB,KAAK,WAAa,MAEtB,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KAAK,cAAgB,IAEzB,KAAK,YAEhB,EAAO,UAAU,YAAc,WAC3B,KAAK,YAAc,KAAK,MAAM,OAAO,IAAI,CACrC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,cAAgB,GAC5B,OAAQ,GACR,KAAM,MAGd,EAAO,UAAU,WAAa,WAC1B,AAAI,KAAK,aACL,MAAK,YAAY,SACjB,KAAK,YAAc,OAGpB,GACT,OAAO,YAAY,WACrB,EAAK,OAAS,IACf,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqC,YACjC,UAAU,EAAiB,GAC3B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,MAAI,GACA,EAAO,IAAI,GAGX,EAAM,MAAM,IAAI,SAAS,GAE7B,EAAM,UACN,EAAM,YACN,EAAM,UACC,EAEX,SAAgB,UAAU,QAAU,WAChC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,aAAc,qCACrD,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,UAAY,WAClC,MAAS,MACD,GACR,KAAK,UAAY,KAAK,MAAM,IAAI,OAAO,aAAc,6BAA8B,MACnF,KAAK,UAAU,EAAI,CAAC,EACpB,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,aAAc,8BAA+B,MACrF,KAAK,WAAW,EAAI,EACpB,MAAa,CAAC,KAAK,UAAW,KAAK,YACnC,EAAO,QAAQ,YACX,EAAM,gBAAgB,GACtB,EAAM,EAAI,KAGlB,EAAgB,UAAU,QAAU,WAChC,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,WAAY,KAAK,gBACvD,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,EACd,KAAK,KAAK,EAAI,IACd,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,aAAe,WACrC,MAAO,CACH,MAAO,UACP,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,SACP,QAAS,CACL,EAAG,EACH,EAAG,GAEP,OAAQ,CACJ,KAAM,GACN,KAAM,EACN,QAAS,EACT,MAAO,qBAInB,EAAgB,UAAU,WAAa,YACnC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,KAAK,MACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,KAAK,QAAQ,GACnB,EAAM,iBACN,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,KACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,QAKvB,EAAgB,UAAU,eAAiB,WACvC,MAAW,KAAK,UAAU,QACd,KAAK,WAAW,OAChB,EAAQ,IACL,EAAQ,GACvB,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,KAAK,QAEhD,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAwB,OAAO,YAAY,oBACzB,OAAO,YAAY,cACM,YACvC,UAAU,EAAuB,GACjC,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,SAAW,EACjB,EAAM,KAAO,oBACb,EAAM,gBACN,EAAM,aACN,EAAM,mBACN,EAAM,aACN,EAAM,gBAAkB,CAAC,EAAM,YAAa,EAAM,aAAc,EAAM,iBAAkB,EAAM,iBAC9F,EAAM,gBAAgB,QAAQ,YAC1B,EAAO,gBAAgB,KAE3B,EAAM,eAAiB,CAAC,EAAM,eAC9B,EAAM,eAAe,YAAc,EAAkB,QACrD,EAAM,sBACC,EAEX,SAAsB,UAAU,YAAc,YAC1C,EAAQ,QAAQ,YAAkB,MAAQ,GAAK,QAAU,KACzD,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,CAAE,KAAM,EAAG,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,KACvE,MAAO,CAAE,KAAM,IAAM,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,KAAK,IAAK,SAAU,QAGjF,EAAsB,UAAU,YAAc,YAC1C,EAAQ,QAAQ,YAAkB,MAAQ,GAAK,QAAU,MAE7D,EAAsB,UAAU,oBAAsB,WAClD,KAAK,YAAY,KAAK,iBACtB,KAAK,YAAY,KAAK,gBACtB,KAAK,eAAe,qBACpB,KAAK,cAAc,YAAc,EAAkB,QACnD,KAAK,cAAc,kBAEvB,EAAsB,UAAU,mBAAqB,WACjD,KAAK,YAAY,KAAK,gBACtB,KAAK,YAAY,KAAK,iBACtB,KAAK,cAAc,qBACnB,KAAK,eAAe,YAAc,EAAkB,QACpD,KAAK,eAAe,kBAExB,EAAsB,UAAU,sBAAwB,WACpD,KAAK,MAAM,UAAU,gBAAgB,YAEzC,EAAsB,UAAU,cAAgB,WAC5C,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,cAC5D,KAAK,WAAW,aAAe,IAC/B,KAAK,WAAW,cAAgB,IAChC,KAAK,WAAW,MAAQ,EACxB,KAAK,IAAI,KAAK,aAElB,EAAsB,UAAU,WAAa,WACzC,KAAK,eAAiB,KAAK,MAAM,IAAI,aAAa,KAAK,SAAU,kCAAmC,2CAA4C,MAChJ,KAAK,eAAe,GAAG,OAAO,MAAM,OAAO,sBAAuB,KAAK,oBAAqB,MAC5F,KAAK,eAAe,gBAAgB,GACpC,KAAK,cAAgB,KAAK,MAAM,IAAI,aAAa,KAAK,SAAU,iCAAkC,0CAA2C,MAC7I,KAAK,cAAc,GAAG,OAAO,MAAM,OAAO,sBAAuB,KAAK,mBAAoB,MAC1F,KAAK,cAAc,KAAK,OAAO,MAAM,OAAO,sBAAuB,KAAK,sBAAuB,MAC/F,KAAK,cAAc,gBAAgB,GACnC,KAAK,YAAc,KAAK,MAAM,IAAI,YAAY,KAAK,SAAU,kCAAmC,mCAAoC,MACpI,KAAK,aAAe,KAAK,MAAM,IAAI,OAAO,KAAK,SAAU,gCAAiC,MAC1F,KAAK,aAAa,GAAG,EAAY,QAAS,KAAK,wBAAyB,MACxE,KAAK,iBAAmB,KAAK,MAAM,IAAI,aAAa,KAAK,SAAU,uCAAwC,wCAAyC,MACpJ,KAAK,0BACL,KAAK,qBAET,EAAsB,UAAU,kBAAoB,WAChD,MAAc,EAAK,iBAAiB,KAAK,MAAM,KAAK,MAAM,UAC1D,KAAK,gBAAkB,GAAI,GAAK,gBAAgB,KAAK,MAAO,MAC5D,KAAK,gBAAgB,UAAU,GAAG,EAAY,MAAO,KAAK,eAAe,KAAK,KAAM,KACpF,KAAK,gBAAgB,WAAW,GAAG,EAAY,MAAO,KAAK,eAAe,KAAK,KAAM,IACrF,KAAK,gBAAgB,WAAW,IAEpC,EAAsB,UAAU,eAAiB,YAC7C,MAAY,KAAK,MAAM,KAAK,QACN,EAAM,WACZ,EAAM,eACH,EAAU,QAAQ,KACtB,OAAO,KAAK,KAAK,EAAe,EAAW,EAAG,EAAU,UACrD,EAAU,GAC5B,KAAK,MAAM,KAAK,MAAM,UAAU,EAAK,aAAa,SAAU,GAC5D,KAAK,MAAM,KAAK,MAAM,YAAY,GAClC,KAAK,gBAAgB,WAAW,EAAK,iBAAiB,KAE1D,EAAsB,UAAU,wBAA0B,WACtD,MAAY,KACZ,GAAI,KAAK,MAAM,KAAK,OAAO,GAAG,MAAQ,IAClC,KAAK,iBACL,OAEJ,KAAK,MAAM,KAAK,MAAM,sBACjB,QAAQ,WACT,EAAM,iBACN,EAAM,MAAM,KAAK,MAAM,wBAG/B,EAAsB,UAAU,eAAiB,WAC7C,MAAY,KAAK,MAAM,MAAM,aACd,KAAK,MAAM,MAAM,wBAClB,MAAO,QAAO,SAAY,YAAc,OAAO,QAAQ,EAAQ,KAAO,GAAY,GAChG,AAAI,GACA,MAAK,MAAM,KAAK,MAAM,QACtB,KAAK,MAAM,KAAK,aAAa,KAAK,MAAM,MAAM,OAGtD,EAAsB,UAAU,iBAAmB,WAC/C,KAAK,cAAgB,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,kCAI/D,KAAK,IAAI,KAAK,gBAElB,EAAsB,UAAU,iBAAmB,WAC/C,OAAO,KAAK,mDAEhB,EAAsB,UAAU,WAAa,WACzC,MAAa,KAAK,WAAW,cACf,KACI,EAAO,IAAM,KAAK,eAAe,cAAgB,EACnE,KAAK,eAAe,EAAI,EAAO,QAAU,EACzC,KAAK,eAAe,EAAI,EACxB,KAAK,cAAc,EAAI,EAAO,QAAU,EACxC,KAAK,cAAc,EAAI,EACvB,MAAqB,EAAO,QAC5B,KAAK,YAAY,EAAI,EAAO,KAAO,KAAK,YAAY,aAAe,EACnE,KAAK,YAAY,EAAI,EACrB,KAAK,aAAa,EAAI,EAAO,QAC7B,KAAK,aAAa,EAAI,EACtB,KAAK,iBAAiB,EAAI,EAAO,MAAQ,KAAK,iBAAiB,aAAe,EAC9E,KAAK,iBAAiB,EAAI,EAC1B,KAAK,gBAAgB,EAAI,EAAO,OAAS,KAAK,gBAAgB,YAAY,OAAS,EACnF,KAAK,cAAc,OAAS,EAAO,QAEvC,EAAsB,UAAU,wBAA0B,WACtD,KAAK,iBAAiB,SAAS,8CAC/B,KAAK,iBAAiB,qBAE1B,EAAsB,UAAU,SAAW,WACvC,MAAO,MAAK,WAAW,cAEpB,GACT,OAAO,YAAY,WACrB,EAAK,sBAAwB,IAC9B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAoB,KAAU,sBAC9B,EAAoB,KAAU,wBAC/B,EAAsB,EAAK,qBAAwB,GAAK,oBAAsB,KACjF,MAAoC,YAChC,UAAU,EAAgB,GAC1B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,SAAW,aACjB,EAAM,gBAAkB,IACxB,EAAM,KAAO,kBACb,EAAM,gBACN,EAAM,iBACN,EAAM,aACN,EAAM,eACC,EAEX,SAAe,UAAU,cAAgB,WACrC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,cAC5D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,IAAI,KAAK,aAElB,EAAe,UAAU,eAAiB,WACtC,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,KAAK,SAAU,qCAAsC,MAC9F,KAAK,YAAY,gBAAgB,IAErC,EAAe,UAAU,WAAa,WAClC,KAAK,QAAU,GAAI,GAAK,sBAAsB,KAAK,MAAO,KAAK,UAC/D,KAAK,IAAI,KAAK,UAElB,EAAe,UAAU,aAAe,WACpC,MAAmB,OAAO,KAAK,OAAO,gBACtB,OAAO,KAAK,OAAO,aACrB,UAAY,EAAe,IAAM,IACnC,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,SACX,SAAU,OACV,MAAO,aAEC,IACZ,KAAK,UAAY,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACpD,KAAK,UAAU,UAAU,GAAK,GAC9B,KAAK,UAAU,MAAQ,EACvB,KAAK,UAAU,QAAQ,gBAAiB,GACxC,KAAK,IAAI,KAAK,YAElB,EAAe,UAAU,OAAS,YAC9B,KAAK,mBACL,KAAK,iBAAiB,GACtB,KAAK,gBACL,KAAK,kBAET,EAAe,UAAU,iBAAmB,WACxC,KAAK,WAAW,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GACrF,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAe,UAAU,iBAAmB,YACxC,KAAK,YAAY,MAAQ,EAAe,MACxC,KAAK,YAAY,EAAI,EAAe,EACpC,KAAK,YAAY,EAAI,EAAe,GAExC,EAAe,UAAU,cAAgB,WACrC,MAAe,EAAK,OAAO,WAAa,GACxC,KAAK,QAAQ,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,QAAQ,YACzD,KAAK,QAAQ,EAAI,EAAK,OAAO,gBAC7B,KAAK,QAAQ,EAAI,EAAK,OAAO,kBAEjC,EAAe,UAAU,eAAiB,WACtC,KAAK,UAAU,MAAQ,KAAK,QAAQ,MACpC,KAAK,UAAU,EAAI,EAAK,OAAO,gBAC/B,KAAK,UAAU,EAAI,EAAK,OAAO,YAAc,IAEjD,EAAe,UAAU,KAAO,WAC5B,KAAK,OAAS,GACd,KAAK,QAAU,IAEnB,EAAe,UAAU,OAAS,WAC9B,KAAK,OAAS,GACd,KAAK,QAAU,IAEnB,EAAe,UAAU,KAAO,WAC5B,KAAK,SACL,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,CAAE,KAAM,EAAG,GAAI,KAAK,mBAE/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,CAAE,KAAM,EAAG,GAAI,KAAK,UAAU,QAAQ,oBAEjD,MAAoB,KAAK,QAAQ,MACjC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,MAAO,CAAE,KAAM,EAAG,GAAI,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACvE,MAAO,CACH,KAAM,EAAgB,GACtB,GAAI,EACJ,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,OAGtC,KAAK,KAAK,EAAoB,KAAM,OAExC,EAAe,UAAU,KAAO,WAC5B,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,OACN,EAAM,KAAK,EAAoB,KAAM,OAI1C,GACT,OAAO,YAAY,WACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KAQnB,SACA,AAAC,aACG,MAAsB,OAAO,QAAQ,SAAS,kBAC5B,OAAO,YAAY,cAClB,OAAO,KAAK,eAE/B,AAAC,aACG,EAAe,MAAW,QAC1B,EAAe,KAAU,OACzB,EAAe,IAAS,MACxB,EAAe,YAAiB,gBACjC,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,aACI,MAAY,IAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAChE,SAAM,kBAAoB,GACnB,EAEX,SAAU,UAAU,KAAO,WACvB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAC5C,KAAK,OAAS,KAAK,MAAM,KAAK,IAAI,EAAU,YAC5C,KAAK,oBAAsB,CAAE,EAAG,EAAG,EAAG,GACtC,KAAK,kBAAoB,GACzB,KAAK,kBAAoB,KACzB,KAAK,cAAgB,MAEzB,EAAU,UAAU,OAAS,WACzB,KAAK,mBACL,KAAK,iBACL,KAAK,eACL,KAAK,gBACL,KAAK,UACL,KAAK,wBACL,KAAK,YACL,KAAK,YACL,KAAK,eACL,KAAK,oBACL,KAAK,qBACL,KAAK,oBAEL,KAAK,cACL,KAAK,2BACL,KAAK,kBACL,KAAK,sBACL,KAAK,uBACL,KAAK,SACL,KAAK,wBAIL,AAAI,MAAM,QAAQ,aAAa,iBAC3B,KAAK,mBAGb,EAAU,UAAU,iBAAmB,WACnC,KAAK,cAAgB,KAAK,IAAI,UAAU,EAAG,GAC3C,KAAK,cAAc,KAAO,QAE9B,EAAU,UAAU,eAAiB,WACjC,MAAY,KACZ,KAAK,YAAc,KAAK,OAAO,YAAY,IAAI,cAC3C,MAAS,EAAM,IAAI,MAAM,EAAG,EAAG,GAC/B,SAAG,UAAU,EAAG,GAChB,EAAG,EAAI,EAAQ,EAAG,OAClB,EAAM,cAAc,IAAI,GACjB,KAGf,EAAU,UAAU,aAAe,WAC/B,MAAa,KAAK,eAAe,EAAe,aAChD,GAAI,CAAC,EACD,OAEJ,KAAK,MAAM,OAAO,CACd,IAAK,EAAe,YACpB,OAAQ,GACR,YAAa,IACb,OAAQ,KAAK,MAAM,cAAc,aAAc,iCAC/C,UAAW,KAEf,KAAK,UAAY,KAAK,IAAI,OAAO,EAAG,EAAG,aAAc,qCACrD,KAAK,UAAU,EAAI,EAAO,EAC1B,KAAK,UAAU,EAAI,EAAO,EAC1B,KAAK,UAAU,MAAM,YAAY,KAAM,EAAe,aACtD,KAAK,cAAc,IAAI,KAAK,WAC5B,KAAK,IAAI,WAAW,IAAI,KAAK,YAEjC,EAAU,UAAU,cAAgB,WAChC,MAAY,KACZ,KAAK,WAAa,KAAK,OAAO,YAAY,IAAI,YAC1C,MAAW,EAAM,iBAAiB,EAAO,gBAC9B,GAAI,GAAK,UAAU,EAAO,GACrC,SAAK,EAAI,EAAO,EAChB,EAAK,EAAI,EAAO,EAChB,EAAK,QAAQ,OAAQ,aACrB,EAAM,cAAc,IAAI,GACjB,IAEX,KAAK,iBAAmB,KAAK,4BAEjC,EAAU,UAAU,iBAAmB,YACnC,MAAkB,KAAK,KAAK,MAAM,eAAe,GACjD,MAAI,GACO,CACH,YAAa,EACb,SAAU,GACV,OAAQ,GACR,MAAO,EAAY,OAGpB,CACH,YAAa,EACb,SAAU,GACV,OAAQ,KAAK,cAAc,GAC3B,MAAO,IAGf,EAAU,UAAU,cAAgB,YAChC,GAAI,IAAgB,EAChB,MAAO,GAEX,MAAsB,EAAc,IACd,KAAK,KAAK,MAAM,eAAe,GACrD,MAAO,CAAC,GAEZ,EAAU,UAAU,UAAY,YAC5B,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,cAAe,CAAE,YAAa,KAEtF,EAAU,UAAU,QAAU,WAC1B,MAAiB,KAAK,eAAe,EAAe,MACpD,GAAI,CAAC,EACD,OAEJ,KAAK,KAAO,GAAI,GAAK,cAAc,MACnC,KAAK,KAAK,UAAY,EAAW,EACjC,KAAK,KAAK,UAAY,EAAW,EACjC,KAAK,IAAI,SAAS,KAAK,OAE3B,EAAU,UAAU,eAAiB,YACjC,MAAO,MAAK,OAAO,MAAM,KAAK,YAAoB,MAAO,GAAO,OAAS,KAE7E,EAAU,UAAU,sBAAwB,WACxC,KAAK,mBAAqB,KAAK,IAAI,UAAU,aAAc,wBAE/D,EAAU,UAAU,UAAY,WAC5B,KAAK,OAAS,GAAI,GAAK,OAAO,MAC9B,KAAK,OAAO,GAAG,OAAO,MAAM,OAAO,sBAAuB,KAAK,cAAe,MAC9E,KAAK,IAAI,SAAS,KAAK,SAE3B,EAAU,UAAU,cAAgB,WAChC,MAAY,KACZ,GAAI,KAAK,kBACL,OAEJ,MAAgB,KAAK,iBACrB,GAAI,CAAC,EACD,OAEJ,KAAK,KAAK,MAAM,iBAChB,KAAK,aAAa,cAClB,MAAc,OAAO,QAAQ,OAAO,WAAW,GAAa,KAAK,cAAc,MAAQ,EAAK,OAAO,YAAc,EACjH,KAAK,kBAAoB,KAAK,OAAO,IAAI,CACrC,QAAS,KAAK,OACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,QAAS,EACT,WAAY,WACR,EAAM,kBAAoB,SAItC,EAAU,UAAU,UAAY,WAC5B,MAAY,KACZ,KAAK,OAAS,KAAK,OAAO,MACrB,OAAO,YAAkB,MAAO,GAAK,OAAS,EAAe,QAC7D,IAAI,YACL,MAAY,GAAI,GAAK,cAAc,EAAO,EAAY,MAAO,EAAM,YAAY,GAAG,OAClF,SAAM,EAAI,EAAY,EACtB,EAAM,EAAI,EAAY,EACtB,EAAM,cAAc,IAAI,GACxB,EAAM,IAAI,WAAW,IAAI,GAClB,KAGf,EAAU,UAAU,aAAe,WAC/B,KAAK,UAAY,GAAI,GAAK,UAAU,MACpC,KAAK,UAAU,gBAAgB,GAC/B,KAAK,UAAU,MAAQ,GACvB,KAAK,UAAU,GAAG,OAAO,MAAM,OAAO,sBAAuB,KAAK,YAAa,MAC/E,KAAK,UAAU,GAAG,OAAO,MAAM,OAAO,oBAAqB,KAAK,UAAW,MAC3E,KAAK,IAAI,SAAS,KAAK,WACvB,KAAK,MAAM,aAAa,KAAK,YAEjC,EAAU,UAAU,YAAc,WAC9B,MAAY,KACZ,SAAS,cAAgB,YACrB,EAAM,cAAc,EAAM,MAAM,WAAW,EAAM,QACjD,EAAM,4BAGd,EAAU,UAAU,UAAY,WAC5B,SAAS,cAAgB,MAE7B,EAAU,UAAU,cAAgB,YAChC,KAAK,UAAU,EAAI,OAAO,KAAK,MAAM,EAAO,KAAK,UAAU,UAAW,KAAK,UAAU,eAEzF,EAAU,UAAU,wBAA0B,WAC1C,MAAe,MAAK,UAAU,EAAI,KAAK,UAAU,WAAa,KAAK,UAAU,eAC1D,KAAK,OAAO,cACf,EAAa,IACV,EAAa,OAAS,EAAK,OAAO,YACrD,KAAK,OAAO,QAAW,GAAe,GAAa,GAEvD,EAAU,UAAU,mBAAqB,WACrC,KAAK,gBAAkB,GAAI,GAAK,iBAAiB,MACjD,KAAK,gBAAgB,WAAW,KAAK,EAAY,MAAO,KAAK,kBAAmB,MAChF,KAAK,gBAAgB,gBAAgB,EAAG,GACxC,KAAK,gBAAgB,GAAG,EAAK,sBAAsB,KAAM,KAAK,sBAAuB,MACrF,KAAK,gBAAgB,GAAG,EAAK,sBAAsB,KAAM,KAAK,sBAAuB,MACrF,KAAK,gBAAgB,OACrB,KAAK,IAAI,SAAS,KAAK,kBAE3B,EAAU,UAAU,kBAAoB,WACpC,MAAY,KACZ,KAAK,KAAK,gBAAgB,uBACrB,MAAM,cACN,QAAQ,WACT,EAAM,UAAU,EAAM,gBAAgB,gBAG9C,EAAU,UAAU,sBAAwB,WACxC,KAAK,eAAe,QAAU,GAC9B,KAAK,gBACL,KAAK,qBAET,EAAU,UAAU,cAAgB,WAEhC,KAAK,aAAa,yBAClB,KAAK,aAAa,SAAS,cAAgB,GAC3C,KAAK,sBAAsB,OAAS,IAExC,EAAU,UAAU,sBAAwB,WAExC,KAAK,eAAe,QAAU,GAC9B,KAAK,eACL,KAAK,oBAET,EAAU,UAAU,aAAe,WAC/B,KAAK,aAAa,sBAClB,KAAK,aAAa,SAAS,cAAgB,GAC3C,KAAK,sBAAsB,OAAS,IAExC,EAAU,UAAU,iBAAmB,WACnC,KAAK,WACA,OAAO,YAAkB,MAAO,GAAK,YAAc,EAAK,eAAe,SACvE,QAAQ,YACT,EAAK,oBAGb,EAAU,UAAU,kBAAoB,WACpC,KAAK,WACA,OAAO,YAAkB,MAAO,GAAK,YAAc,EAAK,eAAe,SACvE,QAAQ,YACT,EAAK,wBAGb,EAAU,UAAU,kBAAoB,WACpC,KAAK,eAAiB,KAAK,IAAI,OAAO,aAAc,yCACpD,KAAK,eAAe,GAAG,EAAY,MAAO,KAAK,aAAc,MAC7D,KAAK,eAAe,gBAAgB,IAExC,EAAU,UAAU,kBAAoB,WACpC,KAAK,eAAiB,GAAI,GAAK,eAAe,MAC9C,KAAK,eAAe,YAAY,GAAG,EAAY,MAAO,KAAK,aAAc,MACzE,KAAK,eAAe,GAAG,EAAK,oBAAoB,KAAM,KAAK,eAAgB,MAC3E,KAAK,eAAe,GAAG,EAAK,oBAAoB,KAAM,KAAK,eAAgB,MAC3E,KAAK,eAAe,OACpB,KAAK,eAAe,gBAAgB,GACpC,KAAK,IAAI,SAAS,KAAK,iBAE3B,EAAU,UAAU,eAAiB,WACjC,KAAK,eAAe,YAAY,QAAU,GAC1C,KAAK,eAAe,QAAU,GAC9B,KAAK,gBACL,KAAK,qBAET,EAAU,UAAU,eAAiB,WACjC,KAAK,eAAe,YAAY,QAAU,GAC1C,KAAK,eAAe,QAAU,GAC9B,KAAK,eACL,KAAK,oBAET,EAAU,UAAU,aAAe,WAC/B,AAAI,KAAK,eAAe,UAAY,IAChC,KAAK,eAAe,QAG5B,EAAU,UAAU,aAAe,WAC/B,KAAK,eAAe,QAExB,EAAU,UAAU,oBAAsB,WACtC,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MACpE,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,WAAY,KAAK,YAAa,MAChE,KAAK,cAAgB,KAAK,QAAQ,KAAK,MACvC,KAAK,KAAK,OAAO,cAAc,iBAAiB,QAAS,KAAK,gBAElE,EAAU,UAAU,QAAU,YAE1B,GADA,EAAM,iBACF,KAAK,aAAa,SAAS,gBAAkB,GAC7C,OAEJ,KAAK,aAAa,eAAiB,CAAC,EAAM,OAAS,KAEvD,EAAU,UAAU,cAAgB,YAChC,KAAK,oBAAoB,EAAI,EAAQ,EACrC,KAAK,oBAAoB,EAAI,EAAQ,GAEzC,EAAU,UAAU,YAAc,cAC9B,MAAe,OAAO,KAAK,SAAS,QAAQ,KAAK,oBAAoB,EAAG,KAAK,oBAAoB,EAAG,EAAQ,EAAG,EAAQ,GAEvH,GADA,KAAK,kBAAoB,EAAW,EAChC,KAAK,kBACL,OAEJ,MAAgB,EAAM,KAAK,YAAkB,MAAO,GAAK,QAAQ,UAAY,cAC7E,AAAI,GACA,KAAK,iBAAiB,IAG9B,EAAU,UAAU,iBAAmB,YACnC,KAAK,KAAK,MAAM,iBAChB,KAAK,oBAAoB,EAAU,cAEvC,EAAU,UAAU,oBAAsB,YACtC,MAAW,KAAK,uBAAuB,GACvC,GAAI,CAAC,EACD,OAEJ,KAAK,gBAAgB,WAAW,GAChC,KAAK,gBAAgB,QAEzB,EAAU,UAAU,uBAAyB,YACzC,MAAkB,KAAK,KAAK,aAAa,IAAI,GAC7C,GAAI,CAAC,EACD,MAAa,GAAsB,EAC5B,KAEX,MAAkB,KAAK,KAAK,MAAM,eAAe,GACjD,MAAI,GACO,CACH,YAAa,EACb,cAAe,GACf,UAAW,EAAY,UACvB,MAAO,EAAY,MACnB,UAAW,EAAY,UAAU,eACjC,WAAY,EAAY,UAAU,gBAGnC,CACH,YAAa,EACb,cAAe,GACf,UAAW,EACX,MAAO,EACP,UAAW,EAAY,UAAU,eACjC,WAAY,EAAY,UAAU,iBAG1C,EAAU,UAAU,qBAAuB,WACvC,AAAI,EAAK,KAAK,aACV,CAAI,EAAK,KAAK,eACV,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,oBAAqB,MAElE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,iBAAkB,MAC3D,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,gBAAiB,MAC1D,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,cAAe,OAE5D,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,aAAc,MACzD,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,QAAS,MAClD,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,eAAgB,MAC7D,KAAK,MAAM,SAAS,GAAG,oBAAqB,KAAK,gBAAiB,MAClE,KAAK,MAAM,SAAS,GAAG,kBAAmB,KAAK,cAAe,MAC9D,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,YAAa,MACzD,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,eAAgB,MAC3D,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,0BAA2B,MACvE,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,0BAA2B,OAE5E,EAAU,UAAU,gBAAkB,WAClC,KAAK,WAAW,OAAO,YAAkB,MAAO,GAAK,YAAc,EAAK,eAAe,SAAW,QAAQ,YAAkB,MAAO,GAAK,gBACxI,KAAK,iBAAmB,KAAK,4BAEjC,EAAU,UAAU,cAAgB,WAChC,KAAK,WAAW,QAAQ,YAAkB,MAAO,GAAK,eAE1D,EAAU,UAAU,iBAAmB,WACnC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,iBAExD,EAAU,UAAU,oBAAsB,WACtC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,oBAExD,EAAU,UAAU,aAAe,WAC/B,GAAI,KAAK,gBAAgB,SACrB,KAAK,gBAAgB,OACrB,OAEJ,KAAK,gBAET,EAAU,UAAU,aAAe,aAGnC,EAAU,UAAU,QAAU,WAC1B,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,KAAK,MAAM,MAErD,EAAU,UAAU,eAAiB,WACjC,GAAI,KAAK,eAAe,QACpB,OAEJ,GAAI,KAAK,gBAAgB,SACrB,KAAK,UAAU,KAAK,gBAAgB,aACpC,OAEJ,MAAgB,KAAK,2BACrB,AAAI,GACA,MAAK,kBAAkB,GACvB,KAAK,oBAAoB,EAAU,eAG3C,EAAU,UAAU,gBAAkB,WAClC,KAAK,OAAO,SAAW,EAAK,OAAO,aAEvC,EAAU,UAAU,cAAgB,WAChC,KAAK,OAAO,SAAW,EAAK,OAAO,aAEvC,EAAU,UAAU,eAAiB,WACjC,KAAK,OAAO,QAAU,KAAK,cAAc,YAAY,QAEzD,EAAU,UAAU,YAAc,WAC9B,KAAK,OAAO,QAAU,GAE1B,EAAU,UAAU,0BAA4B,WAC5C,MAAgB,KAAK,2BACrB,AAAI,GACA,KAAK,kBAAkB,IAG/B,EAAU,UAAU,cAAgB,YAChC,MAAgB,KAAK,WAAW,KAAK,YAAkB,MAAO,GAAK,cAAgB,IACnF,AAAI,GACA,KAAK,kBAAkB,IAG/B,EAAU,UAAU,kBAAoB,YACpC,KAAK,OAAO,QAAU,OAAO,QAAQ,OAAO,WAAW,GAAa,KAAK,cAAc,MAAQ,EAAK,OAAO,YAAc,GAE7H,EAAU,UAAU,OAAS,WACzB,KAAK,sBACL,KAAK,eACL,KAAK,6BACL,KAAK,oBACL,KAAK,qBACL,KAAK,iBACL,KAAK,sBACL,KAAK,eAAe,OAAO,KAAK,gBAChC,KAAK,gBAAgB,UAEzB,EAAU,UAAU,oBAAsB,WACtC,KAAK,cAAc,MAAQ,EAAK,OAAO,WAAa,KAAK,YAAY,GAAG,OAE5E,EAAU,UAAU,aAAe,WAC/B,KAAK,OAAO,MAAQ,KAAK,cAAc,MACvC,KAAK,OAAO,cAAgB,KAAK,OAAO,OAE5C,EAAU,UAAU,2BAA6B,WAC7C,GAAI,CAAC,KAAK,KACN,OAEJ,KAAK,KAAK,MAAQ,KAAK,cAAc,MACrC,KAAK,KAAK,EAAI,KAAK,KAAK,UAAY,KAAK,KAAK,MAC9C,KAAK,KAAK,EAAI,KAAK,KAAK,UAAY,KAAK,KAAK,OAElD,EAAU,UAAU,kBAAoB,WACpC,AAAI,KAAK,aACL,MAAK,YAAY,UACjB,KAAK,YAAY,UAErB,KAAK,kBAET,EAAU,UAAU,eAAiB,WACjC,MAAe,KAAK,KAAK,qBACb,KAAK,cAAc,MAC/B,KAAK,YAAc,KAAK,mBAAmB,cAAc,CACrD,MAAO,sBACP,EAAG,EAAS,EACZ,EAAG,EAAS,EAAI,GAAK,EACrB,SAAU,CACN,KAAM,SACN,OAAQ,KAAK,gBAAgB,IAEjC,UAAW,IACX,SAAU,EACV,SAAU,IAAM,EAChB,OAAQ,CAAE,IAAK,IAAM,EAAO,IAAK,IAAM,GACvC,OAAQ,CAAE,IAAK,IAAM,EAAO,IAAK,GAAK,GACtC,MAAO,CAAE,MAAO,EAAO,IAAK,EAAG,KAAM,EAAa,OAClD,SAAU,KACV,GAAI,MAGZ,EAAU,UAAU,gBAAkB,YAClC,MAAY,GAAK,IACJ,GAAK,EAClB,MAAO,IAAI,QAAO,KAAK,UAAU,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,IAErE,EAAU,UAAU,mBAAqB,WACrC,MAAU,OAAO,QAAQ,OAAO,OAAO,KAAK,YAAY,MAC3C,OAAO,QAAQ,OAAO,UAAU,KAAK,YAAY,KAAK,YAAY,OAAS,MACtE,EAAS,EAC3B,KAAK,OAAO,UAAU,EAAG,EAAG,EAAK,OAAO,WAAY,EAAc,KAAK,cAAc,QAEzF,EAAU,UAAU,eAAiB,WACjC,MAAY,KAAK,cAAc,MAC/B,KAAK,UAAU,MAAQ,EACvB,KAAK,UAAU,EAAI,EAAK,OAAO,WAAa,GAAK,EACjD,KAAK,UAAU,YAEnB,EAAU,UAAU,oBAAsB,WACtC,MAAY,EAAK,OAAO,eACX,GAAK,EAClB,KAAK,eAAe,MAAQ,EAC5B,KAAK,eAAe,EAAI,EAAK,OAAO,WAAa,EACjD,KAAK,eAAe,EAAI,GAE5B,EAAU,UAAU,YAAc,WAC9B,KAAK,OAAS,KAAK,QAAQ,MAE/B,EAAU,UAAU,yBAA2B,WAC3C,MAAc,KAAK,MAAM,SAAS,mBAClC,KAAK,sBAAwB,GAAI,GAAgB,CAC7C,OAAQ,KAAK,OACb,KAAM,EAAQ,KACd,MAAO,EAAQ,MACf,GAAI,EAAQ,GACZ,KAAM,EAAQ,KACd,MAAO,KAGf,EAAU,UAAU,gBAAkB,WAClC,KAAK,aAAe,GAAI,GAAK,cAAc,KAAM,CAC7C,OAAQ,KAAK,OACb,gBAAiB,GACjB,mBAAoB,IACpB,gBAAiB,GACjB,iBAAkB,GAClB,cAAe,GACf,eAAgB,GAChB,kBAAmB,IACnB,iBAAkB,IAEtB,KAAK,aAAa,uBAEtB,EAAU,UAAU,OAAS,cACzB,EAAO,UAAU,OAAO,KAAK,KAAM,EAAM,GACzC,KAAK,sBAAsB,OAAO,GAClC,KAAK,aAAa,SAClB,KAAK,kBACL,KAAK,gBAET,EAAU,UAAU,gBAAkB,WAClC,GAAI,KAAK,UAAU,UACf,OAEJ,MAAmB,KAAK,OAAO,cACf,EAAa,IACV,EAAa,OAAS,EAAK,OAAO,cACvC,KAAK,IAAI,EAAG,KAAK,OAAO,WACxB,OAAO,KAAK,MAAM,EAAW,GAAe,GAAY,EAAG,GACzE,KAAK,UAAU,EAAI,KAAK,UAAU,UAAa,MAAK,UAAU,aAAe,KAAK,UAAU,WAAa,GAE7G,EAAU,UAAU,aAAe,WAC/B,MAAY,KACZ,GAAI,CAAC,KAAK,iBACN,OAEJ,MAAmB,KAAK,OAAO,cACf,OAAO,KAAK,MAAM,KAAK,OAAO,QAAS,EAAG,EAAa,OAAS,EAAK,OAAO,eACzE,EAAY,KAAK,OAAO,SAClB,KAAK,iBAAiB,qBAC7B,EAAmB,EAAI,GAAK,KAAK,cAAc,QAClD,EAAc,GAAa,EAAc,EACxD,GAAI,EACA,KAAK,OAAO,EAAI,EAAc,KAAK,OAAO,mBAAqB,EAC/D,KAAK,OAAO,kBAGZ,MAAmB,EAAe,IACd,EAAY,EAAe,EAC/C,AAAI,EAAc,EACd,MAAK,OAAO,EAAI,EAAe,KAAK,OAAO,mBAAqB,EAChE,KAAK,OAAO,cAGZ,MAAK,OAAO,EAAI,EAAY,KAAK,OAAO,mBAAqB,EAC7D,KAAK,OAAO,UAGpB,AAAI,KAAK,OAAO,aAAe,IAAa,GACxC,MAAK,OAAO,aACZ,KAAK,OAAO,QAAQ,KACpB,KAAK,OAAO,eAEX,AAAI,KAAK,OAAO,cAAgB,IAAS,GAC1C,MAAK,OAAO,QAAQ,GAAG,GAAG,OAAO,OAAO,OAAO,eAAgB,WAC3D,EAAM,OAAO,gBAEjB,KAAK,OAAO,gBAEhB,KAAK,OAAO,EAAI,EAAmB,EACnC,KAAK,OAAO,YAAc,GAE9B,EAAU,UAAU,yBAA2B,WAC3C,MAA2B,KAAK,WAC3B,OAAO,YAAkB,MAAO,GAAK,YAAc,EAAK,eAAe,WACvE,IAAI,YAAkB,MAAO,GAAK,gBAC5B,KAAK,IAAI,MAAM,KAAM,GAChC,MAAO,MAAK,WAAW,KAAK,YAAkB,MAAO,GAAK,cAAgB,KAE9E,EAAU,UAAU,sBAAwB,WACxC,MAAwB,KAAK,2BAC7B,AAAI,EACA,KAAK,kBAAkB,GAGvB,KAAK,kBAGb,EAAU,UAAU,SAAW,WAC3B,SAAS,cAAgB,KACzB,AAAI,KAAK,eACL,KAAK,KAAK,OAAO,cAAc,oBAAoB,QAAS,KAAK,eAErE,KAAK,sBAET,EAAU,UAAU,mBAAqB,WACrC,KAAK,MAAM,IAAI,eACf,KAAK,MAAM,IAAI,aACf,KAAK,MAAM,IAAI,gBAEnB,EAAU,WAAa,oBAChB,GACT,OAAO,OACT,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAc,OAAO,KAAK,UAE1B,AAAC,aACG,EAAW,KAAU,aACrB,EAAW,KAAU,eACtB,EAAa,EAAK,YAAe,GAAK,WAAa,KACtD,MAA2B,WACvB,oBACI,KAAK,QAAU,GACf,KAAK,MAAQ,EACb,KAAK,OAAS,EACd,KAAK,QAAU,EACf,KAAK,MAAQ,EACb,KAAK,MAAM,GAAG,EAAW,KAAM,KAAK,SAAU,MAC9C,KAAK,MAAM,GAAG,EAAW,KAAM,KAAK,WAAY,MAChD,KAAK,MAAQ,GAAI,QAAO,OAAO,OAC/B,KAAK,eAAiB,GAAI,GAC1B,KAAK,eAET,cAAO,eAAe,EAAM,UAAW,SAAU,CAC7C,IAAK,WACD,MAAO,MAAK,SAEhB,WAAY,GACZ,aAAc,KAElB,EAAM,UAAU,aAAe,WAC3B,KAAK,YAAc,GAAI,GACvB,KAAK,aAAe,EAAE,MAAM,KAAK,QAAQ,SAAW,EAAG,WACnD,MAAO,IAAI,KAEf,KAAK,cAAgB,EAAE,MAAM,KAAK,QAAQ,SAAW,EAAG,WACpD,MAAO,IAAI,MAGnB,EAAM,UAAU,SAAW,WACvB,GAAI,KAAK,QACL,OAEJ,KAAK,MAAM,OAAO,OAAS,EAC3B,KAAK,QAAU,IAEnB,EAAM,UAAU,WAAa,WACzB,GAAI,CAAC,KAAK,QACN,OAEJ,KAAK,QAAU,IAEnB,EAAM,UAAU,KAAO,WACnB,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,MAAM,OAAO,KAAK,CAAE,EAAG,KAAK,MAAM,EAAG,EAAG,KAAK,MAAM,IACxD,MAAa,KAAK,MAAM,OAAO,OAC/B,GAAI,EAAS,EACT,OAEJ,AAAI,EAAS,KAAK,QAAQ,QACtB,MAAK,MAAM,OAAS,KAAK,MAAM,OAAO,MAAM,CAAC,KAAK,QAAQ,SAG9D,KAAK,WACL,KAAK,OAAO,WAAW,KAAK,mBAAoB,KAEpD,EAAM,UAAU,SAAW,aAe3B,EAAM,UAAU,iBAAmB,WAC/B,UAAa,KAAK,QAAQ,SAAU,GAAK,EAAG,KACxC,MAAY,EAAI,KAAK,QAAQ,WAChB,KAAK,MAAM,eAAiB,EACzC,KAAK,MAAM,SAAS,EAAO,KAAK,gBAChC,KAAK,MAAM,aAAa,EAAO,KAAK,aACpC,KAAK,cAAc,GAAG,KAAK,KAAK,aAAa,qBAAqB,MAAM,GAAQ,IAAI,KAAK,gBACzF,KAAK,aAAa,GAAG,KAAK,KAAK,aAAa,qBAAqB,MAAM,CAAC,GAAQ,IAAI,KAAK,gBAE7F,MAAO,gBAAe,KAAK,cAAe,KAAK,aAAa,YAEhE,EAAM,UAAU,QAAU,WACtB,KAAK,MAAM,IAAI,EAAW,KAAM,KAAK,SAAU,MAC/C,KAAK,MAAM,IAAI,EAAW,KAAM,KAAK,WAAY,MACjD,KAAK,MAAQ,KACb,KAAK,MAAQ,MAEV,KAEX,EAAK,MAAQ,IACd,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,qBACb,EAAM,eAAiB,EACvB,EAAM,OAAS,GACf,EAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,EAAM,aAAc,GACrE,EAEX,SAAa,UAAU,SAAW,cAC9B,MAAY,GAAI,GAAK,MAAM,KAAK,MAAO,KAAM,EAAO,SAAS,SAAS,GAAI,KAAK,gBAAiB,IAChG,YAAK,OAAO,KAAK,GACjB,EAAM,GAAG,EAAK,WAAW,KAAM,KAAK,YAAa,MACjD,EAAM,GAAG,EAAK,WAAW,KAAM,KAAK,YAAa,MACjD,EAAM,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,eAAe,KAAK,KAAM,EAAO,IAC7E,GAEX,EAAa,UAAU,YAAc,WACjC,GAAI,CAAC,KAAK,MACN,OAEJ,AAAI,KAAK,mBACL,KAAK,UAGb,EAAa,UAAU,YAAc,WACjC,GAAI,CAAC,KAAK,MACN,OAEJ,MAAqB,KAAK,oBAAsB,GAChD,AAAI,GACA,MAAK,QACL,KAAK,SAGb,EAAa,UAAU,gBAAkB,WACrC,MAAO,MAAK,OAAO,KAAK,YAAmB,MAAO,GAAM,UAE5D,EAAa,UAAU,eAAiB,cACpC,GAAI,CAAC,KAAK,MACN,OAEJ,MAAY,KAAK,OAAO,QAAQ,GAChC,AAAI,EAAQ,IACR,MAAK,OAAO,OAAO,EAAO,GAC1B,EAAM,IAAI,EAAK,WAAW,KAAM,KAAK,YAAa,MAClD,EAAM,IAAI,EAAK,WAAW,KAAM,KAAK,YAAa,MAClD,EAAM,YAGd,EAAa,UAAU,aAAe,cAClC,MAAY,KACZ,KAAK,QACL,KAAK,OAAO,QAAQ,YAChB,EAAM,UAAU,EAAM,QAAQ,MAAO,EAAM,QAAQ,OACnD,EAAM,UAGd,EAAa,UAAU,QAAU,YAC7B,GAAI,CAAC,KAAK,MACN,OAEJ,KAAK,OAAO,QAAQ,YAAmB,MAAO,GAAM,YACpD,KAAK,OAAS,KACd,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,YAAa,KAAK,aAAc,MAC3E,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,UACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAa,KAAU,WACvB,EAAa,MAAW,YACxB,EAAa,IAAS,UACtB,EAAa,KAAU,aACxB,EAAe,EAAK,cAAiB,GAAK,aAAe,KAC5D,MAAyB,YACrB,UAAU,EAAK,GACf,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAI,UAAW,iBAAmB,KAC7E,SAAM,UAAU,IAAM,IACtB,EAAM,mBACN,EAAM,wBACN,EAAM,GAAG,qBAAuB,EAAa,KAAM,EAAM,wBAAyB,GAC3E,EAEX,SAAI,UAAU,iBAAmB,WAC7B,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,EAAa,KAClB,OAAQ,KAAK,mBAAmB,YAChC,OAAQ,KAEZ,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,EAAa,IAClB,OAAQ,KAAK,mBAAmB,WAChC,OAAQ,KAEZ,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,EAAa,KAClB,OAAQ,KAAK,mBAAmB,YAChC,UAAW,KAEf,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,EAAa,MAClB,OAAQ,KAAK,mBAAmB,aAChC,OAAQ,GACR,UAAW,MAGnB,EAAI,UAAU,mBAAqB,YAC/B,MAAO,MAAK,MAAM,MAAM,cAAc,EAAI,UAAW,IAEzD,EAAI,UAAU,sBAAwB,WAClC,MAAY,OACQ,OAAO,OAAO,GAClC,EAAc,QAAQ,YAClB,EAAM,MAAM,MAAM,IAAI,GAAS,OAAO,QAAQ,YAC1C,EAAM,MAAM,YAAc,QAItC,EAAI,UAAU,wBAA0B,WACpC,KAAK,KAAK,EAAa,OAE3B,EAAI,UAAU,iBAAmB,YAC7B,MAAW,GAAO,CAAE,EAAG,EAAG,EAAG,GAC7B,SAAK,EAAI,KAAK,EACd,EAAK,EAAI,KAAK,EAAI,KAAK,OAAS,IACzB,GAEX,EAAI,UAAU,OAAS,YACnB,MAAe,KAAK,IAAI,EAAU,KAAK,GAAK,EAC5C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,EAAG,EACH,SAAU,KAAK,IAAI,IAAK,GACxB,KAAM,OAAO,KAAK,OAAO,MAAM,OAGvC,EAAI,UAAU,kBAAoB,WAC9B,KAAK,KAAK,EAAa,OAE3B,EAAI,UAAU,mBAAqB,WAC/B,KAAK,KAAK,EAAa,QAE3B,EAAI,UAAU,kBAAoB,WAC9B,KAAK,KAAK,EAAa,OAE3B,EAAI,UAAU,cAAgB,WAC1B,KAAK,KAAK,EAAa,KACvB,KAAK,MAAM,YAAY,SAE3B,EAAI,UAAU,iBAAmB,WAC7B,MAAY,KACZ,KAAK,KAAK,EAAa,KACvB,KAAK,MAAM,YAAY,QACvB,KAAK,MAAM,KAAK,YAAY,KAAM,WAC9B,EAAM,uBAGd,EAAI,UAAU,QAAU,WACpB,EAAO,UAAU,QAAQ,KAAK,KAAM,KAExC,EAAI,UAAY,WACT,GACT,OAAO,YAAY,QACrB,EAAK,IAAM,IACZ,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,kBACb,EAAM,YACN,EAAM,aACC,EAEX,SAAc,UAAU,UAAY,WAChC,KAAK,OAAS,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,mBACrD,KAAK,IAAI,KAAK,SAElB,EAAc,UAAU,WAAa,WACjC,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,2BACtD,KAAK,QAAQ,EAAI,KAAK,OAAO,EAAI,GACjC,KAAK,QAAQ,EAAI,KAAK,OAAO,EAAI,GACjC,KAAK,QAAQ,UAAY,KAAK,QAAQ,EACtC,KAAK,QAAQ,UAAY,KAAK,QAAQ,EACtC,KAAK,IAAI,KAAK,UAElB,EAAc,UAAU,KAAO,WAC3B,KAAK,MAAQ,EACb,KAAK,MAAQ,IACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,MAAO,EACP,cAAe,IACf,WAAY,KAAK,KAAK,KAAK,QAE/B,KAAK,QAAQ,EAAI,KAAK,QAAQ,UAC9B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,MACH,KAAM,GACN,OAAQ,KAGhB,EAAc,UAAU,KAAO,WAC3B,KAAK,MAAM,OAAO,aAAa,KAAK,SACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,MAAO,GACP,WAAY,KAAK,KAAK,KAAK,SAG5B,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAO,GAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAM,QAAQ,IAAK,EAAM,KAAM,CACjE,cAAe,GACf,SAAU,GACV,OAAQ,CACJ,OAAQ,CACJ,QAAS,EAAM,OAAS,GACxB,QAAS,EAAM,OAAS,QAG9B,KAEV,SAAU,UAAU,MAAQ,WACxB,MAAQ,SAAW,KAAK,MAAM,KAAK,KAAK,QAChC,OAAO,KAAK,IAAI,OAAS,IAAO,IAChC,MAAQ,EAChB,KAAK,WAAW,CAAE,EAAG,EAAG,EAAG,IAC3B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,OAGf,EAAU,UAAU,UAAY,cAC5B,KAAK,OAAS,IAAO,EAAQ,OAAO,KAAK,KAAK,KAAK,KAAK,SAAS,IAErE,EAAU,UAAU,aAAe,YAC/B,KAAK,MAAM,KAAK,YAAY,EAAO,KAAK,QAAS,KAAM,OAEpD,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,WAClC,cACI,KAAK,UAAY,GACjB,KAAK,cAAgB,EACrB,KAAK,MAAQ,EACb,KAAK,MAAQ,KAAK,MAAM,MACxB,KAAK,UAAY,KAAK,MAAM,KAAK,YAAc,EAAK,iBAAiB,UACrE,KAAK,YAET,SAAiB,UAAU,UAAY,WACnC,GAAI,KAAK,YAAc,GACnB,OAEJ,KAAK,UAAY,KAAK,gBAE1B,EAAiB,UAAU,aAAe,WACtC,MAAY,OACC,CACT,CAAE,IAAK,EAAK,aAAa,MAAO,OAAQ,GACxC,CAAE,IAAK,EAAK,aAAa,MAAO,OAAQ,IACxC,CAAE,IAAK,EAAK,aAAa,MAAO,OAAQ,KAE5C,MAAO,GAAO,IAAI,YACd,MAAuB,EAAM,MAAM,MAAM,MAAM,IAAI,EAAa,KAChE,GAAI,EACA,MAAO,GAAM,MAAM,IAAI,EAAa,IAAK,CAAE,OAAQ,EAAa,YAI5E,EAAiB,UAAU,OAAS,WAChC,MACA,GAAI,KAAK,YAAc,GACnB,OAEJ,KAAK,cAAgB,KAAK,MAC1B,KAAK,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MACzE,GAAK,KAAK,UAAU,MAAQ,MAAQ,IAAO,QAAkB,EAAG,QAErE,EAAiB,UAAU,cAAgB,WACvC,MAAgB,KAAK,MAAQ,KAAK,cAClC,GAAI,EAAY,KACZ,MAAY,OAAO,KAAK,IAAI,OAAS,KAAK,UAAU,GAAK,KAAK,UAAU,GACxE,AAAI,GACA,EAAM,OAEV,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,QAGnF,EAAiB,UAAU,OAAS,WAChC,GAAI,KAAK,YAAc,GACnB,OAEJ,KAAK,UAAU,QAAQ,YAAmB,MAAO,IAAU,KAA2B,OAAS,EAAM,SACrG,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,OAE/E,EAAiB,UAAU,QAAU,WACjC,AAAI,KAAK,WACL,MAAK,UAAU,QAAQ,YAAmB,MAAO,IAAU,KAA2B,OAAS,EAAM,YACrG,KAAK,UAAY,MAErB,AAAI,KAAK,OACL,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,OAG5E,KAEX,EAAK,iBAAmB,IACzB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAgC,YAC5B,UAAU,EAAY,GACtB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,YAAc,EACpB,EAAM,SAAW,GACjB,EAAM,KAAO,aACb,EAAM,SAAW,EAAM,MACvB,EAAM,UAAY,EAAM,SAAS,UACjC,EAAM,gBAAkB,CAAE,EAAG,EAAG,EAAG,GACnC,EAAM,cAAgB,CAAE,EAAG,EAAG,EAAG,GACjC,EAAM,sBAAwB,CAAE,EAAG,EAAG,EAAG,GACzC,EAAM,OAAS,GAAI,GAAK,iBAAiB,EAAM,OAC/C,EAAM,UACN,EAAM,aACC,EAEX,SAAW,UAAU,QAAU,WAC3B,MAAY,KACZ,KAAK,KAAO,EAAE,MAAM,IAAK,YACrB,MAAU,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,kBAClD,SAAM,IAAI,GACH,KAGf,EAAW,UAAU,WAAa,WAC9B,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,sBACtD,KAAK,IAAI,KAAK,UAElB,EAAW,UAAU,WAAa,YAC9B,KAAK,YAAc,OAAO,KAAK,MAAM,EAAK,EAAG,IAEjD,EAAW,UAAU,KAAO,WACxB,KAAK,SACL,KAAK,gBACL,KAAK,OAAO,SACZ,KAAK,SAAW,GAChB,MAAmB,KAAK,SAAS,MAAM,KAAK,YAAkB,MAAO,GAAK,SAAS,SAAS,SAC5F,AAAI,EACA,KAAK,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,KAAK,KAAM,MAG7D,MAAK,OACL,KAAK,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,KAAM,QAGzE,EAAW,UAAU,cAAgB,WACjC,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAW,UAAU,KAAO,WACxB,KAAK,OACL,KAAK,4BACL,KAAK,OAAO,UAEhB,EAAW,UAAU,0BAA4B,WAC7C,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,KAAM,MAC9D,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,KAAM,OAEtE,EAAW,UAAU,KAAO,WACxB,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAW,UAAU,OAAS,WAC1B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAW,UAAU,KAAO,WACxB,KAAK,gBAAkB,KAAK,SAAS,IAAI,iBAAiB,KAAK,iBAC/D,KAAK,cAAgB,KAAK,cAC1B,KAAK,OAAO,KAAK,gBAAgB,EAAG,KAAK,gBAAgB,EAAG,KAAK,cAAc,EAAG,KAAK,cAAc,IAEzG,EAAW,UAAU,YAAc,WAC/B,KAAK,MAAM,MAAM,cAAc,iBAAiB,KAAK,MAAM,QAAQ,KAAM,KAAK,uBAC9E,MAAQ,IACA,KAAK,cAAc,EAAK,MAAK,sBAAsB,EAAI,KAAK,cAAc,GAAK,IAC/E,KAAK,cAAc,EAAK,MAAK,sBAAsB,EAAI,KAAK,cAAc,GAAK,EACvF,MAAO,CAAE,EAAG,EAAG,EAAG,IAEtB,EAAW,UAAU,OAAS,kBAC1B,MAAe,KAAK,MAAM,EAAO,EAAQ,EAAO,GAChD,GAAI,EAAW,GACX,AAAI,KAAK,WAAa,IAClB,MAAK,SAAW,GAChB,KAAK,OAAO,SACZ,KAAK,YAET,OAEJ,MAAa,KAAK,UAAU,oBAAoB,EAAQ,EAAQ,EAAU,KAAK,aAC/E,AAAI,EAAO,OAAS,GAChB,GAAS,eAAe,CAAC,CAAE,EAAG,EAAQ,EAAG,IAAW,GACpD,KAAK,SAAS,GACd,KAAK,YAAY,GACjB,KAAK,SAAW,KAGxB,EAAW,UAAU,SAAW,WAC5B,KAAK,KAAK,QAAQ,YAAiB,MAAO,GAAI,QAAU,KACxD,KAAK,QAAQ,QAAU,IAE3B,EAAW,UAAU,SAAW,YAI5B,UAHe,IACA,IACA,KACF,EAAG,EAAI,EAAU,OAAS,EAAG,KACtC,MAAc,EAAU,KACV,EAAU,EAAI,GAC5B,GAAI,EAIA,UAHiB,OAAO,KAAK,SAAS,cAAc,EAAS,KAC7C,OAAO,KAAK,MAAM,cAAc,EAAS,KACrC,KAAK,MAAM,EAAa,KAC/B,EAAG,GAAK,EAAe,KAChC,EAAW,EAAI,EACf,MAAU,KAAK,KAAK,KACpB,GAAI,EACA,EAAI,QAAU,GACd,EAAI,EAAI,EAAQ,EAAI,KAAK,IAAI,GAAa,EAC1C,EAAI,EAAI,EAAQ,EAAI,KAAK,IAAI,GAAa,MAI1C,QAKhB,KAAK,kBAAkB,IAE3B,EAAW,UAAU,kBAAoB,YACrC,KAAK,KAAK,QAAQ,cACd,AAAI,GAAS,GACT,GAAI,QAAU,OAI1B,EAAW,UAAU,YAAc,YAC/B,MAAW,EAAO,EAAO,OAAS,KACjB,EAAO,EAAO,OAAS,KACzB,OAAO,KAAK,MAAM,cAAc,EAAY,KAC5C,EAAK,KAAK,OACzB,KAAK,QAAQ,QAAU,GACvB,KAAK,QAAQ,EAAI,EAAK,EAAI,KAAK,IAAI,GAAY,EAC/C,KAAK,QAAQ,EAAI,EAAK,EAAI,KAAK,IAAI,GAAY,EAC/C,KAAK,QAAQ,SAAW,EAAW,KAAK,GAAK,GAEjD,EAAW,UAAU,QAAU,YAC3B,AAAI,KAAK,OACL,KAAK,4BAET,KAAK,OAAO,UACZ,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgC,WAC5B,kBACI,KAAK,aAAe,GACpB,KAAK,MAAQ,EACb,KAAK,KAAO,EACZ,KAAK,SAAW,KAAK,KAAK,KAC1B,KAAK,YAAc,EACnB,KAAK,UAAY,GACjB,KAAK,WAAa,GAEtB,SAAW,UAAU,+BAAiC,WAClD,KAAK,gBAAkB,CAAE,EAAG,KAAK,KAAK,EAAG,EAAG,KAAK,KAAK,GACtD,KAAK,gBAAkB,CAAE,EAAG,KAAK,SAAS,SAAS,EAAG,EAAG,KAAK,SAAS,SAAS,GAChF,KAAK,UAAY,CAAC,KAAK,iBACvB,KAAK,WAAa,CAAC,KAAK,iBACxB,KAAK,aAAe,IAExB,EAAW,UAAU,gBAAkB,WACnC,MAAc,KAAK,YAAY,SAAS,KAAK,KAAK,EAAG,KAAK,KAAK,GAC/D,GAAI,GACA,GAAI,KAAK,cACL,KAAK,aAAe,GACpB,OAEJ,KAAK,UAAU,KAAK,CAAE,EAAG,KAAK,KAAK,EAAG,EAAG,KAAK,KAAK,IACnD,KAAK,WAAW,KAAK,CAAE,EAAG,KAAK,SAAS,SAAS,EAAG,EAAG,KAAK,SAAS,SAAS,SAG9E,GAAI,KAAK,KAAK,EAAI,KAAK,YAAY,QAC/B,MAAa,KACL,OAAO,KAAK,MAAM,KAAK,KAAK,EAAG,KAAK,YAAY,KAAO,EAAQ,KAAK,YAAY,MAAQ,GAChG,KAAK,KAAK,YAAY,EAAG,KAAK,YAAY,OAAS,GACnD,KAAK,KAAK,YAAY,EAAG,GACzB,OAEJ,KAAK,8BAGb,EAAW,UAAU,0BAA4B,WAC7C,QAEA,GAAI,KAAK,UAAU,SAAW,EAC1B,EAAW,KAAK,gBAChB,EAAW,KAAK,qBAGhB,EAAW,KAAK,UAAU,MAC1B,EAAW,KAAK,WAAW,MAC3B,MAAuB,EAAK,KAAK,OACjC,AAAI,EAAS,EAAI,KAAK,YAAY,KAC9B,GAAS,GAAK,GACd,EAAS,EAAI,KAAK,YAAY,IAAM,GAExC,AAAI,EAAS,EAAI,KAAK,YAAY,OAC9B,GAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,EAAI,KAAK,YAAY,MAAQ,GAE1C,AAAI,EAAS,EAAI,KAAK,YAAY,MAC9B,GAAS,GAAK,GACd,EAAS,GAAK,GACd,EAAS,EAAI,KAAK,YAAY,KAAO,GAG7C,KAAK,KAAK,YAAY,EAAS,EAAG,EAAS,GAC3C,KAAK,KAAK,YAAY,EAAS,EAAG,EAAS,GAC3C,KAAK,aAAe,IAExB,EAAW,UAAU,aAAe,WAChC,KAAK,UAAU,OAAS,EACxB,KAAK,WAAW,OAAS,GAEtB,KAEX,EAAK,WAAa,IACnB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAU,OAAY,SACtB,EAAU,UAAe,YACzB,EAAU,KAAU,OACpB,EAAU,KAAU,OACpB,EAAU,MAAW,QACrB,EAAU,KAAU,SACrB,EAAY,EAAK,WAAc,GAAK,UAAY,KACnD,MACA,AAAC,aACG,EAAU,SAAc,cACxB,EAAU,UAAe,iBACzB,EAAU,QAAa,qBACxB,EAAY,EAAK,WAAc,GAAK,UAAY,KACnD,MAA0B,YACtB,UAAU,EAAM,GAChB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAM,OAAO,MAAO,EAAG,EAAG,WAAY,EAAU,WAAa,KAC3F,SAAM,QAAU,EAAK,eACrB,EAAM,WAAa,GACnB,EAAM,WAAa,GACnB,EAAM,QAAU,GAChB,EAAM,SAAW,EACjB,EAAM,aAAe,EACrB,EAAM,SAAW,EAAQ,SACzB,EAAM,SAAS,EAAQ,OACvB,EAAM,UAAU,EAAK,OAAQ,EAAK,aAClC,EAAM,kBAAkB,EAAQ,gBAChC,EAAM,qBAAqB,EAAQ,mBACnC,EAAM,sBACN,EAAM,mBACN,EAAM,aACN,EAAM,KAAK,OAAO,EAAK,eAAiB,EAAK,aAAa,KAC1D,EAAM,OAAS,GAAI,GAAK,WAAW,EAAM,MAAO,EAAO,EAAQ,aAC/D,EAAM,kCACC,EAEX,cAAO,eAAe,EAAK,UAAW,YAAa,CAC/C,IAAK,WACD,MAAO,MAAK,YAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAK,UAAW,SAAU,CAC5C,IAAK,WACD,MAAO,MAAK,SAEhB,WAAY,GACZ,aAAc,KAElB,EAAK,UAAU,iBAAmB,WAC9B,YAAK,aAAe,KAAK,KAAK,QACvB,EAAO,UAAU,iBAAiB,KAAK,OAElD,EAAK,UAAU,mBAAqB,WAChC,YAAK,MAAM,OAAO,KAAK,WAAW,KAAK,KAAM,KAAK,cAC3C,MAEX,EAAK,UAAU,gCAAkC,WAC7C,KAAK,gBAAkB,CACnB,WAAY,GACZ,MAAO,IAGf,EAAK,UAAU,KAAO,WAClB,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAK,UAAU,MAAQ,YACnB,GAAI,KAAK,QACL,OAEJ,KAAK,QAAU,GACf,KAAK,uBACL,KAAK,WACL,KAAK,sBAAsB,EAAU,EAAK,aAC1C,KAAK,OAAO,iCACZ,KAAK,KAAK,EAAU,MAAO,OAE/B,EAAK,UAAU,qBAAuB,WAClC,KAAK,gBAAgB,WAAW,OAAS,EACzC,KAAK,gBAAgB,MAAQ,GAEjC,EAAK,UAAU,sBAAwB,cACnC,MAAQ,KAAK,IAAI,GAAY,IACrB,KAAK,IAAI,GAAY,EAC7B,KAAK,YAAY,EAAG,IAExB,EAAK,UAAU,UAAY,cACvB,KAAK,2BAA2B,GAChC,AAAI,KAAK,SACL,KAAK,OAAO,mBAGpB,EAAK,UAAU,2BAA6B,YACxC,GAAI,KAAK,UAAY,GACjB,OAEJ,GAAI,KAAK,WACL,OAEJ,KAAK,gBAAgB,WAAW,KAAK,KAAK,GAC1C,KAAK,gBAAgB,OAAS,EAC9B,MAAoB,IACpB,GAAI,KAAK,gBAAgB,MAAQ,GAC7B,MAAW,KAAK,IAAI,MAAM,KAAM,KAAK,gBAAgB,cAC1C,KAAK,IAAI,MAAM,KAAM,KAAK,gBAAgB,cAC5C,KAAK,IAAI,EAAO,GACzB,AAAI,EAAK,IACL,KAAK,wBAET,KAAK,gBAAgB,OAAS,EAC9B,KAAK,gBAAgB,WAAW,OAAS,IAGjD,EAAK,UAAU,sBAAwB,WACnC,MAAiB,IACG,OAAO,KAAK,SAAS,KACnB,KAAK,wBACT,EAAkB,EACpC,KAAK,sBAAsB,EAAa,EAAK,cAEjD,EAAK,UAAU,4BAA8B,YACzC,GAAI,KAAK,UAAY,GACjB,OAEJ,GAAI,KAAK,WACL,OAEJ,MAAe,KAAK,wBACR,EAAK,YAAe,GAAQ,SACxC,KAAK,sBAAsB,EAAU,GACrC,KAAK,SAAW,EAAW,KAAK,GAAK,GAEzC,EAAK,UAAU,oBAAsB,WACjC,MAAQ,KAAK,KAAK,SAAS,IACnB,KAAK,KAAK,SAAS,EAC3B,MAAO,MAAK,MAAM,EAAG,IAEzB,EAAK,UAAU,kBAAoB,WAC/B,KAAK,aACL,KAAK,iBAAiB,IACtB,KAAK,mBACL,KAAK,yBACL,KAAK,cACL,KAAK,OAAO,eACZ,KAAK,QAAU,GACf,KAAK,WAAa,GAClB,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,KAAK,EAAK,WAAW,KAAM,MAChC,KAAK,KAAK,EAAU,KAAM,OAE9B,EAAK,UAAU,UAAY,WACvB,GAAI,KAAK,WACL,OAEJ,KAAK,WAAa,GAClB,KAAK,SAAW,EAChB,KAAK,SAAS,EAAU,SACxB,KAAK,KAAK,EAAU,OAAQ,OAEhC,EAAK,UAAU,YAAc,WACzB,KAAK,WAAa,GAClB,KAAK,QAAU,EAAK,eACpB,KAAK,SAAS,EAAU,UACxB,KAAK,KAAK,EAAU,UAAW,OAEnC,EAAK,UAAU,KAAO,WAClB,KAAK,sBAAsB,OAAO,KAAK,IAAI,WAAY,EAAK,aAC5D,KAAK,KAAK,EAAU,KAAM,MAC1B,AAAI,KAAK,aAAe,IACpB,KAAK,qBAGb,EAAK,UAAU,kBAAoB,WAC/B,KAAK,SAAS,EAAU,WACxB,KAAK,cAET,EAAK,UAAU,WAAa,YACxB,MAAY,KACZ,AAAI,IAAU,QAAU,GAAQ,KAChC,AAAI,KAAK,iBACL,MAAK,gBAAgB,SACrB,KAAK,gBAAkB,MAE3B,KAAK,gBAAkB,KAAK,MAAM,KAAK,YAAY,EAAO,WACtD,AAAI,EAAM,WACN,EAAM,SAAS,EAAU,SAGzB,EAAM,SAAS,EAAU,aAIrC,EAAK,UAAU,YAAc,YACzB,GAAI,KAAK,UAAY,GACjB,OAEJ,GAAI,KAAK,WACL,OAEJ,KAAK,WAAa,GAClB,KAAK,iBAAiB,IACtB,KAAK,sBACL,KAAK,gBAAgB,GACrB,KAAK,qBACL,MAAsB,GAAM,OAAO,KAAK,KAAK,KAAK,KAAK,SAAS,GAChE,KAAK,mBAAmB,GACxB,MAAY,OAAO,KAAK,IAAI,YAAY,EAAG,KAAQ,OAAO,KAAK,IAAI,OACnE,KAAK,WAAW,CAAE,EAAG,EAAO,EAAG,IAC/B,KAAK,KAAK,EAAK,WAAW,KAAM,MAChC,KAAK,KAAK,EAAU,KAAM,OAE9B,EAAK,UAAU,oBAAsB,WACjC,KAAK,qBAAuB,SAAS,GAAI,KAAK,KAAK,kBAEvD,EAAK,UAAU,uBAAyB,WACpC,AAAI,KAAK,sBACL,MAAK,KAAK,gBAAkB,SAAS,GAAI,KAAK,wBAGtD,EAAK,UAAU,aAAe,WAC1B,MAAO,GAAK,OAAS,GAEzB,EAAK,UAAU,QAAU,WACrB,KAAK,QAAU,GACf,KAAK,WAAa,GAClB,EAAO,UAAU,QAAQ,KAAK,OAElC,EAAK,eAAiB,EACtB,EAAK,YAAc,GACnB,EAAK,OAAS,GACd,EAAK,YAAc,CACf,YAAa,EACb,SAAU,EACV,YAAa,EACb,eAAgB,EAChB,SAAU,GACV,cAAe,GACf,aAAc,EAAK,QAEhB,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,KAAO,IACb,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,WACpC,gBACI,KAAK,KAAO,EACZ,KAAK,KAAK,GAAG,EAAK,UAAU,OAAQ,KAAK,KAAM,MAC/C,KAAK,KAAK,GAAG,EAAK,UAAU,UAAW,KAAK,KAAM,MAClD,KAAK,QAAU,EAEnB,SAAmB,UAAU,KAAO,WAChC,KAAK,QAAQ,GAAK,IAEtB,EAAmB,UAAU,KAAO,WAChC,KAAK,QAAQ,GAAK,IAGf,KAEX,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,WACpC,kBACI,KAAK,MAAQ,EACb,KAAK,KAAO,EACZ,KAAK,KAAK,GAAG,EAAK,UAAU,KAAM,KAAK,KAAM,MAC7C,KAAK,KAAK,GAAG,EAAK,UAAU,KAAM,KAAK,aAAc,MACrD,KAAK,QAAU,EAEnB,SAAmB,UAAU,KAAO,WAChC,MAAY,KACZ,KAAK,QAAQ,GAAK,GAClB,KAAK,MAAM,KAAK,YAAY,IAAM,WAC9B,EAAM,UAGd,EAAmB,UAAU,aAAe,WACxC,KAAK,QAAQ,UACb,KAAK,QAAQ,GAAK,IAEtB,EAAmB,UAAU,KAAO,WAChC,KAAK,QAAQ,GAAK,IAEf,KAEX,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAW,OAAO,KAAK,OACe,WAClC,cACI,KAAK,MAAQ,EACb,KAAK,KAAO,KAAK,MAAM,KACvB,KAAK,IAAM,KAAK,MAAM,IACtB,KAAK,UAAY,KAAK,MAAM,UAEhC,SAAiB,UAAU,UAAY,YACnC,MAAmB,KAAK,MAAM,UAAU,SACxB,KAAK,IAAI,aAAe,MAC1B,EAAU,IACT,EAAU,IACR,EAAK,SAAS,UAAY,IAC5B,IACC,KAAK,KAAK,WAAa,IACnB,EAAU,EAAW,EAAW,IACrC,GAAI,QAAO,KAAK,KAAK,EAAe,EAAG,EAAU,KAC3C,OAAO,KAAK,KAAK,OAAO,KACxB,EAAW,EAAY,EAAY,IACxC,GAAI,QAAO,KAAK,KAAK,EAAgB,EAAG,EAAW,KAC7C,OAAO,KAAK,KAAK,OAAO,KAC3B,KAAK,MAAO,EAAkB,GAAiB,GAAoB,KAClE,EAAe,IAClB,KAAK,kBAAkB,EAAU,KAChC,KAAK,kBAAkB,EAAW,KACpC,IACH,EAAE,MAAM,EAAW,YAC5B,MAAI,GAAQ,EACD,EAAW,QAGX,EAAY,UAG3B,MAAO,IAEX,EAAiB,UAAU,kBAAoB,cAC3C,GAAI,IAAa,EACb,MAAO,GAEX,MAAmB,KACC,EAAW,IACV,EAAK,OAAO,GACjC,MAAI,GAAgB,EACT,EAAK,UAAU,GAGf,EAAK,UAAU,EAAG,IAGjC,EAAiB,UAAU,qBAAuB,cAC9C,MAAY,KACZ,OAAO,KAAK,IAAI,QAAQ,GACxB,KAAK,UAAU,GAAS,QAAQ,cAC5B,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAU,GACnB,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,EAAG,EAAM,OAIrB,EAAiB,UAAU,4BAA8B,cACrD,OAAO,KAAK,IAAI,QAAQ,GACxB,KAAK,UAAU,GAAS,QAAQ,cAC5B,EAAU,GAAO,EAAI,EAAM,KAG5B,KAEX,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAc,KAAU,gBACxB,EAAc,KAAU,kBACzB,EAAgB,EAAK,eAAkB,GAAK,cAAgB,KAC/D,MAA8B,YAC1B,UAAU,EAAU,GACpB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,EAAK,UAAU,WAAa,KACnF,SAAM,OAAS,EACf,EAAM,SAAW,GACjB,EAAM,mBAAqB,GAC3B,EAAM,UAAU,GAAK,GACrB,EAAM,mBACC,EAEX,cAAO,eAAe,EAAS,UAAW,aAAc,CACpD,IAAK,WACD,MAAO,MAAK,aAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAS,UAAW,QAAS,CAC/C,IAAK,WACD,MAAO,MAAK,QAEhB,WAAY,GACZ,aAAc,KAElB,EAAS,UAAU,KAAO,WACtB,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,MAAQ,EACb,KAAK,OAAS,KAAK,EACnB,KAAK,gBACL,KAAK,mBACL,KAAK,oBACL,KAAK,KAAK,EAAc,KAAM,OAElC,EAAS,UAAU,cAAgB,WAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAS,UAAU,iBAAmB,WAClC,KAAK,YAAc,OAAO,KAAK,IAAI,QAAQ,GAAI,IAC/C,KAAK,aAAe,KAAK,YAAc,KAE3C,EAAS,UAAU,kBAAoB,WACnC,MAAY,KACZ,KAAK,MAAQ,EACb,MAAiB,IACjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,KAAK,aAAe,IAC9B,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KAAK,MAAQ,EACrB,OAAQ,KAAK,MAAQ,EACrB,KAAM,KAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,KAAK,aACf,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,EAAG,KAAK,EAAI,KAAK,YACjB,cAAe,GACf,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,EAAM,aAChB,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,EAAM,EAAI,EAAM,YACnB,WAAY,WACR,EAAM,2BAM1B,EAAS,UAAU,KAAO,WACtB,KAAK,oBACL,KAAK,gBACL,KAAK,KAAK,EAAc,KAAM,OAElC,EAAS,UAAU,kBAAoB,WACnC,KAAK,MAAM,OAAO,aAAa,OAEnC,EAAS,UAAU,cAAgB,WAC/B,MAAY,KACZ,KAAK,SAAW,GAChB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,SAAW,GACjB,EAAM,OAAS,GACf,EAAM,QAAU,OAI5B,EAAS,UAAU,cAAgB,WAC/B,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,SAAW,IAEpB,EAAS,UAAU,KAAO,WACtB,KAAK,oBACL,KAAK,KAAK,EAAc,KAAM,MAC9B,EAAO,UAAU,KAAK,KAAK,OAE/B,EAAS,UAAU,OAAS,WACxB,KAAK,EAAI,KAAK,OACd,KAAK,oBACL,KAAK,KAAK,EAAc,KAAM,MAC9B,EAAO,UAAU,OAAO,KAAK,OAEjC,EAAS,UAAU,kBAAoB,cACnC,MAAa,KACF,IACC,EAAK,WAAa,IAChB,EAAU,OAAO,KAAK,IAAI,QAAQ,KAAM,OACxC,OAAO,KAAK,MAAM,EAAS,EAAM,GAC/C,MAAO,MAAK,MAAM,OAAO,IAAI,CACzB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,EAAG,KAGX,EAAS,UAAU,QAAU,WACzB,EAAO,UAAU,QAAQ,KAAK,KAAM,KAEjC,GACT,OAAO,YAAY,OACrB,EAAK,SAAW,IACjB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,oBACI,AAAI,IAAU,QAAU,GAAQ,YAChC,AAAI,IAAU,QAAU,GAAQ,oBAChC,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAO,IAAU,KAC5D,SAAM,QAAU,GAChB,EAAM,OAAS,GACf,EAAM,KAAO,EACb,EAAM,KAAK,GAAG,EAAK,cAAc,KAAM,EAAM,KAAM,GACnD,EAAM,KAAK,GAAG,EAAK,cAAc,KAAM,EAAM,KAAM,GACnD,EAAM,MAAM,OAAO,GAAG,aAAc,EAAM,WAAY,GAC/C,EAEX,SAAkB,UAAU,KAAO,WAC/B,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,EAAI,KAAK,KAAK,OAEvB,EAAkB,UAAU,KAAO,WAC/B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAkB,UAAU,WAAa,WACrC,GAAI,CAAC,KAAK,QACN,OAEJ,MAAa,KAAK,KAAK,QACb,KAAK,KAAK,MAAQ,KAAK,KAAK,WACtC,KAAK,EAAI,KAAK,KAAK,EAAI,EACvB,KAAK,YAAY,EAAQ,GACzB,KAAK,YAAY,EAAQ,IAE7B,EAAkB,UAAU,YAAc,cACtC,MAAkB,IACH,IACf,KAAK,MAAQ,OAAO,KAAK,UAAU,KAAK,KAAK,EAAG,EAAQ,EAAK,EAAa,IAE9E,EAAkB,UAAU,YAAc,cACtC,MAAkB,MACH,IACf,KAAK,MAAQ,OAAO,KAAK,UAAU,KAAK,KAAK,EAAG,EAAQ,EAAK,EAAa,IAE9E,EAAkB,UAAU,QAAU,YAClC,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,eAAe,aAAc,KAAK,WAAY,MAEpE,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAiB,OAAY,SAC7B,EAAiB,QAAa,YAC/B,EAAmB,EAAK,kBAAqB,GAAK,iBAAmB,KACxE,MAAiC,YAC7B,UAAU,EAAa,GACvB,cACI,MAAO,GAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,cAAgB,KAEtE,SAAY,UAAU,OAAS,cAC3B,MAAY,OACD,IAAS,OAAO,KAAO,GAAK,IACtB,EAAK,SAAS,YACjB,KAAK,EAAI,OAAO,KAAK,IAAI,QAAQ,EAAG,KAAO,IAC3C,KAAK,EAAI,OAAO,KAAK,IAAI,QAAQ,EAAI,EAAY,EAAI,KACpD,OAAO,KAAK,SAAS,QAAQ,KAAK,EAAG,KAAK,EAAG,EAAS,KACtD,EAAW,IAC1B,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KACT,EAAG,EACH,EAAG,EACH,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,WAAY,CAAC,KACb,QAAS,WACL,EAAM,KAAK,EAAiB,WAGpC,KAAK,MAAM,KAAK,YAAY,EAAQ,EAAW,IAAM,WACjD,EAAM,aAGd,EAAY,UAAU,QAAU,YAC5B,MAAY,KACZ,AAAI,IAAU,QAAU,GAAQ,GAChC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EAAQ,IACf,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,EACP,WAAY,WACR,EAAM,KAAK,EAAiB,QAAS,GACrC,EAAM,cAIX,GACT,OAAO,YAAY,OACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgC,YAC5B,UAAU,EAAY,GACtB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAM,OAAO,MAAO,EAAG,EAAG,EAAS,QAAQ,IAAK,EAAS,MAAM,OAAS,KACtG,SAAM,UAAU,EAAK,KAAK,OAAQ,SAAS,SAAS,GAAI,EAAK,KAAK,aAAc,CAAE,cAAe,GAAO,SAAU,MAC3G,EAEX,SAAW,UAAU,MAAQ,YACzB,MAAiB,IAAS,OAAO,KAAO,GAAK,IAChC,OAAO,KAAK,IAAI,YAAY,KAAO,KAAQ,IAC3C,OAAO,KAAK,IAAI,YAAY,KAAO,QACxC,SAAW,KAAK,MAAM,KAAK,KAAK,MACxC,KAAK,WAAW,CAAE,EAAG,EAAS,EAAG,EAAG,EAAS,IAC7C,KAAK,mBAAmB,GAAM,GAC9B,KAAK,kBAET,EAAW,UAAU,eAAiB,WAClC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,OAGf,EAAW,UAAU,aAAe,YAChC,KAAK,MAAM,KAAK,YAAY,EAAO,KAAK,QAAS,KAAM,OAEpD,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA0B,YACtB,UAAU,EAAM,GAChB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAS,IAAU,KAC9D,SAAM,cAAgB,EACtB,EAAM,QAAU,EAChB,EAAM,KAAO,EACb,EAAM,QAAQ,cAAe,aACtB,EAEX,cAAO,eAAe,EAAK,UAAW,MAAO,CACzC,IAAK,WACD,MAAO,MAAK,MAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAK,UAAW,SAAU,CAC5C,IAAK,WACD,MAAO,MAAK,SAEhB,WAAY,GACZ,aAAc,KAElB,EAAK,UAAU,QAAU,aAEzB,EAAK,UAAU,SAAW,WACtB,MAAO,YAAc,KAAK,QAAU,UAAY,KAAK,KAAO,KAEzD,GACT,OAAO,YAAY,OACrB,EAAK,KAAO,IACb,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAc,EAAc,IAAS,GAAK,MAC1C,EAAc,EAAc,MAAW,GAAK,QAC5C,EAAc,EAAc,OAAY,GAAK,SAC7C,EAAc,EAAc,KAAU,GAAK,SAC5C,EAAgB,EAAK,eAAkB,GAAK,cAAgB,KAC/D,MAA8B,YAC1B,UAAU,EAAU,GACpB,kBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,MAAQ,GACd,EAAM,IAAI,SAAS,GACnB,EAAM,KAAO,OACb,EAAM,SAAW,EACjB,EAAM,MAAQ,EACd,EAAM,SAAW,EAAM,iBACvB,EAAM,WACN,EAAM,eACC,EAEX,cAAO,eAAe,EAAS,UAAW,UAAW,CACjD,IAAK,WACD,MAAO,MAAK,UAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAS,UAAW,OAAQ,CAC9C,IAAK,WACD,MAAO,MAAK,OAEhB,WAAY,GACZ,aAAc,KAElB,EAAS,UAAU,eAAiB,WAChC,MAAW,EAAS,UAAY,GAChC,MAAO,IAAI,QAAO,KAAK,UAAU,EAAG,EAAG,EAAM,IAEjD,EAAS,UAAU,SAAW,WAC1B,KAAK,MAAQ,GAGb,UAFiB,IACA,GAAO,MAAK,MAAQ,KACtB,EAAG,EAAM,KAAK,MAAO,IAChC,UAAkB,EAAG,EAAS,KAAK,SAAU,KACzC,MAAW,GAAI,GAAK,KAAK,KAAK,MAAO,WAAY,OAAQ,EAAQ,GACjE,EAAK,EAAI,EAAS,UAAY,EAAI,EAAS,EAAS,UACpD,EAAK,EAAI,KAAK,QAAQ,GACtB,EAAK,MAAQ,EAAa,EAAa,EACvC,EAAK,cAAgB,EAAK,MAC1B,KAAK,MAAM,KAAK,GAChB,KAAK,IAAI,KAIrB,EAAS,UAAU,aAAe,WAC9B,MAAY,KACZ,KAAK,UAAY,EAAE,MAAM,KAAK,MAAO,YACjC,MAAc,EAAU,aACZ,EAAM,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,kBAAmB,EAAS,GAAI,OAAO,OACxG,EAAM,UAAU,EAAG,IACnB,EAAM,QAAQ,MAAO,GACrB,EAAM,QAAU,EAAM,MACtB,EAAM,IAAI,GACV,MAAW,EAAM,UAAU,EAAW,GACtC,cAAO,QAAQ,MAAM,GAAG,WAAW,EAAO,EAAM,GAAI,GAC7C,KAGf,EAAS,UAAU,QAAU,YACzB,MAAiB,KAAK,MAAQ,EAAM,EACpC,MAAO,GAAS,UAAY,EAAI,EAAa,EAAS,WAE1D,EAAS,UAAU,UAAY,YAC3B,MAAiB,KAAK,MAAM,EAAI,EAAS,aAC/B,KAAK,MAAQ,EAAa,EACpC,MAAO,IAEX,EAAS,UAAU,SAAW,WAC1B,MAAO,MAAK,SAAW,EAAS,WAEpC,EAAS,UAAU,UAAY,WAC3B,MAAO,MAAK,MAAQ,EAAS,WAEjC,EAAS,UAAU,UAAY,WAC3B,MAAO,CACH,EAAG,KAAK,EAAI,KAAK,WAAa,EAC9B,EAAG,KAAK,EAAI,KAAK,YAAc,IAGvC,EAAS,UAAU,UAAY,cAC3B,MAAO,MAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,MAAQ,GAAO,EAAK,SAAW,KAExF,EAAS,UAAU,YAAc,cAC7B,MAAU,KAAK,UAAU,KACZ,KAAK,MAAM,EAAI,EAAS,WACrC,MAAO,MAAK,UAAU,EAAK,IAE/B,EAAS,UAAU,iBAAmB,cAClC,OAAQ,OACC,GAAc,IACf,MAAO,MAAK,UAAU,EAAK,IAAM,EAAG,EAAK,YACxC,GAAK,cAAc,MACpB,MAAO,MAAK,UAAU,EAAK,IAAK,EAAK,OAAS,OAC7C,GAAK,cAAc,OACpB,MAAO,MAAK,UAAU,EAAK,IAAM,EAAG,EAAK,YACxC,GAAK,cAAc,KACpB,MAAO,MAAK,UAAU,EAAK,IAAK,EAAK,OAAS,KAG1D,EAAS,UAAU,kBAAoB,YACnC,MAAO,CACH,KAAK,iBAAiB,EAAM,EAAc,KAC1C,KAAK,iBAAiB,EAAM,EAAc,OAC1C,KAAK,iBAAiB,EAAM,EAAc,QAC1C,KAAK,iBAAiB,EAAM,EAAc,QAGlD,EAAS,UAAU,WAAa,gBAC5B,MAAW,KAAK,UAAU,EAAK,GAC/B,GAAI,CAAC,EACD,MAAO,GAEX,MAAW,EAAS,UAAY,GAChC,KAAK,SAAS,EAAI,EAAK,EAAI,EAAO,EAClC,KAAK,SAAS,EAAI,EAAK,EAAI,EAAO,EAClC,KAAK,SAAS,QAAQ,GACtB,MAAoB,GAAkB,KAAK,MAAM,OAAO,MAAM,eAAe,OAAO,YAAkB,MAAO,GAAK,WAClH,MAAO,MAAK,MAAM,OAAO,cAAc,KAAK,SAAS,EAAG,KAAK,SAAS,EAAG,KAAK,SAAS,MAAO,KAAK,SAAS,OAAQ,GAAO,GAAe,SAAW,GAEzJ,EAAS,UAAU,YAAc,WAC7B,MAAY,KACZ,KAAK,MAAQ,CAAC,KAAK,MACnB,KAAK,UAAU,QAAQ,YAAmB,MAAQ,GAAM,QAAU,EAAM,QACxE,KAAK,MAAM,QAAQ,YACf,EAAK,MAAQ,EAAM,MAAQ,IAAO,EAAK,iBAG/C,EAAS,UAAU,gBAAkB,cACjC,MAAY,KACZ,AAAI,IAAiB,QAAU,GAAe,GAC9C,MAAW,OAAO,OAAO,EAAE,QAAQ,KAAK,MAAO,WAC/C,EAAK,QAAQ,cACT,MAAY,EAAe,EAAQ,GACnC,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,EACP,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,EACP,KAAM,QAIlB,EAAS,UAAU,aAAe,gBAC9B,MAAY,OACA,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,MAAQ,IACpE,EAAM,QAAQ,YACV,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,EACP,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,EACP,KAAM,GACN,KAAM,SAIlB,EAAS,SAAW,EACpB,EAAS,UAAY,IACrB,EAAS,QAAU,EACnB,EAAS,KAAO,EACT,GACT,OAAO,YAAY,WACrB,EAAK,SAAW,IACjB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,WAC3B,kBACI,KAAK,MAAQ,EACb,KAAK,OAAS,KAAK,MAAM,OACzB,KAAK,YAAY,EAAW,GAEhC,SAAU,UAAU,YAAc,cAC9B,MAAgB,EAAY,EAAU,UAAY,IACjC,EAAa,EAAU,UAAY,IACvC,CACT,YAAa,EACb,SAAU,GACV,SAAU,EACV,YAAa,EACb,eAAgB,EAChB,MAAO,EAAK,aAAa,MAE7B,KAAK,IAAM,KAAK,OAAO,IAAI,UAAU,EAAG,EAAG,EAAW,EAAU,UAAW,GAC3E,KAAK,MAAQ,KAAK,OAAO,IAAI,UAAU,EAAG,EAAG,EAAU,UAAW,EAAY,GAC9E,KAAK,OAAS,KAAK,OAAO,IAAI,UAAU,EAAG,EAAG,EAAW,EAAU,UAAW,SAAS,SAAS,GAAI,GAAS,CAAE,MAAO,EAAK,aAAa,SACxI,KAAK,KAAO,KAAK,OAAO,IAAI,UAAU,EAAG,EAAG,EAAU,UAAW,EAAY,GAC7E,KAAK,IAAM,CAAC,KAAK,IAAK,KAAK,MAAO,KAAK,OAAQ,KAAK,MACpD,KAAK,IAAI,QAAQ,YACb,EAAK,OAAO,EAAK,eAAiB,EAAK,aAAa,OAExD,KAAK,OAAO,OAAO,EAAK,eAAiB,EAAK,aAAa,OAE/D,EAAU,UAAU,MAAQ,YACxB,MAAc,EAAU,UAAY,IAClB,EAAK,EAAI,EAAK,WAAa,IAC3B,EAAK,EAAI,EAAK,YAAc,EAC9C,KAAK,OAAO,KAAK,YAAY,KAAK,IAAK,CAAE,EAAG,EAAa,EAAG,EAAK,EAAI,IACrE,KAAK,OAAO,KAAK,YAAY,KAAK,MAAO,CAAE,EAAG,EAAK,WAAa,EAAS,EAAG,IAC5E,KAAK,OAAO,KAAK,YAAY,KAAK,OAAQ,CAAE,EAAG,EAAa,EAAG,EAAK,YAAc,IAClF,KAAK,OAAO,KAAK,YAAY,KAAK,KAAM,CAAE,EAAG,CAAC,EAAS,EAAG,KAE9D,EAAU,UAAY,IACf,KAEX,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAc,YAAiB,yBAChC,EAAgB,EAAK,eAAkB,GAAK,cAAgB,OAChE,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAe,WAAgB,aAC/B,EAAe,SAAc,aAC9B,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAU,OAAO,GAAG,WAAY,EAAU,OAAO,GAAG,MAAM,OAAS,KAC9G,SAAM,cAAgB,GACtB,EAAM,UAAY,EAClB,EAAM,UAAU,GAAI,CAAE,SAAU,GAAM,SAAU,KAChD,EAAM,KAAK,OAAO,EAAK,eAAiB,EAAK,aAAa,UAC1D,EAAM,UAAY,EAAK,SAAS,UAChC,EAAM,KAAO,YACb,EAAM,KAAO,GAAI,GAAK,cAAc,GACpC,EAAM,WAAa,GAAI,GAAK,WAAW,EAAM,MAAO,GACpD,EAAM,cAAgB,GAAI,GAAK,cAAc,EAAM,MAAO,GACnD,EAEX,cAAO,eAAe,EAAU,UAAW,WAAY,CACnD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAU,UAAW,eAAgB,CACvD,IAAK,WACD,MAAO,MAAK,eAEhB,WAAY,GACZ,aAAc,KAElB,EAAU,UAAU,4BAA8B,WAC9C,MAAY,OACA,OAAO,KAAK,IAAI,QAAQ,EAAG,KACvC,KAAK,MAAM,KAAK,YAAY,EAAO,WAC/B,EAAM,KAAK,EAAM,UAAU,KAC3B,EAAM,oBAGd,EAAU,UAAU,eAAiB,WACjC,MAAY,OACA,EAAI,OAAO,KAAK,IAAI,SACP,IACzB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EAAqB,EAC/B,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,EACP,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,EAAM,MAAQ,GACrB,KAAM,GACN,OAAQ,QAIpB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EAAqB,IAC/B,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KACP,KAAM,GACN,OAAQ,MAGhB,EAAU,UAAU,SAAW,WAK3B,GAJA,AAAI,KAAK,gBAAkB,IACvB,MAAK,cAAgB,GACrB,KAAK,KAAK,EAAe,SAAU,OAEnC,KAAK,YAAc,KAAK,WAAW,YACnC,OAEJ,KAAK,0BAET,EAAU,UAAU,uBAAyB,WACzC,KAAK,MAAQ,EACb,KAAK,MAAQ,EACb,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,IACP,MAAO,GACP,KAAM,MAGd,EAAU,UAAU,KAAO,WACvB,KAAK,KAAK,EAAe,WAAY,MACrC,KAAK,GAAG,EAAK,gBAAgB,SAAU,KAAK,QAAS,MACrD,KAAK,WAAW,QAEpB,EAAU,UAAU,oBAAsB,YACtC,KAAK,cAAc,KAAK,IAE5B,EAAU,UAAU,QAAU,YAC1B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,KAAK,KAAK,EAAK,cAAc,YAAa,KAAM,GAChD,EAAO,UAAU,QAAQ,KAAK,KAAM,GACpC,KAAK,KAAK,WAEP,GACT,OAAO,QAAQ,OAAO,QACxB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAa,WAAgB,aAC7B,EAAa,SAAc,aAC5B,EAAe,EAAK,cAAiB,GAAK,aAAe,KAC5D,MAA6B,YACzB,UAAU,EAAS,GACnB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAU,OAAO,GAAG,WAAY,EAAU,OAAO,GAAG,MAAM,OAAS,KAC9G,SAAM,UAAY,EAClB,EAAM,oBAAsB,GAC5B,EAAM,aAAe,EACrB,EAAM,aAAe,GACrB,EAAM,KAAO,UACb,EAAM,UAAY,EAClB,EAAM,UAAY,EAAK,SAAS,QAChC,EAAM,UAAU,GAAI,CAAE,SAAU,GAAM,SAAU,KAChD,EAAM,KAAK,OAAO,EAAK,eAAiB,EAAK,aAAa,QAC1D,EAAM,aAAe,GACrB,EAAM,aAAe,OAAO,KAAK,IAAI,OAAS,EAAM,oBACpD,EAAM,KAAO,GAAI,GAAK,cAAc,GACpC,EAAM,WAAa,GAAI,GAAK,WAAW,EAAM,MAAO,GACpD,EAAM,cAAgB,GAAI,GAAK,cAAc,EAAM,MAAO,GACnD,EAEX,cAAO,eAAe,EAAQ,UAAW,WAAY,CACjD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,EAAQ,UAAU,4BAA8B,WAC5C,MAAY,OACA,OAAO,KAAK,IAAI,QAAQ,EAAG,KACvC,KAAK,MAAM,KAAK,YAAY,EAAO,WAC/B,EAAM,KAAK,EAAM,UAAU,KAC3B,EAAM,mBAGd,EAAQ,UAAU,cAAgB,WAC9B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,GACP,KAAM,GACN,OAAQ,MAGhB,EAAQ,UAAU,SAAW,WAKzB,GAJA,AAAI,KAAK,eAAiB,IACtB,MAAK,aAAe,GACpB,KAAK,KAAK,EAAa,SAAU,OAEjC,KAAK,YAAc,KAAK,WAAW,YACnC,OAEJ,KAAK,yBACL,KAAK,yBAET,EAAQ,UAAU,uBAAyB,WACvC,KAAK,MAAQ,EACb,KAAK,MAAQ,EACb,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KACP,MAAO,GACP,KAAM,MAGd,EAAQ,UAAU,sBAAwB,WACtC,GAAI,KAAK,mBAAqB,KAAK,kBAAkB,YACjD,OAEJ,MAAW,OAAO,KAAK,KAAK,KAAK,cACjC,KAAK,aAAe,KAAK,oBAAsB,EAAI,EACnD,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,IACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,aAAc,KAAK,oBAAsB,KAGjD,EAAQ,UAAU,UAAY,cAC1B,EAAO,UAAU,UAAU,KAAK,KAAM,EAAM,GAC5C,KAAK,mBAAmB,GACxB,KAAK,OAAS,KAAK,aAAe,EAAQ,KAAK,WAEnD,EAAQ,UAAU,mBAAqB,YACnC,GAAI,KAAK,aAAa,SAAW,EAC7B,OAEJ,KAAK,aAAe,KAAK,aAAa,OAAO,YACzC,MAAO,GAAO,EAAK,UAAY,OAGvC,EAAQ,UAAU,KAAO,WACrB,KAAK,KAAK,EAAa,WAAY,MACnC,KAAK,KAAK,EAAK,gBAAgB,SAAU,KAAK,QAAS,MACvD,KAAK,WAAW,QAEpB,EAAQ,UAAU,oBAAsB,YACpC,KAAK,cAAc,KAAK,IAE5B,EAAQ,UAAU,QAAU,YACxB,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,KAAK,KAAK,EAAK,cAAc,YAAa,KAAM,GAChD,EAAO,UAAU,QAAQ,KAAK,KAAM,GACpC,KAAK,KAAK,UACV,KAAK,aAAe,MAEjB,GACT,OAAO,QAAQ,OAAO,QACxB,EAAK,QAAU,IAChB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,WACpC,kBACI,KAAK,YAAc,GACnB,KAAK,MAAQ,EACb,KAAK,QAAU,EACf,KAAK,QAAQ,YAAY,GACzB,KAAK,QAAU,EACf,KAAK,QAAQ,GAAG,EAAK,aAAa,WAAY,KAAK,QAAS,MAC5D,KAAK,QAAQ,GAAG,EAAK,UAAU,MAAO,KAAK,KAAM,MACjD,KAAK,QAAQ,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,QAAS,MAErE,SAAmB,UAAU,KAAO,WAChC,KAAK,QAAQ,UACb,KAAK,QAAQ,GAAK,IAEtB,EAAmB,UAAU,QAAU,WACnC,GAAI,KAAK,YACL,OAEJ,KAAK,YAAc,GACnB,KAAK,QAAQ,UAEV,KAEX,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAc,MAAW,QACzB,EAAc,KAAU,SACzB,EAAgB,EAAK,eAAkB,GAAK,cAAgB,KAC/D,MAAuC,WACnC,gBACI,KAAK,YAAc,GACnB,KAAK,UAAY,EACjB,KAAK,MAAQ,EACb,KAAK,MAAQ,EAEjB,SAAkB,UAAU,MAAQ,WAChC,GAAI,KAAK,YACL,OAEJ,KAAK,YAAc,GACnB,KAAK,UAAY,KAAK,MAAM,EAC5B,KAAK,MAAM,KAAK,WAAgB,GAChC,KAAK,MAAM,KAAK,UAAe,KAAK,UACpC,KAAK,MAAM,KAAK,EAAc,MAAO,KAAK,OAC1C,KAAK,sBAET,EAAkB,UAAU,mBAAqB,WAC7C,MAAY,OACS,GACrB,KAAK,cAAgB,KAAK,MAAM,OAAO,IAAI,CACvC,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,KAAK,UAAY,EACpB,WAAY,WACR,EAAM,cAAgB,EAAM,MAAM,OAAO,IAAI,CACzC,QAAS,EAAM,MACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,EAAG,EAAM,UACT,cAAe,IACf,WAAY,EAAM,mBAAmB,KAAK,SAK1D,EAAkB,UAAU,KAAO,WAC/B,GAAI,KAAK,cAAgB,GACrB,OAEJ,KAAK,YAAc,GACnB,KAAK,MAAM,KAAK,WAAgB,GAChC,KAAK,MAAM,KAAK,EAAc,KAAM,KAAK,OACzC,KAAK,qBAET,EAAkB,UAAU,kBAAoB,WAC5C,AAAI,KAAK,eACL,KAAK,cAAc,OAEvB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,EAAG,KAAK,aAGhB,EAAkB,UAAU,QAAU,WAClC,KAAK,MAAQ,MAEV,KAEX,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAgB,KAAU,aAC1B,EAAgB,WAAgB,aAChC,EAAgB,IAAS,MACzB,EAAgB,eAAoB,mBACrC,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MAAgC,YAC5B,UAAU,EAAY,GACtB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAS,EAAO,IAAY,KACvE,SAAM,gBAAkB,GACxB,EAAM,QAAU,GAChB,EAAM,WAAa,EAAM,KACzB,EAAM,KAAK,OAAO,EAAK,eAAiB,EAAK,aAAa,YAC1D,EAAM,UAAY,EAAK,SAAS,YAChC,EAAM,KAAO,cACb,EAAM,KAAO,GAAI,GAAK,cAAc,GACpC,EAAM,OAAS,GAAI,GAAK,gBAAgB,EAAO,GAC/C,EAAM,SAAW,GAAI,GAAK,kBAAkB,EAAM,MAAO,GACzD,EAAM,cAAgB,GAAI,GAAK,cAAc,EAAM,MAAO,GAC1D,EAAM,GAAG,EAAK,YAAY,OAAQ,EAAM,MAAO,GAC/C,EAAM,GAAG,EAAK,YAAY,KAAM,EAAM,KAAM,GACrC,EAEX,cAAO,eAAe,EAAW,UAAW,WAAY,CACpD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,EAAW,UAAU,MAAQ,WACzB,KAAK,gBAET,EAAW,UAAU,aAAe,WAChC,GAAI,KAAK,YAAc,KAAK,WAAW,YACnC,OAEJ,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,CAAE,MAAO,EAAG,KAAM,EAAG,GAAI,IAChC,KAAM,MAGd,EAAW,UAAU,KAAO,WACxB,MAAY,KACZ,KAAK,MAAM,OAAO,MAAM,OAAO,KAAK,YACpC,KAAK,MAAM,OAAO,aAAa,MAC/B,MAAyB,IACzB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,KAEX,MAAyB,KACH,EAAqB,EAC3C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,CAAE,MAAO,EAAG,KAAM,EAAG,GAAI,GAChC,WAAY,WACR,EAAM,QAAQ,QAI1B,EAAW,UAAU,oBAAsB,YACvC,KAAK,cAAc,KAAK,IAE5B,EAAW,UAAU,UAAY,WAC7B,KAAK,KAAK,EAAgB,WAAY,MACtC,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAW,UAAU,IAAM,WACvB,KAAK,KAAK,EAAgB,IAAK,OAEnC,EAAW,UAAU,aAAe,WAChC,KAAK,gBAAkB,GACvB,KAAK,KAAK,EAAgB,eAAgB,OAE9C,EAAW,UAAU,cAAgB,WACjC,KAAK,SAAS,SAElB,EAAW,UAAU,aAAe,WAChC,KAAK,SAAS,QAElB,EAAW,UAAU,QAAU,YAC3B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,KAAK,KAAK,EAAK,cAAc,YAAa,KAAM,GAChD,EAAO,UAAU,QAAQ,KAAK,KAAM,GACpC,KAAK,SAAS,UACd,KAAK,OAAO,UACZ,KAAK,KAAK,WAEP,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,+BAAiC,KACxF,SAAM,MAAQ,EACd,EAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,EAAM,YAAa,GACpE,EAEX,SAAY,UAAU,YAAc,WAChC,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,MAAM,aAAgB,IAAM,KAAK,MAAM,SACpE,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,MAAM,cAAiB,GAAI,KAAK,MAAM,SACnE,KAAK,aAAe,KAAK,mBAE7B,EAAY,UAAU,gBAAkB,WACpC,MAAI,MAAK,MAAM,WAAa,EAAK,SAAS,UAC/B,KAAK,MAAM,aAAe,IAE9B,KAAK,MAAM,aAAe,MAErC,EAAY,UAAU,KAAO,WACzB,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAY,UAAU,QAAU,YAC5B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,YAAa,KAAK,YAAa,MAE9E,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,EAAM,MAAM,KAAO,eAAiB,KAC3F,EAAM,QAAU,EAChB,EAAM,QAAU,EAChB,EAAM,YAAc,EACpB,EAAM,UAAY,EAAM,MAAM,KAAO,aACrC,EAAM,SAAW,EAAM,MAAM,KAAO,YACpC,EAAM,WAAa,EAAM,MAAM,KAAO,cACtC,EAAM,MAAQ,EACd,EAAM,MAAM,GAAG,EAAK,YAAY,OAAQ,EAAM,cAAe,GAC7D,EAAM,MAAM,GAAG,EAAK,YAAY,KAAM,EAAM,YAAa,GACzD,EAAM,MAAM,GAAG,EAAK,gBAAgB,WAAY,EAAM,QAAQ,KAAK,EAAO,KAC1E,EAAM,MAAM,GAAG,EAAK,gBAAgB,eAAgB,EAAM,aAAc,GACxE,EAAM,MAAM,GAAG,EAAK,UAAU,SAAU,EAAM,QAAQ,KAAK,EAAO,KAClE,EAAM,MAAM,GAAG,OAAO,YAAY,OAAO,QAAS,EAAM,QAAQ,KAAK,EAAO,KAC5E,EAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,EAAM,YAAa,GAC3E,MAAgB,EAAM,MAAM,WACR,CAAC,EAAK,SAAS,YAAa,EAAK,SAAS,UAAW,EAAK,SAAS,cAIvF,GAHA,AAAI,EAAc,SAAS,IACvB,EAAM,qBAEN,IAAc,EAAK,SAAS,gBAC5B,MAAa,EAAE,MAAM,EAAG,IAAM,OAClB,OAAO,KAAK,IAAI,KAAK,GACjC,EAAM,uBAAuB,GAEjC,GAAI,IAAc,EAAK,SAAS,UAC5B,MAAY,EAAM,MAAM,KACxB,AAAI,EAAM,SAAS,MAAQ,EAAM,SAAS,KACtC,EAAM,qBAEL,AAAI,IAAU,qBACf,EAAM,mBAAmB,KAAM,MAG/B,EAAM,mBAAmB,IAAK,MAGtC,MAAO,GAEX,SAAU,cAAgB,YACtB,MAAO,CACH,KAAM,EAAM,MAAM,KAAO,aACzB,IAAK,EAAM,MAAM,KAAO,YACxB,MAAO,EAAM,MAAM,KAAO,gBAGlC,EAAU,UAAU,uBAAyB,YACzC,MAAY,OAEZ,AAAI,IAAU,QAAU,GAAQ,GAC/B,GAAK,KAAK,SAAW,MAAQ,IAAO,QAAkB,EAAG,OAAO,IAAI,CACjE,MAAO,EACP,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,YAAa,IACb,WAAY,WACR,MACA,AAAC,GAAK,EAAM,SAAW,MAAQ,IAAO,QAAkB,EAAG,OAAO,IAAI,CAClE,QAAS,EACT,SAAU,KACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,YAAa,EACb,WAAY,WACR,EAAM,uBAAuB,aAMjD,EAAU,UAAU,mBAAqB,cACrC,AAAI,IAAO,QAAU,GAAK,GAC1B,AAAI,IAAO,QAAU,GAAK,IAC1B,MAAa,EAAE,MAAM,EAAG,IAAK,OACjB,OAAO,KAAK,IAAI,KAAK,GACjC,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,QAAS,EACT,QAAS,EACT,OAAQ,GACR,KAAM,MAGd,EAAU,UAAU,cAAgB,WAChC,GAAI,KAAK,MAAM,WAAa,EAAK,SAAS,eACtC,OAEJ,KAAK,SAAS,KAAK,UACnB,KAAK,gBAAgB,MAEzB,EAAU,UAAU,gBAAkB,YAClC,MAAY,KACZ,AAAI,KAAK,iBACL,MAAK,gBAAgB,SACrB,KAAK,gBAAkB,MAE3B,KAAK,gBAAkB,KAAK,MAAM,KAAK,YAAY,EAAO,WACtD,EAAM,SAAS,EAAM,cAG7B,EAAU,UAAU,YAAc,WAC9B,GAAI,CAAC,KAAK,MACN,OAEJ,AAAI,KAAK,MAAM,kBAAoB,IAC/B,KAAK,SAAS,EAAK,cAAc,kBAErC,KAAK,MAAM,OAAO,aAAa,OAEnC,EAAU,UAAU,aAAe,WAC/B,KAAK,SAAS,EAAK,cAAc,qBACjC,KAAK,MAAM,OAAO,aAAa,OAEnC,EAAU,UAAU,YAAc,WAC9B,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,QAAU,KAAK,aAAgB,MAAK,QAAU,KAAK,MAAM,SACtF,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,QAAU,KAAK,cAAiB,MAAK,QAAU,KAAK,MAAM,SACvF,KAAK,MAAQ,KAAK,MAAM,MAAQ,KAAK,aAEzC,EAAU,UAAU,QAAU,YAC1B,AAAI,KAAK,OACL,MAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,YAAa,KAAK,YAAa,MAC1E,KAAK,MAAM,OAAO,aAAa,OAEnC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,YAChC,UAAU,EAAgB,GAC1B,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,uCAAyC,KAChG,SAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,EAAM,WAAY,GACnE,EAEX,SAAe,SAAW,YACtB,MAAO,uBAAyB,EAAc,MAAM,KAAK,IAE7D,EAAe,UAAU,WAAa,WAClC,GAAI,KAAK,UAAY,GACjB,OAEJ,GAAI,CAAC,KAAK,cACN,OAEJ,KAAK,EAAI,KAAK,cAAc,EAAI,KAAK,cAAc,aAAgB,IAAM,KAAK,cAAc,SAC5F,KAAK,EAAI,KAAK,cAAc,EAAI,KAAK,cAAc,cAAiB,IAAM,KAAK,cAAc,SAC7F,KAAK,MAAQ,KAAK,cAAc,MAChC,KAAK,MAAQ,KAAK,cAAc,OAEpC,EAAe,UAAU,SAAW,YAChC,KAAK,OAAS,GACd,KAAK,cAAgB,EACrB,KAAK,cAAc,GAAG,EAAK,gBAAgB,IAAK,KAAK,KAAM,MAC3D,KAAK,cAAc,GAAG,EAAK,gBAAgB,WAAY,KAAK,KAAM,MAClE,KAAK,cAAc,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,KAAM,MACpE,KAAK,SAAS,EAAe,SAAS,KAAK,cAAc,MAAM,QAEnE,EAAe,UAAU,KAAO,WAC5B,MAAY,KACZ,GAAI,KAAK,QACL,OAEJ,KAAK,QAAU,GACf,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,GACP,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,GACjC,MAAO,EACP,WAAY,WACR,EAAM,QAAU,UAMpC,EAAe,UAAU,KAAO,WAC5B,KAAK,cAAc,IAAI,EAAK,gBAAgB,IAAK,KAAK,KAAM,MAC5D,KAAK,cAAc,IAAI,EAAK,gBAAgB,WAAY,KAAK,KAAM,MACnE,KAAK,cAAc,IAAI,OAAO,YAAY,OAAO,QAAS,KAAK,KAAM,MACrE,EAAO,UAAU,KAAK,KAAK,OAE/B,EAAe,UAAU,QAAU,YAC/B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,uCAAyC,KAChG,SAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,EAAM,YAAa,GACpE,EAEX,SAAa,SAAW,YACpB,MAAO,qBAAuB,EAAc,MAAM,KAAK,IAE3D,EAAa,UAAU,KAAO,WAC1B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAa,UAAU,OAAS,WAC5B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAa,UAAU,SAAW,YAC9B,KAAK,cAAgB,EACrB,KAAK,cAAc,GAAG,EAAK,cAAc,KAAM,KAAK,KAAM,MAC1D,KAAK,cAAc,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,QAAS,MACvE,KAAK,SAAS,EAAK,eAAe,SAAS,KAAK,cAAc,MAAM,OACpE,KAAK,QAAQ,WAEjB,EAAa,UAAU,cAAgB,WACnC,KAAK,MAAQ,GACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,GACP,KAAM,GACN,OAAQ,MAGhB,EAAa,UAAU,KAAO,WAC1B,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,WAIlB,EAAa,UAAU,YAAc,WACjC,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,EAAI,KAAK,cAAc,EAAI,KAAK,cAAc,aAAgB,IAAM,KAAK,cAAc,SAC5F,KAAK,EAAI,KAAK,cAAc,EAAI,KAAK,cAAc,cAAiB,IAAM,KAAK,cAAc,SAC7F,KAAK,MAAQ,KAAK,cAAc,MAChC,KAAK,MAAQ,KAAK,cAAc,OAEpC,EAAa,UAAU,QAAU,YAC7B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAK,eAAe,YAAa,IAAK,KAAO,KACxF,SAAM,UAAU,GAAK,IACrB,EAAM,MAAM,OAAO,GAAG,aAAc,EAAM,YAAa,GAChD,EAEX,SAAmB,UAAU,SAAW,YACpC,KAAK,YAAc,KAAK,eAAe,GACvC,KAAK,MAAQ,EACb,KAAK,MAAM,GAAG,EAAK,YAAY,OAAQ,KAAK,WAAY,MACxD,KAAK,MAAM,GAAG,EAAK,YAAY,KAAM,KAAK,KAAM,MAChD,KAAK,MAAM,GAAG,EAAK,UAAU,MAAO,KAAK,KAAM,MAC/C,KAAK,MAAM,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,KAAM,MAC5D,KAAK,eAET,EAAmB,UAAU,eAAiB,YAC1C,MAAO,CACH,EAAG,EAAM,aAAgB,IAAM,EAAM,SAAW,EAChD,EAAG,CAAC,EAAM,cAAgB,EAAM,QAAU,IAGlD,EAAmB,UAAU,YAAc,WACvC,AAAI,KAAK,OACL,KAAK,QAAQ,KAAK,MAAM,OAAO,MAAM,aAG7C,EAAmB,UAAU,WAAa,WACtC,KAAK,eAET,EAAmB,UAAU,KAAO,WAChC,KAAK,MAAM,IAAI,EAAK,YAAY,OAAQ,KAAK,WAAY,MACzD,KAAK,MAAM,IAAI,EAAK,YAAY,KAAM,KAAK,KAAM,MACjD,KAAK,MAAM,IAAI,OAAO,YAAY,OAAO,QAAS,KAAK,KAAM,MAC7D,KAAK,QAET,EAAmB,UAAU,YAAc,WACvC,GAAI,CAAC,KAAK,QACN,OAEJ,GAAI,CAAC,KAAK,MACN,OAEJ,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,YAAY,EACzC,KAAK,EAAI,KAAK,MAAM,EAAI,KAAK,YAAY,GAE7C,EAAmB,UAAU,QAAU,YACnC,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,GAAG,aAAc,KAAK,YAAa,MAEzD,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,YACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,UAAY,EAAK,SAAS,SACzB,EAEX,SAAc,SAAW,YACrB,MAAO,oBAAsB,GAEjC,EAAc,eAAiB,qBAC/B,EAAc,gBAAkB,qBAChC,EAAc,mBAAqB,qBACnC,EAAc,kBAAoB,qBAClC,EAAc,WAAa,CAAC,EAAc,eAAgB,EAAc,gBAAiB,EAAc,mBAAoB,EAAc,mBAClI,GACT,EAAK,YACP,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAU,EAAU,MAAW,GAAK,QACpC,EAAU,EAAU,KAAU,IAAM,OACpC,EAAU,EAAU,KAAU,GAAK,SACpC,EAAY,EAAK,WAAc,GAAK,UAAY,KACnD,MAA8B,YAC1B,UAAU,EAAU,GACpB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,UAAY,EAClB,EAAM,SAAW,GACjB,EAAM,UAAY,EAClB,EAAM,cAAgB,EAAU,KAChC,EAAM,UAAY,EAAU,KAC5B,EAAM,qBAAuB,EAC7B,EAAM,SAAW,EAAM,MACvB,EAAM,KAAO,YACb,EAAM,SAAW,CAAE,EAAG,EAAG,EAAG,GAC5B,EAAM,SAAW,CAAE,EAAG,EAAG,EAAG,GAC5B,EAAM,UAAY,EAAK,SAAS,UAChC,EAAM,WAAW,OAAO,SAAW,GACnC,EAAM,gBAAkB,CACpB,CAAE,EAAG,EAAG,EAAG,GACX,CAAE,EAAG,EAAG,EAAG,GACX,CAAE,EAAG,EAAG,EAAG,IAER,EAEX,SAAS,UAAU,YAAc,WAC7B,KAAK,SAAW,IAEpB,EAAS,UAAU,UAAY,cAC3B,AAAI,KAAK,UACL,KAAK,eAAe,EAAM,IAGlC,EAAS,UAAU,eAAiB,cAChC,KAAK,cAAgB,KAAK,UAC1B,KAAK,gBAAgB,GACrB,KAAK,0BAA0B,GAC/B,AAAI,KAAK,YAAc,KAAK,eACxB,MAAK,UAAY,EACjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,UAAW,MAIvB,EAAS,UAAU,gBAAkB,YACjC,KAAK,sBAAwB,EAC7B,AAAI,KAAK,qBAAuB,IAC5B,MAAK,UAAY,KAAK,gBAAgB,KAAK,WAC3C,KAAK,sBAAwB,KAGrC,EAAS,UAAU,0BAA4B,YAC3C,KAAK,SAAS,EAAI,EAAS,aAAe,KAAK,UAAY,KAAK,UAAY,KAAK,UAAY,EAC7F,KAAK,SAAS,EAAI,KAAK,EAAI,KAAK,SAAS,EACzC,KAAK,SAAS,EAAI,KAAK,EACvB,KAAK,MAAM,OAAO,KAAK,YAAY,KAAK,WAAY,KAAK,UACzD,KAAK,MAAM,OAAO,KAAK,YAAY,KAAK,WAAY,KAAK,WAE7D,EAAS,UAAU,gBAAkB,YACjC,MAAmB,EACnB,GAAI,IAAqB,EAAU,MAC/B,MAAiB,OAAO,KAAK,IAAI,QAAQ,CAAC,EAAU,KAAM,EAAU,UAC/C,EAAW,KACL,KAAK,gBAAgB,GAChD,GAAI,EACA,EAAe,OAGf,MAAsB,EAAW,KACL,KAAK,gBAAgB,GACjD,AAAI,GACA,GAAe,GAGvB,MAAO,GAEX,MAA6B,KAAK,gBAAgB,GAClD,GAAI,IAA2B,IAC3B,MAAwB,KAAK,gBAAgB,KACpB,KAAK,gBAAgB,GAC9C,AAAI,EACA,EAAe,EAGf,EAAe,EAAU,KAGjC,MAAO,IAEX,EAAS,UAAU,gBAAkB,YACjC,MAAY,OACE,KAAK,MAAQ,EAAI,IAClB,IAAc,EAAU,KAAO,KAAK,EAAI,EAAU,KAAK,EAAI,IAC9D,KAAK,EAAI,EAAK,SAAS,UAAY,EAAI,IACpC,KAAK,IACL,KAAK,EAAI,EAAK,SAAS,UAAY,EAAI,EACpD,KAAK,gBAAgB,GAAG,EAAI,EAC5B,KAAK,gBAAgB,GAAG,EAAI,EAC5B,KAAK,gBAAgB,GAAG,EAAI,EAC5B,KAAK,gBAAgB,GAAG,EAAI,EAC5B,KAAK,gBAAgB,GAAG,EAAI,EAC5B,KAAK,gBAAgB,GAAG,EAAI,EAC5B,MAAoB,KAAK,mBACzB,MAAO,MAAK,gBAAgB,MAAM,YAC9B,MAAO,GAAM,MAAM,OAAO,eAAe,EAAM,EAAG,EAAM,EAAG,GAAe,SAAW,KAG7F,EAAS,UAAU,gBAAkB,YACjC,MAAI,KAAc,EAAU,KACjB,EAAU,KAEd,IAAc,EAAU,KAAO,EAAU,MAAQ,EAAU,MAEtE,EAAS,UAAU,iBAAmB,WAClC,MAAY,OACF,KAAK,KAAK,SACpB,MAAO,MAAK,MAAM,OAAO,MAAM,eAAe,OAAO,YACjD,MAAkB,IAAS,EAAM,WACjC,MAAO,IAAe,EAAK,UAAY,EAAM,aAAa,EAAK,MAGvE,EAAS,UAAU,aAAe,cAC9B,MAAc,KAAK,WAAW,GAC9B,MAAI,KAAY,GACL,GAEJ,IAAY,GAEvB,EAAS,UAAU,WAAa,YAC5B,MAAiB,EAAK,WACtB,GAAI,CAAC,EACD,MAAO,GAEX,MAAc,MAAO,GAAW,MAAS,YACzC,MAAI,KAAY,GACL,GAEJ,EAAW,KAAK,UAE3B,EAAS,UAAU,QAAU,YACzB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAExC,EAAS,aAAe,KACjB,GACT,EAAK,YACP,EAAK,SAAW,IACjB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,YAClC,UAAU,EAAkB,GAC5B,wBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,aAAe,IACrB,EAAM,KAAO,qBACb,EAAM,WAAW,OAAO,WAAa,GACrC,EAAM,UAAY,EACX,EAEX,SAAiB,UAAU,UAAY,cACnC,EAAO,UAAU,UAAU,KAAK,KAAM,EAAM,GAC5C,AAAI,KAAK,UACL,KAAK,eAAe,IAG5B,EAAiB,UAAU,eAAiB,YACxC,KAAK,OAAS,KAAK,aAAe,KAAK,UAAY,KAAK,UAAY,KAAK,UAAY,GAElF,GACT,EAAK,UACP,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAmB,QAAa,YACjC,EAAqB,EAAK,oBAAuB,GAAK,mBAAqB,KAC9E,MAAmC,YAC/B,UAAU,EAAe,GACzB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,iBAAmB,EAAK,SAAS,UAAY,IACnD,EAAM,iBAAmB,EACzB,EAAM,UAAY,EAAK,SAAS,eACzB,EAEX,cAAO,eAAe,EAAc,UAAW,kBAAmB,CAC9D,IAAK,WACD,MAAO,MAAK,kBAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAc,UAAW,kBAAmB,CAC9D,IAAK,WACD,MAAO,MAAK,kBAEhB,WAAY,GACZ,aAAc,KAElB,EAAc,UAAU,KAAO,WAC3B,MAAY,KACZ,KAAK,MAAM,OAAO,MAAM,OAAO,KAAK,YACpC,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,GACV,MAAO,IACP,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,KAAK,EAAmB,QAAS,GACvC,EAAM,cAIlB,EAAc,UAAU,QAAU,YAC9B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,EAAK,YACP,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,QAAa,mBAC1B,EAAc,EAAK,aAAgB,GAAK,YAAc,KACzD,MAAiC,YAC7B,UAAU,EAAa,GACvB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,KAAO,eACb,EAAM,UAAY,EAAK,SAAS,aACzB,EAEX,SAAY,UAAU,KAAO,WACzB,MAAY,KACZ,KAAK,MAAM,OAAO,MAAM,OAAO,KAAK,YACpC,KAAK,MAAM,OAAO,aAAa,MAC/B,MAAyB,IACzB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,KACP,WAAY,WACR,EAAM,QAAQ,QAI1B,EAAY,UAAU,QAAU,YAC5B,AAAI,IAAc,IACd,KAAK,KAAK,EAAY,QAAS,MAEnC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,EAAK,YACP,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAkB,QAAa,YAChC,EAAoB,EAAK,mBAAsB,GAAK,kBAAoB,KAC3E,MAAkC,YAC9B,UAAU,EAAc,GACxB,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,UAAY,EAAK,SAAS,cACzB,EAEX,SAAa,UAAU,KAAO,WAC1B,MAAY,KACZ,KAAK,KAAK,EAAkB,QAAS,MACrC,KAAK,MAAM,OAAO,MAAM,OAAO,KAAK,YACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,cAIlB,EAAa,UAAU,QAAU,YAC7B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,EAAK,YACP,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,sBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,EAAO,IAAY,KACxE,SAAM,UAAY,EAAK,SAAS,oBACzB,EAEX,SAAkB,SAAW,YACzB,MAAI,KAAgB,EACT,EAAkB,SAEpB,IAAgB,EACd,EAAkB,YAEpB,IAAgB,EACd,EAAkB,WAEpB,IAAgB,EACd,EAAkB,WAEtB,EAAkB,UAE7B,EAAkB,SAAW,6BAC7B,EAAkB,YAAc,gCAChC,EAAkB,WAAa,+BAC/B,EAAkB,WAAa,+BAC/B,EAAkB,WAAa,CAAC,EAAkB,SAAU,EAAkB,YAAa,EAAkB,WAAY,EAAkB,YACpI,GACT,EAAK,YACP,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAqB,WAAgB,aACrC,EAAqB,SAAc,aACpC,EAAuB,EAAK,sBAAyB,GAAK,qBAAuB,KACpF,MAAqC,YACjC,UAAU,EAAiB,GAC3B,gBACI,QACY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,EAAgB,iBAAmB,KAC1F,SAAM,UAAY,GAClB,EAAM,aAAe,GACrB,EAAM,UAAU,EAAgB,OAAQ,CACpC,SAAU,GACV,SAAU,GACV,cAAe,GACf,OAAS,GAAK,GACV,EAAG,EAAK,eAAiB,EAAK,aAAa,iBAC3C,KAER,EAAM,UAAY,EAAK,SAAS,iBAChC,EAAM,KAAO,mBACb,EAAM,KAAO,GAAI,GAAK,cAAc,GACpC,EAAM,WAAa,GAAI,GAAK,WAAW,EAAM,MAAO,GACpD,EAAM,cAAgB,GAAI,GAAK,cAAc,EAAM,MAAO,GAC1D,EAAM,OAAS,GAAI,GAAK,WAAW,EAAM,MAAO,EAAO,GAChD,EAEX,cAAO,eAAe,EAAgB,UAAW,WAAY,CACzD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAgB,UAAW,cAAe,CAC5D,IAAK,WACD,MAAO,MAAK,cAEhB,WAAY,GACZ,aAAc,KAElB,EAAgB,UAAU,gBAAkB,WACxC,MAAY,OACA,OAAO,KAAK,IAAI,QAAQ,EAAG,KACvC,KAAK,MAAQ,YACb,KAAK,MAAM,KAAK,YAAY,EAAO,WAC/B,EAAM,KAAK,EAAqB,SAAU,KAE9C,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,IACP,KAAM,GACN,OAAQ,KAEZ,MAAkB,OAAO,KAAK,IAAI,OAAS,IAC5B,IACf,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KACT,SAAU,EAAW,EACrB,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,EACP,WAAY,WACR,EAAM,WAAa,EAAM,MAAM,OAAO,IAAI,CACtC,SAAU,EACV,QAAS,EACT,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,EAAM,MAAQ,GACrB,KAAM,GACN,OAAQ,SAKxB,EAAgB,UAAU,aAAe,WACrC,GAAI,KAAK,UACL,OAEJ,KAAK,UAAY,GACjB,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,OAAO,iCACZ,KAAK,mBACL,KAAK,oBACL,KAAK,UAAU,IACf,KAAK,UAAU,IACf,KAAK,iBAAiB,IACtB,KAAK,mBAAmB,IAAO,OAAO,KAAK,IAAI,QAC/C,KAAK,aAAa,IAAO,MAAK,MAAM,KAAK,KAAK,MAAQ,aACtD,KAAK,WACL,KAAK,KAAK,EAAqB,WAAY,OAE/C,EAAgB,UAAU,UAAY,cAClC,AAAI,KAAK,WACL,KAAK,OAAO,mBAGpB,EAAgB,UAAU,iBAAmB,WACzC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,KAAK,MAAQ,IACpB,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,QAKvB,EAAgB,UAAU,KAAO,WAC7B,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,KAAK,EAAK,gBAAgB,SAAU,KAAK,QAAS,MACvD,KAAK,WAAW,QAEpB,EAAgB,UAAU,kBAAoB,WAC1C,KAAK,SAAS,EAAgB,iBAC9B,KAAK,WAAW,MAEpB,EAAgB,UAAU,WAAa,YACnC,MAAY,KACZ,AAAI,KAAK,iBACL,MAAK,gBAAgB,SACrB,KAAK,gBAAkB,MAE3B,KAAK,gBAAkB,KAAK,MAAM,KAAK,YAAY,EAAO,WACtD,EAAM,SAAS,EAAgB,mBAGvC,EAAgB,UAAU,oBAAsB,YAC5C,KAAK,cAAc,KAAK,IAE5B,EAAgB,UAAU,WAAa,WACnC,KAAK,MAAM,OAAO,aAAa,MAC/B,AAAI,KAAK,YACL,KAAK,WAAW,UAGxB,EAAgB,UAAU,QAAU,YAChC,KAAK,KAAK,EAAK,cAAc,YAAa,KAAM,GAChD,EAAO,UAAU,QAAQ,KAAK,KAAM,GACpC,KAAK,KAAK,UACV,KAAK,aAAe,IAExB,EAAgB,OAAS,GACzB,EAAgB,eAAiB,mBACjC,EAAgB,gBAAkB,6BAC3B,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,WAC/B,cACI,KAAK,MAAQ,EAEjB,SAAc,UAAU,YAAc,YAClC,KAAK,MAAM,EAAI,EAAK,EACpB,KAAK,MAAM,EAAI,EAAK,GAExB,EAAc,UAAU,gBAAkB,WACtC,MAAO,CAAE,EAAG,KAAK,YAAa,EAAG,KAAK,WAE1C,EAAc,UAAU,UAAY,WAChC,MAAO,MAAK,MAAM,KAAK,MAAM,EAAI,EAAK,SAAS,YAEnD,EAAc,UAAU,OAAS,WAC7B,MAAU,KAAK,MAAM,KAAK,MAAM,EAAI,EAAK,SAAS,aACjC,EAAK,SAAS,KAAO,EAAM,EAC5C,MAAO,IAEX,EAAc,UAAU,QAAU,WAC9B,KAAK,MAAQ,MAEV,KAEX,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,OAAY,SACxB,EAAY,KAAU,SACvB,EAAc,EAAK,aAAgB,GAAK,YAAc,KACzD,MAAqC,WACjC,gBACI,KAAK,WAAa,GAClB,KAAK,MAAQ,EACb,KAAK,OAAS,EAElB,cAAO,eAAe,EAAgB,UAAW,QAAS,CACtD,IAAK,WACD,MAAO,MAAK,QAEhB,WAAY,GACZ,aAAc,KAElB,EAAgB,UAAU,KAAO,WAC7B,GAAI,KAAK,WACL,OAEJ,KAAK,OAAO,KAAK,QAErB,EAAgB,UAAU,OAAS,YAC/B,GAAI,KAAK,WACL,OAEJ,GAAI,KAAK,YAAc,GACnB,OAEJ,KAAK,OAAS,OAAO,KAAK,OAAO,KAAK,OAAQ,EAAa,GAC3D,KAAK,MAAM,KAAK,EAAY,OAAQ,KAAK,MAAO,GAChD,AAAI,KAAK,SAAW,GAChB,KAAK,MAAM,KAAK,EAAY,KAAM,KAAK,MAAO,IAGtD,EAAgB,UAAU,QAAU,WAChC,MAAO,MAAK,OAAS,GAEzB,EAAgB,UAAU,QAAU,WAChC,KAAK,MAAQ,MAEV,KAEX,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAgB,MAAW,QAC3B,EAAgB,SAAc,aAC/B,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MAAgC,WAC5B,gBACI,KAAK,MAAQ,EACb,KAAK,MAAQ,EAEjB,SAAW,UAAU,KAAO,WACxB,MAAY,KACZ,KAAK,MAAM,KAAK,EAAgB,MAAO,KAAK,OAC5C,MAAyB,IACzB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,MAEX,MAAyB,KACH,EAAqB,EAC3C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,MAAO,EACP,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,MAAM,KAAK,EAAgB,SAAU,EAAM,WAI7D,EAAW,UAAU,QAAU,aACxB,KAEX,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAU,MAAW,aACrB,EAAU,SAAc,kBACzB,EAAY,EAAK,WAAc,GAAK,UAAY,KACnD,MAAmC,WAC/B,gBACI,KAAK,MAAQ,EACb,KAAK,MAAQ,EAEjB,SAAc,UAAU,KAAO,YAC3B,MAAY,KACZ,KAAK,MAAM,KAAK,EAAU,MAAO,KAAK,OACtC,KAAK,MAAM,OAAO,MAAM,OAAO,KAAK,MAAM,MAC1C,KAAK,MAAM,OAAO,aAAa,KAAK,OACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,EACP,WAAY,WACR,EAAM,MAAM,OAAS,GACrB,EAAM,MAAM,QAAU,GACtB,EAAM,MAAM,KAAK,EAAU,SAAU,EAAM,WAIvD,EAAc,UAAU,QAAU,aAE3B,KAEX,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,EAAK,cAAgB,gBACrB,MACA,AAAC,aACG,EAAa,QAAa,UAC1B,EAAa,KAAU,OACvB,EAAa,QAAa,UAC1B,EAAa,UAAe,YAC5B,EAAa,YAAiB,cAC9B,EAAa,KAAU,OACvB,EAAa,aAAkB,eAC/B,EAAa,iBAAsB,mBACnC,EAAa,KAAU,OACvB,EAAa,MAAW,UACzB,EAAe,EAAK,cAAiB,GAAK,aAAe,OAC7D,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAc,EAAc,KAAU,GAAK,OAC3C,EAAc,EAAc,YAAiB,GAAK,cAClD,EAAc,EAAc,mBAAwB,GAAK,qBACzD,EAAc,EAAc,WAAgB,GAAK,aACjD,EAAc,EAAc,YAAiB,GAAK,cAClD,EAAc,EAAc,iBAAsB,GAAK,mBACvD,EAAc,EAAc,oBAAyB,GAAK,sBAC1D,EAAc,EAAc,SAAc,GAAK,WAC/C,EAAc,EAAc,WAAgB,GAAK,aACjD,EAAc,EAAc,0BAA+B,GAAK,4BAChE,EAAc,EAAc,MAAW,IAAM,QAC7C,EAAc,EAAc,WAAgB,IAAM,aAClD,EAAc,EAAc,MAAW,IAAM,QAC7C,EAAc,EAAc,gBAAqB,IAAM,kBACvD,EAAc,EAAc,YAAiB,IAAM,cACnD,EAAc,EAAc,mBAAwB,IAAM,qBAC1D,EAAc,EAAc,iBAAsB,IAAM,mBACxD,EAAc,EAAc,aAAkB,IAAM,eACpD,EAAc,EAAc,0BAA+B,IAAM,4BACjE,EAAc,EAAc,WAAgB,IAAM,aAClD,EAAc,EAAc,qBAA0B,IAAM,uBAC5D,EAAc,EAAc,gBAAqB,IAAM,kBACvD,EAAc,EAAc,eAAoB,IAAM,iBACtD,EAAc,EAAc,oBAAyB,IAAM,sBAC3D,EAAc,EAAc,cAAmB,IAAM,gBACrD,EAAc,EAAc,wBAA6B,IAAM,0BAC/D,EAAc,EAAc,QAAa,IAAM,UAC/C,EAAc,EAAc,wBAA6B,IAAM,0BAC/D,EAAc,EAAc,cAAmB,IAAM,gBACrD,EAAc,EAAc,aAAkB,IAAM,eACpD,EAAc,EAAc,eAAoB,IAAM,iBACtD,EAAc,EAAc,UAAe,IAAM,YACjD,EAAc,EAAc,kBAAuB,IAAM,oBACzD,EAAc,EAAc,uBAA4B,IAAM,yBAC9D,EAAc,EAAc,WAAgB,IAAM,aAClD,EAAc,EAAc,aAAkB,IAAM,eACpD,EAAc,EAAc,4BAAiC,IAAM,8BACnE,EAAc,EAAc,kBAAuB,IAAM,oBACzD,EAAc,EAAc,UAAe,IAAM,cAClD,EAAgB,EAAK,eAAkB,GAAK,cAAgB,OAChE,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,qBAAuB,KAC9E,SAAM,SAAW,EACjB,EAAM,KAAO,EAIb,EAAM,OACC,EAEX,SAAY,UAAU,KAAO,WACzB,KAAK,SACL,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,OAGf,EAAY,UAAU,KAAO,WACzB,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAY,UAAU,OAAS,WAC3B,KAAK,QAAU,GACf,KAAK,OAAS,IAElB,EAAY,UAAU,WAAa,WAC/B,GAAI,CAAC,KAAK,QACN,OAEJ,KAAK,EAAI,KAAK,KAAK,EACnB,KAAK,EAAI,KAAK,KAAK,EACnB,KAAK,MAAQ,KAAK,KAAK,MACvB,KAAK,MAAQ,KAAK,KAAK,OAE3B,EAAY,UAAU,QAAU,YAC5B,KAAK,KAAO,KACZ,AAAI,KAAK,OACL,MAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,aAAc,KAAK,WAAY,OAEzD,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,WAChC,gBACI,KAAK,WAAa,EAClB,KAAK,MAAQ,EACb,KAAK,YAAc,EACnB,KAAK,gBAAkB,EAAY,UACnC,KAAK,eAAiB,GAAI,GAAK,eAAe,EAAO,KAAK,aAC1D,MAAsB,KAAK,sBAAsB,EAAY,SAExC,GACrB,KAAK,MAAQ,eAAe,EAAiB,GAC7C,KAAK,MAAQ,KAAK,MAAM,KAAK,KAAK,mBAAmB,KAAK,OAE9D,SAAe,UAAU,mBAAqB,cAC1C,MAAI,GAAE,MAAQ,EAAE,IACL,EAAE,OAAS,EAAE,OAEjB,EAAE,IAAM,EAAE,KAErB,EAAe,UAAU,sBAAwB,YAC7C,MAAO,GAAgB,IAAI,YACvB,MAAO,CACH,KAAM,EAAW,KACjB,OAAQ,EAAW,OACnB,IAAK,EAAW,IAChB,OAAQ,SAAS,GAAI,EAAW,YAI5C,EAAe,UAAU,gBAAkB,YACvC,YAAK,YAAc,EACZ,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,IAAM,KAEjE,EAAe,UAAU,YAAc,YACnC,MAAgB,KAAK,aACR,KAAK,WAAa,IACnB,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,KAAO,GAAa,EAAK,IAAM,IAC3F,YAAK,YAAc,EACZ,GAEX,EAAe,UAAU,eAAiB,YACtC,KAAK,YAAc,GAEhB,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAU,OAAO,GAAG,WAAY,EAAU,OAAO,GAAG,MAAM,OAAS,KAC9G,SAAM,GAAG,qBAAuB,EAAU,IAAK,EAAM,QAAS,GAC9D,EAAM,KAAK,EAAU,KACd,EAEX,SAAU,UAAU,eAAiB,WACjC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,KAAK,MAAQ,OAG5B,EAAU,UAAU,QAAU,YAC1B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,QACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAK,eAAe,gBAAiB,IAAK,KAAO,KAC5F,SAAM,UAAU,GAAK,IACd,EAEX,SAAc,UAAU,MAAQ,WAC5B,KAAK,OAAS,GACd,KAAK,QAAU,GACf,KAAK,MAAM,OAAO,aAAa,OAEnC,EAAc,UAAU,KAAO,WAC3B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,cAAe,IACf,WAAY,KAAK,KAAK,KAAK,QAE/B,KAAK,MAAQ,IACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAChE,EAAG,CAAE,MAAO,KAAK,aAAc,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAC5E,EAAG,CAAE,MAAO,OAAQ,SAAU,KAAM,KAAM,OAAO,KAAK,OAAO,OAAO,WAG5E,EAAc,UAAU,WAAa,WACjC,MAAO,MAAK,EAAI,OAAO,KAAK,IAAI,OAAS,OAAO,KAAK,IAAI,QAAQ,EAAG,KAExE,EAAc,UAAU,KAAO,WAC3B,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,QAAU,GAChB,EAAM,OAAS,OAIpB,GACT,OAAO,YAAY,YACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgC,YAC5B,UAAU,EAAY,GACtB,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAM,EAAW,iBAAmB,KAC/E,SAAM,UAAU,GAAK,IACd,EAEX,SAAW,aAAe,WACtB,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,gBAAiB,EACjB,OAAQ,UACR,OAAQ,CACJ,KAAM,EACN,QAAS,EACT,MAAO,kBACP,OAAQ,GACR,KAAM,MAIlB,EAAW,UAAU,KAAO,WACxB,MAAY,KACZ,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACjE,cAAe,IACf,WAAY,WACR,EAAM,UAGd,KAAK,MAAQ,IACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,KAClB,MAAO,IAEX,KAAK,MAAQ,OAAO,KAAK,IAAI,OAAS,EACtC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,MAAQ,GACpB,OAAQ,GACR,KAAM,MAGd,EAAW,UAAU,KAAO,WACxB,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,MAAO,IACP,WAAY,WACR,EAAM,cAIlB,EAAW,UAAU,UAAY,cAC7B,KAAK,GAAK,EAAQ,MAEf,GACT,OAAO,YAAY,MACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAM,EAAkB,iBAAmB,KACtF,SAAM,eAAe,KACrB,EAAM,UAAU,GAAK,IACd,EAEX,SAAkB,aAAe,WAC7B,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,gBAAiB,GACjB,OAAQ,UACR,MAAO,SACP,OAAQ,CACJ,KAAM,EACN,QAAS,GACT,MAAO,kBACP,OAAQ,GACR,KAAM,MAIlB,EAAkB,UAAU,KAAO,WAC/B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,QAAQ,MAEvE,MAAa,GACb,KAAK,GAAK,EACV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,KACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,EAAG,KAAK,EAAI,IAEhB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,CAAE,KAAM,IAAK,GAAI,MAGzB,GACT,OAAO,YAAY,MACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eACM,YACjC,UAAU,EAAiB,GAC3B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,oBAAsB,GAC5B,EAAM,KAAO,iBACb,EAAM,cACN,EAAM,QAAQ,GACd,EAAM,aACC,EAEX,SAAgB,UAAU,YAAc,WACpC,KAAK,SAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,mBACvD,KAAK,SAAS,MAAQ,GACtB,KAAK,SAAS,MAAQ,EACtB,KAAK,IAAI,KAAK,WAElB,EAAgB,UAAU,QAAU,YAChC,MAAc,EACR,KAAK,MAAM,MAAM,cACjB,KAAK,MAAM,MAAM,eACvB,KAAK,KAAO,GAAI,GAAK,kBAAkB,KAAK,MAAO,GACnD,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,WAAa,WACnC,GAAI,KAAK,MAAM,KAAK,eAAiB,EAAK,aAAa,OACnD,OAEJ,MAAc,KAAK,MAAM,IAAI,UAAU,YAAY,SAAS,EAAK,cAAc,6BAC/E,KAAK,QAAU,EAAQ,cAAc,CACjC,SAAU,KAAK,cACf,MAAO,oBACP,SAAU,IACV,OAAQ,GACR,MAAO,CAAE,MAAO,EAAG,IAAK,IAAK,MAAO,KAAK,qBACzC,MAAO,CAAE,MAAO,GAAK,IAAK,EAAG,KAAM,EAAa,YAChD,MAAO,CAAE,MAAO,GAAK,IAAK,GAC1B,MAAO,CAAE,IAAK,IAAK,IAAK,KACxB,GAAI,MAGZ,EAAgB,UAAU,YAAc,WACpC,MAAO,CACH,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,IACrC,SAAU,KAAK,oBACf,KAAM,SAGd,EAAgB,UAAU,KAAO,WAC7B,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,IACP,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,GACN,OAAQ,KAEZ,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,IACP,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,IACP,KAAM,GACN,WAAY,KAAK,gBAAgB,KAAK,QAE1C,KAAK,KAAK,OACV,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,eAEV,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,wBAEV,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,AAAI,EAAM,SACN,EAAM,QAAQ,QAAQ,EAAM,oBAAqB,EAAM,EAAG,EAAM,MAI5E,EAAgB,UAAU,gBAAkB,WACxC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KACR,OAAQ,KACR,KAAM,GACN,OAAQ,MAGhB,EAAgB,UAAU,WAAa,WACnC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,EACP,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,IACP,QAAS,EAAM,SACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,OAInB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,OAGf,EAAgB,UAAU,oBAAsB,WAC5C,MAAiB,KAAK,MAAM,QAAQ,KACpC,KAAK,aAAe,EAAW,GAC/B,MAAa,KAAK,mBAAmB,KACpB,EAAO,KAAO,IAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,KAAM,EACN,QAAS,EAAO,QAAU,GAAK,EAC/B,KAAM,GACN,WAAY,KAAK,0BAA0B,KAAK,KAAM,MAG9D,EAAgB,UAAU,mBAAqB,YAC3C,MAAY,OACC,KAAK,MAAM,QAAQ,MAChC,SAAO,QAAQ,EAAW,MAC1B,EAAO,UAAU,EAAW,QAAS,EAAW,SAChD,EAAO,OAAO,KAAK,MAAM,IAAI,YAAY,KAAK,OAAO,YAAkB,MAAO,KAAS,KAChF,GAEX,EAAgB,UAAU,0BAA4B,YAClD,KAAK,MAAM,QAAQ,OAAO,GAC1B,KAAK,aAAe,GAEjB,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,WAAY,mBAAqB,KAC5E,SAAM,aAAe,OACrB,EAAM,kBACN,EAAM,KAAK,EAAM,cACjB,EAAM,GAAG,qBAAuB,EAAM,aAAc,EAAM,QAAS,GAC5D,EAEX,SAAU,UAAU,gBAAkB,WAClC,KAAK,MAAM,MAAM,OAAO,CACpB,IAAK,KAAK,aACV,OAAQ,KAAK,MAAM,MAAM,cAAc,WAAY,cACnD,UAAW,MAGnB,EAAU,UAAU,QAAU,YAC1B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,QACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,iBACb,EAAM,UAAY,EAAM,kBACxB,EAAM,WACN,EAAM,cACC,EAEX,SAAa,UAAU,gBAAkB,WACrC,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,MAAO,SACP,OAAQ,CACJ,KAAM,EACN,QAAS,EACT,MAAO,kBACP,OAAQ,GACR,KAAM,MAIlB,EAAa,UAAU,SAAW,WAC9B,MAAc,KAAK,MAAM,MAAM,cACnB,SAAS,SAAS,GAAI,KAAK,WAAY,CAAE,SAAU,SAC/D,KAAK,MAAQ,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAChD,KAAK,MAAM,UAAU,GAAK,IAC1B,KAAK,MAAM,GAAK,GAChB,KAAK,IAAI,KAAK,QAElB,EAAa,UAAU,YAAc,WACjC,MAAc,OACF,SAAS,SAAS,GAAI,KAAK,WAAY,CAAE,SAAU,SAC/D,KAAK,SAAW,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACnD,KAAK,SAAS,UAAU,GAAK,IAC7B,KAAK,SAAS,GAAK,GACnB,KAAK,IAAI,KAAK,WAEX,GACT,OAAO,YAAY,WACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAoB,iBAAsB,oCAC3C,EAAsB,EAAK,qBAAwB,GAAK,oBAAsB,KACjF,MAAoC,YAChC,UAAU,EAAgB,GAC1B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,mBACb,EAAM,UAAY,EAAM,kBACxB,EAAM,WACN,EAAM,YACN,EAAM,gBACC,EAEX,SAAe,UAAU,gBAAkB,WACvC,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,gBAAiB,GACjB,OAAQ,UACR,MAAO,SACP,OAAQ,CACJ,KAAM,EACN,QAAS,EACT,MAAO,kBACP,OAAQ,GACR,KAAM,MAIlB,EAAe,UAAU,SAAW,WAChC,MAAc,KAAK,MAAM,MAAM,OAAO,GACtC,KAAK,MAAQ,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,KAAK,WACrD,KAAK,MAAM,UAAU,GAAK,IAC1B,KAAK,IAAI,KAAK,QAElB,EAAe,UAAU,UAAY,WACjC,MAAc,OACF,SAAS,SAAS,GAAI,KAAK,WAAY,CAAE,gBAAiB,KACtE,KAAK,OAAS,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACjD,KAAK,OAAO,UAAU,GAAK,IAC3B,KAAK,OAAO,EAAI,KAAK,MAAM,EAAI,GAC/B,KAAK,IAAI,KAAK,SAElB,EAAe,UAAU,cAAgB,WACrC,KAAK,WAAa,GAAI,GAAK,aAAa,KAAK,OAC7C,KAAK,WAAW,EAAI,KAAK,OAAO,EAAI,IACpC,KAAK,IAAI,KAAK,aAElB,EAAe,UAAU,MAAQ,WAC7B,KAAK,MAAQ,EACb,KAAK,MAAM,EAAI,EACf,KAAK,OAAO,EAAI,IAChB,KAAK,WAAW,EAAI,EACpB,KAAK,WAAW,EAAI,KAAK,OAAO,EAAI,IACpC,KAAK,WAAW,MAAQ,EACxB,KAAK,WAAW,MAAQ,GAE5B,EAAe,UAAU,WAAa,gBAClC,KAAK,gBAAgB,GACrB,KAAK,aAAa,GAClB,KAAK,WAAW,QAAU,GAE9B,EAAe,UAAU,gBAAkB,YACvC,MAAc,KAAK,wBAAwB,GAC3C,KAAK,MAAM,QAAQ,GACnB,KAAK,MAAM,QAAU,GAAgB,GAEzC,EAAe,UAAU,wBAA0B,YAC/C,MAAa,KAAK,MAAM,MAAM,SAClB,OAAO,KAAK,MAAM,EAAe,EAAG,EAAG,EAAO,OAAS,GACnE,MAAO,GAAO,IAElB,EAAe,UAAU,aAAe,YACpC,MAAc,IAAM,EAAO,WAC3B,KAAK,OAAO,QAAQ,GACpB,KAAK,OAAO,QAAU,EAAS,GAEnC,EAAe,UAAU,KAAO,WAC5B,MAAa,GACb,KAAK,SAAS,KAAK,MAAO,CAAC,GAC3B,KAAK,SAAS,KAAK,OAAQ,GAC3B,AAAI,KAAK,WAAW,QAChB,MAAK,iBACL,KAAK,mBAAmB,KACxB,KAAK,MAAM,KAAK,IAAI,UAAU,MAG9B,KAAK,MAAM,KAAK,YAAY,KAAM,KAAK,KAAM,KAAM,OAG3D,EAAe,UAAU,SAAW,cAChC,EAAK,GAAK,EACV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,EAAG,EAAK,EAAI,IAEhB,EAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,QAGzE,EAAe,UAAU,SAAW,cAChC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,CACC,MAAO,EAAK,EAAI,GAAK,OAAO,KAAK,KAAK,GACtC,KAAM,OAAO,KAAK,OAAO,MAAM,OAI3C,EAAe,UAAU,eAAiB,WACtC,MAAY,OACO,IACnB,KAAK,MAAM,KAAK,YAAY,EAAc,WACtC,EAAM,KAAK,EAAoB,iBAAkB,KAErD,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,WAAW,MAAQ,GACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,WAAY,CAAC,GAAK,IAClB,MAAO,KAGf,EAAe,UAAU,mBAAqB,YAC1C,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,OACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,MAAO,KACP,KAAM,GACN,QAAS,WACL,MAAuB,EAAM,OAAO,KAAK,MAAM,KAC3B,SAAS,GAC7B,EAAM,OAAO,QAAQ,IAAO,EAAgB,MAGpD,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,GACN,WAAY,WACR,EAAM,WAIlB,EAAe,UAAU,KAAO,WAC5B,KAAK,SAAS,KAAK,MAAO,IAC1B,KAAK,SAAS,KAAK,OAAQ,KAC3B,KAAK,iBACL,KAAK,MAAM,KAAK,YAAY,IAAK,KAAK,KAAM,KAAM,OAEtD,EAAe,UAAU,eAAiB,WACtC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,GACP,MAAO,KAGf,EAAe,UAAU,UAAY,cACjC,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,GAAK,EAAQ,MAEf,GACT,OAAO,YAAY,WACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA0C,WACtC,kBACI,KAAK,YAAc,GACnB,KAAK,MAAQ,EACb,KAAK,QAAU,EACf,KAAK,QAAQ,YAAY,GACzB,KAAK,UAAY,EACjB,KAAK,UAAU,GAAG,EAAK,eAAe,WAAY,KAAK,QAAS,MAChE,KAAK,UAAU,GAAG,EAAK,UAAU,MAAO,KAAK,KAAM,MACnD,KAAK,UAAU,GAAG,OAAO,YAAY,OAAO,QAAS,KAAK,QAAS,MAEvE,SAAqB,UAAU,KAAO,WAClC,KAAK,QAAQ,UACb,KAAK,QAAQ,GAAK,IAEtB,EAAqB,UAAU,QAAU,WACrC,GAAI,KAAK,YACL,OAEJ,KAAK,YAAc,GACnB,KAAK,QAAQ,UAEV,KAEX,EAAK,qBAAuB,IAC7B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eACO,WAClC,cACI,KAAK,MAAQ,EACb,KAAK,iBAAmB,KAAK,MAAM,KAAK,eAAiB,EAAK,aAAa,OAC3E,KAAK,YAAc,GACnB,KAAK,YAAc,KAAK,gBACxB,KAAK,oBAAsB,KAAK,cAAc,WAAY,EAAK,cAAc,2BAC7E,KAAK,mBAAqB,KAAK,cAAc,WAAY,EAAK,cAAc,qBAC5E,AAAI,KAAK,iBACL,KAAK,sBAGL,KAAK,iBAGb,SAAiB,UAAU,cAAgB,cACvC,AAAI,IAAY,QAAU,GAAU,YACpC,AAAI,IAAU,QAAU,GAAQ,EAAK,cAAc,WACnD,MAAc,KAAK,MAAM,IAAI,UAAU,GACvC,SAAQ,SAAS,GACjB,KAAK,YAAY,KAAK,GACf,GAEX,EAAiB,UAAU,eAAiB,WACxC,KAAK,SAAW,KAAK,YAAY,cAAc,CAC3C,SAAU,IACV,MAAO,CAAC,qBAAsB,sBAC9B,SAAU,CAAE,IAAK,IAAK,IAAK,KAC3B,OAAQ,GACR,MAAO,CAAE,IAAK,EAAG,IAAK,KACtB,OAAQ,CAAE,IAAK,EAAG,IAAK,KACvB,MAAO,CAAE,IAAK,GAAK,IAAK,GACxB,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,UACjC,MAAO,CAAE,IAAK,GAAI,IAAK,KACvB,GAAI,KAER,KAAK,YAAc,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,GAAI,MAAO,CAAE,MAAO,qBAAsB,MAAO,IAAK,MAAO,CAAE,MAAO,IAAM,IAAK,IAAO,SAAU,IAAK,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,GAAI,MACzP,KAAK,wBAA0B,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,GAAI,MAAO,CAAE,MAAO,CAAC,qBAAsB,sBAAuB,MAAO,CAAE,MAAO,IAAM,IAAK,KAAM,OAAQ,IAAQ,MAAO,CAAE,MAAO,IAAK,IAAK,IAAK,OAAQ,IAAQ,SAAU,CAAE,MAAO,IAAK,IAAK,IAAK,OAAQ,IAAQ,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,GAAI,MAClX,KAAK,UAAY,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,GAAI,MAAO,CAAE,MAAO,qBAAsB,MAAO,IAAK,MAAO,CAAE,MAAO,GAAK,IAAK,IAAO,SAAU,IAAK,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,GAAI,MACtP,KAAK,QAAU,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,GAAI,MAAO,CAAE,MAAO,iBAAkB,MAAO,IAAK,MAAO,CAAE,MAAO,IAAM,IAAK,IAAO,SAAU,IAAK,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,GAAI,MACjP,KAAK,OAAS,KAAK,YAAY,cAAc,CACzC,MAAO,YACP,SAAU,IACV,MAAO,CAAE,MAAO,IAAM,IAAK,IAAK,KAAM,EAAa,cACnD,MAAO,CAAE,MAAO,IAAM,IAAK,EAAG,KAAM,EAAa,aACjD,GAAI,KAER,KAAK,eAAiB,KAAK,8BAC3B,KAAK,cAAgB,KAAK,YAAY,cAAc,CAChD,SAAU,CACN,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,EAAK,SAAS,UAAY,GAC/D,KAAM,UAEV,MAAO,GACP,MAAO,mBACP,SAAU,CAAE,IAAK,IAAK,IAAK,KAC3B,MAAO,CAAE,MAAO,EAAG,IAAK,IACxB,MAAO,CAAE,MAAO,EAAG,IAAK,GACxB,GAAI,KAER,KAAK,UAAY,KAAK,mBAAmB,cAAc,CACnD,MAAO,cACP,SAAU,IACV,MAAO,CAAE,MAAO,GAAK,IAAK,IAAK,KAAM,OAAO,KAAK,aAAa,OAC9D,MAAO,CAAE,MAAO,GAAK,IAAK,GAC1B,GAAI,KAER,KAAK,mBAAqB,KAAK,mBAAmB,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,GAAI,EAAG,KAAS,CAAE,MAAO,kBAAmB,MAAO,IAAK,SAAU,IAAK,MAAO,CAAE,MAAO,GAAK,IAAK,IAAM,KAAM,OAAO,KAAK,aAAa,OAAS,MAAO,CAAE,MAAO,GAAK,IAAK,GAAK,GAAI,OAErT,EAAiB,UAAU,4BAA8B,WACrD,MAAqB,kBACjB,MAAI,OAAM,EAAS,SACf,GAAQ,EACR,EAAS,WAAa,OAAO,KAAK,IAAI,OAAS,KAEnD,GAAS,EAAS,WAClB,AAAI,EAAQ,GACR,GAAQ,GACR,EAAS,YAAc,IAEtB,AAAI,EAAQ,GACb,GAAQ,EACR,EAAS,YAAc,IAEpB,KAEI,CACX,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,EAAK,SAAS,UAAY,IAC/D,KAAM,UAEV,MAAO,MAAK,YAAY,cAAc,CAClC,MAAO,CAAC,MAAO,OAAQ,SAAU,SAAS,IAAI,YAAmB,MAAO,YAAc,IACtF,SAAU,CAAE,IAAK,IAAK,IAAK,KAC3B,OAAQ,CAAE,IAAK,KAAM,IAAK,KAC1B,OAAQ,CAAE,IAAK,KAAM,IAAK,KAC1B,OAAQ,CAAE,IAAK,EAAG,IAAK,KACvB,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,YAC9C,SAAU,IACV,OAAQ,CAAE,SAAU,GACpB,SAAU,EACV,GAAI,MAGZ,EAAiB,UAAU,oBAAsB,WAC7C,KAAK,SAAW,KAAK,qBACrB,KAAK,YAAc,KAAK,qBACxB,KAAK,wBAA0B,KAAK,qBACpC,KAAK,UAAY,KAAK,qBACtB,KAAK,QAAU,KAAK,qBACpB,KAAK,OAAS,KAAK,qBACnB,KAAK,cAAgB,KAAK,qBAC1B,KAAK,OAAS,KAAK,qBACnB,KAAK,eAAiB,KAAK,qBAC3B,KAAK,UAAY,KAAK,qBACtB,KAAK,mBAAqB,KAAK,sBAEnC,EAAiB,UAAU,2BAA6B,WACpD,MAAI,MAAK,iBACE,KAAK,qBAET,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,KAAM,CAAE,MAAO,qBAAsB,MAAO,GAAI,MAAO,CAAE,MAAO,GAAK,IAAK,IAAO,SAAU,IAAK,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,UAAW,IAAK,SAAU,EAAG,GAAI,OAEvQ,EAAiB,UAAU,yBAA2B,YAClD,MAAI,MAAK,iBACE,KAAK,qBAET,KAAK,YAAY,cAAc,SAAS,SAAS,GAAI,MAAM,aAAa,sBAAsB,KAAM,CAAE,MAAO,iBAAkB,MAAO,GAAI,MAAO,CAAE,MAAO,IAAM,IAAK,IAAO,SAAU,IAAK,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,UAAW,IAAK,SAAU,EAAG,GAAI,OAEpQ,EAAiB,UAAU,yBAA2B,YAClD,MAAI,MAAK,iBACE,KAAK,qBAET,KAAK,oBAAoB,cAAc,CAC1C,MAAO,kBACP,MAAO,IACP,SAAU,CAAE,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,EAAK,KAAK,OAAS,IAAM,KAAM,UAChF,MAAO,GACP,MAAO,CAAE,MAAO,EAAG,IAAK,GACxB,SAAU,CAAE,IAAK,IAAK,IAAK,KAC3B,UAAW,GACX,SAAU,EACV,OAAQ,EACR,GAAI,MAGZ,EAAiB,UAAU,sBAAwB,YAC/C,GAAI,KAAK,iBACL,MAAO,MAAK,qBAEhB,MAAa,EAAE,MAAM,EAAG,GAAG,IAAI,YAAiB,MAAO,uBAAyB,IAChF,MAAO,MAAK,mBAAmB,cAAc,CACzC,MAAO,EACP,OAAQ,CACJ,OAAQ,YACJ,MAAO,QAAO,KAAK,KAAK,EAAS,WAAW,SAAS,GAAK,MAGlE,OAAQ,CAAE,IAAK,IAAK,IAAK,IACzB,OAAQ,CAAE,MAAO,EAAG,IAAK,GAAK,OAAO,KAAK,IAAI,QAC9C,SAAU,CAAE,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,IAAK,KAAM,UAC5D,MAAO,CAAE,MAAO,IAAM,IAAK,GAAK,KAAM,OAAO,KAAK,aAAa,OAC/D,SAAU,CAAE,IAAK,KAAM,IAAK,MAC5B,MAAO,CAAE,MAAO,EAAG,IAAK,GACxB,UAAW,IACX,SAAU,EACV,OAAQ,KAGhB,EAAiB,UAAU,6BAA+B,YACtD,MAAI,MAAK,iBACE,KAAK,qBAET,KAAK,mBAAmB,cAAc,CACzC,SAAU,CACN,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,EAAK,gBAAgB,QAC1D,KAAM,UAEV,MAAO,mBACP,SAAU,IACV,MAAO,CAAE,MAAO,IAAK,IAAK,IAC1B,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,OAAQ,CACJ,OAAQ,WACJ,MAAO,QAAO,KAAK,IAAI,QAAQ,EAAG,MAEtC,SAAU,kBACN,MAAO,IAAS,IAGxB,OAAQ,EACR,UAAW,IACX,GAAI,MAGZ,EAAiB,UAAU,aAAe,YACtC,KAAK,YAAY,QAAQ,YAAqB,MAAQ,GAAQ,UAAY,KAE9E,EAAiB,UAAU,mBAAqB,WAC5C,MAAO,MAAK,YAAY,cAAc,CAClC,aAAc,EACd,GAAI,GACJ,OAAQ,GACR,QAAS,MAGjB,EAAiB,UAAU,QAAU,aAE9B,KAEX,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqC,WACjC,cACI,KAAK,MAAQ,EACb,KAAK,OAAS,KAAK,MAAM,OACzB,KAAK,MAAQ,KAAK,MAAM,OAAO,MAC/B,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,WAAa,GACxB,KAAK,MAAM,oBACX,KAAK,sBACL,KAAK,0BACL,KAAK,qBACL,KAAK,yBAET,SAAgB,UAAU,oBAAsB,WAC5C,KAAK,gBAAkB,CACnB,MAAO,KAAK,MAAM,UAAU,IAC5B,iBAAkB,KAAK,MAAM,UAAU,MAG/C,EAAgB,UAAU,wBAA0B,WAChD,KAAK,oBAAsB,CACvB,QAAS,KAAK,MAAM,eACpB,MAAO,KAAK,MAAM,eAClB,MAAO,KAAK,MAAM,eAClB,MAAO,KAAK,MAAM,eAClB,YAAa,KAAK,MAAM,eACxB,eAAgB,KAAK,MAAM,iBAGnC,EAAgB,UAAU,mBAAqB,WAC3C,KAAK,eAAiB,CAClB,CACI,KAAM,EAAK,aAAa,KACxB,KAAM,EAAK,aAAa,QACxB,SAAU,KAAK,MAAM,qBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,KACxB,KAAM,EAAK,aAAa,UACxB,SAAU,KAAK,MAAM,uBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,KACxB,KAAM,EAAK,aAAa,MACxB,SAAU,KAAK,MAAM,mBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,KACxB,KAAM,EAAK,aAAa,KACxB,SAAU,KAAK,MAAM,mBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,KACxB,KAAM,EAAK,aAAa,YACxB,SAAU,KAAK,MAAM,oBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,iBACxB,KAAM,EAAK,aAAa,KACxB,SAAU,KAAK,MAAM,qBACrB,gBAAiB,KAAK,OAE1B,CACI,KAAM,EAAK,aAAa,iBACxB,KAAM,EAAK,aAAa,MACxB,SAAU,KAAK,MAAM,sBACrB,gBAAiB,KAAK,SAIlC,EAAgB,UAAU,uBAAyB,WAC/C,KAAK,MAAM,GAAG,cAAe,KAAK,mBAAoB,MACtD,KAAK,MAAM,GAAG,YAAa,KAAK,gBAAiB,MACjD,KAAK,MAAM,GAAG,eAAgB,KAAK,mBAAoB,MACvD,KAAK,MAAM,GAAG,iBAAkB,KAAK,iBAAkB,OAE3D,EAAgB,UAAU,mBAAqB,WAC3C,MAAY,KACZ,KAAK,MAAM,MAAM,QAAQ,YAAkB,MAAO,GAAK,4BAA4B,EAAM,MAAM,KAAK,KAAK,UAE7G,EAAgB,UAAU,gBAAkB,YACxC,KAAK,MAAM,UAAU,QAAQ,EAAM,SAEvC,EAAgB,UAAU,mBAAqB,YAC3C,KAAK,MAAM,UAAU,WAAW,EAAM,SAE1C,EAAgB,UAAU,iBAAmB,YACzC,MAAY,KACZ,EAAM,MAAM,QAAQ,YAChB,MAAY,EAAU,QACV,EAAU,QACX,EAAM,OAAO,EAAK,iBAClB,EAAM,OAAO,EAAK,eAC7B,EAAM,eAAe,KAAK,YACtB,AAAI,EAAK,MAAQ,GAAQ,EAAK,OAAS,EACnC,EAAM,yBAAyB,EAAM,EAAO,EAAO,EAAW,GAE7D,AAAI,EAAK,OAAS,GAAQ,EAAK,OAAS,GACzC,EAAM,yBAAyB,EAAM,EAAO,EAAO,EAAW,QAK9E,EAAgB,UAAU,yBAA2B,oBACjD,UACY,GAAK,EAAM,cAAmB,MAAQ,IAAO,OAAS,EAAK,IAC3D,GAAK,EAAM,cAAmB,MAAQ,IAAO,OAAS,EAAK,EACvE,MAAO,GAAK,SAAS,KAAK,EAAK,gBAAiB,EAAM,EAAM,EAAW,IAE3E,EAAgB,UAAU,YAAc,WACpC,GAAI,KAAK,OAAO,OAAO,QAAU,GAC7B,OAEJ,KAAK,MAAM,UAAY,CAAC,KAAK,MAAM,UACnC,AAAI,KAAK,MAAM,YAAc,IACzB,KAAK,MAAM,aAAa,SAGhC,EAAgB,UAAU,OAAS,YAC/B,UAAa,EAAG,EAAI,KAAK,MAAM,YAAY,UAAW,IAClD,KAAK,MAAM,KAAK,IAGjB,KAEX,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqB,MAAM,iBACiB,WACxC,cACI,KAAK,MAAQ,EACb,KAAK,WAAa,KAAK,4BACvB,KAAK,SAAW,KAAK,0BACrB,KAAK,WAAa,KAAK,4BAE3B,SAAuB,UAAU,0BAA4B,WACzD,MAAO,IAAI,GAAe,KAAK,MAAO,CAClC,KAAM,aACN,WAAY,GACZ,MAAO,WACP,OAAQ,sBACR,gBAAiB,CACb,OAAQ,GACR,YAAa,IACb,UAAW,OAIvB,EAAuB,UAAU,wBAA0B,WACvD,MAAO,IAAI,GAAe,KAAK,MAAO,CAClC,KAAM,WACN,WAAY,GACZ,MAAO,WACP,OAAQ,kBACR,gBAAiB,CACb,OAAQ,GACR,YAAa,IACb,UAAW,OAIvB,EAAuB,UAAU,0BAA4B,WACzD,MAAO,IAAI,GAAe,KAAK,MAAO,CAClC,KAAM,aACN,WAAY,GACZ,MAAO,WACP,OAAQ,OACR,gBAAiB,CACb,UAAW,OAIvB,EAAuB,UAAU,QAAU,WACvC,KAAK,SAAS,aACd,KAAK,WAAW,aAChB,KAAK,WAAW,cAEb,KAEX,EAAK,uBAAyB,IAC/B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,WAC/B,cACI,KAAK,MAAQ,EACb,KAAK,YAAc,KAAK,MAAM,YAC9B,KAAK,kBACL,KAAK,yBACL,KAAK,yBACL,KAAK,uBACL,KAAK,4BACL,KAAK,sBAET,SAAc,UAAU,gBAAkB,WACtC,MAAY,OACE,KAAK,YAAY,QAClB,KAAK,YAAY,MAAM,OAAO,YAAkB,MAAO,GAAK,OAAS,EAAK,SAAS,mBAAqB,SACzG,EAAU,EACtB,KAAK,UAAY,EAAE,MAAM,EAAO,WAC5B,MAAO,GAAM,uBAGrB,EAAc,UAAU,kBAAoB,WACxC,MAAe,GAAI,GAAK,SAAS,KAAK,OACtC,SAAS,SAAS,EAAK,cAAc,YACrC,EAAS,QAAU,GACnB,EAAS,OAAS,GAClB,KAAK,MAAM,IAAI,SAAS,GACjB,GAEX,EAAc,UAAU,uBAAyB,WAC7C,MAAY,KACZ,KAAK,iBAAmB,EAAE,MAAM,KAAK,UAAU,OAAQ,YACnD,MAAe,EAAM,UAAU,GAC/B,MAAO,GAAM,wBAAwB,MAG7C,EAAc,UAAU,wBAA0B,YAC9C,MAAa,GAAI,GAAK,kBAAkB,KAAK,MAAO,GACpD,SAAO,SAAS,EAAK,cAAc,oBACnC,EAAO,QAAU,GACjB,EAAO,OAAS,GAChB,KAAK,MAAM,IAAI,SAAS,GACjB,GAEX,EAAc,UAAU,uBAAyB,WAC7C,KAAK,iBAAmB,KAAK,MAAM,IAAI,MAAM,CACzC,KAAM,qBACN,UAAW,EAAK,eAChB,eAAgB,YACZ,EAAK,SAAS,EAAK,cAAc,oBACjC,EAAK,QAAU,GACf,EAAK,OAAS,MAKtB,UAFU,EAAK,SAAS,QAAW,GAAK,SAAS,KAAO,KACvC,KAAK,MAAM,EAAM,OACrB,EAAG,EAAI,EAAY,IAC5B,KAAK,iBAAiB,UAG9B,EAAc,UAAU,qBAAuB,WAC3C,KAAK,eAAiB,KAAK,MAAM,IAAI,MAAM,CACvC,KAAM,mBACN,UAAW,EAAK,aAChB,eAAgB,YACZ,EAAK,SAAS,EAAK,cAAc,kBACjC,EAAK,UAIb,UADY,EAAK,SAAS,UACb,EAAG,EAAI,EAAO,IACvB,KAAK,eAAe,UAG5B,EAAc,UAAU,0BAA4B,WAChD,KAAK,oBAAsB,KAAK,MAAM,IAAI,MAAM,CAC5C,KAAM,wBACN,UAAW,EAAK,mBAChB,eAAgB,YACZ,EAAK,SAAS,EAAK,cAAc,sBACjC,EAAK,QAAU,GACf,EAAK,OAAS,MAKtB,UAFU,EAAK,SAAS,QAAW,GAAK,SAAS,KAAO,KACvC,KAAK,MAAM,EAAM,OACrB,EAAG,EAAI,EAAY,IAC5B,KAAK,oBAAoB,UAGjC,EAAc,UAAU,oBAAsB,WAC1C,KAAK,eAAiB,KAAK,MAAM,IAAI,MAAM,CACvC,KAAM,mBACN,UAAW,EAAK,cAChB,eAAgB,YACZ,EAAK,SAAS,EAAK,cAAc,iBACjC,EAAK,QAAU,GACf,EAAK,OAAS,MAMtB,UAHmB,KAAK,MAAM,MAAM,SAClB,KAAK,YAAY,MAAM,OAAO,YAAkB,MAAO,GAAK,OAAS,EAAK,SAAS,mBAAqB,SAC7G,GAAe,GAAe,IAC9B,EAAG,EAAI,EAAO,IACvB,KAAK,eAAe,UAGrB,KAEX,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA0C,WACtC,cACI,KAAK,MAAQ,EAEjB,SAAqB,UAAU,OAAS,YACpC,EAAE,SAAS,EAAS,CAChB,QAAS,WACT,MAAO,KAAK,oBAAoB,EAAQ,YAE5C,MAAW,KAAK,iBAAiB,GACjC,YAAK,UAAU,EAAM,GACrB,KAAK,MAAM,IAAI,SAAS,GACxB,KAAK,MAAM,QAAQ,GACnB,KAAK,gBAAgB,EAAM,EAAQ,OAAQ,EAAQ,KAC5C,GAEX,EAAqB,UAAU,oBAAsB,YACjD,MAAY,EAAK,aAAa,aAAa,GAC3C,MAAI,CAAC,EAGE,GAEX,EAAqB,UAAU,gBAAkB,gBAC7C,MAAW,KAAK,MAAM,KAAK,UAAU,EAAK,KAC9B,KAAK,iBAAiB,GAClC,OAAO,QAAQ,MAAM,GAAG,SAAS,EAAM,EAAM,IAEjD,EAAqB,UAAU,iBAAmB,YAC9C,MAAe,EAAK,WACR,EAAK,MAAM,KACvB,MAAI,KAAa,EAAK,SAAS,SACpB,KAAK,iBAAiB,GAE7B,IAAa,EAAK,SAAS,oBACpB,KAAK,qBAAqB,GAE9B,OAAO,QAAQ,MAAM,QAEhC,EAAqB,UAAU,iBAAmB,YAC9C,QACY,OAAO,QAAQ,QAChB,GAAK,GACZ,EAAG,EAAK,cAAc,mBAAqB,EAAM,YACjD,EAAG,EAAK,cAAc,oBAAsB,EAAM,aAClD,EAAG,EAAK,cAAc,gBAAkB,EAAM,SAC9C,EAAG,EAAK,cAAc,iBAAmB,EAAM,UAC/C,GACJ,MAAO,GAAI,IAAU,EAAM,QAE/B,EAAqB,UAAU,qBAAuB,YAClD,QACY,OAAO,QAAQ,QAChB,GAAK,GACZ,EAAG,EAAK,kBAAkB,UAAY,EAAM,SAC5C,EAAG,EAAK,kBAAkB,aAAe,EAAM,aAC/C,EAAG,EAAK,kBAAkB,YAAc,EAAM,cAC9C,EAAG,EAAK,kBAAkB,YAAc,EAAM,YAC9C,GACJ,MAAO,GAAI,IAAU,EAAM,QAE/B,EAAqB,UAAU,iBAAmB,YAC9C,OAAQ,EAAQ,cACP,GAAK,SAAS,gBACd,GAAK,SAAS,aACd,GAAK,SAAS,mBACd,GAAK,SAAS,cACd,GAAK,SAAS,cACd,GAAK,SAAS,gBACd,GAAK,SAAS,iBACd,GAAK,SAAS,kBACd,GAAK,SAAS,oBACf,MAAO,MAAK,YAAY,OACvB,GAAK,SAAS,iBACf,MAAO,IAAI,GAAK,gBAAgB,KAAK,MAAM,OAAO,MAAO,KAAK,MAAM,sBACnE,GAAK,SAAS,UACf,MAAO,IAAI,GAAK,UAAU,KAAK,MAAM,OAAO,MAAO,KAAK,MAAM,WAAW,WAAW,mBACnF,GAAK,SAAS,QACf,MAAO,IAAI,GAAK,QAAQ,KAAK,MAAM,OAAO,MAAO,KAAK,MAAM,WAAW,SAAS,uBAGhF,MAAO,QAGnB,EAAqB,UAAU,YAAc,YACzC,MAAwB,CACpB,SAAU,GACV,YAAa,EACb,SAAU,EACV,YAAa,EACb,eAAgB,GAEpB,EAAE,SAAS,EAAS,CAChB,OAAQ,OAAO,KAAK,IAAI,QAAQ,EAAG,IACnC,WAAY,SAAS,GAAI,KAE7B,MAAc,KAAK,MAAM,cAAc,EAAQ,OAC/C,GAAI,GACA,MAAY,KAAK,sBAAsB,KACpB,KAAK,gBAAgB,EAAO,EAAQ,QAAS,EAAQ,OACxE,EAAQ,WAAW,MAAQ,SAAS,GAAI,GACxC,EAAQ,WAAW,OAAS,CACxB,QAAS,GACT,QAAS,EACT,OAAQ,CACJ,QAAS,EAAa,EACtB,QAAS,EAAa,IAIlC,OAAQ,EAAQ,cACP,GAAK,SAAS,YACf,MAAO,IAAI,GAAK,WAAW,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBAC3G,GAAK,SAAS,SACf,MAAO,IAAI,GAAK,cAAc,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBAC9G,GAAK,SAAS,cACf,MAAO,IAAI,GAAK,aAAa,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBAC7G,GAAK,SAAS,oBACf,MAAO,IAAI,GAAK,kBAAkB,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBAClH,GAAK,SAAS,UACf,MAAO,IAAI,GAAK,SAAS,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBACzG,GAAK,SAAS,cACd,GAAK,SAAS,YACf,MAAO,IAAI,GAAK,iBAAiB,KAAK,MAAM,OAAO,MAAO,EAAQ,SAAU,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBACnI,GAAK,SAAS,eACf,MAAO,IAAI,GAAK,cAAc,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,gBAC9G,GAAK,SAAS,aACf,MAAO,IAAI,GAAK,YAAY,KAAK,MAAM,OAAO,MAAO,EAAQ,QAAS,EAAQ,MAAO,EAAQ,OAAQ,EAAQ,oBAG7G,MAAO,QAGnB,EAAqB,UAAU,sBAAwB,YACnD,MAAe,EAAK,SAAS,QAAQ,YAAqB,MAAO,GAAQ,WACzE,MAAO,CACH,KAAM,oBACN,MAAO,EAAK,MACZ,SAAU,IAGlB,EAAqB,UAAU,gBAAkB,gBAC7C,MAAe,EAAM,SAAS,SACnB,EAAE,MAAM,EAAU,KAAK,IACxB,EAAE,MAAM,EAAU,KAAK,IACjB,KAAK,MAAM,SAAS,SAAS,EAAS,GACtD,MAAO,CAAE,EAAG,EAAO,EAAU,MAAQ,EAAU,OAAQ,EAAG,EAAM,EAAU,OAAS,EAAU,SAEjG,EAAqB,UAAU,UAAY,cACvC,OAAQ,EAAQ,cACP,GAAK,SAAS,gBACd,GAAK,SAAS,aACd,GAAK,SAAS,oBACf,KAAK,WAAW,EAAM,GACtB,UACC,GAAK,SAAS,cACd,GAAK,SAAS,cACd,GAAK,SAAS,YACf,KAAK,WAAW,EAAM,GACtB,KAAK,cAAc,EAAM,GACzB,UACC,GAAK,SAAS,aACf,KAAK,WAAW,EAAM,GACtB,KAAK,iBAAiB,EAAM,GAC5B,UACC,GAAK,SAAS,eACf,KAAK,WAAW,EAAM,GACtB,KAAK,mBAAmB,EAAM,GAC9B,UACC,GAAK,SAAS,cACf,KAAK,WAAW,EAAM,GACtB,KAAK,kBAAkB,GACvB,WACC,GAAK,SAAS,QACf,KAAK,aAAa,EAAM,GACxB,UACC,GAAK,SAAS,UACf,KAAK,eAAe,EAAM,GAC1B,UACC,GAAK,SAAS,iBACf,KAAK,qBAAqB,EAAM,GAChC,cAEA,MAER,MAAO,IAEX,EAAqB,UAAU,WAAa,cACxC,SAAM,GAAG,EAAK,gBAAgB,IAAK,KAAK,MAAM,WAAY,KAAK,OAC/D,EAAM,GAAG,EAAK,cAAc,MAAO,KAAK,MAAM,qBAAsB,KAAK,OACzE,EAAM,GAAG,EAAK,cAAc,KAAM,KAAK,MAAM,oBAAqB,KAAK,OACvE,EAAM,GAAG,EAAK,YAAY,OAAQ,KAAK,MAAM,cAAe,KAAK,OACjE,EAAM,GAAG,EAAK,YAAY,KAAM,KAAK,MAAM,YAAa,KAAK,OAC7D,EAAM,SAAS,EAAK,cAAc,OAElC,KAAK,MAAM,kBAAkB,GAC7B,KAAK,MAAM,sBAAsB,GACjC,KAAK,MAAM,aAAa,GACjB,GAEX,EAAqB,UAAU,cAAgB,cAE3C,EAAS,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,MAAM,YAAY,WAAY,KAAK,MAAM,aAC/F,KAAK,MAAM,mBAAmB,GAC9B,KAAK,MAAM,YAAY,QAAQ,IAEnC,EAAqB,UAAU,iBAAmB,cAC9C,EAAO,GAAG,EAAK,YAAY,QAAS,KAAK,MAAM,kBAAmB,KAAK,QAE3E,EAAqB,UAAU,mBAAqB,cAChD,EAAS,GAAG,EAAK,mBAAmB,QAAS,KAAK,MAAM,uBAAwB,KAAK,QAEzF,EAAqB,UAAU,kBAAoB,YAC/C,EAAa,GAAG,EAAK,kBAAkB,QAAS,KAAK,MAAM,sBAAuB,KAAK,QAE3F,EAAqB,UAAU,aAAe,cAC1C,EAAQ,SAAS,EAAK,cAAc,UACpC,EAAQ,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,MAAM,YAAY,WAAY,KAAK,MAAM,aAC9F,EAAQ,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,wBAAyB,MAC9E,KAAK,MAAM,sBAAsB,GACjC,KAAK,MAAM,YAAY,QAAQ,IAEnC,EAAqB,UAAU,wBAA0B,YACrD,KAAK,MAAM,WAAW,SAAS,cAAc,EAAQ,YAEzD,EAAqB,UAAU,eAAiB,cAC5C,EAAU,SAAS,EAAK,cAAc,YACtC,EAAU,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,MAAM,mBAAoB,KAAK,OACtF,KAAK,MAAM,wBAAwB,IAEvC,EAAqB,UAAU,qBAAuB,cAElD,EAAK,kBAAkB,KAAK,MAAM,SAAS,gBAAgB,kBAC3D,KAAK,MAAM,0BAA0B,IAEzC,EAAqB,UAAU,qBAAuB,YAClD,MAAe,EAAK,SACpB,GAAI,MAAO,IAAa,YAEpB,OAEJ,OAAQ,OACC,GAAK,SAAS,cACd,GAAK,SAAS,cACd,GAAK,SAAS,YAEf,EAAK,cACL,UACC,GAAK,SAAS,UAEf,EAAK,8BACL,UACC,GAAK,SAAS,QAEf,EAAK,8BACL,UACC,GAAK,SAAS,iBAEf,EAAK,kBACL,cAEA,QAGL,KAEX,EAAK,qBAAuB,IAC7B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,WAChC,cACI,KAAK,MAAQ,EACb,KAAK,OAAS,KAAK,MAAM,QAAQ,KAErC,SAAe,UAAU,OAAS,WAC9B,MAAY,KAAK,mBACC,KAAK,MAAM,kBACV,KAAK,MAAM,iBAC9B,KAAK,OAAO,YAAY,EAAG,EAAG,EAAK,OAAO,WAAY,EAAK,OAAO,aAClE,KAAK,OAAO,QAAQ,GACpB,KAAK,OAAO,QAAU,CAAE,GAAK,OAAO,WAAa,GAAe,EAChE,KAAK,OAAO,QAAU,CAAE,GAAK,OAAO,YAAc,GAAgB,GAEtE,EAAe,UAAU,eAAiB,WACtC,MAAe,EAAK,OAAO,WAAa,KACxB,KAAK,yBACR,EAAW,KAAK,MAAM,kBACtB,EAAY,KAAK,MAAM,iBACpC,MAAO,MAAK,IAAI,EAAQ,IAE5B,EAAe,UAAU,qBAAuB,WAC5C,MAAU,KAAK,MAAM,IAAI,SAAS,qBACrB,EAAK,OAAO,YAAc,IAC1B,EAAS,EACtB,MAAO,GAAS,KAEpB,OAAO,eAAe,EAAe,UAAW,OAAQ,CACpD,IAAK,WACD,MAAO,MAAK,OAAO,MAEvB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAe,UAAW,IAAK,CACjD,IAAK,WACD,MAAO,MAAK,OAAO,GAEvB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAe,UAAW,IAAK,CACjD,IAAK,WACD,MAAO,MAAK,OAAO,GAEvB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAe,UAAW,SAAU,CACtD,IAAK,WACD,MAAO,MAAK,OAAO,QAEvB,WAAY,GACZ,aAAc,KAElB,EAAe,UAAU,WAAa,WAClC,MAAU,GAAK,OAAO,WAAa,KAAK,MAAM,gBAAkB,KAAK,MAAQ,IACnE,GAAK,OAAO,YAAc,KAAK,MAAM,iBAAmB,KAAK,MAAQ,EAC/E,MAAO,CAAE,EAAG,EAAG,EAAG,IAEf,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgB,OAAO,QAAQ,OAAO,SAC3B,EAAU,OACR,EAAU,SACR,EAAU,WACZ,EAAU,SACV,EAAU,SACR,EAAU,WACc,WACnC,cACI,KAAK,UAAY,EAAK,KAAK,YAAc,EACzC,KAAK,MAAQ,EACb,KAAK,8BACL,KAAK,gBACL,KAAK,WACL,KAAK,6BACL,KAAK,UACL,KAAK,OAAS,GACd,KAAK,oBAAsB,GAE/B,SAAkB,UAAU,4BAA8B,WACtD,MAA4B,EAAU,KAAK,GAC3C,EAAO,SAAS,GAChB,EAAO,IAAI,EAAW,IAE1B,EAAkB,UAAU,cAAgB,WACxC,EAAS,eAAiB,EAC1B,EAAS,sBAAwB,GAErC,EAAkB,UAAU,SAAW,WACnC,MAAa,SAAS,SAAS,GAAI,EAAK,aAAa,mBAAmB,QAAS,CAAE,mBAAoB,EAAG,mBAAoB,IAC9H,KAAK,MAAQ,GAAI,QAAO,QAAQ,OAAO,MAAM,KAAK,MAAO,GACzD,KAAK,MAAM,WAAa,GACxB,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,KAAK,MAAM,OAAQ,KAAK,OAC1E,KAAK,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,YAAa,KAAK,MAAM,WAAe,KAAK,QAE1F,EAAkB,UAAU,2BAA6B,WAErD,EAAO,IAAI,KAAK,MAAM,OAAQ,gBAC9B,EAAO,IAAI,KAAK,MAAM,OAAQ,eAC9B,EAAO,IAAI,KAAK,MAAM,OAAQ,mBAC9B,EAAO,IAAI,KAAK,MAAM,OAAQ,iBAElC,EAAkB,UAAU,QAAU,WAClC,KAAK,KAAO,EAAO,OAAO,EAAG,EAAG,EAAK,KAAK,OAAQ,EAAK,KAAK,aAC5D,KAAK,KAAK,kBAAoB,KAAK,cAAc,KAAK,MACtD,KAAK,MAAM,IAAI,KAAK,MACpB,EAAK,WAAW,KAAK,KAAM,UAC3B,KAAK,UAAY,EAAK,KAAK,YAAc,GACzC,KAAK,aAAe,CAAE,EAAG,EAAG,EAAG,IAEnC,EAAkB,UAAU,cAAgB,YACxC,GAAI,KAAK,kBAAoB,EACzB,OAEJ,KAAK,oBAAoB,KAAK,CAAE,EAAG,KAAK,KAAK,SAAS,EAAG,EAAG,KAAK,KAAK,SAAS,IAC/E,MAAa,EAAK,MAAM,QACX,EAAK,MAAM,MACxB,GAAI,IAAW,EAAK,aAAa,OAAS,IAAW,EAAK,aAAa,OACnE,KAAK,cAAgB,GACrB,OAEJ,GAAI,IAAW,EAAK,aAAa,MAAQ,IAAW,EAAK,aAAa,MAClE,KAAK,cAAgB,GACrB,SAGR,EAAkB,UAAU,QAAU,YAClC,GAAI,EAAK,WAAa,IAAS,EAAK,SAChC,OAEJ,MAAc,EAAO,aAAa,EAAK,SAAS,EAAG,EAAK,SAAS,EAAG,EAAK,SAAU,CAC/E,YAAa,EAAK,YAClB,SAAU,EAAK,SACf,SAAU,EAAK,SACf,YAAa,EAAK,YAClB,eAAgB,EAAK,eACrB,aAAc,EAAK,aACnB,MAAO,EAAK,MACZ,QAAS,EAAK,QACd,MAAO,EAAK,QAEhB,EAAQ,aAAe,EACvB,KAAK,MAAM,IAAI,GACf,KAAK,OAAO,KAAK,IAErB,EAAkB,UAAU,WAAa,YACrC,MAAY,KAAK,OAAO,UAAU,YAAkB,MAAO,GAAK,eAAiB,IACjF,AAAI,EAAQ,IACR,MAAK,MAAM,OAAO,KAAK,OAAO,IAC9B,KAAK,OAAO,GAAO,aAAe,KAClC,KAAK,OAAO,OAAO,EAAO,KAGlC,EAAkB,UAAU,oBAAsB,kBAC9C,EAAK,YAAY,KAAK,KAAM,CAAE,EAAG,EAAQ,EAAG,IAC5C,EAAK,YAAY,KAAK,KAAM,CAAE,EAAG,KAAK,IAAI,GAAY,KAAK,UAAW,EAAG,KAAK,IAAI,GAAY,KAAK,YACnG,KAAK,cAAgB,GACrB,KAAK,oBAAoB,OAAS,EAClC,KAAK,OACL,KAAK,aAEL,UADkB,IACX,EAAE,EAAc,GACnB,OAAK,gBAAkB,EACvB,KAAK,MAAM,OAEP,KAAK,gBAGT,GAAI,KAAK,oBAAoB,QAAU,EACnC,MAGR,MAAO,MAAK,qBAEhB,EAAkB,UAAU,KAAO,WAC/B,MAAY,KACZ,KAAK,OAAO,QAAQ,YAChB,MAAmB,EAAK,eACC,EAAM,gBAAgB,EAAa,SAAU,EAAK,YAAc,GACzF,AAAI,GACA,CAAI,EAAa,WACb,EAAK,YAAY,EAAM,CAAE,EAAG,EAAa,SAAS,EAAG,EAAG,EAAa,YAGrE,EAAK,YAAY,EAAM,EAAa,WAG5C,AAAI,EAAa,OAAO,UACpB,EAAK,YAAY,EAAM,EAAa,UAExC,AAAI,EAAa,OAAO,YACpB,EAAK,SAAS,EAAM,EAAa,UAI7C,EAAkB,UAAU,gBAAkB,cAC1C,MAAO,QAAO,KAAK,MAAM,MAAM,EAAE,EAAG,EAAE,IAAM,OAAO,KAAK,MAAM,MAAM,EAAE,EAAG,EAAE,IAE/E,EAAkB,UAAU,WAAa,WACrC,KAAK,OAAO,QAAQ,YAAkB,MAAO,GAAS,IAAI,EAAM,OAEpE,EAAkB,UAAU,qBAAuB,WAC/C,MAAuB,KAAK,MAAM,KAAK,KAAK,SAAS,EAAG,KAAK,KAAK,SAAS,GAC3E,KAAK,aAAa,EAAI,KAAK,IAAI,GAAoB,KAAK,UACxD,KAAK,aAAa,EAAI,KAAK,IAAI,GAAoB,KAAK,UACxD,EAAK,YAAY,KAAK,KAAM,KAAK,eAErC,EAAkB,UAAU,iBAAmB,WAC3C,GAAI,KAAK,MAAM,WACX,KAAK,sBAGL,MAAY,KAAK,MAAM,IAAI,qBACjB,KAAK,MAAM,MAAM,cAAc,iBAAiB,KAAK,MAAM,OAAO,UAC7D,OAAO,KAAK,MAAM,cAAc,EAAO,GACtD,KAAK,gBAAgB,EAAM,EAAG,EAAM,EAAG,KAG/C,EAAkB,UAAU,gBAAkB,gBAC1C,MAAe,CACX,EAAG,KAAK,IAAI,GAAY,KAAK,UAC7B,EAAG,KAAK,IAAI,GAAY,KAAK,WAEjC,EAAK,YAAY,KAAK,KAAM,CAAE,EAAG,EAAG,EAAG,IACvC,EAAK,YAAY,KAAK,KAAM,GAC5B,KAAK,MAAM,WAAa,GACxB,KAAK,MAAM,UAAY,IAE3B,EAAkB,UAAU,eAAiB,WACzC,KAAK,MAAM,WAAa,GACxB,KAAK,MAAM,UAAY,GACvB,KAAK,MAAM,aAAa,SAE5B,EAAkB,UAAU,QAAU,WAClC,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,MAAM,OAAQ,KAAK,OAC3E,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,YAAa,KAAK,MAAM,WAAe,KAAK,OACvF,KAAK,MAAM,WAER,KAEX,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,WAC/B,cACI,KAAK,MAAQ,EACb,KAAK,MAAQ,KAAK,MAAM,MACxB,KAAK,WAAa,KAAK,MAAM,MAAM,MACnC,KAAK,UAAY,KAAK,MAAM,KAAK,YAAc,EAAK,iBAAiB,UACrE,KAAK,cAAgB,KAAK,sBAC1B,KAAK,sBAET,SAAc,UAAU,oBAAsB,WAC1C,MAAY,OACD,CAAC,EAAK,aAAa,WAAY,EAAK,aAAa,WAAY,EAAK,aAAa,YAC1F,MAAO,GAAK,OAAO,YAAiB,MAAO,GAAM,MAAM,MAAM,MAAM,IAAI,MAE3E,EAAc,UAAU,oBAAsB,WAC1C,KAAK,UAAY,KAAK,cAAc,EAAK,aAAa,WAAY,CAAE,OAAQ,MAC5E,KAAK,QAAU,EAAE,SAAS,KAAK,YAAY,KAAK,MAAO,IAAK,CAAE,SAAU,KACxE,KAAK,mBAAqB,KAAK,cAAc,EAAK,aAAa,aAAc,CAAE,OAAQ,MACvF,KAAK,oBAAsB,KAAK,cAAc,EAAK,aAAa,gBAAiB,CAAE,OAAQ,MAC3F,KAAK,SAAW,KAAK,cAAc,EAAK,aAAa,UAAW,CAAE,OAAQ,KAAQ,CAAE,KAAM,MAC1F,KAAK,SAAW,KAAK,cAAc,EAAK,aAAa,aAAc,CAAE,OAAQ,MAC7E,KAAK,mBAAqB,KAAK,cAAc,EAAK,aAAa,uBAAwB,CAAE,OAAQ,KACjG,KAAK,qBAAuB,KAAK,cAAc,EAAK,aAAa,gBAAiB,CAAE,OAAQ,MAC5F,KAAK,OAAS,KAAK,cAAc,EAAK,aAAa,OAAQ,CAAE,OAAQ,OACrE,KAAK,UAAY,KAAK,cAAc,EAAK,aAAa,UAAW,CAAE,OAAQ,KAC3E,KAAK,QAAU,KAAK,cAAc,EAAK,aAAa,QAAS,CAAE,OAAQ,MACvE,KAAK,UAAY,KAAK,cAAc,EAAK,aAAa,UAAW,CAAE,OAAQ,MAC3E,KAAK,mBAAqB,KAAK,cAAc,EAAK,aAAa,MAAO,CAAE,OAAQ,GAAK,CAAE,SAAU,KACjG,KAAK,aAAe,KAAK,cAAc,EAAK,aAAa,sBAAuB,CAAE,OAAQ,MAE9F,EAAc,UAAU,YAAc,WAClC,GAAI,KAAK,YAAc,GACnB,OAEJ,GAAI,KAAK,cAAc,SAAW,EAC9B,OAEJ,MAAU,OAAO,KAAK,IAAI,KAAK,KAAK,eACpC,KAAK,MAAM,KAAK,EAAK,CAAE,OAAQ,OAEnC,EAAc,UAAU,cAAgB,gBACpC,MAAY,KACZ,MAAI,MAAK,YAAc,GACZ,EAAE,KAEb,GAAkB,SAAS,CAAE,KAAM,IAAK,SAAU,IAAS,GACpD,EAAE,SAAS,WACd,EAAM,UAAU,EAAK,IACtB,EAAgB,KAAM,KAE7B,EAAc,UAAU,UAAY,cAChC,MAAuB,KAAK,WAAW,IAAI,GAC3C,AAAI,GACA,KAAK,MAAM,KAAK,EAAK,IAG7B,EAAc,UAAU,QAAU,aAE3B,KAEX,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eAE/B,AAAC,aACG,EAAa,SAAc,qBAC5B,EAAe,EAAK,cAAiB,GAAK,aAAe,KAC5D,MAA6B,YACzB,UAAU,EAAS,GACnB,cACI,MAAY,EAAO,KAAK,KAAM,EAAM,OAAO,MAAO,EAAG,EAAG,WAAY,wBAA0B,KAC9F,EAAM,WAAa,GACnB,EAAM,gBAAkB,GACxB,EAAM,KAAO,UACb,EAAM,SAAW,EAAM,MACvB,EAAM,YAAc,GACpB,EAAM,YACN,EAAM,eACN,MAA0B,EAAM,SAAS,SAAS,oBAClD,SAAM,wBAAwB,EAAoB,OAClD,EAAM,wBAAwB,EAAoB,OAC3C,EAEX,SAAQ,UAAU,UAAY,WAC1B,MAAa,GACb,KAAK,UAAU,EAAQ,CACnB,SAAU,GACV,cAAe,GACf,SAAU,EACV,YAAa,EACb,eAAgB,EAChB,OAAQ,CACJ,OAAQ,CACJ,QAAS,CAAC,KAAK,QAAW,EAAS,KAAK,WAKxD,EAAQ,UAAU,aAAe,WAG7B,GAFA,KAAK,UAAY,KAAK,MAAM,IAAI,UAAU,YAC1C,KAAK,UAAU,SAAS,EAAK,cAAc,yBACvC,KAAK,MAAM,KAAK,eAAiB,EAAK,aAAa,QACnD,KAAK,cAAgB,KAAK,SAAS,SAAS,qBAC5C,KAAK,aAAe,KAAK,SAAS,SAAS,qBAC3C,OAEJ,KAAK,cAAgB,KAAK,UAAU,cAAc,CAC9C,MAAO,CAAC,cACR,SAAU,CAAE,IAAK,IAAK,IAAK,KAC3B,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,QAC9C,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,YAC9C,SAAU,EACV,UAAW,GACX,OAAQ,CAAE,IAAK,IAAK,IAAK,KACzB,OAAQ,CAAE,IAAK,KAAM,IAAK,KAC1B,GAAI,KAER,KAAK,aAAe,KAAK,UAAU,cAAc,CAC7C,MAAO,CAAC,gBACR,SAAU,IACV,MAAO,CAAE,MAAO,GAAK,IAAK,EAAG,KAAM,EAAa,QAChD,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,cAC9C,SAAU,EACV,OAAQ,CAAE,IAAK,EAAG,IAAK,KACvB,UAAW,GACX,OAAQ,CAAE,IAAK,IAAK,IAAK,KACzB,OAAQ,CAAE,IAAK,KAAM,IAAK,OAE9B,KAAK,aAAa,YAAY,KAAM,KAAK,MAAQ,MAGrD,EAAQ,UAAU,OAAS,WACvB,KAAK,WAAa,GAClB,KAAK,UAAY,KAAK,EACtB,MAAQ,SAAW,KAAK,MAAM,KAAK,KAAK,MACxC,KAAK,aAAa,IAAM,GACxB,KAAK,cAET,EAAQ,UAAU,WAAa,WAC3B,MAAS,GACT,KAAK,GAAK,EACV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,KAAK,EAAI,EAAK,EACjB,KAAM,GACN,OAAQ,MAGhB,EAAQ,UAAU,UAAY,cAC1B,MAAY,KACZ,GAAI,KAAK,aAAe,GACpB,OAEJ,KAAK,cAAc,QAAQ,EAAG,KAAK,EAAI,KAAK,aAAe,EAAG,KAAK,GACnE,AAAI,KAAK,EAAI,CAAC,KAAK,SAAS,OAAO,aAAa,EAAI,KAChD,MAAK,aAAa,GAAK,GACvB,KAAK,aAAa,aAClB,KAAK,WAAa,GAClB,KAAK,KAAK,EAAa,SAAU,MACjC,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,cAIlB,EAAQ,UAAU,QAAU,YACxB,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,KAAK,UAAU,QAAQ,GACvB,KAAK,YAAY,OAAS,EAC1B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,QAAU,IAChB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eAE/B,AAAC,aACG,EAAU,OAAY,gBACvB,EAAY,EAAK,WAAc,GAAK,UAAY,KACnD,MAA0B,YACtB,UAAU,EAAM,GAChB,cACI,MAAY,EAAO,KAAK,KAAM,EAAM,OAAO,MAAO,EAAG,EAAG,WAAY,qBAAuB,KAC3F,SAAM,WAAa,GACnB,EAAM,gBAAkB,EAAK,SAAS,UAAY,KAClD,EAAM,SAAW,EAAM,MACvB,EAAM,KAAO,UACb,EAAM,YACN,EAAM,eACC,EAEX,SAAK,UAAU,UAAY,WACvB,QACa,GACb,KAAK,UAAU,EAAQ,CACnB,OAAS,GAAK,GAAI,EAAG,EAAK,eAAiB,EAAK,aAAa,KAAM,GACnE,gBAAiB,CACb,KAAM,KAAK,SAAS,SAAS,oBAAoB,aAErD,SAAU,EACV,YAAa,EACb,eAAgB,EAChB,OAAQ,CACJ,OAAQ,CACJ,QAAS,CAAC,KAAK,QAAU,KACzB,QAAS,KAAK,QAAW,EAAS,KAAK,OAAU,SAKjE,EAAK,UAAU,aAAe,WAC1B,KAAK,UAAY,KAAK,MAAM,IAAI,UAAU,YAC1C,KAAK,cAAgB,KAAK,UAAU,cAAc,CAC9C,MAAO,CAAC,cACR,SAAU,IACV,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,QAC9C,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,YAC9C,SAAU,EACV,UAAW,GACX,MAAO,IACP,GAAI,KAER,KAAK,mBAAqB,KAAK,MAAM,IAAI,UAAU,EAAG,EAAG,CAAC,KAAK,YAC/D,KAAK,mBAAmB,SAAS,EAAK,cAAc,0BAExD,EAAK,UAAU,SAAW,cACtB,KAAK,WAAa,GAClB,KAAK,OAAS,CAAE,EAAG,EAAG,EAAG,GACzB,KAAK,YAAc,EACnB,KAAK,wBACL,KAAK,cAAc,GAAK,GACxB,KAAK,iBACL,KAAK,cAET,EAAK,UAAU,eAAiB,WAC5B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KAGf,EAAK,UAAU,WAAa,WACxB,MAAgB,OAAO,KAAK,IAAI,OAChC,KAAK,mBAAmB,KAAQ,GAChC,KAAK,SAAS,IAAM,GACpB,MAAQ,SAAW,KAAK,MAAM,KAAK,KAAK,MACxC,KAAK,WAAW,CAAE,EAAG,EAAG,EAAG,KAAQ,KAEvC,EAAK,UAAU,UAAY,cACvB,GAAI,KAAK,aAAe,GACpB,OAEJ,KAAK,cACL,KAAK,wBACL,KAAK,qBACL,KAAK,kBAAkB,IAE3B,EAAK,UAAU,YAAc,WACzB,MAAe,MACA,EACf,KAAK,MAAQ,OAAO,KAAK,UAAU,KAAK,KAAK,SAAS,EAAG,IAAK,EAAG,EAAU,GAC3E,KAAK,MAAQ,OAAO,KAAK,MAAM,KAAK,MAAO,EAAU,IAEzD,EAAK,UAAU,sBAAwB,WACnC,MAAa,GAAK,KAAK,QACR,OAAO,KAAK,SAAS,KAAK,MAAQ,MACxC,EAAS,KAAK,IAAI,KAClB,EAAS,KAAK,IAAI,KACf,KAAK,EAAI,IACT,KAAK,EAAI,EACrB,KAAK,mBAAmB,EAAI,EAC5B,KAAK,mBAAmB,EAAI,EAC5B,KAAK,mBAAmB,MAAQ,KAAK,OAEzC,EAAK,UAAU,mBAAqB,WAChC,AAAI,KAAK,EAAI,KAAK,OAAO,GAAK,KAAK,KAAK,SAAS,EAAI,GACjD,MAAK,WAAa,GAClB,KAAK,KAAK,EAAU,OAAQ,MAC5B,KAAK,YAGb,EAAK,UAAU,kBAAoB,YAC/B,KAAK,aAAe,EACpB,AAAI,KAAK,YAAc,KACnB,MAAK,WAAa,GAClB,KAAK,KAAK,EAAU,OAAQ,MAC5B,KAAK,YAGb,EAAK,UAAU,QAAU,YACrB,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,MAEnC,KAAK,UAAU,QAAQ,GACvB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,QAAQ,OAAO,OACxB,EAAK,KAAO,IACb,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA6B,YACzB,UAAU,EAAS,GACnB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAClB,EAAM,KAAO,OACb,EAAM,cACN,EAAM,UACN,EAAM,UACC,EAEX,SAAQ,UAAU,YAAc,WAC5B,KAAK,SAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,aACvD,KAAK,IAAI,KAAK,WAElB,EAAQ,UAAU,aAAe,WAC7B,MAAY,KACZ,KAAK,SAAS,SACd,KAAK,SAAS,MAAQ,GACtB,KAAK,SAAS,MAAQ,EACtB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,MAAO,CAAE,MAAO,EAAG,KAAM,OAAO,KAAK,OAAO,KAAK,KACjD,MAAO,CAAE,MAAO,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KACnD,WAAY,WACR,EAAM,SAAS,WAI3B,EAAQ,UAAU,QAAU,WACxB,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,oBACnD,KAAK,IAAI,KAAK,OAElB,EAAQ,UAAU,QAAU,WACxB,MAAc,KAAK,UAAU,WAC7B,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,kBAAmB,EAAS,IAC5F,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,KAAK,KAAK,MAAQ,EAChC,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,GACjC,KAAK,KAAK,UAAY,KAAK,KAAK,EAChC,KAAK,IAAI,KAAK,OAElB,EAAQ,UAAU,eAAiB,YAC/B,KAAK,UAAY,EACjB,KAAK,kBACL,KAAK,uBAET,EAAQ,UAAU,gBAAkB,WAChC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,IACP,KAAM,GACN,WAAY,WACR,EAAM,mBAIlB,EAAQ,UAAU,oBAAsB,WACpC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,cAAe,IACf,WAAY,WACR,EAAM,KAAK,QAAQ,EAAM,UAAU,YACnC,EAAM,KAAK,MAAQ,IACnB,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,KACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,IAEX,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,KACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,QAKvB,EAAQ,UAAU,KAAO,WACrB,KAAK,MAAQ,IACb,KAAK,MAAQ,EACb,KAAK,MAAQ,OAAO,KAAK,IAAI,OAAS,GACtC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,MAAO,EACP,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,IAEX,KAAK,gBAET,EAAQ,UAAU,MAAQ,cACtB,MAAY,OACG,OAAO,KAAK,SAAS,QAAQ,KAAK,EAAG,KAAK,EAAG,EAAe,EAAG,EAAe,KAC9E,KAAK,IAAI,IAAK,EAAW,EAAK,OAAO,cACpD,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,WAAY,CAAC,GACb,EAAG,EAAe,EAClB,EAAG,EAAe,EAClB,WAAY,WACR,EAAM,mBAGd,KAAK,gBAAgB,EAAO,IAEhC,EAAQ,UAAU,gBAAkB,cAChC,GAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,yBAC7C,MAAmB,GAAQ,EAAW,KAAQ,IAC9C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,uBAAwB,CAAE,OAAQ,EAAG,MAAO,MAG5F,EAAQ,UAAU,cAAgB,WAC9B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,GACN,OAAQ,GACR,MAAO,KAAK,MAAM,OAAO,QAAQ,QAGzC,EAAQ,UAAU,KAAO,WACrB,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,MAAO,KACP,WAAY,WACR,EAAM,cAIlB,EAAQ,UAAU,WAAa,WAC3B,KAAK,MAAM,OAAO,aAAa,KAAK,MACpC,EAAO,UAAU,WAAW,KAAK,OAE9B,GACT,OAAO,YAAY,WACrB,EAAK,QAAU,IAChB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,gBACb,EAAM,aACN,EAAM,gBACC,EAEX,SAAY,UAAU,WAAa,WAC/B,MAAY,KACZ,KAAK,QAAU,EAAE,MAAM,GAAI,WACvB,MAAa,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,aACrD,SAAO,OACA,IAEX,KAAK,IAAI,KAAK,UAElB,EAAY,UAAU,cAAgB,WAClC,KAAK,sBAAwB,KAAK,MAAM,KAAK,SAAS,CAClD,KAAM,GACN,MAAO,IACP,QAAS,IACT,SAAU,KAAK,WAAW,KAAK,MAC/B,OAAQ,MAGhB,EAAY,UAAU,KAAO,WACzB,KAAK,SACL,KAAK,sBAAsB,OAAS,IAExC,EAAY,UAAU,KAAO,WACzB,KAAK,OACL,KAAK,sBAAsB,OAAS,IAExC,EAAY,UAAU,WAAa,WAC/B,MAAa,KAAK,QAAQ,KAAK,YAAoB,MAAO,GAAO,UAAY,KAC7E,AAAI,GACA,GAAO,SACP,EAAO,MAAQ,EACf,EAAO,MAAQ,EACf,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,MAAO,CAAE,MAAO,IAAM,KAAM,OAAO,KAAK,OAAO,KAAK,KACpD,MAAO,CAAE,MAAO,EAAG,KAAM,OAAO,KAAK,OAAO,OAAO,QACnD,WAAY,WACR,EAAO,YAKvB,EAAY,UAAU,QAAU,YAC5B,KAAK,sBAAsB,UAC3B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KAKnB,SACA,AAAC,aACG,MAAmB,OAAO,OAAO,eACd,OAAO,KAAK,eACb,OAAO,YAAY,cAErC,AAAC,aACG,EAAsB,OAAY,0BAClC,EAAsB,OAAY,0BAClC,EAAsB,SAAc,4BACpC,EAAsB,SAAc,4BACpC,EAAsB,iBAAsB,sCAC7C,EAAwB,EAAK,uBAA0B,GAAK,sBAAwB,KACvF,MAAsC,YAClC,UAAU,EAAkB,GAC5B,gBACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,UAAY,EAClB,EAAM,iBAAmB,EAAM,KAAK,eAAiB,EAAK,aAAa,OACvE,EAAM,MAAQ,EACd,EAAM,IAAM,EACZ,EAAM,IAAI,OAAO,GAAG,EAAsB,OAAQ,EAAM,gBAAiB,GACzE,EAAM,IAAI,OAAO,GAAG,EAAsB,OAAQ,EAAM,gBAAiB,GACzE,EAAM,IAAI,OAAO,GAAG,EAAsB,iBAAkB,EAAM,uBAAwB,GAC1F,EAAM,mBAAqB,EAAM,IAAI,mBACrC,EAAM,YAAc,EAAM,IAAI,kBAC9B,EAAM,cAAgB,EAAM,IAAI,cAChC,EAAM,iBACN,EAAM,eACC,EAIX,SAAiB,UAAU,YAAc,cACrC,MAAY,KACZ,EAAe,GAAiB,KAAkC,EAAe,CAC7E,EAAG,OAAO,KAAK,IAAI,QAAQ,EAAG,EAAK,SAAS,SAC5C,EAAG,OAAO,KAAK,IAAI,QAAQ,EAAG,EAAK,SAAS,OAEhD,MAAW,KAAK,MAAM,KAAK,UAAU,EAAa,EAAG,EAAa,GAClE,AAAI,GACA,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,gBAAgB,EAAM,WAAW,GAAc,EAAK,EAAG,EAAK,MAI9E,EAAiB,UAAU,mBAAqB,YAC5C,MAAY,KACZ,KAAK,MAAM,yBACX,KAAK,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,YAClD,MAAW,EAAM,MAAM,KAAK,YAAY,EAAQ,OAAQ,EAAQ,QAChE,AAAI,GACA,EAAM,gBAAgB,EAAM,WAAW,GAAO,EAAK,EAAG,EAAK,MAIvE,EAAiB,UAAU,eAAiB,WACxC,KAAK,YAAc,GAAI,GAAK,YAAY,KAAK,OAC7C,KAAK,YAAY,SAAS,EAAK,cAAc,yBAC7C,KAAK,MAAM,IAAI,SAAS,KAAK,cAEjC,EAAiB,UAAU,aAAe,WACtC,KAAK,UAAY,KAAK,MAAM,IAAI,UAAU,YAC1C,KAAK,UAAU,SAAS,EAAK,cAAc,yBAC3C,KAAK,cAAgB,KAAK,iBACpB,KAAK,MAAM,SAAS,qBACpB,KAAK,8BAEf,EAAiB,UAAU,2BAA6B,WACpD,MAAO,MAAK,UAAU,cAAc,CAChC,MAAO,YACP,SAAU,IACV,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,MAAO,CAAE,MAAO,GAAK,IAAK,EAAG,KAAM,EAAa,aAChD,GAAI,MAGZ,EAAiB,UAAU,gBAAkB,cACzC,KAAK,YAAY,YAAY,EAAG,GAChC,KAAK,YAAY,QAErB,EAAiB,UAAU,gBAAkB,WACzC,KAAK,YAAY,QAErB,EAAiB,UAAU,gBAAkB,YACzC,KAAK,uBAAuB,GAC5B,KAAK,MAAM,yBACX,KAAK,YAAY,WAAW,GAC5B,KAAK,YAAY,OACjB,KAAK,IAAI,SAAS,OAClB,KAAK,IAAI,YAAY,OACrB,KAAK,cAAc,UAAU,EAAQ,OAEzC,EAAiB,UAAU,uBAAyB,YAChD,KAAK,sBAAwB,KAAK,aAAa,KAAK,KAAM,GAC1D,KAAK,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,wBAE/D,EAAiB,UAAU,0BAA4B,WACnD,AAAI,KAAK,uBACL,MAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,uBAC5D,KAAK,sBAAwB,OAGrC,EAAiB,UAAU,aAAe,cACtC,MAAsB,KAAK,MAAM,KAAK,YAAY,SAAS,EAAQ,OAAQ,EAAQ,QACnF,AAAI,GACA,MAAK,4BACL,KAAK,gBAAgB,EAAS,EAAQ,OAAQ,EAAQ,UAG9D,EAAiB,UAAU,gBAAkB,gBACzC,KAAK,MAAM,UAAU,oBAAoB,KAAK,MAAM,YAAa,EAAQ,MACzE,KAAK,MAAM,MAAM,gBAAgB,CAC7B,YAAa,EAAQ,KACrB,gBAAiB,KAAK,MAAM,KAAK,YAAY,EAAG,GAAG,aAEvD,KAAK,kBAAkB,GACvB,OAAQ,EAAQ,UACP,GAAK,YAAY,KAClB,KAAK,aAAa,EAAS,EAAG,GAC9B,UACC,GAAK,YAAY,KAClB,KAAK,aAAa,EAAS,EAAG,GAC9B,UACC,GAAK,YAAY,QAClB,KAAK,gBAAgB,EAAS,EAAG,GACjC,cAEA,QAGZ,EAAiB,UAAU,kBAAoB,YAC3C,EAAQ,KAAO,EACf,KAAK,YAAY,OACjB,KAAK,IAAI,SAAS,OAClB,KAAK,IAAI,YAAY,SACrB,KAAK,cAAc,iBACnB,AAAI,EAAQ,OAAS,EAAK,YAAY,SAAW,EAAQ,OAAS,EAAK,YAAY,KAC/E,MAAK,cAAc,eACnB,KAAK,cAAc,OACnB,KAAK,MAAM,KAAK,QAChB,KAAK,MAAM,eACX,KAAK,MAAM,kBACX,KAAK,MAAM,aAGX,MAAK,cAAc,cAAc,EAAK,YAAY,MAAM,OACxD,KAAK,MAAM,uBAEf,KAAK,KAAK,EAAsB,SAAU,IAE9C,EAAiB,UAAU,aAAe,gBACtC,MAAW,GAAI,GAAK,QAAQ,KAAK,OACjC,EAAK,SAAS,EAAK,cAAc,SACjC,EAAK,EAAI,EACT,EAAK,EAAI,EACT,EAAK,OACL,EAAK,MAAM,CAAE,EAAG,GAAI,EAAG,IAAM,KAC7B,KAAK,MAAM,IAAI,SAAS,GACxB,KAAK,sBACL,KAAK,wBAAwB,IAEjC,EAAiB,UAAU,wBAA0B,YACjD,KAAK,uBAAyB,KAAK,eAAe,KAAK,KAAM,GAC7D,KAAK,MAAM,OAAO,GAAG,EAAK,cAAc,oBAAqB,KAAK,yBAEtE,EAAiB,UAAU,2BAA6B,WACpD,AAAI,KAAK,wBACL,MAAK,MAAM,OAAO,IAAI,EAAK,cAAc,oBAAqB,KAAK,wBACnE,KAAK,uBAAyB,OAGtC,EAAiB,UAAU,oBAAsB,WAC7C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,YAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,UAAW,CAAE,OAAQ,OAGrE,EAAiB,UAAU,eAAiB,YACxC,MAAiB,EAAE,EAAK,YAAc,EACtC,AAAI,EACA,GAAK,OACL,KAAK,kBAAkB,KAAK,WAAW,EAAK,YAAY,OACxD,KAAK,8BAGL,EAAK,eAAe,EAAK,YAGjC,EAAiB,UAAU,aAAe,gBACtC,MAAY,KACZ,KAAK,kBACL,MAAW,KAAK,MAAM,KAAK,YAAY,EAAG,GAC1C,KAAK,gBAAgB,EAAK,EAAG,EAAK,GAClC,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,sBACN,EAAM,UAAU,EAAS,EAAK,EAAG,EAAK,MAG9C,EAAiB,UAAU,gBAAkB,WACzC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,sBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,KAG/E,EAAiB,UAAU,UAAY,gBACnC,MAAW,GAAI,GAAK,KAAK,KAAK,OAC9B,EAAK,EAAI,EACT,EAAK,EAAI,EAAI,EAAK,SAAS,UAAY,EACvC,EAAK,SAAS,EAAK,cAAc,SACjC,EAAK,GAAG,EAAK,UAAU,OAAQ,KAAK,aAAa,KAAK,KAAM,EAAM,IAClE,EAAK,SAAS,EAAG,GACjB,KAAK,MAAM,IAAI,SAAS,GACxB,KAAK,MAAM,KAAK,gBAAgB,KAAK,IAEzC,EAAiB,UAAU,oBAAsB,WAC7C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,sBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,KAG/E,EAAiB,UAAU,aAAe,cAEtC,EAAK,EAAI,EAAK,OAAO,EACrB,EAAK,EAAI,EAAK,OAAO,EACrB,KAAK,MAAM,cAAc,EAAK,EAAG,EAAK,EAAG,KACzC,KAAK,MAAM,mBAAmB,GAC9B,KAAK,MAAM,mBAAmB,GAC9B,KAAK,MAAM,MAAM,YACjB,KAAK,MAAM,QAAQ,KAAK,MAAM,IAAK,KAAO,IAC1C,KAAK,oBAAoB,GACzB,KAAK,kBACL,KAAK,cAAc,QAAQ,EAAG,EAAK,EAAG,EAAK,GAC3C,MAAY,KAAK,MAAM,KAAK,gBAAgB,QAAQ,GACpD,AAAI,EAAQ,IACR,MAAK,MAAM,KAAK,gBAAgB,OAAO,EAAO,GAC9C,AAAI,KAAK,MAAM,KAAK,gBAAgB,SAAW,GAC3C,MAAK,kBAAkB,GACvB,AAAI,KAAK,MAAM,KAAK,iBAChB,KAAK,MAAM,oBAK3B,EAAiB,UAAU,oBAAsB,YAC7C,MAAU,KAAK,MAAM,MACN,OAAO,KAAK,SAAS,QAAQ,EAAK,EAAG,EAAK,EAAG,EAAI,EAAG,EAAI,GACvE,AAAI,EAAW,EAAK,SAAS,UAAY,GACrC,KAAK,YAGb,EAAiB,UAAU,SAAW,WAClC,KAAK,MAAM,oBACX,KAAK,MAAM,IAAI,mBACf,KAAK,YACL,AAAI,KAAK,UAAY,IAAM,EACvB,KAAK,oBAGL,KAAK,iBAGb,EAAiB,UAAU,kBAAoB,WAC3C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,kBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAG3E,EAAiB,UAAU,cAAgB,WACvC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,aAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,WAAY,CAAE,OAAQ,KAGtE,EAAiB,UAAU,gBAAkB,gBACzC,MAAY,KACZ,KAAK,kBACL,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,mBACN,EAAM,cAAc,EAAS,EAAG,GAChC,EAAM,MAAM,OAAO,OAAO,MAAM,IAAM,KAAO,OAGrD,EAAiB,UAAU,iBAAmB,WAC1C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,kBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAG3E,EAAiB,UAAU,cAAgB,gBACvC,MAAW,KAAK,MAAM,KAAK,YAAY,EAAG,KAC5B,GAAI,GAAK,QAAQ,KAAK,OACpC,EAAQ,EAAI,KAAK,MAAM,gBAAkB,KAAK,MAAM,OAAO,aAAa,EACxE,EAAQ,EAAI,EAAK,EACjB,EAAQ,SAAS,EAAK,cAAc,SACpC,EAAQ,aAAa,KAAK,iBAAiB,KAAK,OAChD,EAAQ,KAAK,EAAK,aAAa,SAAU,KAAK,oBAAoB,KAAK,KAAM,IAC7E,EAAQ,SACR,KAAK,MAAM,IAAI,SAAS,GACxB,KAAK,MAAM,KAAK,gBAAgB,KAAK,GACrC,KAAK,MAAM,KAAK,aAAa,EAAK,IAAK,IAAM,GAC7C,AAAI,EAAK,IAAM,GACX,KAAK,YAGb,EAAiB,UAAU,iBAAmB,YAC1C,MAAW,EAAK,MAAM,aACR,EAAK,MAAM,WACzB,GAAI,GAAW,GACX,MAAoB,EAAQ,YAAY,SAAS,GACjD,GAAI,EACA,OAEJ,EAAQ,gBAAkB,GAC1B,EAAQ,YAAY,KAAK,GACzB,KAAK,kBAAkB,KAG/B,EAAiB,UAAU,kBAAoB,YAC3C,MAAY,OACH,OAAO,KAAK,IAAI,QAAQ,GAAI,OACvB,KAAK,IAAI,EAAG,EAAK,EAAI,KAC1B,EAAK,SAAS,UAAY,IACtB,EAAK,KAAK,YAAc,IAAM,EAAI,GAAK,IACxC,GAAK,SAAS,KAAO,EAAK,SAAS,UAAY,EAAK,SAAS,YAC3D,OAAO,KAAK,MAAM,EAAK,EAAI,EAAK,EAAQ,EAAG,GACzD,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,EACH,EAAG,EACH,QAAS,WACL,EAAM,qBAAqB,IAE/B,WAAY,WACR,EAAM,wBAAwB,OAI1C,EAAiB,UAAU,qBAAuB,YAC9C,EAAK,SAAS,EAAK,cAAc,gBACjC,MAAc,EAAK,aAAa,YAAY,EAAK,UACjD,GAAI,GACA,MAAY,EACZ,EAAM,eACN,KAAK,MAAM,MAAM,iBAGzB,EAAiB,UAAU,wBAA0B,YACjD,MAAc,EAAK,aAAa,YAAY,EAAK,UACjD,GAAI,GACA,MAAY,EACZ,EAAM,OAAO,WAGb,GAAK,KAAK,EAAK,UAAU,SAAU,WAC/B,EAAK,YAET,EAAK,oBAAoB,MAGjC,EAAiB,UAAU,oBAAsB,cAC7C,MAAY,KACZ,KAAK,MAAM,OAAO,OAAO,YAAY,QACrC,AAAI,EAAQ,kBAAoB,GAC5B,MAAK,kBAAkB,GACvB,KAAK,MAAM,KAAK,gBAAgB,OAAS,EACzC,KAAK,MAAM,kBAGX,EAAQ,KAAK,OAAO,YAAY,OAAO,QAAS,WAC5C,EAAM,kBAAkB,GACxB,EAAM,MAAM,KAAK,gBAAgB,OAAS,EAC1C,AAAI,EAAM,MAAM,KAAK,iBACjB,EAAM,MAAM,oBAK5B,EAAiB,UAAU,kBAAoB,YAC3C,KAAK,KAAK,EAAsB,SAAU,GAC1C,AAAI,EAAQ,OAAS,EAAK,YAAY,KAClC,KAAK,cAAc,cAAc,EAAK,YAAY,MAAM,SAGxD,MAAK,cAAc,cACnB,KAAK,MAAM,wBAGnB,EAAiB,UAAU,gBAAkB,YACzC,KAAK,4BACL,KAAK,MAAM,sBACX,KAAK,YAAY,OACjB,KAAK,IAAI,SAAS,OAClB,KAAK,IAAI,YAAY,SACrB,KAAK,cAAc,kBAEvB,EAAiB,UAAU,uBAAyB,YAChD,GAAI,CAAC,KAAK,mBACN,OAEJ,KAAK,yBAAyB,EAAQ,MACtC,KAAK,mBAAmB,YAAY,GAAG,EAAY,MAAO,KAAK,yBAAyB,KAAK,KAAM,EAAQ,OAC3G,KAAK,mBAAmB,WAAW,GAAG,EAAY,MAAO,KAAK,aAAc,MAC5E,KAAK,mBAAmB,KAAK,EAAK,wBAAwB,WAAY,KAAK,yBAA0B,MACrG,KAAK,mBAAmB,WAAW,EAAQ,KAAM,KAAK,uBACtD,KAAK,mBAAmB,SACxB,KAAK,mBAAmB,QAE5B,EAAiB,UAAU,oBAAsB,WAC7C,MAAe,KAAK,MAAM,KAAK,UAAU,qBAAqB,EAAK,gBAAgB,aAAc,KACjG,MAAO,UAAS,IAEpB,EAAiB,UAAU,yBAA2B,YAClD,KAAK,MAAM,yBACX,KAAK,IAAI,YAAY,gBAEzB,EAAiB,UAAU,aAAe,WACtC,MAAY,OACM,KAAK,mBAAmB,iBACzB,KAAK,sBACtB,KAAK,MAAM,UAAU,eAAe,eAAgB,EAAa,WACjE,KAAK,MAAM,KACN,cAAc,WAAa,EAAa,CACzC,UAAW,WACP,EAAM,MAAM,KAAK,YAAY,IAAK,WAC9B,EAAM,kBAAkB,EAAa,GACrC,EAAM,mBAAmB,OACzB,EAAM,MAAM,UAAU,eAAe,eAAgB,EAAa,cAG1E,OAAQ,WACJ,EAAM,MAAM,UAAU,eAAe,eAAgB,EAAa,WAGrE,MAAM,eAGf,EAAiB,UAAU,kBAAoB,cAC3C,KAAK,cAAc,cAAc,GAAa,aAAa,GAC3D,KAAK,MAAM,SAAS,WAAW,GAAa,KAAO,EACnD,KAAK,MAAM,UAAU,eAAe,eAAgB,EAAa,YAErE,EAAiB,UAAU,yBAA2B,YAClD,KAAK,IAAI,mBAAmB,QAEhC,EAAiB,UAAU,yBAA2B,WAClD,KAAK,MAAM,sBACX,KAAK,IAAI,YAAY,cACrB,KAAK,mBAAmB,YAAY,IAAI,EAAY,MAAO,KAAK,yBAA0B,MAC1F,KAAK,mBAAmB,WAAW,IAAI,EAAY,MAAO,KAAK,aAAc,OAEjF,EAAiB,UAAU,WAAa,YACpC,MAAO,MAAK,MAAM,KAAK,SAAS,UAAU,IAE9C,EAAiB,UAAU,QAAU,WACjC,KAAK,UAAU,UACf,KAAK,6BACL,KAAK,4BACL,KAAK,MAAM,OAAO,IAAI,EAAsB,SAAU,KAAK,kBAAmB,MAC9E,KAAK,MAAM,OAAO,IAAI,EAAsB,SAAU,KAAK,kBAAmB,MAC9E,KAAK,IAAI,OAAO,IAAI,EAAsB,OAAQ,KAAK,gBAAiB,MACxE,KAAK,IAAI,OAAO,IAAI,EAAsB,OAAQ,KAAK,gBAAiB,MACxE,KAAK,IAAI,OAAO,IAAI,EAAsB,iBAAkB,KAAK,uBAAwB,OAEtF,GACT,GACF,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmB,OAAO,OAAO,eAEjC,AAAC,aACG,EAAkB,SAAc,0BACjC,EAAoB,EAAK,mBAAsB,GAAK,kBAAoB,KAC3E,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,QAAU,GAChB,EAAM,MAAQ,EACP,EAEX,SAAa,UAAU,MAAQ,WAC3B,MAAY,KACZ,KAAK,QAAU,GACf,KAAK,kBACL,MAAmB,IACnB,KAAK,MAAM,KAAK,YAAY,EAAe,IAAK,WAC5C,EAAM,YACN,EAAM,gBAEV,KAAK,MAAM,KAAK,YAAY,EAAe,IAAK,WAC5C,EAAM,qBAGd,EAAa,UAAU,gBAAkB,WACrC,MAAgB,KAAK,MAAM,IAAI,YAAY,UAAU,EAAK,UAAU,MACpE,AAAI,GACA,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAU,cAK1B,EAAa,UAAU,UAAY,WAC/B,MAAU,KAAK,MAAM,IACrB,EAAI,oBACJ,EAAI,SACJ,EAAI,MAAQ,EACZ,EAAI,MAAQ,GACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,KAGf,EAAa,UAAU,YAAc,WACjC,KAAK,MAAM,UAAU,QAAQ,YAAkB,MAAO,GAAK,YAE/D,EAAa,UAAU,gBAAkB,WACrC,MAAY,OACS,KAAK,MAAM,MAAM,OAAO,YAAkB,MAAO,GAAK,KAAK,UAAa,EAAK,SAAS,KAAO,EAAa,KAAO,MACvH,EAAe,OAC9B,GAAI,IAAa,GACb,KAAK,YAAY,EAAa,MAC9B,OAEJ,EAAe,QAAQ,YACnB,EAAK,GAAG,OAAO,YAAY,OAAO,QAAS,WACvC,AAAI,EAAE,IAAa,GACf,EAAM,YAAY,EAAa,QAGvC,EAAK,GAAG,EAAK,UAAU,SAAU,WAC7B,EAAK,YAET,EAAK,oBAAoB,QAGjC,EAAa,UAAU,YAAc,YACjC,MAAY,KACZ,KAAK,uBACL,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MAAM,MACpB,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,EAAG,KAAO,EAAK,SAAS,UACxB,cAAe,KAChB,KAAK,OAAO,OAAO,OAAO,kBAAmB,WAC5C,AAAI,EAAE,IAAY,EACd,EAAM,mBAGN,EAAM,YAAY,MAI9B,EAAa,UAAU,qBAAuB,WAC1C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,gBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,cAAe,CAAE,OAAQ,OAGzE,EAAa,UAAU,iBAAmB,WACtC,KAAK,MAAM,eACX,KAAK,uBACL,KAAK,KAAK,EAAkB,SAAU,OAE1C,EAAa,UAAU,qBAAuB,WAC1C,KAAK,MAAM,UAAU,eAAe,CAAC,EAAa,OAEtD,EAAa,KAAO,EACb,GACT,GACF,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,WAC7B,cACI,KAAK,WAAa,EAClB,KAAK,UAAY,GACjB,KAAK,MAAQ,EACb,KAAK,MAAQ,GAEjB,cAAO,eAAe,EAAY,UAAW,YAAa,CACtD,IAAK,WACD,MAAO,MAAK,YAEhB,WAAY,GACZ,aAAc,KAElB,EAAY,UAAU,QAAU,YAC5B,KAAK,MAAM,KAAK,IAEpB,EAAY,UAAU,WAAa,YAC/B,MAAY,KAAK,MAAM,QAAQ,GAC/B,AAAI,EAAQ,IACR,KAAK,MAAM,OAAO,EAAO,IAGjC,EAAY,UAAU,OAAS,WAC3B,GAAI,KAAK,MAAM,KAAK,eAAiB,GACjC,OAEJ,GAAI,KAAK,UACL,OAEJ,KAAK,MAAM,KAAK,cAAgB,GAChC,MAAgB,EAChB,KAAK,WAAa,EAClB,KAAK,UAAY,GACjB,KAAK,MAAM,MAAM,gBAAkB,EACnC,KAAK,MAAM,OAAO,UAAY,EAC9B,KAAK,MAAM,KAAK,UAAY,EAC5B,KAAK,MAAM,SAAS,aAAa,GACjC,KAAK,MAAM,QAAQ,YAAkB,MAAQ,GAAK,UAAY,IAC9D,KAAK,MAAM,IAAI,OAAO,UAAY,EAClC,KAAK,MAAM,IAAI,kBAAkB,UACjC,KAAK,MAAM,IAAI,kBAAkB,gBACjC,KAAK,MAAM,IAAI,YAAY,OAC3B,KAAK,MAAM,MAAM,QAAQ,GACzB,KAAK,YACL,KAAK,MAAM,KAAK,MAAM,UAAU,EAAK,aAAa,sBAAuB,IACzE,KAAK,MAAM,OAAO,KAAK,EAAK,cAAc,mBAAoB,OAElE,EAAY,UAAU,UAAY,WAC9B,GAAI,KAAK,OACL,KAAK,MAAM,OACX,OAEJ,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,eAC7C,MAAK,MAAQ,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,aAAc,CAAE,OAAQ,IAC5E,KAAK,MAAM,SAGnB,EAAY,UAAU,QAAU,WAC5B,GAAI,KAAK,YAAc,GACnB,OAEJ,KAAK,WAAa,EAClB,KAAK,UAAY,GACjB,KAAK,MAAM,MAAM,gBAAkB,EACnC,KAAK,MAAM,OAAO,UAAY,EAC9B,KAAK,MAAM,KAAK,UAAY,EAC5B,KAAK,MAAM,SAAS,aAAa,GACjC,KAAK,MAAM,QAAQ,YAAkB,MAAQ,GAAK,UAAY,IAC9D,KAAK,MAAM,IAAI,OAAO,UAAY,EAClC,KAAK,MAAM,IAAI,kBAAkB,gBACjC,KAAK,MAAM,IAAI,YAAY,OAC3B,KAAK,MAAM,MAAM,QAAQ,GACzB,AAAI,KAAK,OACL,KAAK,MAAM,QAGnB,EAAY,UAAU,QAAU,WAC5B,AAAI,KAAK,MAAM,MAAM,OAAS,GAC1B,KAAK,MAAM,MAAM,QAAQ,GAE7B,KAAK,MAAM,MAAM,gBAAkB,EACnC,KAAK,MAAQ,MAEV,KAEX,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA0B,WACtB,cACI,KAAK,UAAY,GACjB,KAAK,MAAQ,EAEjB,SAAK,UAAU,MAAQ,WACnB,KAAK,UAAY,GACjB,KAAK,eAAiB,KAAK,MAC3B,KAAK,aAAe,GACpB,KAAK,cAAgB,GACrB,KAAK,OAAS,EACd,KAAK,gBAAkB,EACvB,KAAK,oBAAsB,GAC3B,KAAK,kBAAoB,GACzB,KAAK,0BAA4B,GACjC,KAAK,YAAc,GACnB,KAAK,qBAAuB,GAC5B,KAAK,gBAAkB,GACvB,KAAK,eAAiB,EACtB,KAAK,eAAiB,EACtB,KAAK,gBAAkB,MAE3B,EAAK,UAAU,WAAa,WACxB,MAAO,MAAK,YAAc,IAE9B,EAAK,UAAU,cAAgB,WAC3B,MAAa,KAAK,oBAClB,MAAO,QAAO,OAAO,GAAQ,MAAM,YAAmB,MAAO,KAAU,MAE3E,EAAK,UAAU,kBAAoB,WAC/B,GAAI,CAAC,KAAK,UACN,MAAO,MAEX,MAAqB,KAAK,iBAAmB,KAAK,iBACtB,KAAK,0BAA0B,MAAM,YAAkB,MAAO,GAAK,gBACrE,KAAK,YAAY,SAAW,IAC7B,KAAK,qBAAqB,SAAW,IACpC,KAAK,gBAAgB,SAAW,EAC1D,MAAO,CACH,eAAgB,EAChB,sBAAuB,EACvB,oBAAqB,EACrB,mBAAoB,EACpB,oBAAqB,IAG7B,EAAK,UAAU,SAAW,WACtB,KAAK,UAAY,IAEd,KAEX,EAAK,KAAO,IACb,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,IAAM,KAC9C,SAAM,UACN,EAAM,UACN,EAAM,MAAM,OAAO,KAAK,EAAK,cAAc,WAAY,EAAM,KAAM,GACnE,EAAM,MAAM,OAAO,KAAK,EAAK,cAAc,cAAe,EAAM,KAAM,GAC/D,EAEX,SAAa,UAAU,QAAU,WAC7B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,iBACnD,KAAK,IAAI,KAAK,OAElB,EAAa,UAAU,QAAU,WAC7B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,iBACnD,KAAK,KAAK,EAAI,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,KAAK,KAAK,QAAU,EACnE,KAAK,KAAK,UAAY,KAAK,KAAK,EAChC,KAAK,KAAK,UAAY,KAAK,KAAK,EAChC,KAAK,KAAK,MAAQ,EAClB,KAAK,IAAI,KAAK,OAElB,EAAa,UAAU,KAAO,YAC1B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,MAAO,CAAE,MAAO,EAAG,KAAM,EAAG,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,KACjF,MAAO,CAAE,KAAM,GAAK,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,KAAK,IAAK,SAAU,KACxE,EAAG,CAAE,KAAM,KAAK,EAAI,GAAI,GAAI,KAAK,EAAG,KAAM,OAAO,KAAK,OAAO,KAAK,IAAK,SAAU,OAErF,KAAK,eAAe,EAAQ,MAEhC,EAAa,UAAU,eAAiB,YACpC,MAAY,KAEZ,GADA,AAAI,IAAiB,QAAU,GAAe,GAC1C,CAAC,KAAK,MACN,OAEJ,MAAkB,KAAK,MAAM,MAAM,KAAK,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YACpG,GAAI,CAAC,EACD,OAEJ,KAAK,KAAK,EAAI,KAAK,KAAK,UACxB,KAAK,KAAK,EAAI,KAAK,KAAK,UACxB,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,MAAQ,EAClB,MAAe,OAAO,KAAK,MAAM,cAAc,EAAY,mBAAoB,KAAK,KAAK,sBACpE,EAAW,KAAK,GAAK,IACxB,OAAO,KAAK,SAAS,GACvC,KAAK,KAAK,MAAQ,EAAc,EAAI,IAAM,GAC1C,KAAK,iBAAmB,KAAK,MAAM,OAAO,SAAS,CAC/C,OAAQ,CACJ,CACI,MAAO,EACP,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,cAAe,KAEnB,CACI,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,SAAU,EACV,cAAe,KAEnB,CACI,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,WAAc,MAAO,GAAM,YAC9B,EAAG,WAAc,MAAO,GAAM,YAC9B,KAAM,GACN,cAAe,KAEnB,CACI,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KACP,MAAO,EACP,cAAe,MAGvB,WAAY,KAAK,eAAe,KAAK,SAG7C,EAAa,UAAU,sBAAwB,WAC3C,MAAe,KACH,KAAK,KAAK,SAAW,KAAK,GAAK,IAC7B,KAAK,KAAK,EAAI,KAAK,IAAI,GAAS,IAChC,KAAK,KAAK,EAAI,KAAK,IAAI,GAAS,EAC9C,MAAO,CAAE,EAAG,EAAS,EAAG,IAE5B,EAAa,UAAU,SAAW,WAC9B,MAAO,MAAK,wBAAwB,GAExC,EAAa,UAAU,SAAW,WAC9B,MAAO,MAAK,wBAAwB,GAExC,EAAa,UAAU,KAAO,WAC1B,MAAY,KACZ,GAAI,CAAC,KAAK,MACN,OAEJ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,cAIlB,EAAa,UAAU,QAAU,YAC7B,AAAI,KAAK,OACL,MAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,aAAa,KAAK,MACpC,KAAK,MAAM,OAAO,IAAI,EAAK,cAAc,WAAY,KAAK,KAAM,MAChE,KAAK,MAAM,OAAO,IAAI,EAAK,cAAc,cAAe,KAAK,KAAM,OAEvE,AAAI,KAAK,kBACL,MAAK,iBAAiB,UACtB,KAAK,iBAAmB,MAE5B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,MAAQ,EACd,EAAM,MAAQ,EAAM,MAAM,MAAM,KAAK,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YACjG,EAAM,MAAM,KAAK,EAAK,YAAY,KAAM,EAAM,KAAM,GACpD,EAAM,aACN,EAAM,OACC,EAEX,SAAU,UAAU,WAAa,WAC7B,MAAY,KACZ,KAAK,QAAU,EAAE,MAAM,GAAI,WACvB,MAAa,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,aACrD,SAAO,OACP,EAAM,IAAI,GACH,KAGf,EAAU,UAAU,KAAO,WACvB,KAAK,gBAAkB,KAAK,MAAM,KAAK,SAAS,CAC5C,KAAM,GACN,MAAO,IACP,QAAS,IACT,SAAU,KAAK,WAAW,KAAK,SAGvC,EAAU,UAAU,WAAa,WAC7B,MAAa,KAAK,QAAQ,KAAK,YAAoB,MAAO,GAAO,UAAY,KAC7E,AAAI,GACA,GAAO,SACP,EAAO,MAAQ,EACf,EAAO,MAAQ,EACf,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,KACV,MAAO,CAAE,MAAO,GAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KACnD,MAAO,CAAE,MAAO,EAAG,KAAM,OAAO,KAAK,OAAO,QAC5C,WAAY,WACR,EAAO,YAKvB,EAAU,UAAU,KAAO,WACvB,KAAK,MAAQ,KACb,KAAK,WAET,EAAU,UAAU,UAAY,cAC5B,AAAI,KAAK,OACL,MAAK,EAAI,KAAK,MAAM,EACpB,KAAK,EAAI,KAAK,MAAM,IAG5B,EAAU,UAAU,QAAU,WAC1B,AAAI,KAAK,iBACL,KAAK,gBAAgB,WAGtB,GACT,OAAO,YAAY,WACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAwB,YAAiB,mCAC1C,EAA0B,EAAK,yBAA4B,GAAK,wBAA0B,KAC7F,MAAwC,YACpC,UAAU,EAAoB,GAC9B,kBACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,MAAQ,EACd,EAAM,KAAO,EACb,EAAM,MAAQ,EAAM,MAAM,OAAO,MACjC,EAAM,QAAU,EACT,EAEX,SAAmB,UAAU,iBAAmB,YAC5C,MAAqB,KAAK,kBAAkB,KAChC,KAAK,YAAY,GAC7B,AAAI,EAAM,SAAW,EACjB,KAAK,KAAK,EAAwB,YAAa,IAG/C,KAAK,UAAU,IAGvB,EAAmB,UAAU,kBAAoB,YAC7C,MAAiB,KAAK,KAAK,YAAY,EAAO,EAAG,EAAO,KACnC,KAAK,KAAK,kBAAkB,GACjD,MAAO,MAAK,YAAY,IAE5B,EAAmB,UAAU,YAAc,YACvC,MAAY,OACQ,KAAK,MAAM,eAAe,OAAO,YAAkB,MAAO,GAAK,aAC7D,YAAkB,MAAO,IAAQ,EAAM,KAAK,WAAW,EAAK,OAAQ,EAAK,IAAK,MAChF,YAAkB,MAAO,GAAK,IAAM,KAC7B,YAAkB,MAAO,CAAC,EAAM,MAAM,KAAK,YAAY,KAAK,YAAkB,MAAO,GAAK,SAAW,EAAK,QAAU,EAAK,MAAQ,EAAK,OACjK,MAAO,GACF,OAAO,GACP,OAAO,GACP,OAAO,IAEhB,EAAmB,UAAU,YAAc,YACvC,MAAY,KACZ,MAAO,GAAe,IAAI,YACtB,MAAW,EAAM,WAAW,GAC5B,SAAM,aAAa,EAAM,GAClB,KAGf,EAAmB,UAAU,UAAY,YACrC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,CAAE,KAAM,EAAG,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,KACvE,MAAO,CAAE,KAAM,IAAM,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,KAAK,IAAK,SAAU,OAC1E,GAAG,OAAO,OAAO,OAAO,eAAgB,WACvC,EAAM,gBAAgB,MAG9B,EAAmB,UAAU,gBAAkB,YAC3C,MAAY,KACZ,EAAM,QAAQ,YAAkB,MAAO,GAAM,YAAY,KACzD,KAAK,KAAK,EAAwB,YAAa,EAAM,IAAI,YAAkB,MAAO,GAAK,aAE3F,EAAmB,UAAU,WAAa,YACtC,MAAqB,KAAK,MAAM,UAAU,iBAC3B,EAAe,yBACb,EAAe,cAAc,EAAU,KAAK,MAAM,YAAY,UAAU,SAAU,EAAK,KACxG,MAAO,MAAK,MAAM,QAAQ,OAAO,SAAS,CAAE,SAAU,EAAU,OAAQ,EAAK,OAAQ,IAAK,EAAK,KAAO,KAE1G,EAAmB,UAAU,cAAgB,YACzC,KAAK,QAAQ,QAAQ,GAAI,EAAK,EAAG,EAAK,IAE1C,EAAmB,UAAU,aAAe,cACxC,KAAK,MAAM,OAAO,EAAK,MACvB,KAAK,iBAAiB,EAAM,GAC5B,KAAK,cAAc,GACnB,AAAI,EAAK,aAAa,QAAQ,IAC1B,GAAK,OAAO,WAAa,KAGjC,EAAmB,UAAU,iBAAmB,cAC5C,KAAK,MAAM,KAAK,YAAY,KAAK,CAC7B,KAAM,EACN,OAAQ,EAAK,OACb,IAAK,EAAK,OAGlB,EAAmB,UAAU,YAAc,YACvC,KAAK,sBAAsB,GAC3B,KAAK,MAAM,IAAI,EAAK,MACpB,KAAK,MAAM,QAAQ,qBAAqB,GACxC,AAAI,EAAK,aAAa,QAAQ,IAC1B,GAAK,OAAO,WAAa,KAGjC,EAAmB,UAAU,sBAAwB,YACjD,MAAY,KAAK,MAAM,KAAK,YAAY,UAAU,YAAwB,MAAO,GAAW,OAAS,IACrG,AAAI,EAAQ,IACR,KAAK,MAAM,KAAK,YAAY,OAAO,EAAO,IAG3C,GACT,OAAO,OAAO,cAChB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAA0B,YAAiB,0CAC5C,EAA4B,EAAK,2BAA8B,GAAK,0BAA4B,KACnG,MAA0C,YACtC,UAAU,EAAsB,GAChC,gBACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,MAAQ,EACd,EAAM,KAAO,EACb,EAAM,MAAQ,EAAM,MAAM,OAAO,MAC1B,EAEX,SAAqB,UAAU,iBAAmB,YAC9C,MAAa,EAAK,kBAAkB,aACxB,KAAK,wBAAwB,EAAa,KACzC,KAAK,aAAa,EAAO,GACtC,AAAI,EAAO,OAAS,EAChB,KAAK,WAAW,EAAa,GAG7B,KAAK,iBAAiB,IAG9B,EAAqB,UAAU,wBAA0B,cACrD,MAAY,OACY,EAAY,KAAK,cACpB,EAAY,KAAK,SACtC,MAAO,GAAO,IAAI,YACd,MAAS,EAAM,4BAA4B,EAAO,EAAmB,KAA0B,EAAG,IAAS,EAAG,EAC9G,GAAI,EAAM,EACN,MAAO,MAEX,MAAuB,EAAM,MAAM,KAAK,YAAY,UAAU,YAAkB,MAAO,GAAK,SAAW,GAAU,EAAK,MAAQ,IAAU,GACxI,GAAI,EACA,MAAO,MAEX,MAAiB,EAAM,KAAK,WAAW,EAAQ,GAC/C,MAAI,KAAe,GACR,KAEJ,EAAM,KAAK,UAAU,EAAK,MAGzC,EAAqB,UAAU,4BAA8B,gBACzD,QACW,GAAK,GACZ,EAAG,EAAK,kBAAkB,UAAY,CAAE,EAAG,EAAQ,EAAG,EAAM,GAC5D,EAAG,EAAK,kBAAkB,aAAe,CAAE,EAAG,EAAS,EAAG,EAAG,GAC7D,EAAG,EAAK,kBAAkB,YAAc,CAAE,EAAG,EAAQ,EAAG,EAAM,GAC9D,EAAG,EAAK,kBAAkB,YAAc,CAAE,EAAG,EAAS,EAAG,EAAG,GAC5D,GACJ,MAAO,GAAI,IAEf,EAAqB,UAAU,aAAe,cAC1C,MAAY,OACC,GACb,SAAM,QAAQ,cACV,GAAI,CAAC,EACD,OAEJ,MAAY,EAAM,YAAY,EAAO,GAAQ,EAAK,OAAQ,EAAK,KAC/D,EAAM,MAAM,OAAO,EAAM,MACzB,EAAM,iBAAiB,EAAO,EAAK,IAAK,EAAK,QAC7C,EAAO,KAAK,KAET,GAEX,EAAqB,UAAU,YAAc,gBACzC,MAAe,EAAK,SAAS,sBACZ,KAAK,MAAM,UAAU,eAAe,cAAc,EAAU,KAAK,MAAM,YAAY,UAAU,SAAU,GACxH,MAAO,MAAK,MAAM,QAAQ,OAAO,SAAS,CAAE,SAAU,EAClD,MAAO,EACP,OAAQ,EACR,IAAK,GAAO,KAEpB,EAAqB,UAAU,WAAa,cACxC,MAAY,OACS,EACrB,EAAO,QAAQ,YACX,EAAM,MAAQ,EACd,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,MAAO,EACP,KAAM,OAAO,KAAK,OAAO,MAAM,MAEnC,MAAgB,EAAM,IACN,EAAM,EACtB,EAAM,MAAM,QAAQ,gBAAgB,EAAO,EAAY,KAAK,YAAa,EAAY,KAAK,UAC1F,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,EACH,EAAG,EACH,WAAY,WACR,EAAM,aAAa,GACnB,AAAI,EAAE,IAAmB,EAAO,QAC5B,EAAM,iBAAiB,EAAO,cAMlD,EAAqB,UAAU,aAAe,YAC1C,KAAK,sBAAsB,GAC3B,KAAK,MAAM,IAAI,EAAM,OAEzB,EAAqB,UAAU,iBAAmB,YAC9C,KAAK,KAAK,EAA0B,YAAa,MAAM,GAAW,KAAK,EAAK,SAAS,iBAEzF,EAAqB,UAAU,iBAAmB,gBAC9C,KAAK,MAAM,KAAK,YAAY,KAAK,CAC7B,KAAM,EACN,OAAQ,EACR,IAAK,KAGb,EAAqB,UAAU,sBAAwB,YACnD,MAAY,KAAK,MAAM,KAAK,YAAY,UAAU,YAAwB,MAAO,GAAW,OAAS,IACrG,AAAI,EAAQ,IACR,KAAK,MAAM,KAAK,YAAY,OAAO,EAAO,IAG3C,GACT,OAAO,OAAO,cAChB,EAAK,qBAAuB,IAC7B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAe,qBAA0B,mCAC1C,EAAiB,EAAK,gBAAmB,GAAK,eAAiB,KAClE,MAA+B,YAC3B,UAAU,EAAW,GACrB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,EAAU,KACvB,EAAM,WACN,EAAM,UACN,EAAM,WACN,EAAM,YACN,EAAM,WACC,EAEX,SAAU,UAAU,SAAW,WAC3B,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,6BACpD,KAAK,MAAM,UAAU,GAAK,GAC1B,KAAK,IAAI,KAAK,QAElB,EAAU,UAAU,QAAU,WAC1B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,uCACnD,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAU,UAAU,SAAW,WAC3B,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,mCACzD,KAAK,WAAW,UAAU,GAAK,GAC/B,KAAK,IAAI,KAAK,aAElB,EAAU,UAAU,UAAY,WAC5B,KAAK,OAAS,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,kCACrD,KAAK,OAAO,EAAI,EAChB,KAAK,OAAO,EAAI,KAAK,MAAM,OAC3B,KAAK,OAAO,OAAS,KACrB,KAAK,OAAO,OACZ,KAAK,MAAM,KAAK,OAAQ,IAE5B,EAAU,UAAU,SAAW,WAC3B,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,oBACpD,KAAK,MAAM,UAAU,GAAK,GAC1B,KAAK,MAAM,EAAI,KAAK,MAAM,IAAM,GAChC,KAAK,MAAM,OACX,KAAK,IAAI,KAAK,QAElB,EAAU,UAAU,UAAY,cAC5B,MAAY,KACZ,KAAK,MAAQ,EACb,KAAK,MAAQ,IACb,KAAK,WAAW,MAAQ,IACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,EACP,EAAG,KAAK,EAAI,IACZ,cAAe,IACf,WAAY,WACR,EAAM,YAAY,EAAM,OAIpC,EAAU,UAAU,YAAc,cAC9B,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,qBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,mBAAoB,CAAE,OAAQ,IAAM,MAAO,MAEvF,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,MAAQ,GACpB,KAAM,KAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,EAAG,EACH,EAAG,EACH,WAAY,KAAK,eAAe,KAAK,SAG7C,EAAU,UAAU,eAAiB,WACjC,KAAK,OAAO,SACZ,KAAK,iBACL,KAAK,iBACL,KAAK,UAAU,KACf,KAAK,KAAK,EAAe,qBAAsB,OAEnD,EAAU,UAAU,eAAiB,WACjC,GAAI,CAAC,KAAK,MACN,OAEJ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,MAAO,KAAK,MAC3B,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KACR,OAAQ,GACR,KAAM,GACN,OAAQ,KAEZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,GACN,OAAQ,MAGhB,EAAU,UAAU,eAAiB,WACjC,MAAY,KACZ,KAAK,KAAK,SAAS,wCACnB,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,KAAK,SAAS,uCACpB,EAAM,KAAK,UAAU,GAAK,MAGlC,EAAU,UAAU,UAAY,YAC5B,KAAK,MAAM,SACX,KAAK,MAAM,MAAQ,EACnB,KAAK,MAAM,MAAQ,GACnB,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,MAAO,KAGf,EAAU,UAAU,QAAU,YAC1B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,CAAC,KAAK,MAAO,KAAK,MAAO,KAAK,OAEjE,EAAO,UAAU,QAAQ,KAAK,KAAM,IAExC,EAAU,KAAO,aACV,GACT,OAAO,YAAY,WACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAyC,YACrC,UAAU,EAAqB,GAC/B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,wBACb,EAAM,UACN,EAAM,UACN,EAAM,UACC,EAEX,SAAoB,UAAU,QAAU,WACpC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,mBACnD,KAAK,IAAI,KAAK,OAElB,EAAoB,UAAU,QAAU,WACpC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,WAAY,gBACnD,KAAK,KAAK,EAAI,KAAK,KAAK,KAAO,GAC/B,KAAK,KAAK,EAAI,KAAK,KAAK,IAAM,GAC9B,KAAK,IAAI,KAAK,OAElB,EAAoB,UAAU,QAAU,WACpC,MAAc,KAAK,MAAM,MAAM,eACnB,CACR,WAAY,EAAK,SAAS,QAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,YAEK,IAChB,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,iBAAiB,KAC3B,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,QACpD,KAAK,KAAK,EAAI,IACd,KAAK,IAAI,KAAK,OAEX,GACT,OAAO,YAAY,WACrB,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,cACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,MAAQ,EACd,EAAM,aACN,EAAM,cACN,EAAM,WAAa,EAAM,MAAM,KAAK,YAAY,IAAM,EAAM,oBAAqB,KAAM,GACvF,EAAM,MAAM,OAAO,KAAK,OAAO,OAAO,OAAO,SAAU,EAAM,gBAAiB,GAC9E,EAAM,MAAM,OAAO,KAAK,EAAK,cAAc,WAAY,EAAM,YAAa,GACnE,EAEX,SAAa,UAAU,WAAa,WAChC,KAAK,QAAU,GAAI,GAAK,oBAAoB,KAAK,OACjD,KAAK,QAAQ,EAAI,KAAK,MAAM,gBAAkB,EAC9C,KAAK,QAAQ,EAAI,KAAK,MAAM,YAAY,EAAI,GAC5C,KAAK,QAAQ,SAAS,EAAK,cAAc,eACzC,KAAK,MAAM,IAAI,SAAS,KAAK,UAEjC,EAAa,UAAU,YAAc,WACjC,KAAK,QAAQ,MAAQ,EACrB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,QAAQ,MAAQ,GACrB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,WAAY,CAAC,KACb,MAAO,KAGf,EAAa,UAAU,aAAe,WAClC,MAAY,KACZ,KAAK,MAAM,KAAK,MAAM,UAAU,EAAK,aAAa,uBAAwB,IAC1E,KAAK,MAAM,OAAO,aAAa,KAAK,SACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,EAAG,MACH,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,QAAQ,cAI1B,EAAa,UAAU,cAAgB,WACnC,KAAK,MAAM,OAAO,IAAI,EAAK,cAAc,WAAY,KAAK,YAAa,MACvE,KAAK,yBACL,KAAK,gBAET,EAAa,UAAU,cAAgB,YACnC,AAAI,EAAQ,QACR,MAAK,MAAM,OAAO,IAAI,EAAK,cAAc,WAAY,KAAK,YAAa,MACvE,KAAK,yBACL,KAAK,iBAGb,EAAa,UAAU,oBAAsB,WACzC,KAAK,MAAM,MAAM,KAAK,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MAC5E,KAAK,MAAM,MAAM,KAAK,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,OAEhF,EAAa,UAAU,uBAAyB,WAC5C,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MAC3E,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,OAE/E,EAAa,UAAU,YAAc,WACjC,KAAK,WAAW,SAChB,KAAK,yBACL,KAAK,gBAET,EAAa,UAAU,gBAAkB,WACrC,KAAK,yBACL,KAAK,MAAM,OAAO,IAAI,EAAK,cAAc,WAAY,KAAK,YAAa,MACvE,KAAK,WAAW,SAChB,KAAK,MAAQ,MAEV,GACT,OAAO,OAAO,cAChB,EAAK,aAAe,IACrB,MAAS,MAAO,KAsEnB,SACA,AAAC,aACG,MAAe,OAAO,KAAK,WACT,OAAO,YAAY,cAErC,AAAC,aACG,EAAc,WAAgB,sBAC9B,EAAc,cAAmB,yBACjC,EAAc,oBAAyB,+BACvC,EAAc,mBAAwB,gCACvC,EAAgB,EAAK,eAAkB,GAAK,cAAgB,KAC/D,MAA8B,YAC1B,UAAU,EAAU,GACpB,aACI,MAAO,GAAO,KAAK,KAAM,CACrB,QAAS,EAAK,aAAa,sBACzB,KAEV,SAAS,UAAU,KAAO,YACtB,KAAK,YAAc,EACnB,KAAK,YAAc,KAAK,YAAY,YACpC,KAAK,cAAgB,GACrB,KAAK,iBAAmB,GACxB,KAAK,kBAAoB,GACzB,KAAK,cAAgB,KAAK,MAAM,KAAK,IAAI,WACzC,KAAK,MAAQ,GACb,KAAK,MAAQ,GACb,KAAK,UAAY,KAAK,kBACtB,KAAK,qBACL,KAAK,IAAM,KACX,KAAK,OAAS,KACd,KAAK,UAAY,KACjB,KAAK,MAAQ,KACb,KAAK,SAAW,KAChB,KAAK,aAAe,KACpB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAC5C,KAAK,UAAU,eAAe,KAAK,aACnC,KAAK,KAAK,IAAI,gBACd,KAAK,KAAK,MAAM,gBAAgB,CAAE,MAAO,KAAK,eAElD,EAAS,UAAU,OAAS,WACxB,KAAK,UAAY,GAAI,GAAK,eAAe,KAAM,KAAK,aACpD,KAAK,OAAS,GAAI,GAAK,eAAe,MACtC,KAAK,QAAU,GAAI,GAAK,qBAAqB,MAC7C,KAAK,SAAW,GAAI,GAAK,gBAAgB,MACzC,KAAK,MAAQ,GAAI,GAAK,cAAc,MACpC,KAAK,SAAW,GAAI,GAAK,iBAAiB,MAC1C,KAAK,YAAc,GAAI,GAAK,YAAY,MACxC,KAAK,KAAO,GAAI,GAAK,KAAK,MAC1B,KAAK,UAAY,GAAI,GAAK,kBAAkB,MAC5C,KAAK,MAAQ,GAAI,GAAK,cAAc,MACpC,KAAK,aAAe,GAAI,GAAK,aAAa,MAC1C,KAAK,UACL,KAAK,eACL,KAAK,kBACL,KAAK,SACL,KAAK,mBACL,KAAK,gBACL,KAAK,aAAa,KAAK,YAAY,OACnC,KAAK,SAAS,KAAK,YAAY,OAC/B,KAAK,gBACL,KAAK,cACL,KAAK,iBACL,KAAK,oBACL,KAAK,qBACL,KAAK,iBAAmB,GAAI,GAAK,iBAAiB,MAClD,KAAK,iBAAiB,4BAA4B,KAAK,UAAW,KAAK,IAAI,GAC3E,KAAK,aACL,KAAK,aAET,EAAS,UAAU,2BAA6B,WAC5C,MAAY,KACZ,KAAK,qBACL,KAAK,KAAK,SAAS,CACf,KAAM,GACN,MAAO,IACP,QAAS,KACT,SAAU,WACN,MAAmB,OAAO,KAAK,IAAI,QAAQ,EAAG,MACjC,OAAO,KAAK,IAAI,QAAQ,IAAK,OACzB,OAAO,KAAK,IAAI,OACjC,EAAM,mBAAmB,EAAc,EAAQ,OAI3D,EAAS,UAAU,QAAU,YACzB,EAAK,GAAG,EAAK,cAAc,YAAa,KAAK,iBAAkB,MAC/D,KAAK,MAAM,KAAK,IAEpB,EAAS,UAAU,iBAAmB,cAClC,GAAI,IAAc,GAEd,OAEJ,EAAE,KAAK,KAAK,MAAO,GACnB,KAAK,kBAET,EAAS,UAAU,uBAAyB,YACxC,KAAK,cAAc,EAAU,EAAG,EAAU,EAAG,KAC7C,KAAK,mBAAmB,GACxB,KAAK,MAAM,YACX,KAAK,QAAQ,KAAK,MAAM,IAAK,KAAO,KAExC,EAAS,UAAU,mBAAqB,YAEpC,KAAK,WAAW,WAAW,cAAc,EAAU,YAEvD,EAAS,UAAU,cAAgB,cAC/B,KAAK,kBAAkB,EAAQ,GAC/B,KAAK,KAAK,QAAU,EACpB,AAAI,KAAK,cAAgB,GACrB,KAAK,MAAM,YAGnB,EAAS,UAAU,YAAc,YAC7B,EAAM,KAAK,OAAO,YAAY,OAAO,QAAS,KAAK,eAAgB,MACnE,EAAM,SAAS,EAAM,gBAAkB,EAAK,cAAc,eAAiB,EAAK,cAAc,aAC9F,KAAK,KAAK,qBAAqB,KAAK,GACpC,KAAK,KAAK,kBACV,MAAuB,KAAK,iBAAiB,EAAM,UACnD,AAAI,GACA,MAAK,UAAU,qBACf,KAAK,qBAAqB,KAGlC,EAAS,UAAU,eAAiB,YAChC,MAAY,KAAK,KAAK,qBAAqB,QAAQ,GACnD,AAAI,EAAQ,IACR,MAAK,KAAK,qBAAqB,OAAO,EAAO,GAC7C,AAAI,KAAK,KAAK,qBAAqB,SAAW,GAC1C,KAAK,qBAGb,MAAgB,EAAM,SACtB,GAAI,IAAc,EAAK,SAAS,cAAgB,IAAc,EAAK,SAAS,eACxE,OAEJ,MAAuB,KAAK,iBAAiB,GAC7C,GAAI,GACA,AAAI,IAAc,EAAK,SAAS,eAC5B,KAAK,kBAAkB,EAAM,EAAG,EAAM,GAE1C,OAEJ,KAAK,kBAAkB,EAAM,EAAG,EAAM,IAE1C,EAAS,UAAU,kBAAoB,cACnC,KAAK,SAAS,UAAU,QAAQ,EAAG,EAAG,GACtC,KAAK,SAAS,mBAAmB,YAAY,EAAG,GAChD,KAAK,SAAS,mBAAmB,QAAQ,EAAG,EAAG,IAEnD,EAAS,UAAU,kBAAoB,YACnC,MAAW,KAAK,MAAM,iBAAiB,aAAa,IACpD,SAAK,SAAS,GACP,GAEX,EAAS,UAAU,sBAAwB,YACvC,MAAc,KAAK,MAAM,oBAAoB,aAAa,IAC1D,SAAQ,SACR,EAAQ,SAAS,GACV,GAEX,EAAS,UAAU,qBAAuB,cACtC,MAAqB,EAAQ,aAAa,KAAK,YAAyB,MAAO,GAAY,OAAS,IACpG,GAAI,EACA,OAEJ,EAAQ,aAAa,KAAK,CAAE,KAAM,EAAM,UAAW,KAAK,KAAK,YAC7D,EAAQ,WACR,EAAK,OACL,KAAK,MAAM,UACX,KAAK,SAAS,QAAQ,YAAY,EAAQ,EAAG,EAAQ,GACrD,KAAK,SAAS,QAAQ,QAAQ,GAAI,EAAQ,EAAG,EAAQ,GACrD,KAAK,KAAK,kBAAkB,KAAK,GACjC,KAAK,kBAET,EAAS,UAAU,uBAAyB,cACxC,AAAI,EAAU,eAAiB,IAC3B,KAAK,KAAK,oBAAoB,KAAK,GAEvC,AAAI,EAAK,YAAc,IACnB,GAAK,YACL,KAAK,SAAS,UAAU,YAAY,EAAU,EAAG,EAAU,GAC3D,KAAK,SAAS,UAAU,QAAQ,GAAI,EAAU,EAAG,EAAU,GAC3D,KAAK,MAAM,aAEf,EAAU,WACV,KAAK,kBAET,EAAS,UAAU,mBAAqB,cACpC,EAAK,oBACL,KAAK,aAAa,EAAK,GACvB,KAAK,MAAM,UACX,AAAI,KAAK,KAAK,kBAAoB,MAC9B,MAAK,KAAK,gBAAkB,EAC5B,KAAK,KAAK,oBAAsB,EAAK,IAG7C,EAAS,UAAU,mBAAqB,gBACpC,MAAmB,KAAK,SAAS,MAAM,gBAAgB,GACvD,KAAK,aAAa,EAAG,EAAa,EAAG,EAAa,GAClD,KAAK,MAAM,WAEf,EAAS,UAAU,oBAAsB,gBAGrC,GAFA,KAAK,MAAM,UACX,EAAM,OAAO,OAAO,EAAK,QACrB,EAAK,UACL,EAAM,WAGN,MAAmB,KAAK,SAAS,MAAM,gBAAgB,GACvD,KAAK,aAAa,EAAG,EAAa,EAAG,EAAa,KAG1D,EAAS,UAAU,WAAa,YAC5B,KAAK,SAAS,YAAY,YAAY,EAAM,EAAG,EAAM,GACrD,KAAK,SAAS,YAAY,QAAQ,EAAG,EAAM,EAAG,EAAM,GACpD,KAAK,MAAM,YAEf,EAAS,UAAU,qBAAuB,gBACtC,EAAY,MAAQ,cACpB,EAAY,SAAS,EAAK,cAAc,2BACxC,EAAY,eACZ,EAAY,gBAAgB,CAAC,KAAK,SAAS,oBAAoB,MAAO,KAAK,SAAS,oBAAoB,QACxG,EAAY,aAAa,EAAK,KAAK,SAAS,EAAI,GAChD,MAAmB,KAAK,SAAS,MAAM,gBAAgB,GACvD,KAAK,SAAS,wBAAwB,YAAY,EAAa,EAAG,EAAa,GAC/E,KAAK,SAAS,wBAAwB,QAAQ,GAAI,EAAa,EAAG,EAAa,GAC/E,KAAK,KAAK,0BAA0B,KAAK,GACzC,KAAK,MAAM,sBAEf,EAAS,UAAU,sBAAwB,gBACvC,EAAY,MAAQ,SACpB,MAAmB,KAAK,SAAS,MAAM,gBAAgB,GACvD,KAAK,SAAS,SAAS,QAAQ,EAAG,EAAa,EAAG,EAAa,GAC/D,KAAK,YAAY,EAAY,GAC7B,KAAK,eAAe,GACpB,EAAY,UACZ,KAAK,UACL,KAAK,IAAI,WAAW,UAAU,KAAK,MAAM,QACzC,KAAK,MAAM,sBACX,KAAK,qBAET,EAAS,UAAU,uBAAyB,WACxC,KAAK,MAAM,IAAI,cAAe,KAAK,cAAe,MAClD,KAAK,MAAM,IAAI,YAAa,KAAK,YAAa,MAC9C,KAAK,MAAM,IAAI,OAAO,MAAM,OAAO,mBAAoB,KAAK,YAAa,MACzE,KAAK,IAAI,MAAM,IAAI,YAAa,KAAK,YAAa,OAEtD,EAAS,UAAU,oBAAsB,WACrC,KAAK,MAAM,GAAG,cAAe,KAAK,cAAe,MACjD,KAAK,MAAM,GAAG,YAAa,KAAK,YAAa,MAC7C,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,mBAAoB,KAAK,YAAa,MACxE,KAAK,IAAI,MAAM,GAAG,YAAa,KAAK,YAAa,OAErD,EAAS,UAAU,iBAAmB,cAClC,MAAO,QAAO,KAAK,MAAM,QAAQ,EAAc,EAAG,EAAc,EAAG,EAAY,EAAG,EAAY,IAElG,EAAS,UAAU,SAAW,WAE1B,AAAI,KAAK,KAAO,KAAK,QACjB,KAAK,OAAO,UAGpB,EAAS,UAAU,cAAgB,WAC/B,MAAO,GAAK,SAAS,UAAY,EAAK,SAAS,SAEnD,EAAS,UAAU,eAAiB,WAChC,MAAO,GAAK,SAAS,UAAa,GAAK,SAAS,KAAO,GAAK,EAAK,SAAS,UAAY,GAE1F,EAAS,UAAU,aAAe,WAC9B,KAAK,IAAI,kBAAkB,OAC3B,KAAK,IAAI,kBAAkB,GAAG,OAAO,YAAY,YAAY,MAAO,KAAK,yBAA0B,MACnG,KAAK,IAAI,gBAAgB,OACzB,KAAK,IAAI,gBAAgB,GAAG,OAAO,YAAY,YAAY,MAAO,KAAK,sBAAuB,MAC9F,KAAK,cACL,KAAK,sBACL,KAAK,wBAET,EAAS,UAAU,YAAc,WAC7B,KAAK,SAAW,GAAI,GAAK,iBAAiB,KAAM,KAAK,KACrD,KAAK,SAAS,GAAG,EAAK,sBAAsB,SAAU,KAAK,kBAAmB,MAC9E,KAAK,SAAS,GAAG,EAAK,sBAAsB,SAAU,KAAK,kBAAmB,OAElF,EAAS,UAAU,kBAAoB,YACnC,AAAI,EAAQ,OAAS,EAAK,YAAY,MAClC,MAAK,iBAAmB,KAGhC,EAAS,UAAU,kBAAoB,YACnC,AAAI,EAAQ,OAAS,EAAK,YAAY,MAClC,MAAK,iBAAmB,KAGhC,EAAS,UAAU,kBAAoB,YACnC,MAAc,GAAI,GAAK,mBAAmB,KAAM,KAAK,KAAM,KAAK,SAAS,eACzE,EAAQ,KAAK,EAAK,wBAAwB,YAAa,KAAK,mBAAoB,MAChF,EAAQ,iBAAiB,GACzB,KAAK,SAAS,eAAe,QAAQ,GAAI,EAAO,EAAG,EAAO,GAC1D,KAAK,SAAS,OAAO,QAAQ,EAAG,EAAO,EAAG,EAAO,GACjD,KAAK,MAAM,SACX,KAAK,QAAQ,KAAK,MAAM,IAAK,KAAO,KAExC,EAAS,UAAU,mBAAqB,YACpC,KAAK,qBAAqB,GAC1B,KAAK,qBAET,EAAS,UAAU,sBAAwB,YACvC,MAAc,GAAI,GAAK,qBAAqB,KAAM,KAAK,MACvD,EAAQ,KAAK,EAAK,0BAA0B,YAAa,KAAK,qBAAsB,MACpF,EAAQ,iBAAiB,GACzB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,yBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,uBAAwB,CAAE,OAAQ,KAG5E,EAAS,UAAU,qBAAuB,YACtC,KAAK,qBAAqB,GAC1B,KAAK,qBAET,EAAS,UAAU,OAAS,cACxB,KAAK,SAAS,OAAO,GACrB,KAAK,mBACL,KAAK,kBAAkB,IAE3B,EAAS,UAAU,iBAAmB,WAClC,AAAI,KAAK,cACL,AAAI,KAAK,WAAW,UAAY,IAAS,KAAK,KAAK,eAAiB,IAChE,MAAK,IAAI,KAAK,EAAK,aAAa,IAAK,IACrC,KAAK,WAAW,QAIpB,AAAI,KAAK,WAAW,SAChB,CAAI,KAAK,IAAI,MAAM,kBAAoB,EAAK,aAAa,MACrD,KAAK,IAAI,KAAK,EAAK,aAAa,KAAM,IAE1C,KAAK,WAAW,SAI5B,EAAS,UAAU,kBAAoB,YACnC,AAAI,KAAK,YAAY,SACjB,MAAK,YAAY,eAAiB,EAAQ,OAGlD,EAAS,UAAU,aAAe,YAC9B,MAAqB,CAAC,EAAK,SAAS,cAAe,EAAK,SAAS,qBACjE,GAAI,EAAe,SAAS,EAAM,UAC9B,OAEJ,MAAW,GAAI,GAAK,UAAU,KAAM,GACpC,EAAK,SAAS,EAAK,cAAc,aACjC,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,wBAA0B,YACzC,MAAoB,KAAK,SAAS,+BACpB,GAAI,GAAK,qBAAqB,KAAM,EAAW,IAEjE,EAAS,UAAU,sBAAwB,YACvC,MAAoB,KAAK,SAAS,yBAAyB,KAC7C,GAAI,GAAK,mBAAmB,KAAM,EAAS,IAE7D,EAAS,UAAU,mBAAqB,YACpC,MAAc,KAAK,SAAS,sBAAsB,GAClD,EAAS,GAAG,EAAK,UAAU,MAAO,EAAQ,OAAQ,GAClD,EAAS,GAAG,EAAK,YAAY,KAAM,WAC/B,EAAQ,WAEZ,EAAS,GAAG,OAAO,YAAY,OAAO,QAAS,WAC3C,EAAQ,YAGhB,EAAS,UAAU,0BAA4B,YAC3C,MAAc,KAAK,SAAS,6BAA6B,GACzD,EAAK,GAAG,EAAK,qBAAqB,SAAU,WACxC,EAAQ,GAAK,KAEjB,EAAK,GAAG,EAAK,UAAU,MAAO,WAC1B,EAAQ,WAEZ,EAAK,GAAG,EAAK,qBAAqB,WAAY,WAC1C,EAAQ,WAEZ,EAAK,GAAG,OAAO,YAAY,OAAO,QAAS,WACvC,EAAQ,YAGhB,EAAS,UAAU,qBAAuB,YACtC,EAAM,SAAS,EAAK,cAAc,iBAClC,KAAK,YAAY,IAErB,EAAS,UAAU,oBAAsB,YACrC,EAAM,SAAS,EAAK,cAAc,QAEtC,EAAS,UAAU,gBAAkB,WACjC,MAAO,CACH,SAAU,EACV,OAAQ,EACR,mBAAoB,EACpB,qBAAsB,KAAK,YAAY,UAAU,iBAGzD,EAAS,UAAU,mBAAqB,WACpC,AAAK,KAAK,YACN,MAAK,WAAa,GAAI,GAAK,uBAAuB,QAG1D,EAAS,UAAU,QAAU,WACzB,KAAK,KAAO,GAAI,GAAK,SAAS,KAAM,EAAK,SAAS,QAAS,EAAK,SAAS,MACzE,KAAK,KAAK,MAAQ,GAClB,KAAK,KAAK,SAAS,EAAK,cAAc,OAE1C,EAAS,UAAU,aAAe,WAC9B,KAAK,UAAY,GAAI,GAAK,UAAU,KAAM,KAAK,KAAK,WAAY,KAAK,KAAK,aAC1E,KAAK,UAAU,IAAI,gBAAgB,SAAW,KAAK,SAAS,oBAAoB,QAChF,KAAK,UAAU,MAAM,gBAAgB,SAAW,KAAK,SAAS,oBAAoB,MAClF,KAAK,UAAU,OAAO,gBAAgB,SAAW,KAAK,SAAS,oBAAoB,MACnF,KAAK,UAAU,KAAK,gBAAgB,SAAW,KAAK,SAAS,oBAAoB,MACjF,KAAK,UAAU,MAAM,KAAK,OAE9B,EAAS,UAAU,gBAAkB,WACjC,MAAY,KACZ,KAAK,UAAU,gBAAgB,EAAK,SAAS,KAAO,GAAG,IAAI,YACvD,MAAc,EAAM,QAAQ,OAAO,SAAS,CAAE,SAAU,EAAW,KAAM,IAAK,EAAW,IAAK,OAAQ,EAAW,QAAU,EAAW,SACtI,EAAM,QAAQ,qBAAqB,MAG3C,EAAS,UAAU,OAAS,WACxB,KAAK,IAAM,GAAI,GAAK,IAAI,MACxB,KAAK,IAAI,EAAI,KAAK,KAAK,EAAI,KAAK,KAAK,WAAa,EAClD,KAAK,IAAI,EAAI,KAAK,KAAK,EAAI,KAAK,KAAK,YACrC,KAAK,IAAI,SAAS,KAAK,MAE3B,EAAS,UAAU,iBAAmB,WAClC,KAAK,cAAgB,GAAI,GAAK,cAAc,MAC5C,KAAK,cAAc,OACnB,KAAK,IAAI,SAAS,KAAK,gBAE3B,EAAS,UAAU,kBAAoB,WACnC,KAAK,cAAc,EAAI,KAAK,IAAI,EAAI,GACpC,KAAK,cAAc,EAAI,KAAK,IAAI,EAAI,IACpC,KAAK,cAAc,SACnB,KAAK,cAAc,QAEvB,EAAS,UAAU,cAAgB,WAC/B,MAAc,CACV,MAAO,SACP,MAAO,IACP,OAAQ,EACR,SAAU,IAEd,KAAK,WAAa,GAAI,GAAK,aAAa,KAAM,GAC9C,KAAK,WAAW,SAAS,EAAK,cAAc,aAC5C,KAAK,WAAW,OAChB,KAAK,IAAI,SAAS,KAAK,aAE3B,EAAS,UAAU,aAAe,YAC9B,MAAY,KACZ,KAAK,UAAY,EAAE,MAAM,EAAU,WAC/B,MAAe,EAAM,MAAM,UAAU,MACrC,SAAS,EAAI,EAAM,uBACnB,EAAS,OACF,KAGf,EAAS,UAAU,SAAW,YAC1B,MAAY,KACZ,EAAE,MAAM,EAAU,WACd,EAAM,aAGd,EAAS,UAAU,QAAU,WACzB,MAAc,CACV,MAAO,EAAK,cAAc,MAC1B,SAAU,KAAK,MAAM,OACrB,YAAa,KAAK,iBAClB,eAAgB,KAAK,SAAS,gBAAgB,MAC9C,kBAAmB,KAAK,SAAS,oBAAoB,SAE9C,GAAI,GAAK,KAAK,KAAM,GAC/B,SAAK,OACL,EAAK,YAAY,KAAK,KAAK,WAAa,EAAG,KAAK,KAAK,aACrD,KAAK,IAAI,SAAS,GAClB,KAAK,MAAM,KAAK,GAChB,KAAK,yBAAyB,GAE9B,KAAK,WAAW,SAAS,GAClB,GAEX,EAAS,UAAU,eAAiB,WAChC,MAAO,IAAI,QAAO,KAAK,UAAU,EAAG,EAAG,KAAK,KAAK,WAAY,KAAK,KAAK,cAE3E,EAAS,UAAU,cAAgB,WAC/B,MAAiB,KAAK,uBACtB,KAAK,WAAa,GAAI,GAAK,WAAW,MACtC,KAAK,WAAW,WAAW,GAC3B,KAAK,WAAW,SAAS,EAAK,cAAc,YAC5C,KAAK,IAAI,SAAS,KAAK,aAE3B,EAAS,UAAU,qBAAuB,WACtC,MAAiB,MAAM,QAAQ,SAAS,cACxC,MAAI,KAAe,KACR,SAAS,IAAe,EAE/B,KAAK,YAAc,EACZ,EAEJ,GAEX,EAAS,UAAU,YAAc,WAC7B,GAAI,KAAK,cAAgB,EACrB,OAEJ,MAAe,GAAI,GAAK,aAAa,MACrC,EAAS,EAAI,KAAK,gBAAkB,EACpC,EAAS,EAAI,KAAK,IAAI,EAAI,EAAK,SAAS,UAAY,IACpD,EAAS,KAAK,KACd,KAAK,IAAI,SAAS,GAClB,MAAgB,GAAI,GAAK,UAAU,MACnC,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,eAAiB,WAChC,KAAK,YAAc,KAAK,IAAI,WAAW,EAAG,EAAG,EAAG,EAAG,WAAY,gBAC/D,KAAK,YAAY,EAAI,KAAK,gBAAkB,EAC5C,KAAK,YAAY,EAAI,EAAK,SAAS,UAAY,EAC/C,KAAK,YAAY,SAAS,EAAK,cAAc,eAC7C,KAAK,YAAY,OACjB,KAAK,IAAI,SAAS,KAAK,cAE3B,EAAS,UAAU,kBAAoB,WACnC,KAAK,eAAiB,GAAI,GAAK,eAAe,MAC9C,KAAK,eAAe,SAAS,EAAK,cAAc,gBAChD,KAAK,eAAe,OACpB,KAAK,eAAe,GAAG,EAAK,oBAAoB,iBAAkB,KAAK,iBAAkB,MACzF,KAAK,IAAI,SAAS,KAAK,iBAE3B,EAAS,UAAU,iBAAmB,WAClC,MAAoB,KAAK,YAAY,WAAW,MAAM,KAAK,QAC1C,SAAS,IAAkB,IAC1B,IAAe,EAAI,IAAO,GAC5C,KAAK,KAAK,gBAAgB,EAAa,GACvC,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,cACvC,KAAK,MAAM,KAAK,EAAK,aAAa,YAAa,CAAE,OAAQ,OAGjE,EAAS,UAAU,mBAAqB,WACpC,KAAK,gBAAkB,GAAI,GAAK,gBAAgB,KAAM,KAAK,eAC3D,KAAK,gBAAgB,SAAS,EAAK,cAAc,mBACjD,KAAK,gBAAgB,OACrB,KAAK,IAAI,SAAS,KAAK,kBAE3B,EAAS,UAAU,YAAc,WAC7B,MAAmB,KAAK,KAAK,aAAa,kBAC1C,MAAO,GAAa,QAAQ,KAAK,eAAiB,EAAa,OAAS,GAE5E,EAAS,UAAU,UAAY,WAC3B,MAAY,KACZ,GAAI,CAAC,EAAK,KAAK,YACX,OAEJ,MAAsB,KAAK,YAAY,UACvC,GAAI,EAAgB,UAAY,GAC5B,OAEJ,KAAK,KAAK,YAAY,EAAgB,MAAO,WACzC,MAAQ,EAAgB,IAChB,EAAM,KAAK,YAAc,EAAgB,EACjD,EAAM,UAAU,CAAE,EAAG,EAAG,EAAG,IAC3B,AAAI,EAAgB,aAChB,EAAM,KAAK,YAAY,IAAK,WACxB,EAAM,YAAY,cAKlC,EAAS,UAAU,eAAiB,WAChC,MAAoB,KAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,UAClE,GAAI,IAAkB,GAClB,OAEJ,MAAmB,KAAK,MAAM,OAAS,EACvC,GAAI,IAAiB,IACjB,KAAK,mBACL,OAEJ,MAAyB,KAAK,eAAe,EAAK,SAAS,kBAAkB,SAAW,IACzE,KAAK,MAAM,MAAM,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YAAc,KAC1G,GAAI,GAAsB,GACtB,MAAiB,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,WAAa,EAAK,SAAS,WAAa,EAAK,WAAa,EAAK,SAAS,YACtH,EAAW,MAAM,YAAkB,MAAO,GAAK,eAClE,AAAI,GACA,KAAK,qBAIjB,EAAS,UAAU,eAAiB,YAChC,MAAO,MAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,WAAa,KAExE,EAAS,UAAU,cAAgB,gBAC/B,MAAY,OACI,KAAK,WAAW,WAAW,gBAC3B,GAAI,GAAK,UAAU,KAAM,GACzC,EAAU,KAAK,UAAW,WAAc,MAAO,GAAM,WAAW,WAAW,cAAc,KACzF,EAAU,EAAI,EACd,EAAU,EAAI,EACd,EAAU,MAAQ,EAClB,EAAU,SAAS,EAAK,cAAc,WACtC,EAAU,iBACV,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,mBAAqB,YACpC,MAAY,KACZ,KAAK,MACA,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YACnE,OAAO,YAAkB,MAAO,GAAS,QAAQ,EAAO,EAAG,EAAO,EAAG,EAAK,EAAG,EAAK,IAAM,EAAO,kBAC/F,QAAQ,YACT,MAAoB,EAAM,KAAK,YAAY,KAAK,YAAwB,MAAO,GAAW,OAAS,IACnG,GAAI,EACA,OAEJ,EAAM,OAAO,UAGrB,EAAS,UAAU,mBAAqB,YACpC,KAAK,MACA,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YAAc,KACjF,OAAO,YAAkB,MAAO,GAAS,QAAQ,EAAK,EAAG,EAAK,EAAG,EAAK,EAAG,EAAK,IAAM,EAAK,kBACzF,QAAQ,YACT,EAAK,aAGb,EAAS,UAAU,kBAAoB,cACnC,MAAS,KAAK,MAAM,eAAe,aAAa,IAChD,AAAI,GACA,GAAG,QAAQ,EAAO,YAClB,EAAG,EAAI,EAAM,EACb,EAAG,EAAI,OAAO,QAAQ,OAAO,OAAO,GACpC,EAAG,QACH,EAAG,SAGX,EAAS,UAAU,qBAAuB,YACtC,MAAY,OACU,CAAC,EAAK,SAAS,cAAe,EAAK,SAAS,aAAc,EAAK,SAAS,kBACvE,EAAgB,SAAS,EAAM,UACtD,GAAI,GACA,KAAK,IAAI,YAAY,mBACrB,OAEJ,KAAK,KAAK,YAAY,IAAK,WACvB,EAAM,IAAI,oBAAoB,GAC9B,EAAM,eAGd,EAAS,UAAU,iBAAmB,YAClC,MAAqB,KAAK,YAAY,UAAU,eAChD,MAAI,KAAmB,EAAK,SAAS,cAC1B,IAAa,EAAK,SAAS,eAAiB,IAAa,EAAK,SAAS,oBAE3E,IAAa,GAExB,EAAS,UAAU,kBAAoB,WACnC,AAAI,KAAK,KAAK,iBACV,KAAK,kBAGb,EAAS,UAAU,eAAiB,WAChC,MAAY,KACZ,GAAI,KAAK,kBACL,OAEJ,KAAK,YAAY,UACjB,KAAK,IAAI,YAAY,kBACrB,KAAK,OAAO,KAAK,EAAc,eAC/B,MAAyB,KAAK,YAAY,KAAK,YAAmB,MAAO,GAAM,KAAK,WAAa,EAAK,SAAS,aAC5F,KAAK,kBAAoB,EACtC,GACA,KAAK,iBAEe,EAAE,KAAK,eAAe,EAAc,KAAK,KAAK,oBAAqB,KAAK,KAAK,oBACvG,GAAI,EAAoB,SAAW,GAC/B,KAAK,sBACL,OAEJ,MAAwB,EACxB,EAAoB,QAAQ,YACxB,EAAK,OACL,EAAK,KAAK,OAAO,YAAY,OAAO,QAAS,WACzC,AAAI,EAAE,IAAsB,EAAoB,QAC5C,EAAM,2BAKtB,EAAS,UAAU,UAAY,WAC3B,MAAO,MAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,aAEzF,EAAS,UAAU,oBAAsB,WACrC,GAAI,KAAK,kBACL,OAEJ,MAAsB,KAAK,KAAK,iBAAmB,GAAK,KAAK,gBAC3C,KAAK,KAAK,OAAU,GAAkB,EAAI,GAC5D,KAAK,UAAU,QAAU,EACzB,KAAK,IAAI,YAAY,aAAa,KAAK,UAAU,QACjD,KAAK,mBAAmB,KAAK,KAAK,gBAAiB,KAAK,KAAK,OAAQ,GACrE,MAAkC,EAAkB,KAAO,IAC3D,KAAK,KAAK,YAAY,EAA6B,KAAK,iCAAkC,KAAM,OAEpG,EAAS,UAAU,gBAAkB,WACjC,MAAO,MAAK,MAAM,SAAS,SAAW,OAAO,OAAO,UAExD,EAAS,UAAU,iCAAmC,WAClD,MAAY,OACK,KAAK,mBAAqB,IAAS,KAAK,mBACzD,GAAI,GACA,KAAK,gBACL,OAEJ,MAAqB,KAAK,oBAC1B,GAAI,GACA,KAAK,kBACL,OAKJ,GAHA,KAAK,4BACL,KAAK,IAAI,OAAO,KAAK,KAAK,qBAC1B,KAAK,iBAAiB,qBAAqB,KAAK,UAAW,KAAK,KAAK,qBACjE,KAAK,kBACL,MAAmB,KAAK,cACxB,GAAI,GACA,MAAmB,KAAK,yBACxB,KAAK,iBAAiB,GACtB,KAAK,mBAGL,MAAK,sBACL,KAAK,sBACL,KAAK,oBAIT,MAAqB,KAAK,2BACH,IACvB,KAAK,yBACL,KAAK,cAAc,EAAgB,GACnC,KAAK,KAAK,YAAY,EAAkB,WACpC,EAAM,iBACN,EAAM,iBAAiB,GACvB,EAAM,mBAIlB,EAAS,UAAU,oBAAsB,WACrC,KAAK,OAAO,IAAI,CACZ,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,KAAM,MAGd,EAAS,UAAU,oBAAsB,WACrC,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,sBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,IAAM,MAAO,OAGtF,EAAS,UAAU,aAAe,WAC9B,KAAK,aACL,KAAK,KAAK,WACV,KAAK,IAAI,oBACT,KAAK,OAAO,KAAK,EAAc,oBAAqB,OAExD,EAAS,UAAU,0BAA4B,WAE3C,GAAI,KAAK,KAAK,kBAAoB,MAC9B,KAAK,KAAK,oBAAsB,KAAK,IAAI,EACzC,OAEJ,MAAa,EAAK,KAAK,OAAS,IACrB,KAAK,KAAK,EAAI,IACb,KAAK,KAAK,EAAI,KAAK,KAAK,WAAa,EACjD,KAAK,KAAK,oBAAsB,OAAO,KAAK,MAAM,KAAK,KAAK,oBAAqB,EAAM,IAE3F,EAAS,UAAU,iBAAmB,WAClC,MAAO,MAAK,MACP,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YACnE,KAAK,YAAkB,MAAO,GAAK,KAAK,WAAa,EAAK,SAAS,YAE5E,EAAS,UAAU,kBAAoB,WACnC,MAAO,MAAK,UAAU,oBAAsB,KAAK,UAAU,sBAE/D,EAAS,UAAU,cAAgB,WAC/B,MAAY,OACO,IACnB,KAAK,KAAK,YAAY,EAAe,GAAI,WACrC,EAAM,mBAEV,KAAK,KAAK,YAAY,EAAc,WAChC,EAAM,uBAEV,KAAK,KAAK,YAAY,EAAe,KAAM,WACvC,AAAI,EAAK,KAAK,sBAAwB,IAAS,EAAM,aAAa,QAC9D,GAAM,wBACN,EAAM,UAAU,cAAc,EAAM,YAAa,EAAM,UAAU,qBAAuB,EAAM,UAAU,qBAGxG,GAAM,IAAI,mBAAmB,YAAY,KAAK,EAAY,MAAO,EAAM,sBAAuB,GAC9F,EAAM,IAAI,uBAAuB,EAAM,UAAU,mBAAoB,EAAM,UAAU,yBAG7F,KAAK,KAAK,YAAY,EAAe,IAAM,WACvC,EAAM,MAAM,WAGpB,EAAS,UAAU,eAAiB,WAChC,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,UACvC,KAAK,MAAM,KAAK,EAAK,aAAa,QAAS,CAAE,OAAQ,IAEzD,KAAK,IAAI,iBAEb,EAAS,UAAU,mBAAqB,WACpC,MAAY,GAAI,GAAK,UAAU,MAC/B,EAAM,EAAI,KAAK,IAAI,EACnB,EAAM,EAAI,KAAK,IAAI,EACnB,EAAM,SAAS,EAAK,cAAc,mBAClC,EAAM,KAAK,EAAK,eAAe,qBAAsB,KAAK,oBAAqB,MAC/E,EAAM,UAAU,KAAK,IAAI,EAAG,KAAK,IAAI,GACrC,KAAK,IAAI,SAAS,GAClB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,yBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,uBAAwB,CAAE,OAAQ,IAAM,MAAO,KAGzF,EAAS,UAAU,oBAAsB,YACrC,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,cACvC,KAAK,MAAM,KAAK,EAAK,aAAa,YAAa,CAAE,OAAQ,MAE7D,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,kBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAEjE,KAAK,QAAQ,KAAK,MAAM,IAAK,KAAO,IACpC,KAAK,cAAc,GACnB,KAAK,SAAS,GACd,KAAK,iBAAiB,EAAM,IAEhC,EAAS,UAAU,cAAgB,YAC/B,MAAW,GAAI,GAAK,UAAU,MAC9B,EAAK,EAAI,EAAM,EAAI,EAAM,aAAgB,IAAM,EAAM,SACrD,EAAK,EAAI,EAAM,EAAI,EAAM,cAAiB,GAAI,EAAM,SAAW,GAC/D,EAAK,SAAS,EAAK,cAAc,wBACjC,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,SAAW,YAC1B,KAAK,IAAI,OACT,MAAqB,KAAK,SAAS,SAAS,WAAY,cACxC,GAAI,GAAK,UAAU,KAAK,OAAO,MAAO,GACtD,EAAU,EAAI,EAAM,EACpB,EAAU,EAAI,EAAM,EACpB,EAAU,gBAAgB,GAC1B,EAAU,SAAS,EAAK,cAAc,YACtC,EAAU,QACV,EAAU,aAAa,MACvB,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,iBAAmB,YAClC,MAAY,KACZ,KAAK,UAAU,QAAQ,cACnB,EAAK,OACL,MAAqB,EAAK,EAAI,EAAS,OAAO,MAAQ,OAAO,OAC5C,GAAI,GAAK,WAAW,EAAO,GAC5C,EAAW,EAAI,EAAK,EACpB,EAAW,EAAI,EAAK,EAAI,EAAK,OAAS,EACtC,EAAW,gBAAgB,GAC3B,EAAW,SAAS,EAAK,cAAc,cACvC,EAAW,MAAM,GACjB,EAAW,aAAa,MACxB,EAAM,IAAI,SAAS,MAG3B,EAAS,UAAU,sBAAwB,WACvC,MAAW,KAAK,qBAChB,KAAK,IAAI,cAAc,GACvB,KAAK,kBAAoB,GACzB,KAAK,KAAK,IAAI,gBAElB,EAAS,UAAU,mBAAqB,WACpC,MAAO,CACH,YAAa,KAAK,YAClB,iBAAkB,KAAK,YAAY,UAAU,eAC7C,eAAgB,KAAK,UAAU,qBAC/B,aAAc,KAAK,UAAU,mBAC7B,MAAO,KAAK,UAAU,SAG9B,EAAS,UAAU,gBAAkB,WACjC,MAAY,KACZ,KAAK,kBAAoB,GACzB,KAAK,KAAK,IAAI,eACd,KAAK,UAAU,kBAAkB,KAAK,YAAa,KAAK,kBAAkB,KAAK,UAAU,OAAQ,KAAK,YAAY,QAClH,KAAK,kBACL,KAAK,qBACL,KAAK,IAAI,cAAc,eACvB,MAAsB,IACtB,KAAK,KAAK,YAAY,EAAG,WACrB,EAAM,IAAI,qBACV,EAAM,iBAAiB,qBAAqB,EAAM,UAAW,EAAM,IAAI,KAE3E,KAAK,KAAK,YAAY,EAAiB,WACnC,EAAM,uBAEV,MAAwB,IAAM,KAAK,IAAI,EAAG,KAAK,UAAU,QAAU,MAC1C,EAAkB,EAC3C,KAAK,KAAK,YAAY,EAAoB,WACtC,EAAM,sBACN,EAAM,KAAK,IAAI,UAAU,KAE7B,KAAK,KAAK,YAAY,EAAqB,KAAM,WAC7C,EAAM,4BAEV,KAAK,KAAK,YAAY,EAAqB,KAAM,WAC7C,EAAM,MAAM,WAGpB,EAAS,UAAU,mBAAqB,WACpC,MAAY,KACZ,KAAK,MAAM,QAAQ,YACf,EAAK,GAAG,EAAK,UAAU,SAAU,EAAM,kBAAkB,KAAK,EAAO,EAAK,EAAG,EAAK,IAClF,EAAK,oBAAoB,QAGjC,EAAS,UAAU,mBAAqB,WACpC,MAAY,KACZ,KAAK,UAAU,MAAM,GAAG,QAAQ,cAC5B,MAAkB,EAAQ,MACT,EAAS,EAAI,EAAM,KAAK,WAAa,EAAI,OAAO,KAAO,OAAO,QAC7D,GAAI,GAAK,YAAY,GACvC,EAAY,EAAI,EAAS,EACzB,EAAY,EAAI,EAAS,EAAI,EAAS,OAAS,EAC/C,EAAY,MAAQ,EACpB,EAAY,KAAK,EAAK,iBAAiB,OAAQ,EAAM,oBAAoB,KAAK,EAAO,EAAU,IAC/F,EAAY,KAAK,EAAK,iBAAiB,QAAS,EAAM,qBAAsB,GAC5E,EAAY,SAAS,EAAK,cAAc,eACxC,EAAY,OAAO,EAAa,GAChC,EAAM,IAAI,SAAS,MAG3B,EAAS,UAAU,oBAAsB,cACrC,EAAS,OACT,EAAY,MAAQ,EACpB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,sBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,IAAM,KAAM,OAGrF,EAAS,UAAU,qBAAuB,YACtC,KAAK,SAAS,wBAAwB,YAAY,EAAK,EAAG,EAAK,GAC/D,KAAK,SAAS,wBAAwB,QAAQ,GAAI,EAAK,EAAG,EAAK,GAC/D,KAAK,MAAM,sBAEf,EAAS,UAAU,oBAAsB,WACrC,KAAK,gBAAgB,EAAI,KAAK,KAAK,WAAa,EAChD,KAAK,gBAAgB,EAAI,KAAK,KAAK,EAAI,KAAK,KAAK,YAAc,GAC/D,KAAK,gBAAgB,SACrB,KAAK,gBAAgB,OACrB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,sBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,EAAG,MAAO,MAGnF,EAAS,UAAU,gBAAkB,WACjC,MAAoB,KAAK,kBAAkB,KAAK,eAC7B,KAAK,IAAI,EAAe,KAAK,UAAU,UAC1C,CACZ,SAAU,GACV,MAAO,KAAK,kBAAkB,KAAK,UAAU,OAAQ,KAAK,YAAY,OACtE,UAAW,GAEf,KAAK,KAAK,MAAM,gBAAgB,KAAK,YAAa,IAEtD,EAAS,UAAU,kBAAoB,cACnC,MAAO,GAAE,cAAc,EAAY,YAAkB,MAAQ,IAAU,IAAY,GAEvF,EAAS,UAAU,kBAAoB,YACnC,MAAkB,KAAK,KAAK,MAAM,eAAe,GACjD,MAAI,GACO,EAAY,UAEhB,GAEX,EAAS,UAAU,wBAA0B,WACzC,MAAW,CACP,YAAa,KAAK,YAClB,MAAO,KAAK,kBAAkB,KAAK,UAAU,OAAQ,KAAK,YAAY,OACtE,MAAO,KAAK,UAAU,OACtB,UAAW,KAAK,kBAAkB,KAAK,aACvC,WAAY,KAAK,YAAY,UAAU,eACvC,UAAW,KAAK,UAAU,oBAE9B,KAAK,IAAI,gBAAgB,IAE7B,EAAS,UAAU,aAAe,WAC9B,MAAwB,CAAC,EAAK,SAAS,QAAS,EAAK,SAAS,UAAW,EAAK,SAAS,kBACvF,MAAO,MAAK,MAAM,OAAO,YAAkB,MAAO,GAC7C,SAAS,EAAK,YACd,OAAO,YAAkB,MAAO,GAAK,KAAK,WAAa,EAAK,SAAS,YAE9E,EAAS,UAAU,uBAAyB,WACxC,MAAe,IACG,KAAK,cACvB,GAAI,EACA,MAAO,GAEX,MAAoB,KAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YAChG,GAAI,EACA,MAAO,GAEX,MAAiB,KAAK,sBACE,EAAW,KAAK,WAC5B,EAAoB,EAAK,SAAS,SAC9C,MAAO,MAAK,IAAI,EAAU,IAE9B,EAAS,UAAU,eAAiB,WAChC,MAAO,GAAE,MAAM,KAAK,MAAQ,YACxB,MAAO,GAAK,KAAK,YAGzB,EAAS,UAAU,kBAAoB,WACnC,MAAO,GAAE,MAAM,KAAK,MAAQ,YACxB,MAAO,GAAK,KAAK,YAGzB,EAAS,UAAU,uBAAyB,WACxC,GAAI,KAAK,cACL,OAEJ,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,kBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAGrE,EAAS,UAAU,cAAgB,cAC/B,MAAY,OACa,EAAE,KAAK,WAC5B,EAAM,kBACN,EAAM,oBAEV,KAAK,MACA,KAAK,KAAK,cAAc,KAAK,OAC7B,UACA,QAAQ,YACT,MAAa,EAAK,KAAK,SAAW,EAClC,EAAM,OAAO,IAAI,CACb,QAAS,EACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,EAAG,EAAK,EAAI,EAAK,SAAS,UAAY,EACtC,WAAY,WACR,EAAM,uBAAuB,EAAM,EAAQ,SAK3D,EAAS,UAAU,cAAgB,cAC/B,MAAW,EAAM,KAAK,WACX,EAAM,KAAK,SACtB,MAAI,KAAS,EACF,EAAM,KAAK,YAAc,EAAM,KAAK,YAExC,EAAO,GAElB,EAAS,UAAU,uBAAyB,gBACxC,MAAgB,IAAQ,EACxB,GAAI,IAAc,GACd,OAEJ,MAAc,EAAK,aAAa,YAAY,EAAK,UACjD,GAAI,IAAY,GACZ,OAGJ,EAAK,gBACL,KAEJ,EAAS,UAAU,gBAAkB,WACjC,KAAK,YAAY,SACjB,KAAK,YAAY,MAAQ,EACzB,KAAK,OAAO,IAAI,CACZ,QAAS,KAAK,YACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAS,UAAU,gBAAkB,WACjC,MAA6B,KAAK,KAAK,MAAM,WAAW,EAAK,aAAa,wBAC1E,GAAI,EACA,OAEJ,MAAmB,GAAI,GAAK,aAAa,OAE7C,EAAS,UAAU,eAAiB,WAChC,MAAa,KAAK,MAAM,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,cACzE,EAAO,KAAK,YAAmB,MAAO,GAAM,KAAK,WAAa,EAAK,SAAS,WAC9F,AAAI,GACA,CAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,cACvC,KAAK,MAAM,KAAK,EAAK,aAAa,YAAa,CAAE,OAAQ,MAIrE,EAAS,UAAU,iBAAmB,YAClC,MAAY,OACO,KAAK,MAAM,KAAK,YAAkB,MAAQ,GAAK,KAAK,WAAa,EAAK,SAAS,KAAO,IACzG,GAAI,EACA,OAEJ,MAAmB,KAAK,uBACP,KAAK,IAAI,EAAc,KAClB,KAAK,UAAU,YAAY,GACjD,GAAI,EAAgB,SAAW,EAC3B,OAGJ,MAAe,EAAE,MAAM,EAAiB,OAAO,IAC/C,EAAgB,IAAI,YAChB,MAAmB,EAAW,IAAM,IACvB,EAAK,SAAS,KAAO,EAAI,EAAa,IACrC,EAAM,QAAQ,OAAO,SAAS,CAAE,SAAU,EAAW,KAAM,OAAQ,EAAW,OAAQ,IAAK,GAAU,EAAW,SAC9H,SAAM,uBAAuB,GACtB,KAGf,EAAS,UAAU,mBAAqB,WACpC,MAAc,KAAK,iBACnB,GAAI,GACA,MAAa,EAAQ,KAAK,SAC1B,MAAO,GAAK,SAAS,KAAO,EAAI,EAEpC,MAAO,GAAK,SAAS,KAAO,GAEhC,EAAS,UAAU,uBAAyB,YACxC,MAAY,KACZ,EAAQ,MAAQ,EAChB,EAAQ,MAAQ,IAChB,KAAK,OAAO,IAAI,CACZ,QAAS,EACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAChE,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACjE,WAAY,WACR,EAAM,QAAQ,qBAAqB,OAI/C,EAAS,UAAU,YAAc,WAC7B,MAAO,MAAK,MAAM,SAAW,GAEjC,EAAS,UAAU,WAAa,WAC5B,KAAK,MAAM,QAAQ,YAAkB,MAAO,GAAK,gBAErD,EAAS,UAAU,aAAe,YAC9B,MAAe,KAAK,UAAU,KAAK,YAAsB,MAAO,GAAS,SAAW,IAAS,EAAS,qBAAuB,KAC7H,AAAK,GACD,GAAW,KAAK,UAAU,KAAK,YAAkB,MAAO,GAAK,WAC7D,AAAI,EACA,EAAS,gBAGT,KAAK,mCAGb,EAAS,YAAY,EAAG,KAAK,wBAC7B,EAAS,OACT,EAAS,kBAAkB,EAAG,KAAK,MAC9B,GAAG,OAAO,OAAO,OAAO,eAAgB,KAAK,gBAAiB,OAEvE,EAAS,UAAU,gCAAkC,WACjD,MAAgB,CACZ,WAAY,KAAK,KAAK,aACtB,eAAgB,KAAK,UAAU,OAC/B,gBAAiB,KAAK,UAAU,OAAO,YAAkB,MAAO,GAAK,SAAW,OAChF,mBAAoB,KAAK,UAAU,OAAO,YAAkB,MAAO,GAAK,qBAAuB,OAC/F,YAAa,KAAK,KAAK,eACvB,YAAa,KAAK,KAAK,eACvB,YAAa,KAAK,KAAK,cACvB,UAAW,KAAK,KAAK,cAEzB,KAAK,MAAM,gBAAgB,CAAE,UAAW,KAE5C,EAAS,UAAU,gBAAkB,WACjC,KAAK,KAAK,iBACV,KAAK,qBAET,EAAS,UAAU,aAAe,gBAC9B,KAAK,SAAS,SAAS,QAAQ,EAAK,EAAG,IAE3C,EAAS,UAAU,YAAc,YAC7B,MAAe,KAAK,cACpB,EAAS,EAAI,EACb,EAAS,EAAI,KAAK,uBAClB,EAAS,OACT,KAAK,IAAI,SAAS,GAClB,KAAK,UAAU,KAAK,IAExB,EAAS,UAAU,YAAc,WAC7B,MAAkB,KAAK,MAAM,UAAU,SAAW,EAClD,GAAI,GACA,MAAc,KAAK,MAAM,sBACT,KAAK,MAAM,wBAAwB,GACnD,MAAO,GAEX,MAAO,MAAK,MAAM,UAAU,OAEhC,EAAS,UAAU,qBAAuB,WACtC,MAAO,MAAK,KAAK,YAAc,GAEnC,EAAS,UAAU,eAAiB,YAChC,QACY,GAAK,KAAK,KAAK,MAAM,MAAM,aAAe,MAAQ,IAAO,OAAS,EAAK,UAC1E,GAAI,GAAK,WAAW,KAAM,GACnC,EAAG,EAAI,EAAY,EAAI,EACvB,EAAG,EAAI,KAAK,IAAI,EAAI,GACpB,EAAG,SAAS,EAAK,cAAc,cAC/B,EAAG,OACH,KAAK,IAAI,SAAS,IAEtB,EAAS,UAAU,cAAgB,cAC/B,GAAI,EAAQ,OAAS,EACjB,OAEJ,KAAK,cAAgB,IAEzB,EAAS,UAAU,YAAc,YAC7B,GAAI,KAAK,gBAAkB,GACvB,OAGJ,GADA,KAAK,cAAgB,GACjB,KAAK,KAAK,aACV,OAEJ,KAAK,UAAU,KAAK,WAAW,gBAEnC,EAAS,UAAU,UAAY,YAC3B,MAAoB,KAAK,IAAI,qBACT,KAAK,iBAAiB,EAAe,GACzD,GAAI,GAAiB,EACjB,OAEJ,KAAK,OAAO,KAAK,EAAc,YAC/B,KAAK,UAAU,WACf,KAAK,KAAK,QACV,KAAK,eACL,KAAK,kBACL,KAAK,YACL,KAAK,mBAAmB,EAAe,GACvC,KAAK,IAAI,eAEb,EAAS,UAAU,aAAe,WAC9B,KAAK,MACA,OAAO,YAAkB,MAAO,GAAK,aAAa,YAAY,EAAK,YACnE,QAAQ,YACT,EAAM,kBAGd,EAAS,UAAU,gBAAkB,WACjC,MAAY,KACZ,KAAK,OAAO,aAAa,KAAK,aAC9B,KAAK,OAAO,IAAI,CACZ,QAAS,KAAK,YACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,YAAY,WAI9B,EAAS,UAAU,UAAY,WAC3B,KAAK,MAAM,QAAQ,YACf,EAAK,cAGb,EAAS,UAAU,mBAAqB,cACpC,MAAY,KACZ,KAAK,UAAU,QAAQ,cACnB,EAAS,mBAAqB,GAE9B,MAAW,EAAM,MAAM,EAAM,MAAM,OAAS,EAAI,KACnC,GAAQ,GAAK,GAC1B,EAAM,KAAK,YAAY,EAAO,WAE1B,GAAI,EAAS,qBAAuB,GAChC,OAEJ,EAAM,YAAY,EAAU,EAAM,EAAO,GACzC,EAAM,KAAK,iBACX,EAAM,IAAI,yBAItB,EAAS,UAAU,YAAc,kBAC7B,KAAK,MAAM,YACX,EAAS,mBAAqB,GAC9B,EAAS,OACT,EAAK,YAAY,EAAM,EAAG,EAAM,GAChC,EAAK,OACL,EAAK,MAAM,IAEf,EAAS,UAAU,qBAAuB,WACtC,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,YAAY,OAAO,KAAK,KAAK,cAC1E,KAAK,MAAM,SAAS,GAAG,eAAgB,KAAK,sBAAuB,MACnE,AAAI,EAAK,KAAK,aACV,MAAK,MAAM,SAAS,GAAG,oBAAqB,KAAK,mBAAoB,MACrE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,SAAS,YAAa,KAAK,UACpE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,KAAK,YAAa,KAAK,MAChE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,wBAAyB,MAClE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,sBAAuB,MAChE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,uBAAwB,MACjE,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,mBAAoB,MAC7D,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,UAAU,iBAAkB,KAAK,WAC1E,KAAK,MAAM,SAAS,GAAG,wBAAyB,KAAK,sBAAuB,MAC5E,KAAK,MAAM,SAAS,GAAG,aAAc,KAAK,kBAAmB,MAC7D,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,WAAW,WAAW,KAAK,KAAK,WAAY,IACvF,KAAK,MAAM,SAAS,GAAG,cAAe,KAAK,WAAW,WAAW,KAAK,KAAK,WAAY,IACvF,KAAK,MAAM,SAAS,GAAG,gBAAiB,KAAK,WAAW,WAAW,KAAK,KAAK,WAAY,IACzF,KAAK,MAAM,SAAS,GAAG,YAAa,KAAK,qBAAsB,QAGvE,EAAS,UAAU,qBAAuB,WACtC,GAAI,KAAK,KAAK,eAAiB,GAC3B,OAEJ,MAAa,KAAK,iBAClB,KAAK,MAAM,QAAQ,YACf,GAAI,EAAK,UAAY,GACjB,OAEJ,MAAe,EAAK,KAAK,SACzB,EAAK,EAAI,EAAO,QAAU,IAAO,OAAO,KAAK,KAAK,EAAS,GAC3D,EAAK,EAAI,EAAO,QAAU,KAAO,OAAO,KAAK,KAAK,EAAS,MAGnE,EAAS,UAAU,sBAAwB,WACvC,AAAY,KAAK,KAAK,oBAAqB,KAAK,KAAK,aAEzD,EAAS,UAAU,mBAAqB,WACpC,GAAI,KAAK,KAAK,aACV,OAEJ,AAAI,KAAK,oBACL,KAAK,cAAc,EAAG,MAG9B,EAAS,UAAU,iBAAmB,WAElC,MAAiB,EAAE,MAAM,KAAK,MAAO,YACjC,MAAO,GAAK,KAAK,WAErB,MAAO,GAAW,KAAK,SAAW,GAEtC,EAAS,UAAU,mBAAqB,WACpC,KAAK,iBAET,EAAS,UAAU,uBAAyB,WACxC,KAAK,mBAET,EAAS,UAAU,iBAAmB,WAClC,MAAY,KACZ,MAAI,MAAK,KAAK,eAAiB,GACpB,GAEX,MAAK,KAAK,aAAe,GACzB,KAAK,UAAU,QAAQ,YACnB,EAAS,mBAAqB,KAElC,KAAK,MAAM,QAAQ,YACf,EAAK,YAAY,CAAC,EAAM,SAAS,oBAAoB,MAAO,EAAM,SAAS,oBAAoB,MAAO,EAAM,SAAS,oBAAoB,YAEtI,KAEX,EAAS,UAAU,yBAA2B,YAC1C,KAAK,YAAY,UAErB,EAAS,UAAU,sBAAwB,WACvC,MAAkB,KAAK,mBACvB,AAAI,GACA,MAAK,IAAI,gBAAgB,UACzB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,kBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAAM,MAAO,MAItF,EAAS,UAAU,qBAAuB,YACtC,MAAqB,KAAK,YAAY,UAAU,iBACpB,EAAa,OAAO,YAAsB,MAAO,KAAa,IAAmB,OAC7G,KAAK,qBAAqB,IAE9B,EAAS,UAAU,qBAAuB,YACtC,GAAI,IAAU,EACV,OAEJ,KAAK,UAAU,sBAAwB,EACvC,KAAK,IAAI,YAAY,YAAY,KAAK,UAAU,uBAEpD,EAAS,UAAU,mBAAqB,gBACpC,GAAI,IAAW,EACX,OAEJ,KAAK,eAAe,EAAI,KAAK,KAAK,WAAa,EAC/C,KAAK,eAAe,EAAI,EAAK,SAAS,UAAY,EAClD,KAAK,eAAe,SACpB,KAAK,eAAe,QACpB,KAAK,eAAe,WAAW,EAAc,EAAQ,GACrD,KAAK,eAAe,OACpB,AAAI,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,qBACvC,KAAK,MAAM,KAAK,EAAK,aAAa,mBAAoB,CAAE,OAAQ,GAAK,MAAO,MAGpF,EAAS,UAAU,yBAA2B,YAC1C,MAAoB,KAAK,SAAS,yBAAyB,KAC7C,GAAI,GAAK,mBAAmB,EAAM,IAEpD,EAAS,UAAU,YAAc,YAC7B,MAAc,KAAK,MAAM,eAAe,aAAa,IACrD,EAAQ,SAAS,GACjB,EAAQ,SACR,EAAQ,iBAEZ,EAAS,UAAU,wBAA0B,WACzC,MAAW,CACP,YAAa,KAAK,YAClB,UAAW,OAAO,KAAK,IAAI,QAAQ,EAAG,KACtC,WAAY,KAAK,YAAY,UAAU,eACvC,MAAO,OAAO,KAAK,IAAI,QAAQ,EAAG,KAClC,UAAW,OAAO,KAAK,IAAI,QAAQ,EAAG,KACtC,MAAO,OAAO,KAAK,IAAI,QAAQ,EAAG,IAEtC,KAAK,MAAM,QACX,KAAK,IAAI,gBAAgB,IAE7B,EAAS,UAAU,sBAAwB,WACvC,MAAsB,OAAO,KAAK,IAAI,QAAQ,EAAG,OACtC,CACP,YAAa,KAAK,YAClB,iBAAkB,KAAK,YAAY,UAAU,eAC7C,aAAc,OAAO,KAAK,IAAI,QAAQ,EAAG,EAAkB,GAC3D,eAAgB,EAChB,MAAO,OAAO,KAAK,IAAI,QAAQ,EAAG,MAEtC,KAAK,MAAM,QACX,KAAK,IAAI,cAAc,IAE3B,EAAS,UAAU,kBAAoB,WACnC,KAAK,aAAa,KAAK,EAAK,kBAAkB,SAAU,KAAK,uBAAwB,MACrF,KAAK,aAAa,SAEtB,EAAS,UAAU,uBAAyB,WACxC,KAAK,UAAU,gBAAgB,sBAAwB,EAAE,SAAS,KAAK,YAAY,WAAY,EAAG,OAEtG,EAAS,UAAU,QAAU,WACzB,KAAK,MAAM,QACX,KAAK,kBAAoB,GACzB,KAAK,KAAK,IAAI,gBAElB,EAAS,UAAU,SAAW,WAC1B,KAAK,MAAM,SACX,KAAK,kBAAoB,GACzB,KAAK,KAAK,IAAI,iBAElB,EAAS,UAAU,SAAW,WAC1B,AAAI,KAAK,oBAAsB,IAC3B,KAAK,KAAK,IAAI,eAElB,AAAI,KAAK,UACL,MAAK,SAAS,UACd,KAAK,SAAW,MAEpB,AAAI,KAAK,WACL,KAAK,UAAU,UAEnB,AAAI,KAAK,OACL,KAAK,MAAM,UAEf,AAAI,KAAK,aACL,KAAK,YAAY,UAErB,KAAK,WAAW,WAEb,GACT,OAAO,OACT,EAAK,SAAW,IACjB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,eAAiB,EACvB,EAAM,gBAAkB,EACxB,EAAM,QAAU,GAChB,EAAM,MAAM,IAAI,SAAS,GACzB,EAAM,gBACN,EAAM,eACC,EAEX,SAAY,UAAU,cAAgB,WAClC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,YAC7D,KAAK,WAAW,UAAU,GAAK,GAC/B,KAAK,IAAI,KAAK,aAElB,EAAY,UAAU,aAAe,WACjC,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC5D,KAAK,UAAU,aAAe,KAAK,WAAW,aAC9C,KAAK,UAAU,cAAgB,KAAK,WAAW,cAC/C,KAAK,UAAU,MAAQ,EACvB,KAAK,IAAI,KAAK,YAElB,EAAY,UAAU,SAAW,WAC7B,MAAO,MAAK,WAAW,OAE3B,EAAY,UAAU,UAAY,WAC9B,MAAO,MAAK,WAAW,QAE3B,EAAY,UAAU,iBAAmB,WACrC,MAAO,MAAK,YAAc,KAAK,QAEnC,EAAY,UAAU,iBAAmB,WACrC,MAAO,MAAK,UAAU,cAAgB,KAAK,gBAAkB,KAAK,gBAE/D,GACT,OAAO,YAAY,WACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgC,YAC5B,UAAU,EAAY,GACtB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,aAAe,GACrB,EAAM,KAAO,cACb,EAAM,MAAQ,EAAM,kBACpB,EAAM,WACN,EAAM,UAAU,GACT,EAEX,SAAW,UAAU,gBAAkB,WACnC,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,KAAK,aAAe,KAC9B,MAAO,EAAK,YAAY,eACxB,MAAO,WAGf,EAAW,UAAU,SAAW,WAC5B,UACoB,GAAM,GAAK,KAAK,MAAM,MAAM,SAAW,MAAQ,IAAO,OAAS,OAAS,EAAG,iBAAmB,MAAQ,IAAO,OAAS,EAAK,QAC/I,KAAK,WAAa,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAc,KAAK,OAC/D,KAAK,WAAW,UAAU,GAC1B,KAAK,IAAI,KAAK,YACd,MAAe,GACf,KAAK,WAAW,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,WAAW,QAEnE,EAAW,UAAU,UAAY,YAC7B,MAAe,KAAK,MAAM,KAAK,aAAe,OAC5B,SAAS,SAAS,GAAI,KAAK,OAAQ,CAAE,SAAU,EAAW,OAC5E,KAAK,YAAc,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAY,WAAY,GACrE,KAAK,YAAY,UAAU,GAAK,GAChC,KAAK,YAAY,EAAI,KAAK,WAAW,YAAY,EACjD,KAAK,YAAY,EAAI,KAAK,WAAW,EAAI,KAAK,WAAW,YAAY,OAAS,EAAI,EAClF,KAAK,IAAI,KAAK,cAEX,GACT,OAAO,YAAY,WACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqC,YACjC,UAAU,EAAiB,GAC3B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,cACb,EAAM,aACN,EAAM,UACC,EAEX,SAAgB,UAAU,WAAa,WACnC,KAAK,SAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,aAC3D,KAAK,IAAI,KAAK,WAElB,EAAgB,UAAU,QAAU,WAChC,MAAc,IACd,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,aAAc,EAAS,IACvF,KAAK,KAAK,QAAQ,EAAK,YAAY,YACnC,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,EACd,KAAK,KAAK,EAAI,KAAK,SAAS,EAAI,GAChC,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,UAAY,YAClC,KAAK,KAAK,QAAQ,EAAI,aAEnB,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KAGnB,SACA,AAAC,aACG,MAA+B,YAC3B,UAAU,EAAW,GACrB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,QAAU,CAAE,EAAG,GAAI,EAAG,GAC5B,EAAM,KAAO,aACb,EAAM,YAAc,EACpB,EAAM,gBACN,EAAM,cAAc,EAAY,aAChC,EAAM,oBACN,EAAM,eAAe,EAAY,UAAU,eAAgB,EAAY,UAAU,gBACjF,EAAM,qBACN,EAAM,cAAc,EAAY,OAChC,EAAM,aACN,EAAM,WAAW,EAAM,YAChB,EAEX,SAAU,UAAU,cAAgB,WAChC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,mBACvD,KAAK,IAAI,KAAK,OAElB,EAAU,UAAU,cAAgB,YAChC,KAAK,WAAa,GAAI,GAAK,WAAW,KAAK,MAAO,GAClD,KAAK,IAAI,KAAK,aAElB,EAAU,UAAU,kBAAoB,WACpC,KAAK,eAAiB,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,wBACjE,KAAK,IAAI,KAAK,iBAElB,EAAU,UAAU,eAAiB,cACjC,KAAK,YAAc,GAAI,GAAK,iBAAiB,KAAK,MAAO,EAAkB,GAC3E,KAAK,IAAI,KAAK,cAElB,EAAU,UAAU,mBAAqB,WACrC,KAAK,gBAAkB,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,wBAClE,KAAK,IAAI,KAAK,kBAElB,EAAU,UAAU,cAAgB,YAChC,KAAK,WAAa,GAAI,GAAK,gBAAgB,KAAK,OAChD,KAAK,WAAW,UAAU,GAC1B,KAAK,IAAI,KAAK,aAElB,EAAU,UAAU,WAAa,WAC7B,KAAK,kBACL,KAAK,kBACL,KAAK,mBACL,KAAK,sBACL,KAAK,uBACL,KAAK,YAAY,GAAK,EACtB,KAAK,WAAW,GAAK,IAEzB,EAAU,UAAU,gBAAkB,WAClC,KAAK,WAAW,EAAI,KAAK,KAAK,KAAO,KAAK,QAAQ,EAClD,KAAK,WAAW,EAAI,KAAK,KAAK,EAAI,KAAK,WAAW,YAAY,OAAS,GAE3E,EAAU,UAAU,gBAAkB,WAClC,MAAa,KAAK,WAAW,YAC7B,KAAK,WAAW,EAAI,KAAK,KAAK,MAAQ,EAAO,MAAQ,KAAK,QAAQ,EAAI,EACtE,KAAK,WAAW,EAAI,KAExB,EAAU,UAAU,iBAAmB,WACnC,MAAW,KAAK,WAAW,YAAY,QAC3B,KAAK,WAAW,YAAY,OAC5B,EAAQ,EACpB,KAAK,YAAY,EAAI,EAAO,EAAQ,EACpC,KAAK,YAAY,EAAI,KAEzB,EAAU,UAAU,oBAAsB,WACtC,MAAW,KAAK,WAAW,EAAI,KAAK,WAAW,YAAY,QAC/C,KAAK,YAAY,EAAI,KAAK,YAAY,YAAY,MAAQ,IAC1D,EAAQ,EACpB,KAAK,eAAe,EAAI,EAAO,EAAQ,EACvC,KAAK,eAAe,GAAK,GAE7B,EAAU,UAAU,qBAAuB,WACvC,MAAW,KAAK,YAAY,EAAI,KAAK,YAAY,YAAY,QACjD,KAAK,WAAW,EAAI,KAAK,WAAW,YAAY,MAAQ,IACxD,EAAQ,EACpB,KAAK,gBAAgB,EAAI,EAAO,EAAQ,EAAI,EAC5C,KAAK,gBAAgB,GAAK,GAE9B,EAAU,UAAU,SAAW,WAC3B,MAAO,MAAK,KAAK,cAEd,GACT,OAAO,YAAY,WACrB,EAAK,UAAY,IAClB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAqB,WAAgB,6BACrC,EAAqB,cAAmB,kCACzC,EAAuB,EAAK,sBAAyB,GAAK,qBAAuB,KACpF,MAAqC,YACjC,UAAU,EAAiB,GAC3B,oBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,GAClB,EAAM,KAAO,OACb,EAAM,aAAe,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GACxD,EAAM,WAAa,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,GACtD,EAAM,SAAW,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,EAAO,kBAAkB,WAAW,IACjF,EAAM,iBACN,EAAM,IAAI,EAAM,cAChB,EAAM,IAAI,EAAM,UAChB,EAAM,IAAI,EAAM,YACT,EAEX,cAAO,eAAe,EAAgB,UAAW,WAAY,CACzD,IAAK,WACD,MAAO,MAAK,WAEhB,WAAY,GACZ,aAAc,KAElB,EAAgB,UAAU,eAAiB,WACvC,KAAK,WAAW,QAAU,GAC1B,KAAK,WAAW,OAAS,GACzB,KAAK,UAAY,IAErB,EAAgB,UAAU,eAAiB,WACvC,KAAK,WAAW,QAAU,GAC1B,KAAK,WAAW,OAAS,GACzB,KAAK,UAAY,IAErB,EAAgB,UAAU,gBAAkB,YACxC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,KAAK,YACpC,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,aAAa,QAAU,MAGrC,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,IACP,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,WACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,eACN,EAAM,KAAK,EAAqB,cAAe,SAK/D,KAAK,KAAK,EAAqB,WAAY,OAE/C,EAAgB,UAAU,aAAe,WACrC,KAAK,SAAS,QAAU,GACxB,KAAK,SAAS,MAAQ,GACtB,KAAK,SAAS,MAAQ,GACtB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,MAAO,OAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,MAAO,IACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,MAAO,KAGR,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,cAAgB,EACtB,EAAM,KAAO,qBACb,EAAM,MAAQ,EACd,EAAM,oBACN,EAAM,UACN,EAAM,iBACN,EAAM,eACN,EAAM,WACC,EAEX,SAAkB,UAAU,kBAAoB,WAC5C,MAAY,KACZ,KAAK,sBAAwB,EAAE,SAAS,WACpC,AAAI,EAAM,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,iBAC9C,EAAM,MAAM,MAAM,KAAK,EAAK,aAAa,eAAgB,CAAE,OAAQ,OAExE,IAAK,CAAE,SAAU,KACpB,KAAK,yBAA2B,EAAE,SAAS,WACvC,AAAI,EAAM,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,iBAC9C,EAAM,MAAM,MAAM,KAAK,EAAK,aAAa,eAAgB,CAAE,OAAQ,OAExE,IAAK,CAAE,SAAU,MAExB,EAAkB,UAAU,QAAU,WAClC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,4BACvD,KAAK,KAAK,UAAU,EAAG,IACvB,KAAK,IAAI,KAAK,OAElB,EAAkB,UAAU,eAAiB,WACzC,KAAK,YAAc,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,4BAC9D,KAAK,YAAY,UAAU,EAAG,IAC9B,KAAK,IAAI,KAAK,aACd,AAAI,EAAK,KAAK,aACV,MAAK,YAAY,iBACjB,KAAK,YAAY,GAAG,OAAO,MAAM,OAAO,wBAAyB,KAAK,QAAS,OAEnF,OAAO,QAAQ,MAAM,GAAG,OAAO,KAAK,YAAa,KAAK,KAAM,EAAG,IAEnE,EAAkB,UAAU,QAAU,gBAClC,MAAc,OAAO,KAAK,QAAQ,EAAG,EAAG,KAAK,YAAY,OACzD,KAAK,KAAK,gBAAiB,IAE/B,EAAkB,UAAU,aAAe,WACvC,MAAY,OACE,OAAO,QAAQ,OAAO,QAAQ,KAAK,eACpC,KAAK,YAAY,YAAY,EAC1C,KAAK,UAAY,KAAK,MAAM,YAAY,IAAI,YACxC,MAAW,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,aACvD,SAAK,EAAI,EAAU,EAAM,oBAAoB,GAC7C,EAAK,EAAI,EACT,EAAM,IAAI,GACH,KAGf,EAAkB,UAAU,SAAW,WACnC,MAAY,OACE,OAAO,QAAQ,OAAO,QAAQ,KAAK,eACpC,OAAO,QAAQ,OAAO,OAAO,KAAK,aAAe,GAC9D,KAAK,MAAQ,KAAK,MAAM,YAAY,IAAI,YACpC,MAAW,GAAI,GAAK,gBAAgB,EAAM,MAAO,eAAgB,OAAQ,iBACzE,SAAK,EAAI,EAAU,EAAM,oBAAoB,GAC7C,EAAK,EAAI,EACT,EAAK,QAAQ,SAAU,GACvB,EAAK,GAAG,EAAK,qBAAqB,WAAY,EAAM,sBAAuB,GAC3E,EAAK,GAAG,EAAK,qBAAqB,cAAe,EAAM,yBAA0B,GACjF,EAAM,IAAI,GACH,KAGf,EAAkB,UAAU,oBAAsB,YAC9C,MAAc,OAAO,KAAK,QAAQ,EAAQ,EAAG,KAAK,MAAM,aACxD,MAAO,MAAK,YAAY,MAAQ,GAEpC,EAAkB,UAAU,qBAAuB,YAC/C,MAAO,QAAO,KAAK,QAAQ,EAAQ,EAAG,KAAK,MAAM,cAErD,EAAkB,UAAU,sBAAwB,YAChD,KAAK,sBAAsB,KAAK,qBAAqB,IACrD,KAAK,YAAY,IAErB,EAAkB,UAAU,eAAiB,cACzC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,cAAe,EACf,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,SAAS,IAClC,SAAU,WACN,EAAM,sBAAsB,EAAM,qBAAqB,EAAM,gBAC7D,EAAM,YAAY,EAAM,mBAIpC,EAAkB,UAAU,sBAAwB,YAChD,EAAU,KAAK,IAAI,KAAO,GAC1B,KAAK,YAAY,QAAQ,EAAG,EAAG,KAAK,YAAY,MAAQ,EAAS,KAAK,YAAY,SAEtF,EAAkB,UAAU,YAAc,YACtC,KAAK,MAAM,QAAQ,YACf,MAAgB,EAAK,WACR,GAAU,EAAK,QAAQ,UACpC,AAAI,EACA,GAAK,iBACL,AAAI,IAAc,IAAS,GACvB,EAAK,gBAAgB,IAIzB,EAAK,oBAIjB,EAAkB,UAAU,SAAW,WACnC,MAAO,MAAK,KAAK,OAErB,EAAkB,UAAU,UAAY,WACpC,MAAO,MAAK,KAAK,QAEd,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,QAAU,CAAE,EAAG,GAAI,EAAG,GAC5B,EAAM,OAAS,EACf,EAAM,KAAO,eACb,EAAM,YAAc,EACpB,EAAM,UACN,EAAM,iBACN,EAAM,gBACC,EAEX,SAAY,UAAU,QAAU,WAC5B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,qBACvD,KAAK,KAAK,UAAU,GACpB,KAAK,IAAI,KAAK,OAElB,EAAY,UAAU,eAAiB,WACnC,MAAY,OACM,KAAK,YAAY,MAAM,KAC7B,CACR,YAAa,EACb,YAAa,KAAK,YAAY,MAAM,MAAM,IAE9C,KAAK,iBAAmB,GAAI,GAAK,kBAAkB,KAAK,MAAO,GAC/D,KAAK,iBAAiB,EAAI,KAAK,KAAK,KAAO,KAAK,QAAQ,EACxD,KAAK,iBAAiB,EAAI,OAAO,QAAQ,OAAO,WAAW,KAAK,MAAQ,EACxE,KAAK,iBAAiB,sBAAsB,GAC5C,KAAK,iBAAiB,GAAG,gBAAiB,YACtC,EAAM,aAAa,EAAc,KAErC,KAAK,IAAI,KAAK,mBAElB,EAAY,UAAU,cAAgB,WAClC,MAAc,IACd,KAAK,WAAa,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,kBAAmB,EAAS,IAClG,KAAK,WAAW,QAAQ,EAAK,YAAY,YACzC,KAAK,WAAW,UAAU,EAAG,IAC7B,KAAK,WAAW,EAAI,KAAK,KAAK,MAAQ,KAAK,QAAQ,EAAI,EACvD,KAAK,WAAW,EAAI,KAAK,KAAK,YAAY,EAC1C,KAAK,IAAI,KAAK,aAElB,EAAY,UAAU,aAAe,cAEjC,GADA,AAAI,IAAY,QAAU,GAAU,IAChC,GACA,KAAK,OAAS,EACd,KAAK,iBAAiB,KAAK,QAC3B,KAAK,iBAAiB,sBAAsB,KAAK,QACjD,OAEJ,MAAoB,IACpB,KAAK,kBACL,KAAK,iBAAiB,EAAO,GAC7B,KAAK,iBAAiB,eAAe,EAAO,IAEhD,EAAY,UAAU,iBAAmB,cACrC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,SAAS,IAClC,OAAQ,EACR,SAAU,WACN,EAAM,iBAAiB,KAAK,MAAM,EAAM,aAIpD,EAAY,UAAU,gBAAkB,WACpC,KAAK,MAAM,OAAO,aAAa,KAAK,YACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,MACH,KAAM,MAGd,EAAY,UAAU,iBAAmB,YACrC,KAAK,WAAW,QAAQ,EAAM,mBAElC,EAAY,UAAU,SAAW,WAC7B,MAAO,MAAK,KAAK,OAErB,EAAY,UAAU,UAAY,WAC9B,MAAO,MAAK,KAAK,QAEd,GACT,OAAO,YAAY,WACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KAGnB,SACA,AAAC,aACG,MAA8B,YAC1B,UAAU,EAAU,GACpB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,QAAU,EAChB,EAAM,UAAY,EAClB,EAAM,YAAc,EACpB,EAAM,KAAO,YACb,OAAO,QAAQ,MAAM,GAAG,UAAU,EAAM,UAAW,EAAM,WAAY,EAAG,GACxE,EAAM,QAAU,EAAM,WAAW,OAAS,EAAI,EAC9C,EAAM,YACN,EAAM,eACN,EAAM,iBACN,EAAM,aACC,EAEX,SAAS,UAAU,UAAY,WAC3B,KAAK,OAAS,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,mBACzD,KAAK,OAAO,UAAU,GAAK,GAC3B,KAAK,OAAO,MAAQ,IACpB,KAAK,OAAO,EAAI,GAChB,KAAK,MAAM,KAAK,OAAQ,IAE5B,EAAS,UAAU,aAAe,WAC9B,KAAK,UAAY,GAAI,GAAK,UAAU,KAAK,MAAO,KAAK,aACrD,KAAK,IAAI,KAAK,YAElB,EAAS,UAAU,eAAiB,WAChC,KAAK,YAAc,GAAI,GAAK,YAAY,KAAK,MAAO,KAAK,aACzD,KAAK,IAAI,KAAK,cAElB,EAAS,UAAU,WAAa,WAC5B,MAAqB,KAAK,UAAU,aACb,KAAK,YAAY,aACxB,KACQ,EAAiB,EAAmB,IAC7C,MAAK,WAAW,MAAQ,GAAqB,EAC5D,KAAK,YAAY,EAAI,KAAK,WAAW,KAAO,EAC5C,KAAK,YAAY,EAAI,KAAK,QAAU,KAAK,YAAY,YAAc,EACnE,KAAK,UAAU,EAAI,KAAK,WAAW,MAAQ,EAAiB,EAAI,EAChE,KAAK,UAAU,EAAI,KAAK,SAE5B,EAAS,UAAU,KAAO,WACtB,KAAK,SACL,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,KAAK,aAGhB,EAAS,UAAU,KAAO,WACtB,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,KAAK,UAAY,GACpB,WAAY,KAAK,KAAK,KAAK,SAG5B,GACT,EAAK,aACP,EAAK,SAAW,IACjB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,oBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,IAAW,KAChE,SAAM,UAAY,EAClB,EAAM,YAAc,GACb,EAEX,SAAkB,UAAU,OAAS,WACjC,KAAK,kBAGT,EAAkB,UAAU,QAAU,WAClC,KAAK,sBAGT,EAAkB,UAAU,WAAa,YACrC,AAAI,KAAK,YACL,KAAK,WAAW,OAEpB,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,MAAO,CAAE,MAAO,EAAO,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,QAGtE,GACT,OAAO,YAAY,QACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,oBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAS,EAAO,IAAW,KAChE,SAAM,iBAAmB,GAClB,EAEX,SAAkB,UAAU,cAAgB,WACxC,KAAK,WAAa,KAAK,MAAM,OAAO,IAAI,CACpC,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,IACP,KAAM,GACN,OAAQ,MAGhB,EAAkB,UAAU,cAAgB,WACxC,AAAI,KAAK,YACL,MAAK,WAAW,OAChB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,MAIZ,GACT,EAAK,mBACP,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA2C,YACvC,UAAU,EAAuB,GACjC,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,YACb,EAAM,UACN,EAAM,UACC,EAEX,SAAsB,UAAU,QAAU,WACtC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,8BACvD,KAAK,IAAI,KAAK,OAElB,EAAsB,UAAU,QAAU,WACtC,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,aAAc,IAAK,IACnF,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,GAAK,EACf,KAAK,KAAK,MAAQ,GAClB,KAAK,IAAI,KAAK,OAElB,EAAsB,UAAU,UAAY,YACxC,KAAK,KAAK,QAAQ,EAAM,aAErB,GACT,OAAO,YAAY,WACrB,EAAK,sBAAwB,IAC9B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAgB,OAAO,KAAK,YACT,OAAO,KAAK,eACQ,YACnC,UAAU,EAAmB,GAC7B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,YAAc,GACpB,EAAM,SAAW,GACjB,EAAM,UAAY,EAClB,EAAM,KAAO,WAAa,EAAQ,KAClC,EAAM,SAAW,EACjB,EAAM,SAAS,GAAG,EAAK,aAAa,YAAa,EAAM,oBAAqB,GAC5E,EAAM,eACN,EAAM,UACN,EAAM,gBACN,EAAM,UACN,EAAM,cACN,EAAM,gBACN,EAAM,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,YAAa,GACzE,EAAM,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,WAAY,EAAM,UAAW,GACtE,EAAM,oBACN,EAAM,aACC,EAEX,cAAO,eAAe,EAAkB,UAAW,aAAc,CAC7D,IAAK,WACD,MAAO,MAAK,aAEhB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAkB,UAAW,UAAW,CAC1D,IAAK,WACD,MAAO,MAAK,UAEhB,WAAY,GACZ,aAAc,KAElB,EAAkB,UAAU,oBAAsB,WAC9C,KAAK,cAET,EAAkB,UAAU,WAAa,WACrC,GAAI,EAAK,KAAK,sBAAwB,IAClC,KAAK,WAAW,OAChB,OAEJ,AAAI,KAAK,SAAS,IAAM,EACpB,MAAK,SAAS,SACd,KAAK,WAAW,QAGhB,MAAK,SAAS,OACd,KAAK,WAAW,WAGxB,EAAkB,UAAU,kBAAoB,WAC5C,KAAK,eAAe,KAAK,WAAY,EAAU,UAC/C,KAAK,MAAM,OAAS,WAExB,EAAkB,UAAU,YAAc,YACtC,KAAK,eAAiB,EACtB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,KAAK,MAAQ,GACpB,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,SAAU,KAEd,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,MAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,IAAK,CAAE,OAAQ,KAG/D,EAAkB,UAAU,UAAY,YACpC,AAAI,KAAK,gBAAkB,KAAK,iBAAmB,GAC/C,MAAK,eAAiB,KACtB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,SAAU,QAItB,EAAkB,UAAU,aAAe,WACvC,KAAK,UAAY,KAAK,MAAM,IAAI,UAAU,gBAC1C,KAAK,QAAU,KAAK,UAAU,cAAc,CACxC,MAAO,CAAC,sBACR,MAAO,CAAE,MAAO,GAAK,IAAK,EAAG,KAAM,EAAa,aAChD,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,SAAU,IACV,UAAW,IACX,GAAI,KAER,KAAK,IAAI,KAAK,YAElB,EAAkB,UAAU,QAAU,WAClC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,yBACvD,KAAK,IAAI,KAAK,MACd,KAAK,WAAa,KAAK,KAAK,aAEhC,EAAkB,UAAU,cAAgB,WACxC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,gCAC7D,KAAK,WAAW,MAAQ,IACxB,KAAK,WAAW,GAAK,EACrB,KAAK,MAAM,KAAK,WAAY,IAEhC,EAAkB,UAAU,QAAU,WAClC,MAAgB,oBAAsB,KAAK,SAAS,KACpD,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,GACvD,KAAK,IAAI,KAAK,OAElB,EAAkB,UAAU,YAAc,WACtC,MAAa,KAAK,KAAK,MAAQ,EAAI,GACnC,KAAK,SAAW,GAAI,GAAK,sBAAsB,KAAK,OACpD,KAAK,SAAS,UAAU,KAAK,SAAS,KACtC,KAAK,SAAS,EAAI,EAClB,KAAK,SAAS,EAAI,EAClB,KAAK,IAAI,KAAK,WAElB,EAAkB,UAAU,cAAgB,WACxC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,wBAC7D,KAAK,WAAW,EAAI,KAAK,SAAS,EAClC,KAAK,WAAW,EAAI,KAAK,SAAS,EAClC,KAAK,IAAI,KAAK,aAElB,EAAkB,UAAU,SAAW,WACnC,MAAO,MAAK,KAAK,OAErB,EAAkB,UAAU,UAAY,WACpC,MAAO,MAAK,KAAK,QAErB,EAAkB,UAAU,aAAe,YACvC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,kBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,gBAAiB,CAAE,OAAQ,KAEvE,KAAK,SAAS,UAAU,KAAK,QAAQ,IAAM,GAC3C,KAAK,QAAQ,QAAQ,EAAG,EAAG,GAC3B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,KAAM,KAAK,MAC1B,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KACP,KAAM,GACN,MAAO,KAAK,MAAM,OAAO,QAAQ,OAGzC,EAAkB,UAAU,UAAY,WACpC,KAAK,YAAc,GACnB,KAAK,QAAQ,KAAK,MAEtB,EAAkB,UAAU,IAAM,WAC9B,KAAK,MAAQ,GACb,KAAK,sBAET,EAAkB,UAAU,eAAiB,WACzC,KAAK,YAAc,GACnB,KAAK,QAAQ,GAAK,GAClB,KAAK,QAAQ,WAEjB,EAAkB,UAAU,SAAW,WACnC,KAAK,MAAQ,EACb,AAAI,KAAK,WAAa,IAClB,KAAK,qBAGb,EAAkB,UAAU,KAAO,WAC/B,GAAI,KAAK,SACL,OAEJ,KAAK,SAAW,IAGpB,EAAkB,UAAU,OAAS,WACjC,GAAI,KAAK,WAAa,GAClB,OAEJ,KAAK,SAAW,IAGpB,EAAkB,UAAU,WAAa,WACrC,KAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,WAAY,KAAK,UAAW,MACrE,KAAK,SAAS,IAAI,EAAK,aAAa,YAAa,KAAK,oBAAqB,MAC3E,EAAO,UAAU,WAAW,KAAK,OAE9B,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAyC,YACrC,UAAU,EAAqB,GAC/B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAClB,EAAM,KAAO,iBACb,EAAM,SAAS,GACf,EAAM,aACN,EAAM,aACC,EAEX,SAAoB,UAAU,SAAW,YACrC,MAAY,KACZ,KAAK,MAAQ,EAAS,IAAI,YACtB,MAAW,GAAI,GAAK,kBAAkB,EAAM,MAAO,GACnD,SAAK,GAAG,OAAO,MAAM,OAAO,wBAAyB,EAAM,YAAY,KAAK,EAAO,IACnF,EAAM,IAAI,GACH,IAEX,KAAK,cAAgB,KAAK,MAAM,QAAQ,WAE5C,EAAoB,UAAU,YAAc,YACxC,GAAI,EAAK,QAAQ,MAAQ,GACrB,AAAI,EAAK,KAAK,qBACV,KAAK,MAAM,OAAO,KAAK,EAAK,sBAAsB,iBAAkB,EAAK,SAE7E,OAEJ,GAAI,EAAK,SACL,OAEJ,AAAI,EAAK,WACL,KAAK,MAAM,OAAO,KAAK,EAAK,sBAAsB,OAAQ,EAAK,SAG/D,KAAK,MAAM,OAAO,KAAK,EAAK,sBAAsB,OAAQ,EAAK,UAGvE,EAAoB,UAAU,WAAa,WACvC,MAAe,IACf,KAAK,UAAU,CACX,UAAW,EACX,WAAY,EACZ,EAAG,EAAW,EACd,SAAU,OAAO,QAAQ,MAAM,OAC/B,OAAQ,IAEZ,KAAK,MAAM,QAAQ,YACf,EAAK,UAAY,EAAK,KAG9B,EAAoB,UAAU,WAAa,WACvC,MAAa,KAAK,YAClB,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC1D,KAAK,QAAQ,aAAe,EAAO,MACnC,KAAK,QAAQ,cAAgB,EAAO,OACpC,KAAK,QAAQ,EAAI,EAAO,QACxB,KAAK,QAAQ,EAAI,EAAO,QACxB,KAAK,IAAI,KAAK,SACd,KAAK,QAAQ,MAAQ,KACrB,KAAK,QAAQ,QAAU,GACvB,KAAK,QAAQ,kBAEjB,EAAoB,UAAU,KAAO,WACjC,MAAY,KACZ,KAAK,SACL,KAAK,cAAc,QAAQ,YACvB,EAAK,MAAQ,EACb,EAAK,EAAI,EAAK,UAAY,GAC1B,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,IACP,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,EAAK,eAIpB,EAAoB,UAAU,KAAO,WACjC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,EAAG,SACJ,GAAG,OAAO,OAAO,OAAO,kBAAmB,WAC1C,EAAM,UAGd,EAAoB,UAAU,YAAc,WACxC,KAAK,QAAQ,QAAU,IAE3B,EAAoB,UAAU,aAAe,WACzC,KAAK,QAAQ,QAAU,IAE3B,EAAoB,UAAU,cAAgB,YAC1C,MAAO,MAAK,MAAM,KAAK,YAAkB,MAAO,GAAK,QAAQ,OAAS,KAE1E,EAAoB,UAAU,UAAY,YACtC,KAAK,MAAM,QAAQ,YACf,AAAI,EAAK,QAAQ,OAAS,EACtB,EAAK,YAGL,EAAK,SAIjB,EAAoB,UAAU,eAAiB,WAC3C,KAAK,MAAM,QAAQ,YACf,AAAI,EAAK,WACL,EAAK,iBAGL,EAAK,cAIV,GACT,OAAO,YAAY,WACrB,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAwB,KAAU,4BACnC,EAA0B,EAAK,yBAA4B,GAAK,wBAA0B,KAC7F,MAAwC,YACpC,UAAU,EAAoB,GAC9B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAClB,EAAM,UAAY,EAClB,EAAM,cAAgB,GACtB,EAAM,mBAAqB,GAC3B,EAAM,KAAO,uBACb,EAAM,UACN,EAAM,SACN,EAAM,UACN,EAAM,iBACN,EAAM,aACN,EAAM,SAAW,EACjB,EAAM,SAAS,OAAO,GAAG,EAAK,cAAc,WAAY,EAAM,YAAa,GAC3E,EAAM,SAAS,OAAO,GAAG,EAAK,cAAc,cAAe,EAAM,eAAgB,GACjF,EAAM,SAAS,OAAO,KAAK,EAAK,cAAc,mBAAoB,EAAM,iBAAkB,GACnF,EAEX,SAAmB,UAAU,QAAU,WACnC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,4CACvD,KAAK,KAAK,OAAS,IACnB,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,OAAS,WAClC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,gDACtD,KAAK,IAAI,UAAU,GAAK,GACxB,KAAK,IAAI,EAAI,KAAK,KAAK,EAAI,GAC3B,KAAK,IAAI,KAAK,MAElB,EAAmB,UAAU,QAAU,WACnC,MAAc,KAAK,MAAM,MAAM,oBACnB,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,iBAAiB,KAAK,KAAK,MAAQ,IAC7C,KAAK,KAAK,YAAc,GACxB,KAAK,KAAK,EAAI,CAAC,KAAK,KAAK,cAAgB,EACzC,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,eAAiB,WAC1C,MAAgB,KAAK,KAAK,OAAS,GACnC,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,SAExD,EAAmB,UAAU,WAAa,WACtC,MAAY,KACZ,KAAK,KAAK,QAAQ,YACd,EAAK,GAAK,EAAM,IAAI,UAG5B,EAAmB,UAAU,SAAW,WACpC,MAAO,MAAK,KAAK,OAErB,EAAmB,UAAU,UAAY,YACrC,KAAK,IAAI,EAAI,CAAC,EAAS,KAAK,OAEhC,EAAmB,UAAU,YAAc,WACvC,GAAI,KAAK,mBACL,OAEJ,KAAK,UAAY,EACjB,KAAK,cAAgB,IAEzB,EAAmB,UAAU,eAAiB,WAC1C,KAAK,cAAgB,GACrB,KAAK,QAET,EAAmB,UAAU,UAAY,cACrC,GAAI,KAAK,SAAW,KAAK,oBAAsB,KAAK,gBAAkB,GAClE,OAEJ,KAAK,WAAa,EAClB,AAAI,KAAK,UAAY,MACjB,MAAK,SACL,KAAK,SAGb,EAAmB,UAAU,KAAO,WAChC,KAAK,KAAK,EAAwB,KAAM,MACxC,KAAK,MAAQ,EACb,KAAK,EAAI,KAAK,UAAY,GAAK,KAAK,MACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,KAAK,UACR,KAAM,GACN,OAAQ,MAGhB,EAAmB,UAAU,KAAO,WAChC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,WAIlB,EAAmB,UAAU,iBAAmB,WAC5C,KAAK,mBAAqB,GAC1B,KAAK,WAET,EAAmB,UAAU,QAAU,YACnC,KAAK,SAAS,OAAO,IAAI,EAAK,cAAc,WAAY,KAAK,YAAa,MAC1E,KAAK,SAAS,OAAO,IAAI,EAAK,cAAc,cAAe,KAAK,eAAgB,MAChF,KAAK,SAAS,OAAO,IAAI,EAAK,cAAc,mBAAoB,KAAK,iBAAkB,MACvF,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KAKnB,SACA,AAAC,aACG,MAAiC,YAC7B,UAAU,EAAa,GACvB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,eACb,EAAM,WAAW,UAAU,GAAK,IAChC,EAAM,WAAW,OAAS,GAC1B,EAAM,WAAW,GAAK,EAAM,WAAW,OAAS,EAAI,EACpD,EAAM,WAAW,QAAU,GAC3B,OAAO,QAAQ,MAAM,GAAG,UAAU,EAAM,UAAW,EAAM,WAAY,EAAG,CAAC,EAAM,gBAAkB,EAAM,gBACvG,EAAM,QAAU,GAChB,EAAM,SAAW,EAAM,WAAW,OAAS,EAAI,EAC/C,EAAM,iBACN,EAAM,uBACN,EAAM,qBACN,EAAM,mBACN,EAAM,UAAU,MAAQ,KACxB,EAAM,UAAU,QAAU,GAC1B,EAAM,UAAU,iBAChB,EAAM,WAAW,EAAM,WACvB,EAAM,YAAc,CAAC,EAAM,gBAAiB,EAAM,mBAC3C,EAEX,SAAY,UAAU,eAAiB,WACnC,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,eAAgB,eAAgB,MACzE,KAAK,YAAY,EAAI,KAAK,WAAW,KAAO,KAAK,YAAY,MAAQ,EAAI,KAAK,QAC9E,KAAK,YAAY,EAAI,KAAK,SAAW,GAEzC,EAAY,UAAU,qBAAuB,WACzC,KAAK,kBAAoB,GAAI,GAAK,kBAAkB,KAAK,MAAO,eAAgB,wBAAyB,MACzG,KAAK,kBAAkB,EAAI,KAAK,WAAW,MAAQ,KAAK,kBAAkB,MAAQ,EAAI,KAAK,QAC3F,KAAK,kBAAkB,EAAI,KAAK,SAAW,EAC3C,KAAK,kBAAkB,UAAY,KAAK,kBAAkB,EAC1D,KAAK,IAAI,KAAK,oBAElB,EAAY,UAAU,mBAAqB,WACvC,KAAK,gBAAkB,GAAI,GAAK,kBAAkB,KAAK,MAAO,eAAgB,sBAAuB,MACrG,KAAK,gBAAgB,EAAI,KAAK,kBAAkB,KAAO,KAAK,gBAAgB,MAAQ,EAAI,GACxF,KAAK,gBAAgB,EAAI,KAAK,kBAAkB,EAChD,KAAK,gBAAgB,UAAY,KAAK,gBAAgB,EACtD,KAAK,IAAI,KAAK,kBAElB,EAAY,UAAU,iBAAmB,WACrC,KAAK,cAAgB,GAAI,GAAK,oBAAoB,KAAK,MAAO,KAAK,MAAM,KAAK,SAAS,UACvF,KAAK,cAAc,EAAI,KAAK,WAAW,MAAQ,KAAK,cAAc,YAAY,MAAQ,KAAK,QAC3F,KAAK,cAAc,EAAI,KAAK,SAAW,EACvC,KAAK,cAAc,UAAY,KAAK,cAAc,EAClD,KAAK,IAAI,KAAK,gBAElB,EAAY,UAAU,aAAe,WACjC,KAAK,UAAU,QAAU,IAE7B,EAAY,UAAU,YAAc,WAChC,KAAK,UAAU,QAAU,IAE7B,EAAY,UAAU,gBAAkB,WACpC,MAAY,KACZ,KAAK,YAAY,QAAQ,YACrB,EAAO,SACP,EAAO,SACP,EAAO,MAAQ,EACf,EAAO,EAAI,EAAO,UAAY,GAC9B,EAAM,MAAM,OAAO,IAAI,CACnB,MAAO,IACP,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,EAAO,eAItB,EAAY,UAAU,gBAAkB,WACpC,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,YACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,OACH,MAAO,IACR,GAAG,OAAO,OAAO,OAAO,kBAAmB,WAC1C,EAAM,YAAY,QAAQ,YAAoB,MAAO,GAAO,WAC7D,GAAG,OAAO,OAAO,OAAO,YAAa,WACpC,EAAM,YAAY,QAAQ,YAAoB,MAAO,GAAO,eAG7D,GACT,EAAK,aACP,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,YAClC,UAAU,EAAkB,GAC5B,kBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,mBAAqB,IAC3B,EAAM,gBAAkB,EACxB,EAAM,cAAgB,EACtB,EAAM,KAAO,cACb,EAAM,SAAS,GACf,EAAM,sBACN,EAAM,UACN,EAAM,YAAY,GACX,EAEX,SAAiB,UAAU,SAAW,YAClC,MAAY,EAAK,aAAa,aAAa,GAC3C,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,GACxD,KAAK,MAAM,MAAQ,KAAK,mBACxB,KAAK,IAAI,KAAK,QAElB,EAAiB,UAAU,oBAAsB,WAC7C,MAAY,KACZ,KAAK,iBAAmB,KAAK,MAAM,IAAI,MAAM,CACzC,WAAY,eACZ,aAAc,KAAK,mBAAmB,KAAK,MAAM,MAAM,MACvD,KAAM,eACN,eAAgB,YACZ,EAAK,EAAI,EAAM,MAAM,EACrB,EAAK,EAAI,EAAM,MAAM,EACrB,EAAK,MAAQ,EAAM,mBACnB,EAAK,OAAS,GACd,EAAK,QAAU,GACf,EAAM,IAAI,MAGlB,UAAa,EAAG,EAAI,EAAG,IACnB,KAAK,iBAAiB,UAG9B,EAAiB,UAAU,mBAAqB,YAC5C,MAAiB,EAAc,YAAY,OAC1B,EAAc,UAAU,EAAG,EAAa,GAAK,QAAU,EAAc,UAAU,EAAY,EAAc,QAC1H,MAAO,IAEX,EAAiB,UAAU,QAAU,WACjC,MAAc,IACd,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,aAAc,EAAS,IACvF,KAAK,KAAK,QAAQ,EAAK,YAAY,YACnC,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,KAAK,MAAM,EAAI,GAC7B,KAAK,IAAI,KAAK,OAElB,EAAiB,UAAU,iBAAmB,WAC1C,KAAK,kBACL,KAAK,eAAe,KAAK,gBAAiB,KAAK,gBAEnD,EAAiB,UAAU,YAAc,YACrC,KAAK,cAAgB,EACrB,KAAK,eAAe,KAAK,gBAAiB,KAAK,gBAEnD,EAAiB,UAAU,eAAiB,cACxC,MAAc,EAAU,IAAM,EAC9B,KAAK,KAAK,QAAQ,IAEtB,EAAiB,UAAU,cAAgB,WACvC,MAAgB,KAAK,iBAAiB,aAAa,IACnD,EAAU,SACV,EAAU,MAAQ,KAAK,MAAM,MAC7B,EAAU,MAAQ,GAClB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,MAAO,EACP,MAAO,EAAU,MAAQ,KACzB,WAAY,WACR,EAAU,WAItB,EAAiB,UAAU,eAAiB,WACxC,KAAK,MAAM,MAAQ,KAAK,mBACxB,KAAK,MAAM,OAAO,aAAa,KAAK,OACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,mBAAqB,KACjC,KAAM,MAGP,GACT,OAAO,YAAY,WACrB,EAAK,iBAAmB,IACzB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,YACpC,UAAU,EAAoB,GAC9B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,MAAQ,EACd,EAAM,KAAO,eACb,EAAM,UACN,EAAM,WACN,EAAM,UACN,EAAM,UACN,EAAM,WAAW,EAAM,MAChB,EAEX,SAAmB,UAAU,QAAU,WACnC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,KAAK,MAAM,WAClE,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,SAAW,WACpC,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,EAAK,aAAa,aAAa,EAAK,SAAS,cACrG,KAAK,MAAM,MAAQ,IACnB,KAAK,MAAM,EAAI,KAAK,KAAK,IAAM,KAAK,MAAM,cAAgB,EAAI,GAC9D,KAAK,IAAI,KAAK,QAElB,EAAmB,UAAU,QAAU,WACnC,MAAc,QACF,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,IAAM,KAAK,MAAM,UAAU,SAAS,IAC3C,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,EACjC,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,QAAU,WACnC,MAAa,IACb,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,KAAK,MAAM,WAClE,KAAK,KAAK,EAAI,KAAK,KAAK,MAAQ,EAChC,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,EACjC,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,UAAY,WACrC,MAAO,MAAK,KAAK,eAErB,EAAmB,UAAU,iBAAmB,WAC5C,MAAO,MAAK,KAAK,cAAgB,KAAK,QAE1C,EAAmB,UAAU,WAAa,gBACtC,KAAK,MAAM,SAAS,EAAK,aAAa,aAAa,IACnD,KAAK,KAAK,QAAQ,EAAmB,IAAM,IAExC,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,mBACb,EAAM,YAAc,GACpB,EAAM,aAAe,EAAM,YAAc,IACzC,EAAM,UACN,EAAM,YACN,EAAM,KAAK,KAAK,EAAK,cAAc,MAC5B,EAEX,SAAkB,UAAU,QAAU,WAClC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,gCACvD,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,WAAa,KAAK,YAC5B,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAkB,UAAU,UAAY,WACpC,KAAK,OAAS,GAAI,GAAK,kBAAkB,KAAK,MAAO,KAAK,KAAM,eAAgB,uCAChF,KAAK,IAAI,KAAK,SAElB,EAAkB,UAAU,kBAAoB,WAC5C,MAAY,KACZ,KAAK,KAAK,MAAQ,EAClB,MAAiB,IACjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,KAAK,aAAe,IAC9B,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KAAK,KAAK,MAAQ,EAC1B,OAAQ,KAAK,KAAK,MAAQ,EAC1B,KAAM,KAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,KAAK,aACf,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,EAAG,KAAK,KAAK,EAAI,KAAK,YACtB,cAAe,GACf,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,KACf,SAAU,EAAM,aAChB,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,EAAM,KAAK,EAAI,EAAM,YACxB,WAAY,WACR,EAAM,2BAMnB,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAwC,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,UACN,EAAM,YACN,EAAM,iBACN,EAAM,eACN,EAAM,WACN,EAAM,SACN,EAAM,kBACN,EAAM,QACN,EAAM,WAAW,EAAM,aACvB,EAAM,WAAW,EAAM,OACvB,EAAM,WAAW,EAAM,YAChB,EAEX,SAAmB,UAAU,QAAU,WACnC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,6BACvD,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,UAAY,WACrC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,yBAC7D,KAAK,IAAI,KAAK,YACd,MAAe,IACf,KAAK,WAAa,KAAK,mBACvB,KAAK,WAAW,UAAU,GAAK,IAC/B,KAAK,WAAW,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,WAAW,OAC/D,KAAK,IAAI,KAAK,aAElB,EAAmB,UAAU,iBAAmB,WAC5C,MAAc,EAAE,QAAQ,KAAK,MAAM,MAAM,yBAC9B,KAAK,MAAM,KAAK,KAAK,CAC5B,IAAK,GACL,KAAM,EAAE,OAAO,GACf,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,MAAO,YAGf,SAAK,UAAU,EAAG,EAAG,oBACd,GAEX,EAAmB,UAAU,eAAiB,WAC1C,MAAY,CACR,UAAW,mCACX,UAAW,sBACX,UAAW,UAEf,KAAK,YAAc,GAAI,GAAK,mBAAmB,KAAK,MAAO,GAC3D,KAAK,IAAI,KAAK,cAElB,EAAmB,UAAU,aAAe,WACxC,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,4BAC5D,KAAK,UAAU,OAAS,IACxB,KAAK,IAAI,KAAK,YAElB,EAAmB,UAAU,SAAW,WACpC,MAAY,KAAK,cACjB,EAAM,QAAQ,YAAkB,MAAO,GAAK,UAAU,GAAK,MAC3D,KAAK,MAAQ,KAAK,MAAM,IAAI,UAAU,EAAG,EAAG,GAC5C,KAAK,MAAM,KAAO,QAClB,KAAK,MAAM,UAAU,CACjB,SAAU,OAAO,QAAQ,MAAM,WAC/B,MAAO,EACP,UAAW,KAAK,KAAK,aACrB,WAAY,KAEhB,KAAK,MAAM,GAAK,EAChB,KAAK,IAAI,KAAK,QAElB,EAAmB,UAAU,YAAc,WACvC,MAAY,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,YAAK,YAAc,KAAK,MAAM,KAAK,KAAK,CACpC,KAAM,KAAK,0BAA0B,GACrC,MAAO,SAAS,SAAS,GAAI,GAAQ,CAAE,SAAU,OAAQ,MAAO,YAChE,IAAK,KAET,KAAK,MAAQ,KAAK,MAAM,KAAK,KAAK,CAC9B,KAAM,KAAK,oBAAoB,GAC/B,MAAO,SAAS,SAAS,GAAI,GAAQ,CAAE,SAAU,OAAQ,MAAO,YAChE,IAAK,KAET,KAAK,UAAY,KAAK,MAAM,KAAK,KAAK,CAClC,KAAM,KAAK,wBAAwB,GACnC,MAAO,SAAS,SAAS,GAAI,GAAQ,CAAE,SAAU,OAAQ,MAAO,YAChE,IAAK,KAEF,CAAC,KAAK,YAAa,KAAK,MAAO,KAAK,YAE/C,EAAmB,UAAU,0BAA4B,YACrD,MAAe,KAAK,MAAM,MAAM,UAAU,MAC1C,MAAO,GAAS,QAAQ,IAAK,EAAY,aAE7C,EAAmB,UAAU,oBAAsB,YAC/C,MAAe,KAAK,MAAM,MAAM,UAAU,MAC1C,MAAO,GAAS,QAAQ,IAAK,EAAM,mBAEvC,EAAmB,UAAU,wBAA0B,YACnD,MAAe,KAAK,MAAM,MAAM,UAAU,UAC1C,MAAO,GAAS,QAAQ,IAAK,EAAU,mBAE3C,EAAmB,UAAU,OAAS,WAClC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,0BACtD,KAAK,IAAI,KAAK,MAElB,EAAmB,UAAU,gBAAkB,WAC3C,MAAY,KACZ,KAAK,aAAe,EAAE,MAAM,EAAG,WAC3B,MAAW,GAAI,GAAK,kBAAkB,EAAM,OAC5C,SAAM,IAAI,GACH,IAEX,MAAiB,KAAK,aAAa,KACnB,KAAK,aAAa,GAClC,KAAK,KAAK,EAAY,IAE1B,EAAmB,UAAU,MAAQ,WACjC,KAAK,cACL,KAAK,iBACL,KAAK,mBACL,KAAK,aACL,KAAK,WACL,KAAK,cAET,EAAmB,UAAU,YAAc,WACvC,KAAK,WAAW,EAAI,KAAK,KAAK,IAAM,EACpC,KAAK,WAAW,EAAI,KAAK,WAAW,EAAI,IAE5C,EAAmB,UAAU,eAAiB,WAC1C,KAAK,UAAU,EAAI,KAAK,KAAK,EAAI,IAErC,EAAmB,UAAU,iBAAmB,WAC5C,MAAU,KAAK,WAAW,IACb,KAAK,UAAU,IACf,EAAS,EACtB,KAAK,YAAY,EAAI,KAAK,KAAK,YAAY,EAAI,EAC/C,KAAK,YAAY,EAAI,EAAM,EAAS,EAAI,KAAK,YAAY,YAAc,EAAI,IAE/E,EAAmB,UAAU,WAAa,WACtC,MAAU,KAAK,UAAU,IACZ,KAAK,KAAK,SACV,EAAS,EACtB,KAAK,MAAM,EAAI,EAAM,EAAS,EAAI,KAAK,MAAM,YAAY,OAAS,EAAI,IAE1E,EAAmB,UAAU,SAAW,WACpC,KAAK,IAAI,EAAI,KAAK,KAAK,aAAe,IACtC,KAAK,IAAI,EAAI,KAAK,KAAK,OAAS,IAEpC,EAAmB,UAAU,WAAa,WACtC,MAAY,CAAC,KAAK,KAAK,aAAe,MAC1B,KAAK,IAAI,IACZ,KACM,KAAK,aAAa,GACjC,EAAS,EAAI,EAAQ,EACrB,EAAS,EAAI,EAAQ,GACrB,EAAS,MAAQ,GACjB,MAAiB,KAAK,aAAa,GACnC,EAAW,EAAI,EACf,EAAW,EAAI,EACf,EAAW,MAAQ,KACnB,MAAgB,KAAK,aAAa,GAClC,EAAU,EAAI,EAAQ,EACtB,EAAU,EAAI,EAAQ,GACtB,EAAU,MAAQ,IAEtB,EAAmB,UAAU,WAAa,YACtC,KAAK,YAAY,WAAW,EAAK,WAAY,EAAK,UAAW,EAAK,WAClE,KAAK,YAAY,EAAK,YAAa,EAAK,MAAO,EAAK,YAExD,EAAmB,UAAU,YAAc,gBACvC,KAAK,YAAY,KAAO,KAAK,0BAA0B,GACvD,KAAK,MAAM,KAAO,KAAK,oBAAoB,GAC3C,KAAK,UAAU,KAAO,KAAK,wBAAwB,IAEvD,EAAmB,UAAU,OAAS,WAClC,KAAK,KAAK,aAAgB,GAAK,OAAO,WAAa,GAAK,KAAK,MAC7D,KAAK,UAAU,aAAe,KAAK,KAAK,aAAe,GACvD,KAAK,WACL,KAAK,cAET,EAAmB,UAAU,KAAO,YAChC,MAAS,KACW,KAAK,MACzB,KAAK,GAAK,EACV,KAAK,MAAQ,EAAgB,IAC7B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,EAAG,CAAE,MAAO,KAAK,EAAI,EAAI,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KACtE,MAAO,CAAE,MAAO,EAAe,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAC5E,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,OAErE,KAAK,WAAW,EAAe,KAC/B,KAAK,QAAQ,EAAe,KAC5B,KAAK,aAET,EAAmB,UAAU,WAAa,YACtC,KAAK,WAAW,MAAQ,EACxB,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,WAAY,KAAK,YAChC,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,WAAW,MAAQ,IACxB,KAAK,WAAW,MAAQ,IACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,WAAY,KAAK,YAChC,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,IAEX,MAAa,IACb,KAAK,WAAW,GAAK,EACrB,KAAK,WAAW,GAAK,EACrB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,WAAY,KAAK,YAChC,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,KAAO,KAGlB,EAAmB,UAAU,QAAU,YACnC,KAAK,IAAI,MAAQ,EACjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,IACd,MAAO,EACP,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,OAErE,KAAK,IAAI,MAAQ,GACjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,IACd,SAAU,IACV,MAAO,EACP,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,KAClB,MAAO,EACP,WAAY,KAAK,WAAW,KAAK,SAGzC,EAAmB,UAAU,WAAa,WACtC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,IACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,IACR,OAAQ,KACR,KAAM,GACN,OAAQ,MAGhB,EAAmB,UAAU,UAAY,WACrC,MAAY,KACZ,KAAK,aAAa,QAAQ,cACtB,MAAY,EAAQ,IACpB,EAAM,MAAM,KAAK,YAAY,EAAO,WAChC,EAAK,yBAIjB,EAAmB,UAAU,SAAW,WACpC,MAAO,MAEX,EAAmB,UAAU,UAAY,WACrC,MAAO,MAAK,KAAK,eAEd,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA0C,YACtC,UAAU,EAAsB,GAChC,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,EAAM,UAAY,IAClB,EAAM,KAAO,UACb,EAAM,cAAgB,EAAM,MAAM,IAAI,OAAO,eAAgB,gCAAiC,GAC9F,EAAM,gBAAkB,EAAM,MAAM,IAAI,OAAO,eAAgB,6BAA8B,GAC7F,EAAM,WAAa,EAAM,MAAM,IAAI,OAAO,eAAgB,6BAA8B,GACxF,EAAM,QAAU,CAAC,EAAM,cAAe,EAAM,gBAAiB,EAAM,YACnE,EAAM,IAAI,EAAM,SAChB,MAAiB,EAAM,gBAAgB,OACvC,SAAM,UAAU,CACZ,SAAU,OAAO,QAAQ,MAAM,OAC/B,UAAW,EAAM,UACjB,WAAY,EACZ,MAAO,EACP,EAAG,EAAM,UAAY,IAElB,EAEX,SAAqB,UAAU,SAAW,WACtC,MAAO,MAAK,OAAS,KAAK,WAE9B,EAAqB,UAAU,KAAO,YAClC,MAAY,KACZ,KAAK,KAAK,QAAQ,cACd,MAAa,GACb,EAAO,MAAQ,EACf,EAAO,MAAQ,IACf,EAAO,GAAK,EACZ,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,MAAO,EAAe,EAAQ,IAC9B,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACjE,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAChE,EAAG,CAAE,MAAO,EAAO,EAAI,EAAQ,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,UAIxF,EAAqB,UAAU,kBAAoB,WAC/C,KAAK,MAAM,KAAK,SAAS,CACrB,OAAQ,GACR,MAAO,IACP,SAAU,KAAK,gBACf,cAAe,QAGvB,EAAqB,UAAU,gBAAkB,WAC7C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,gBACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,IACR,OAAQ,IACR,OAAQ,EACR,KAAM,MAGP,GACT,OAAO,YAAY,WACrB,EAAK,qBAAuB,IAC7B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,YAClC,UAAU,EAAkB,GAC5B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,EAAG,EAAG,eAAgB,IAAU,KACrE,SAAM,gBAAkB,EACxB,EAAM,WAAa,EACnB,EAAM,OAAS,EACf,EAAM,OAAS,EACR,EAEX,SAAiB,UAAU,OAAS,WAChC,KAAK,OAAS,GACd,KAAK,QAAU,GACf,KAAK,OAAS,EACd,KAAK,gBAAkB,OAAO,KAAK,IAAI,YAAY,GAAK,KAAQ,OAAO,KAAK,IAAI,OAChF,KAAK,WAAa,KAAK,gBAAkB,GACzC,KAAK,OAAS,OAAO,KAAK,IAAI,YAAY,KAAO,KACjD,KAAK,OAAS,OAAO,KAAK,IAAI,YAAY,IAAM,KAEpD,EAAiB,UAAU,UAAY,cACnC,GAAI,CAAC,KAAK,QACN,OAEJ,KAAK,GAAK,KAAK,OAAS,EACxB,KAAK,GAAK,KAAK,OAAS,EACxB,KAAK,OAAS,KAAK,gBAAkB,EACrC,KAAK,YAAY,GACjB,KAAK,oBAET,EAAiB,UAAU,YAAc,YACrC,KAAK,QAAU,KAAK,WAAa,EACjC,AAAI,KAAK,OAAS,GACd,MAAK,OAAS,GACd,KAAK,YAAc,IAElB,AAAI,KAAK,OAAS,GACnB,MAAK,OAAS,EACd,KAAK,YAAc,KAG3B,EAAiB,UAAU,iBAAmB,WAC1C,MAAa,GACb,AAAI,MAAK,EAAI,EAAK,OAAO,YAAc,GAAU,KAAK,EAAI,CAAC,GAAU,KAAK,EAAI,EAAK,OAAO,WAAa,IACnG,MAAK,QAAU,GACf,KAAK,OAAS,KAGf,GACT,OAAO,YAAY,OACrB,EAAK,iBAAmB,IACzB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAA2C,WACvC,gBACI,AAAI,IAAiB,QAAU,GAAe,KAC9C,KAAK,MAAQ,EACb,KAAK,UAAY,GACjB,KAAK,OAAS,EACd,KAAK,MAAQ,EACb,KAAK,OAAS,CAAC,EAAG,EAAG,GAAG,IAAI,YAAiB,MAAO,6CAA+C,IACnG,KAAK,gBAAgB,GAEzB,SAAsB,UAAU,gBAAkB,YAC9C,MAAY,KACZ,KAAK,UAAY,EAAE,MAAM,EAAc,YAAmB,MAAO,GAAM,uBAE3E,EAAsB,UAAU,kBAAoB,WAChD,MAAY,OAAO,KAAK,IAAI,KAAK,KAAK,UAC9B,GAAI,GAAK,iBAAiB,KAAK,MAAO,GAC9C,SAAE,SAAS,EAAK,iBAAiB,0BACjC,EAAE,OACF,KAAK,MAAM,IAAI,SAAS,GACjB,GAEX,EAAsB,UAAU,OAAS,YACrC,KAAK,KAAK,IAEd,EAAsB,UAAU,KAAO,YACnC,KAAK,OAAS,EACd,AAAI,KAAK,MAAQ,KAAK,WAClB,MAAK,OAAS,KAAK,UACnB,KAAK,WAGb,EAAsB,UAAU,OAAS,WACrC,UAAa,EAAG,EAAI,KAAK,OAAQ,KAC7B,MAAQ,KAAK,UAAU,KAAK,YAAe,MAAO,GAAE,SAAW,KAC/D,AAAK,GACD,GAAI,KAAK,oBACT,KAAK,UAAU,KAAK,IAExB,EAAE,EAAI,OAAO,KAAK,IAAI,QAAQ,EAAG,EAAK,OAAO,YAC7C,EAAE,EAAI,EACN,EAAE,WAGV,EAAsB,UAAU,QAAU,YACtC,KAAK,UAAU,QAAQ,YAAe,MAAO,GAAE,QAAQ,KACvD,KAAK,UAAU,OAAS,GAErB,KAEX,EAAK,sBAAwB,IAC9B,MAAS,MAAO,KAKnB,SACA,AAAC,aACG,MAAyC,YACrC,UAAU,EAAqB,GAC/B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,gBAAkB,IACxB,EAAM,KAAO,kBACb,EAAM,UACN,EAAM,WACN,EAAM,WACN,EAAM,aACN,EAAM,WAAW,EAAM,OAChB,EAEX,SAAoB,UAAU,QAAU,WACpC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC7D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,IAAI,KAAK,aAElB,EAAoB,UAAU,SAAW,WACrC,MAAY,CACR,MAAO,eACP,gBAAiB,gCACjB,kBAAmB,+BACnB,eAAgB,6BAEpB,KAAK,MAAQ,GAAI,GAAK,mBAAmB,KAAK,MAAO,GACrD,KAAK,MAAM,WAAW,eAAgB,iCAAkC,EAAK,iBAAiB,2BAC9F,KAAK,IAAI,KAAK,QAElB,EAAoB,UAAU,SAAW,WACrC,KAAK,MAAQ,GAAI,GAAK,mBAAmB,KAAK,OAC9C,KAAK,IAAI,KAAK,QAElB,EAAoB,UAAU,WAAa,WACvC,KAAK,QAAU,GAAI,GAAK,qBAAqB,KAAK,OAClD,KAAK,IAAI,KAAK,UAElB,EAAoB,UAAU,OAAS,WACnC,KAAK,mBACL,KAAK,aACL,KAAK,aACL,KAAK,gBAET,EAAoB,UAAU,iBAAmB,WAC7C,KAAK,WAAW,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GACrF,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAoB,UAAU,WAAa,WACvC,MAAe,EAAK,OAAO,aACX,EAAK,OAAO,YAAc,MAC7B,EAAW,KAAK,MAAM,aACtB,EAAY,KAAK,MAAM,YACpC,KAAK,MAAM,MAAQ,KAAK,IAAI,EAAQ,GACpC,KAAK,MAAM,SACX,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAK,OAAO,kBAE/B,EAAoB,UAAU,WAAa,WACvC,MAAe,KAAK,MAAM,EAAK,KAAK,MAAM,YAAc,KAAK,MAAM,MAAS,EAC5E,KAAK,MAAM,MAAQ,KAAK,MAAM,MAC9B,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAW,IAAM,KAAK,MAAM,OAE/C,EAAoB,UAAU,aAAe,WACzC,MAAkB,KAAK,MAAM,EAAK,KAAK,MAAM,YAAc,KAAK,MAAM,MAAS,EAC/E,KAAK,QAAQ,MAAQ,KAAK,MAAM,MAChC,KAAK,QAAQ,EAAK,GAAK,OAAO,WAAa,KAAK,QAAQ,WAAa,KAAK,QAAQ,OAAS,EAC3F,KAAK,QAAQ,EAAI,EAAc,KAAK,QAAQ,YAAY,OAAS,EAAI,IAAM,KAAK,QAAQ,OAE5F,EAAoB,UAAU,WAAa,YACvC,KAAK,MAAM,WAAW,EAAK,OAC3B,KAAK,MAAM,WAAW,IAE1B,EAAoB,UAAU,KAAO,WACjC,KAAK,SACL,KAAK,SACL,KAAK,YACL,MAAY,IACZ,KAAK,iBACL,KAAK,UAAU,EAAQ,KACvB,KAAK,YAAY,EAAQ,KACzB,KAAK,UAAU,EAAQ,KACvB,KAAK,aAAa,EAAQ,KAC1B,KAAK,gBAET,EAAoB,UAAU,UAAY,WACtC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,iBAC7C,MAAK,MAAQ,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,gBACpD,KAAK,MAAM,KAAK,GAAI,CAAE,OAAQ,EAAG,MAAO,QAGhD,EAAoB,UAAU,eAAiB,WAC3C,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAAK,mBAGpB,EAAoB,UAAU,UAAY,YACtC,KAAK,MAAM,KAAK,IAEpB,EAAoB,UAAU,UAAY,YACtC,MAAY,KACZ,KAAK,MAAM,MAAQ,EACnB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,MAAa,GACb,KAAK,MAAM,GAAK,EAChB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,KAAK,MAAM,EAAI,EAClB,WAAY,WACR,EAAM,MAAM,gBACZ,EAAM,MAAM,gBAAgB,OAIxC,EAAoB,UAAU,aAAe,YACzC,GAAI,CAAC,KAAK,OAAS,KAAK,MAAM,iBAAmB,EAC7C,OAEJ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,MAAO,EAAe,IACtB,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,OAAQ,MAGhB,EAAoB,UAAU,YAAc,YACxC,KAAK,QAAQ,KAAK,GAClB,KAAK,QAAQ,qBAEjB,EAAoB,UAAU,aAAe,WACzC,KAAK,SAAW,GAAI,GAAK,sBAAsB,KAAK,QAExD,EAAoB,UAAU,UAAY,cACtC,AAAI,KAAK,UACL,KAAK,SAAS,OAAO,IAG7B,EAAoB,UAAU,QAAU,YACpC,EAAO,UAAU,QAAQ,KAAK,KAAM,GACpC,AAAI,KAAK,OACL,MAAK,MAAM,OACX,KAAK,MAAQ,MAEjB,AAAI,KAAK,UACL,MAAK,SAAS,QAAQ,GACtB,KAAK,SAAW,OAGjB,GACT,OAAO,YAAY,WACrB,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAsC,YAClC,UAAU,EAAkB,GAC5B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,UACN,EAAM,YACN,EAAM,iBACN,EAAM,eACN,EAAM,WACN,EAAM,aACN,EAAM,QACN,EAAM,WAAW,EAAM,OACvB,EAAM,WAAW,EAAM,QAChB,EAEX,SAAiB,UAAU,QAAU,WACjC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,2BACvD,KAAK,IAAI,KAAK,OAElB,EAAiB,UAAU,UAAY,WACnC,MAAiB,KAAK,MAAM,KAAK,MAAM,CACnC,IAAK,eACL,MAAO,sBACP,IAAK,OAEM,MACE,KAAK,mBACtB,EAAW,UAAU,GAAK,IAC1B,EAAW,MAAQ,KAAK,IAAI,EAAG,EAAW,EAAW,OACrD,EAAW,EAAI,IACf,KAAK,OAAS,KAAK,MAAM,IAAI,UAAU,EAAG,EAAG,CAAC,EAAY,IAC1D,KAAK,IAAI,KAAK,SAElB,EAAiB,UAAU,iBAAmB,WAC1C,MAAc,KAAK,MAAM,MAAM,sBACpB,KAAK,MAAM,KAAK,KAAK,CAC5B,IAAK,GACL,KAAM,EAAE,OAAO,GACf,MAAO,CACH,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,MAC3B,SAAU,OACV,MAAO,UACP,MAAO,YAGf,SAAK,UAAU,EAAG,EAAG,oBACd,GAEX,EAAiB,UAAU,eAAiB,WACxC,MAAY,CACR,UAAW,sCACX,UAAW,qBACX,UAAW,SAEf,KAAK,YAAc,GAAI,GAAK,mBAAmB,KAAK,MAAO,GAC3D,KAAK,IAAI,KAAK,cAElB,EAAiB,UAAU,aAAe,WACtC,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,0BAC5D,KAAK,UAAU,OAAS,IACxB,KAAK,IAAI,KAAK,YAElB,EAAiB,UAAU,SAAW,WAClC,MAAY,KAAK,cACjB,EAAM,QAAQ,YAAkB,MAAO,GAAK,UAAU,GAAK,MAC3D,KAAK,MAAQ,KAAK,MAAM,IAAI,UAAU,EAAG,EAAG,GAC5C,KAAK,MAAM,KAAO,QAClB,KAAK,MAAM,UAAU,CACjB,SAAU,OAAO,QAAQ,MAAM,WAC/B,MAAO,EACP,UAAW,KAAK,KAAK,aACrB,WAAY,KAEhB,KAAK,MAAM,GAAK,EAChB,KAAK,IAAI,KAAK,QAElB,EAAiB,UAAU,YAAc,WACrC,MAAY,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,YAAK,YAAc,KAAK,MAAM,KAAK,KAAK,CACpC,KAAM,KAAK,0BAA0B,GACrC,MAAO,SAAS,SAAS,GAAI,GAAQ,CAAE,SAAU,OAAQ,MAAO,YAChE,IAAK,KAET,KAAK,MAAQ,KAAK,MAAM,KAAK,KAAK,CAC9B,KAAM,KAAK,oBAAoB,GAC/B,MAAO,SAAS,SAAS,GAAI,GAAQ,CAAE,SAAU,OAAQ,MAAO,YAChE,IAAK,KAEF,CAAC,KAAK,YAAa,KAAK,QAEnC,EAAiB,UAAU,0BAA4B,YACnD,MAAe,KAAK,MAAM,MAAM,UAAU,MAC1C,MAAO,GAAS,QAAQ,IAAK,EAAY,aAE7C,EAAiB,UAAU,oBAAsB,YAC7C,MAAe,KAAK,MAAM,MAAM,UAAU,MAC1C,MAAO,GAAS,QAAQ,IAAK,EAAM,mBAEvC,EAAiB,UAAU,WAAa,WACpC,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,eAAgB,2BAA4B,MACpF,KAAK,cAAgB,KAAK,MAAM,IAAI,OAAO,eAAgB,8BAA+B,OAE9F,EAAiB,UAAU,MAAQ,WAC/B,KAAK,cACL,KAAK,iBACL,KAAK,mBACL,KAAK,aACL,KAAK,gBAET,EAAiB,UAAU,YAAc,WACrC,KAAK,OAAO,EAAI,GAChB,KAAK,OAAO,EAAI,KAAK,KAAK,IAAM,IAEpC,EAAiB,UAAU,eAAiB,WACxC,KAAK,UAAU,EAAI,KAAK,KAAK,EAAI,IAErC,EAAiB,UAAU,iBAAmB,WAC1C,MAAU,OAAO,QAAQ,OAAO,UAAU,KAAK,UAClC,KAAK,UAAU,IACf,EAAS,EACtB,KAAK,YAAY,EAAI,KAAK,KAAK,YAAY,EAC3C,KAAK,YAAY,EAAI,EAAM,EAAS,EAAI,KAAK,YAAY,YAAc,GAE3E,EAAiB,UAAU,WAAa,WACpC,MAAU,KAAK,UAAU,IACZ,KAAK,KAAK,SACV,EAAS,EACtB,KAAK,MAAM,EAAI,EAAM,EAAS,EAAI,KAAK,MAAM,YAAY,OAAS,EAAI,IAE1E,EAAiB,UAAU,aAAe,WACtC,MAAc,KAAK,KAAK,aAAe,KAC/B,KAAK,KAAK,OAClB,KAAK,WAAW,EAAI,CAAC,EACrB,KAAK,WAAW,EAAI,EACpB,KAAK,cAAc,EAAI,EACvB,KAAK,cAAc,EAAI,GAE3B,EAAiB,UAAU,WAAa,YACpC,KAAK,YAAY,WAAW,EAAK,iBAAkB,EAAK,aAAc,EAAK,gBAC3E,KAAK,YAAY,EAAK,YAAa,EAAK,QAE5C,EAAiB,UAAU,YAAc,cACrC,KAAK,YAAY,KAAO,KAAK,0BAA0B,GACvD,KAAK,MAAM,KAAO,KAAK,oBAAoB,IAE/C,EAAiB,UAAU,OAAS,WAChC,KAAK,KAAK,aAAe,EAAK,OAAO,WAAa,KAAK,OACvD,KAAK,UAAU,aAAe,KAAK,KAAK,aAAe,GACvD,KAAK,gBAET,EAAiB,UAAU,KAAO,YAC9B,MAAS,GACT,KAAK,GAAK,EACV,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,EAAG,CAAE,MAAO,KAAK,EAAI,EAAI,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KACtE,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,OAErE,KAAK,YAAY,EAAe,MAEpC,EAAiB,UAAU,YAAc,YACrC,MAAY,OACE,CAAC,KAAK,WAAY,KAAK,eACrC,EAAQ,QAAQ,YACZ,EAAO,MAAQ,EACf,EAAO,MAAQ,OAEnB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,EACP,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,aAAa,OACjE,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,aAAa,SAClE,GAAG,OAAO,OAAO,OAAO,eAAgB,WACvC,EAAM,0BAGd,EAAiB,UAAU,qBAAuB,WAC9C,KAAK,MAAM,KAAK,SAAS,CACrB,OAAQ,GACR,MAAO,KACP,QAAS,IACT,SAAU,KAAK,mBACf,cAAe,QAGvB,EAAiB,UAAU,mBAAqB,WAC5C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,cACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KACR,OAAQ,KACR,OAAQ,EACR,KAAM,MAGd,EAAiB,UAAU,SAAW,WAClC,MAAO,MAEX,EAAiB,UAAU,UAAY,WACnC,MAAO,MAAK,KAAK,eAEd,GACT,OAAO,YAAY,WACrB,EAAK,iBAAmB,IACzB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eACQ,YACnC,UAAU,EAAmB,GAC7B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,gBAAkB,IACxB,EAAM,KAAO,gBACb,EAAM,UACN,EAAM,WACN,EAAM,eACN,EAAM,WACN,EAAM,WACN,EAAM,oBACN,EAAM,QAAU,CAAC,EAAM,cAAe,EAAM,YACrC,EAEX,cAAO,eAAe,EAAkB,UAAW,gBAAiB,CAChE,IAAK,WACD,MAAO,MAAK,MAAM,eAEtB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAkB,UAAW,aAAc,CAC7D,IAAK,WACD,MAAO,MAAK,MAAM,YAEtB,WAAY,GACZ,aAAc,KAElB,EAAkB,UAAU,QAAU,WAClC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC7D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,IAAI,KAAK,aAElB,EAAkB,UAAU,SAAW,WACnC,KAAK,MAAQ,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,qBACxD,KAAK,IAAI,KAAK,QAElB,EAAkB,UAAU,aAAe,WACvC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,2BACtD,KAAK,IAAI,KAAK,MAElB,EAAkB,UAAU,SAAW,WACnC,KAAK,MAAQ,GAAI,GAAK,iBAAiB,KAAK,OAC5C,KAAK,IAAI,KAAK,QAElB,EAAkB,UAAU,SAAW,WACnC,KAAK,UAAY,KAAK,MAAM,IAAI,UAAU,gBAC1C,KAAK,aAAe,KAAK,oBACzB,KAAK,YAAc,KAAK,oBACxB,KAAK,IAAI,KAAK,WACd,KAAK,UAAU,QAAU,GACzB,KAAK,UAAU,OAAS,IAE5B,EAAkB,UAAU,kBAAoB,WAC5C,MAAY,OACD,IACI,KACf,MAAO,MAAK,UAAU,cAAc,CAChC,MAAO,6BACP,SAAU,EACV,OAAQ,GACR,SAAU,GACV,UAAW,IACX,SAAU,EACV,EAAG,CACC,OAAQ,WACJ,UAAQ,GACD,EAAM,IAAI,EAAI,EAAO,GAAK,EAAM,IAAI,SAGnD,EAAG,CACC,OAAQ,WACJ,MAAO,GAAM,IAAI,EAAI,IAAM,EAAM,IAAI,SAG7C,aAAc,YACV,MAAsB,IACtB,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,MAAO,EAAW,KAG1B,GAAI,MAGZ,EAAkB,UAAU,kBAAoB,WAC5C,MAAO,MAAK,UAAU,cAAc,CAChC,MAAO,6BACP,SAAU,CACN,OAAQ,WACJ,MAAO,GAAK,OAAO,YAAc,MAGzC,MAAO,CAAE,IAAK,IAAM,IAAK,GACzB,MAAO,CAAE,MAAO,EAAG,IAAK,GAAK,KAAM,EAAa,OAChD,SAAU,KACV,UAAW,IACX,SAAU,EACV,EAAG,KACH,EAAG,CACC,OAAQ,WACJ,MAAO,QAAO,KAAK,IAAI,QAAQ,EAAG,EAAK,OAAO,iBAK9D,EAAkB,UAAU,OAAS,WACjC,KAAK,mBACL,KAAK,aACL,KAAK,WACL,KAAK,cAET,EAAkB,UAAU,iBAAmB,WAC3C,KAAK,WAAW,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GACrF,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAkB,UAAU,WAAa,WACrC,MAAe,EAAK,OAAO,aACX,EAAK,OAAO,YAAc,MAC7B,EAAW,KAAK,MAAM,aACtB,EAAY,KAAK,MAAM,YACpC,KAAK,MAAM,MAAQ,KAAK,IAAI,EAAQ,GACpC,KAAK,MAAM,SACX,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAK,OAAO,YAAc,IAE7C,EAAkB,UAAU,SAAW,WACnC,MAAiB,KAAK,MAAM,OAAO,YAAY,KAAK,KAAK,OAAS,EAClE,AAAI,GACA,KAAK,MAAM,OAAO,aAAa,KAAK,KAExC,KAAK,IAAI,MAAQ,KAAK,MAAM,MAC5B,KAAK,IAAI,EAAI,EAAK,OAAO,gBACzB,KAAK,IAAI,EAAI,KAAK,MAAM,EAAM,MAAK,MAAM,YAAc,IAAM,KAAK,MAAM,MAAS,EACjF,AAAI,GACA,KAAK,WAAW,KAAK,IAAI,QAGjC,EAAkB,UAAU,WAAa,WACrC,KAAK,MAAM,MAAS,EAAK,OAAO,WAAa,IAAO,KAAK,MAAM,MAC/D,KAAK,MAAM,EAAI,KAAK,IAAI,EACxB,KAAK,MAAM,EAAI,KAAK,IAAI,eAAe,EAAI,GAAK,KAAK,IAAI,OAE7D,EAAkB,UAAU,WAAa,YACrC,KAAK,MAAM,WAAW,IAE1B,EAAkB,UAAU,KAAO,WAC/B,KAAK,SACL,KAAK,SACL,KAAK,YACL,KAAK,iBACL,KAAK,UAAU,KACf,KAAK,QAAQ,KACb,KAAK,UAAU,KACf,KAAK,UAAU,QAAU,GACzB,KAAK,UAAU,OAAS,IAE5B,EAAkB,UAAU,UAAY,WACpC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,eAC7C,MAAK,MAAQ,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,cACpD,KAAK,MAAM,KAAK,GAAI,CAAE,MAAO,QAGrC,EAAkB,UAAU,eAAiB,WACzC,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAAK,mBAGpB,EAAkB,UAAU,UAAY,YACpC,KAAK,MAAM,KAAK,IAEpB,EAAkB,UAAU,QAAU,YAClC,MAAY,OACQ,KAAK,IAAI,MAC7B,KAAK,IAAI,MAAQ,EACjB,KAAK,IAAI,MAAQ,EAAgB,IACjC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,IACd,MAAO,EACP,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,MAAM,KACjE,MAAO,CAAE,MAAO,EAAe,SAAU,IAAK,KAAM,OAAO,KAAK,OAAO,KAAK,KAC5E,WAAY,WACR,EAAM,aAAa,GAAK,GACxB,EAAM,WAAW,OAI7B,EAAkB,UAAU,WAAa,YACrC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,IACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,EAAgB,KACxB,OAAQ,EAAgB,IACxB,KAAM,GACN,OAAQ,MAGhB,EAAkB,UAAU,UAAY,YACpC,KAAK,MAAM,MAAQ,EACnB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,MAAO,KAGf,EAAkB,UAAU,QAAU,YAClC,AAAI,KAAK,OACL,KAAK,MAAM,OAEf,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAiB,EAAiB,iBAAsB,GAAK,mBAC7D,EAAiB,EAAiB,YAAiB,GAAK,cACxD,EAAiB,EAAiB,aAAkB,GAAK,eACzD,EAAiB,EAAiB,gBAAqB,GAAK,kBAC5D,EAAiB,EAAiB,aAAkB,GAAK,eACzD,EAAiB,EAAiB,qBAA0B,GAAK,uBACjE,EAAiB,EAAiB,qBAA0B,GAAK,uBACjE,EAAiB,EAAiB,gBAAqB,GAAK,kBAC5D,EAAiB,EAAiB,0BAA+B,GAAK,4BACtE,EAAiB,EAAiB,yBAA8B,IAAM,2BACtE,EAAiB,EAAiB,cAAmB,IAAM,kBAC5D,EAAmB,EAAK,kBAAqB,GAAK,iBAAmB,OACzE,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,iBAAmB,EACzB,EAAM,KAAO,gBACb,EAAM,SACN,EAAM,UACN,EAAM,aACN,EAAM,iBACN,EAAM,QAAQ,GACd,EAAM,QACC,EAEX,SAAa,UAAU,OAAS,WAC5B,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,gBACtD,KAAK,IAAI,KAAK,MAElB,EAAa,UAAU,QAAU,WAC7B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,iBACvD,KAAK,IAAI,KAAK,OAElB,EAAa,UAAU,WAAa,WAChC,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,qBAC1D,KAAK,IAAI,KAAK,UAElB,EAAa,UAAU,QAAU,YAC7B,MAAY,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,iBAAiB,KAAK,KAAK,MAAQ,KAC7C,KAAK,KAAK,eAAe,IACzB,KAAK,KAAK,GAAK,KAAK,iBAAmB,EACvC,KAAK,IAAI,KAAK,OAElB,EAAa,UAAU,eAAiB,WACpC,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,eAAgB,wBAAyB,OAEtF,EAAa,UAAU,MAAQ,WAC3B,KAAK,IAAI,EAAI,KAAK,KAAK,KAAO,IAC9B,KAAK,IAAI,EAAI,KAAK,KAAK,IACvB,KAAK,QAAQ,EAAI,KAAK,IAAI,EAC1B,KAAK,QAAQ,EAAI,KAAK,IAAI,EAAI,EAC9B,KAAK,YAAY,EAAI,KAAK,KAAK,MAC/B,KAAK,YAAY,EAAI,KAAK,KAAK,IAC/B,KAAK,aAET,EAAa,UAAU,UAAY,WAC/B,MAAgB,KAAK,KAAK,OAAS,GACnC,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,SAExD,EAAa,UAAU,KAAO,YAC1B,MAAwB,KAAK,KAAK,MAClC,KAAK,KAAK,OAAS,GACnB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,MAAO,CAAE,MAAO,EAAmB,KAAM,OAAO,KAAK,OAAO,KAAK,IAAK,SAAU,KAChF,MAAO,CAAE,MAAO,EAAG,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,KACxE,MAAO,IAEX,KAAK,mBAET,EAAa,UAAU,gBAAkB,WACrC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,sBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,IAAM,MAAO,OAG5F,EAAa,UAAU,SAAW,WAC9B,MAAO,MAAK,KAAK,OAErB,EAAa,UAAU,UAAY,WAC/B,MAAO,MAAK,KAAK,QAEd,GACT,OAAO,YAAY,WACrB,EAAK,aAAe,IACrB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAkB,OAAO,YAAY,cAErC,AAAC,aACG,EAAc,SAAc,sBAC7B,EAAgB,EAAK,eAAkB,GAAK,cAAgB,KAC/D,MAAoC,YAChC,UAAU,EAAgB,GAC1B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,EAAM,KAAO,WACb,EAAM,OAAS,EACf,EAAM,cACN,EAAM,YACN,EAAM,UACN,MAAuB,EAAM,MAAM,KAAK,eAAiB,EAAK,aAAa,OAC3E,MAAI,KAAqB,GACrB,GAAM,SAAS,KAAO,EAAM,OAAO,qBACnC,EAAM,SAAS,KAAK,YAAc,IAGlC,GAAM,SAAS,OACf,EAAM,OAAO,QAEV,EAEX,SAAe,UAAU,YAAc,WACnC,KAAK,SAAW,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC3D,KAAK,SAAS,MAAQ,GACtB,KAAK,IAAI,KAAK,WAElB,EAAe,UAAU,UAAY,WACjC,KAAK,OAAS,KAAK,MAAM,KAAK,SAAS,CACnC,UAAW,CAAE,MAAO,SAAU,MAAO,KAEzC,MAAY,KAAK,OAAO,QACX,KAAK,OAAO,OACzB,KAAK,OAAO,gBAAgB,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,IAEhE,EAAe,UAAU,QAAU,WAC/B,MAAkB,KAAK,MAAM,MAAM,SAAS,KAAK,OAAO,SACxD,AAAK,GACY,IAAgD,KAAK,OAAO,QACzE,EAAc,KAAK,OAAO,MAE9B,KAAK,MAAQ,GAAI,GAAK,aAAa,KAAK,MAAO,GAC/C,KAAK,MAAM,YAAY,KAAK,EAAY,MAAO,KAAK,mBAAoB,MACxE,KAAK,IAAI,KAAK,QAElB,EAAe,UAAU,mBAAqB,WAC1C,KAAK,KAAK,EAAc,SAAU,MAClC,KAAK,QAET,EAAe,UAAU,KAAO,YAC5B,KAAK,SAAS,GACd,KAAK,iBAET,EAAe,UAAU,SAAW,YAChC,MAAa,IACb,KAAK,MAAM,GAAK,EAChB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,KAAK,MAAM,EAAI,IAEtB,MAAoB,KAAK,MAAM,MAC/B,KAAK,MAAM,OAAS,GACpB,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,MACd,SAAU,IACV,MAAO,EACP,KAAM,OAAO,KAAK,OAAO,KAAK,MAElC,KAAK,MAAM,MAAQ,EACnB,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,KAAK,EAAe,MAEnC,EAAe,UAAU,cAAgB,WACrC,GAAI,CAAC,KAAK,OAAO,UACb,OAEJ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,OACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KAAK,OAAO,MAAQ,KAAK,OAAO,WACvC,OAAQ,GACR,KAAM,MAGd,EAAe,UAAU,KAAO,WAC5B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,MAAO,MAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,EAAG,UAEP,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,MACd,SAAU,IACV,MAAO,IACP,KAAM,OAAO,KAAK,OAAO,MAAM,GAC/B,MAAO,EACP,WAAY,KAAK,eAAe,KAAK,QAEzC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,MAAO,IACP,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAe,UAAU,eAAiB,WACtC,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,MAAM,OAAO,aAAa,KAAK,SAExC,EAAe,UAAU,OAAS,YAC9B,KAAK,iBACL,KAAK,aAAa,GAClB,KAAK,WAAW,IAEpB,EAAe,UAAU,eAAiB,WACtC,KAAK,SAAS,eAAe,EAAK,OAAO,WAAa,EAAG,EAAK,OAAO,YAAc,GACnF,KAAK,SAAS,EAAI,EAAK,OAAO,gBAC9B,KAAK,SAAS,EAAI,EAAK,OAAO,kBAElC,EAAe,UAAU,aAAe,YACpC,MAAa,EAAM,SACC,EAAO,aAC3B,KAAK,OAAO,EAAI,EAAc,EAAI,KAAK,OAAO,EAAI,EAAO,KACzD,KAAK,OAAO,EAAI,EAAc,EAAI,KAAK,OAAO,EAAI,EAAO,KACzD,KAAK,OAAO,MAAQ,EAAO,MAE/B,EAAe,UAAU,WAAa,YAClC,KAAK,MAAM,MAAQ,EAAM,QAAQ,KAAK,KACtC,KAAK,MAAM,EAAI,EAAK,OAAO,gBAC3B,KAAK,MAAM,EAAI,EAAK,OAAO,YAAe,KAAK,MAAM,YAAc,EAAK,KAAK,MAAM,MAAQ,IAE/F,EAAe,UAAU,QAAU,YAC/B,KAAK,OAAO,QAAQ,GACpB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAiB,KAAU,mBAC3B,EAAiB,KAAU,qBAC5B,EAAmB,EAAK,kBAAqB,GAAK,iBAAmB,KACxE,MAAiC,YAC7B,UAAU,EAAa,GACvB,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,CACjC,gBAAiB,IACjB,cAAe,eACf,gBAAiB,gBACf,KACN,SAAM,KAAO,eACb,EAAM,WAAW,KAAO,oBACxB,EAAM,kBACN,EAAM,kBACN,EAAM,QAAU,CAAC,EAAM,aAAc,EAAM,YAAa,EAAM,WAAY,EAAM,eAChF,EAAM,iBAAmB,EAAM,MAAM,IAAI,UAAU,EAAG,EAAG,EAAM,SAC/D,EAAM,iBAAiB,QAAQ,qBAC/B,EAAM,IAAI,EAAM,kBAChB,EAAM,QACC,EAEX,SAAY,UAAU,gBAAkB,WACpC,KAAK,aAAe,KAAK,MAAM,IAAI,OAAO,eAAgB,6BAA8B,KAAK,mBAEjG,EAAY,UAAU,gBAAkB,WACpC,KAAK,YAAc,KAAK,MAAM,IAAI,YAAY,eAAgB,+BAAgC,gCAAiC,KAAK,kBACpI,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,eAAgB,2BAA4B,KAAK,kBACzF,KAAK,cAAgB,KAAK,MAAM,IAAI,OAAO,eAAgB,8BAA+B,KAAK,mBAEnG,EAAY,UAAU,MAAQ,WAC1B,MAAS,MACA,IACT,KAAK,aAAa,EAAI,CAAC,EACvB,MAAqB,EACrB,KAAK,WAAW,EAAI,EACpB,KAAK,YAAY,EAAI,CAAC,EACtB,KAAK,YAAY,EAAI,EACrB,KAAK,cAAc,EAAI,EACvB,KAAK,cAAc,EAAI,GAE3B,EAAY,UAAU,OAAS,WAC3B,KAAK,WAAW,cAAiB,GAAK,OAAO,YAAc,GAAK,KAAK,OAEzE,EAAY,UAAU,KAAO,WACzB,KAAK,SACL,KAAK,KAAK,EAAiB,KAAM,MACjC,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,CAAE,KAAM,EAAG,GAAI,KAAK,QAAQ,mBAEvC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,QACd,SAAU,IACV,MAAO,CAAE,MAAO,EAAG,KAAM,EAAG,GAAI,EAAG,KAAM,OAAO,KAAK,OAAO,MAAM,IAAK,SAAU,KACjF,MAAO,CAAE,KAAM,IAAM,GAAI,GACzB,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,MAAO,KAAK,MAAM,OAAO,QAAQ,OAGzC,EAAY,UAAU,KAAO,WACzB,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,WACR,EAAM,OACN,EAAM,KAAK,EAAiB,KAAM,OAIvC,GACT,OAAO,YAAY,QACrB,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAoB,eAAoB,gCACxC,EAAoB,cAAmB,iCACxC,EAAsB,EAAK,qBAAwB,GAAK,oBAAsB,KACjF,MAAoC,YAChC,UAAU,EAAgB,GAC1B,cACI,MAAO,GAAO,KAAK,KAAM,EAAO,EAAG,EAAG,eAAgB,0BAA4B,KAEtF,SAAe,UAAU,YAAc,YACnC,KAAK,SAAS,EAAc,MAAM,MAClC,KAAK,UAAU,EAAc,QAAS,EAAc,UAExD,EAAe,UAAU,OAAS,cAC9B,MAAY,OACG,OAAO,KAAK,SAAS,QAAQ,KAAK,EAAG,KAAK,EAAG,EAAe,EAAG,EAAe,KAC9E,KAAK,IAAI,IAAM,EAAW,EAAK,OAAO,aAAgB,IACrE,KAAK,MAAM,KAAK,YAAY,EAAW,IAAM,WACzC,EAAM,KAAK,EAAoB,eAAgB,KAEnD,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,WAAY,CAAC,KACb,EAAG,EAAe,EAClB,EAAG,EAAe,EAClB,MAAO,EACP,WAAY,WACR,EAAM,KAAK,EAAoB,cAAe,GAC9C,EAAM,WAIlB,EAAe,UAAU,QAAU,YAC/B,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmC,YAC/B,UAAU,EAAe,GACzB,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,eACb,EAAM,WACC,EAEX,SAAc,UAAU,SAAW,WAC/B,MAAY,OACG,IACE,KAAK,gBACtB,KAAK,MAAQ,EAAE,MAAM,EAAU,WAC3B,MAAY,OAAO,KAAK,IAAI,KAAK,KACtB,EAAM,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,GACvD,SAAM,IAAI,GACH,KAGf,EAAc,UAAU,cAAgB,WACpC,MAAO,CAAC,EAAG,EAAG,GAAG,IAAI,YAAiB,MAAO,kCAAoC,KAErF,EAAc,UAAU,OAAS,WAC7B,MAAS,EAAK,OAAO,YAAe,MAAK,MAAM,OAAS,GACxD,KAAK,MAAM,QAAQ,cACf,EAAK,MAAQ,EAAK,OAAO,WAAa,EAAK,MAC3C,EAAK,EAAI,EAAK,OAAO,gBACrB,EAAK,EAAI,EAAM,GAAQ,GACvB,EAAK,QAAQ,YAAa,EAAK,MAGvC,EAAc,UAAU,KAAO,WAC3B,KAAK,SACL,KAAK,SACL,KAAK,aACL,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAc,UAAU,WAAa,WACjC,MAAY,KACZ,KAAK,MAAM,QAAQ,YACf,EAAK,MAAQ,IACb,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,MAAO,OAAO,KAAK,IAAI,QAAQ,EAAG,KAClC,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,GACP,KAAM,GACN,OAAQ,KAEZ,EAAM,UAAU,MAGxB,EAAc,UAAU,UAAY,YAChC,MAAY,OACE,EAAK,QAAQ,aAAe,OAAO,KAAK,IAAI,OAAS,OAAO,KAAK,IAAI,QAAQ,EAAG,MAC/E,EAAU,KAAK,IACf,EAAW,EAC1B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,EAAG,EACH,QAAS,WACL,EAAK,OAAS,EAAK,OAAS,OAAO,KAAK,IAAI,OAC5C,EAAK,OAAS,EAAK,OAAS,OAAO,KAAK,IAAI,QAEhD,WAAY,WACR,EAAM,UAAU,OAI5B,EAAc,UAAU,KAAO,WAC3B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,GAC/B,MAAO,EACP,WAAY,KAAK,eAAe,KAAK,SAG7C,EAAc,UAAU,eAAiB,WACrC,KAAK,iBACL,KAAK,QAET,EAAc,UAAU,eAAiB,WACrC,KAAK,MAAM,OAAO,aAAa,KAAK,QAEjC,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAmB,cAAmB,gCACvC,EAAqB,EAAK,oBAAuB,GAAK,mBAAqB,KAC9E,MAAmC,YAC/B,UAAU,EAAe,GACzB,oBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,WAAa,EAC1B,EAAM,SAAW,EACjB,EAAM,YAAc,EACpB,EAAM,IAAM,EACZ,EAAM,QAAQ,GACd,EAAM,QAAQ,GACP,EAEX,SAAc,UAAU,QAAU,YAC9B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,KAAK,aAAa,IACxE,KAAK,IAAI,KAAK,OAElB,EAAc,UAAU,aAAe,YACnC,MAAO,eAAiB,GAE5B,EAAc,UAAU,QAAU,YAC9B,MAAc,IAAM,EACpB,KAAK,KAAO,KAAK,MAAM,IAAI,WAAW,EAAG,EAAG,EAAK,eAAe,sBAAuB,EAAS,IAChG,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,GACjC,KAAK,IAAI,KAAK,OAElB,EAAc,UAAU,WAAa,cACjC,KAAK,KAAK,SAAS,KAAK,aAAa,IACrC,KAAK,KAAK,QAAQ,IAAM,EAAY,YACpC,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,IAErC,EAAc,UAAU,WAAa,YACjC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,MAAO,KAAK,MAAM,OAAO,QAAQ,IAAK,CAAE,MAAO,IAC/C,KAAM,GACN,OAAQ,MAGhB,EAAc,UAAU,UAAY,WAChC,KAAK,MAAM,OAAO,aAAa,KAAK,MACpC,KAAK,KAAK,EAAI,EACd,KAAK,KAAK,EAAI,KAAK,KAAK,OAAS,IAErC,EAAc,UAAU,WAAa,cACjC,MAAY,KACZ,KAAK,SAAS,GACd,MAAa,EAAK,qBACA,KAAK,gBAAgB,iBAAiB,KACzC,OAAO,KAAK,SAAS,QAAQ,EAAY,EAAG,EAAY,EAAG,KAAK,EAAG,KAAK,KACxE,KAAK,IAAI,IAAK,EAAW,IACxC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,EACP,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,KAAK,GAC9B,WAAY,CAAC,KACb,EAAG,EAAY,EACf,EAAG,EAAY,EACf,MAAO,IACP,QAAS,WACL,EAAM,MAAM,OAAO,aAAa,EAAM,OAE1C,WAAY,WACR,EAAM,KAAK,EAAmB,cAAe,GAC7C,EAAM,OACN,EAAK,aAAa,EAAM,QAGhC,MAAkB,EAAQ,EAAW,GACrC,KAAK,gBAAgB,IAEzB,EAAc,UAAU,SAAW,YAC/B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KAGf,EAAc,UAAU,gBAAkB,YACtC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,sBAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,oBAAqB,CAAE,OAAQ,GAAK,MAAO,EAAQ,OAGnG,EAAc,UAAU,QAAU,YAC9B,AAAI,KAAK,OACL,KAAK,MAAM,OAAO,aAAa,CAAC,KAAM,KAAK,KAAM,KAAK,OAE1D,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,cAAgB,IACtB,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eAE/B,AAAC,aACG,EAAgB,uBAA4B,oCAC5C,EAAgB,cAAmB,6BACpC,EAAkB,EAAK,iBAAoB,GAAK,gBAAkB,KACrE,MAAgC,YAC5B,UAAU,EAAY,GACtB,oBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,kBAAoB,EAC1B,EAAM,SAAW,GACjB,EAAM,KAAO,cACb,EAAM,SAAW,EACjB,EAAM,QAAU,EAChB,EAAM,cAAgB,EACtB,EAAM,gBACN,EAAM,cACN,EAAM,UACN,EAAM,cACN,EAAM,wBACN,EAAM,mBACN,EAAM,qBACN,EAAM,WAAW,EAAM,MACvB,EAAM,WAAW,EAAM,WACvB,EAAM,WAAW,EAAM,UAChB,EAEX,SAAW,UAAU,cAAgB,WACjC,KAAK,gBAAkB,GACvB,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,cAC5D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,WAAW,aAAe,EAAK,OAAO,kBAC3C,KAAK,WAAW,cAAgB,EAAK,OAAO,mBAC5C,KAAK,IAAI,KAAK,aAElB,EAAW,UAAU,YAAc,WAC/B,MAAY,OACH,MACQ,OACZ,QAAQ,KAAK,SACb,IAAI,YAAmB,MAAQ,CAAE,KAAM,EAAM,GAAI,IAAK,EAAM,MAC5D,OAAO,YAAmB,MAAO,GAAM,IAAM,IAClD,KAAK,SAAW,EAAW,IAAI,cAC3B,MAAW,GAAI,GAAK,cAAc,EAAM,MAAO,EAAM,SAAU,EAAM,KAAM,EAAM,KACjF,SAAK,EAAI,EAAQ,EAAO,GAAW,OAAS,GAAK,EAAM,EACvD,EAAK,EAAI,EACT,EAAK,OACL,EAAM,IAAI,GACH,KAGf,EAAW,UAAU,QAAU,WAC3B,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,oBACtD,KAAK,KAAK,EAAI,IACd,KAAK,IAAI,KAAK,MACd,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,SAAU,0BAC3D,KAAK,UAAU,EAAI,KAAK,KAAK,EAC7B,KAAK,UAAU,EAAI,KAAK,KAAK,EAAI,GACjC,KAAK,UAAU,UAAU,KAAK,KAAK,QAAS,KAAK,KAAK,SACtD,KAAK,UAAU,OACf,KAAK,IAAI,KAAK,YAElB,EAAW,UAAU,YAAc,WAC/B,MAAc,KAAK,MAAM,MAAM,YACnB,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,YAES,EAAK,OAAO,kBAAoB,IACpD,KAAK,SAAW,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACnD,KAAK,SAAS,UAAU,GAAK,IAC7B,KAAK,SAAS,EAAI,KAAK,KAAK,OAAS,GACrC,KAAK,SAAS,iBAAiB,EAAe,IAC9C,KAAK,IAAI,KAAK,WAElB,EAAW,UAAU,sBAAwB,WACzC,KAAK,mBAAqB,KAAK,MAAM,IAAI,UAAU,EAAG,GACtD,KAAK,mBAAmB,KAAO,sBAC/B,KAAK,mBAAmB,EAAI,GAC5B,KAAK,mBAAmB,EAAI,KAAK,KAAK,EAAI,GAC1C,KAAK,IAAI,KAAK,qBAElB,EAAW,UAAU,iBAAmB,WACpC,KAAK,cAAgB,KAAK,MAAM,IAAI,UAAU,gBAC9C,KAAK,SAAW,KAAK,cAAc,kBAAkB,CACjD,MAAO,GACP,QAAS,IACT,QAAS,MAEb,MAAiB,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,KAAK,UAAU,cAC7D,KAAK,mBAAqB,KAAK,cAAc,cAAc,CACvD,MAAO,CAAC,+BACR,SAAU,IACV,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,MAAO,CAAE,MAAO,KAAM,IAAK,KAC3B,SAAU,EACV,GAAI,KACL,aAAa,CACZ,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,EAAW,OAAS,KACzD,KAAM,YACP,YAAY,CACX,OAAQ,EACR,KAAM,WAEV,KAAK,mBAAqB,KAAK,cAAc,cAAc,CACvD,MAAO,CAAC,+BACR,SAAU,IACV,MAAO,CAAE,IAAK,GAAI,IAAK,MACvB,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,MAAO,CAAE,MAAO,KAAM,IAAK,GAC3B,GAAI,KAER,KAAK,mBAAmB,IAAI,KAAK,gBAErC,EAAW,UAAU,mBAAqB,WACtC,KAAK,gBAAkB,KAAK,MAAM,IAAI,UAAU,gBAChD,KAAK,eAAiB,KAAK,gBAAgB,cAAc,CACrD,MAAO,CAAC,yBACR,MAAO,CAAE,MAAO,GAAK,IAAK,IAAK,KAAM,EAAa,aAClD,MAAO,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,aAC9C,SAAU,IACV,UAAW,IACX,GAAI,KAER,KAAK,mBAAmB,IAAI,KAAK,kBAErC,EAAW,UAAU,OAAS,WAC1B,KAAK,WAAW,cAAiB,GAAK,OAAO,YAAc,GAAK,KAAK,OAEzE,EAAW,UAAU,KAAO,WACxB,KAAK,SAAS,KACd,KAAK,aAAa,MAEtB,EAAW,UAAU,SAAW,YAC5B,MAAY,KACZ,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,MAAQ,GAClB,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,EACP,WAAY,WACR,EAAM,wBAGd,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,eAAe,KAAK,OAE9B,KAAK,oBAAoB,IAE7B,EAAW,UAAU,oBAAsB,YACvC,GAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,cAC7C,MAAY,EAAe,IAAO,GAClC,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,YAAa,CAAE,OAAQ,GAAK,MAAO,MAGnF,EAAW,UAAU,mBAAqB,WACtC,MAAY,KACZ,AAAI,KAAK,SACL,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,gBAIV,MAAK,KAAK,iBACV,KAAK,KAAK,MAAM,OAAS,UACzB,KAAK,KAAK,KAAK,OAAO,MAAM,OAAO,wBAAyB,KAAK,YAAa,OAElF,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,KACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,KACR,OAAQ,IACR,KAAM,GACN,OAAQ,MAGhB,EAAW,UAAU,YAAc,WAC/B,MAAY,KACZ,KAAK,eACL,KAAK,oBACL,KAAK,sBACL,KAAK,mBAAmB,GAAK,GAC7B,KAAK,eAAe,YAAY,KAChC,KAAK,eAAe,SAAS,CAAE,MAAO,EAAG,IAAK,IAAM,KAAM,EAAa,cACvE,KAAK,eAAe,SAAS,CAAE,MAAO,KAAM,IAAK,GAAK,KAAM,EAAa,SACzE,KAAK,eAAe,KAAK,KACzB,KAAK,KAAK,qBACV,KAAK,MAAM,OAAO,aAAa,KAAK,MACpC,KAAK,UAAU,OAAS,KAAK,KAAK,OAClC,KAAK,UAAU,OAAS,KAAK,KAAK,OAClC,KAAK,UAAU,MAAQ,EACvB,KAAK,UAAU,SACf,MAAe,KACf,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,UAAW,KAAK,MAC/B,SAAU,EACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KAAK,KAAK,MAAQ,MAC1B,GAAG,OAAO,OAAO,OAAO,kBAAmB,WAC1C,EAAM,eAAe,UACrB,EAAM,eAAe,YAAY,KACjC,EAAM,eAAe,SAAS,CAAE,MAAO,EAAG,IAAK,EAAG,KAAM,EAAa,cACrE,EAAM,eAAe,SAAS,CAAE,MAAO,GAAK,IAAK,EAAG,KAAM,EAAa,cACvE,EAAM,eAAe,QAAQ,EAAG,EAAG,GACnC,EAAM,kBACN,EAAM,wBACN,EAAM,yBACN,EAAM,cACN,EAAM,iBAEV,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,CAAC,KAAK,UAAW,KAAK,MAC/B,SAAU,GACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,EAAG,OACH,OAAQ,GACR,KAAM,MAGd,EAAW,UAAU,kBAAoB,WACrC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,YAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,UAAW,CAAE,OAAQ,KAGrE,EAAW,UAAU,oBAAsB,WACvC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,cAC7C,MAAK,YAAc,KAAK,MAAM,MAAM,IAAI,EAAK,aAAa,YAAa,CAAE,OAAQ,KACjF,KAAK,YAAY,SAGzB,EAAW,UAAU,gBAAkB,WACnC,AAAI,KAAK,aACL,KAAK,YAAY,QAGzB,EAAW,UAAU,sBAAwB,WACzC,KAAK,SAAS,OAAS,GACvB,KAAK,mBAAmB,OAAS,GACjC,KAAK,mBAAmB,GAAK,GAC7B,KAAK,mBAAmB,WAE5B,EAAW,UAAU,uBAAyB,WAC1C,KAAK,mBAAmB,YAAY,CAChC,OAAQ,GAAI,QAAO,KAAK,OAAO,EAAG,EAAG,KACrC,KAAM,WAEV,KAAK,mBAAmB,QAAQ,IAAK,KAAK,SAAS,EAAG,KAAK,SAAS,EAAI,MAE5E,EAAW,UAAU,YAAc,WAC/B,MAAY,KACZ,KAAK,KAAK,OACV,KAAK,uBACL,KAAK,MAAM,OAAO,aAAa,CAAC,KAAK,KAAM,KAAK,YAChD,MAAoB,GACpB,KAAK,UAAU,GAAM,MAAK,UAAU,QAAU,GAAiB,KAAK,UAAU,cAC9E,KAAK,UAAU,UAAU,GAAK,GAC9B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,UACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,MAAO,EACP,WAAY,WACR,EAAM,UAAU,WAI5B,EAAW,UAAU,qBAAuB,WACxC,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,eAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,aAAc,CAAE,OAAQ,KAGxE,EAAW,UAAU,aAAe,WAChC,MAAY,KACZ,KAAK,SAAS,QAAQ,cAClB,MAAQ,EAAQ,IACR,EAAQ,EAChB,EAAQ,SACR,EAAQ,WAAW,EAAQ,KAC3B,EAAQ,EAAI,EAAM,UAAU,EAC5B,EAAQ,EAAI,EAAM,UAAU,EAC5B,EAAQ,MAAQ,IAChB,EAAQ,MAAQ,EAChB,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,MAAO,IAEX,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,KACV,KAAM,OAAO,KAAK,OAAO,QAAQ,IACjC,WAAY,CAAC,GAAK,IAClB,EAAG,EACH,EAAG,MAGX,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,4BAGd,EAAW,UAAU,uBAAyB,WAC1C,MAAY,KACZ,KAAK,KAAK,EAAgB,uBAAwB,MAClD,AAAI,KAAK,SACL,KAAK,MAAM,KAAK,YAAY,IAAK,WAC7B,EAAM,oBAIV,MAAK,WAAW,iBAChB,KAAK,WAAW,KAAK,OAAO,MAAM,OAAO,wBAAyB,KAAK,gBAAiB,QAGhG,EAAW,UAAU,gBAAkB,WACnC,KAAK,WAAW,qBAChB,KAAK,oBACL,KAAK,mBAET,EAAW,UAAU,gBAAkB,WACnC,MAAY,KACZ,KAAK,kBAAoB,EACzB,KAAK,SAAS,QAAQ,cAClB,MAAY,EAAQ,MACT,EAAM,cAAc,cAAc,EAAQ,aACrD,EAAQ,GAAG,EAAK,mBAAmB,cAAe,EAAM,yBAA0B,GAClF,EAAQ,WAAW,EAAM,MAGjC,EAAW,UAAU,yBAA2B,WAC5C,GAAI,EAAE,KAAK,kBAAoB,KAAK,SAAS,OACzC,OAEJ,KAAK,0BAET,EAAW,UAAU,uBAAyB,WAC1C,KAAK,QAET,EAAW,UAAU,KAAO,WACxB,MAAY,KACZ,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,KAAK,EAAgB,cAAe,GAC1C,EAAM,cAIlB,EAAW,UAAU,aAAe,YAChC,KAAK,SAAS,MAAQ,EACtB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,MAAO,EACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,UAAU,IACnC,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KACP,KAAM,GACN,OAAQ,MAGhB,EAAW,UAAU,aAAe,WAChC,MAAY,KACZ,KAAK,MAAM,OAAO,aAAa,KAAK,UACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,EAAG,OACH,WAAY,WACR,EAAM,SAAS,WAI3B,EAAW,UAAU,QAAU,YAC3B,KAAK,gBAAgB,QAAQ,GAC7B,KAAK,cAAc,QAAQ,GAC3B,AAAI,KAAK,aACL,KAAK,YAAY,UAErB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,WAAa,IACnB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,UAAY,EAClB,EAAM,KAAO,uBACb,EAAM,QAAU,EAAM,MAAM,KAAK,SAAS,YAC1C,EAAM,UACN,EAAM,SACN,EAAM,UACN,EAAM,aACC,EAEX,SAAmB,UAAU,QAAU,WACnC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,4CACvD,KAAK,KAAK,UAAU,GAAK,GACzB,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,OAAS,WAClC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,gDACtD,KAAK,IAAI,UAAU,GAAK,GACxB,KAAK,IAAI,EAAI,KAAK,KAAK,EAAI,GAC3B,KAAK,IAAI,KAAK,MAElB,EAAmB,UAAU,QAAU,WACnC,MAAc,KAAK,QAAQ,OACf,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,UAAU,GAAK,IACzB,KAAK,KAAK,iBAAiB,KAAK,KAAK,MAAQ,IAC7C,KAAK,KAAK,YAAc,GACxB,KAAK,KAAK,EAAI,CAAC,KAAK,KAAK,OAAS,EAClC,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,WAAa,YACtC,KAAK,KAAK,QAAQ,GAClB,KAAK,kBAET,EAAmB,UAAU,eAAiB,WAC1C,MAAgB,KAAK,KAAK,OAAS,GACnC,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,SAExD,EAAmB,UAAU,WAAa,WACtC,MAAY,KACZ,KAAK,KAAK,QAAQ,YACd,EAAK,GAAK,EAAM,IAAI,UAG5B,EAAmB,UAAU,SAAW,WACpC,MAAO,MAAK,KAAK,OAErB,EAAmB,UAAU,UAAY,YACrC,KAAK,IAAI,EAAI,CAAC,EAAS,KAAK,OAEzB,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,EAAM,gBAAkB,IACxB,EAAM,KAAO,sBACb,EAAM,YAAc,EACpB,EAAM,cAAgB,EAAY,cAClC,EAAM,YACN,EAAM,gBACN,EAAM,aACN,EAAM,cACN,MAAuB,EAAM,MAAM,KAAK,eAAiB,EAAK,aAAa,OAC3E,MAAI,IACA,GAAM,WAAW,OACjB,EAAM,OAAO,OACb,EAAM,SAAS,UAAU,mBAAoB,KAE1C,EAEX,SAAkB,UAAU,UAAY,WACpC,KAAK,OAAS,KAAK,MAAM,KAAK,SAAS,CACnC,UAAW,CAAE,MAAO,SAAU,MAAO,KAEzC,MAAY,MACC,IACb,KAAK,OAAO,gBAAgB,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,IAEhE,EAAkB,UAAU,cAAgB,WACxC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,eAAgB,cAC7D,KAAK,WAAW,MAAQ,KAAK,gBAC7B,KAAK,WAAW,KAAO,KAAK,OAAO,qBACnC,KAAK,WAAW,KAAK,YAAc,GACnC,KAAK,WAAW,KAAO,2BACvB,KAAK,IAAI,KAAK,aAElB,EAAkB,UAAU,WAAa,WACrC,KAAK,QAAU,GAAI,GAAK,mBAAmB,KAAK,OAChD,KAAK,IAAI,KAAK,UAElB,EAAkB,UAAU,YAAc,WACtC,MAAc,KAAK,MAAM,MAAM,eACnB,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,SAAW,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACnD,KAAK,SAAS,UAAU,GAAK,IAC7B,KAAK,SAAS,eAAe,IAC7B,KAAK,IAAI,KAAK,WAElB,EAAkB,UAAU,OAAS,YACjC,KAAK,mBACL,KAAK,aAAa,GAClB,KAAK,YAAY,GACjB,KAAK,eACL,KAAK,iBAET,EAAkB,UAAU,iBAAmB,WAC3C,KAAK,WAAW,aAAe,EAAK,OAAO,WAAa,EACxD,KAAK,WAAW,cAAgB,EAAK,OAAO,YAAc,EAC1D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,kBAEpC,EAAkB,UAAU,aAAe,YACvC,MAAc,KACF,EAAS,KAAK,WAAa,IAC1B,EAAS,KAAK,YAAc,EACzC,KAAK,OAAO,gBAAgB,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,GAC5D,KAAK,OAAO,MAAQ,EACpB,KAAK,OAAO,OAAS,GAEzB,EAAkB,UAAU,YAAc,YACtC,MAAa,EAAM,SACC,EAAO,aAC3B,KAAK,OAAO,EAAI,EAAc,EAAI,EAAO,KAAO,EAAM,KAAK,WAAa,EACxE,KAAK,OAAO,EAAI,EAAc,EAAI,EAAO,KAAO,EAAM,KAAK,YAAc,EACzE,KAAK,OAAO,MAAQ,EAAO,MAE/B,EAAkB,UAAU,aAAe,WACvC,MAAY,KAAK,YAAY,QAClB,KAAK,cAAc,cAAc,KAAK,QAAQ,QAAQ,QAClD,EAAK,mBACpB,KAAK,QAAQ,MAAQ,EACrB,KAAK,QAAQ,EAAI,EAAS,EAAI,GAAK,EACnC,KAAK,QAAQ,UAAY,KAAK,QAAQ,EACtC,MAAY,EAAK,OAAO,WAAa,GAAK,IAC/B,EAAU,MAAK,QAAQ,WAAa,IAAM,EAAS,EAC9D,AAAI,EAAS,EAAI,EACb,MAAK,QAAQ,EAAI,EACjB,KAAK,QAAQ,UAAU,EAAO,EAAS,IAGvC,MAAK,QAAQ,EAAI,EAAS,EAC1B,KAAK,QAAQ,UAAU,KAG/B,EAAkB,UAAU,cAAgB,WACxC,MAAU,IACG,KAAK,OAAO,EAAK,KAAK,OAAO,OAAS,KAAK,OAAO,MAAS,IAC3D,EAAS,IACN,EAAS,KACT,KAAK,OAAO,MAAQ,KAAK,OAAO,MAAS,IACzD,KAAK,SAAS,EAAI,EAAK,OAAO,gBAC9B,KAAK,SAAS,EAAI,EAAM,EAAS,EACjC,KAAK,SAAS,iBAAiB,GAC/B,KAAK,SAAS,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,SAAS,QAC5D,KAAK,SAAS,UAAY,KAAK,SAAS,EACxC,KAAK,SAAS,cAAgB,KAAK,SAAS,OAEhD,EAAkB,UAAU,WAAa,YACrC,KAAK,cAAc,IAEvB,EAAkB,UAAU,cAAgB,YACxC,KAAK,QAAQ,QAAU,EACvB,KAAK,QAAQ,WAAW,EAAQ,MAChC,KAAK,gBAET,EAAkB,UAAU,KAAO,WAC/B,KAAK,SACL,KAAK,MAAQ,EACb,KAAK,eAAe,GACpB,KAAK,YAAY,GACjB,KAAK,SAAS,MAElB,EAAkB,UAAU,eAAiB,YACzC,KAAK,WAAW,MAAQ,EACxB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,KAAK,mBAGpB,EAAkB,UAAU,YAAc,YACtC,KAAK,QAAQ,SACb,KAAK,QAAQ,MAAQ,EACrB,KAAK,QAAQ,EAAI,KAAK,QAAQ,UAAY,GAC1C,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,QACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,KAAK,QAAQ,aAGxB,EAAkB,UAAU,SAAW,YACnC,MAAY,KACZ,KAAK,SAAS,MAAQ,EACtB,KAAK,SAAS,MAAQ,KAAK,SAAS,cAAgB,GACpD,KAAK,SAAS,EAAI,KAAK,SAAS,UAAY,GAC5C,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,IAEX,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,EAAG,KAAK,SAAS,YAErB,KAAK,MAAM,OAAO,IAAI,CAClB,MAAO,EACP,QAAS,KAAK,SACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,IAC9B,MAAO,KAAK,SAAS,cACrB,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EAAM,SACf,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,EAAM,SAAS,cAAgB,GACtC,KAAM,GACN,OAAQ,SAKxB,EAAkB,UAAU,KAAO,WAC/B,MAAY,KACZ,KAAK,QAAQ,OACb,KAAK,MAAM,OAAO,aAAa,KAAK,UACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,WAIlB,EAAkB,UAAU,QAAU,YAClC,KAAK,OAAO,QAAQ,GACpB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA2B,YACvB,UAAU,EAAO,GACjB,kBACI,MAAO,GAAO,KAAK,KAAM,EAAO,EAAG,EAAG,EAAO,IAAU,KAE3D,SAAM,UAAU,KAAO,YACnB,MAAY,KACZ,KAAK,SACL,KAAK,MAAM,OAAO,aAAa,MAC/B,KAAK,MAAQ,EACb,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,EAAQ,eAClB,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EAAQ,YACf,WAAY,WACR,EAAM,MAAM,OAAO,IAAI,CACnB,QAAS,EACT,SAAU,EAAQ,gBAClB,KAAM,OAAO,KAAK,OAAO,UAAU,GACnC,MAAO,EACP,WAAY,WACR,EAAM,cAM1B,EAAM,UAAU,OAAS,WACrB,KAAK,aAAe,EAAK,OAAO,WAAa,EAC7C,KAAK,cAAgB,EAAK,OAAO,YAAc,EAC/C,KAAK,EAAI,EAAK,OAAO,gBACrB,KAAK,EAAI,EAAK,OAAO,kBAEzB,EAAM,UAAU,QAAU,YACtB,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,OACrB,EAAK,MAAQ,IACd,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAuC,YACnC,UAAU,EAAmB,GAC7B,gBACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,QACb,EAAM,MAAQ,EACd,EAAM,UACN,EAAM,SACN,EAAM,WACN,EAAM,cACN,EAAM,iBACN,EAAM,mBACN,EAAM,WAAW,EAAM,KACvB,EAAM,WAAW,EAAM,OACvB,EAAM,WAAW,EAAM,UAChB,EAEX,SAAkB,UAAU,QAAU,WAClC,KAAK,KAAO,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,MAAO,4BACnD,KAAK,IAAI,KAAK,OAElB,EAAkB,UAAU,OAAS,WACjC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,MAAO,qBAClD,KAAK,IAAI,EAAI,GACb,KAAK,IAAI,EAAI,KAAK,KAAK,IAAM,GAC7B,KAAK,IAAI,KAAK,KACd,KAAK,QAAU,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,MAAO,0BACtD,KAAK,QAAQ,EAAI,KAAK,IAAI,EAAI,EAC9B,KAAK,QAAQ,EAAI,KAAK,IAAI,EAAI,GAC9B,KAAK,IAAI,KAAK,SACd,KAAK,UAAY,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,KAAK,MAAO,4BACxD,KAAK,UAAU,EAAI,KAAK,IAAI,EAAI,IAChC,KAAK,UAAU,EAAI,KAAK,IAAI,EAAI,IAChC,KAAK,IAAI,KAAK,YAElB,EAAkB,UAAU,SAAW,WACnC,MAAc,KAAK,MAAM,MAAM,cAAc,QACjC,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,WAEX,KAAK,MAAQ,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAChD,KAAK,MAAM,UAAU,GAAK,IAC1B,KAAK,MAAM,EAAI,KAAK,KAAK,IAAM,KAAK,MAAM,OAAS,EAAI,GACvD,KAAK,IAAI,KAAK,QAElB,EAAkB,UAAU,eAAiB,WACzC,MAAY,CACR,UAAW,mCACX,UAAW,sBACX,UAAW,UAEf,KAAK,YAAc,GAAI,GAAK,mBAAmB,KAAK,MAAO,GAC3D,KAAK,YAAY,KAAK,OACtB,KAAK,IAAI,KAAK,cAElB,EAAkB,UAAU,YAAc,WACtC,MAAc,KAAK,uBACP,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,SAAW,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GACnD,KAAK,SAAS,UAAU,GAAK,IAC7B,KAAK,SAAS,iBAAiB,KAAK,KAAK,MAAQ,KACjD,KAAK,SAAS,eAAe,IAC7B,KAAK,SAAS,OAAS,KAAK,KAAK,OAAS,GAC1C,KAAK,IAAI,KAAK,WAElB,EAAkB,UAAU,mBAAqB,WAC7C,MAAO,MAAK,MAAM,MAAM,cAAc,SAAS,QAAQ,IAAK,EAAK,aAAa,KAAK,aAEvF,EAAkB,UAAU,iBAAmB,WAC3C,MAAU,KAAK,MAAM,SACR,KAAK,SAAS,MACd,EAAS,IACN,EAAS,GACzB,KAAK,YAAY,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,YAAY,aAClE,KAAK,YAAY,EAAI,EAAM,EAAS,EAAI,KAAK,YAAY,mBAAqB,GAElF,EAAkB,UAAU,WAAa,kBACrC,KAAK,YAAY,WAAW,EAAY,EAAiB,GACzD,KAAK,SAAS,KAAO,IAAgB,EAC/B,KAAK,MAAM,MAAM,kBAAkB,KAAK,QAAQ,IAAK,EAAkB,YACvE,KAAK,MAAM,MAAM,cAAc,SAAS,QAAQ,IAAK,EAAK,aAAa,KAAK,aAEtF,EAAkB,UAAU,UAAY,WACpC,MAAO,MAAK,KAAK,QAEd,GACT,OAAO,YAAY,WACrB,EAAK,kBAAoB,IAC1B,MAAS,MAAO,KAEnB,SACA,AAAC,aACG,MAAa,OAAO,YAAY,SACb,OAAO,KAAK,eAE/B,AAAC,aACG,EAAwB,WAAgB,gCACxC,EAAwB,cAAmB,qCAC5C,EAA0B,EAAK,yBAA4B,GAAK,wBAA0B,KAC7F,MAAwC,YACpC,UAAU,EAAoB,GAC9B,gBACI,MAAY,EAAO,KAAK,KAAM,EAAO,CACjC,cAAe,EACf,gBAAiB,aACjB,gBAAiB,OACf,KACN,SAAM,KAAO,gBACb,EAAM,MAAQ,EACd,EAAM,WAAW,KAAO,4BACxB,EAAM,WACN,EAAM,iBACN,EAAM,gBACN,EAAM,WAAW,EAAM,OAChB,EAEX,SAAmB,UAAU,SAAW,WACpC,KAAK,MAAQ,GAAI,GAAK,kBAAkB,KAAK,MAAO,KAAK,OACzD,KAAK,IAAI,KAAK,QAElB,EAAmB,UAAU,eAAiB,WAC1C,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,KAAK,MAAO,6BAA8B,OAEvF,EAAmB,UAAU,cAAgB,WACzC,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,KAAK,MAAO,6BAA8B,MAClF,KAAK,WAAW,EAAI,KAAK,MAAM,EAAI,KAAK,MAAM,YAAc,EAAI,KAAK,WAAW,OAAS,EAAI,GAC7F,KAAK,WAAW,iBAAmB,IAEvC,EAAmB,UAAU,OAAS,WAClC,KAAK,WAAW,cAAiB,GAAK,OAAO,YAAc,GAAK,KAAK,MACrE,KAAK,kBACL,KAAK,oBAET,EAAmB,UAAU,gBAAkB,WAC3C,MAAU,KAAK,MAAM,EAAI,KAAK,MAAM,YAAc,IACrC,KAAK,WAAW,cAAgB,IAChC,EAAS,EACtB,KAAK,WAAW,EAAI,EAAM,EAAS,GAEvC,EAAmB,UAAU,iBAAmB,WAC5C,MAAa,GACb,KAAK,YAAY,EAAI,EAAK,OAAO,kBAAoB,EAAI,EACzD,KAAK,YAAY,EAAI,CAAC,KAAK,WAAW,cAAgB,EAAI,GAE9D,EAAmB,UAAU,WAAa,kBACtC,KAAK,MAAM,WAAW,EAAa,EAAY,EAAiB,IAEpE,EAAmB,UAAU,KAAO,WAChC,MAAY,KACZ,KAAK,MAAQ,EACb,MAAY,CAAC,KAAK,MAAO,KAAK,WAAY,KAAK,MAAM,UAAW,KAAK,aACrE,EAAM,QAAQ,YACV,EAAK,MAAQ,EACb,EAAK,MAAQ,KAEjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,EAAa,OACrD,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,EAAa,MACrD,MAAO,KAAK,MAAM,OAAO,QAAQ,OAClC,GAAG,OAAO,OAAO,OAAO,kBAAmB,WAC1C,EAAM,sBAEV,KAAK,mBAET,EAAmB,UAAU,kBAAoB,WAC7C,KAAK,uBAAyB,KAAK,MAAM,KAAK,SAAS,CACnD,OAAQ,GACR,QAAS,KACT,MAAO,IACP,SAAU,KAAK,gBACf,cAAe,QAGvB,EAAmB,UAAU,gBAAkB,WAC3C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,IACR,OAAQ,IACR,OAAQ,EACR,KAAM,MAGd,EAAmB,UAAU,gBAAkB,WAC3C,AAAI,KAAK,MAAM,MAAM,MAAM,IAAI,EAAK,aAAa,cAC7C,KAAK,MAAM,MAAM,KAAK,EAAK,aAAa,YAAa,CAAE,OAAQ,OAGvE,EAAmB,UAAU,KAAO,WAChC,MAAY,KACZ,AAAI,KAAK,wBACL,MAAK,uBAAuB,SAC5B,KAAK,uBAAyB,MAElC,KAAK,MAAM,OAAO,aAAa,KAAK,YACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,QAAS,WACL,EAAM,KAAK,EAAwB,WAAY,GAC/C,EAAM,MAAM,KAAK,OAAO,cAE5B,WAAY,WACR,EAAM,KAAK,EAAwB,cAAe,GAClD,EAAM,cAIlB,EAAmB,UAAU,iBAAmB,WAC5C,KAAK,YAAY,MAAQ,EACzB,KAAK,MAAM,OAAO,aAAa,KAAK,aACpC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,YACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,MAAO,KACP,KAAM,GACN,OAAQ,KAGT,GACT,GACF,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmB,OAAO,KAAK,eAE/B,AAAC,aACG,EAAwB,WAAgB,gCACxC,EAAwB,cAAmB,qCAC5C,EAA0B,EAAK,yBAA4B,GAAK,wBAA0B,KAC7F,MAAwC,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,CACjC,cAAe,eACf,gBAAiB,aACjB,gBAAiB,OACf,KACN,SAAM,KAAO,sBACb,EAAM,cACN,EAAM,WACN,EAAM,gBACN,EAAM,iBACN,EAAM,WAAW,EAAM,OAChB,EAEX,SAAmB,UAAU,YAAc,WACvC,KAAK,SAAW,GAAI,GAAK,cAAc,KAAK,MAAO,eAAgB,EAAK,YAAY,KAAM,GAC1F,KAAK,SAAS,EAAI,IAClB,KAAK,IAAI,KAAK,WAElB,EAAmB,UAAU,SAAW,WACpC,MAAc,KAAK,MAAM,MAAM,gBACnB,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,MAAQ,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAChD,KAAK,MAAM,UAAU,GAAK,GAC1B,KAAK,MAAM,iBAAiB,EAAK,OAAO,kBAAoB,KAC5D,KAAK,MAAM,EAAI,KAAK,SAAS,EAAI,IACjC,KAAK,IAAI,KAAK,QAElB,EAAmB,UAAU,cAAgB,WACzC,KAAK,WAAa,KAAK,MAAM,IAAI,OAAO,eAAgB,wBAAyB,MACjF,KAAK,WAAW,IAAM,KAAK,SAAS,EAAI,IACxC,KAAK,WAAW,iBAAmB,IAEvC,EAAmB,UAAU,eAAiB,WAC1C,KAAK,YAAc,KAAK,MAAM,IAAI,OAAO,eAAgB,6BAA8B,OAE3F,EAAmB,UAAU,OAAS,WAClC,KAAK,WAAW,cAAiB,GAAK,OAAO,YAAc,GAAK,KAAK,MACrE,KAAK,oBAET,EAAmB,UAAU,iBAAmB,WAC5C,MAAa,GACb,KAAK,YAAY,EAAI,EAAK,OAAO,kBAAoB,EAAI,EACzD,KAAK,YAAY,EAAI,CAAC,KAAK,WAAW,cAAgB,EAAI,GAE9D,EAAmB,UAAU,WAAa,cACtC,KAAK,SAAS,WAAW,EAAa,GACtC,KAAK,eAAiB,GAE1B,EAAmB,UAAU,KAAO,WAChC,KAAK,MAAQ,EACb,KAAK,WAAW,MAAQ,EACxB,KAAK,SAAS,WAAW,GACzB,KAAK,eAET,EAAmB,UAAU,YAAc,WACvC,MAAY,CAAC,KAAK,MAAO,KAAK,SAAU,KAAK,WAAY,KAAK,aAC9D,EAAM,QAAQ,YACV,EAAK,MAAQ,EACb,EAAK,MAAQ,KAEjB,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,EACT,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,EAAa,OACrD,MAAO,CAAE,MAAO,EAAG,SAAU,IAAK,KAAM,EAAa,QACtD,GAAG,OAAO,OAAO,OAAO,kBAAmB,KAAK,eAAgB,OAEvE,EAAmB,UAAU,eAAiB,WAC1C,KAAK,qBAET,EAAmB,UAAU,kBAAoB,WAC7C,KAAK,uBAAyB,KAAK,MAAM,KAAK,SAAS,CACnD,OAAQ,GACR,QAAS,KACT,MAAO,IACP,SAAU,KAAK,gBACf,cAAe,QAGvB,EAAmB,UAAU,gBAAkB,WAC3C,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KAAK,WACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,KAAK,MAC9B,OAAQ,IACR,OAAQ,IACR,OAAQ,EACR,KAAM,MAGd,EAAmB,UAAU,KAAO,WAChC,MAAY,KACZ,KAAK,KAAK,EAAwB,WAAY,MAC9C,AAAI,KAAK,wBACL,MAAK,uBAAuB,SAC5B,KAAK,uBAAyB,MAElC,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,OAAO,OAChC,MAAO,EACP,WAAY,WACR,EAAM,SAAS,YACf,EAAM,MAAM,KAAK,OAAO,aACxB,EAAM,KAAK,EAAwB,cAAe,GAClD,EAAM,WAIX,GACT,OAAO,YAAY,QACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KAmBnB,SACA,AAAC,aACG,MAAkB,OAAO,YAAY,cAErC,AAAC,aACG,EAAiB,MAAW,YAC5B,EAAiB,OAAY,aAC7B,EAAiB,WAAgB,aACjC,EAAiB,gBAAqB,oBACvC,EAAmB,EAAK,kBAAqB,GAAK,iBAAmB,KACxE,MAAiC,YAC7B,UAAU,EAAa,GACvB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,cAAO,eAAe,EAAY,UAAW,gBAAiB,CAC1D,IAAK,WACD,MAAO,MAAK,YAAY,eAE5B,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,cAAe,CACxD,IAAK,WACD,MAAO,MAAK,YAAY,aAE5B,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,oBAAqB,CAC9D,IAAK,WACD,MAAO,MAAK,YAAY,mBAE5B,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,kBAAmB,CAC5D,IAAK,WACD,MAAO,MAAK,YAAY,iBAE5B,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,cAAe,CACxD,IAAK,WACD,MAAO,MAAK,SAAS,UAAU,aAEnC,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,cAAe,CACxD,IAAK,WACD,MAAO,MAAK,SAAS,aAEzB,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAY,UAAW,aAAc,CACvD,IAAK,WACD,MAAO,MAAK,SAAS,UAAU,YAEnC,WAAY,GACZ,aAAc,KAElB,EAAY,UAAU,KAAO,YACzB,EAAO,UAAU,KAAK,KAAK,MAC3B,KAAK,YAAc,EAAK,YACxB,KAAK,UAAY,EAAK,SACtB,KAAK,SAAW,KAChB,KAAK,WAAa,MAEtB,EAAY,UAAU,OAAS,WAC3B,KAAK,WACL,KAAK,cACL,KAAK,iBACL,KAAK,wBACL,KAAK,qBACL,KAAK,iBACL,KAAK,gBACL,KAAK,cACL,KAAK,uBACL,KAAK,wBACL,KAAK,wBACL,KAAK,iBACL,KAAK,oBACL,KAAK,kBACL,KAAK,uBACL,KAAK,QAAQ,KAAK,QAAU,CAAC,MAAM,QAAQ,aAAa,YAE5D,EAAY,UAAU,SAAW,WAC7B,KAAK,MAAQ,GAAI,GAAK,MAAM,KAAM,eAAgB,cAClD,KAAK,MAAM,OACX,KAAK,IAAI,SAAS,KAAK,QAE3B,EAAY,UAAU,YAAc,WAChC,KAAK,SAAW,GAAI,GAAK,SAAS,KAAM,KAAK,cAEjD,EAAY,UAAU,eAAiB,WACnC,KAAK,YAAc,GAAI,GAAK,YAAY,MACxC,KAAK,YAAY,SAAS,EAAK,iBAAiB,cAChD,KAAK,YAAY,YAAY,GAAG,EAAY,MAAO,KAAK,mBAAoB,OAEhF,EAAY,UAAU,mBAAqB,WACvC,KAAK,OAAO,KAAK,EAAiB,MAAO,OAE7C,EAAY,UAAU,sBAAwB,WAC1C,MAAyB,KAAK,KAAK,MAAM,WAAW,EAAK,aAAa,uBACtE,GAAI,EACA,OAEJ,KAAK,mBAAqB,GAAI,GAAK,mBAAmB,KAAM,KAAK,WACjE,KAAK,mBAAmB,GAAG,EAAK,wBAAwB,KAAM,KAAK,wBAAyB,MAC5F,KAAK,mBAAmB,OACxB,KAAK,IAAI,SAAS,KAAK,qBAE3B,EAAY,UAAU,mBAAqB,WACvC,MAAY,KACZ,KAAK,gBAAkB,KAAK,IAAI,MAAM,CAClC,UAAW,EAAK,eAChB,eAAgB,YACZ,EAAM,OACN,EAAM,SAAS,EAAK,iBAAiB,qBAG7C,MAAuB,EACvB,EAAE,MAAM,EAAkB,WACtB,EAAM,gBAAgB,YAG9B,EAAY,UAAU,eAAiB,WACnC,KAAK,YAAc,GAAI,GAAK,cAAc,MAC1C,KAAK,YAAY,OACjB,KAAK,IAAI,SAAS,KAAK,cAE3B,EAAY,UAAU,kBAAoB,WACtC,KAAK,eAAiB,GAAI,GAAK,oBAAoB,MACnD,KAAK,eAAe,QAAQ,cAAc,KAAK,EAAY,MAAO,KAAK,qBAAsB,MAC7F,KAAK,eAAe,QAAQ,gBAAgB,KAAK,EAAY,MAAO,KAAK,uBAAwB,MACjG,KAAK,eAAe,QAAQ,WAAW,KAAK,EAAY,MAAO,KAAK,kBAAmB,MACvF,KAAK,eAAe,OACpB,KAAK,eAAe,SAAS,EAAK,iBAAiB,iBACnD,KAAK,IAAI,SAAS,KAAK,iBAE3B,EAAY,UAAU,gBAAkB,WACpC,KAAK,aAAe,GAAI,GAAK,kBAAkB,MAC/C,KAAK,aAAa,cAAc,KAAK,OAAO,YAAY,YAAY,MAAO,KAAK,qBAAsB,MACtG,KAAK,aAAa,WAAW,KAAK,OAAO,YAAY,YAAY,MAAO,KAAK,kBAAmB,MAChG,KAAK,aAAa,SAAS,EAAK,iBAAiB,eACjD,KAAK,aAAa,OAClB,KAAK,IAAI,SAAS,KAAK,eAE3B,EAAY,UAAU,qBAAuB,WACzC,MAAY,KACZ,KAAK,KAAK,gBAAgB,WACrB,MAAM,cAEN,QAAQ,WACT,EAAM,UAAU,EAAM,YAAY,gBAG1C,EAAY,UAAU,uBAAyB,WAC3C,MAAY,KACZ,KAAK,KAAK,gBAAgB,mBACrB,MAAM,cAEN,QAAQ,WACT,MAAgB,EAAM,YAAY,YAAc,IAC3B,EAAM,KAAK,aAAa,MAAM,GACnD,AAAI,IAAmB,IACnB,EAAM,gBAEV,EAAM,UAAU,MAGxB,EAAY,UAAU,kBAAoB,WACtC,KAAK,iBAET,EAAY,UAAU,cAAgB,WAClC,KAAK,OAAO,KAAK,EAAiB,kBAEtC,EAAY,UAAU,UAAY,YAC9B,KAAK,OAAO,KAAK,EAAiB,WAAY,IAElD,EAAY,UAAU,cAAgB,WAClC,GAAI,CAAC,KAAK,YAAY,KAClB,OAEJ,MAAe,OAAO,OAAO,KAAK,YAAY,MAAM,KAAK,YAAmB,MAAO,GAAQ,IAC3F,GAAI,IAAa,GACb,OAEJ,MAAoB,KAAK,KAAK,MAAM,SAAS,EAAK,aAAa,eAC3C,EAAc,KAAK,YAAY,eAAiB,GACpE,GAAI,EACA,OAEJ,MAAgB,MAAM,QAAQ,aAAa,aAC3C,GAAI,EACA,OAEJ,KAAK,WAAa,GAAI,GAAK,WAAW,KAAM,eAAgB,KAAK,YAAY,KAAM,KAAK,YAAY,eACpG,KAAK,WAAW,GAAG,EAAK,gBAAgB,uBAAwB,KAAK,2BAA4B,MACjG,KAAK,WAAW,GAAG,EAAK,gBAAgB,cAAe,KAAK,yBAA0B,MACtF,KAAK,WAAW,SAAS,EAAK,iBAAiB,aAC/C,KAAK,IAAI,SAAS,KAAK,YACvB,KAAK,WAAW,SAAW,MAAM,QAAQ,aAAa,gBACtD,KAAK,WAAW,OAChB,KAAK,oBAET,EAAY,UAAU,iBAAmB,WACrC,MAAY,KACZ,KAAK,KAAK,YAAY,IAAK,WACvB,EAAM,UAAU,MAAM,QACtB,EAAM,UAAU,2BAEpB,KAAK,YAAY,eACjB,KAAK,YAAY,QAErB,EAAY,UAAU,2BAA6B,WAC/C,KAAK,YAAY,SACjB,KAAK,YAAY,YAAY,QAAU,GACvC,KAAK,cAAc,MAAQ,EAC3B,KAAK,OAAO,IAAI,CACZ,QAAS,KAAK,cACd,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,KAGf,EAAY,UAAU,yBAA2B,YAC7C,KAAK,UAAU,EAAO,SACtB,KAAK,UAAU,MAAM,SACrB,KAAK,UAAU,sBACf,KAAK,YAAY,cACjB,KAAK,YAAY,YAAY,QAAU,IAE3C,EAAY,UAAU,UAAY,YAC9B,MACA,KAAK,KAAK,SAAS,eAAe,GAClC,MAAoB,KAAK,KAAK,MAAM,SAAS,EAAK,aAAa,eAC7C,SAAS,SAAS,GAAI,GAAiB,GAAK,GAAI,EAAG,KAAK,YAAY,aAAe,GAAM,IAC3G,KAAK,KAAK,MAAM,UAAU,EAAK,aAAa,YAAa,IAE7D,EAAY,UAAU,YAAc,WAChC,GAAI,CAAC,KAAK,YAAY,SAClB,OAEJ,MAAmB,MAAM,QAAQ,aAAa,gBAC9C,GAAI,EACA,OAEJ,KAAK,SAAW,GAAI,GAAK,eAAe,KAAM,KAAK,YAAY,UAC/D,KAAK,SAAS,SAAS,EAAK,iBAAiB,iBAC7C,KAAK,IAAI,SAAS,KAAK,WAE3B,EAAY,UAAU,aAAe,WACjC,KAAK,kBACL,KAAK,SAAS,KAAK,EAAK,cAAc,SAAU,KAAK,mBAAoB,MACzE,KAAK,SAAS,KAAK,MAEvB,EAAY,UAAU,gBAAkB,WACpC,KAAK,UAAU,yBACf,KAAK,YAAY,QAErB,EAAY,UAAU,mBAAqB,WACvC,KAAK,UAAU,sBACf,KAAK,YAAY,UAErB,EAAY,UAAU,qBAAuB,WACzC,KAAK,kBAAoB,GAAI,GAAK,kBAAkB,KAAM,KAAK,aAC/D,KAAK,kBAAkB,OACvB,KAAK,IAAI,SAAS,KAAK,oBAE3B,EAAY,UAAU,sBAAwB,WAC1C,GAAI,EAAK,KAAK,sBAAwB,GAClC,OAEJ,KAAK,mBAAqB,GAAI,GAAK,mBAAmB,MACtD,KAAK,mBAAmB,OACxB,KAAK,mBAAmB,SAAS,EAAK,iBAAiB,sBACvD,KAAK,IAAI,SAAS,KAAK,qBAE3B,EAAY,UAAU,sBAAwB,WAC1C,GAAI,EAAK,KAAK,sBAAwB,GAClC,OAEJ,KAAK,mBAAqB,GAAI,GAAK,mBAAmB,KAAM,gBAC5D,KAAK,mBAAmB,OACxB,KAAK,mBAAmB,SAAS,EAAK,iBAAiB,sBACvD,KAAK,IAAI,SAAS,KAAK,qBAE3B,EAAY,UAAU,eAAiB,WACnC,KAAK,YAAc,GAAI,GAAK,YAAY,MACxC,KAAK,YAAY,OACjB,KAAK,YAAY,SAAS,EAAK,iBAAiB,cAChD,KAAK,YAAY,aAAa,GAAG,EAAY,MAAO,KAAK,oBAAqB,MAC9E,KAAK,YAAY,cAAc,KAAK,EAAY,MAAO,KAAK,qBAAsB,MAClF,KAAK,YAAY,WAAW,KAAK,EAAY,MAAO,KAAK,cAAe,MACxE,KAAK,IAAI,SAAS,KAAK,cAE3B,EAAY,UAAU,oBAAsB,WACxC,KAAK,OAAO,KAAK,EAAiB,OAAQ,OAE9C,EAAY,UAAU,qBAAuB,aAE7C,EAAY,UAAU,eAAiB,YACnC,AAAI,KAAK,UACL,KAAK,SAAS,OAAO,IAG7B,EAAY,UAAU,SAAW,WAC7B,KAAK,MAAM,SACX,KAAK,gBACL,KAAK,mBACL,KAAK,0BACL,KAAK,mBACL,KAAK,2BACL,KAAK,2BACL,KAAK,YAAY,SACjB,KAAK,eAAe,SACpB,KAAK,aAAa,SAClB,KAAK,qBAET,EAAY,UAAU,kBAAoB,WACtC,KAAK,YAAY,MAAS,GAAK,OAAO,WAAa,GAAK,EAAK,OAAO,kBACpE,KAAK,YAAY,EAAI,EAAK,OAAO,gBACjC,KAAK,YAAY,EAAI,EAAK,OAAO,iBACjC,KAAK,YAAY,UAErB,EAAY,UAAU,cAAgB,WAClC,MAAe,EAAK,OAAO,WAAa,KACzB,EAAK,OAAO,WAAa,KACnB,KACA,IACT,OAAO,KAAK,UAAU,EAAK,OAAO,aAAc,EAAgB,EAAgB,EAAU,GACtG,EAAQ,OAAO,KAAK,MAAM,EAAO,EAAU,GAC3C,KAAK,SAAS,MAAQ,EAAQ,KAAK,SAAS,WAC5C,KAAK,SAAS,EAAI,EAAK,OAAO,gBAC9B,KAAK,SAAS,EAAI,EAClB,KAAK,SAAS,UAAY,KAAK,SAAS,GAE5C,EAAY,UAAU,iBAAmB,WACrC,KAAK,YAAY,MAAQ,KAAK,SAAS,MACvC,KAAK,YAAY,EAAI,EAAK,OAAO,gBACjC,KAAK,YAAY,EAAI,EAAK,OAAO,YAAc,KAAK,YAAY,mBAAqB,KAAK,YAAY,OAE1G,EAAY,UAAU,wBAA0B,WAC5C,GAAI,CAAC,KAAK,mBACN,OAEJ,MAAY,KAAK,YAAY,QAChB,KAAK,YAAY,oBACf,EAAO,mBACtB,KAAK,mBAAmB,MAAQ,EAChC,KAAK,mBAAmB,EAAI,EAAS,EAAK,EAAO,OAAS,EAAK,EAC/D,KAAK,mBAAmB,UAAY,KAAK,mBAAmB,EAC5D,MAAY,EAAK,OAAO,WAAa,GAAK,IAC/B,EAAU,MAAK,mBAAmB,WAAa,IAAM,EAAS,EACzE,AAAI,EAAS,EAAI,EACb,MAAK,mBAAmB,EAAI,EAC5B,KAAK,mBAAmB,UAAU,EAAO,EAAS,IAGlD,MAAK,mBAAmB,EAAI,EAAS,EACrC,KAAK,mBAAmB,UAAU,KAG1C,EAAY,UAAU,iBAAmB,WACrC,GAAI,CAAC,KAAK,WACN,OAEJ,KAAK,WAAW,MAAS,GAAK,OAAO,WAAa,GAAK,EAAK,OAAO,kBACnE,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,iBAChC,KAAK,WAAW,UAEpB,EAAY,UAAU,yBAA2B,WAC7C,GAAI,CAAC,KAAK,mBACN,OAEJ,KAAK,mBAAmB,MAAS,GAAK,OAAO,WAAa,GAAK,EAAK,OAAO,kBAC3E,KAAK,mBAAmB,EAAI,EAAK,OAAO,gBACxC,KAAK,mBAAmB,EAAI,EAAK,OAAO,iBACxC,KAAK,mBAAmB,UAE5B,EAAY,UAAU,yBAA2B,WAC7C,GAAI,CAAC,KAAK,mBACN,OAEJ,KAAK,mBAAmB,MAAS,GAAK,OAAO,WAAa,GAAK,EAAK,OAAO,kBAC3E,KAAK,mBAAmB,EAAI,EAAK,OAAO,gBACxC,KAAK,mBAAmB,EAAI,EAAK,OAAO,iBACxC,KAAK,mBAAmB,UAE5B,EAAY,UAAU,wBAA0B,YAC5C,KAAK,kBAAkB,OAAO,IAElC,EAAY,UAAU,YAAc,WAChC,KAAK,oBACL,KAAK,YAAY,mBAErB,EAAY,UAAU,kBAAoB,WACtC,KAAK,YAAY,cAAc,cAC/B,KAAK,YAAY,cAAc,QAEnC,EAAY,UAAU,kBAAoB,WACtC,KAAK,YAAY,cAAc,eAC/B,KAAK,YAAY,cAAc,QAEnC,EAAY,UAAU,gBAAkB,YACpC,KAAK,MAAM,SAAS,KAAK,gBAAiB,KAAK,uBAAwB,MACvE,KAAK,YAAY,eACjB,KAAK,eAAe,WAAW,GAC/B,KAAK,eAAe,QAExB,EAAY,UAAU,cAAgB,YAClC,KAAK,MAAM,SAAS,KAAK,gBAAiB,KAAK,qBAAsB,MACrE,KAAK,YAAY,eACjB,KAAK,aAAa,WAAW,GAC7B,KAAK,aAAa,QAEtB,EAAY,UAAU,QAAU,WAC5B,KAAK,YAAY,eACjB,KAAK,YAAY,QAErB,EAAY,UAAU,SAAW,WAC7B,KAAK,YAAY,cACjB,KAAK,YAAY,QAErB,EAAY,UAAU,oBAAsB,YACxC,MAAoB,KAAK,uBAAuB,KAC3B,KAAK,YAAY,qBAC1B,KAAK,gBAAgB,aAAa,IAC9C,EAAM,EAAI,EAAc,EACxB,EAAM,EAAI,EAAc,EACxB,EAAM,MAAQ,KAAK,UAAU,OAAO,KACpC,EAAM,YAAY,GAClB,EAAM,SACN,EAAM,KAAK,EAAK,oBAAoB,eAAgB,KAAK,8BAA+B,MACxF,EAAM,KAAK,EAAK,oBAAoB,cAAe,KAAK,gCAAiC,MACzF,EAAM,KAAK,EAAK,oBAAoB,cAAe,KAAK,0BAA2B,MACnF,EAAM,OAAO,EAAgB,KAAK,YAAY,qBAElD,EAAY,UAAU,uBAAyB,YAC3C,MAAa,KAAK,UAAU,SACd,EAAO,eACV,EAAO,OACV,EAAO,EAAI,EAAQ,EAAI,EAAM,EAAI,IACjC,EAAO,EAAI,EAAQ,EAAI,EAAM,EAAI,EACzC,MAAO,CAAE,EAAG,EAAG,EAAG,IAEtB,EAAY,UAAU,8BAAgC,WAClD,KAAK,UAAU,MAAM,sBAEzB,EAAY,UAAU,gCAAkC,WACpD,KAAK,UAAU,MAAM,wBAEzB,EAAY,UAAU,0BAA4B,WAC9C,KAAK,YAAY,mBACjB,KAAK,YAAY,gBACjB,KAAK,YAAY,kBAErB,EAAY,UAAU,uBAAyB,cAC3C,AAAI,KAAK,YAAY,cAAgB,EACjC,KAAK,mBAAmB,WAAW,GAAG,EAAY,MAAO,KAAK,sBAAuB,MAGrF,KAAK,mBAAmB,WAAW,GAAG,EAAY,MAAO,KAAK,wBAAyB,MAE3F,KAAK,mBAAmB,YAAY,KAAK,EAAY,MAAO,KAAK,0BAA2B,MAC5F,KAAK,mBAAmB,WAAW,KAAK,YAAY,YAAa,KAAK,YAAY,UAAU,eAAgB,EAAc,GAC1H,KAAK,mBAAmB,SACxB,KAAK,mBAAmB,QAE5B,EAAY,UAAU,0BAA4B,WAC9C,KAAK,mBAAmB,WAAW,IAAI,EAAY,MAAO,KAAK,wBAAyB,MACxF,KAAK,mBAAmB,QAE5B,EAAY,UAAU,wBAA0B,WAC5C,MAAY,KACZ,KAAK,UAAU,eAAe,gBAAiB,SAAU,WACzD,KAAK,KAAK,cAAc,eAAgB,CACpC,UAAW,WACP,EAAM,wBACN,EAAM,UAAU,eAAe,gBAAiB,SAAU,YAE9D,OAAQ,WACJ,EAAM,UAAU,eAAe,gBAAiB,SAAU,WAE/D,MAAM,YACL,AAAI,IAAU,WACV,EAAM,mBAAmB,sBAIrC,EAAY,UAAU,sBAAwB,WAC1C,KAAK,UAAU,oBACf,KAAK,UAAU,MAAM,SACrB,KAAK,mBAAmB,YAAY,IAAI,EAAY,MAAO,KAAK,0BAA2B,MAC3F,KAAK,mBAAmB,WAAW,IAAI,EAAY,MAAO,KAAK,wBAAyB,MACxF,KAAK,mBAAmB,QAE5B,EAAY,UAAU,OAAS,cAC3B,EAAO,UAAU,OAAO,KAAK,KAAM,EAAM,GACzC,AAAI,KAAK,oBACL,KAAK,mBAAmB,UAAU,EAAM,IAGhD,EAAY,UAAU,SAAW,aAEjC,EAAY,eAAiB,UAC7B,EAAY,WAAa,SAClB,GACT,EAAK,WACP,EAAK,YAAc,IACpB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAA4C,WACxC,gBACI,KAAK,MAAQ,EACb,KAAK,WAAa,EAClB,KAAK,SACL,KAAK,YACL,KAAK,iBAET,SAAuB,UAAU,OAAS,WACtC,KAAK,IAAM,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,cAAe,OAAS,KAAK,YACnE,KAAK,IAAI,UAAU,GAAK,IAE5B,EAAuB,UAAU,UAAY,WACzC,KAAK,OAAS,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,cAAe,UAAY,KAAK,aAE7E,EAAuB,UAAU,eAAiB,WAC9C,KAAK,YAAc,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,cAAe,gBAAkB,KAAK,YACpF,KAAK,YAAY,UAAU,GAAK,IAEpC,EAAuB,UAAU,OAAS,YACtC,GAAI,CAAC,GAAS,CAAC,EAAM,OACjB,OAEJ,KAAK,aAAa,GAClB,KAAK,YACL,KAAK,qBAET,EAAuB,UAAU,aAAe,YAC5C,KAAK,OAAO,MAAQ,EAAK,OAAO,WAAa,KAAK,OAAO,MACzD,KAAK,OAAO,EAAI,EAAK,OAAO,gBAC5B,KAAK,OAAO,EAAI,KAAK,eAAe,EAAM,SAE9C,EAAuB,UAAU,eAAiB,YAC9C,MAAO,GAAe,OAAS,EAAe,aAAa,GAE/D,EAAuB,UAAU,UAAY,WACzC,MAAU,IACG,KAAK,OAAO,IACZ,EAAS,EACtB,KAAK,IAAI,aAAe,EAAK,OAAO,WACpC,KAAK,IAAI,cAAgB,EACzB,KAAK,IAAI,EAAI,EAAK,OAAO,gBACzB,KAAK,IAAI,EAAI,GAEjB,EAAuB,UAAU,kBAAoB,WACjD,KAAK,YAAY,MAAQ,EAAK,OAAO,WAAa,KAAK,YAAY,MACnE,KAAK,YAAY,EAAI,EAAK,OAAO,gBACjC,KAAK,YAAY,EAAI,KAAK,IAAI,EAAK,OAAO,YAAa,KAAK,OAAO,EAAI,KAAK,YAAY,cAAgB,KAErG,KAEX,EAAK,uBAAyB,IAC/B,MAAS,MAAO,KAInB,SACA,AAAC,aACG,MAAkC,YAC9B,UAAU,EAAc,GACxB,aACI,MAAO,KAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAE/D,SAAa,iBAAmB,WAC5B,MAAO,CACH,OAAQ,CACJ,MAAO,EAAK,KAAK,YACjB,eAAgB,GAChB,OAAQ,CAAE,QAAS,IACnB,QAAS,CAAE,EAAG,EAAG,EAAG,GACpB,mBAAoB,EACpB,mBAAoB,EACpB,qBAAsB,EACtB,WAAY,CACR,YAAa,EAAK,SAAS,UAC3B,aAAc,EAAK,SAAS,cAK5C,EAAa,UAAU,KAAO,YAC1B,KAAK,SAAW,GAAQ,KAAK,qBAC7B,KAAK,YAAc,KAAK,SAAS,YACjC,KAAK,YAAc,KAAK,KAAK,aAAa,IAAI,KAAK,aACnD,KAAK,SAAW,KAChB,KAAK,IAAM,KACX,KAAK,WAAa,KAClB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAC9B,GAAW,EAAK,aAElC,EAAa,UAAU,mBAAqB,WACxC,MAAO,CACH,YAAa,EACb,WAAY,KAGpB,EAAa,UAAU,QAAU,WAC7B,MAAa,KAAK,KAAK,YAAY,gBACd,EAAO,wBAC5B,GAAI,EACA,OAEJ,KAAK,UAAU,iBAAiB,WAAY,SAC5C,KAAK,sBAAsB,IAE/B,EAAa,UAAU,sBAAwB,YAC3C,MAAY,KACZ,KAAK,KAAK,eAAe,SACzB,KAAK,KAAK,SAAS,OAAO,KAAK,IAAI,OAAQ,CACvC,SAAU,YACN,EAAO,KAAK,EAAK,mBAAmB,sBAAuB,WACvD,EAAM,UAAU,iBAAiB,WAAY,YAC7C,UAKhB,EAAa,UAAU,OAAS,WAC5B,GAAI,CAAC,KAAK,aACN,AAAa,GAAsB,KAAK,YACxC,KAAK,gBACL,OAEJ,AAAsB,EAAE,KAAK,KAAK,YAAa,QAAS,aACxD,KAAK,sBACL,KAAK,gBACL,KAAK,wBAET,EAAa,UAAU,oBAAsB,WACzC,KAAK,SAAW,KAAK,YAAY,EAAK,SAAS,SAAU,KAAK,aAC9D,KAAK,SAAS,OAAO,KAAK,OAAO,OAAO,OAAO,OAAQ,KAAK,uBAAwB,MACpF,KAAK,KAAK,MAAM,gBAAgB,KAAK,SAAS,MAAM,MAExD,EAAa,UAAU,uBAAyB,WAC5C,KAAK,IAAM,KAAK,YAAY,EAAK,SAAS,aAAc,CACpD,YAAa,KAAK,YAClB,SAAU,KAAK,WAEnB,KAAK,IAAI,OAAO,KAAK,OAAO,OAAO,OAAO,OAAQ,KAAK,aAAc,MACrE,KAAK,IAAI,OAAO,KAAK,EAAK,iBAAiB,gBAAiB,KAAK,cAAe,MAChF,KAAK,IAAI,OAAO,KAAK,EAAK,iBAAiB,WAAY,KAAK,UAAW,MACvE,KAAK,IAAI,OAAO,GAAG,EAAK,iBAAiB,MAAO,KAAK,MAAO,MAC5D,KAAK,IAAI,OAAO,GAAG,EAAK,iBAAiB,OAAQ,KAAK,OAAQ,MAC9D,KAAK,KAAK,MAAM,gBAAgB,KAAK,IAAI,MAAM,MAEnD,EAAa,UAAU,aAAe,WAClC,KAAK,SAAS,IAAM,KAAK,IACzB,KAAK,SAAS,eACd,KAAK,SACL,AAAI,KAAK,IAAI,UACT,KAAK,IAAI,eAEb,KAAK,KAAK,eAAe,WAE7B,EAAa,UAAU,YAAc,cACjC,MAAO,MAAK,MAAM,OAAO,EAAK,GAAM,IAAI,IAE5C,EAAa,UAAU,cAAgB,WACnC,MAAoB,KAAK,YAAY,WAAW,MAAM,KAAK,QAC1C,SAAS,IAAkB,EAC5C,KAAK,WAAa,GAAI,GAAK,uBAAuB,KAAM,IAE5D,EAAa,UAAU,qBAAuB,WAC1C,AAAI,EAAK,KAAK,aACV,MAAK,MAAM,SAAS,GAAG,YAAa,KAAK,YAAa,MACtD,KAAK,MAAM,SAAS,KAAK,YAAa,KAAK,QAAS,MACpD,KAAK,MAAM,SAAS,KAAK,cAAe,KAAK,aAAc,MAC3D,KAAK,MAAM,SAAS,KAAK,gBAAiB,KAAK,cAAe,MAC9D,KAAK,MAAM,SAAS,KAAK,eAAgB,KAAK,cAAe,OAEjE,AAAI,EAAK,KAAK,eACV,KAAK,MAAM,SAAS,KAAK,YAAa,KAAK,WAAY,OAI/D,EAAa,UAAU,cAAgB,WACnC,MAAsB,KAAK,YAAc,IACpB,KAAK,KAAK,aAAa,MAAM,GAClD,GAAI,IAAmB,GACnB,OAEJ,KAAK,UAAU,IAEnB,EAAa,UAAU,cAAgB,WACnC,MAAsB,KAAK,YAAc,IACpB,KAAK,KAAK,aAAa,MAAM,GAClD,GAAI,IAAmB,GACnB,OAEJ,KAAK,UAAU,IAEnB,EAAa,UAAU,UAAY,YAC/B,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,cAAe,CAAE,YAAa,KAEtF,EAAa,UAAU,aAAe,WAClC,AAAI,KAAK,SAAS,WACd,KAAK,aAGL,KAAK,iBAGb,EAAa,UAAU,WAAa,WAChC,KAAK,MAAM,MAAM,EAAK,SAAS,kBAAmB,CAAE,YAAa,KAAK,eAE1E,EAAa,UAAU,mBAAqB,WACxC,KAAK,MAAM,MAAM,EAAK,SAAS,gBAAiB,CAAE,YAAa,KAAK,eAExE,EAAa,UAAU,cAAgB,WACnC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,aAExD,EAAa,UAAU,QAAU,WAC7B,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,cAAe,CAAE,YAAa,KAAK,eAE3F,EAAa,UAAU,YAAc,WACjC,MACA,AAAK,IAAK,KAAK,YAAc,MAAQ,IAAO,OAAS,OAAS,EAAG,MAAM,YACnE,KAAK,SAGL,KAAK,SAGb,EAAa,UAAU,OAAS,WAC5B,cACA,AAAC,GAAK,KAAK,OAAS,MAAQ,IAAO,QAAkB,EAAG,WACvD,GAAK,KAAK,YAAc,MAAQ,IAAO,QAAkB,EAAG,WAC5D,GAAK,KAAK,cAAgB,MAAQ,IAAO,QAAkB,EAAG,OAAO,KAAK,UAC1E,GAAK,KAAK,OAAS,MAAQ,IAAO,QAAkB,EAAG,eAAe,KAAK,UAC3E,GAAK,KAAK,OAAS,MAAQ,IAAO,QAAkB,EAAG,wBAAwB,KAAK,WAEzF,EAAa,UAAU,MAAQ,WAC3B,KAAK,SAAS,UACd,KAAK,IAAI,WAEb,EAAa,UAAU,OAAS,WAC5B,KAAK,SAAS,WACd,KAAK,IAAI,YAEb,EAAa,UAAU,SAAW,WAC9B,KAAK,mBAGT,EAAa,UAAU,gBAAkB,WACrC,KAAK,iBAAiB,QAAQ,YAC1B,AAAI,GACA,EAAW,MAAM,SAGzB,AAAI,KAAK,UACL,KAAK,SAAS,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,uBAAwB,MAEvF,AAAI,KAAK,KACL,MAAK,IAAI,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,aAAc,MACpE,KAAK,IAAI,OAAO,IAAI,EAAK,iBAAiB,gBAAiB,KAAK,cAAe,MAC/E,KAAK,IAAI,OAAO,IAAI,EAAK,iBAAiB,WAAY,KAAK,UAAW,MACtE,KAAK,IAAI,OAAO,IAAI,EAAK,iBAAiB,MAAO,KAAK,MAAO,MAC7D,KAAK,IAAI,OAAO,IAAI,EAAK,iBAAiB,OAAQ,KAAK,OAAQ,QAGvE,EAAa,UAAU,eAAiB,WACpC,MAAO,CAAC,KAAK,SAAU,KAAK,MAEzB,GACT,OAAO,OACT,EAAK,aAAe,IACrB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAwC,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,KAAO,gBACb,EAAM,gBACN,EAAM,UACC,EAEX,SAAmB,UAAU,cAAgB,WACzC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,SAAU,QACvD,KAAK,IAAI,KAAK,aAElB,EAAmB,UAAU,QAAU,WACnC,MAAc,aACF,CACR,WAAY,EAAK,SAAS,OAC1B,UAAW,EAAK,WAAW,KAC3B,SAAU,OACV,MAAO,UACP,MAAO,UAEX,KAAK,KAAO,KAAK,MAAM,IAAI,KAAK,EAAG,EAAG,EAAS,GAC/C,KAAK,KAAK,iBAAiB,KAAK,WAAW,MAAQ,IACnD,KAAK,KAAK,UAAU,GAAK,IAEzB,KAAK,IAAI,KAAK,OAElB,EAAmB,UAAU,WAAa,YACtC,KAAK,KAAK,QAAQ,GAClB,MAAgB,KAAK,WAAW,OAAS,GACzC,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAY,KAAK,KAAK,SAExD,EAAmB,UAAU,SAAW,WACpC,MAAO,MAAK,WAAW,OAE3B,EAAmB,UAAU,UAAY,WACrC,MAAO,MAAK,WAAW,QAE3B,EAAmB,UAAU,iBAAmB,WAC5C,MAAO,MAAK,YAAc,KAAK,QAE5B,GACT,OAAO,YAAY,WACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAgB,OAAO,KAAK,YACY,YACpC,UAAU,EAAoB,GAC9B,cACI,MAAY,EAAO,KAAK,KAAM,EAAO,CACjC,EAAG,EACH,EAAG,EACH,UAAW,CAAE,MAAO,EAAG,MAAO,IAC9B,UAAW,CAAE,MAAO,MAClB,KACN,SAAM,MAAQ,EACd,EAAM,OAAS,EACf,EAAM,eAAe,EAAM,aAAc,EAAU,UACnD,EAAM,QAAQ,EAAmB,cAAe,EAAmB,gBACnE,EAAM,MAAM,OAAS,UACd,EAEX,SAAmB,UAAU,WAAa,WACtC,MAAO,IAAI,GAAU,CAAC,KAAK,MAAQ,EAAG,CAAC,KAAK,OAAS,EAAG,KAAK,MAAO,KAAK,SAE7E,EAAmB,UAAU,WAAa,cACtC,KAAK,QAAQ,KAAK,MAAQ,EAAY,KAAK,OAAS,IAExD,EAAmB,UAAU,QAAU,cACnC,KAAK,MAAQ,KAAK,IAAI,EAAmB,cAAe,GACxD,KAAK,OAAS,KAAK,IAAI,EAAmB,eAAgB,GAC1D,KAAK,QACL,KAAK,gBAAgB,CAAC,EAAQ,EAAG,CAAC,EAAS,EAAG,EAAO,GACrD,KAAK,MAAM,QAAU,KAAK,cAE9B,EAAmB,UAAU,QAAU,YACnC,EAAO,UAAU,QAAQ,KAAK,KAAM,IAExC,EAAmB,cAAgB,EAAK,SAAS,UAAY,IAC7D,EAAmB,eAAiB,EAAK,SAAS,UAAY,IACvD,GACT,OAAO,YAAY,UACrB,EAAK,mBAAqB,IAC3B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAyB,YAAiB,gBAC3C,EAA2B,EAAK,0BAA6B,GAAK,yBAA2B,KAChG,MAAyC,YACrC,UAAU,EAAqB,GAC/B,kBACI,MAAY,EAAO,KAAK,KAAM,EAAO,SAAW,IAAgB,KAChE,SAAM,eAAiB,EACvB,EAAM,MAAM,SAAS,EAAM,eAAgB,QAAQ,GAAG,SAAU,EAAM,aAAa,KAAK,IACxF,EAAM,MAAM,SAAS,EAAM,eAAgB,WAC3C,EAAM,MAAM,eACZ,EAAM,MAAM,SAAS,EAAM,eAAgB,aAC3C,EAAM,MAAM,SAAS,EAAM,eAAgB,aAAc,CAAE,IAAK,EAAG,IAAK,IAAK,KAAM,MACnF,EAAM,MAAM,eACZ,EAAM,MAAM,SAAS,EAAM,eAAgB,YAC3C,EAAM,MAAM,eACZ,EAAM,aACC,EAEX,SAAoB,UAAU,aAAe,YACzC,KAAK,OAAO,KAAK,EAAyB,YAAa,IAE3D,EAAoB,UAAU,WAAa,WACvC,KAAK,aAAe,KAAK,MAAM,UAAU,CAAE,MAAO,WAClD,KAAK,aAAe,KAAK,MAAM,UAAU,CAAE,MAAO,WAClD,KAAK,WAAa,KAAK,MAAM,UAAU,CAAE,MAAO,SAChD,KAAK,WAAa,KAAK,MAAM,UAAU,CAAE,MAAO,UAE7C,GACT,EAAK,aACP,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KAInB,SACA,AAAC,aACG,MAAkB,OAAO,YAAY,cACD,YAChC,UAAU,EAAgB,GAC1B,aACI,MAAY,IAAW,MAAQ,EAAO,MAAM,KAAM,YAAc,KAChE,SAAM,oBAAsB,EACrB,EAEX,SAAe,UAAU,KAAO,YAC5B,KAAK,YAAc,EAAO,EAAK,YAAc,EAC7C,KAAK,YAAc,KAAK,KAAK,aAAa,IAAI,KAAK,aACnD,KAAK,eAAiB,EAAE,UAAU,KAAK,YAAY,WAAa,KAAK,2BACvD,GAA6B,KAAK,YACpC,KAAK,eACjB,KAAK,2BACL,KAAK,oBAAsB,EAC3B,KAAK,aAAe,KACpB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,OAEhD,EAAe,UAAU,yBAA2B,WAChD,MAAoB,CAChB,cAAe,GACf,UAAW,GACX,WAAY,KACZ,MAAO,EACP,OAAQ,EACR,EAAG,EACH,EAAG,EACH,SAAU,GACV,KAAM,GACN,QAAS,IAEb,MAAO,IAEX,EAAe,UAAU,QAAU,WAE/B,KAAK,KAAK,MAAM,WAAY,+BAAgC,iCAC5D,KAAK,KAAK,MAAM,eAAgB,mCAAoC,qCACpE,KAAK,KAAK,oBAAoB,EAAK,eAAe,kBAAmB,eAAgB,oBAAqB,8CAE9G,EAAe,UAAU,OAAS,WAC9B,KAAK,mBACL,KAAK,gBACL,KAAK,gBACL,KAAK,UACL,KAAK,gBACL,KAAK,iBACL,KAAK,uBACL,KAAK,sBACL,KAAK,UAET,EAAe,UAAU,iBAAmB,WACxC,MAAY,KACZ,KAAK,gBAAkB,SAAS,eAAe,iBAC/C,KAAK,gBAAgB,MAAM,WAAa,UACxC,KAAK,KAAK,YAAY,IAAK,WACvB,EAAM,gBAAgB,MAAM,WAAa,YAE7C,KAAK,MAAQ,GAAI,GAAK,oBAAoB,KAAM,KAAK,YAAY,YAAa,KAAK,gBACnF,KAAK,MAAM,OAAO,GAAG,EAAK,yBAAyB,YAAa,KAAK,qBAAsB,MAC3F,KAAK,MAAM,aAAa,GAAG,QAAS,KAAK,gBAAgB,KAAK,OAC9D,KAAK,MAAM,aAAa,GAAG,QAAS,KAAK,oBAAoB,KAAK,OAClE,KAAK,MAAM,WAAW,GAAG,QAAS,KAAK,kBAAkB,KAAK,OAC9D,KAAK,MAAM,WAAW,GAAG,QAAS,KAAK,kBAAkB,KAAK,QAElE,EAAe,UAAU,gBAAkB,WACvC,KAAK,MAAM,MAAM,EAAK,SAAS,kBAAmB,CAAE,YAAa,KAAK,eAE1E,EAAe,UAAU,qBAAuB,YAC5C,GAAI,CAAC,KAAK,aACN,OAEJ,KAAK,aAAa,WAAW,IAEjC,EAAe,UAAU,oBAAsB,WAC3C,MAAY,KACZ,GAAI,CAAC,KAAK,aAEN,OAEJ,MAAkB,OAAO,QAAQ,6BAA+B,KAAK,YAAY,YAAc,KAC/F,GAAI,CAAC,EACD,OAEJ,KAAK,aAAa,UAClB,KAAK,aAAe,KACpB,KAAK,aAAa,UAClB,KAAK,aAAe,KACpB,OAAO,OAAO,KAAK,eAAgB,KAAK,4BACxC,KAAK,MAAM,UACX,MAAO,MAAK,YAAY,SACxB,KAAK,MAAM,eACC,GAAiC,KAAK,YAAY,YAC9D,KAAK,KAAK,aAAa,cACvB,KAAK,KAAK,aAAa,eAClB,KAAK,cAGL,MAAM,eAGN,QAAQ,WACT,EAAM,MAAM,iBAGpB,EAAe,UAAU,kBAAoB,WACzC,GAAI,CAAC,KAAK,aAEN,OAEJ,OAAO,OAAO,KAAK,eAAgB,KAAK,wBACxC,KAAK,YAAY,SAAW,KAAK,eACjC,KAAK,KAAK,YAAY,KAAK,MAAM,IAAK,EAAK,SAAS,cAAe,CAAE,YAAa,KAAK,eAE3F,EAAe,UAAU,kBAAoB,WACzC,MAAY,KACZ,GAAI,CAAC,KAAK,aAEN,OAEJ,GAAI,CAAC,KAAK,eAAe,QAErB,OAEJ,OAAO,OAAO,KAAK,eAAgB,KAAK,wBACxC,KAAK,YAAY,SAAW,KAAK,eACjC,KAAK,MAAM,eACC,GAAkC,KAAK,YAAY,YAAqB,KAAK,eACzF,KAAK,KAAK,aACL,cACA,KAAK,cAGL,MAAM,eAGX,KAAK,KAAK,aACL,eACA,KAAK,cAGL,MAAM,eAGN,QAAQ,WACT,EAAM,MAAM,iBAGpB,EAAe,UAAU,qBAAuB,WAC5C,MAAO,UAAS,SAAS,GAAI,KAAK,gBAAiB,CAAE,EAAG,KAAK,aAAa,EAAG,EAAG,KAAK,aAAa,EAAG,MAAO,KAAK,aAAa,MAAO,OAAQ,KAAK,aAAa,OAAQ,cAAe,MAE1L,EAAe,UAAU,cAAgB,WACrC,KAAK,WAAa,KAAK,IAAI,MAAM,EAAG,EAAG,SAAU,KAAK,YAAY,YAClE,KAAK,WAAW,UAAU,GAAK,IAEnC,EAAe,UAAU,cAAgB,WACrC,KAAK,WAAa,GAAI,GAAK,iBAAiB,KAAM,KAAK,aACvD,KAAK,WAAW,gBAAgB,KAAK,EAAY,MAAO,KAAK,cAAe,MAC5E,KAAK,WAAW,gBAAgB,KAAK,EAAY,MAAO,KAAK,cAAe,MAC5E,KAAK,IAAI,SAAS,KAAK,aAE3B,EAAe,UAAU,cAAgB,WACrC,KAAK,UAAU,KAAK,YAAc,IAEtC,EAAe,UAAU,cAAgB,WACrC,KAAK,UAAU,KAAK,YAAc,IAEtC,EAAe,UAAU,UAAY,YACjC,MAAmB,KAAK,KAAK,aAAa,MAAM,GAChD,GAAI,IAAiB,IACjB,AAAa,GAAW,EACxB,OAEJ,KAAK,MAAM,MAAM,EAAK,SAAS,gBAAiB,CAAE,YAAa,KAEnE,EAAe,UAAU,QAAU,WAC/B,KAAK,KAAO,GAAI,GAAK,SAAS,KAAM,EAAK,SAAS,QAAS,EAAK,SAAS,MACzE,KAAK,IAAI,SAAS,KAAK,OAE3B,EAAe,UAAU,cAAgB,WACrC,KAAK,eAAiB,KAAK,IAAI,UAAU,EAAG,IAEhD,EAAe,UAAU,eAAiB,WACtC,KAAK,YACL,KAAK,gBAET,EAAe,UAAU,UAAY,WACjC,MAAY,KACZ,KAAK,MAAQ,GACb,KAAK,YAAY,MACZ,OAAO,YAAwB,MAAO,GAAW,IAAM,EAAK,SAAS,OACrE,QAAQ,YACT,MAAW,EAAM,KAAK,UAAU,EAAW,IAAK,EAAW,UAChD,GAAI,GAAK,WAAW,EAAO,SAAU,EAAW,MAC3D,EAAK,EAAI,EAAK,EACd,EAAK,EAAI,EAAK,EACd,EAAK,OAAS,EAAK,OACnB,EAAK,IAAM,EAAK,IAChB,EAAK,qBACL,EAAM,eAAe,IAAI,GACzB,EAAM,MAAM,KAAK,MAGzB,EAAe,UAAU,aAAe,WACpC,GAAI,KAAK,eAAe,cACpB,OAEJ,KAAK,gBAAgB,KAAK,eAAe,EAAG,KAAK,eAAe,GAChE,KAAK,aAAa,QAAQ,KAAK,eAAe,MAAO,KAAK,eAAe,QACzE,KAAK,kBACL,KAAK,aAAa,WAAW,KAAK,eAAe,OAErD,EAAe,UAAU,qBAAuB,WAC5C,MAAY,KACZ,KAAK,SAAW,KAAK,MAAM,SAAS,OAAO,SAC3C,KAAK,MAAM,SAAS,KAAK,eAAgB,WACrC,EAAM,gBAAgB,EAAM,MAAM,cAAc,EAAG,EAAM,MAAM,cAAc,KAEjF,KAAK,MAAM,SAAS,KAAK,cAAe,KAAK,iBAAkB,OAEnE,EAAe,UAAU,iBAAmB,WACxC,KAAK,MAAM,MAAM,EAAK,SAAS,iBAEnC,EAAe,UAAU,oBAAsB,WAC3C,KAAK,MAAM,GAAG,OAAO,MAAM,OAAO,aAAc,KAAK,cAAe,MACpE,KAAK,MAAM,GAAG,OAAQ,kBAClB,EAAW,EAAI,EACf,EAAW,EAAI,KAGvB,EAAe,UAAU,cAAgB,YACrC,MAAU,KAAK,QACC,EAAM,KAAK,oBAC3B,GAAI,EAAY,KACZ,GAAI,KAAK,aACL,OAEJ,KAAK,eAAe,cAAgB,GACpC,KAAK,gBAAgB,EAAQ,EAAG,EAAQ,GACxC,KAAK,kBACL,KAAK,oBACL,AAAI,KAAK,eAAe,UACpB,KAAK,WAAW,KAAK,cAG7B,KAAK,oBAAsB,GAE/B,EAAe,UAAU,gBAAkB,cACvC,MAAoB,KAAK,eAAe,iBAAiB,CAAE,EAAG,EAAG,EAAG,IACpE,KAAK,aAAe,GAAI,GAAK,mBAAmB,MAChD,KAAK,aAAa,EAAI,EAAc,EACpC,KAAK,aAAa,EAAI,EAAc,EACpC,KAAK,aAAa,GAAG,OAAO,MAAM,OAAO,yBAA0B,KAAK,oBAAqB,MAC7F,KAAK,aAAa,GAAG,OAAO,MAAM,OAAO,oBAAqB,KAAK,sBAAuB,MAC1F,KAAK,eAAe,IAAI,KAAK,cAC7B,KAAK,MAAM,aAAa,KAAK,eAEjC,EAAe,UAAU,oBAAsB,gBAC3C,MAAiB,IACC,IACP,OAAO,KAAK,KAAK,GAAM,KAClB,EAAK,SAAS,UAAY,EAC1C,AAAI,KAAK,SAAS,OACd,EAAa,EAAY,EAGzB,EAAc,EAAY,EAE9B,KAAK,aAAa,WAAW,EAAY,IAE7C,EAAe,UAAU,sBAAwB,gBAC7C,AAAI,KAAK,eAAe,UACpB,KAAK,WAAW,KAAK,eAG7B,EAAe,UAAU,WAAa,YAClC,MAAW,KAAK,KAAK,YAAY,EAAO,EAAG,EAAO,GAClD,GAAI,EACA,EAAO,EAAI,EAAK,EAChB,EAAO,EAAI,EAAK,OAGhB,MAAkB,YAAkB,MAAO,QAAO,KAAK,SAAS,QAAQ,EAAK,EAAG,EAAK,EAAG,EAAO,EAAG,EAAO,MACvF,EAAE,OAAO,KAAK,KAAK,MAAO,GAAa,GACzD,EAAO,EAAI,EAAY,EACvB,EAAO,EAAI,EAAY,IAG/B,EAAe,UAAU,gBAAkB,WACvC,KAAK,aAAe,GAAI,GAAK,mBAAmB,MAChD,KAAK,aAAa,WAAW,KAAK,eAAe,MACjD,KAAK,IAAI,SAAS,KAAK,eAE3B,EAAe,UAAU,OAAS,WAC9B,KAAK,mBACL,KAAK,kBACL,KAAK,aACL,KAAK,uBACL,KAAK,qBAET,EAAe,UAAU,iBAAmB,WACxC,KAAK,WAAW,QAAQ,EAAK,OAAO,WAAY,EAAK,OAAO,aAC5D,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,EAAK,OAAO,aAEpC,EAAe,UAAU,gBAAkB,WACvC,KAAK,WAAW,MAAQ,IACxB,KAAK,WAAW,EAAI,EAAK,OAAO,gBAChC,KAAK,WAAW,EAAI,KAAK,WAAW,YAAY,OAAS,EAAI,IAEjE,EAAe,UAAU,WAAa,WAClC,MAAe,EAAK,OAAO,WAAa,MACxB,EAAK,OAAO,YAAc,KAC7B,EAAW,KAAK,KAAK,aACrB,EAAY,KAAK,KAAK,cACvB,KAAK,IAAI,EAAQ,GAC7B,KAAK,KAAK,MAAQ,EAClB,KAAK,KAAK,EAAK,GAAK,OAAO,WAAa,KAAK,KAAK,WAAa,GAAS,EACxE,KAAK,KAAK,EAAK,GAAK,OAAO,YAAc,KAAK,KAAK,YAAc,GAAS,GAE9E,EAAe,UAAU,qBAAuB,WAC5C,KAAK,eAAe,MAAQ,KAAK,KAAK,MACtC,KAAK,eAAe,EAAI,KAAK,KAAK,EAClC,KAAK,eAAe,EAAI,KAAK,KAAK,GAEtC,EAAe,UAAU,kBAAoB,WACzC,GAAI,CAAC,KAAK,aACN,OAEJ,MAAe,EAAK,OAAO,WAAa,GACxC,KAAK,aAAa,MAAQ,EAAW,KAAK,aAAa,WACvD,KAAK,aAAa,EAAI,EAAK,OAAO,gBAClC,KAAK,aAAa,EAAI,EAAK,OAAO,YAAc,KAAK,aAAa,mBAAqB,EAAI,IAE/F,EAAe,UAAU,SAAW,WAChC,KAAK,iBAGT,EAAe,UAAU,cAAgB,WACrC,KAAK,gBAAgB,MAAM,WAAa,SACxC,KAAK,gBAAkB,KACvB,AAAI,KAAK,OACL,KAAK,MAAM,WAGZ,GACT,OAAO,OACT,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAyC,WACrC,cACI,KAAK,WAAa,EAGtB,SAAoB,UAAU,WAAa,WAGvC,KAAK,cACL,KAAK,eACA,KAAK,cAGL,MAAM,eAIf,EAAoB,UAAU,eAAiB,WAC3C,KAAK,SAAS,QAAQ,YAClB,AAAI,EAAY,aAAe,GAC3B,EAAY,WAAa,eAExB,AAAI,EAAY,aAAe,IAAM,EAAY,aAAe,GACjE,EAAY,WAAa,eAGzB,EAAY,WAAa,kBAIrC,EAAoB,UAAU,SAAW,WACrC,MAAY,KACZ,OAAO,KAAK,KAAK,YAAY,QAAQ,YACjC,MAAkB,EAAM,WAAW,GACnC,EAAY,MAAQ,EAAK,OAAO,kBAAkB,EAAY,YAAa,EAAY,UAG/F,EAAoB,UAAU,OAAS,WACnC,MAAO,QAAO,OAAO,KAAK,aAE9B,EAAoB,UAAU,IAAM,YAChC,MAAO,MAAK,WAAW,IAE3B,EAAoB,UAAU,OAAS,YACnC,MAAO,MAAK,WAAW,EAAY,aAEvC,EAAoB,UAAU,MAAQ,YAClC,MAAO,MAAK,WAAW,eAAe,EAAY,aAEtD,EAAoB,UAAU,IAAM,YAChC,KAAK,WAAW,EAAO,aAAe,GAE1C,EAAoB,UAAU,OAAS,cACnC,AAAI,IAAQ,QAAU,GAAM,IAC5B,MAAa,KAAK,yBAAyB,GAC3C,MAAI,IACA,MAAK,WAAW,GAAe,GAE5B,GAEX,EAAoB,UAAU,yBAA2B,YACrD,MAAO,CACH,YAAa,EACb,WAAY,iBACZ,MAAO,EACP,UAAW,KAAK,+BAChB,UAAW,KAAK,+BAChB,MAAO,CAAC,IAAK,IAAK,KAClB,MAAO,KAGf,EAAoB,UAAU,6BAA+B,WACzD,MAAO,CACH,QAAS,GACT,YAAa,GACb,SAAU,GACV,MAAO,IACP,EAAG,EACH,EAAG,IAGX,EAAoB,UAAU,6BAA+B,WACzD,MAAO,CACH,KAAM,KAAK,MAAM,WACjB,QAAS,GACT,SAAU,EACV,eAAgB,GAChB,eAAgB,EAAK,SAAS,YAC9B,UAAW,EACX,UAAW,GACX,YAAa,EACb,gBAAiB,EACjB,UAAW,KAAK,sBAChB,QAAS,KAAK,oBACd,MAAO,IAGf,EAAoB,UAAU,oBAAsB,WAChD,MAAqB,CAAC,EAAK,SAAS,iBAAkB,EAAK,SAAS,eACzD,KAAK,0BACH,EAAK,IAAI,YAAiB,MAAO,GAAe,SAAS,KACtE,MAAO,GAAE,UAAU,EAAM,IAE7B,EAAoB,UAAU,kBAAoB,WAC9C,MAAW,KAAK,0BACH,EAAK,IAAI,YAClB,MAAO,OAEX,MAAO,GAAE,UAAU,EAAM,IAE7B,EAAoB,UAAU,sBAAwB,WAClD,MAAe,EAAK,aAAa,gBACb,CAAC,EAAK,SAAS,qBACnC,MAAO,GAAE,QAAQ,MAAM,EAAG,eAAe,CAAC,GAAW,KAEzD,EAAoB,UAAU,YAAc,WACxC,MAA6B,MAAO,QAAO,mBAAyB,YACpE,GAAI,IAA2B,GAC3B,MAAO,SAAQ,QAAQ,IAE3B,MAAU,SAAS,SAAW,KAAO,SAAS,KAAO,WAC1C,sBACX,MAAO,MAAK,OAAO,EAAK,IAE5B,EAAoB,UAAU,aAAe,WACzC,MAAU,EAAK,OAAO,WAAa,aACnC,MAAO,MAAK,OAAO,EAAK,KAQ5B,EAAoB,UAAU,OAAS,cACnC,MAAY,KACZ,MAAO,IAAI,SAAQ,cACf,QACgB,GAAK,MAAM,QAAQ,SAAS,iBAAmB,MAAQ,IAAO,OAAS,EAAK,WACjF,CACP,SAAU,EAAW,EAAW,QAChC,QAAS,KAAK,UAAU,EAAM,eAExB,GAAI,gBACd,EAAI,KAAK,OAAQ,EAAK,IACtB,EAAI,OAAS,WACT,EAAQ,IAEZ,EAAI,QAAU,WACV,EAAO,IAEX,EAAI,KAAK,EAAM,+BAA+B,OAGtD,EAAoB,UAAU,+BAAiC,YAC3D,MAAO,IAAI,iBAAgB,IAE/B,EAAoB,UAAU,gBAAkB,WAC5C,MAAmB,OAAO,KAAK,KAAK,YACpC,MAAO,GAAa,IAAI,YACpB,MAAO,UAAS,MAGjB,KAEX,EAAK,oBAAsB,IAC5B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAqC,YACjC,UAAU,EAAiB,GAC3B,cACI,MAAY,EAAO,KAAK,KAAM,IAAU,KACxC,SAAM,aAAe,GACrB,EAAM,YAAc,EACpB,EAAM,eAAiB,EACvB,EAAM,SAAW,EACjB,EAAM,MAAM,MAAM,GAAG,OAAO,MAAM,OAAO,OAAQ,EAAM,OAAQ,GAC/D,EAAM,MAAM,OAAO,GAAG,OAAO,OAAO,OAAO,OAAQ,EAAM,aAAc,GACvE,EAAM,KAAO,YACb,EAAM,gBACN,EAAM,UACC,EAEX,SAAgB,UAAU,MAAQ,WAC9B,KAAK,QAAU,GACf,KAAK,OAAS,GACd,KAAK,MAAQ,EACb,KAAK,YAAc,EACnB,KAAK,SAAW,EAChB,KAAK,aAAe,GACpB,KAAK,KAAK,mBAAmB,IAEjC,EAAgB,UAAU,cAAgB,WACtC,KAAK,WAAa,KAAK,MAAM,IAAI,MAAM,EAAG,EAAG,YAAa,MAC1D,KAAK,IAAI,KAAK,aAElB,EAAgB,UAAU,QAAU,WAChC,KAAK,KAAO,GAAI,GAAK,YAAY,KAAK,OACtC,KAAK,IAAI,KAAK,OAElB,EAAgB,UAAU,OAAS,YAC/B,UACa,GAAK,GAAa,KAA8B,OAAS,EAAS,SAAW,MAAQ,IAAO,OAAS,EAAK,EAAK,OAAO,aACrH,GAAK,GAAa,KAA8B,OAAS,EAAS,UAAY,MAAQ,IAAO,OAAS,EAAK,EAAK,OAAO,YACrI,KAAK,iBAAiB,EAAO,GAC7B,KAAK,UAAU,EAAO,IAE1B,EAAgB,UAAU,iBAAmB,cACzC,KAAK,WAAW,QAAQ,EAAO,GAC/B,KAAK,WAAW,EAAI,EAAQ,EAC5B,KAAK,WAAW,EAAI,EAAS,GAEjC,EAAgB,UAAU,UAAY,cAClC,MAAe,EAAQ,IACvB,KAAK,KAAK,MAAQ,KAAK,IAAI,EAAG,EAAW,KAAK,KAAK,YACnD,KAAK,KAAK,EAAI,EAAQ,EACtB,KAAK,KAAK,EAAI,EAAS,GAE3B,EAAgB,UAAU,gBAAkB,WACxC,KAAK,aAAe,IAExB,EAAgB,UAAU,aAAe,cACrC,GAAI,KAAK,eAAiB,GACtB,OAEJ,GAAI,KAAK,UAAY,GACjB,OAEJ,KAAK,aAAe,EACpB,AAAI,KAAK,YAAc,KAAK,gBACxB,MAAK,aAAe,KAAK,eACzB,KAAK,eAAiB,OAAO,KAAK,IAAI,QAAQ,IAAK,KACnD,KAAK,UAAY,OAAO,KAAK,IAAI,QAAQ,EAAG,GAC5C,AAAI,KAAK,UAAY,IACjB,MAAK,SAAW,IAEpB,KAAK,KAAK,YAAY,KAAK,SAAW,OAG9C,EAAgB,UAAU,YAAc,WACpC,KAAK,aAAe,GACpB,KAAK,SAAW,IAChB,KAAK,KAAK,YAAY,IAE1B,EAAgB,UAAU,KAAO,WAC7B,KAAK,MAAM,OAAO,IAAI,CAClB,QAAS,KACT,MAAO,IACP,SAAU,IACV,KAAM,OAAO,KAAK,OAAO,MAAM,IAC/B,MAAO,EACP,WAAY,KAAK,eAAe,KAAK,SAG7C,EAAgB,UAAU,eAAiB,WACvC,KAAK,QAET,EAAgB,UAAU,QAAU,YAChC,AAAI,KAAK,OACL,MAAK,MAAM,MAAM,IAAI,OAAO,MAAM,OAAO,OAAQ,KAAK,OAAQ,MAC9D,KAAK,MAAM,OAAO,IAAI,OAAO,OAAO,OAAO,OAAQ,KAAK,aAAc,OAE1E,EAAO,UAAU,QAAQ,KAAK,KAAM,IAEjC,GACT,OAAO,YAAY,WACrB,EAAK,gBAAkB,IACxB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,KAAU,OACtB,EAAY,QAAa,UACzB,EAAY,KAAU,SACvB,EAAc,EAAK,aAAgB,GAAK,YAAc,OAC1D,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAmB,OAAO,OAAO,eAEjC,AAAC,aACG,EAAa,YAAiB,8BAC/B,EAAe,EAAK,cAAiB,GAAK,aAAe,KAC5D,MAA6B,YACzB,UAAU,EAAS,GACnB,gBACI,MAAY,EAAO,KAAK,OAAS,KACjC,SAAM,MAAQ,EACd,EAAM,KAAO,EACN,EAEX,cAAO,eAAe,EAAQ,UAAW,MAAO,CAC5C,IAAK,WACD,MAAO,MAAK,MAEhB,IAAK,YACD,KAAK,KAAO,KAAK,IAAI,EAAG,GACxB,KAAK,KAAK,EAAa,YAAa,OAExC,WAAY,GACZ,aAAc,KAElB,OAAO,eAAe,EAAQ,UAAW,OAAQ,CAC7C,IAAK,WACD,MAAO,MAAK,OAEhB,WAAY,GACZ,aAAc,KAEX,GACT,GACF,EAAK,QAAU,IAChB,MAAS,MAAO,KAGnB,SACA,AAAC,aACG,MAAqC,WACjC,cACI,KAAK,KAAO,EACZ,KAAK,MAAQ,KAAK,KAAK,MACvB,KAAK,MAAM,GAAG,EAAO,eAAe,MAAO,KAAK,kBAAmB,MACnE,KAAK,MAAQ,KAAK,KAAK,MACvB,KAAK,MAAM,GAAG,EAAO,eAAe,gBAAiB,KAAK,iBAAkB,MAC5E,KAAK,eAET,SAAgB,UAAU,kBAAoB,WAC1C,KAAK,SAAS,QAAQ,YAClB,EAAQ,IAAM,KAGtB,EAAgB,UAAU,iBAAmB,WACzC,MAAe,KAAK,KAAK,MAAM,MAAM,gBACrC,KAAK,SAAS,QAAQ,YAClB,MAAY,EAAS,EAAQ,MAC7B,EAAQ,MAAQ,EAAM,MACtB,EAAQ,KAAO,EAAM,QAG7B,EAAgB,UAAU,aAAe,WACrC,MAAY,OACG,KAAK,KAAK,MAAM,MAAM,kBACtB,KAAK,MAAM,SAAS,EAAO,aAAa,mBAC3C,CAAC,EAAO,YAAY,KAAM,EAAO,YAAY,QAAS,EAAO,YAAY,MACrF,KAAK,SAAW,EAAM,IAAI,YACtB,QACW,GAAK,EAAS,MAAW,MAAQ,IAAO,OAAS,EAAK,IACrD,EAAS,KACP,GAAI,GAAO,QAAQ,EAAM,GACvC,SAAQ,MAAQ,EAAM,MACtB,EAAQ,KAAO,EAAM,KACrB,EAAQ,GAAG,EAAO,aAAa,YAAa,EAAM,oBAAqB,GAChE,KAGf,EAAgB,UAAU,oBAAsB,YAC5C,QACkB,KAAK,MAAM,SAAS,EAAO,aAAa,mBAC5C,SAAS,SAAS,GAAI,GAAe,GAAK,GAAI,EAAG,EAAQ,MAAQ,EAAQ,IAAK,IAC5F,KAAK,MAAM,UAAU,EAAO,aAAa,gBAAiB,IAE9D,EAAgB,UAAU,UAAY,YAClC,MAAO,MAAK,SAAS,KAAK,YAAqB,MAAO,GAAQ,OAAS,KAE3E,EAAgB,UAAU,UAAY,WAClC,MAAO,QAAO,KAAK,IAAI,KAAK,KAAK,WAErC,EAAgB,UAAU,eAAiB,YACvC,MAAY,KACZ,OAAO,QAAQ,GAAM,QAAQ,YACzB,MAAW,EAAM,KACP,EAAM,GAChB,EAAM,UAAU,GAAM,KAAO,KAG9B,KAEX,EAAO,gBAAkB,IAC1B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAS,cAAc,gBACI,cAAc,uBAClB,cAAc,mBAErC,AAAC,aACG,EAAgB,aAAkB,iBACnC,EAAkB,EAAO,iBAAoB,GAAO,gBAAkB,KACzE,MAA0C,WACtC,cACI,KAAK,UAAY,GACjB,MAAuB,KAAK,mBAC5B,GAAI,GACA,KAAK,UAAY,GACjB,OAEJ,KAAK,KAAO,EACZ,KAAK,UAAY,GACjB,KAAK,aAAe,GACpB,KAAK,SACL,KAAK,sBACL,KAAK,qBACL,EAAG,eAAe,OAAO,KAAK,OAAO,cAAc,YACnD,EAAG,WAAW,mCAAoC,4CAClD,EAAG,eAAe,WAClB,KAAK,gBACL,KAAK,gBAET,SAAqB,UAAU,iBAAmB,WAC9C,MAAqB,MAAM,QAAQ,aAAa,aAChD,MAAI,GACO,GAEJ,EAAO,KAAK,aAAe,MAAO,IAAO,aAAe,KAAK,eAExE,EAAqB,UAAU,YAAc,WACzC,MACA,MAAQ,GAAK,SAAS,YAAc,MAAQ,IAAO,OAAS,OAAS,EAAG,SAAS,cAErF,EAAqB,UAAU,OAAS,WACpC,MAAe,MAAM,QAAQ,YAAY,gBACzC,AAAI,IAAa,EACb,EAAG,kBAAkB,IAEpB,AAAI,IAAa,GAClB,EAAG,qBAAqB,KAGhC,EAAqB,UAAU,oBAAsB,WACjD,EAAG,qCAAqC,CAAC,OAAQ,SAAU,oBAAqB,aAAc,cAC9F,EAAG,qBAAqB,QACxB,EAAG,qCAAqC,CAAC,EAAO,aAAa,OAAQ,EAAO,aAAa,MAAO,EAAO,aAAa,WACpH,EAAG,qBAAqB,KAAK,KAAK,cAClC,MAAe,CAAC,SAAU,OAAQ,UAAW,KAAM,eAAgB,QAAS,SAAU,OAAQ,UAAW,WACpF,KAAK,kBAAkB,GAC5C,EAAG,qCAAqC,GACxC,EAAG,qBAAqB,IAE5B,EAAqB,UAAU,kBAAoB,YAC/C,MAAY,OACS,EAAS,KAAK,YAAqB,MAAO,GAAM,KAAK,OAAO,QAAQ,KAAa,KACtG,MAAO,IAAmB,KAAoC,EAAiB,SAEnF,EAAqB,UAAU,mBAAqB,WAChD,OAAO,iBAAiB,SAAU,WAC9B,EAAG,cACJ,CAAE,KAAM,MAEf,EAAqB,UAAU,eAAiB,YAC5C,KAAK,qBAAqB,EAAqB,MAAO,IAE1D,EAAqB,UAAU,kBAAoB,cAC/C,KAAK,qBAAqB,EAAqB,SAAU,EAAO,IAEpE,EAAqB,UAAU,cAAgB,cAC3C,KAAK,qBAAqB,EAAqB,KAAM,EAAO,IAEhE,EAAqB,UAAU,qBAAuB,gBAClD,GAAI,KAAK,YAAc,GACnB,OAEJ,MAAe,SAAW,EAAE,SAAS,EAAM,WAAY,EAAG,KAC1D,EAAG,oBAAoB,EAAM,EAAU,GAAI,GAAI,IAEnD,EAAqB,UAAU,oBAAsB,cACjD,GAAI,KAAK,YAAc,GACnB,OAEJ,MAAe,SAAW,EAAE,SAAS,EAAM,WAAY,EAAG,KAC1D,EAAG,eAAe,EAAW,YAAc,IAE/C,EAAqB,UAAU,YAAc,kBACzC,GAAI,KAAK,YAAc,GACnB,OAEJ,EAAG,WAAW,EAAQ,EAAM,EAAY,IAE5C,EAAqB,UAAU,eAAiB,gBAC5C,GAAI,KAAK,YAAc,GACnB,OAEJ,EAAG,eAAe,eAAiB,EAAY,IAAM,EAAO,IAAM,IAEtE,EAAqB,UAAU,iBAAmB,cAC9C,GAAI,KAAK,YAAc,GACnB,OAMJ,GAJA,AAAI,IAAS,SACT,MAAK,aAAa,GAAS,KAAK,MAChC,EAAG,eAAe,WAAa,EAAQ,IAAM,IAE7C,IAAS,YACT,MAAiB,KAAK,MAAQ,KAAK,aAAa,KACjC,OAAO,KAAK,QAAQ,EAAa,IAAM,IACtD,EAAG,eAAe,WAAa,EAAQ,IAAM,EAAM,KAG3D,EAAqB,UAAU,gBAAkB,cAC7C,GAAI,KAAK,YAAc,GACnB,OAEJ,EAAG,eAAe,EAAO,IAE7B,EAAqB,UAAU,UAAY,cAEvC,GADA,AAAI,IAAa,QAAU,GAAW,EAAiB,OACnD,KAAK,YAAc,GACnB,OAEJ,EAAG,cAAc,EAAU,IAE/B,EAAqB,UAAU,cAAgB,WAC3C,MAAY,KAAK,KAAK,KAChB,iBACA,qBACN,KAAK,gBAAgB,EAAO,KAAK,KAAK,KAAO,EAAI,IAErD,EAAqB,UAAU,cAAgB,WAC3C,MAAY,KAAK,KAAK,KAChB,iBACA,qBACN,KAAK,gBAAgB,EAAO,KAAK,KAAK,KAAO,EAAI,IAErD,EAAqB,UAAU,qBAAuB,cAClD,MAAI,MAAK,YAAc,GACZ,EAEJ,EAAG,8BAA8B,EAAK,IAE1C,KAEX,EAAO,qBAAuB,IAC/B,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAkB,cAAc,cAChB,cAAc,YACI,WAC9B,cAEA,SAAa,UAAU,KAAO,WAC1B,MAAO,SAAQ,WAEnB,EAAa,UAAU,SAAW,cAElC,EAAa,UAAU,iBAAmB,aAE1C,EAAa,UAAU,oBAAsB,cAE7C,EAAa,UAAU,oBAAsB,aAE7C,EAAa,UAAU,cAAgB,aAEvC,EAAa,UAAU,aAAe,aAEtC,EAAa,UAAU,gBAAkB,WACrC,MAAO,SAAQ,QAAQ,SAE3B,EAAa,UAAU,cAAgB,WACnC,MAAO,SAAQ,QAAQ,SAE3B,EAAa,UAAU,UAAY,cAE5B,KAEX,EAAK,aAAe,EACpB,MAAoC,WAChC,cACI,KAAK,UAAY,GACjB,KAAK,SAAW,GAChB,KAAK,iBAAmB,GACxB,KAAK,KAAO,EACZ,KAAK,UAAY,MAAO,UAAY,YACpC,KAAK,IAAM,KAAK,UAAY,QAAU,GAAI,GAC1C,KAAK,IAAI,SAAS,MAAM,QAAQ,aAAa,YAEjD,SAAe,UAAU,KAAO,WAC5B,MAAY,KACZ,MAAO,MAAK,IAAI,OACX,KAAK,WACN,EAAM,KAAK,UAAU,gBAAgB,sBAEpC,MAAM,WACP,EAAM,KAAK,UAAU,gBAAgB,kBAAmB,IACxD,EAAM,iBAAmB,KAExB,QAAQ,WACT,MACA,AAAC,GAAK,EAAM,KAAK,SAAW,MAAQ,IAAO,QAAkB,EAAG,gBAAgB,CAC5E,QAAS,EAAM,sBAI3B,EAAe,UAAU,iBAAmB,WACxC,MAAY,KACZ,KAAK,KAAK,MAAM,OAAO,QAAQ,YAAmB,MAAQ,GAAM,KAAO,KAE3E,EAAe,UAAU,gBAAkB,YACvC,MAAY,OAEZ,MAAI,MAAK,iBACE,QAAQ,OAAO,WAEzB,IAAK,KAAK,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,QAAS,EAAU,aAAc,EAAW,QAChI,KAAK,eACP,QAAQ,WACT,EAAM,IAAI,kBACL,KAAK,WACN,MACA,AAAC,GAAK,EAAM,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,KAAM,EAAU,aAAc,EAAW,UAEpI,MAAM,WACP,MACA,AAAC,GAAK,EAAM,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,WAAY,EAAU,aAAc,EAAW,UAE1I,QAAQ,WACT,EAAM,wBAIlB,EAAe,UAAU,cAAgB,cACrC,MAAY,OAEZ,MAAI,MAAK,iBACL,MAAK,KAAK,OAAO,2BACV,QAAQ,OAAO,YAEzB,IAAK,KAAK,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,QAAS,EAAU,cAAe,EAAW,QACjI,KAAK,eACP,QAAQ,WACT,EAAM,IAAI,gBACL,KAAK,YACN,MACA,AAAC,GAAK,EAAM,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,KAAM,EAAU,cAAe,EAAW,QACtI,AAAI,EACA,EAAU,YAGV,GAAU,UAAY,EAAU,WAChC,EAAM,KAAK,OAAO,oCAGrB,MAAM,WACP,MACA,EAAU,QAAU,EAAU,SAC9B,EAAM,KAAK,OAAO,2BACjB,GAAK,EAAM,KAAK,aAAe,MAAQ,IAAO,QAAkB,EAAG,YAAY,EAAY,WAAY,EAAU,cAAe,EAAW,UAE3I,QAAQ,WACT,EAAM,wBAIlB,EAAe,UAAU,aAAe,WACpC,YAAK,SAAW,KAAK,KAAK,MAAM,KAChC,KAAK,KAAK,MAAM,KAAO,GACvB,KAAK,KAAK,OAAO,MAAM,cAAgB,OACvC,KAAK,KAAK,MAAM,SAAS,QAAU,GAC5B,KAAK,KAAK,MAAM,uBAE3B,EAAe,UAAU,gBAAkB,WACvC,KAAK,KAAK,MAAM,KAAO,KAAK,SAC5B,KAAK,KAAK,OAAO,MAAM,cAAgB,OACvC,KAAK,KAAK,MAAM,SAAS,QAAU,GACnC,KAAK,KAAK,MAAM,sBAEb,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAY,gBAAqB,oBAClC,EAAc,EAAK,aAAgB,GAAK,YAAc,OAC1D,MAAS,MAAO,KACnB,SACA,AAAC,aACG,MAAoC,WAChC,aACI,KAAK,QAAU,SAAS,eAAe,6BAE3C,SAAe,UAAU,OAAS,WAC9B,KAAK,QAAQ,MAAM,QAAU,OAC7B,KAAK,QAAQ,MAAM,QAAU,IAC7B,KAAK,QAAQ,UAAU,OAAO,mBAC9B,KAAK,QAAQ,UAAU,IAAI,mBAE/B,EAAe,UAAU,QAAU,WAC/B,MAAY,KACZ,KAAK,QAAQ,UAAU,OAAO,kBAC9B,KAAK,QAAQ,UAAU,IAAI,mBAC3B,WAAW,WACP,EAAM,QAAQ,MAAM,QAAU,QAC/B,MAEP,EAAe,UAAU,UAAY,WACjC,MAAO,MAAK,QAAQ,MAAM,UAAY,QAEnC,KAEX,EAAK,eAAiB,IACvB,MAAS,MAAO,KAwCnB,SACA,AAAC,aACG,MACA,AAAC,aACG,EAAa,MAAW,QACxB,EAAa,OAAY,SACzB,EAAa,SAAc,aAC5B,EAAe,EAAK,cAAiB,GAAK,aAAe,KAC5D,MAA0B,YACtB,UAAU,EAAM,GAChB,aACI,MAAY,KACZ,SAAK,gBACL,EAAK,mBACL,MAAM,UAAU,WAChB,MAAM,kBAAkB,SACxB,MAAM,iBAAiB,SAEvB,EAAQ,EAAO,KAAK,KAAM,EAAK,kBAAkB,WAAa,KAC9D,EAAM,KAAO,GACb,EAAM,KAAO,GACb,EAAM,MAAQ,GAAI,GAAK,UAAU,GACjC,EAAM,MAAQ,GAAI,GAAK,UAAU,EAAO,eACxC,EAAM,eAAiB,GAAI,GAAK,eAChC,EAAM,eACN,EAAM,YACC,EAEX,SAAK,cAAgB,WACjB,EAAK,YAAc,MAAM,QAAQ,aAAa,OAC1C,EAAK,aAIb,EAAK,iBAAmB,WACpB,MAAmB,CAAC,YAAa,UAAW,eACxB,EAAa,KAAK,YAAkB,MAAO,UAAS,SAAS,SAAS,KAC1F,AAAI,GAAiB,MAAM,QAAQ,aAAa,WAC5C,GAAK,cAAgB,GACrB,SAAS,MAAQ,SAAS,MAAQ,cAI1C,EAAK,UAAU,aAAe,WAC1B,MAAuB,KAAK,OAAO,YAAc,OAAO,MAAM,IAC9D,GAAI,IAAqB,GACrB,OAEJ,KAAK,2BAA2B,KAAK,QACrC,KAAK,OAAO,MAAM,UAAY,qCAC9B,KAAK,MAAM,gBAEf,EAAK,UAAU,sBAAwB,YACnC,MAAI,MAAK,KACE,OAEF,KAAK,KACH,OAGA,GAGf,EAAK,UAAU,2BAA6B,YACxC,MAAkB,SAAS,cAAc,OACzC,EAAY,UAAY,UACxB,EAAY,GAAK,eACjB,EAAO,WAAW,aAAa,EAAa,GAC5C,MAAmB,SAAS,cAAc,OAC1C,EAAa,UAAY,UACzB,EAAa,GAAK,gBAClB,EAAO,WAAW,aAAa,EAAc,EAAO,cAExD,EAAK,UAAU,UAAY,WACvB,KAAK,MAAM,IAAI,EAAK,SAAS,OAAQ,EAAK,aAC1C,KAAK,MAAM,IAAI,EAAK,SAAS,KAAM,EAAK,KAAM,IAC9C,KAAK,MAAM,IAAI,EAAK,SAAS,UAAW,EAAK,WAC7C,KAAK,MAAM,IAAI,EAAK,SAAS,WAAY,EAAK,WAC9C,KAAK,MAAM,IAAI,EAAK,SAAS,eAAgB,EAAK,cAClD,KAAK,MAAM,IAAI,EAAK,SAAS,cAAe,EAAK,cACjD,KAAK,MAAM,IAAI,EAAK,SAAS,SAAU,EAAK,UAC5C,KAAK,MAAM,IAAI,EAAK,SAAS,aAAc,EAAK,aAChD,AAAI,EAAK,eACL,MAAK,MAAM,IAAI,EAAK,SAAS,kBAAmB,EAAK,iBACrD,KAAK,MAAM,IAAI,EAAK,SAAS,kBAAmB,EAAK,YACrD,KAAK,MAAM,IAAI,EAAK,SAAS,aAAc,EAAK,QAChD,KAAK,MAAM,IAAI,EAAK,SAAS,iBAAkB,EAAK,WACpD,KAAK,MAAM,IAAI,EAAK,SAAS,gBAAiB,EAAK,kBAG3D,EAAK,UAAU,YAAc,gBACzB,KAAK,YAAY,gBAAgB,YAAY,EAAiB,EAAa,IAE/E,EAAK,UAAU,aAAe,cAC1B,KAAK,YAAY,gBAAgB,YAAY,EAAc,EAAc,IAE7E,EAAK,UAAU,iBAAmB,cAC9B,KAAK,MAAM,OAAO,QAAQ,YACtB,MAAiB,EAAM,eAAe,GACtC,GAAI,GACA,AAAa,GAAS,EAAwB,EAAM,MAAM,IAC1D,OAEJ,EAAM,GAAO,KAGrB,EAAK,cAAgB,GACrB,EAAK,YAAc,GACnB,EAAK,oBAAsB,GACpB,GACT,OAAO,MACT,EAAK,KAAO,IACb,MAAS,MAAO,KACnB,oBACA,AAAC,aACG,EAAgB,QAAa,UAC7B,EAAgB,WAAgB,aAChC,EAAgB,YAAiB,gBAClC,iBAAoB,iBAAkB,KAEzC,SACA,AAAC,aACG,aACI,GAAI,OAAO,cAAgB,gBAAgB,YACvC,OAEJ,MAAuB,MAAM,QAAQ,aAAa,WAAY,KAC9D,GAAI,EACA,OAEJ,MAAc,CAAC,MAAO,UAAW,uCAAwC,WAAY,SAAU,WAAY,uBAAwB,QACnI,AAAC,eACG,MAAgB,YACZ,KAAO,EAAE,GACL,EAAU,KAAK,EAAU,UAGjC,EAAU,EAAE,KACd,EAAS,KACX,MAAc,cACV,GAAa,EACb,MAAgB,EAAQ,GACxB,MAAO,IAEX,AAAC,YAIG,UAHgB,CAAC,eAAgB,eAAgB,EAAQ,UACzC,CAAC,KACD,OAAO,EAAQ,QAAQ,EAAQ,UAC1B,EAAK,EAAY,EAAU,EAAQ,QAAS,KAC7D,MAAgB,KAAK,EAAU,IAC/B,GAAI,EAAU,EAAQ,QAAQ,EAAW,EAAU,OAAS,EAAU,UAAY,IAC9E,EAAY,CAAC,CAAC,GACd,OAGR,GAAI,CAAC,GACD,MAAgB,EAAQ,SACR,KAAK,GACrB,OAAO,SAAS,EAAQ,QAAU,EAClC,OAAO,EAAQ,QAAQ,EAAQ,UAAY,OAAO,EAAQ,SAAY,QAAO,EAAQ,QAAQ,EAAQ,QAAU,OAAO,EAAQ,cAI1I,EAAK,SAAW,IACjB,MAAS,MAAO,KAInB,OAAO,iBAAiB,OAAQ,WAC5B,KAAK,WACL,KAAK,mBACL,KAAK,gBAET,SACA,AAAC,aACG,aACI,MAAiB,MAAM,QAAQ,YAAY,WAC3C,GAAI,GAAc,GACd,IACA,OAEJ,EAAmB,GAEvB,EAAK,iBAAmB,EACxB,aACI,AAAa,GAAY,OAAO,KAAK,OAAO,cAAe,OAAO,KAAK,OAAO,WAElF,cACI,MAAW,SAAS,qBAAqB,QAAQ,KACpC,SAAS,cAAc,UACpC,EAAO,IAAM,+BACb,EAAO,KAAO,kBACd,EAAO,OAAS,EAAmB,KAAK,KAAM,GAC9C,EAAK,YAAY,GAErB,cACI,MAAM,KAAK,CACP,KAAM,CAAC,UAAW,WAAY,UAElC,IACA,AAAI,IAAU,GACV,MAAM,OAGd,aACI,MAAkB,OAAO,cACR,MAAM,QAAQ,aAAa,SAC5C,AAAI,GAAc,IAAgB,gBAAgB,QAC9C,EAAW,EAAa,GAGxB,IAGR,EAAK,YAAc,EACnB,gBACI,MAAc,CACV,YAAa,EAAY,WACzB,QAAS,OAAO,KAAK,OAAO,cAC5B,cAAe,CAAC,eAAgB,iBAChC,aAAc,CAAC,eAAgB,gBAAiB,mEAChD,2BAA4B,GAC5B,KAAM,CACF,QAAS,OAAO,KAAK,OAAO,UAGpC,AAAI,GACA,EAAQ,cAAc,KAAK,SAAS,UAExC,MAAM,OAAO,6DAA8D,GAAS,UACpF,MAAM,QAAQ,WACV,MAGR,aACI,IACI,OAAO,aAAkB,GAAI,GAAK,cAGlC,MAAiB,CACb,oBACA,qBACA,uBACA,yBACA,yBAEe,EAAW,KAAK,YAAmB,MAAO,GAAM,WAAW,SAAS,OACpE,SAAS,OAAO,SAAS,iBAC5C,GAAI,GAAgB,IAAiB,GACjC,AAA4B,EAAM,WAElC,AAAI,SAAS,OAAO,QAAQ,OAAS,EACjC,SAAS,QAAQ,SAAS,KAAO,kBAGjC,SAAS,QAAQ,SAAS,KAAO,sBAIrC,MAAM,OAInB,MAAS,MAAO",
  "names": []
}
